var X4=Object.defineProperty;var U4=(A,j)=>{for(var q in j)X4(A,q,{get:j[q],enumerable:!0,configurable:!0,set:($)=>j[q]=()=>$})};var Pq=[],l$=[];(()=>{let A="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((j)=>j?parseInt(j,36):1);for(let j=0,q=0;j<A.length;j++)(j%2?l$:Pq).push(q=q+A[j])})();function Y4(A){if(A<768)return!1;for(let j=0,q=Pq.length;;){let $=j+q>>1;if(A<Pq[$])q=$;else if(A>=l$[$])j=$+1;else return!0;if(j==q)return!1}}function g$(A){return A>=127462&&A<=127487}var f$=8205;function d$(A,j,q=!0,$=!0){return(q?c$:Q4)(A,j,$)}function c$(A,j,q){if(j==A.length)return j;if(j&&s$(A.charCodeAt(j))&&i$(A.charCodeAt(j-1)))j--;let $=Lq(A,j);j+=p$($);while(j<A.length){let B=Lq(A,j);if($==f$||B==f$||q&&Y4(B))j+=p$(B),$=B;else if(g$(B)){let G=0,K=j-2;while(K>=0&&g$(Lq(A,K)))G++,K-=2;if(G%2==0)break;else j+=2}else break}return j}function Q4(A,j,q){while(j>0){let $=c$(A,j-2,q);if($<j)return $;j--}return 0}function Lq(A,j){let q=A.charCodeAt(j);if(!i$(q)||j+1==A.length)return q;let $=A.charCodeAt(j+1);if(!s$($))return q;return(q-55296<<10)+($-56320)+65536}function s$(A){return A>=56320&&A<57344}function i$(A){return A>=55296&&A<56320}function p$(A){return A<65536?1:2}class m{lineAt(A){if(A<0||A>this.length)throw new RangeError(`Invalid position ${A} in document of length ${this.length}`);return this.lineInner(A,!1,1,0)}line(A){if(A<1||A>this.lines)throw new RangeError(`Invalid line number ${A} in ${this.lines}-line document`);return this.lineInner(A,!0,1,0)}replace(A,j,q){[A,j]=ij(this,A,j);let $=[];if(this.decompose(0,A,$,2),q.length)q.decompose(0,q.length,$,3);return this.decompose(j,this.length,$,1),eA.from($,this.length-(j-A)+q.length)}append(A){return this.replace(this.length,this.length,A)}slice(A,j=this.length){[A,j]=ij(this,A,j);let q=[];return this.decompose(A,j,q,0),eA.from(q,j-A)}eq(A){if(A==this)return!0;if(A.length!=this.length||A.lines!=this.lines)return!1;let j=this.scanIdentical(A,1),q=this.length-this.scanIdentical(A,-1),$=new cj(this),B=new cj(A);for(let G=j,K=j;;){if($.next(G),B.next(G),G=0,$.lineBreak!=B.lineBreak||$.done!=B.done||$.value!=B.value)return!1;if(K+=$.value.length,$.done||K>=q)return!0}}iter(A=1){return new cj(this,A)}iterRange(A,j=this.length){return new uq(this,A,j)}iterLines(A,j){let q;if(A==null)q=this.iter();else{if(j==null)j=this.lines+1;let $=this.line(A).from;q=this.iterRange($,Math.max($,j==this.lines+1?this.length:j<=1?0:this.line(j-1).to))}return new gq(q)}toString(){return this.sliceString(0)}toJSON(){let A=[];return this.flatten(A),A}constructor(){}static of(A){if(A.length==0)throw new RangeError("A document must have at least one line");if(A.length==1&&!A[0])return m.empty;return A.length<=32?new AA(A):eA.from(AA.split(A,[]))}}class AA extends m{constructor(A,j=O4(A)){super();this.text=A,this.length=j}get lines(){return this.text.length}get children(){return null}lineInner(A,j,q,$){for(let B=0;;B++){let G=this.text[B],K=$+G.length;if((j?q:K)>=A)return new e$($,K,q,G);$=K+1,q++}}decompose(A,j,q,$){let B=A<=0&&j>=this.length?this:new AA(n$(this.text,A,j),Math.min(j,this.length)-Math.max(0,A));if($&1){let G=q.pop(),K=X7(B.text,G.text.slice(),0,B.length);if(K.length<=32)q.push(new AA(K,G.length+B.length));else{let J=K.length>>1;q.push(new AA(K.slice(0,J)),new AA(K.slice(J)))}}else q.push(B)}replace(A,j,q){if(!(q instanceof AA))return super.replace(A,j,q);[A,j]=ij(this,A,j);let $=X7(this.text,X7(q.text,n$(this.text,0,A)),j),B=this.length+q.length-(j-A);if($.length<=32)return new AA($,B);return eA.from(AA.split($,[]),B)}sliceString(A,j=this.length,q=`
`){[A,j]=ij(this,A,j);let $="";for(let B=0,G=0;B<=j&&G<this.text.length;G++){let K=this.text[G],J=B+K.length;if(B>A&&G)$+=q;if(A<J&&j>B)$+=K.slice(Math.max(0,A-B),j-B);B=J+1}return $}flatten(A){for(let j of this.text)A.push(j)}scanIdentical(){return 0}static split(A,j){let q=[],$=-1;for(let B of A)if(q.push(B),$+=B.length+1,q.length==32)j.push(new AA(q,$)),q=[],$=-1;if($>-1)j.push(new AA(q,$));return j}}class eA extends m{constructor(A,j){super();this.children=A,this.length=j,this.lines=0;for(let q of A)this.lines+=q.lines}lineInner(A,j,q,$){for(let B=0;;B++){let G=this.children[B],K=$+G.length,J=q+G.lines-1;if((j?J:K)>=A)return G.lineInner(A,j,q,$);$=K+1,q=J+1}}decompose(A,j,q,$){for(let B=0,G=0;G<=j&&B<this.children.length;B++){let K=this.children[B],J=G+K.length;if(A<=J&&j>=G){let Z=$&((G<=A?1:0)|(J>=j?2:0));if(G>=A&&J<=j&&!Z)q.push(K);else K.decompose(A-G,j-G,q,Z)}G=J+1}}replace(A,j,q){if([A,j]=ij(this,A,j),q.lines<this.lines)for(let $=0,B=0;$<this.children.length;$++){let G=this.children[$],K=B+G.length;if(A>=B&&j<=K){let J=G.replace(A-B,j-B,q),Z=this.lines-G.lines+J.lines;if(J.lines<Z>>4&&J.lines>Z>>6){let X=this.children.slice();return X[$]=J,new eA(X,this.length-(j-A)+q.length)}return super.replace(B,K,J)}B=K+1}return super.replace(A,j,q)}sliceString(A,j=this.length,q=`
`){[A,j]=ij(this,A,j);let $="";for(let B=0,G=0;B<this.children.length&&G<=j;B++){let K=this.children[B],J=G+K.length;if(G>A&&B)$+=q;if(A<J&&j>G)$+=K.sliceString(A-G,j-G,q);G=J+1}return $}flatten(A){for(let j of this.children)j.flatten(A)}scanIdentical(A,j){if(!(A instanceof eA))return 0;let q=0,[$,B,G,K]=j>0?[0,0,this.children.length,A.children.length]:[this.children.length-1,A.children.length-1,-1,-1];for(;;$+=j,B+=j){if($==G||B==K)return q;let J=this.children[$],Z=A.children[B];if(J!=Z)return q+J.scanIdentical(Z,j);q+=J.length+1}}static from(A,j=A.reduce((q,$)=>q+$.length+1,-1)){let q=0;for(let Q of A)q+=Q.lines;if(q<32){let Q=[];for(let O of A)O.flatten(Q);return new AA(Q,j)}let $=Math.max(32,q>>5),B=$<<1,G=$>>1,K=[],J=0,Z=-1,X=[];function U(Q){let O;if(Q.lines>B&&Q instanceof eA)for(let F of Q.children)U(F);else if(Q.lines>G&&(J>G||!J))Y(),K.push(Q);else if(Q instanceof AA&&J&&(O=X[X.length-1])instanceof AA&&Q.lines+O.lines<=32)J+=Q.lines,Z+=Q.length+1,X[X.length-1]=new AA(O.text.concat(Q.text),O.length+1+Q.length);else{if(J+Q.lines>$)Y();J+=Q.lines,Z+=Q.length+1,X.push(Q)}}function Y(){if(J==0)return;K.push(X.length==1?X[0]:eA.from(X,Z)),Z=-1,J=X.length=0}for(let Q of A)U(Q);return Y(),K.length==1?K[0]:new eA(K,j)}}m.empty=new AA([""],0);function O4(A){let j=-1;for(let q of A)j+=q.length+1;return j}function X7(A,j,q=0,$=1e9){for(let B=0,G=0,K=!0;G<A.length&&B<=$;G++){let J=A[G],Z=B+J.length;if(Z>=q){if(Z>$)J=J.slice(0,$-B);if(B<q)J=J.slice(q-B);if(K)j[j.length-1]+=J,K=!1;else j.push(J)}B=Z+1}return j}function n$(A,j,q){return X7(A,[""],j,q)}class cj{constructor(A,j=1){this.dir=j,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[A],this.offsets=[j>0?1:(A instanceof AA?A.text.length:A.children.length)<<1]}nextInner(A,j){this.done=this.lineBreak=!1;for(;;){let q=this.nodes.length-1,$=this.nodes[q],B=this.offsets[q],G=B>>1,K=$ instanceof AA?$.text.length:$.children.length;if(G==(j>0?K:0)){if(q==0)return this.done=!0,this.value="",this;if(j>0)this.offsets[q-1]++;this.nodes.pop(),this.offsets.pop()}else if((B&1)==(j>0?0:1)){if(this.offsets[q]+=j,A==0)return this.lineBreak=!0,this.value=`
`,this;A--}else if($ instanceof AA){let J=$.text[G+(j<0?-1:0)];if(this.offsets[q]+=j,J.length>Math.max(0,A))return this.value=A==0?J:j>0?J.slice(A):J.slice(0,J.length-A),this;A-=J.length}else{let J=$.children[G+(j<0?-1:0)];if(A>J.length)A-=J.length,this.offsets[q]+=j;else{if(j<0)this.offsets[q]--;this.nodes.push(J),this.offsets.push(j>0?1:(J instanceof AA?J.text.length:J.children.length)<<1)}}}}next(A=0){if(A<0)this.nextInner(-A,-this.dir),A=this.value.length;return this.nextInner(A,this.dir)}}class uq{constructor(A,j,q){this.value="",this.done=!1,this.cursor=new cj(A,j>q?-1:1),this.pos=j>q?A.length:0,this.from=Math.min(j,q),this.to=Math.max(j,q)}nextInner(A,j){if(j<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;A+=Math.max(0,j<0?this.pos-this.to:this.from-this.pos);let q=j<0?this.pos-this.from:this.to-this.pos;if(A>q)A=q;q-=A;let{value:$}=this.cursor.next(A);return this.pos+=($.length+A)*j,this.value=$.length<=q?$:j<0?$.slice($.length-q):$.slice(0,q),this.done=!this.value,this}next(A=0){if(A<0)A=Math.max(A,this.from-this.pos);else if(A>0)A=Math.min(A,this.to-this.pos);return this.nextInner(A,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class gq{constructor(A){this.inner=A,this.afterBreak=!0,this.value="",this.done=!1}next(A=0){let{done:j,lineBreak:q,value:$}=this.inner.next(A);if(j&&this.afterBreak)this.value="",this.afterBreak=!1;else if(j)this.done=!0,this.value="";else if(q)if(this.afterBreak)this.value="";else this.afterBreak=!0,this.next();else this.value=$,this.afterBreak=!1;return this}get lineBreak(){return!1}}if(typeof Symbol!="undefined")m.prototype[Symbol.iterator]=function(){return this.iter()},cj.prototype[Symbol.iterator]=uq.prototype[Symbol.iterator]=gq.prototype[Symbol.iterator]=function(){return this};class e${constructor(A,j,q,$){this.from=A,this.to=j,this.number=q,this.text=$}get length(){return this.to-this.from}}function ij(A,j,q){return j=Math.max(0,Math.min(A.length,j)),[j,Math.max(j,Math.min(A.length,q))]}function qA(A,j,q=!0,$=!0){return d$(A,j,q,$)}function F4(A){return A>=56320&&A<57344}function z4(A){return A>=55296&&A<56320}function XA(A,j){let q=A.charCodeAt(j);if(!z4(q)||j+1==A.length)return q;let $=A.charCodeAt(j+1);if(!F4($))return q;return(q-55296<<10)+($-56320)+65536}function H6(A){if(A<=65535)return String.fromCharCode(A);return A-=65536,String.fromCharCode((A>>10)+55296,(A&1023)+56320)}function VA(A){return A<65536?1:2}var Cq=/\r\n?|\n/,ZA=function(A){return A[A.Simple=0]="Simple",A[A.TrackDel=1]="TrackDel",A[A.TrackBefore=2]="TrackBefore",A[A.TrackAfter=3]="TrackAfter",A}(ZA||(ZA={}));class pA{constructor(A){this.sections=A}get length(){let A=0;for(let j=0;j<this.sections.length;j+=2)A+=this.sections[j];return A}get newLength(){let A=0;for(let j=0;j<this.sections.length;j+=2){let q=this.sections[j+1];A+=q<0?this.sections[j]:q}return A}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(A){for(let j=0,q=0,$=0;j<this.sections.length;){let B=this.sections[j++],G=this.sections[j++];if(G<0)A(q,$,B),$+=B;else $+=G;q+=B}}iterChangedRanges(A,j=!1){yq(this,A,j)}get invertedDesc(){let A=[];for(let j=0;j<this.sections.length;){let q=this.sections[j++],$=this.sections[j++];if($<0)A.push(q,$);else A.push($,q)}return new pA(A)}composeDesc(A){return this.empty?A:A.empty?this:AB(this,A)}mapDesc(A,j=!1){return A.empty?this:bq(this,A,j)}mapPos(A,j=-1,q=ZA.Simple){let $=0,B=0;for(let G=0;G<this.sections.length;){let K=this.sections[G++],J=this.sections[G++],Z=$+K;if(J<0){if(Z>A)return B+(A-$);B+=K}else{if(q!=ZA.Simple&&Z>=A&&(q==ZA.TrackDel&&$<A&&Z>A||q==ZA.TrackBefore&&$<A||q==ZA.TrackAfter&&Z>A))return null;if(Z>A||Z==A&&j<0&&!K)return A==$||j<0?B:B+J;B+=J}$=Z}if(A>$)throw new RangeError(`Position ${A} is out of range for changeset of length ${$}`);return B}touchesRange(A,j=A){for(let q=0,$=0;q<this.sections.length&&$<=j;){let B=this.sections[q++],G=this.sections[q++],K=$+B;if(G>=0&&$<=j&&K>=A)return $<A&&K>j?"cover":!0;$=K}return!1}toString(){let A="";for(let j=0;j<this.sections.length;){let q=this.sections[j++],$=this.sections[j++];A+=(A?" ":"")+q+($>=0?":"+$:"")}return A}toJSON(){return this.sections}static fromJSON(A){if(!Array.isArray(A)||A.length%2||A.some((j)=>typeof j!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new pA(A)}static create(A){return new pA(A)}}class jA extends pA{constructor(A,j){super(A);this.inserted=j}apply(A){if(this.length!=A.length)throw new RangeError("Applying change set to a document with the wrong length");return yq(this,(j,q,$,B,G)=>A=A.replace($,$+(q-j),G),!1),A}mapDesc(A,j=!1){return bq(this,A,j,!0)}invert(A){let j=this.sections.slice(),q=[];for(let $=0,B=0;$<j.length;$+=2){let G=j[$],K=j[$+1];if(K>=0){j[$]=K,j[$+1]=G;let J=$>>1;while(q.length<J)q.push(m.empty);q.push(G?A.slice(B,B+G):m.empty)}B+=G}return new jA(j,q)}compose(A){return this.empty?A:A.empty?this:AB(this,A,!0)}map(A,j=!1){return A.empty?this:bq(this,A,j,!0)}iterChanges(A,j=!1){yq(this,A,j)}get desc(){return pA.create(this.sections)}filter(A){let j=[],q=[],$=[],B=new nj(this);A:for(let G=0,K=0;;){let J=G==A.length?1e9:A[G++];while(K<J||K==J&&B.len==0){if(B.done)break A;let X=Math.min(B.len,J-K);OA($,X,-1);let U=B.ins==-1?-1:B.off==0?B.ins:0;if(OA(j,X,U),U>0)Ij(q,j,B.text);B.forward(X),K+=X}let Z=A[G++];while(K<Z){if(B.done)break A;let X=Math.min(B.len,Z-K);OA(j,X,-1),OA($,X,B.ins==-1?-1:B.off==0?B.ins:0),B.forward(X),K+=X}}return{changes:new jA(j,q),filtered:pA.create($)}}toJSON(){let A=[];for(let j=0;j<this.sections.length;j+=2){let q=this.sections[j],$=this.sections[j+1];if($<0)A.push(q);else if($==0)A.push([q]);else A.push([q].concat(this.inserted[j>>1].toJSON()))}return A}static of(A,j,q){let $=[],B=[],G=0,K=null;function J(X=!1){if(!X&&!$.length)return;if(G<j)OA($,j-G,-1);let U=new jA($,B);K=K?K.compose(U.map(K)):U,$=[],B=[],G=0}function Z(X){if(Array.isArray(X))for(let U of X)Z(U);else if(X instanceof jA){if(X.length!=j)throw new RangeError(`Mismatched change set length (got ${X.length}, expected ${j})`);J(),K=K?K.compose(X.map(K)):X}else{let{from:U,to:Y=U,insert:Q}=X;if(U>Y||U<0||Y>j)throw new RangeError(`Invalid change range ${U} to ${Y} (in doc of length ${j})`);let O=!Q?m.empty:typeof Q=="string"?m.of(Q.split(q||Cq)):Q,F=O.length;if(U==Y&&F==0)return;if(U<G)J();if(U>G)OA($,U-G,-1);OA($,Y-U,F),Ij(B,$,O),G=Y}}return Z(A),J(!K),K}static empty(A){return new jA(A?[A,-1]:[],[])}static fromJSON(A){if(!Array.isArray(A))throw new RangeError("Invalid JSON representation of ChangeSet");let j=[],q=[];for(let $=0;$<A.length;$++){let B=A[$];if(typeof B=="number")j.push(B,-1);else if(!Array.isArray(B)||typeof B[0]!="number"||B.some((G,K)=>K&&typeof G!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");else if(B.length==1)j.push(B[0],0);else{while(q.length<$)q.push(m.empty);q[$]=m.of(B.slice(1)),j.push(B[0],q[$].length)}}return new jA(j,q)}static createSet(A,j){return new jA(A,j)}}function OA(A,j,q,$=!1){if(j==0&&q<=0)return;let B=A.length-2;if(B>=0&&q<=0&&q==A[B+1])A[B]+=j;else if(B>=0&&j==0&&A[B]==0)A[B+1]+=q;else if($)A[B]+=j,A[B+1]+=q;else A.push(j,q)}function Ij(A,j,q){if(q.length==0)return;let $=j.length-2>>1;if($<A.length)A[A.length-1]=A[A.length-1].append(q);else{while(A.length<$)A.push(m.empty);A.push(q)}}function yq(A,j,q){let $=A.inserted;for(let B=0,G=0,K=0;K<A.sections.length;){let J=A.sections[K++],Z=A.sections[K++];if(Z<0)B+=J,G+=J;else{let X=B,U=G,Y=m.empty;for(;;){if(X+=J,U+=Z,Z&&$)Y=Y.append($[K-2>>1]);if(q||K==A.sections.length||A.sections[K+1]<0)break;J=A.sections[K++],Z=A.sections[K++]}j(B,X,G,U,Y),B=X,G=U}}}function bq(A,j,q,$=!1){let B=[],G=$?[]:null,K=new nj(A),J=new nj(j);for(let Z=-1;;)if(K.done&&J.len||J.done&&K.len)throw new Error("Mismatched change set lengths");else if(K.ins==-1&&J.ins==-1){let X=Math.min(K.len,J.len);OA(B,X,-1),K.forward(X),J.forward(X)}else if(J.ins>=0&&(K.ins<0||Z==K.i||K.off==0&&(J.len<K.len||J.len==K.len&&!q))){let X=J.len;OA(B,J.ins,-1);while(X){let U=Math.min(K.len,X);if(K.ins>=0&&Z<K.i&&K.len<=U){if(OA(B,0,K.ins),G)Ij(G,B,K.text);Z=K.i}K.forward(U),X-=U}J.next()}else if(K.ins>=0){let X=0,U=K.len;while(U)if(J.ins==-1){let Y=Math.min(U,J.len);X+=Y,U-=Y,J.forward(Y)}else if(J.ins==0&&J.len<U)U-=J.len,J.next();else break;if(OA(B,X,Z<K.i?K.ins:0),G&&Z<K.i)Ij(G,B,K.text);Z=K.i,K.forward(K.len-U)}else if(K.done&&J.done)return G?jA.createSet(B,G):pA.create(B);else throw new Error("Mismatched change set lengths")}function AB(A,j,q=!1){let $=[],B=q?[]:null,G=new nj(A),K=new nj(j);for(let J=!1;;)if(G.done&&K.done)return B?jA.createSet($,B):pA.create($);else if(G.ins==0)OA($,G.len,0,J),G.next();else if(K.len==0&&!K.done){if(OA($,0,K.ins,J),B)Ij(B,$,K.text);K.next()}else if(G.done||K.done)throw new Error("Mismatched change set lengths");else{let Z=Math.min(G.len2,K.len),X=$.length;if(G.ins==-1){let U=K.ins==-1?-1:K.off?0:K.ins;if(OA($,Z,U,J),B&&U)Ij(B,$,K.text)}else if(K.ins==-1){if(OA($,G.off?0:G.len,Z,J),B)Ij(B,$,G.textBit(Z))}else if(OA($,G.off?0:G.len,K.off?0:K.ins,J),B&&!K.off)Ij(B,$,K.text);J=(G.ins>Z||K.ins>=0&&K.len>Z)&&(J||$.length>X),G.forward2(Z),K.forward(Z)}}class nj{constructor(A){this.set=A,this.i=0,this.next()}next(){let{sections:A}=this.set;if(this.i<A.length)this.len=A[this.i++],this.ins=A[this.i++];else this.len=0,this.ins=-2;this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:A}=this.set,j=this.i-2>>1;return j>=A.length?m.empty:A[j]}textBit(A){let{inserted:j}=this.set,q=this.i-2>>1;return q>=j.length&&!A?m.empty:j[q].slice(this.off,A==null?void 0:this.off+A)}forward(A){if(A==this.len)this.next();else this.len-=A,this.off+=A}forward2(A){if(this.ins==-1)this.forward(A);else if(A==this.ins)this.next();else this.ins-=A,this.off+=A}}class Cj{constructor(A,j,q){this.from=A,this.to=j,this.flags=q}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let A=this.flags&7;return A==7?null:A}get goalColumn(){let A=this.flags>>6;return A==16777215?void 0:A}map(A,j=-1){let q,$;if(this.empty)q=$=A.mapPos(this.from,j);else q=A.mapPos(this.from,1),$=A.mapPos(this.to,-1);return q==this.from&&$==this.to?this:new Cj(q,$,this.flags)}extend(A,j=A){if(A<=this.anchor&&j>=this.anchor)return E.range(A,j);let q=Math.abs(A-this.anchor)>Math.abs(j-this.anchor)?A:j;return E.range(this.anchor,q)}eq(A,j=!1){return this.anchor==A.anchor&&this.head==A.head&&(!j||!this.empty||this.assoc==A.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(A){if(!A||typeof A.anchor!="number"||typeof A.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(A.anchor,A.head)}static create(A,j,q){return new Cj(A,j,q)}}class E{constructor(A,j){this.ranges=A,this.mainIndex=j}map(A,j=-1){if(A.empty)return this;return E.create(this.ranges.map((q)=>q.map(A,j)),this.mainIndex)}eq(A,j=!1){if(this.ranges.length!=A.ranges.length||this.mainIndex!=A.mainIndex)return!1;for(let q=0;q<this.ranges.length;q++)if(!this.ranges[q].eq(A.ranges[q],j))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(A,j=!0){return E.create([A].concat(this.ranges),j?0:this.mainIndex+1)}replaceRange(A,j=this.mainIndex){let q=this.ranges.slice();return q[j]=A,E.create(q,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((A)=>A.toJSON()),main:this.mainIndex}}static fromJSON(A){if(!A||!Array.isArray(A.ranges)||typeof A.main!="number"||A.main>=A.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(A.ranges.map((j)=>Cj.fromJSON(j)),A.main)}static single(A,j=A){return new E([E.range(A,j)],0)}static create(A,j=0){if(A.length==0)throw new RangeError("A selection needs at least one range");for(let q=0,$=0;$<A.length;$++){let B=A[$];if(B.empty?B.from<=q:B.from<q)return E.normalized(A.slice(),j);q=B.to}return new E(A,j)}static cursor(A,j=0,q,$){return Cj.create(A,A,(j==0?0:j<0?8:16)|(q==null?7:Math.min(6,q))|($!==null&&$!==void 0?$:16777215)<<6)}static range(A,j,q,$){let B=(q!==null&&q!==void 0?q:16777215)<<6|($==null?7:Math.min(6,$));return j<A?Cj.create(j,A,48|B):Cj.create(A,j,(j>A?8:0)|B)}static normalized(A,j=0){let q=A[j];A.sort(($,B)=>$.from-B.from),j=A.indexOf(q);for(let $=1;$<A.length;$++){let B=A[$],G=A[$-1];if(B.empty?B.from<=G.to:B.from<G.to){let K=G.from,J=Math.max(B.to,G.to);if($<=j)j--;A.splice(--$,2,B.anchor>B.head?E.range(J,K):E.range(K,J))}}return new E(A,j)}}function jB(A,j){for(let q of A.ranges)if(q.to>j)throw new RangeError("Selection points outside of document")}var fq=0;class k{constructor(A,j,q,$,B){this.combine=A,this.compareInput=j,this.compare=q,this.isStatic=$,this.id=fq++,this.default=A([]),this.extensions=typeof B=="function"?B(this):B}get reader(){return this}static define(A={}){return new k(A.combine||((j)=>j),A.compareInput||((j,q)=>j===q),A.compare||(!A.combine?pq:(j,q)=>j===q),!!A.static,A.enables)}of(A){return new z6([],this,0,A)}compute(A,j){if(this.isStatic)throw new Error("Can't compute a static facet");return new z6(A,this,1,j)}computeN(A,j){if(this.isStatic)throw new Error("Can't compute a static facet");return new z6(A,this,2,j)}from(A,j){if(!j)j=(q)=>q;return this.compute([A],(q)=>j(q.field(A)))}}function pq(A,j){return A==j||A.length==j.length&&A.every((q,$)=>q===j[$])}class z6{constructor(A,j,q,$){this.dependencies=A,this.facet=j,this.type=q,this.value=$,this.id=fq++}dynamicSlot(A){var j;let q=this.value,$=this.facet.compareInput,B=this.id,G=A[B]>>1,K=this.type==2,J=!1,Z=!1,X=[];for(let U of this.dependencies)if(U=="doc")J=!0;else if(U=="selection")Z=!0;else if((((j=A[U.id])!==null&&j!==void 0?j:1)&1)==0)X.push(A[U.id]);return{create(U){return U.values[G]=q(U),1},update(U,Y){if(J&&Y.docChanged||Z&&(Y.docChanged||Y.selection)||xq(U,X)){let Q=q(U);if(K?!a$(Q,U.values[G],$):!$(Q,U.values[G]))return U.values[G]=Q,1}return 0},reconfigure:(U,Y)=>{let Q,O=Y.config.address[B];if(O!=null){let F=Q7(Y,O);if(this.dependencies.every((z)=>{return z instanceof k?Y.facet(z)===U.facet(z):z instanceof o?Y.field(z,!1)==U.field(z,!1):!0})||(K?a$(Q=q(U),F,$):$(Q=q(U),F)))return U.values[G]=F,0}else Q=q(U);return U.values[G]=Q,1}}}}function a$(A,j,q){if(A.length!=j.length)return!1;for(let $=0;$<A.length;$++)if(!q(A[$],j[$]))return!1;return!0}function xq(A,j){let q=!1;for(let $ of j)if(I6(A,$)&1)q=!0;return q}function I4(A,j,q){let $=q.map((Z)=>A[Z.id]),B=q.map((Z)=>Z.type),G=$.filter((Z)=>!(Z&1)),K=A[j.id]>>1;function J(Z){let X=[];for(let U=0;U<$.length;U++){let Y=Q7(Z,$[U]);if(B[U]==2)for(let Q of Y)X.push(Q);else X.push(Y)}return j.combine(X)}return{create(Z){for(let X of $)I6(Z,X);return Z.values[K]=J(Z),1},update(Z,X){if(!xq(Z,G))return 0;let U=J(Z);if(j.compare(U,Z.values[K]))return 0;return Z.values[K]=U,1},reconfigure(Z,X){let U=xq(Z,$),Y=X.config.facets[j.id],Q=X.facet(j);if(Y&&!U&&pq(q,Y))return Z.values[K]=Q,0;let O=J(Z);if(j.compare(O,Q))return Z.values[K]=Q,0;return Z.values[K]=O,1}}}var K7=k.define({static:!0});class o{constructor(A,j,q,$,B){this.id=A,this.createF=j,this.updateF=q,this.compareF=$,this.spec=B,this.provides=void 0}static define(A){let j=new o(fq++,A.create,A.update,A.compare||((q,$)=>q===$),A);if(A.provide)j.provides=A.provide(j);return j}create(A){let j=A.facet(K7).find((q)=>q.field==this);return((j===null||j===void 0?void 0:j.create)||this.createF)(A)}slot(A){let j=A[this.id]>>1;return{create:(q)=>{return q.values[j]=this.create(q),1},update:(q,$)=>{let B=q.values[j],G=this.updateF(B,$);if(this.compareF(B,G))return 0;return q.values[j]=G,1},reconfigure:(q,$)=>{let B=q.facet(K7),G=$.facet(K7),K;if((K=B.find((J)=>J.field==this))&&K!=G.find((J)=>J.field==this))return q.values[j]=K.create(q),1;if($.config.address[this.id]!=null)return q.values[j]=$.field(this),0;return q.values[j]=this.create(q),1}}}init(A){return[this,K7.of({field:this,create:A})]}get extension(){return this}}var Tj={lowest:4,low:3,default:2,high:1,highest:0};function F6(A){return(j)=>new lq(j,A)}var lA={highest:F6(Tj.highest),high:F6(Tj.high),default:F6(Tj.default),low:F6(Tj.low),lowest:F6(Tj.lowest)};class lq{constructor(A,j){this.inner=A,this.prec=j}}class O7{of(A){return new U7(this,A)}reconfigure(A){return O7.reconfigure.of({compartment:this,extension:A})}get(A){return A.config.compartments.get(this)}}class U7{constructor(A,j){this.compartment=A,this.inner=j}}class Y7{constructor(A,j,q,$,B,G){this.base=A,this.compartments=j,this.dynamicSlots=q,this.address=$,this.staticValues=B,this.facets=G,this.statusTemplate=[];while(this.statusTemplate.length<q.length)this.statusTemplate.push(0)}staticFacet(A){let j=this.address[A.id];return j==null?A.default:this.staticValues[j>>1]}static resolve(A,j,q){let $=[],B=Object.create(null),G=new Map;for(let Y of W4(A,j,G))if(Y instanceof o)$.push(Y);else(B[Y.facet.id]||(B[Y.facet.id]=[])).push(Y);let K=Object.create(null),J=[],Z=[];for(let Y of $)K[Y.id]=Z.length<<1,Z.push((Q)=>Y.slot(Q));let X=q===null||q===void 0?void 0:q.config.facets;for(let Y in B){let Q=B[Y],O=Q[0].facet,F=X&&X[Y]||[];if(Q.every((z)=>z.type==0))if(K[O.id]=J.length<<1|1,pq(F,Q))J.push(q.facet(O));else{let z=O.combine(Q.map((I)=>I.value));J.push(q&&O.compare(z,q.facet(O))?q.facet(O):z)}else{for(let z of Q)if(z.type==0)K[z.id]=J.length<<1|1,J.push(z.value);else K[z.id]=Z.length<<1,Z.push((I)=>z.dynamicSlot(I));K[O.id]=Z.length<<1,Z.push((z)=>I4(z,O,Q))}}let U=Z.map((Y)=>Y(K));return new Y7(A,G,U,K,J,B)}}function W4(A,j,q){let $=[[],[],[],[],[]],B=new Map;function G(K,J){let Z=B.get(K);if(Z!=null){if(Z<=J)return;let X=$[Z].indexOf(K);if(X>-1)$[Z].splice(X,1);if(K instanceof U7)q.delete(K.compartment)}if(B.set(K,J),Array.isArray(K))for(let X of K)G(X,J);else if(K instanceof U7){if(q.has(K.compartment))throw new RangeError("Duplicate use of compartment in extensions");let X=j.get(K.compartment)||K.inner;q.set(K.compartment,X),G(X,J)}else if(K instanceof lq)G(K.inner,K.prec);else if(K instanceof o){if($[J].push(K),K.provides)G(K.provides,J)}else if(K instanceof z6){if($[J].push(K),K.facet.extensions)G(K.facet.extensions,Tj.default)}else{let X=K.extension;if(!X)throw new Error(`Unrecognized extension value in extension set (${K}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);G(X,J)}}return G(A,Tj.default),$.reduce((K,J)=>K.concat(J))}function I6(A,j){if(j&1)return 2;let q=j>>1,$=A.status[q];if($==4)throw new Error("Cyclic dependency between fields and/or facets");if($&2)return $;A.status[q]=4;let B=A.computeSlot(A,A.config.dynamicSlots[q]);return A.status[q]=2|B}function Q7(A,j){return j&1?A.config.staticValues[j>>1]:A.values[j>>1]}var qB=k.define(),Sq=k.define({combine:(A)=>A.some((j)=>j),static:!0}),$B=k.define({combine:(A)=>A.length?A[0]:void 0,static:!0}),BB=k.define(),GB=k.define(),KB=k.define(),JB=k.define({combine:(A)=>A.length?A[0]:!1});class kA{constructor(A,j){this.type=A,this.value=j}static define(){return new ZB}}class ZB{of(A){return new kA(this,A)}}class XB{constructor(A){this.map=A}of(A){return new b(this,A)}}class b{constructor(A,j){this.type=A,this.value=j}map(A){let j=this.type.map(this.value,A);return j===void 0?void 0:j==this.value?this:new b(this.type,j)}is(A){return this.type==A}static define(A={}){return new XB(A.map||((j)=>j))}static mapEffects(A,j){if(!A.length)return A;let q=[];for(let $ of A){let B=$.map(j);if(B)q.push(B)}return q}}b.reconfigure=b.define();b.appendConfig=b.define();class e{constructor(A,j,q,$,B,G){if(this.startState=A,this.changes=j,this.selection=q,this.effects=$,this.annotations=B,this.scrollIntoView=G,this._doc=null,this._state=null,q)jB(q,j.newLength);if(!B.some((K)=>K.type==e.time))this.annotations=B.concat(e.time.of(Date.now()))}static create(A,j,q,$,B,G){return new e(A,j,q,$,B,G)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){if(!this._state)this.startState.applyTransaction(this);return this._state}annotation(A){for(let j of this.annotations)if(j.type==A)return j.value;return}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(A){let j=this.annotation(e.userEvent);return!!(j&&(j==A||j.length>A.length&&j.slice(0,A.length)==A&&j[A.length]=="."))}}e.time=kA.define();e.userEvent=kA.define();e.addToHistory=kA.define();e.remote=kA.define();function E4(A,j){let q=[];for(let $=0,B=0;;){let G,K;if($<A.length&&(B==j.length||j[B]>=A[$]))G=A[$++],K=A[$++];else if(B<j.length)G=j[B++],K=j[B++];else return q;if(!q.length||q[q.length-1]<G)q.push(G,K);else if(q[q.length-1]<K)q[q.length-1]=K}}function UB(A,j,q){var $;let B,G,K;if(q)B=j.changes,G=jA.empty(j.changes.length),K=A.changes.compose(j.changes);else B=j.changes.map(A.changes),G=A.changes.mapDesc(j.changes,!0),K=A.changes.compose(B);return{changes:K,selection:j.selection?j.selection.map(G):($=A.selection)===null||$===void 0?void 0:$.map(B),effects:b.mapEffects(A.effects,B).concat(b.mapEffects(j.effects,G)),annotations:A.annotations.length?A.annotations.concat(j.annotations):j.annotations,scrollIntoView:A.scrollIntoView||j.scrollIntoView}}function wq(A,j,q){let $=j.selection,B=sj(j.annotations);if(j.userEvent)B=B.concat(e.userEvent.of(j.userEvent));return{changes:j.changes instanceof jA?j.changes:jA.of(j.changes||[],q,A.facet($B)),selection:$&&($ instanceof E?$:E.single($.anchor,$.head)),effects:sj(j.effects),annotations:B,scrollIntoView:!!j.scrollIntoView}}function YB(A,j,q){let $=wq(A,j.length?j[0]:{},A.doc.length);if(j.length&&j[0].filter===!1)q=!1;for(let G=1;G<j.length;G++){if(j[G].filter===!1)q=!1;let K=!!j[G].sequential;$=UB($,wq(A,j[G],K?$.changes.newLength:A.doc.length),K)}let B=e.create(A,$.changes,$.selection,$.effects,$.annotations,$.scrollIntoView);return _4(q?H4(B):B)}function H4(A){let j=A.startState,q=!0;for(let B of j.facet(BB)){let G=B(A);if(G===!1){q=!1;break}if(Array.isArray(G))q=q===!0?G:E4(q,G)}if(q!==!0){let B,G;if(q===!1)G=A.changes.invertedDesc,B=jA.empty(j.doc.length);else{let K=A.changes.filter(q);B=K.changes,G=K.filtered.mapDesc(K.changes).invertedDesc}A=e.create(j,B,A.selection&&A.selection.map(G),b.mapEffects(A.effects,G),A.annotations,A.scrollIntoView)}let $=j.facet(GB);for(let B=$.length-1;B>=0;B--){let G=$[B](A);if(G instanceof e)A=G;else if(Array.isArray(G)&&G.length==1&&G[0]instanceof e)A=G[0];else A=YB(j,sj(G),!1)}return A}function _4(A){let j=A.startState,q=j.facet(KB),$=A;for(let B=q.length-1;B>=0;B--){let G=q[B](A);if(G&&Object.keys(G).length)$=UB($,wq(j,G,A.changes.newLength),!0)}return $==A?A:e.create(j,A.changes,A.selection,$.effects,$.annotations,$.scrollIntoView)}var N4=[];function sj(A){return A==null?N4:Array.isArray(A)?A:[A]}var l=function(A){return A[A.Word=0]="Word",A[A.Space=1]="Space",A[A.Other=2]="Other",A}(l||(l={})),D4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,hq;try{hq=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(A){}function M4(A){if(hq)return hq.test(A);for(let j=0;j<A.length;j++){let q=A[j];if(/\w/.test(q)||q>""&&(q.toUpperCase()!=q.toLowerCase()||D4.test(q)))return!0}return!1}function R4(A){return(j)=>{if(!/\S/.test(j))return l.Space;if(M4(j))return l.Word;for(let q=0;q<A.length;q++)if(j.indexOf(A[q])>-1)return l.Word;return l.Other}}class v{constructor(A,j,q,$,B,G){if(this.config=A,this.doc=j,this.selection=q,this.values=$,this.status=A.statusTemplate.slice(),this.computeSlot=B,G)G._state=this;for(let K=0;K<this.config.dynamicSlots.length;K++)I6(this,K<<1);this.computeSlot=null}field(A,j=!0){let q=this.config.address[A.id];if(q==null){if(j)throw new RangeError("Field is not present in this state");return}return I6(this,q),Q7(this,q)}update(...A){return YB(this,A,!0)}applyTransaction(A){let j=this.config,{base:q,compartments:$}=j;for(let K of A.effects)if(K.is(O7.reconfigure)){if(j)$=new Map,j.compartments.forEach((J,Z)=>$.set(Z,J)),j=null;$.set(K.value.compartment,K.value.extension)}else if(K.is(b.reconfigure))j=null,q=K.value;else if(K.is(b.appendConfig))j=null,q=sj(q).concat(K.value);let B;if(!j)j=Y7.resolve(q,$,this),B=new v(j,this.doc,this.selection,j.dynamicSlots.map(()=>null),(J,Z)=>Z.reconfigure(J,this),null).values;else B=A.startState.values.slice();let G=A.startState.facet(Sq)?A.newSelection:A.newSelection.asSingle();new v(j,A.newDoc,G,B,(K,J)=>J.update(K,A),A)}replaceSelection(A){if(typeof A=="string")A=this.toText(A);return this.changeByRange((j)=>({changes:{from:j.from,to:j.to,insert:A},range:E.cursor(j.from+A.length)}))}changeByRange(A){let j=this.selection,q=A(j.ranges[0]),$=this.changes(q.changes),B=[q.range],G=sj(q.effects);for(let K=1;K<j.ranges.length;K++){let J=A(j.ranges[K]),Z=this.changes(J.changes),X=Z.map($);for(let Y=0;Y<K;Y++)B[Y]=B[Y].map(X);let U=$.mapDesc(Z,!0);B.push(J.range.map(U)),$=$.compose(X),G=b.mapEffects(G,X).concat(b.mapEffects(sj(J.effects),U))}return{changes:$,selection:E.create(B,j.mainIndex),effects:G}}changes(A=[]){if(A instanceof jA)return A;return jA.of(A,this.doc.length,this.facet(v.lineSeparator))}toText(A){return m.of(A.split(this.facet(v.lineSeparator)||Cq))}sliceDoc(A=0,j=this.doc.length){return this.doc.sliceString(A,j,this.lineBreak)}facet(A){let j=this.config.address[A.id];if(j==null)return A.default;return I6(this,j),Q7(this,j)}toJSON(A){let j={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(A)for(let q in A){let $=A[q];if($ instanceof o&&this.config.address[$.id]!=null)j[q]=$.spec.toJSON(this.field(A[q]),this)}return j}static fromJSON(A,j={},q){if(!A||typeof A.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let $=[];if(q){for(let B in q)if(Object.prototype.hasOwnProperty.call(A,B)){let G=q[B],K=A[B];$.push(G.init((J)=>G.spec.fromJSON(K,J)))}}return v.create({doc:A.doc,selection:E.fromJSON(A.selection),extensions:j.extensions?$.concat([j.extensions]):$})}static create(A={}){let j=Y7.resolve(A.extensions||[],new Map),q=A.doc instanceof m?A.doc:m.of((A.doc||"").split(j.staticFacet(v.lineSeparator)||Cq)),$=!A.selection?E.single(0):A.selection instanceof E?A.selection:E.single(A.selection.anchor,A.selection.head);if(jB($,q.length),!j.staticFacet(Sq))$=$.asSingle();return new v(j,q,$,j.dynamicSlots.map(()=>null),(B,G)=>G.create(B),null)}get tabSize(){return this.facet(v.tabSize)}get lineBreak(){return this.facet(v.lineSeparator)||`
`}get readOnly(){return this.facet(JB)}phrase(A,...j){for(let q of this.facet(v.phrases))if(Object.prototype.hasOwnProperty.call(q,A)){A=q[A];break}if(j.length)A=A.replace(/\$(\$|\d*)/g,(q,$)=>{if($=="$")return"$";let B=+($||1);return!B||B>j.length?q:j[B-1]});return A}languageDataAt(A,j,q=-1){let $=[];for(let B of this.facet(qB))for(let G of B(this,j,q))if(Object.prototype.hasOwnProperty.call(G,A))$.push(G[A]);return $}charCategorizer(A){return R4(this.languageDataAt("wordChars",A).join(""))}wordAt(A){let{text:j,from:q,length:$}=this.doc.lineAt(A),B=this.charCategorizer(A),G=A-q,K=A-q;while(G>0){let J=qA(j,G,!1);if(B(j.slice(J,G))!=l.Word)break;G=J}while(K<$){let J=qA(j,K);if(B(j.slice(K,J))!=l.Word)break;K=J}return G==K?null:E.range(G+q,K+q)}}v.allowMultipleSelections=Sq;v.tabSize=k.define({combine:(A)=>A.length?A[0]:4});v.lineSeparator=$B;v.readOnly=JB;v.phrases=k.define({compare(A,j){let q=Object.keys(A),$=Object.keys(j);return q.length==$.length&&q.every((B)=>A[B]==j[B])}});v.languageData=qB;v.changeFilter=BB;v.transactionFilter=GB;v.transactionExtender=KB;O7.reconfigure=b.define();function FA(A,j,q={}){let $={};for(let B of A)for(let G of Object.keys(B)){let K=B[G],J=$[G];if(J===void 0)$[G]=K;else if(J===K||K===void 0);else if(Object.hasOwnProperty.call(q,G))$[G]=q[G](J,K);else throw new Error("Config merge conflict for field "+G)}for(let B in j)if($[B]===void 0)$[B]=j[B];return $}class Aj{eq(A){return this==A}range(A,j=A){return W6.create(A,j,this)}}Aj.prototype.startSide=Aj.prototype.endSide=0;Aj.prototype.point=!1;Aj.prototype.mapMode=ZA.TrackDel;class W6{constructor(A,j,q){this.from=A,this.to=j,this.value=q}static create(A,j,q){return new W6(A,j,q)}}function vq(A,j){return A.from-j.from||A.value.startSide-j.value.startSide}class dq{constructor(A,j,q,$){this.from=A,this.to=j,this.value=q,this.maxPoint=$}get length(){return this.to[this.to.length-1]}findIndex(A,j,q,$=0){let B=q?this.to:this.from;for(let G=$,K=B.length;;){if(G==K)return G;let J=G+K>>1,Z=B[J]-A||(q?this.value[J].endSide:this.value[J].startSide)-j;if(J==G)return Z>=0?G:K;if(Z>=0)K=J;else G=J+1}}between(A,j,q,$){for(let B=this.findIndex(j,-1e9,!0),G=this.findIndex(q,1e9,!1,B);B<G;B++)if($(this.from[B]+A,this.to[B]+A,this.value[B])===!1)return!1}map(A,j){let q=[],$=[],B=[],G=-1,K=-1;for(let J=0;J<this.value.length;J++){let Z=this.value[J],X=this.from[J]+A,U=this.to[J]+A,Y,Q;if(X==U){let O=j.mapPos(X,Z.startSide,Z.mapMode);if(O==null)continue;if(Y=Q=O,Z.startSide!=Z.endSide){if(Q=j.mapPos(X,Z.endSide),Q<Y)continue}}else if(Y=j.mapPos(X,Z.startSide),Q=j.mapPos(U,Z.endSide),Y>Q||Y==Q&&Z.startSide>0&&Z.endSide<=0)continue;if((Q-Y||Z.endSide-Z.startSide)<0)continue;if(G<0)G=Y;if(Z.point)K=Math.max(K,Q-Y);q.push(Z),$.push(Y-G),B.push(Q-G)}return{mapped:q.length?new dq($,B,q,K):null,pos:G}}}class h{constructor(A,j,q,$){this.chunkPos=A,this.chunk=j,this.nextLayer=q,this.maxPoint=$}static create(A,j,q,$){return new h(A,j,q,$)}get length(){let A=this.chunk.length-1;return A<0?0:Math.max(this.chunkEnd(A),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let A=this.nextLayer.size;for(let j of this.chunk)A+=j.value.length;return A}chunkEnd(A){return this.chunkPos[A]+this.chunk[A].length}update(A){let{add:j=[],sort:q=!1,filterFrom:$=0,filterTo:B=this.length}=A,G=A.filter;if(j.length==0&&!G)return this;if(q)j=j.slice().sort(vq);if(this.isEmpty)return j.length?h.of(j):this;let K=new cq(this,null,-1).goto(0),J=0,Z=[],X=new RA;while(K.value||J<j.length)if(J<j.length&&(K.from-j[J].from||K.startSide-j[J].value.startSide)>=0){let U=j[J++];if(!X.addInner(U.from,U.to,U.value))Z.push(U)}else if(K.rangeIndex==1&&K.chunkIndex<this.chunk.length&&(J==j.length||this.chunkEnd(K.chunkIndex)<j[J].from)&&(!G||$>this.chunkEnd(K.chunkIndex)||B<this.chunkPos[K.chunkIndex])&&X.addChunk(this.chunkPos[K.chunkIndex],this.chunk[K.chunkIndex]))K.nextChunk();else{if(!G||$>K.to||B<K.from||G(K.from,K.to,K.value)){if(!X.addInner(K.from,K.to,K.value))Z.push(W6.create(K.from,K.to,K.value))}K.next()}return X.finishInner(this.nextLayer.isEmpty&&!Z.length?h.empty:this.nextLayer.update({add:Z,filter:G,filterFrom:$,filterTo:B}))}map(A){if(A.empty||this.isEmpty)return this;let j=[],q=[],$=-1;for(let G=0;G<this.chunk.length;G++){let K=this.chunkPos[G],J=this.chunk[G],Z=A.touchesRange(K,K+J.length);if(Z===!1)$=Math.max($,J.maxPoint),j.push(J),q.push(A.mapPos(K));else if(Z===!0){let{mapped:X,pos:U}=J.map(K,A);if(X)$=Math.max($,X.maxPoint),j.push(X),q.push(U)}}let B=this.nextLayer.map(A);return j.length==0?B:new h(q,j,B||h.empty,$)}between(A,j,q){if(this.isEmpty)return;for(let $=0;$<this.chunk.length;$++){let B=this.chunkPos[$],G=this.chunk[$];if(j>=B&&A<=B+G.length&&G.between(B,A-B,j-B,q)===!1)return}this.nextLayer.between(A,j,q)}iter(A=0){return E6.from([this]).goto(A)}get isEmpty(){return this.nextLayer==this}static iter(A,j=0){return E6.from(A).goto(j)}static compare(A,j,q,$,B=-1){let G=A.filter((U)=>U.maxPoint>0||!U.isEmpty&&U.maxPoint>=B),K=j.filter((U)=>U.maxPoint>0||!U.isEmpty&&U.maxPoint>=B),J=r$(G,K,q),Z=new dj(G,J,B),X=new dj(K,J,B);if(q.iterGaps((U,Y,Q)=>o$(Z,U,X,Y,Q,$)),q.empty&&q.length==0)o$(Z,0,X,0,0,$)}static eq(A,j,q=0,$){if($==null)$=999999999;let B=A.filter((X)=>!X.isEmpty&&j.indexOf(X)<0),G=j.filter((X)=>!X.isEmpty&&A.indexOf(X)<0);if(B.length!=G.length)return!1;if(!B.length)return!0;let K=r$(B,G),J=new dj(B,K,0).goto(q),Z=new dj(G,K,0).goto(q);for(;;){if(J.to!=Z.to||!mq(J.active,Z.active)||J.point&&(!Z.point||!J.point.eq(Z.point)))return!1;if(J.to>$)return!0;J.next(),Z.next()}}static spans(A,j,q,$,B=-1){let G=new dj(A,null,B).goto(j),K=j,J=G.openStart;for(;;){let Z=Math.min(G.to,q);if(G.point){let X=G.activeForPoint(G.to),U=G.pointFrom<j?X.length+1:G.point.startSide<0?X.length:Math.min(X.length,J);$.point(K,Z,G.point,X,U,G.pointRank),J=Math.min(G.openEnd(Z),X.length)}else if(Z>K)$.span(K,Z,G.active,J),J=G.openEnd(Z);if(G.to>q)return J+(G.point&&G.to>q?1:0);K=G.to,G.next()}}static of(A,j=!1){let q=new RA;for(let $ of A instanceof W6?[A]:j?V4(A):A)q.add($.from,$.to,$.value);return q.finish()}static join(A){if(!A.length)return h.empty;let j=A[A.length-1];for(let q=A.length-2;q>=0;q--)for(let $=A[q];$!=h.empty;$=$.nextLayer)j=new h($.chunkPos,$.chunk,j,Math.max($.maxPoint,j.maxPoint));return j}}h.empty=new h([],[],null,-1);function V4(A){if(A.length>1)for(let j=A[0],q=1;q<A.length;q++){let $=A[q];if(vq(j,$)>0)return A.slice().sort(vq);j=$}return A}h.empty.nextLayer=h.empty;class RA{finishChunk(A){if(this.chunks.push(new dq(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,A)this.from=[],this.to=[],this.value=[]}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(A,j,q){if(!this.addInner(A,j,q))(this.nextLayer||(this.nextLayer=new RA)).add(A,j,q)}addInner(A,j,q){let $=A-this.lastTo||q.startSide-this.last.endSide;if($<=0&&(A-this.lastFrom||q.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");if($<0)return!1;if(this.from.length==250)this.finishChunk(!0);if(this.chunkStart<0)this.chunkStart=A;if(this.from.push(A-this.chunkStart),this.to.push(j-this.chunkStart),this.last=q,this.lastFrom=A,this.lastTo=j,this.value.push(q),q.point)this.maxPoint=Math.max(this.maxPoint,j-A);return!0}addChunk(A,j){if((A-this.lastTo||j.value[0].startSide-this.last.endSide)<0)return!1;if(this.from.length)this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,j.maxPoint),this.chunks.push(j),this.chunkPos.push(A);let q=j.value.length-1;return this.last=j.value[q],this.lastFrom=j.from[q]+A,this.lastTo=j.to[q]+A,!0}finish(){return this.finishInner(h.empty)}finishInner(A){if(this.from.length)this.finishChunk(!1);if(this.chunks.length==0)return A;let j=h.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(A):A,this.setMaxPoint);return this.from=null,j}}function r$(A,j,q){let $=new Map;for(let G of A)for(let K=0;K<G.chunk.length;K++)if(G.chunk[K].maxPoint<=0)$.set(G.chunk[K],G.chunkPos[K]);let B=new Set;for(let G of j)for(let K=0;K<G.chunk.length;K++){let J=$.get(G.chunk[K]);if(J!=null&&(q?q.mapPos(J):J)==G.chunkPos[K]&&!(q===null||q===void 0?void 0:q.touchesRange(J,J+G.chunk[K].length)))B.add(G.chunk[K])}return B}class cq{constructor(A,j,q,$=0){this.layer=A,this.skip=j,this.minPoint=q,this.rank=$}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(A,j=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(A,j,!1),this}gotoInner(A,j,q){while(this.chunkIndex<this.layer.chunk.length){let $=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has($)||this.layer.chunkEnd(this.chunkIndex)<A||$.maxPoint<this.minPoint))break;this.chunkIndex++,q=!1}if(this.chunkIndex<this.layer.chunk.length){let $=this.layer.chunk[this.chunkIndex].findIndex(A-this.layer.chunkPos[this.chunkIndex],j,!0);if(!q||this.rangeIndex<$)this.setRangeIndex($)}this.next()}forward(A,j){if((this.to-A||this.endSide-j)<0)this.gotoInner(A,j,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let A=this.layer.chunkPos[this.chunkIndex],j=this.layer.chunk[this.chunkIndex],q=A+j.from[this.rangeIndex];if(this.from=q,this.to=A+j.to[this.rangeIndex],this.value=j.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(A){if(A==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=A}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(A){return this.from-A.from||this.startSide-A.startSide||this.rank-A.rank||this.to-A.to||this.endSide-A.endSide}}class E6{constructor(A){this.heap=A}static from(A,j=null,q=-1){let $=[];for(let B=0;B<A.length;B++)for(let G=A[B];!G.isEmpty;G=G.nextLayer)if(G.maxPoint>=q)$.push(new cq(G,j,q,B));return $.length==1?$[0]:new E6($)}get startSide(){return this.value?this.value.startSide:0}goto(A,j=-1e9){for(let q of this.heap)q.goto(A,j);for(let q=this.heap.length>>1;q>=0;q--)Tq(this.heap,q);return this.next(),this}forward(A,j){for(let q of this.heap)q.forward(A,j);for(let q=this.heap.length>>1;q>=0;q--)Tq(this.heap,q);if((this.to-A||this.value.endSide-j)<0)this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let A=this.heap[0];if(this.from=A.from,this.to=A.to,this.value=A.value,this.rank=A.rank,A.value)A.next();Tq(this.heap,0)}}}function Tq(A,j){for(let q=A[j];;){let $=(j<<1)+1;if($>=A.length)break;let B=A[$];if($+1<A.length&&B.compare(A[$+1])>=0)B=A[$+1],$++;if(q.compare(B)<0)break;A[$]=q,A[j]=B,j=$}}class dj{constructor(A,j,q){this.minPoint=q,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=E6.from(A,j,q)}goto(A,j=-1e9){return this.cursor.goto(A,j),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=A,this.endSide=j,this.openStart=-1,this.next(),this}forward(A,j){while(this.minActive>-1&&(this.activeTo[this.minActive]-A||this.active[this.minActive].endSide-j)<0)this.removeActive(this.minActive);this.cursor.forward(A,j)}removeActive(A){J7(this.active,A),J7(this.activeTo,A),J7(this.activeRank,A),this.minActive=t$(this.active,this.activeTo)}addActive(A){let j=0,{value:q,to:$,rank:B}=this.cursor;while(j<this.activeRank.length&&(B-this.activeRank[j]||$-this.activeTo[j])>0)j++;if(Z7(this.active,j,q),Z7(this.activeTo,j,$),Z7(this.activeRank,j,B),A)Z7(A,j,this.cursor.from);this.minActive=t$(this.active,this.activeTo)}next(){let A=this.to,j=this.point;this.point=null;let q=this.openStart<0?[]:null;for(;;){let $=this.minActive;if($>-1&&(this.activeTo[$]-this.cursor.from||this.active[$].endSide-this.cursor.startSide)<0){if(this.activeTo[$]>A){this.to=this.activeTo[$],this.endSide=this.active[$].endSide;break}if(this.removeActive($),q)J7(q,$)}else if(!this.cursor.value){this.to=this.endSide=1e9;break}else if(this.cursor.from>A){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let B=this.cursor.value;if(!B.point)this.addActive(q),this.cursor.next();else if(j&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=B,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=B.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}}if(q){this.openStart=0;for(let $=q.length-1;$>=0&&q[$]<A;$--)this.openStart++}}activeForPoint(A){if(!this.active.length)return this.active;let j=[];for(let q=this.active.length-1;q>=0;q--){if(this.activeRank[q]<this.pointRank)break;if(this.activeTo[q]>A||this.activeTo[q]==A&&this.active[q].endSide>=this.point.endSide)j.push(this.active[q])}return j.reverse()}openEnd(A){let j=0;for(let q=this.activeTo.length-1;q>=0&&this.activeTo[q]>A;q--)j++;return j}}function o$(A,j,q,$,B,G){A.goto(j),q.goto($);let K=$+B,J=$,Z=$-j;for(;;){let X=A.to+Z-q.to,U=X||A.endSide-q.endSide,Y=U<0?A.to+Z:q.to,Q=Math.min(Y,K);if(A.point||q.point){if(!(A.point&&q.point&&(A.point==q.point||A.point.eq(q.point))&&mq(A.activeForPoint(A.to),q.activeForPoint(q.to))))G.comparePoint(J,Q,A.point,q.point)}else if(Q>J&&!mq(A.active,q.active))G.compareRange(J,Q,A.active,q.active);if(Y>K)break;if((X||A.openEnd!=q.openEnd)&&G.boundChange)G.boundChange(Y);if(J=Y,U<=0)A.next();if(U>=0)q.next()}}function mq(A,j){if(A.length!=j.length)return!1;for(let q=0;q<A.length;q++)if(A[q]!=j[q]&&!A[q].eq(j[q]))return!1;return!0}function J7(A,j){for(let q=j,$=A.length-1;q<$;q++)A[q]=A[q+1];A.pop()}function Z7(A,j,q){for(let $=A.length-1;$>=j;$--)A[$+1]=A[$];A[j]=q}function t$(A,j){let q=-1,$=1e9;for(let B=0;B<j.length;B++)if((j[B]-$||A[B].endSide-A[q].endSide)<0)q=B,$=j[B];return q}function Uj(A,j,q=A.length){let $=0;for(let B=0;B<q&&B<A.length;)if(A.charCodeAt(B)==9)$+=j-$%j,B++;else $++,B=qA(A,B);return $}function F7(A,j,q,$){for(let B=0,G=0;;){if(G>=j)return B;if(B==A.length)break;G+=A.charCodeAt(B)==9?q-G%q:1,B=qA(A,B)}return $===!0?-1:A.length}var QB=typeof Symbol=="undefined"?"__"+"ͼ":Symbol.for("ͼ"),sq=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),OB=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class dA{constructor(A,j){this.rules=[];let{finish:q}=j||{};function $(G){return/^@/.test(G)?[G]:G.split(/,\s*/)}function B(G,K,J,Z){let X=[],U=/^@(\w+)\b/.exec(G[0]),Y=U&&U[1]=="keyframes";if(U&&K==null)return J.push(G[0]+";");for(let Q in K){let O=K[Q];if(/&/.test(Q))B(Q.split(/,\s*/).map((F)=>G.map((z)=>F.replace(/&/,z))).reduce((F,z)=>F.concat(z)),O,J);else if(O&&typeof O=="object"){if(!U)throw new RangeError("The value of a property ("+Q+") should be a primitive value.");B($(Q),O,X,Y)}else if(O!=null)X.push(Q.replace(/_.*/,"").replace(/[A-Z]/g,(F)=>"-"+F.toLowerCase())+": "+O+";")}if(X.length||Y)J.push((q&&!U&&!Z?G.map(q):G).join(", ")+" {"+X.join(" ")+"}")}for(let G in A)B($(G),A[G],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let A=OB[QB]||1;return OB[QB]=A+1,"ͼ"+A.toString(36)}static mount(A,j,q){let $=A[sq],B=q&&q.nonce;if(!$)$=new zB(A,B);else if(B)$.setNonce(B);$.mount(Array.isArray(j)?j:[j],A)}}var FB=new Map;class zB{constructor(A,j){let q=A.ownerDocument||A,$=q.defaultView;if(!A.head&&A.adoptedStyleSheets&&$.CSSStyleSheet){let B=FB.get(q);if(B)return A[sq]=B;this.sheet=new $.CSSStyleSheet,FB.set(q,this)}else if(this.styleTag=q.createElement("style"),j)this.styleTag.setAttribute("nonce",j);this.modules=[],A[sq]=this}mount(A,j){let q=this.sheet,$=0,B=0;for(let G=0;G<A.length;G++){let K=A[G],J=this.modules.indexOf(K);if(J<B&&J>-1)this.modules.splice(J,1),B--,J=-1;if(J==-1){if(this.modules.splice(B++,0,K),q)for(let Z=0;Z<K.rules.length;Z++)q.insertRule(K.rules[Z],$++)}else{while(B<J)$+=this.modules[B++].rules.length;$+=K.rules.length,B++}}if(q){if(j.adoptedStyleSheets.indexOf(this.sheet)<0)j.adoptedStyleSheets=[this.sheet,...j.adoptedStyleSheets]}else{let G="";for(let J=0;J<this.modules.length;J++)G+=this.modules[J].getRules()+`
`;this.styleTag.textContent=G;let K=j.head||j;if(this.styleTag.parentNode!=K)K.insertBefore(this.styleTag,K.firstChild)}}setNonce(A){if(this.styleTag&&this.styleTag.getAttribute("nonce")!=A)this.styleTag.setAttribute("nonce",A)}}var Yj={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},aj={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},k4=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),L4=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(t=0;t<10;t++)Yj[48+t]=Yj[96+t]=String(t);var t;for(t=1;t<=24;t++)Yj[t+111]="F"+t;var t;for(t=65;t<=90;t++)Yj[t]=String.fromCharCode(t+32),aj[t]=String.fromCharCode(t);var t;for(_6 in Yj)if(!aj.hasOwnProperty(_6))aj[_6]=Yj[_6];var _6;function IB(A){var j=k4&&A.metaKey&&A.shiftKey&&!A.ctrlKey&&!A.altKey||L4&&A.shiftKey&&A.key&&A.key.length==1||A.key=="Unidentified",q=!j&&A.key||(A.shiftKey?aj:Yj)[A.keyCode]||A.key||"Unidentified";if(q=="Esc")q="Escape";if(q=="Del")q="Delete";if(q=="Left")q="ArrowLeft";if(q=="Up")q="ArrowUp";if(q=="Right")q="ArrowRight";if(q=="Down")q="ArrowDown";return q}function f(){var A=arguments[0];if(typeof A=="string")A=document.createElement(A);var j=1,q=arguments[1];if(q&&typeof q=="object"&&q.nodeType==null&&!Array.isArray(q)){for(var $ in q)if(Object.prototype.hasOwnProperty.call(q,$)){var B=q[$];if(typeof B=="string")A.setAttribute($,B);else if(B!=null)A[$]=B}j++}for(;j<arguments.length;j++)WB(A,arguments[j]);return A}function WB(A,j){if(typeof j=="string")A.appendChild(document.createTextNode(j));else if(j==null);else if(j.nodeType!=null)A.appendChild(j);else if(Array.isArray(j))for(var q=0;q<j.length;q++)WB(A,j[q]);else throw new RangeError("Unsupported child node: "+j)}function y6(A){let j;if(A.nodeType==11)j=A.getSelection?A:A.ownerDocument;else j=A;return j.getSelection()}function A0(A,j){return j?A==j||A.contains(j.nodeType!=1?j.parentNode:j):!1}function R7(A,j){if(!j.anchorNode)return!1;try{return A0(A,j.anchorNode)}catch(q){return!1}}function b6(A){if(A.nodeType==3)return bj(A,0,A.nodeValue.length).getClientRects();else if(A.nodeType==1)return A.getClientRects();else return[]}function P6(A,j,q,$){return q?EB(A,j,q,$,-1)||EB(A,j,q,$,1):!1}function yj(A){for(var j=0;;j++)if(A=A.previousSibling,!A)return j}function S7(A){return A.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(A.nodeName)}function EB(A,j,q,$,B){for(;;){if(A==q&&j==$)return!0;if(j==(B<0?0:$j(A))){if(A.nodeName=="DIV")return!1;let G=A.parentNode;if(!G||G.nodeType!=1)return!1;j=yj(A)+(B<0?0:1),A=G}else if(A.nodeType==1){if(A=A.childNodes[j+(B<0?-1:0)],A.nodeType==1&&A.contentEditable=="false")return!1;j=B<0?$j(A):0}else return!1}}function $j(A){return A.nodeType==3?A.nodeValue.length:A.childNodes.length}function f7(A,j){let q=j?A.left:A.right;return{left:q,right:q,top:A.top,bottom:A.bottom}}function P4(A){let j=A.visualViewport;if(j)return{left:0,right:j.width,top:0,bottom:j.height};return{left:0,right:A.innerWidth,top:0,bottom:A.innerHeight}}function K8(A,j){let q=j.width/A.offsetWidth,$=j.height/A.offsetHeight;if(q>0.995&&q<1.005||!isFinite(q)||Math.abs(j.width-A.offsetWidth)<1)q=1;if($>0.995&&$<1.005||!isFinite($)||Math.abs(j.height-A.offsetHeight)<1)$=1;return{scaleX:q,scaleY:$}}function T4(A,j,q,$,B,G,K,J){let Z=A.ownerDocument,X=Z.defaultView||window;for(let U=A,Y=!1;U&&!Y;)if(U.nodeType==1){let Q,O=U==Z.body,F=1,z=1;if(O)Q=P4(X);else{if(/^(fixed|sticky)$/.test(getComputedStyle(U).position))Y=!0;if(U.scrollHeight<=U.clientHeight&&U.scrollWidth<=U.clientWidth){U=U.assignedSlot||U.parentNode;continue}let N=U.getBoundingClientRect();({scaleX:F,scaleY:z}=K8(U,N)),Q={left:N.left,right:N.left+U.clientWidth*F,top:N.top,bottom:N.top+U.clientHeight*z}}let I=0,W=0;if(B=="nearest"){if(j.top<Q.top){if(W=j.top-(Q.top+K),q>0&&j.bottom>Q.bottom+W)W=j.bottom-Q.bottom+K}else if(j.bottom>Q.bottom){if(W=j.bottom-Q.bottom+K,q<0&&j.top-W<Q.top)W=j.top-(Q.top+K)}}else{let N=j.bottom-j.top,_=Q.bottom-Q.top;W=(B=="center"&&N<=_?j.top+N/2-_/2:B=="start"||B=="center"&&q<0?j.top-K:j.bottom-_+K)-Q.top}if($=="nearest"){if(j.left<Q.left){if(I=j.left-(Q.left+G),q>0&&j.right>Q.right+I)I=j.right-Q.right+G}else if(j.right>Q.right){if(I=j.right-Q.right+G,q<0&&j.left<Q.left+I)I=j.left-(Q.left+G)}}else I=($=="center"?j.left+(j.right-j.left)/2-(Q.right-Q.left)/2:$=="start"==J?j.left-G:j.right-(Q.right-Q.left)+G)-Q.left;if(I||W)if(O)X.scrollBy(I,W);else{let N=0,_=0;if(W){let H=U.scrollTop;U.scrollTop+=W/z,_=(U.scrollTop-H)*z}if(I){let H=U.scrollLeft;U.scrollLeft+=I/F,N=(U.scrollLeft-H)*F}if(j={left:j.left-N,top:j.top-_,right:j.right-N,bottom:j.bottom-_},N&&Math.abs(N-I)<1)$="nearest";if(_&&Math.abs(_-W)<1)B="nearest"}if(O)break;if(j.top<Q.top||j.bottom>Q.bottom||j.left<Q.left||j.right>Q.right)j={left:Math.max(j.left,Q.left),right:Math.min(j.right,Q.right),top:Math.max(j.top,Q.top),bottom:Math.min(j.bottom,Q.bottom)};U=U.assignedSlot||U.parentNode}else if(U.nodeType==11)U=U.host;else break}function C4(A){let j=A.ownerDocument,q,$;for(let B=A.parentNode;B;)if(B==j.body||q&&$)break;else if(B.nodeType==1){if(!$&&B.scrollHeight>B.clientHeight)$=B;if(!q&&B.scrollWidth>B.clientWidth)q=B;B=B.assignedSlot||B.parentNode}else if(B.nodeType==11)B=B.host;else break;return{x:q,y:$}}class J8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(A){return this.anchorNode==A.anchorNode&&this.anchorOffset==A.anchorOffset&&this.focusNode==A.focusNode&&this.focusOffset==A.focusOffset}setRange(A){let{anchorNode:j,focusNode:q}=A;this.set(j,Math.min(A.anchorOffset,j?$j(j):0),q,Math.min(A.focusOffset,q?$j(q):0))}set(A,j,q,$){this.anchorNode=A,this.anchorOffset=j,this.focusNode=q,this.focusOffset=$}}var rj=null;function Z8(A){if(A.setActive)return A.setActive();if(rj)return A.focus(rj);let j=[];for(let q=A;q;q=q.parentNode)if(j.push(q,q.scrollTop,q.scrollLeft),q==q.ownerDocument)break;if(A.focus(rj==null?{get preventScroll(){return rj={preventScroll:!0},!0}}:void 0),!rj){rj=!1;for(let q=0;q<j.length;){let $=j[q++],B=j[q++],G=j[q++];if($.scrollTop!=B)$.scrollTop=B;if($.scrollLeft!=G)$.scrollLeft=G}}}var HB;function bj(A,j,q=j){let $=HB||(HB=document.createRange());return $.setEnd(A,q),$.setStart(A,j),$}function ej(A,j,q,$){let B={key:j,code:j,keyCode:q,which:q,cancelable:!0};if($)({altKey:B.altKey,ctrlKey:B.ctrlKey,shiftKey:B.shiftKey,metaKey:B.metaKey}=$);let G=new KeyboardEvent("keydown",B);G.synthetic=!0,A.dispatchEvent(G);let K=new KeyboardEvent("keyup",B);return K.synthetic=!0,A.dispatchEvent(K),G.defaultPrevented||K.defaultPrevented}function y4(A){while(A){if(A&&(A.nodeType==9||A.nodeType==11&&A.host))return A;A=A.assignedSlot||A.parentNode}return null}function X8(A){while(A.attributes.length)A.removeAttributeNode(A.attributes[0])}function b4(A,j){let{focusNode:q,focusOffset:$}=j;if(!q||j.anchorNode!=q||j.anchorOffset!=$)return!1;$=Math.min($,$j(q));for(;;)if($){if(q.nodeType!=1)return!1;let B=q.childNodes[$-1];if(B.contentEditable=="false")$--;else q=B,$=$j(q)}else if(q==A)return!0;else $=yj(q),q=q.parentNode}function U8(A){return A.scrollTop>Math.max(1,A.scrollHeight-A.clientHeight-4)}function Y8(A,j){for(let q=A,$=j;;)if(q.nodeType==3&&$>0)return{node:q,offset:$};else if(q.nodeType==1&&$>0){if(q.contentEditable=="false")return null;q=q.childNodes[$-1],$=$j(q)}else if(q.parentNode&&!S7(q))$=yj(q),q=q.parentNode;else return null}function Q8(A,j){for(let q=A,$=j;;)if(q.nodeType==3&&$<q.nodeValue.length)return{node:q,offset:$};else if(q.nodeType==1&&$<q.childNodes.length){if(q.contentEditable=="false")return null;q=q.childNodes[$],$=0}else if(q.parentNode&&!S7(q))$=yj(q)+1,q=q.parentNode;else return null}class zA{constructor(A,j,q=!0){this.node=A,this.offset=j,this.precise=q}static before(A,j){return new zA(A.parentNode,yj(A),j)}static after(A,j){return new zA(A.parentNode,yj(A)+1,j)}}var V0=[];class i{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(A){let j=this.posAtStart;for(let q of this.children){if(q==A)return j;j+=q.length+q.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(A){return this.posBefore(A)+A.length}sync(A,j){if(this.flags&2){let q=this.dom,$=null,B;for(let G of this.children){if(G.flags&7){if(!G.dom&&(B=$?$.nextSibling:q.firstChild)){let K=i.get(B);if(!K||!K.parent&&K.canReuseDOM(G))G.reuseDOM(B)}G.sync(A,j),G.flags&=-8}if(B=$?$.nextSibling:q.firstChild,j&&!j.written&&j.node==q&&B!=G.dom)j.written=!0;if(G.dom.parentNode==q)while(B&&B!=G.dom)B=_B(B);else q.insertBefore(G.dom,B);$=G.dom}if(B=$?$.nextSibling:q.firstChild,B&&j&&j.node==q)j.written=!0;while(B)B=_B(B)}else if(this.flags&1){for(let q of this.children)if(q.flags&7)q.sync(A,j),q.flags&=-8}}reuseDOM(A){}localPosFromDOM(A,j){let q;if(A==this.dom)q=this.dom.childNodes[j];else{let $=$j(A)==0?0:j==0?-1:1;for(;;){let B=A.parentNode;if(B==this.dom)break;if($==0&&B.firstChild!=B.lastChild)if(A==B.firstChild)$=-1;else $=1;A=B}if($<0)q=A;else q=A.nextSibling}if(q==this.dom.firstChild)return 0;while(q&&!i.get(q))q=q.nextSibling;if(!q)return this.length;for(let $=0,B=0;;$++){let G=this.children[$];if(G.dom==q)return B;B+=G.length+G.breakAfter}}domBoundsAround(A,j,q=0){let $=-1,B=-1,G=-1,K=-1;for(let J=0,Z=q,X=q;J<this.children.length;J++){let U=this.children[J],Y=Z+U.length;if(Z<A&&Y>j)return U.domBoundsAround(A,j,Z);if(Y>=A&&$==-1)$=J,B=Z;if(Z>j&&U.dom.parentNode==this.dom){G=J,K=X;break}X=Y,Z=Y+U.breakAfter}return{from:B,to:K<0?q+this.length:K,startDOM:($?this.children[$-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:G<this.children.length&&G>=0?this.children[G].dom:null}}markDirty(A=!1){this.flags|=2,this.markParentsDirty(A)}markParentsDirty(A){for(let j=this.parent;j;j=j.parent){if(A)j.flags|=2;if(j.flags&1)return;j.flags|=1,A=!1}}setParent(A){if(this.parent!=A){if(this.parent=A,this.flags&7)this.markParentsDirty(!0)}}setDOM(A){if(this.dom==A)return;if(this.dom)this.dom.cmView=null;this.dom=A,A.cmView=this}get rootView(){for(let A=this;;){let j=A.parent;if(!j)return A;A=j}}replaceChildren(A,j,q=V0){this.markDirty();for(let $=A;$<j;$++){let B=this.children[$];if(B.parent==this&&q.indexOf(B)<0)B.destroy()}if(q.length<250)this.children.splice(A,j-A,...q);else this.children=[].concat(this.children.slice(0,A),q,this.children.slice(j));for(let $=0;$<q.length;$++)q[$].setParent(this)}ignoreMutation(A){return!1}ignoreEvent(A){return!1}childCursor(A=this.length){return new k0(this.children,A,this.children.length)}childPos(A,j=1){return this.childCursor().findPos(A,j)}toString(){let A=this.constructor.name.replace("View","");return A+(this.children.length?"("+this.children.join()+")":this.length?"["+(A=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(A){return A.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(A,j,q,$,B,G){return!1}become(A){return!1}canReuseDOM(A){return A.constructor==this.constructor&&!((this.flags|A.flags)&8)}getSide(){return 0}destroy(){for(let A of this.children)if(A.parent==this)A.destroy();this.parent=null}}i.prototype.breakAfter=0;function _B(A){let j=A.nextSibling;return A.parentNode.removeChild(A),j}class k0{constructor(A,j,q){this.children=A,this.pos=j,this.i=q,this.off=0}findPos(A,j=1){for(;;){if(A>this.pos||A==this.pos&&(j>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=A-this.pos,this;let q=this.children[--this.i];this.pos-=q.length+q.breakAfter}}}function O8(A,j,q,$,B,G,K,J,Z){let{children:X}=A,U=X.length?X[j]:null,Y=G.length?G[G.length-1]:null,Q=Y?Y.breakAfter:K;if(j==$&&U&&!K&&!Q&&G.length<2&&U.merge(q,B,G.length?Y:null,q==0,J,Z))return;if($<X.length){let O=X[$];if(O&&(B<O.length||O.breakAfter&&(Y===null||Y===void 0?void 0:Y.breakAfter))){if(j==$)O=O.split(B),B=0;if(!Q&&Y&&O.merge(0,B,Y,!0,0,Z))G[G.length-1]=O;else{if(B||O.children.length&&!O.children[0].length)O.merge(0,B,null,!1,0,Z);G.push(O)}}else if(O===null||O===void 0?void 0:O.breakAfter)if(Y)Y.breakAfter=1;else K=1;$++}if(U){if(U.breakAfter=K,q>0){if(!K&&G.length&&U.merge(q,U.length,G[0],!1,J,0))U.breakAfter=G.shift().breakAfter;else if(q<U.length||U.children.length&&U.children[U.children.length-1].length==0)U.merge(q,U.length,null,!1,J,0);j++}}while(j<$&&G.length)if(X[$-1].become(G[G.length-1]))$--,G.pop(),Z=G.length?0:J;else if(X[j].become(G[0]))j++,G.shift(),J=G.length?0:Z;else break;if(!G.length&&j&&$<X.length&&!X[j-1].breakAfter&&X[$].merge(0,0,X[j-1],!1,J,Z))j--;if(j<$||G.length)A.replaceChildren(j,$,G)}function F8(A,j,q,$,B,G){let K=A.childCursor(),{i:J,off:Z}=K.findPos(q,1),{i:X,off:U}=K.findPos(j,-1),Y=j-q;for(let Q of $)Y+=Q.length;A.length+=Y,O8(A,X,U,J,Z,$,0,B,G)}var _A=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},j0=typeof document!="undefined"?document:{documentElement:{style:{}}},q0=/Edge\/(\d+)/.exec(_A.userAgent),z8=/MSIE \d/.test(_A.userAgent),$0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_A.userAgent),p7=!!(z8||$0||q0),NB=!p7&&/gecko\/(\d+)/i.test(_A.userAgent),iq=!p7&&/Chrome\/(\d+)/.exec(_A.userAgent),DB="webkitFontSmoothing"in j0.documentElement.style,I8=!p7&&/Apple Computer/.test(_A.vendor),MB=I8&&(/Mobile\/\w+/.test(_A.userAgent)||_A.maxTouchPoints>2),L={mac:MB||/Mac/.test(_A.platform),windows:/Win/.test(_A.platform),linux:/Linux|X11/.test(_A.platform),ie:p7,ie_version:z8?j0.documentMode||6:$0?+$0[1]:q0?+q0[1]:0,gecko:NB,gecko_version:NB?+(/Firefox\/(\d+)/.exec(_A.userAgent)||[0,0])[1]:0,chrome:!!iq,chrome_version:iq?+iq[1]:0,ios:MB,android:/Android\b/.test(_A.userAgent),webkit:DB,safari:I8,webkit_version:DB?+(/\bAppleWebKit\/(\d+)/.exec(_A.userAgent)||[0,0])[1]:0,tabSize:j0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},x4=256;class cA extends i{constructor(A){super();this.text=A}get length(){return this.text.length}createDOM(A){this.setDOM(A||document.createTextNode(this.text))}sync(A,j){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(j&&j.node==this.dom)j.written=!0;this.dom.nodeValue=this.text}}reuseDOM(A){if(A.nodeType==3)this.createDOM(A)}merge(A,j,q){if(this.flags&8||q&&(!(q instanceof cA)||this.length-(j-A)+q.length>x4||q.flags&8))return!1;return this.text=this.text.slice(0,A)+(q?q.text:"")+this.text.slice(j),this.markDirty(),!0}split(A){let j=new cA(this.text.slice(A));return this.text=this.text.slice(0,A),this.markDirty(),j.flags|=this.flags&8,j}localPosFromDOM(A,j){return A==this.dom?j:j?this.text.length:0}domAtPos(A){return new zA(this.dom,A)}domBoundsAround(A,j,q){return{from:q,to:q+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(A,j){return S4(this.dom,A,j)}}class zj extends i{constructor(A,j=[],q=0){super();this.mark=A,this.children=j,this.length=q;for(let $ of j)$.setParent(this)}setAttrs(A){if(X8(A),this.mark.class)A.className=this.mark.class;if(this.mark.attrs)for(let j in this.mark.attrs)A.setAttribute(j,this.mark.attrs[j]);return A}canReuseDOM(A){return super.canReuseDOM(A)&&!((this.flags|A.flags)&8)}reuseDOM(A){if(A.nodeName==this.mark.tagName.toUpperCase())this.setDOM(A),this.flags|=6}sync(A,j){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else if(this.flags&4)this.setAttrs(this.dom);super.sync(A,j)}merge(A,j,q,$,B,G){if(q&&(!(q instanceof zj&&q.mark.eq(this.mark))||A&&B<=0||j<this.length&&G<=0))return!1;return F8(this,A,j,q?q.children.slice():[],B-1,G-1),this.markDirty(),!0}split(A){let j=[],q=0,$=-1,B=0;for(let K of this.children){let J=q+K.length;if(J>A)j.push(q<A?K.split(A-q):K);if($<0&&q>=A)$=B;q=J,B++}let G=this.length-A;if(this.length=A,$>-1)this.children.length=$,this.markDirty();return new zj(this.mark,j,G)}domAtPos(A){return W8(this,A)}coordsAt(A,j){return H8(this,A,j)}}function S4(A,j,q){let $=A.nodeValue.length;if(j>$)j=$;let B=j,G=j,K=0;if(j==0&&q<0||j==$&&q>=0){if(!(L.chrome||L.gecko)){if(j)B--,K=1;else if(G<$)G++,K=-1}}else if(q<0)B--;else if(G<$)G++;let J=bj(A,B,G).getClientRects();if(!J.length)return null;let Z=J[(K?K<0:q>=0)?0:J.length-1];if(L.safari&&!K&&Z.width==0)Z=Array.prototype.find.call(J,(X)=>X.width)||Z;return K?f7(Z,K<0):Z||null}class Ej extends i{static create(A,j,q){return new Ej(A,j,q)}constructor(A,j,q){super();this.widget=A,this.length=j,this.side=q,this.prevWidget=null}split(A){let j=Ej.create(this.widget,this.length-A,this.side);return this.length-=A,j}sync(A){if(!this.dom||!this.widget.updateDOM(this.dom,A)){if(this.dom&&this.prevWidget)this.prevWidget.destroy(this.dom);if(this.prevWidget=null,this.setDOM(this.widget.toDOM(A)),!this.widget.editable)this.dom.contentEditable="false"}}getSide(){return this.side}merge(A,j,q,$,B,G){if(q&&(!(q instanceof Ej)||!this.widget.compare(q.widget)||A>0&&B<=0||j<this.length&&G<=0))return!1;return this.length=A+(q?q.length:0)+(this.length-j),!0}become(A){if(A instanceof Ej&&A.side==this.side&&this.widget.constructor==A.widget.constructor){if(!this.widget.compare(A.widget))this.markDirty(!0);if(this.dom&&!this.prevWidget)this.prevWidget=this.widget;return this.widget=A.widget,this.length=A.length,!0}return!1}ignoreMutation(){return!0}ignoreEvent(A){return this.widget.ignoreEvent(A)}get overrideDOMText(){if(this.length==0)return m.empty;let A=this;while(A.parent)A=A.parent;let{view:j}=A,q=j&&j.state.doc,$=this.posAtStart;return q?q.slice($,$+this.length):m.empty}domAtPos(A){return(this.length?A==0:this.side>0)?zA.before(this.dom):zA.after(this.dom,A==this.length)}domBoundsAround(){return null}coordsAt(A,j){let q=this.widget.coordsAt(this.dom,A,j);if(q)return q;let $=this.dom.getClientRects(),B=null;if(!$.length)return null;let G=this.side?this.side<0:A>0;for(let K=G?$.length-1:0;;K+=G?-1:1)if(B=$[K],A>0?K==0:K==$.length-1||B.top<B.bottom)break;return f7(B,!G)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){if(super.destroy(),this.dom)this.widget.destroy(this.dom)}}class j6 extends i{constructor(A){super();this.side=A}get length(){return 0}merge(){return!1}become(A){return A instanceof j6&&A.side==this.side}split(){return new j6(this.side)}sync(){if(!this.dom){let A=document.createElement("img");A.className="cm-widgetBuffer",A.setAttribute("aria-hidden","true"),this.setDOM(A)}}getSide(){return this.side}domAtPos(A){return this.side>0?zA.before(this.dom):zA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(A){return this.dom.getBoundingClientRect()}get overrideDOMText(){return m.empty}get isHidden(){return!0}}cA.prototype.children=Ej.prototype.children=j6.prototype.children=V0;function W8(A,j){let q=A.dom,{children:$}=A,B=0;for(let G=0;B<$.length;B++){let K=$[B],J=G+K.length;if(J==G&&K.getSide()<=0)continue;if(j>G&&j<J&&K.dom.parentNode==q)return K.domAtPos(j-G);if(j<=G)break;G=J}for(let G=B;G>0;G--){let K=$[G-1];if(K.dom.parentNode==q)return K.domAtPos(K.length)}for(let G=B;G<$.length;G++){let K=$[G];if(K.dom.parentNode==q)return K.domAtPos(0)}return new zA(q,0)}function E8(A,j,q){let $,{children:B}=A;if(q>0&&j instanceof zj&&B.length&&($=B[B.length-1])instanceof zj&&$.mark.eq(j.mark))E8($,j.children[0],q-1);else B.push(j),j.setParent(A);A.length+=j.length}function H8(A,j,q){let $=null,B=-1,G=null,K=-1;function J(X,U){for(let Y=0,Q=0;Y<X.children.length&&Q<=U;Y++){let O=X.children[Y],F=Q+O.length;if(F>=U){if(O.children.length)J(O,U-Q);else if((!G||G.isHidden&&(q>0||h4(G,O)))&&(F>U||Q==F&&O.getSide()>0))G=O,K=U-Q;else if(Q<U||Q==F&&O.getSide()<0&&!O.isHidden)$=O,B=U-Q}Q=F}}J(A,j);let Z=(q<0?$:G)||$||G;if(Z)return Z.coordsAt(Math.max(0,Z==$?B:K),q);return w4(A)}function w4(A){let j=A.dom.lastChild;if(!j)return A.dom.getBoundingClientRect();let q=b6(j);return q[q.length-1]||null}function h4(A,j){let q=A.coordsAt(0,1),$=j.coordsAt(0,1);return q&&$&&$.top<q.bottom}function B0(A,j){for(let q in A)if(q=="class"&&j.class)j.class+=" "+A.class;else if(q=="style"&&j.style)j.style+=";"+A.style;else j[q]=A[q];return j}var RB=Object.create(null);function w7(A,j,q){if(A==j)return!0;if(!A)A=RB;if(!j)j=RB;let $=Object.keys(A),B=Object.keys(j);if($.length-(q&&$.indexOf(q)>-1?1:0)!=B.length-(q&&B.indexOf(q)>-1?1:0))return!1;for(let G of $)if(G!=q&&(B.indexOf(G)==-1||A[G]!==j[G]))return!1;return!0}function G0(A,j,q){let $=!1;if(j){for(let B in j)if(!(q&&(B in q)))if($=!0,B=="style")A.style.cssText="";else A.removeAttribute(B)}if(q){for(let B in q)if(!(j&&j[B]==q[B]))if($=!0,B=="style")A.style.cssText=q[B];else A.setAttribute(B,q[B])}return $}function v4(A){let j=Object.create(null);for(let q=0;q<A.attributes.length;q++){let $=A.attributes[q];j[$.name]=$.value}return j}class hA{eq(A){return!1}updateDOM(A,j){return!1}compare(A){return this==A||this.constructor==A.constructor&&this.eq(A)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(A){return!0}coordsAt(A,j,q){return null}get isHidden(){return!1}get editable(){return!1}destroy(A){}}var EA=function(A){return A[A.Text=0]="Text",A[A.WidgetBefore=1]="WidgetBefore",A[A.WidgetAfter=2]="WidgetAfter",A[A.WidgetRange=3]="WidgetRange",A}(EA||(EA={}));class C extends Aj{constructor(A,j,q,$){super();this.startSide=A,this.endSide=j,this.widget=q,this.spec=$}get heightRelevant(){return!1}static mark(A){return new w6(A)}static widget(A){let j=Math.max(-1e4,Math.min(1e4,A.side||0)),q=!!A.block;return j+=q&&!A.inlineOrder?j>0?300000000:-400000000:j>0?1e8:-1e8,new Hj(A,j,j,q,A.widget||null,!1)}static replace(A){let j=!!A.block,q,$;if(A.isBlockGap)q=-500000000,$=400000000;else{let{start:B,end:G}=_8(A,j);q=(B?j?-300000000:-1:500000000)-1,$=(G?j?200000000:1:-600000000)+1}return new Hj(A,q,$,j,A.widget||null,!0)}static line(A){return new h6(A)}static set(A,j=!1){return h.of(A,j)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}C.none=h.empty;class w6 extends C{constructor(A){let{start:j,end:q}=_8(A);super(j?-1:500000000,q?1:-600000000,null,A);this.tagName=A.tagName||"span",this.class=A.class||"",this.attrs=A.attributes||null}eq(A){var j,q;return this==A||A instanceof w6&&this.tagName==A.tagName&&(this.class||((j=this.attrs)===null||j===void 0?void 0:j.class))==(A.class||((q=A.attrs)===null||q===void 0?void 0:q.class))&&w7(this.attrs,A.attrs,"class")}range(A,j=A){if(A>=j)throw new RangeError("Mark decorations may not be empty");return super.range(A,j)}}w6.prototype.point=!1;class h6 extends C{constructor(A){super(-200000000,-200000000,null,A)}eq(A){return A instanceof h6&&this.spec.class==A.spec.class&&w7(this.spec.attributes,A.spec.attributes)}range(A,j=A){if(j!=A)throw new RangeError("Line decoration ranges must be zero-length");return super.range(A,j)}}h6.prototype.mapMode=ZA.TrackBefore;h6.prototype.point=!0;class Hj extends C{constructor(A,j,q,$,B,G){super(j,q,B,A);this.block=$,this.isReplace=G,this.mapMode=!$?ZA.TrackDel:j<=0?ZA.TrackBefore:ZA.TrackAfter}get type(){return this.startSide!=this.endSide?EA.WidgetRange:this.startSide<=0?EA.WidgetBefore:EA.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(A){return A instanceof Hj&&m4(this.widget,A.widget)&&this.block==A.block&&this.startSide==A.startSide&&this.endSide==A.endSide}range(A,j=A){if(this.isReplace&&(A>j||A==j&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&j!=A)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(A,j)}}Hj.prototype.point=!0;function _8(A,j=!1){let{inclusiveStart:q,inclusiveEnd:$}=A;if(q==null)q=A.inclusive;if($==null)$=A.inclusive;return{start:q!==null&&q!==void 0?q:j,end:$!==null&&$!==void 0?$:j}}function m4(A,j){return A==j||!!(A&&j&&A.compare(j))}function V7(A,j,q,$=0){let B=q.length-1;if(B>=0&&q[B]+$>=A)q[B]=Math.max(q[B],j);else q.push(A,j)}class $A extends i{constructor(){super(...arguments);this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(A,j,q,$,B,G){if(q){if(!(q instanceof $A))return!1;if(!this.dom)q.transferDOM(this)}if($)this.setDeco(q?q.attrs:null);return F8(this,A,j,q?q.children.slice():[],B,G),!0}split(A){let j=new $A;if(j.breakAfter=this.breakAfter,this.length==0)return j;let{i:q,off:$}=this.childPos(A);if($)j.append(this.children[q].split($),0),this.children[q].merge($,this.children[q].length,null,!1,0,0),q++;for(let B=q;B<this.children.length;B++)j.append(this.children[B],0);while(q>0&&this.children[q-1].length==0)this.children[--q].destroy();return this.children.length=q,this.markDirty(),this.length=A,j}transferDOM(A){if(!this.dom)return;this.markDirty(),A.setDOM(this.dom),A.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null}setDeco(A){if(!w7(this.attrs,A)){if(this.dom)this.prevAttrs=this.attrs,this.markDirty();this.attrs=A}}append(A,j){E8(this,A,j)}addLineDeco(A){let j=A.spec.attributes,q=A.spec.class;if(j)this.attrs=B0(j,this.attrs||{});if(q)this.attrs=B0({class:q},this.attrs||{})}domAtPos(A){return W8(this,A)}reuseDOM(A){if(A.nodeName=="DIV")this.setDOM(A),this.flags|=6}sync(A,j){var q;if(!this.dom)this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0;else if(this.flags&4)X8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0;if(this.prevAttrs!==void 0)G0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0;super.sync(A,j);let $=this.dom.lastChild;while($&&i.get($)instanceof zj)$=$.lastChild;if(!$||!this.length||$.nodeName!="BR"&&((q=i.get($))===null||q===void 0?void 0:q.isEditable)==!1&&(!L.ios||!this.children.some((B)=>B instanceof cA))){let B=document.createElement("BR");B.cmIgnore=!0,this.dom.appendChild(B)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let A=0,j;for(let q of this.children){if(!(q instanceof cA)||/[^ -~]/.test(q.text))return null;let $=b6(q.dom);if($.length!=1)return null;A+=$[0].width,j=$[0].height}return!A?null:{lineHeight:this.dom.getBoundingClientRect().height,charWidth:A/this.length,textHeight:j}}coordsAt(A,j){let q=H8(this,A,j);if(!this.children.length&&q&&this.parent){let{heightOracle:$}=this.parent.view.viewState,B=q.bottom-q.top;if(Math.abs(B-$.lineHeight)<2&&$.textHeight<B){let G=(B-$.textHeight)/2;return{top:q.top+G,bottom:q.bottom-G,left:q.left,right:q.left}}}return q}become(A){return A instanceof $A&&this.children.length==0&&A.children.length==0&&w7(this.attrs,A.attrs)&&this.breakAfter==A.breakAfter}covers(){return!0}static find(A,j){for(let q=0,$=0;q<A.children.length;q++){let B=A.children[q],G=$+B.length;if(G>=j){if(B instanceof $A)return B;if(G>j)break}$=G+B.breakAfter}return null}}class Fj extends i{constructor(A,j,q){super();this.widget=A,this.length=j,this.deco=q,this.breakAfter=0,this.prevWidget=null}merge(A,j,q,$,B,G){if(q&&(!(q instanceof Fj)||!this.widget.compare(q.widget)||A>0&&B<=0||j<this.length&&G<=0))return!1;return this.length=A+(q?q.length:0)+(this.length-j),!0}domAtPos(A){return A==0?zA.before(this.dom):zA.after(this.dom,A==this.length)}split(A){let j=this.length-A;this.length=A;let q=new Fj(this.widget,j,this.deco);return q.breakAfter=this.breakAfter,q}get children(){return V0}sync(A){if(!this.dom||!this.widget.updateDOM(this.dom,A)){if(this.dom&&this.prevWidget)this.prevWidget.destroy(this.dom);if(this.prevWidget=null,this.setDOM(this.widget.toDOM(A)),!this.widget.editable)this.dom.contentEditable="false"}}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):m.empty}domBoundsAround(){return null}become(A){if(A instanceof Fj&&A.widget.constructor==this.widget.constructor){if(!A.widget.compare(this.widget))this.markDirty(!0);if(this.dom&&!this.prevWidget)this.prevWidget=this.widget;return this.widget=A.widget,this.length=A.length,this.deco=A.deco,this.breakAfter=A.breakAfter,!0}return!1}ignoreMutation(){return!0}ignoreEvent(A){return this.widget.ignoreEvent(A)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(A,j){let q=this.widget.coordsAt(this.dom,A,j);if(q)return q;if(this.widget instanceof h7)return null;return f7(this.dom.getBoundingClientRect(),this.length?A==0:j<=0)}destroy(){if(super.destroy(),this.dom)this.widget.destroy(this.dom)}covers(A){let{startSide:j,endSide:q}=this.deco;return j==q?!1:A<0?j<0:q>0}}class h7 extends hA{constructor(A){super();this.height=A}toDOM(){let A=document.createElement("div");return A.className="cm-gap",this.updateDOM(A),A}eq(A){return A.height==this.height}updateDOM(A){return A.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class T6{constructor(A,j,q,$){this.doc=A,this.pos=j,this.end=q,this.disallowBlockEffectsFor=$,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=A.iter(),this.skip=j}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let A=this.content[this.content.length-1];return!(A.breakAfter||A instanceof Fj&&A.deco.endSide<0)}getLine(){if(!this.curLine)this.content.push(this.curLine=new $A),this.atCursorPos=!0;return this.curLine}flushBuffer(A=this.bufferMarks){if(this.pendingBuffer)this.curLine.append(z7(new j6(-1),A),A.length),this.pendingBuffer=0}addBlockWidget(A){this.flushBuffer(),this.curLine=null,this.content.push(A)}finish(A){if(this.pendingBuffer&&A<=this.bufferMarks.length)this.flushBuffer();else this.pendingBuffer=0;if(!this.posCovered()&&!(A&&this.content.length&&this.content[this.content.length-1]instanceof Fj))this.getLine()}buildText(A,j,q){while(A>0){if(this.textOff==this.text.length){let{value:B,lineBreak:G,done:K}=this.cursor.next(this.skip);if(this.skip=0,K)throw new Error("Ran out of text content when drawing inline views");if(G){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else this.breakAtStart=1;this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,A--;continue}else this.text=B,this.textOff=0}let $=Math.min(this.text.length-this.textOff,A,512);this.flushBuffer(j.slice(j.length-q)),this.getLine().append(z7(new cA(this.text.slice(this.textOff,this.textOff+$)),j),q),this.atCursorPos=!0,this.textOff+=$,A-=$,q=0}}span(A,j,q,$){if(this.buildText(j-A,q,$),this.pos=j,this.openStart<0)this.openStart=$}point(A,j,q,$,B,G){if(this.disallowBlockEffectsFor[G]&&q instanceof Hj){if(q.block)throw new RangeError("Block decorations may not be specified via plugins");if(j>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let K=j-A;if(q instanceof Hj)if(q.block){if(q.startSide>0&&!this.posCovered())this.getLine();this.addBlockWidget(new Fj(q.widget||xj.block,K,q))}else{let J=Ej.create(q.widget||xj.inline,K,K?0:q.startSide),Z=this.atCursorPos&&!J.isEditable&&B<=$.length&&(A<j||q.startSide>0),X=!J.isEditable&&(A<j||B>$.length||q.startSide<=0),U=this.getLine();if(this.pendingBuffer==2&&!Z&&!J.isEditable)this.pendingBuffer=0;if(this.flushBuffer($),Z)U.append(z7(new j6(1),$),B),B=$.length+Math.max(0,B-$.length);if(U.append(z7(J,$),B),this.atCursorPos=X,this.pendingBuffer=!X?0:A<j||B>$.length?1:2,this.pendingBuffer)this.bufferMarks=$.slice()}else if(this.doc.lineAt(this.pos).from==this.pos)this.getLine().addLineDeco(q);if(K){if(this.textOff+K<=this.text.length)this.textOff+=K;else this.skip+=K-(this.text.length-this.textOff),this.text="",this.textOff=0;this.pos=j}if(this.openStart<0)this.openStart=B}static build(A,j,q,$,B){let G=new T6(A,j,q,B);if(G.openEnd=h.spans($,j,q,G),G.openStart<0)G.openStart=G.openEnd;return G.finish(G.openEnd),G}}function z7(A,j){for(let q of j)A=new zj(q,[A],A.length);return A}class xj extends hA{constructor(A){super();this.tag=A}eq(A){return A.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(A){return A.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}xj.inline=new xj("span");xj.block=new xj("div");var d=function(A){return A[A.LTR=0]="LTR",A[A.RTL=1]="RTL",A}(d||(d={})),Sj=d.LTR,L0=d.RTL;function N8(A){let j=[];for(let q=0;q<A.length;q++)j.push(1<<+A[q]);return j}var u4=N8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),g4=N8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),K0=Object.create(null),jj=[];for(let A of["()","[]","{}"]){let j=A.charCodeAt(0),q=A.charCodeAt(1);K0[j]=q,K0[q]=-j}function D8(A){return A<=247?u4[A]:1424<=A&&A<=1524?2:1536<=A&&A<=1785?g4[A-1536]:1774<=A&&A<=2220?4:8192<=A&&A<=8204?256:64336<=A&&A<=65023?4:1}var f4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Oj{get dir(){return this.level%2?L0:Sj}constructor(A,j,q){this.from=A,this.to=j,this.level=q}side(A,j){return this.dir==j==A?this.to:this.from}forward(A,j){return A==(this.dir==j)}static find(A,j,q,$){let B=-1;for(let G=0;G<A.length;G++){let K=A[G];if(K.from<=j&&K.to>=j){if(K.level==q)return G;if(B<0||($!=0?$<0?K.from<j:K.to>j:A[B].level>K.level))B=G}}if(B<0)throw new RangeError("Index out of range");return B}}function M8(A,j){if(A.length!=j.length)return!1;for(let q=0;q<A.length;q++){let $=A[q],B=j[q];if($.from!=B.from||$.to!=B.to||$.direction!=B.direction||!M8($.inner,B.inner))return!1}return!0}var s=[];function p4(A,j,q,$,B){for(let G=0;G<=$.length;G++){let K=G?$[G-1].to:j,J=G<$.length?$[G].from:q,Z=G?256:B;for(let X=K,U=Z,Y=Z;X<J;X++){let Q=D8(A.charCodeAt(X));if(Q==512)Q=U;else if(Q==8&&Y==4)Q=16;if(s[X]=Q==4?2:Q,Q&7)Y=Q;U=Q}for(let X=K,U=Z,Y=Z;X<J;X++){let Q=s[X];if(Q==128)if(X<J-1&&U==s[X+1]&&U&24)Q=s[X]=U;else s[X]=256;else if(Q==64){let O=X+1;while(O<J&&s[O]==64)O++;let F=X&&U==8||O<q&&s[O]==8?Y==1?1:8:256;for(let z=X;z<O;z++)s[z]=F;X=O-1}else if(Q==8&&Y==1)s[X]=1;if(U=Q,Q&7)Y=Q}}}function l4(A,j,q,$,B){let G=B==1?2:1;for(let K=0,J=0,Z=0;K<=$.length;K++){let X=K?$[K-1].to:j,U=K<$.length?$[K].from:q;for(let Y=X,Q,O,F;Y<U;Y++)if(O=K0[Q=A.charCodeAt(Y)])if(O<0){for(let z=J-3;z>=0;z-=3)if(jj[z+1]==-O){let I=jj[z+2],W=I&2?B:!(I&4)?0:I&1?G:B;if(W)s[Y]=s[jj[z]]=W;J=z;break}}else if(jj.length==189)break;else jj[J++]=Y,jj[J++]=Q,jj[J++]=Z;else if((F=s[Y])==2||F==1){let z=F==B;Z=z?0:1;for(let I=J-3;I>=0;I-=3){let W=jj[I+2];if(W&2)break;if(z)jj[I+2]|=2;else{if(W&4)break;jj[I+2]|=4}}}}}function d4(A,j,q,$){for(let B=0,G=$;B<=q.length;B++){let K=B?q[B-1].to:A,J=B<q.length?q[B].from:j;for(let Z=K;Z<J;){let X=s[Z];if(X==256){let U=Z+1;for(;;)if(U==J){if(B==q.length)break;U=q[B++].to,J=B<q.length?q[B].from:j}else if(s[U]==256)U++;else break;let Y=G==1,Q=(U<j?s[U]:$)==1,O=Y==Q?Y?1:2:$;for(let F=U,z=B,I=z?q[z-1].to:A;F>Z;){if(F==I)F=q[--z].from,I=z?q[z-1].to:A;s[--F]=O}Z=U}else G=X,Z++}}}function J0(A,j,q,$,B,G,K){let J=$%2?2:1;if($%2==B%2)for(let Z=j,X=0;Z<q;){let U=!0,Y=!1;if(X==G.length||Z<G[X].from){let z=s[Z];if(z!=J)U=!1,Y=z==16}let Q=!U&&J==1?[]:null,O=U?$:$+1,F=Z;A:for(;;)if(X<G.length&&F==G[X].from){if(Y)break A;let z=G[X];if(!U)for(let I=z.to,W=X+1;;){if(I==q)break A;if(W<G.length&&G[W].from==I)I=G[W++].to;else if(s[I]==J)break A;else break}if(X++,Q)Q.push(z);else{if(z.from>Z)K.push(new Oj(Z,z.from,O));let I=z.direction==Sj!=!(O%2);Z0(A,I?$+1:$,B,z.inner,z.from,z.to,K),Z=z.to}F=z.to}else if(F==q||(U?s[F]!=J:s[F]==J))break;else F++;if(Q)J0(A,Z,F,$+1,B,Q,K);else if(Z<F)K.push(new Oj(Z,F,O));Z=F}else for(let Z=q,X=G.length;Z>j;){let U=!0,Y=!1;if(!X||Z>G[X-1].to){let z=s[Z-1];if(z!=J)U=!1,Y=z==16}let Q=!U&&J==1?[]:null,O=U?$:$+1,F=Z;A:for(;;)if(X&&F==G[X-1].to){if(Y)break A;let z=G[--X];if(!U)for(let I=z.from,W=X;;){if(I==j)break A;if(W&&G[W-1].to==I)I=G[--W].from;else if(s[I-1]==J)break A;else break}if(Q)Q.push(z);else{if(z.to<Z)K.push(new Oj(z.to,Z,O));let I=z.direction==Sj!=!(O%2);Z0(A,I?$+1:$,B,z.inner,z.from,z.to,K),Z=z.from}F=z.from}else if(F==j||(U?s[F-1]!=J:s[F-1]==J))break;else F--;if(Q)J0(A,F,Z,$+1,B,Q,K);else if(F<Z)K.push(new Oj(F,Z,O));Z=F}}function Z0(A,j,q,$,B,G,K){let J=j%2?2:1;p4(A,B,G,$,J),l4(A,B,G,$,J),d4(B,G,$,J),J0(A,B,G,j,q,$,K)}function c4(A,j,q){if(!A)return[new Oj(0,0,j==L0?1:0)];if(j==Sj&&!q.length&&!f4.test(A))return R8(A.length);if(q.length)while(A.length>s.length)s[s.length]=256;let $=[],B=j==Sj?0:1;return Z0(A,B,B,q,0,A.length,$),$}function R8(A){return[new Oj(0,A,0)]}var V8="";function s4(A,j,q,$,B){var G;let K=$.head-A.from,J=Oj.find(j,K,(G=$.bidiLevel)!==null&&G!==void 0?G:-1,$.assoc),Z=j[J],X=Z.side(B,q);if(K==X){let Q=J+=B?1:-1;if(Q<0||Q>=j.length)return null;Z=j[J=Q],K=Z.side(!B,q),X=Z.side(B,q)}let U=qA(A.text,K,Z.forward(B,q));if(U<Z.from||U>Z.to)U=X;V8=A.text.slice(Math.min(K,U),Math.max(K,U));let Y=J==(B?j.length-1:0)?null:j[J+(B?1:-1)];if(Y&&U==X&&Y.level+(B?0:1)<Z.level)return E.cursor(Y.side(!B,q)+A.from,Y.forward(B,q)?1:-1,Y.level);return E.cursor(U+A.from,Z.forward(B,q)?-1:1,Z.level)}function i4(A,j,q){for(let $=j;$<q;$++){let B=D8(A.charCodeAt($));if(B==1)return Sj;if(B==2||B==4)return L0}return Sj}var k8=k.define(),L8=k.define(),P8=k.define(),T8=k.define(),X0=k.define(),C8=k.define(),y8=k.define(),P0=k.define(),T0=k.define(),b8=k.define({combine:(A)=>A.some((j)=>j)}),x8=k.define({combine:(A)=>A.some((j)=>j)}),S8=k.define();class A6{constructor(A,j="nearest",q="nearest",$=5,B=5,G=!1){this.range=A,this.y=j,this.x=q,this.yMargin=$,this.xMargin=B,this.isSnapshot=G}map(A){return A.empty?this:new A6(this.range.map(A),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(A){return this.range.to<=A.doc.length?this:new A6(E.cursor(A.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}var I7=b.define({map:(A,j)=>A.map(j)}),w8=b.define();function YA(A,j,q){let $=A.facet(T8);if($.length)$[0](j);else if(window.onerror&&window.onerror(String(j),q,void 0,void 0,j));else if(q)console.error(q+":",j);else console.error(j)}var Qj=k.define({combine:(A)=>A.length?A[0]:!0}),n4=0,oj=k.define({combine(A){return A.filter((j,q)=>{for(let $=0;$<q;$++)if(A[$].plugin==j.plugin)return!1;return!0})}});class r{constructor(A,j,q,$,B){this.id=A,this.create=j,this.domEventHandlers=q,this.domEventObservers=$,this.baseExtensions=B(this),this.extension=this.baseExtensions.concat(oj.of({plugin:this,arg:void 0}))}of(A){return this.baseExtensions.concat(oj.of({plugin:this,arg:A}))}static define(A,j){let{eventHandlers:q,eventObservers:$,provide:B,decorations:G}=j||{};return new r(n4++,A,q,$,(K)=>{let J=[];if(G)J.push(x6.of((Z)=>{let X=Z.plugin(K);return X?G(X):C.none}));if(B)J.push(B(K));return J})}static fromClass(A,j){return r.define((q,$)=>new A(q,$),j)}}class k7{constructor(A){this.spec=A,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(A){if(!this.value){if(this.spec)try{this.value=this.spec.plugin.create(A,this.spec.arg)}catch(j){YA(A.state,j,"CodeMirror plugin crashed"),this.deactivate()}}else if(this.mustUpdate){let j=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(j)}catch(q){if(YA(j.state,q,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch($){}this.deactivate()}}return this}destroy(A){var j;if((j=this.value)===null||j===void 0?void 0:j.destroy)try{this.value.destroy()}catch(q){YA(A.state,q,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}var h8=k.define(),C0=k.define(),x6=k.define(),v8=k.define(),y0=k.define(),m8=k.define();function VB(A,j){let q=A.state.facet(m8);if(!q.length)return q;let $=q.map((G)=>G instanceof Function?G(A):G),B=[];return h.spans($,j.from,j.to,{point(){},span(G,K,J,Z){let X=G-j.from,U=K-j.from,Y=B;for(let Q=J.length-1;Q>=0;Q--,Z--){let O=J[Q].spec.bidiIsolate,F;if(O==null)O=i4(j.text,X,U);if(Z>0&&Y.length&&(F=Y[Y.length-1]).to==X&&F.direction==O)F.to=U,Y=F.inner;else{let z={from:X,to:U,direction:O,inner:[]};Y.push(z),Y=z.inner}}}}),B}var u8=k.define();function b0(A){let j=0,q=0,$=0,B=0;for(let G of A.state.facet(u8)){let K=G(A);if(K){if(K.left!=null)j=Math.max(j,K.left);if(K.right!=null)q=Math.max(q,K.right);if(K.top!=null)$=Math.max($,K.top);if(K.bottom!=null)B=Math.max(B,K.bottom)}}return{left:j,right:q,top:$,bottom:B}}var D6=k.define();class xA{constructor(A,j,q,$){this.fromA=A,this.toA=j,this.fromB=q,this.toB=$}join(A){return new xA(Math.min(this.fromA,A.fromA),Math.max(this.toA,A.toA),Math.min(this.fromB,A.fromB),Math.max(this.toB,A.toB))}addToSet(A){let j=A.length,q=this;for(;j>0;j--){let $=A[j-1];if($.fromA>q.toA)continue;if($.toA<q.fromA)break;q=q.join($),A.splice(j-1,1)}return A.splice(j,0,q),A}static extendWithRanges(A,j){if(j.length==0)return A;let q=[];for(let $=0,B=0,G=0,K=0;;$++){let J=$==A.length?null:A[$],Z=G-K,X=J?J.fromB:1e9;while(B<j.length&&j[B]<X){let U=j[B],Y=j[B+1],Q=Math.max(K,U),O=Math.min(X,Y);if(Q<=O)new xA(Q+Z,O+Z,Q,O).addToSet(q);if(Y>X)break;else B+=2}if(!J)return q;new xA(J.fromA,J.toA,J.fromB,J.toB).addToSet(q),G=J.toA,K=J.toB}}}class v7{constructor(A,j,q){this.view=A,this.state=j,this.transactions=q,this.flags=0,this.startState=A.state,this.changes=jA.empty(this.startState.doc.length);for(let B of q)this.changes=this.changes.compose(B.changes);let $=[];this.changes.iterChangedRanges((B,G,K,J)=>$.push(new xA(B,G,K,J))),this.changedRanges=$}static create(A,j,q){return new v7(A,j,q)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((A)=>A.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class U0 extends i{get length(){return this.view.state.doc.length}constructor(A){super();this.view=A,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=C.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(A.contentDOM),this.children=[new $A],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xA(0,0,0,A.state.doc.length)],0,null)}update(A){var j;let q=A.changedRanges;if(this.minWidth>0&&q.length)if(!q.every(({fromA:Z,toA:X})=>X<this.minWidthFrom||Z>this.minWidthTo))this.minWidth=this.minWidthFrom=this.minWidthTo=0;else this.minWidthFrom=A.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=A.changes.mapPos(this.minWidthTo,1);this.updateEditContextFormatting(A);let $=-1;if(this.view.inputState.composing>=0&&!this.view.observer.editContext){if((j=this.domChanged)===null||j===void 0?void 0:j.newSel)$=this.domChanged.newSel.head;else if(!j9(A.changes,this.hasComposition)&&!A.selectionSet)$=A.state.selection.main.head}let B=$>-1?r4(this.view,A.changes,$):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:Z,to:X}=this.hasComposition;q=new xA(Z,X,A.changes.mapPos(Z,-1),A.changes.mapPos(X,1)).addToSet(q.slice())}if(this.hasComposition=B?{from:B.range.fromB,to:B.range.toB}:null,(L.ie||L.chrome)&&!B&&A&&A.state.doc.lines!=A.startState.doc.lines)this.forceSelection=!0;let G=this.decorations,K=this.updateDeco(),J=e4(G,K,A.changes);if(q=xA.extendWithRanges(q,J),!(this.flags&7)&&q.length==0)return!1;else{if(this.updateInner(q,A.startState.doc.length,B),A.transactions.length)this.lastUpdate=Date.now();return!0}}updateInner(A,j,q){this.view.viewState.mustMeasureContent=!0,this.updateChildren(A,j,q);let{observer:$}=this.view;$.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let G=L.chrome||L.ios?{node:$.selectionRange.focusNode,written:!1}:void 0;if(this.sync(this.view,G),this.flags&=-8,G&&(G.written||$.selectionRange.focusNode!=G.node))this.forceSelection=!0;this.dom.style.height=""}),this.markedForComposition.forEach((G)=>G.flags&=-9);let B=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){for(let G of this.children)if(G instanceof Fj&&G.widget instanceof h7)B.push(G.dom)}$.updateGaps(B)}updateChildren(A,j,q){let $=q?q.range.addToSet(A.slice()):A,B=this.childCursor(j);for(let G=$.length-1;;G--){let K=G>=0?$[G]:null;if(!K)break;let{fromA:J,toA:Z,fromB:X,toB:U}=K,Y,Q,O,F;if(q&&q.range.fromB<U&&q.range.toB>X){let _=T6.build(this.view.state.doc,X,q.range.fromB,this.decorations,this.dynamicDecorationMap),H=T6.build(this.view.state.doc,q.range.toB,U,this.decorations,this.dynamicDecorationMap);Q=_.breakAtStart,O=_.openStart,F=H.openEnd;let D=this.compositionView(q);if(H.breakAtStart)D.breakAfter=1;else if(H.content.length&&D.merge(D.length,D.length,H.content[0],!1,H.openStart,0))D.breakAfter=H.content[0].breakAfter,H.content.shift();if(_.content.length&&D.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd))_.content.pop();Y=_.content.concat(D).concat(H.content)}else({content:Y,breakAtStart:Q,openStart:O,openEnd:F}=T6.build(this.view.state.doc,X,U,this.decorations,this.dynamicDecorationMap));let{i:z,off:I}=B.findPos(Z,1),{i:W,off:N}=B.findPos(J,-1);O8(this,W,N,z,I,Y,Q,O,F)}if(q)this.fixCompositionDOM(q)}updateEditContextFormatting(A){this.editContextFormatting=this.editContextFormatting.map(A.changes);for(let j of A.transactions)for(let q of j.effects)if(q.is(w8))this.editContextFormatting=q.value}compositionView(A){let j=new cA(A.text.nodeValue);j.flags|=8;for(let{deco:$}of A.marks)j=new zj($,[j],j.length);let q=new $A;return q.append(j,0),q}fixCompositionDOM(A){let j=(B,G)=>{G.flags|=8|(G.children.some((J)=>J.flags&7)?1:0),this.markedForComposition.add(G);let K=i.get(B);if(K&&K!=G)K.dom=null;G.setDOM(B)},q=this.childPos(A.range.fromB,1),$=this.children[q.i];j(A.line,$);for(let B=A.marks.length-1;B>=-1;B--)q=$.childPos(q.off,1),$=$.children[q.i],j(B>=0?A.marks[B].node:A.text,$)}updateSelection(A=!1,j=!1){if(A||!this.view.observer.selectionRange.focusNode)this.view.observer.readSelectionRange();let q=this.view.root.activeElement,$=q==this.dom,B=!$&&!(this.view.state.facet(Qj)||this.dom.tabIndex>-1)&&R7(this.dom,this.view.observer.selectionRange)&&!(q&&this.dom.contains(q));if(!($||j||B))return;let G=this.forceSelection;this.forceSelection=!1;let K=this.view.state.selection.main,J=this.moveToLine(this.domAtPos(K.anchor)),Z=K.empty?J:this.moveToLine(this.domAtPos(K.head));if(L.gecko&&K.empty&&!this.hasComposition&&a4(J)){let U=document.createTextNode("");this.view.observer.ignore(()=>J.node.insertBefore(U,J.node.childNodes[J.offset]||null)),J=Z=new zA(U,0),G=!0}let X=this.view.observer.selectionRange;if(G||!X.focusNode||(!P6(J.node,J.offset,X.anchorNode,X.anchorOffset)||!P6(Z.node,Z.offset,X.focusNode,X.focusOffset))&&!this.suppressWidgetCursorChange(X,K))this.view.observer.ignore(()=>{if(L.android&&L.chrome&&this.dom.contains(X.focusNode)&&A9(X.focusNode,this.dom))this.dom.blur(),this.dom.focus({preventScroll:!0});let U=y6(this.view.root);if(!U);else if(K.empty){if(L.gecko){let Y=o4(J.node,J.offset);if(Y&&Y!=3){let Q=(Y==1?Y8:Q8)(J.node,J.offset);if(Q)J=new zA(Q.node,Q.offset)}}if(U.collapse(J.node,J.offset),K.bidiLevel!=null&&U.caretBidiLevel!==void 0)U.caretBidiLevel=K.bidiLevel}else if(U.extend){U.collapse(J.node,J.offset);try{U.extend(Z.node,Z.offset)}catch(Y){}}else{let Y=document.createRange();if(K.anchor>K.head)[J,Z]=[Z,J];Y.setEnd(Z.node,Z.offset),Y.setStart(J.node,J.offset),U.removeAllRanges(),U.addRange(Y)}if(B&&this.view.root.activeElement==this.dom){if(this.dom.blur(),q)q.focus()}}),this.view.observer.setSelectionRange(J,Z);this.impreciseAnchor=J.precise?null:new zA(X.anchorNode,X.anchorOffset),this.impreciseHead=Z.precise?null:new zA(X.focusNode,X.focusOffset)}suppressWidgetCursorChange(A,j){return this.hasComposition&&j.empty&&P6(A.focusNode,A.focusOffset,A.anchorNode,A.anchorOffset)&&this.posFromDOM(A.focusNode,A.focusOffset)==j.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:A}=this,j=A.state.selection.main,q=y6(A.root),{anchorNode:$,anchorOffset:B}=A.observer.selectionRange;if(!q||!j.empty||!j.assoc||!q.modify)return;let G=$A.find(this,j.head);if(!G)return;let K=G.posAtStart;if(j.head==K||j.head==K+G.length)return;let J=this.coordsAt(j.head,-1),Z=this.coordsAt(j.head,1);if(!J||!Z||J.bottom>Z.top)return;let X=this.domAtPos(j.head+j.assoc);q.collapse(X.node,X.offset),q.modify("move",j.assoc<0?"forward":"backward","lineboundary"),A.observer.readSelectionRange();let U=A.observer.selectionRange;if(A.docView.posFromDOM(U.anchorNode,U.anchorOffset)!=j.from)q.collapse($,B)}moveToLine(A){let j=this.dom,q;if(A.node!=j)return A;for(let $=A.offset;!q&&$<j.childNodes.length;$++){let B=i.get(j.childNodes[$]);if(B instanceof $A)q=B.domAtPos(0)}for(let $=A.offset-1;!q&&$>=0;$--){let B=i.get(j.childNodes[$]);if(B instanceof $A)q=B.domAtPos(B.length)}return q?new zA(q.node,q.offset,!0):A}nearest(A){for(let j=A;j;){let q=i.get(j);if(q&&q.rootView==this)return q;j=j.parentNode}return null}posFromDOM(A,j){let q=this.nearest(A);if(!q)throw new RangeError("Trying to find position for a DOM position outside of the document");return q.localPosFromDOM(A,j)+q.posAtStart}domAtPos(A){let{i:j,off:q}=this.childCursor().findPos(A,-1);for(;j<this.children.length-1;){let $=this.children[j];if(q<$.length||$ instanceof $A)break;j++,q=0}return this.children[j].domAtPos(q)}coordsAt(A,j){let q=null,$=0;for(let B=this.length,G=this.children.length-1;G>=0;G--){let K=this.children[G],J=B-K.breakAfter,Z=J-K.length;if(J<A)break;if(Z<=A&&(Z<A||K.covers(-1))&&(J>A||K.covers(1))&&(!q||K instanceof $A&&!(q instanceof $A&&j>=0)))q=K,$=Z;else if(q&&Z==A&&J==A&&K instanceof Fj&&Math.abs(j)<2){if(K.deco.startSide<0)break;else if(G)q=null}B=Z}return q?q.coordsAt(A-$,j):null}coordsForChar(A){let{i:j,off:q}=this.childPos(A,1),$=this.children[j];if(!($ instanceof $A))return null;while($.children.length){let{i:K,off:J}=$.childPos(q,1);for(;;K++){if(K==$.children.length)return null;if(($=$.children[K]).length)break}q=J}if(!($ instanceof cA))return null;let B=qA($.text,q);if(B==q)return null;let G=bj($.dom,q,B).getClientRects();for(let K=0;K<G.length;K++){let J=G[K];if(K==G.length-1||J.top<J.bottom&&J.left<J.right)return J}return null}measureVisibleLineHeights(A){let j=[],{from:q,to:$}=A,B=this.view.contentDOM.clientWidth,G=B>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,K=-1,J=this.view.textDirection==d.LTR;for(let Z=0,X=0;X<this.children.length;X++){let U=this.children[X],Y=Z+U.length;if(Y>$)break;if(Z>=q){let Q=U.dom.getBoundingClientRect();if(j.push(Q.height),G){let O=U.dom.lastChild,F=O?b6(O):[];if(F.length){let z=F[F.length-1],I=J?z.right-Q.left:Q.right-z.left;if(I>K)K=I,this.minWidth=B,this.minWidthFrom=Z,this.minWidthTo=Y}}}Z=Y+U.breakAfter}return j}textDirectionAt(A){let{i:j}=this.childPos(A,1);return getComputedStyle(this.children[j].dom).direction=="rtl"?d.RTL:d.LTR}measureTextSize(){for(let B of this.children)if(B instanceof $A){let G=B.measureTextSize();if(G)return G}let A=document.createElement("div"),j,q,$;return A.className="cm-line",A.style.width="99999px",A.style.position="absolute",A.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(A);let B=b6(A.firstChild)[0];j=A.getBoundingClientRect().height,q=B?B.width/27:7,$=B?B.height:j,A.remove()}),{lineHeight:j,charWidth:q,textHeight:$}}childCursor(A=this.length){let j=this.children.length;if(j)A-=this.children[--j].length;return new k0(this.children,A,j)}computeBlockGapDeco(){let A=[],j=this.view.viewState;for(let q=0,$=0;;$++){let B=$==j.viewports.length?null:j.viewports[$],G=B?B.from-1:this.length;if(G>q){let K=(j.lineBlockAt(G).bottom-j.lineBlockAt(q).top)/this.view.scaleY;A.push(C.replace({widget:new h7(K),block:!0,inclusive:!0,isBlockGap:!0}).range(q,G))}if(!B)break;q=B.to+1}return C.set(A)}updateDeco(){let A=1,j=this.view.state.facet(x6).map((B)=>{return(this.dynamicDecorationMap[A++]=typeof B=="function")?B(this.view):B}),q=!1,$=this.view.state.facet(v8).map((B,G)=>{let K=typeof B=="function";if(K)q=!0;return K?B(this.view):B});if($.length)this.dynamicDecorationMap[A++]=q,j.push(h.join($));this.decorations=[this.editContextFormatting,...j,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];while(A<this.decorations.length)this.dynamicDecorationMap[A++]=!1;return this.decorations}scrollIntoView(A){if(A.isSnapshot){let Z=this.view.viewState.lineBlockAt(A.range.head);this.view.scrollDOM.scrollTop=Z.top-A.yMargin,this.view.scrollDOM.scrollLeft=A.xMargin;return}for(let Z of this.view.state.facet(S8))try{if(Z(this.view,A.range,A))return!0}catch(X){YA(this.view.state,X,"scroll handler")}let{range:j}=A,q=this.coordsAt(j.head,j.empty?j.assoc:j.head>j.anchor?-1:1),$;if(!q)return;if(!j.empty&&($=this.coordsAt(j.anchor,j.anchor>j.head?-1:1)))q={left:Math.min(q.left,$.left),top:Math.min(q.top,$.top),right:Math.max(q.right,$.right),bottom:Math.max(q.bottom,$.bottom)};let B=b0(this.view),G={left:q.left-B.left,top:q.top-B.top,right:q.right+B.right,bottom:q.bottom+B.bottom},{offsetWidth:K,offsetHeight:J}=this.view.scrollDOM;T4(this.view.scrollDOM,G,j.head<j.anchor?-1:1,A.x,A.y,Math.max(Math.min(A.xMargin,K),-K),Math.max(Math.min(A.yMargin,J),-J),this.view.textDirection==d.LTR)}}function a4(A){return A.node.nodeType==1&&A.node.firstChild&&(A.offset==0||A.node.childNodes[A.offset-1].contentEditable=="false")&&(A.offset==A.node.childNodes.length||A.node.childNodes[A.offset].contentEditable=="false")}function g8(A,j){let q=A.observer.selectionRange;if(!q.focusNode)return null;let $=Y8(q.focusNode,q.focusOffset),B=Q8(q.focusNode,q.focusOffset),G=$||B;if(B&&$&&B.node!=$.node){let J=i.get(B.node);if(!J||J instanceof cA&&J.text!=B.node.nodeValue)G=B;else if(A.docView.lastCompositionAfterCursor){let Z=i.get($.node);if(!(!Z||Z instanceof cA&&Z.text!=$.node.nodeValue))G=B}}if(A.docView.lastCompositionAfterCursor=G!=$,!G)return null;let K=j-G.offset;return{from:K,to:K+G.node.nodeValue.length,node:G.node}}function r4(A,j,q){let $=g8(A,q);if(!$)return null;let{node:B,from:G,to:K}=$,J=B.nodeValue;if(/[\n\r]/.test(J))return null;if(A.state.doc.sliceString($.from,$.to)!=J)return null;let Z=j.invertedDesc,X=new xA(Z.mapPos(G),Z.mapPos(K),G,K),U=[];for(let Y=B.parentNode;;Y=Y.parentNode){let Q=i.get(Y);if(Q instanceof zj)U.push({node:Y,deco:Q.mark});else if(Q instanceof $A||Y.nodeName=="DIV"&&Y.parentNode==A.contentDOM)return{range:X,text:B,marks:U,line:Y};else if(Y!=A.contentDOM)U.push({node:Y,deco:new w6({inclusive:!0,attributes:v4(Y),tagName:Y.tagName.toLowerCase()})});else return null}}function o4(A,j){if(A.nodeType!=1)return 0;return(j&&A.childNodes[j-1].contentEditable=="false"?1:0)|(j<A.childNodes.length&&A.childNodes[j].contentEditable=="false"?2:0)}var t4=class A{constructor(){this.changes=[]}compareRange(j,q){V7(j,q,this.changes)}comparePoint(j,q){V7(j,q,this.changes)}boundChange(j){V7(j,j,this.changes)}};function e4(A,j,q){let $=new t4;return h.compare(A,j,q,$),$.changes}function A9(A,j){for(let q=A;q&&q!=j;q=q.assignedSlot||q.parentNode)if(q.nodeType==1&&q.contentEditable=="false")return!0;return!1}function j9(A,j){let q=!1;if(j)A.iterChangedRanges(($,B)=>{if($<j.to&&B>j.from)q=!0});return q}function q9(A,j,q=1){let $=A.charCategorizer(j),B=A.doc.lineAt(j),G=j-B.from;if(B.length==0)return E.cursor(j);if(G==0)q=1;else if(G==B.length)q=-1;let K=G,J=G;if(q<0)K=qA(B.text,G,!1);else J=qA(B.text,G);let Z=$(B.text.slice(K,J));while(K>0){let X=qA(B.text,K,!1);if($(B.text.slice(X,K))!=Z)break;K=X}while(J<B.length){let X=qA(B.text,J);if($(B.text.slice(J,X))!=Z)break;J=X}return E.range(K+B.from,J+B.from)}function $9(A,j){return j.left>A?j.left-A:Math.max(0,A-j.right)}function B9(A,j){return j.top>A?j.top-A:Math.max(0,A-j.bottom)}function nq(A,j){return A.top<j.bottom-1&&A.bottom>j.top+1}function kB(A,j){return j<A.top?{top:j,left:A.left,right:A.right,bottom:A.bottom}:A}function LB(A,j){return j>A.bottom?{top:A.top,left:A.left,right:A.right,bottom:j}:A}function Y0(A,j,q){let $,B,G,K,J=!1,Z,X,U,Y;for(let F=A.firstChild;F;F=F.nextSibling){let z=b6(F);for(let I=0;I<z.length;I++){let W=z[I];if(B&&nq(B,W))W=kB(LB(W,B.bottom),B.top);let N=$9(j,W),_=B9(q,W);if(N==0&&_==0)return F.nodeType==3?PB(F,j,q):Y0(F,j,q);if(!$||K>_||K==_&&G>N)$=F,B=W,G=N,K=_,J=!N?!0:j<W.left?I>0:I<z.length-1;if(N==0){if(q>W.bottom&&(!U||U.bottom<W.bottom))Z=F,U=W;else if(q<W.top&&(!Y||Y.top>W.top))X=F,Y=W}else if(U&&nq(U,W))U=LB(U,W.bottom);else if(Y&&nq(Y,W))Y=kB(Y,W.top)}}if(U&&U.bottom>=q)$=Z,B=U;else if(Y&&Y.top<=q)$=X,B=Y;if(!$)return{node:A,offset:0};let Q=Math.max(B.left,Math.min(B.right,j));if($.nodeType==3)return PB($,Q,q);if(J&&$.contentEditable!="false")return Y0($,Q,q);let O=Array.prototype.indexOf.call(A.childNodes,$)+(j>=(B.left+B.right)/2?1:0);return{node:A,offset:O}}function PB(A,j,q){let $=A.nodeValue.length,B=-1,G=1e9,K=0;for(let J=0;J<$;J++){let Z=bj(A,J,J+1).getClientRects();for(let X=0;X<Z.length;X++){let U=Z[X];if(U.top==U.bottom)continue;if(!K)K=j-U.left;let Y=(U.top>q?U.top-q:q-U.bottom)-1;if(U.left-1<=j&&U.right+1>=j&&Y<G){let Q=j>=(U.left+U.right)/2,O=Q;if(L.chrome||L.gecko){if(bj(A,J).getBoundingClientRect().left==U.right)O=!Q}if(Y<=0)return{node:A,offset:J+(O?1:0)};B=J+(O?1:0),G=Y}}}return{node:A,offset:B>-1?B:K>0?A.nodeValue.length:0}}function f8(A,j,q,$=-1){var B,G;let K=A.contentDOM.getBoundingClientRect(),J=K.top+A.viewState.paddingTop,Z,{docHeight:X}=A.viewState,{x:U,y:Y}=j,Q=Y-J;if(Q<0)return 0;if(Q>X)return A.state.doc.length;for(let H=A.viewState.heightOracle.textHeight/2,D=!1;;){if(Z=A.elementAtHeight(Q),Z.type==EA.Text)break;for(;;){if(Q=$>0?Z.bottom+H:Z.top-H,Q>=0&&Q<=X)break;if(D)return q?null:0;D=!0,$=-$}}Y=J+Q;let O=Z.from;if(O<A.viewport.from)return A.viewport.from==0?0:q?null:TB(A,K,Z,U,Y);if(O>A.viewport.to)return A.viewport.to==A.state.doc.length?A.state.doc.length:q?null:TB(A,K,Z,U,Y);let F=A.dom.ownerDocument,z=A.root.elementFromPoint?A.root:F,I=z.elementFromPoint(U,Y);if(I&&!A.contentDOM.contains(I))I=null;if(!I){if(U=Math.max(K.left+1,Math.min(K.right-1,U)),I=z.elementFromPoint(U,Y),I&&!A.contentDOM.contains(I))I=null}let W,N=-1;if(I&&((B=A.docView.nearest(I))===null||B===void 0?void 0:B.isEditable)!=!1){if(F.caretPositionFromPoint){let H=F.caretPositionFromPoint(U,Y);if(H)({offsetNode:W,offset:N}=H)}else if(F.caretRangeFromPoint){let H=F.caretRangeFromPoint(U,Y);if(H){if({startContainer:W,startOffset:N}=H,!A.contentDOM.contains(W)||L.safari&&G9(W,N,U)||L.chrome&&K9(W,N,U))W=void 0}}if(W)N=Math.min($j(W),N)}if(!W||!A.docView.dom.contains(W)){let H=$A.find(A.docView,O);if(!H)return Q>Z.top+Z.height/2?Z.to:Z.from;({node:W,offset:N}=Y0(H.dom,U,Y))}let _=A.docView.nearest(W);if(!_)return null;if(_.isWidget&&((G=_.dom)===null||G===void 0?void 0:G.nodeType)==1){let H=_.dom.getBoundingClientRect();return j.y<H.top||j.y<=H.bottom&&j.x<=(H.left+H.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(W,N)+_.posAtStart}function TB(A,j,q,$,B){let G=Math.round(($-j.left)*A.defaultCharacterWidth);if(A.lineWrapping&&q.height>A.defaultLineHeight*1.5){let J=A.viewState.heightOracle.textHeight,Z=Math.floor((B-q.top-(A.defaultLineHeight-J)*0.5)/J);G+=Z*A.viewState.heightOracle.lineLength}let K=A.state.sliceDoc(q.from,q.to);return q.from+F7(K,G,A.state.tabSize)}function G9(A,j,q){let $,B=A;if(A.nodeType!=3||j!=($=A.nodeValue.length))return!1;for(;;){let G=B.nextSibling;if(G){if(G.nodeName=="BR")break;return!1}else{let K=B.parentNode;if(!K||K.nodeName=="DIV")break;B=K}}return bj(A,$-1,$).getBoundingClientRect().right>q}function K9(A,j,q){if(j!=0)return!1;for(let B=A;;){let G=B.parentNode;if(!G||G.nodeType!=1||G.firstChild!=B)return!1;if(G.classList.contains("cm-line"))break;B=G}let $=A.nodeType==1?A.getBoundingClientRect():bj(A,0,Math.max(A.nodeValue.length,1)).getBoundingClientRect();return q-$.left>5}function Q0(A,j,q){let $=A.lineBlockAt(j);if(Array.isArray($.type)){let B;for(let G of $.type){if(G.from>j)break;if(G.to<j)continue;if(G.from<j&&G.to>j)return G;if(!B||G.type==EA.Text&&(B.type!=G.type||(q<0?G.from<j:G.to>j)))B=G}return B||$}return $}function J9(A,j,q,$){let B=Q0(A,j.head,j.assoc||-1),G=!$||B.type!=EA.Text||!(A.lineWrapping||B.widgetLineBreaks)?null:A.coordsAtPos(j.assoc<0&&j.head>B.from?j.head-1:j.head);if(G){let K=A.dom.getBoundingClientRect(),J=A.textDirectionAt(B.from),Z=A.posAtCoords({x:q==(J==d.LTR)?K.right-1:K.left+1,y:(G.top+G.bottom)/2});if(Z!=null)return E.cursor(Z,q?-1:1)}return E.cursor(q?B.to:B.from,q?-1:1)}function CB(A,j,q,$){let B=A.state.doc.lineAt(j.head),G=A.bidiSpans(B),K=A.textDirectionAt(B.from);for(let J=j,Z=null;;){let X=s4(B,G,K,J,q),U=V8;if(!X){if(B.number==(q?A.state.doc.lines:1))return J;U=`
`,B=A.state.doc.line(B.number+(q?1:-1)),G=A.bidiSpans(B),X=A.visualLineSide(B,!q)}if(!Z){if(!$)return X;Z=$(U)}else if(!Z(U))return J;J=X}}function Z9(A,j,q){let $=A.state.charCategorizer(j),B=$(q);return(G)=>{let K=$(G);if(B==l.Space)B=K;return B==K}}function X9(A,j,q,$){let B=j.head,G=q?1:-1;if(B==(q?A.state.doc.length:0))return E.cursor(B,j.assoc);let K=j.goalColumn,J,Z=A.contentDOM.getBoundingClientRect(),X=A.coordsAtPos(B,j.assoc||-1),U=A.documentTop;if(X){if(K==null)K=X.left-Z.left;J=G<0?X.top:X.bottom}else{let O=A.viewState.lineBlockAt(B);if(K==null)K=Math.min(Z.right-Z.left,A.defaultCharacterWidth*(B-O.from));J=(G<0?O.top:O.bottom)+U}let Y=Z.left+K,Q=$!==null&&$!==void 0?$:A.viewState.heightOracle.textHeight>>1;for(let O=0;;O+=10){let F=J+(Q+O)*G,z=f8(A,{x:Y,y:F},!1,G);if(F<Z.top||F>Z.bottom||(G<0?z<B:z>B)){let I=A.docView.coordsForChar(z),W=!I||F<I.top?-1:1;return E.cursor(z,W,void 0,K)}}}function L7(A,j,q){for(;;){let $=0;for(let B of A)B.between(j-1,j+1,(G,K,J)=>{if(j>G&&j<K){let Z=$||q||(j-G<K-j?-1:1);j=Z<0?G:K,$=Z}});if(!$)return j}}function aq(A,j,q){let $=L7(A.state.facet(y0).map((B)=>B(A)),q.from,j.head>q.from?-1:1);return $==q.from?q:E.cursor($,$<q.from?1:-1)}var M6="￿";class p8{constructor(A,j){this.points=A,this.text="",this.lineSeparator=j.facet(v.lineSeparator)}append(A){this.text+=A}lineBreak(){this.text+=M6}readRange(A,j){if(!A)return this;let q=A.parentNode;for(let $=A;;){this.findPointBefore(q,$);let B=this.text.length;this.readNode($);let G=$.nextSibling;if(G==j)break;let K=i.get($),J=i.get(G);if(K&&J?K.breakAfter:(K?K.breakAfter:S7($))||S7(G)&&($.nodeName!="BR"||$.cmIgnore)&&this.text.length>B)this.lineBreak();$=G}return this.findPointBefore(q,j),this}readTextNode(A){let j=A.nodeValue;for(let q of this.points)if(q.node==A)q.pos=this.text.length+Math.min(q.offset,j.length);for(let q=0,$=this.lineSeparator?null:/\r\n?|\n/g;;){let B=-1,G=1,K;if(this.lineSeparator)B=j.indexOf(this.lineSeparator,q),G=this.lineSeparator.length;else if(K=$.exec(j))B=K.index,G=K[0].length;if(this.append(j.slice(q,B<0?j.length:B)),B<0)break;if(this.lineBreak(),G>1){for(let J of this.points)if(J.node==A&&J.pos>this.text.length)J.pos-=G-1}q=B+G}}readNode(A){if(A.cmIgnore)return;let j=i.get(A),q=j&&j.overrideDOMText;if(q!=null){this.findPointInside(A,q.length);for(let $=q.iter();!$.next().done;)if($.lineBreak)this.lineBreak();else this.append($.value)}else if(A.nodeType==3)this.readTextNode(A);else if(A.nodeName=="BR"){if(A.nextSibling)this.lineBreak()}else if(A.nodeType==1)this.readRange(A.firstChild,null)}findPointBefore(A,j){for(let q of this.points)if(q.node==A&&A.childNodes[q.offset]==j)q.pos=this.text.length}findPointInside(A,j){for(let q of this.points)if(A.nodeType==3?q.node==A:A.contains(q.node))q.pos=this.text.length+(U9(A,q.node,q.offset)?j:0)}}function U9(A,j,q){for(;;){if(!j||q<$j(j))return!1;if(j==A)return!0;q=yj(j)+1,j=j.parentNode}}class O0{constructor(A,j){this.node=A,this.offset=j,this.pos=-1}}class l8{constructor(A,j,q,$){this.typeOver=$,this.bounds=null,this.text="",this.domChanged=j>-1;let{impreciseHead:B,impreciseAnchor:G}=A.docView;if(A.state.readOnly&&j>-1)this.newSel=null;else if(j>-1&&(this.bounds=A.docView.domBoundsAround(j,q,0))){let K=B||G?[]:O9(A),J=new p8(K,A.state);J.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=J.text,this.newSel=F9(K,this.bounds.from)}else{let K=A.observer.selectionRange,J=B&&B.node==K.focusNode&&B.offset==K.focusOffset||!A0(A.contentDOM,K.focusNode)?A.state.selection.main.head:A.docView.posFromDOM(K.focusNode,K.focusOffset),Z=G&&G.node==K.anchorNode&&G.offset==K.anchorOffset||!A0(A.contentDOM,K.anchorNode)?A.state.selection.main.anchor:A.docView.posFromDOM(K.anchorNode,K.anchorOffset),X=A.viewport;if((L.ios||L.chrome)&&A.state.selection.main.empty&&J!=Z&&(X.from>0||X.to<A.state.doc.length)){let U=Math.min(J,Z),Y=Math.max(J,Z),Q=X.from-U,O=X.to-Y;if((Q==0||Q==1||U==0)&&(O==0||O==-1||Y==A.state.doc.length))J=0,Z=A.state.doc.length}this.newSel=E.single(Z,J)}}}function d8(A,j){let q,{newSel:$}=j,B=A.state.selection.main,G=A.inputState.lastKeyTime>Date.now()-100?A.inputState.lastKeyCode:-1;if(j.bounds){let{from:K,to:J}=j.bounds,Z=B.from,X=null;if(G===8||L.android&&j.text.length<J-K)Z=B.to,X="end";let U=Q9(A.state.doc.sliceString(K,J,M6),j.text,Z-K,X);if(U){if(L.chrome&&G==13&&U.toB==U.from+2&&j.text.slice(U.from,U.toB)==M6+M6)U.toB--;q={from:K+U.from,to:K+U.toA,insert:m.of(j.text.slice(U.from,U.toB).split(M6))}}}else if($&&(!A.hasFocus&&A.state.facet(Qj)||$.main.eq(B)))$=null;if(!q&&!$)return!1;if(!q&&j.typeOver&&!B.empty&&$&&$.main.empty)q={from:B.from,to:B.to,insert:A.state.doc.slice(B.from,B.to)};else if((L.mac||L.android)&&q&&q.from==q.to&&q.from==B.head-1&&/^\. ?$/.test(q.insert.toString())&&A.contentDOM.getAttribute("autocorrect")=="off"){if($&&q.insert.length==2)$=E.single($.main.anchor-1,$.main.head-1);q={from:q.from,to:q.to,insert:m.of([q.insert.toString().replace("."," ")])}}else if(q&&q.from>=B.from&&q.to<=B.to&&(q.from!=B.from||q.to!=B.to)&&B.to-B.from-(q.to-q.from)<=4)q={from:B.from,to:B.to,insert:A.state.doc.slice(B.from,q.from).append(q.insert).append(A.state.doc.slice(q.to,B.to))};else if(L.chrome&&q&&q.from==q.to&&q.from==B.head&&q.insert.toString()==`
 `&&A.lineWrapping){if($)$=E.single($.main.anchor-1,$.main.head-1);q={from:B.from,to:B.to,insert:m.of([" "])}}if(q)return x0(A,q,$,G);else if($&&!$.main.eq(B)){let K=!1,J="select";if(A.inputState.lastSelectionTime>Date.now()-50){if(A.inputState.lastSelectionOrigin=="select")K=!0;J=A.inputState.lastSelectionOrigin}return A.dispatch({selection:$,scrollIntoView:K,userEvent:J}),!0}else return!1}function x0(A,j,q,$=-1){if(L.ios&&A.inputState.flushIOSKey(j))return!0;let B=A.state.selection.main;if(L.android&&(j.to==B.to&&(j.from==B.from||j.from==B.from-1&&A.state.sliceDoc(j.from,B.from)==" ")&&j.insert.length==1&&j.insert.lines==2&&ej(A.contentDOM,"Enter",13)||(j.from==B.from-1&&j.to==B.to&&j.insert.length==0||$==8&&j.insert.length<j.to-j.from&&j.to>B.head)&&ej(A.contentDOM,"Backspace",8)||j.from==B.from&&j.to==B.to+1&&j.insert.length==0&&ej(A.contentDOM,"Delete",46)))return!0;let G=j.insert.toString();if(A.inputState.composing>=0)A.inputState.composing++;let K,J=()=>K||(K=Y9(A,j,q));if(!A.state.facet(C8).some((Z)=>Z(A,j.from,j.to,G,J)))A.dispatch(J());return!0}function Y9(A,j,q){let $,B=A.state,G=B.selection.main;if(j.from>=G.from&&j.to<=G.to&&j.to-j.from>=(G.to-G.from)/3&&(!q||q.main.empty&&q.main.from==j.from+j.insert.length)&&A.inputState.composing<0){let J=G.from<j.from?B.sliceDoc(G.from,j.from):"",Z=G.to>j.to?B.sliceDoc(j.to,G.to):"";$=B.replaceSelection(A.state.toText(J+j.insert.sliceString(0,void 0,A.state.lineBreak)+Z))}else{let J=B.changes(j),Z=q&&q.main.to<=J.newLength?q.main:void 0;if(B.selection.ranges.length>1&&A.inputState.composing>=0&&j.to<=G.to&&j.to>=G.to-10){let X=A.state.sliceDoc(j.from,j.to),U,Y=q&&g8(A,q.main.head);if(Y){let F=j.insert.length-(j.to-j.from);U={from:Y.from,to:Y.to-F}}else U=A.state.doc.lineAt(G.head);let Q=G.to-j.to,O=G.to-G.from;$=B.changeByRange((F)=>{if(F.from==G.from&&F.to==G.to)return{changes:J,range:Z||F.map(J)};let z=F.to-Q,I=z-X.length;if(F.to-F.from!=O||A.state.sliceDoc(I,z)!=X||F.to>=U.from&&F.from<=U.to)return{range:F};let W=B.changes({from:I,to:z,insert:j.insert}),N=F.to-G.to;return{changes:W,range:!Z?F.map(W):E.range(Math.max(0,Z.anchor+N),Math.max(0,Z.head+N))}})}else $={changes:J,selection:Z&&B.selection.replaceRange(Z)}}let K="input.type";if(A.composing||A.inputState.compositionPendingChange&&A.inputState.compositionEndedAt>Date.now()-50){if(A.inputState.compositionPendingChange=!1,K+=".compose",A.inputState.compositionFirstChange)K+=".start",A.inputState.compositionFirstChange=!1}return B.update($,{userEvent:K,scrollIntoView:!0})}function Q9(A,j,q,$){let B=Math.min(A.length,j.length),G=0;while(G<B&&A.charCodeAt(G)==j.charCodeAt(G))G++;if(G==B&&A.length==j.length)return null;let K=A.length,J=j.length;while(K>0&&J>0&&A.charCodeAt(K-1)==j.charCodeAt(J-1))K--,J--;if($=="end"){let Z=Math.max(0,G-Math.min(K,J));q-=K+Z-G}if(K<G&&A.length<j.length){let Z=q<=G&&q>=K?G-q:0;G-=Z,J=G+(J-K),K=G}else if(J<G){let Z=q<=G&&q>=J?G-q:0;G-=Z,K=G+(K-J),J=G}return{from:G,toA:K,toB:J}}function O9(A){let j=[];if(A.root.activeElement!=A.contentDOM)return j;let{anchorNode:q,anchorOffset:$,focusNode:B,focusOffset:G}=A.observer.selectionRange;if(q){if(j.push(new O0(q,$)),B!=q||G!=$)j.push(new O0(B,G))}return j}function F9(A,j){if(A.length==0)return null;let q=A[0].pos,$=A.length==2?A[1].pos:q;return q>-1&&$>-1?E.single(q+j,$+j):null}class c8{setSelectionOrigin(A){this.lastSelectionOrigin=A,this.lastSelectionTime=Date.now()}constructor(A){if(this.view=A,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=A.hasFocus,L.safari)A.contentDOM.addEventListener("input",()=>null);if(L.gecko)T9(A.contentDOM.ownerDocument)}handleEvent(A){if(!N9(this.view,A)||this.ignoreDuringComposition(A))return;if(A.type=="keydown"&&this.keydown(A))return;if(this.view.updateState!=0)Promise.resolve().then(()=>this.runHandlers(A.type,A));else this.runHandlers(A.type,A)}runHandlers(A,j){let q=this.handlers[A];if(q){for(let $ of q.observers)$(this.view,j);for(let $ of q.handlers){if(j.defaultPrevented)break;if($(this.view,j)){j.preventDefault();break}}}}ensureHandlers(A){let j=z9(A),q=this.handlers,$=this.view.contentDOM;for(let B in j)if(B!="scroll"){let G=!j[B].handlers.length,K=q[B];if(K&&G!=!K.handlers.length)$.removeEventListener(B,this.handleEvent),K=null;if(!K)$.addEventListener(B,this.handleEvent,{passive:G})}for(let B in q)if(B!="scroll"&&!j[B])$.removeEventListener(B,this.handleEvent);this.handlers=j}keydown(A){if(this.lastKeyCode=A.keyCode,this.lastKeyTime=Date.now(),A.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&A.keyCode!=27&&i8.indexOf(A.keyCode)<0)this.tabFocusMode=-1;if(L.android&&L.chrome&&!A.synthetic&&(A.keyCode==13||A.keyCode==8))return this.view.observer.delayAndroidKey(A.key,A.keyCode),!0;let j;if(L.ios&&!A.synthetic&&!A.altKey&&!A.metaKey&&((j=s8.find((q)=>q.keyCode==A.keyCode))&&!A.ctrlKey||I9.indexOf(A.key)>-1&&A.ctrlKey&&!A.shiftKey))return this.pendingIOSKey=j||A,setTimeout(()=>this.flushIOSKey(),250),!0;if(A.keyCode!=229)this.view.observer.forceFlush();return!1}flushIOSKey(A){let j=this.pendingIOSKey;if(!j)return!1;if(j.key=="Enter"&&A&&A.from<A.to&&/^\S+$/.test(A.insert.toString()))return!1;return this.pendingIOSKey=void 0,ej(this.view.contentDOM,j.key,j.keyCode,j instanceof KeyboardEvent?j:void 0)}ignoreDuringComposition(A){if(!/^key/.test(A.type))return!1;if(this.composing>0)return!0;if(L.safari&&!L.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)return this.compositionPendingKey=!1,!0;return!1}startMouseSelection(A){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=A}update(A){if(this.view.observer.update(A),this.mouseSelection)this.mouseSelection.update(A);if(this.draggedContent&&A.docChanged)this.draggedContent=this.draggedContent.map(A.changes);if(A.transactions.length)this.lastKeyCode=this.lastSelectionTime=0}destroy(){if(this.mouseSelection)this.mouseSelection.destroy()}}function yB(A,j){return(q,$)=>{try{return j.call(A,$,q)}catch(B){YA(q.state,B)}}}function z9(A){let j=Object.create(null);function q($){return j[$]||(j[$]={observers:[],handlers:[]})}for(let $ of A){let B=$.spec,G=B&&B.plugin.domEventHandlers,K=B&&B.plugin.domEventObservers;if(G)for(let J in G){let Z=G[J];if(Z)q(J).handlers.push(yB($.value,Z))}if(K)for(let J in K){let Z=K[J];if(Z)q(J).observers.push(yB($.value,Z))}}for(let $ in sA)q($).handlers.push(sA[$]);for(let $ in SA)q($).observers.push(SA[$]);return j}var s8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],I9="dthko",i8=[16,17,18,20,91,92,224,225],W7=6;function E7(A){return Math.max(0,A)*0.7+8}function W9(A,j){return Math.max(Math.abs(A.clientX-j.clientX),Math.abs(A.clientY-j.clientY))}class n8{constructor(A,j,q,$){this.view=A,this.startEvent=j,this.style=q,this.mustSelect=$,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=j,this.scrollParents=C4(A.contentDOM),this.atoms=A.state.facet(y0).map((G)=>G(A));let B=A.contentDOM.ownerDocument;B.addEventListener("mousemove",this.move=this.move.bind(this)),B.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=j.shiftKey,this.multiple=A.state.facet(v.allowMultipleSelections)&&E9(A,j),this.dragging=_9(A,j)&&o8(j)==1?null:!1}start(A){if(this.dragging===!1)this.select(A)}move(A){if(A.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&W9(this.startEvent,A)<10)return;this.select(this.lastEvent=A);let j=0,q=0,$=0,B=0,G=this.view.win.innerWidth,K=this.view.win.innerHeight;if(this.scrollParents.x)({left:$,right:G}=this.scrollParents.x.getBoundingClientRect());if(this.scrollParents.y)({top:B,bottom:K}=this.scrollParents.y.getBoundingClientRect());let J=b0(this.view);if(A.clientX-J.left<=$+W7)j=-E7($-A.clientX);else if(A.clientX+J.right>=G-W7)j=E7(A.clientX-G);if(A.clientY-J.top<=B+W7)q=-E7(B-A.clientY);else if(A.clientY+J.bottom>=K-W7)q=E7(A.clientY-K);this.setScrollSpeed(j,q)}up(A){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)A.preventDefault();this.destroy()}destroy(){this.setScrollSpeed(0,0);let A=this.view.contentDOM.ownerDocument;A.removeEventListener("mousemove",this.move),A.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(A,j){if(this.scrollSpeed={x:A,y:j},A||j){if(this.scrolling<0)this.scrolling=setInterval(()=>this.scroll(),50)}else if(this.scrolling>-1)clearInterval(this.scrolling),this.scrolling=-1}scroll(){let{x:A,y:j}=this.scrollSpeed;if(A&&this.scrollParents.x)this.scrollParents.x.scrollLeft+=A,A=0;if(j&&this.scrollParents.y)this.scrollParents.y.scrollTop+=j,j=0;if(A||j)this.view.win.scrollBy(A,j);if(this.dragging===!1)this.select(this.lastEvent)}skipAtoms(A){let j=null;for(let q=0;q<A.ranges.length;q++){let $=A.ranges[q],B=null;if($.empty){let G=L7(this.atoms,$.from,0);if(G!=$.from)B=E.cursor(G,-1)}else{let G=L7(this.atoms,$.from,-1),K=L7(this.atoms,$.to,1);if(G!=$.from||K!=$.to)B=E.range($.from==$.anchor?G:K,$.from==$.head?G:K)}if(B){if(!j)j=A.ranges.slice();j[q]=B}}return j?E.create(j,A.mainIndex):A}select(A){let{view:j}=this,q=this.skipAtoms(this.style.get(A,this.extend,this.multiple));if(this.mustSelect||!q.eq(j.state.selection,this.dragging===!1))this.view.dispatch({selection:q,userEvent:"select.pointer"});this.mustSelect=!1}update(A){if(A.transactions.some((j)=>j.isUserEvent("input.type")))this.destroy();else if(this.style.update(A))setTimeout(()=>this.select(this.lastEvent),20)}}function E9(A,j){let q=A.state.facet(k8);return q.length?q[0](j):L.mac?j.metaKey:j.ctrlKey}function H9(A,j){let q=A.state.facet(L8);return q.length?q[0](j):L.mac?!j.altKey:!j.ctrlKey}function _9(A,j){let{main:q}=A.state.selection;if(q.empty)return!1;let $=y6(A.root);if(!$||$.rangeCount==0)return!0;let B=$.getRangeAt(0).getClientRects();for(let G=0;G<B.length;G++){let K=B[G];if(K.left<=j.clientX&&K.right>=j.clientX&&K.top<=j.clientY&&K.bottom>=j.clientY)return!0}return!1}function N9(A,j){if(!j.bubbles)return!0;if(j.defaultPrevented)return!1;for(let q=j.target,$;q!=A.contentDOM;q=q.parentNode)if(!q||q.nodeType==11||($=i.get(q))&&$.ignoreEvent(j))return!1;return!0}var sA=Object.create(null),SA=Object.create(null),a8=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function D9(A){let j=A.dom.parentNode;if(!j)return;let q=j.appendChild(document.createElement("textarea"));q.style.cssText="position: fixed; left: -10000px; top: 10px",q.focus(),setTimeout(()=>{A.focus(),q.remove(),r8(A,q.value)},50)}function l7(A,j,q){for(let $ of A.facet(j))q=$(q,A);return q}function r8(A,j){j=l7(A.state,P0,j);let{state:q}=A,$,B=1,G=q.toText(j),K=G.lines==q.selection.ranges.length;if(F0!=null&&q.selection.ranges.every((Z)=>Z.empty)&&F0==G.toString()){let Z=-1;$=q.changeByRange((X)=>{let U=q.doc.lineAt(X.from);if(U.from==Z)return{range:X};Z=U.from;let Y=q.toText((K?G.line(B++).text:j)+q.lineBreak);return{changes:{from:U.from,insert:Y},range:E.cursor(X.from+Y.length)}})}else if(K)$=q.changeByRange((Z)=>{let X=G.line(B++);return{changes:{from:Z.from,to:Z.to,insert:X.text},range:E.cursor(Z.from+X.length)}});else $=q.replaceSelection(G);A.dispatch($,{userEvent:"input.paste",scrollIntoView:!0})}SA.scroll=(A)=>{A.inputState.lastScrollTop=A.scrollDOM.scrollTop,A.inputState.lastScrollLeft=A.scrollDOM.scrollLeft};sA.keydown=(A,j)=>{if(A.inputState.setSelectionOrigin("select"),j.keyCode==27&&A.inputState.tabFocusMode!=0)A.inputState.tabFocusMode=Date.now()+2000;return!1};SA.touchstart=(A,j)=>{A.inputState.lastTouchTime=Date.now(),A.inputState.setSelectionOrigin("select.pointer")};SA.touchmove=(A)=>{A.inputState.setSelectionOrigin("select.pointer")};sA.mousedown=(A,j)=>{if(A.observer.flush(),A.inputState.lastTouchTime>Date.now()-2000)return!1;let q=null;for(let $ of A.state.facet(P8))if(q=$(A,j),q)break;if(!q&&j.button==0)q=V9(A,j);if(q){let $=!A.hasFocus;if(A.inputState.startMouseSelection(new n8(A,j,q,$)),$)A.observer.ignore(()=>{Z8(A.contentDOM);let G=A.root.activeElement;if(G&&!G.contains(A.contentDOM))G.blur()});let B=A.inputState.mouseSelection;if(B)return B.start(j),B.dragging===!1}return!1};function bB(A,j,q,$){if($==1)return E.cursor(j,q);else if($==2)return q9(A.state,j,q);else{let B=$A.find(A.docView,j),G=A.state.doc.lineAt(B?B.posAtEnd:j),K=B?B.posAtStart:G.from,J=B?B.posAtEnd:G.to;if(J<A.state.doc.length&&J==G.to)J++;return E.range(K,J)}}var xB=(A,j,q)=>j>=q.top&&j<=q.bottom&&A>=q.left&&A<=q.right;function M9(A,j,q,$){let B=$A.find(A.docView,j);if(!B)return 1;let G=j-B.posAtStart;if(G==0)return 1;if(G==B.length)return-1;let K=B.coordsAt(G,-1);if(K&&xB(q,$,K))return-1;let J=B.coordsAt(G,1);if(J&&xB(q,$,J))return 1;return K&&K.bottom>=$?-1:1}function SB(A,j){let q=A.posAtCoords({x:j.clientX,y:j.clientY},!1);return{pos:q,bias:M9(A,q,j.clientX,j.clientY)}}var R9=L.ie&&L.ie_version<=11,wB=null,hB=0,vB=0;function o8(A){if(!R9)return A.detail;let j=wB,q=vB;return wB=A,vB=Date.now(),hB=!j||q>Date.now()-400&&Math.abs(j.clientX-A.clientX)<2&&Math.abs(j.clientY-A.clientY)<2?(hB+1)%3:1}function V9(A,j){let q=SB(A,j),$=o8(j),B=A.state.selection;return{update(G){if(G.docChanged)q.pos=G.changes.mapPos(q.pos),B=B.map(G.changes)},get(G,K,J){let Z=SB(A,G),X,U=bB(A,Z.pos,Z.bias,$);if(q.pos!=Z.pos&&!K){let Y=bB(A,q.pos,q.bias,$),Q=Math.min(Y.from,U.from),O=Math.max(Y.to,U.to);U=Q<U.from?E.range(Q,O):E.range(O,Q)}if(K)return B.replaceRange(B.main.extend(U.from,U.to));else if(J&&$==1&&B.ranges.length>1&&(X=k9(B,Z.pos)))return X;else if(J)return B.addRange(U);else return E.create([U])}}}function k9(A,j){for(let q=0;q<A.ranges.length;q++){let{from:$,to:B}=A.ranges[q];if($<=j&&B>=j)return E.create(A.ranges.slice(0,q).concat(A.ranges.slice(q+1)),A.mainIndex==q?0:A.mainIndex-(A.mainIndex>q?1:0))}return null}sA.dragstart=(A,j)=>{let{selection:{main:q}}=A.state;if(j.target.draggable){let B=A.docView.nearest(j.target);if(B&&B.isWidget){let G=B.posAtStart,K=G+B.length;if(G>=q.to||K<=q.from)q=E.range(G,K)}}let{inputState:$}=A;if($.mouseSelection)$.mouseSelection.dragging=!0;if($.draggedContent=q,j.dataTransfer)j.dataTransfer.setData("Text",l7(A.state,T0,A.state.sliceDoc(q.from,q.to))),j.dataTransfer.effectAllowed="copyMove";return!1};sA.dragend=(A)=>{return A.inputState.draggedContent=null,!1};function mB(A,j,q,$){if(q=l7(A.state,P0,q),!q)return;let B=A.posAtCoords({x:j.clientX,y:j.clientY},!1),{draggedContent:G}=A.inputState,K=$&&G&&H9(A,j)?{from:G.from,to:G.to}:null,J={from:B,insert:q},Z=A.state.changes(K?[K,J]:J);A.focus(),A.dispatch({changes:Z,selection:{anchor:Z.mapPos(B,-1),head:Z.mapPos(B,1)},userEvent:K?"move.drop":"input.drop"}),A.inputState.draggedContent=null}sA.drop=(A,j)=>{if(!j.dataTransfer)return!1;if(A.state.readOnly)return!0;let q=j.dataTransfer.files;if(q&&q.length){let $=Array(q.length),B=0,G=()=>{if(++B==q.length)mB(A,j,$.filter((K)=>K!=null).join(A.state.lineBreak),!1)};for(let K=0;K<q.length;K++){let J=new FileReader;J.onerror=G,J.onload=()=>{if(!/[\x00-\x08\x0e-\x1f]{2}/.test(J.result))$[K]=J.result;G()},J.readAsText(q[K])}return!0}else{let $=j.dataTransfer.getData("Text");if($)return mB(A,j,$,!0),!0}return!1};sA.paste=(A,j)=>{if(A.state.readOnly)return!0;A.observer.flush();let q=a8?null:j.clipboardData;if(q)return r8(A,q.getData("text/plain")||q.getData("text/uri-list")),!0;else return D9(A),!1};function L9(A,j){let q=A.dom.parentNode;if(!q)return;let $=q.appendChild(document.createElement("textarea"));$.style.cssText="position: fixed; left: -10000px; top: 10px",$.value=j,$.focus(),$.selectionEnd=j.length,$.selectionStart=0,setTimeout(()=>{$.remove(),A.focus()},50)}function P9(A){let j=[],q=[],$=!1;for(let B of A.selection.ranges)if(!B.empty)j.push(A.sliceDoc(B.from,B.to)),q.push(B);if(!j.length){let B=-1;for(let{from:G}of A.selection.ranges){let K=A.doc.lineAt(G);if(K.number>B)j.push(K.text),q.push({from:K.from,to:Math.min(A.doc.length,K.to+1)});B=K.number}$=!0}return{text:l7(A,T0,j.join(A.lineBreak)),ranges:q,linewise:$}}var F0=null;sA.copy=sA.cut=(A,j)=>{let{text:q,ranges:$,linewise:B}=P9(A.state);if(!q&&!B)return!1;if(F0=B?q:null,j.type=="cut"&&!A.state.readOnly)A.dispatch({changes:$,scrollIntoView:!0,userEvent:"delete.cut"});let G=a8?null:j.clipboardData;if(G)return G.clearData(),G.setData("text/plain",q),!0;else return L9(A,q),!1};var t8=kA.define();function e8(A,j){let q=[];for(let $ of A.facet(y8)){let B=$(A,j);if(B)q.push(B)}return q.length?A.update({effects:q,annotations:t8.of(!0)}):null}function AG(A){setTimeout(()=>{let j=A.hasFocus;if(j!=A.inputState.notifiedFocused){let q=e8(A.state,j);if(q)A.dispatch(q);else A.update([])}},10)}SA.focus=(A)=>{if(A.inputState.lastFocusTime=Date.now(),!A.scrollDOM.scrollTop&&(A.inputState.lastScrollTop||A.inputState.lastScrollLeft))A.scrollDOM.scrollTop=A.inputState.lastScrollTop,A.scrollDOM.scrollLeft=A.inputState.lastScrollLeft;AG(A)};SA.blur=(A)=>{A.observer.clearSelectionRange(),AG(A)};SA.compositionstart=SA.compositionupdate=(A)=>{if(A.observer.editContext)return;if(A.inputState.compositionFirstChange==null)A.inputState.compositionFirstChange=!0;if(A.inputState.composing<0)A.inputState.composing=0};SA.compositionend=(A)=>{if(A.observer.editContext)return;if(A.inputState.composing=-1,A.inputState.compositionEndedAt=Date.now(),A.inputState.compositionPendingKey=!0,A.inputState.compositionPendingChange=A.observer.pendingRecords().length>0,A.inputState.compositionFirstChange=null,L.chrome&&L.android)A.observer.flushSoon();else if(A.inputState.compositionPendingChange)Promise.resolve().then(()=>A.observer.flush());else setTimeout(()=>{if(A.inputState.composing<0&&A.docView.hasComposition)A.update([])},50)};SA.contextmenu=(A)=>{A.inputState.lastContextMenu=Date.now()};sA.beforeinput=(A,j)=>{var q,$;if(j.inputType=="insertReplacementText"&&A.observer.editContext){let G=(q=j.dataTransfer)===null||q===void 0?void 0:q.getData("text/plain"),K=j.getTargetRanges();if(G&&K.length){let J=K[0],Z=A.posAtDOM(J.startContainer,J.startOffset),X=A.posAtDOM(J.endContainer,J.endOffset);return x0(A,{from:Z,to:X,insert:A.state.toText(G)},null),!0}}let B;if(L.chrome&&L.android&&(B=s8.find((G)=>G.inputType==j.inputType))){if(A.observer.delayAndroidKey(B.key,B.keyCode),B.key=="Backspace"||B.key=="Delete"){let G=(($=window.visualViewport)===null||$===void 0?void 0:$.height)||0;setTimeout(()=>{var K;if((((K=window.visualViewport)===null||K===void 0?void 0:K.height)||0)>G+10&&A.hasFocus)A.contentDOM.blur(),A.focus()},100)}}if(L.ios&&j.inputType=="deleteContentForward")A.observer.flushSoon();if(L.safari&&j.inputType=="insertText"&&A.inputState.composing>=0)setTimeout(()=>SA.compositionend(A,j),20);return!1};var uB=new Set;function T9(A){if(!uB.has(A))uB.add(A),A.addEventListener("copy",()=>{}),A.addEventListener("cut",()=>{})}var gB=["pre-wrap","normal","pre-line","break-spaces"],q6=!1;function fB(){q6=!1}class jG{constructor(A){this.lineWrapping=A,this.doc=m.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(A,j){let q=this.doc.lineAt(j).number-this.doc.lineAt(A).number+1;if(this.lineWrapping)q+=Math.max(0,Math.ceil((j-A-q*this.lineLength*0.5)/this.lineLength));return this.lineHeight*q}heightForLine(A){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((A-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(A){return this.doc=A,this}mustRefreshForWrapping(A){return gB.indexOf(A)>-1!=this.lineWrapping}mustRefreshForHeights(A){let j=!1;for(let q=0;q<A.length;q++){let $=A[q];if($<0)q++;else if(!this.heightSamples[Math.floor($*10)])j=!0,this.heightSamples[Math.floor($*10)]=!0}return j}refresh(A,j,q,$,B,G){let K=gB.indexOf(A)>-1,J=Math.round(j)!=Math.round(this.lineHeight)||this.lineWrapping!=K;if(this.lineWrapping=K,this.lineHeight=j,this.charWidth=q,this.textHeight=$,this.lineLength=B,J){this.heightSamples={};for(let Z=0;Z<G.length;Z++){let X=G[Z];if(X<0)Z++;else this.heightSamples[Math.floor(X*10)]=!0}}return J}}class qG{constructor(A,j){this.from=A,this.heights=j,this.index=0}get more(){return this.index<this.heights.length}}class qj{constructor(A,j,q,$,B){this.from=A,this.length=j,this.top=q,this.height=$,this._content=B}get type(){return typeof this._content=="number"?EA.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hj?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(A){let j=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(A._content)?A._content:[A]);return new qj(this.from,this.length+A.length,this.top,this.height+A.height,j)}}var a=function(A){return A[A.ByPos=0]="ByPos",A[A.ByHeight=1]="ByHeight",A[A.ByPosNoHeight=2]="ByPosNoHeight",A}(a||(a={})),P7=0.001;class HA{constructor(A,j,q=2){this.length=A,this.height=j,this.flags=q}get outdated(){return(this.flags&2)>0}set outdated(A){this.flags=(A?2:0)|this.flags&-3}setHeight(A){if(this.height!=A){if(Math.abs(this.height-A)>P7)q6=!0;this.height=A}}replace(A,j,q){return HA.of(q)}decomposeLeft(A,j){j.push(this)}decomposeRight(A,j){j.push(this)}applyChanges(A,j,q,$){let B=this,G=q.doc;for(let K=$.length-1;K>=0;K--){let{fromA:J,toA:Z,fromB:X,toB:U}=$[K],Y=B.lineAt(J,a.ByPosNoHeight,q.setDoc(j),0,0),Q=Y.to>=Z?Y:B.lineAt(Z,a.ByPosNoHeight,q,0,0);U+=Q.to-Z,Z=Q.to;while(K>0&&Y.from<=$[K-1].toA)if(J=$[K-1].fromA,X=$[K-1].fromB,K--,J<Y.from)Y=B.lineAt(J,a.ByPosNoHeight,q,0,0);X+=Y.from-J,J=Y.from;let O=w0.build(q.setDoc(G),A,X,U);B=m7(B,B.replace(J,Z,O))}return B.updateHeight(q,0)}static empty(){return new LA(0,0)}static of(A){if(A.length==1)return A[0];let j=0,q=A.length,$=0,B=0;for(;;)if(j==q)if($>B*2){let K=A[j-1];if(K.break)A.splice(--j,1,K.left,null,K.right);else A.splice(--j,1,K.left,K.right);q+=1+K.break,$-=K.size}else if(B>$*2){let K=A[q];if(K.break)A.splice(q,1,K.left,null,K.right);else A.splice(q,1,K.left,K.right);q+=2+K.break,B-=K.size}else break;else if($<B){let K=A[j++];if(K)$+=K.size}else{let K=A[--q];if(K)B+=K.size}let G=0;if(A[j-1]==null)G=1,j--;else if(A[j]==null)G=1,q++;return new $G(HA.of(A.slice(0,j)),G,HA.of(A.slice(q)))}}function m7(A,j){if(A==j)return A;if(A.constructor!=j.constructor)q6=!0;return j}HA.prototype.size=1;class S0 extends HA{constructor(A,j,q){super(A,j);this.deco=q}blockAt(A,j,q,$){return new qj($,this.length,q,this.height,this.deco||0)}lineAt(A,j,q,$,B){return this.blockAt(0,q,$,B)}forEachLine(A,j,q,$,B,G){if(A<=B+this.length&&j>=B)G(this.blockAt(0,q,$,B))}updateHeight(A,j=0,q=!1,$){if($&&$.from<=j&&$.more)this.setHeight($.heights[$.index++]);return this.outdated=!1,this}toString(){return`block(${this.length})`}}class LA extends S0{constructor(A,j){super(A,j,null);this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(A,j,q,$){return new qj($,this.length,q,this.height,this.breaks)}replace(A,j,q){let $=q[0];if(q.length==1&&($ instanceof LA||$ instanceof UA&&$.flags&4)&&Math.abs(this.length-$.length)<10){if($ instanceof UA)$=new LA($.length,this.height);else $.height=this.height;if(!this.outdated)$.outdated=!1;return $}else return HA.of(q)}updateHeight(A,j=0,q=!1,$){if($&&$.from<=j&&$.more)this.setHeight($.heights[$.index++]);else if(q||this.outdated)this.setHeight(Math.max(this.widgetHeight,A.heightForLine(this.length-this.collapsed))+this.breaks*A.lineHeight);return this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class UA extends HA{constructor(A){super(A,0)}heightMetrics(A,j){let q=A.doc.lineAt(j).number,$=A.doc.lineAt(j+this.length).number,B=$-q+1,G,K=0;if(A.lineWrapping){let J=Math.min(this.height,A.lineHeight*B);if(G=J/B,this.length>B+1)K=(this.height-J)/(this.length-B-1)}else G=this.height/B;return{firstLine:q,lastLine:$,perLine:G,perChar:K}}blockAt(A,j,q,$){let{firstLine:B,lastLine:G,perLine:K,perChar:J}=this.heightMetrics(j,$);if(j.lineWrapping){let Z=$+(A<j.lineHeight?0:Math.round(Math.max(0,Math.min(1,(A-q)/this.height))*this.length)),X=j.doc.lineAt(Z),U=K+X.length*J,Y=Math.max(q,A-U/2);return new qj(X.from,X.length,Y,U,0)}else{let Z=Math.max(0,Math.min(G-B,Math.floor((A-q)/K))),{from:X,length:U}=j.doc.line(B+Z);return new qj(X,U,q+K*Z,K,0)}}lineAt(A,j,q,$,B){if(j==a.ByHeight)return this.blockAt(A,q,$,B);if(j==a.ByPosNoHeight){let{from:Q,to:O}=q.doc.lineAt(A);return new qj(Q,O-Q,0,0,0)}let{firstLine:G,perLine:K,perChar:J}=this.heightMetrics(q,B),Z=q.doc.lineAt(A),X=K+Z.length*J,U=Z.number-G,Y=$+K*U+J*(Z.from-B-U);return new qj(Z.from,Z.length,Math.max($,Math.min(Y,$+this.height-X)),X,0)}forEachLine(A,j,q,$,B,G){A=Math.max(A,B),j=Math.min(j,B+this.length);let{firstLine:K,perLine:J,perChar:Z}=this.heightMetrics(q,B);for(let X=A,U=$;X<=j;){let Y=q.doc.lineAt(X);if(X==A){let O=Y.number-K;U+=J*O+Z*(A-B-O)}let Q=J+Z*Y.length;G(new qj(Y.from,Y.length,U,Q,0)),U+=Q,X=Y.to+1}}replace(A,j,q){let $=this.length-j;if($>0){let B=q[q.length-1];if(B instanceof UA)q[q.length-1]=new UA(B.length+$);else q.push(null,new UA($-1))}if(A>0){let B=q[0];if(B instanceof UA)q[0]=new UA(A+B.length);else q.unshift(new UA(A-1),null)}return HA.of(q)}decomposeLeft(A,j){j.push(new UA(A-1),null)}decomposeRight(A,j){j.push(null,new UA(this.length-A-1))}updateHeight(A,j=0,q=!1,$){let B=j+this.length;if($&&$.from<=j+this.length&&$.more){let G=[],K=Math.max(j,$.from),J=-1;if($.from>j)G.push(new UA($.from-j-1).updateHeight(A,j));while(K<=B&&$.more){let X=A.doc.lineAt(K).length;if(G.length)G.push(null);let U=$.heights[$.index++];if(J==-1)J=U;else if(Math.abs(U-J)>=P7)J=-2;let Y=new LA(X,U);Y.outdated=!1,G.push(Y),K+=X+1}if(K<=B)G.push(null,new UA(B-K).updateHeight(A,K));let Z=HA.of(G);if(J<0||Math.abs(Z.height-this.height)>=P7||Math.abs(J-this.heightMetrics(A,j).perLine)>=P7)q6=!0;return m7(this,Z)}else if(q||this.outdated)this.setHeight(A.heightForGap(j,j+this.length)),this.outdated=!1;return this}toString(){return`gap(${this.length})`}}class $G extends HA{constructor(A,j,q){super(A.length+j+q.length,A.height+q.height,j|(A.outdated||q.outdated?2:0));this.left=A,this.right=q,this.size=A.size+q.size}get break(){return this.flags&1}blockAt(A,j,q,$){let B=q+this.left.height;return A<B?this.left.blockAt(A,j,q,$):this.right.blockAt(A,j,B,$+this.left.length+this.break)}lineAt(A,j,q,$,B){let G=$+this.left.height,K=B+this.left.length+this.break,J=j==a.ByHeight?A<G:A<K,Z=J?this.left.lineAt(A,j,q,$,B):this.right.lineAt(A,j,q,G,K);if(this.break||(J?Z.to<K:Z.from>K))return Z;let X=j==a.ByPosNoHeight?a.ByPosNoHeight:a.ByPos;if(J)return Z.join(this.right.lineAt(K,X,q,G,K));else return this.left.lineAt(K,X,q,$,B).join(Z)}forEachLine(A,j,q,$,B,G){let K=$+this.left.height,J=B+this.left.length+this.break;if(this.break){if(A<J)this.left.forEachLine(A,j,q,$,B,G);if(j>=J)this.right.forEachLine(A,j,q,K,J,G)}else{let Z=this.lineAt(J,a.ByPos,q,$,B);if(A<Z.from)this.left.forEachLine(A,Z.from-1,q,$,B,G);if(Z.to>=A&&Z.from<=j)G(Z);if(j>Z.to)this.right.forEachLine(Z.to+1,j,q,K,J,G)}}replace(A,j,q){let $=this.left.length+this.break;if(j<$)return this.balanced(this.left.replace(A,j,q),this.right);if(A>this.left.length)return this.balanced(this.left,this.right.replace(A-$,j-$,q));let B=[];if(A>0)this.decomposeLeft(A,B);let G=B.length;for(let K of q)B.push(K);if(A>0)pB(B,G-1);if(j<this.length){let K=B.length;this.decomposeRight(j,B),pB(B,K)}return HA.of(B)}decomposeLeft(A,j){let q=this.left.length;if(A<=q)return this.left.decomposeLeft(A,j);if(j.push(this.left),this.break){if(q++,A>=q)j.push(null)}if(A>q)this.right.decomposeLeft(A-q,j)}decomposeRight(A,j){let q=this.left.length,$=q+this.break;if(A>=$)return this.right.decomposeRight(A-$,j);if(A<q)this.left.decomposeRight(A,j);if(this.break&&A<$)j.push(null);j.push(this.right)}balanced(A,j){if(A.size>2*j.size||j.size>2*A.size)return HA.of(this.break?[A,null,j]:[A,j]);return this.left=m7(this.left,A),this.right=m7(this.right,j),this.setHeight(A.height+j.height),this.outdated=A.outdated||j.outdated,this.size=A.size+j.size,this.length=A.length+this.break+j.length,this}updateHeight(A,j=0,q=!1,$){let{left:B,right:G}=this,K=j+B.length+this.break,J=null;if($&&$.from<=j+B.length&&$.more)J=B=B.updateHeight(A,j,q,$);else B.updateHeight(A,j,q);if($&&$.from<=K+G.length&&$.more)J=G=G.updateHeight(A,K,q,$);else G.updateHeight(A,K,q);if(J)return this.balanced(B,G);return this.height=this.left.height+this.right.height,this.outdated=!1,this}toString(){return this.left+(this.break?" ":"-")+this.right}}function pB(A,j){let q,$;if(A[j]==null&&(q=A[j-1])instanceof UA&&($=A[j+1])instanceof UA)A.splice(j-1,3,new UA(q.length+1+$.length))}var C9=5;class w0{constructor(A,j){this.pos=A,this.oracle=j,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=A}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(A,j){if(this.lineStart>-1){let q=Math.min(j,this.lineEnd),$=this.nodes[this.nodes.length-1];if($ instanceof LA)$.length+=q-this.pos;else if(q>this.pos||!this.isCovered)this.nodes.push(new LA(q-this.pos,-1));if(this.writtenTo=q,j>q)this.nodes.push(null),this.writtenTo++,this.lineStart=-1}this.pos=j}point(A,j,q){if(A<j||q.heightRelevant){let $=q.widget?q.widget.estimatedHeight:0,B=q.widget?q.widget.lineBreaks:0;if($<0)$=this.oracle.lineHeight;let G=j-A;if(q.block)this.addBlock(new S0(G,$,q));else if(G||B||$>=C9)this.addLineDeco($,B,G)}else if(j>A)this.span(A,j);if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to}enterLine(){if(this.lineStart>-1)return;let{from:A,to:j}=this.oracle.doc.lineAt(this.pos);if(this.lineStart=A,this.lineEnd=j,this.writtenTo<A){if(this.writtenTo<A-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,A-1));this.nodes.push(null)}if(this.pos>A)this.nodes.push(new LA(this.pos-A,-1));this.writtenTo=this.pos}blankContent(A,j){let q=new UA(j-A);if(this.oracle.doc.lineAt(A).to==j)q.flags|=4;return q}ensureLine(){this.enterLine();let A=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(A instanceof LA)return A;let j=new LA(0,-1);return this.nodes.push(j),j}addBlock(A){this.enterLine();let j=A.deco;if(j&&j.startSide>0&&!this.isCovered)this.ensureLine();if(this.nodes.push(A),this.writtenTo=this.pos=this.pos+A.length,j&&j.endSide>0)this.covering=A}addLineDeco(A,j,q){let $=this.ensureLine();$.length+=q,$.collapsed+=q,$.widgetHeight=Math.max($.widgetHeight,A),$.breaks+=j,this.writtenTo=this.pos=this.pos+q}finish(A){let j=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(j instanceof LA)&&!this.isCovered)this.nodes.push(new LA(0,-1));else if(this.writtenTo<this.pos||j==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));let q=A;for(let $ of this.nodes){if($ instanceof LA)$.updateHeight(this.oracle,q);q+=$?$.length:1}return this.nodes}static build(A,j,q,$){let B=new w0(q,A);return h.spans(j,q,$,B,0),B.finish(q)}}function y9(A,j,q){let $=new BG;return h.compare(A,j,q,$,0),$.changes}class BG{constructor(){this.changes=[]}compareRange(){}comparePoint(A,j,q,$){if(A<j||q&&q.heightRelevant||$&&$.heightRelevant)V7(A,j,this.changes,5)}}function b9(A,j){let q=A.getBoundingClientRect(),$=A.ownerDocument,B=$.defaultView||window,G=Math.max(0,q.left),K=Math.min(B.innerWidth,q.right),J=Math.max(0,q.top),Z=Math.min(B.innerHeight,q.bottom);for(let X=A.parentNode;X&&X!=$.body;)if(X.nodeType==1){let U=X,Y=window.getComputedStyle(U);if((U.scrollHeight>U.clientHeight||U.scrollWidth>U.clientWidth)&&Y.overflow!="visible"){let Q=U.getBoundingClientRect();G=Math.max(G,Q.left),K=Math.min(K,Q.right),J=Math.max(J,Q.top),Z=Math.min(X==A.parentNode?B.innerHeight:Z,Q.bottom)}X=Y.position=="absolute"||Y.position=="fixed"?U.offsetParent:U.parentNode}else if(X.nodeType==11)X=X.host;else break;return{left:G-q.left,right:Math.max(G,K)-q.left,top:J-(q.top+j),bottom:Math.max(J,Z)-(q.top+j)}}function x9(A){let j=A.getBoundingClientRect(),q=A.ownerDocument.defaultView||window;return j.left<q.innerWidth&&j.right>0&&j.top<q.innerHeight&&j.bottom>0}function S9(A,j){let q=A.getBoundingClientRect();return{left:0,right:q.right-q.left,top:j,bottom:q.bottom-(q.top+j)}}class T7{constructor(A,j,q,$){this.from=A,this.to=j,this.size=q,this.displaySize=$}static same(A,j){if(A.length!=j.length)return!1;for(let q=0;q<A.length;q++){let $=A[q],B=j[q];if($.from!=B.from||$.to!=B.to||$.size!=B.size)return!1}return!0}draw(A,j){return C.replace({widget:new GG(this.displaySize*(j?A.scaleY:A.scaleX),j)}).range(this.from,this.to)}}class GG extends hA{constructor(A,j){super();this.size=A,this.vertical=j}eq(A){return A.size==this.size&&A.vertical==this.vertical}toDOM(){let A=document.createElement("div");if(this.vertical)A.style.height=this.size+"px";else A.style.width=this.size+"px",A.style.height="2px",A.style.display="inline-block";return A}get estimatedHeight(){return this.vertical?this.size:-1}}class z0{constructor(A){this.state=A,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lB,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=d.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let j=A.facet(C0).some((q)=>typeof q!="function"&&q.class=="cm-lineWrapping");this.heightOracle=new jG(j),this.stateDeco=A.facet(x6).filter((q)=>typeof q!="function"),this.heightMap=HA.empty().applyChanges(this.stateDeco,m.empty,this.heightOracle.setDoc(A.doc),[new xA(0,0,0,A.doc.length)]);for(let q=0;q<2;q++)if(this.viewport=this.getViewport(0,null),!this.updateForViewport())break;this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=C.set(this.lineGaps.map((q)=>q.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let A=[this.viewport],{main:j}=this.state.selection;for(let q=0;q<=1;q++){let $=q?j.head:j.anchor;if(!A.some(({from:B,to:G})=>$>=B&&$<=G)){let{from:B,to:G}=this.lineBlockAt($);A.push(new R6(B,G))}}return this.viewports=A.sort((q,$)=>q.from-$.from),this.updateScaler()}updateScaler(){let A=this.scaler;return this.scaler=this.heightMap.height<=7000000?lB:new h0(this.heightOracle,this.heightMap,this.viewports),A.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(A)=>{this.viewportLines.push(V6(A,this.scaler))})}update(A,j=null){this.state=A.state;let q=this.stateDeco;this.stateDeco=this.state.facet(x6).filter((X)=>typeof X!="function");let $=A.changedRanges,B=xA.extendWithRanges($,y9(q,this.stateDeco,A?A.changes:jA.empty(this.state.doc.length))),G=this.heightMap.height,K=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);if(fB(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,A.startState.doc,this.heightOracle.setDoc(this.state.doc),B),this.heightMap.height!=G||q6)A.flags|=2;if(K)this.scrollAnchorPos=A.changes.mapPos(K.from,-1),this.scrollAnchorHeight=K.top;else this.scrollAnchorPos=-1,this.scrollAnchorHeight=G;let J=B.length?this.mapViewport(this.viewport,A.changes):this.viewport;if(j&&(j.range.head<J.from||j.range.head>J.to)||!this.viewportIsAppropriate(J))J=this.getViewport(0,j);let Z=J.from!=this.viewport.from||J.to!=this.viewport.to;if(this.viewport=J,A.flags|=this.updateForViewport(),Z||!A.changes.empty||A.flags&2)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4000)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,A.changes)));if(A.flags|=this.computeVisibleRanges(A.changes),j)this.scrollTarget=j;if(!this.mustEnforceCursorAssoc&&A.selectionSet&&A.view.lineWrapping&&A.state.selection.main.empty&&A.state.selection.main.assoc&&!A.state.facet(x8))this.mustEnforceCursorAssoc=!0}measure(A){let j=A.contentDOM,q=window.getComputedStyle(j),$=this.heightOracle,B=q.whiteSpace;this.defaultTextDirection=q.direction=="rtl"?d.RTL:d.LTR;let G=this.heightOracle.mustRefreshForWrapping(B),K=j.getBoundingClientRect(),J=G||this.mustMeasureContent||this.contentDOMHeight!=K.height;this.contentDOMHeight=K.height,this.mustMeasureContent=!1;let Z=0,X=0;if(K.width&&K.height){let{scaleX:_,scaleY:H}=K8(j,K);if(_>0.005&&Math.abs(this.scaleX-_)>0.005||H>0.005&&Math.abs(this.scaleY-H)>0.005)this.scaleX=_,this.scaleY=H,Z|=16,G=J=!0}let U=(parseInt(q.paddingTop)||0)*this.scaleY,Y=(parseInt(q.paddingBottom)||0)*this.scaleY;if(this.paddingTop!=U||this.paddingBottom!=Y)this.paddingTop=U,this.paddingBottom=Y,Z|=18;if(this.editorWidth!=A.scrollDOM.clientWidth){if($.lineWrapping)J=!0;this.editorWidth=A.scrollDOM.clientWidth,Z|=16}let Q=A.scrollDOM.scrollTop*this.scaleY;if(this.scrollTop!=Q)this.scrollAnchorHeight=-1,this.scrollTop=Q;this.scrolledToBottom=U8(A.scrollDOM);let O=(this.printing?S9:b9)(j,this.paddingTop),F=O.top-this.pixelViewport.top,z=O.bottom-this.pixelViewport.bottom;this.pixelViewport=O;let I=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(I!=this.inView){if(this.inView=I,I)J=!0}if(!this.inView&&!this.scrollTarget&&!x9(A.dom))return 0;let W=K.width;if(this.contentDOMWidth!=W||this.editorHeight!=A.scrollDOM.clientHeight)this.contentDOMWidth=K.width,this.editorHeight=A.scrollDOM.clientHeight,Z|=16;if(J){let _=A.docView.measureVisibleLineHeights(this.viewport);if($.mustRefreshForHeights(_))G=!0;if(G||$.lineWrapping&&Math.abs(W-this.contentDOMWidth)>$.charWidth){let{lineHeight:H,charWidth:D,textHeight:T}=A.docView.measureTextSize();if(G=H>0&&$.refresh(B,H,D,T,Math.max(5,W/D),_),G)A.docView.minWidth=0,Z|=16}if(F>0&&z>0)X=Math.max(F,z);else if(F<0&&z<0)X=Math.min(F,z);fB();for(let H of this.viewports){let D=H.from==this.viewport.from?_:A.docView.measureVisibleLineHeights(H);this.heightMap=(G?HA.empty().applyChanges(this.stateDeco,m.empty,this.heightOracle,[new xA(0,0,0,A.state.doc.length)]):this.heightMap).updateHeight($,0,G,new qG(H.from,D))}if(q6)Z|=2}let N=!this.viewportIsAppropriate(this.viewport,X)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(N){if(Z&2)Z|=this.updateScaler();this.viewport=this.getViewport(X,this.scrollTarget),Z|=this.updateForViewport()}if(Z&2||N)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>4000)this.updateLineGaps(this.ensureLineGaps(G?[]:this.lineGaps,A));if(Z|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc)this.mustEnforceCursorAssoc=!1,A.docView.enforceCursorAssoc();return Z}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(A,j){let q=0.5-Math.max(-0.5,Math.min(0.5,A/1000/2)),$=this.heightMap,B=this.heightOracle,{visibleTop:G,visibleBottom:K}=this,J=new R6($.lineAt(G-q*1000,a.ByHeight,B,0,0).from,$.lineAt(K+(1-q)*1000,a.ByHeight,B,0,0).to);if(j){let{head:Z}=j.range;if(Z<J.from||Z>J.to){let X=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),U=$.lineAt(Z,a.ByPos,B,0,0),Y;if(j.y=="center")Y=(U.top+U.bottom)/2-X/2;else if(j.y=="start"||j.y=="nearest"&&Z<J.from)Y=U.top;else Y=U.bottom-X;J=new R6($.lineAt(Y-500,a.ByHeight,B,0,0).from,$.lineAt(Y+X+500,a.ByHeight,B,0,0).to)}}return J}mapViewport(A,j){let q=j.mapPos(A.from,-1),$=j.mapPos(A.to,1);return new R6(this.heightMap.lineAt(q,a.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt($,a.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:A,to:j},q=0){if(!this.inView)return!0;let{top:$}=this.heightMap.lineAt(A,a.ByPos,this.heightOracle,0,0),{bottom:B}=this.heightMap.lineAt(j,a.ByPos,this.heightOracle,0,0),{visibleTop:G,visibleBottom:K}=this;return(A==0||$<=G-Math.max(10,Math.min(-q,250)))&&(j==this.state.doc.length||B>=K+Math.max(10,Math.min(q,250)))&&($>G-2000&&B<K+2000)}mapLineGaps(A,j){if(!A.length||j.empty)return A;let q=[];for(let $ of A)if(!j.touchesRange($.from,$.to))q.push(new T7(j.mapPos($.from),j.mapPos($.to),$.size,$.displaySize));return q}ensureLineGaps(A,j){let q=this.heightOracle.lineWrapping,$=q?1e4:2000,B=$>>1,G=$<<1;if(this.defaultTextDirection!=d.LTR&&!q)return[];let K=[],J=(X,U,Y,Q)=>{if(U-X<B)return;let O=this.state.selection.main,F=[O.from];if(!O.empty)F.push(O.to);for(let I of F)if(I>X&&I<U){J(X,I-10,Y,Q),J(I+10,U,Y,Q);return}let z=h9(A,(I)=>I.from>=Y.from&&I.to<=Y.to&&Math.abs(I.from-X)<B&&Math.abs(I.to-U)<B&&!F.some((W)=>I.from<W&&I.to>W));if(!z){if(U<Y.to&&j&&q&&j.visibleRanges.some((N)=>N.from<=U&&N.to>=U)){let N=j.moveToLineBoundary(E.cursor(U),!1,!0).head;if(N>X)U=N}let I=this.gapSize(Y,X,U,Q),W=q||I<2000000?I:2000000;z=new T7(X,U,I,W)}K.push(z)},Z=(X)=>{if(X.length<G||X.type!=EA.Text)return;let U=w9(X.from,X.to,this.stateDeco);if(U.total<G)return;let Y=this.scrollTarget?this.scrollTarget.range.head:null,Q,O;if(q){let F=$/this.heightOracle.lineLength*this.heightOracle.lineHeight,z,I;if(Y!=null){let W=_7(U,Y),N=((this.visibleBottom-this.visibleTop)/2+F)/X.height;z=W-N,I=W+N}else z=(this.visibleTop-X.top-F)/X.height,I=(this.visibleBottom-X.top+F)/X.height;Q=H7(U,z),O=H7(U,I)}else{let F=U.total*this.heightOracle.charWidth,z=$*this.heightOracle.charWidth,I=0;if(F>2000000){for(let D of A)if(D.from>=X.from&&D.from<X.to&&D.size!=D.displaySize&&D.from*this.heightOracle.charWidth+I<this.pixelViewport.left)I=D.size-D.displaySize}let W=this.pixelViewport.left+I,N=this.pixelViewport.right+I,_,H;if(Y!=null){let D=_7(U,Y),T=((N-W)/2+z)/F;_=D-T,H=D+T}else _=(W-z)/F,H=(N+z)/F;Q=H7(U,_),O=H7(U,H)}if(Q>X.from)J(X.from,Q,X,U);if(O<X.to)J(O,X.to,X,U)};for(let X of this.viewportLines)if(Array.isArray(X.type))X.type.forEach(Z);else Z(X);return K}gapSize(A,j,q,$){let B=_7($,q)-_7($,j);if(this.heightOracle.lineWrapping)return A.height*B;else return $.total*this.heightOracle.charWidth*B}updateLineGaps(A){if(!T7.same(A,this.lineGaps))this.lineGaps=A,this.lineGapDeco=C.set(A.map((j)=>j.draw(this,this.heightOracle.lineWrapping)))}computeVisibleRanges(A){let j=this.stateDeco;if(this.lineGaps.length)j=j.concat(this.lineGapDeco);let q=[];h.spans(j,this.viewport.from,this.viewport.to,{span(B,G){q.push({from:B,to:G})},point(){}},20);let $=0;if(q.length!=this.visibleRanges.length)$=12;else for(let B=0;B<q.length&&!($&8);B++){let G=this.visibleRanges[B],K=q[B];if(G.from!=K.from||G.to!=K.to){if($|=4,!(A&&A.mapPos(G.from,-1)==K.from&&A.mapPos(G.to,1)==K.to))$|=8}}return this.visibleRanges=q,$}lineBlockAt(A){return A>=this.viewport.from&&A<=this.viewport.to&&this.viewportLines.find((j)=>j.from<=A&&j.to>=A)||V6(this.heightMap.lineAt(A,a.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(A){return A>=this.viewportLines[0].top&&A<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((j)=>j.top<=A&&j.bottom>=A)||V6(this.heightMap.lineAt(this.scaler.fromDOM(A),a.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(A){let j=this.lineBlockAtHeight(A+8);return j.from>=this.viewport.from||this.viewportLines[0].top-A>200?j:this.viewportLines[0]}elementAtHeight(A){return V6(this.heightMap.blockAt(this.scaler.fromDOM(A),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class R6{constructor(A,j){this.from=A,this.to=j}}function w9(A,j,q){let $=[],B=A,G=0;if(h.spans(q,A,j,{span(){},point(K,J){if(K>B)$.push({from:B,to:K}),G+=K-B;B=J}},20),B<j)$.push({from:B,to:j}),G+=j-B;return{total:G,ranges:$}}function H7({total:A,ranges:j},q){if(q<=0)return j[0].from;if(q>=1)return j[j.length-1].to;let $=Math.floor(A*q);for(let B=0;;B++){let{from:G,to:K}=j[B],J=K-G;if($<=J)return G+$;$-=J}}function _7(A,j){let q=0;for(let{from:$,to:B}of A.ranges){if(j<=B){q+=j-$;break}q+=B-$}return q/A.total}function h9(A,j){for(let q of A)if(j(q))return q;return}var lB={toDOM(A){return A},fromDOM(A){return A},scale:1,eq(A){return A==this}};class h0{constructor(A,j,q){let $=0,B=0,G=0;this.viewports=q.map(({from:K,to:J})=>{let Z=j.lineAt(K,a.ByPos,A,0,0).top,X=j.lineAt(J,a.ByPos,A,0,0).bottom;return $+=X-Z,{from:K,to:J,top:Z,bottom:X,domTop:0,domBottom:0}}),this.scale=(7000000-$)/(j.height-$);for(let K of this.viewports)K.domTop=G+(K.top-B)*this.scale,G=K.domBottom=K.domTop+(K.bottom-K.top),B=K.bottom}toDOM(A){for(let j=0,q=0,$=0;;j++){let B=j<this.viewports.length?this.viewports[j]:null;if(!B||A<B.top)return $+(A-q)*this.scale;if(A<=B.bottom)return B.domTop+(A-B.top);q=B.bottom,$=B.domBottom}}fromDOM(A){for(let j=0,q=0,$=0;;j++){let B=j<this.viewports.length?this.viewports[j]:null;if(!B||A<B.domTop)return q+(A-$)/this.scale;if(A<=B.domBottom)return B.top+(A-B.domTop);q=B.bottom,$=B.domBottom}}eq(A){if(!(A instanceof h0))return!1;return this.scale==A.scale&&this.viewports.length==A.viewports.length&&this.viewports.every((j,q)=>j.from==A.viewports[q].from&&j.to==A.viewports[q].to)}}function V6(A,j){if(j.scale==1)return A;let q=j.toDOM(A.top),$=j.toDOM(A.bottom);return new qj(A.from,A.length,q,$-q,Array.isArray(A._content)?A._content.map((B)=>V6(B,j)):A._content)}var N7=k.define({combine:(A)=>A.join(" ")}),I0=k.define({combine:(A)=>A.indexOf(!0)>-1}),W0=dA.newName(),KG=dA.newName(),JG=dA.newName(),ZG={"&light":"."+KG,"&dark":"."+JG};function E0(A,j,q){return new dA(j,{finish($){return/&/.test($)?$.replace(/&\w*/,(B)=>{if(B=="&")return A;if(!q||!q[B])throw new RangeError(`Unsupported selector: ${B}`);return q[B]}):A+" "+$}})}var v9=E0("."+W0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ZG),m9={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},rq=L.ie&&L.ie_version<=11;class XG{constructor(A){if(this.view=A,this.active=!1,this.editContext=null,this.selectionRange=new J8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=A.contentDOM,this.observer=new MutationObserver((j)=>{for(let q of j)this.queue.push(q);if((L.ie&&L.ie_version<=11||L.ios&&A.composing)&&j.some((q)=>q.type=="childList"&&q.removedNodes.length||q.type=="characterData"&&q.oldValue.length>q.target.nodeValue.length))this.flushSoon();else this.flush()}),window.EditContext&&L.android&&A.constructor.EDIT_CONTEXT!==!1&&!(L.chrome&&L.chrome_version<126)){if(this.editContext=new UG(A),A.state.facet(Qj))A.contentDOM.editContext=this.editContext.editContext}if(rq)this.onCharData=(j)=>{this.queue.push({target:j.target,type:"characterData",oldValue:j.prevValue}),this.flushSoon()};if(this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia)this.printQuery=window.matchMedia("print");if(typeof ResizeObserver=="function")this.resizeScroll=new ResizeObserver(()=>{var j;if(((j=this.view.docView)===null||j===void 0?void 0:j.lastUpdate)<Date.now()-75)this.onResize()}),this.resizeScroll.observe(A.scrollDOM);if(this.addWindowListeners(this.win=A.win),this.start(),typeof IntersectionObserver=="function")this.intersection=new IntersectionObserver((j)=>{if(this.parentCheck<0)this.parentCheck=setTimeout(this.listenForScroll.bind(this),1000);if(j.length>0&&j[j.length-1].intersectionRatio>0!=this.intersecting){if(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView)this.onScrollChanged(document.createEvent("Event"))}},{threshold:[0,0.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((j)=>{if(j.length>0&&j[j.length-1].intersectionRatio>0)this.onScrollChanged(document.createEvent("Event"))},{});this.listenForScroll(),this.readSelectionRange()}onScrollChanged(A){if(this.view.inputState.runHandlers("scroll",A),this.intersecting)this.view.measure()}onScroll(A){if(this.intersecting)this.flush(!1);if(this.editContext)this.view.requestMeasure(this.editContext.measureReq);this.onScrollChanged(A)}onResize(){if(this.resizeTimeout<0)this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50)}onPrint(A){if((A.type=="change"||!A.type)&&!A.matches)return;this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(A){if(this.gapIntersection&&(A.length!=this.gaps.length||this.gaps.some((j,q)=>j!=A[q]))){this.gapIntersection.disconnect();for(let j of A)this.gapIntersection.observe(j);this.gaps=A}}onSelectionChange(A){let j=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:q}=this,$=this.selectionRange;if(q.state.facet(Qj)?q.root.activeElement!=this.dom:!R7(this.dom,$))return;let B=$.anchorNode&&q.docView.nearest($.anchorNode);if(B&&B.ignoreEvent(A)){if(!j)this.selectionChanged=!1;return}if((L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!q.state.selection.main.empty&&$.focusNode&&P6($.focusNode,$.focusOffset,$.anchorNode,$.anchorOffset))this.flushSoon();else this.flush(!1)}readSelectionRange(){let{view:A}=this,j=y6(A.root);if(!j)return!1;let q=L.safari&&A.root.nodeType==11&&A.root.activeElement==this.dom&&u9(this.view,j)||j;if(!q||this.selectionRange.eq(q))return!1;let $=R7(this.dom,q);if($&&!this.selectionChanged&&A.inputState.lastFocusTime>Date.now()-200&&A.inputState.lastTouchTime<Date.now()-300&&b4(this.dom,q))return this.view.inputState.lastFocusTime=0,A.docView.updateSelection(),!1;if(this.selectionRange.setRange(q),$)this.selectionChanged=!0;return!0}setSelectionRange(A,j){this.selectionRange.set(A.node,A.offset,j.node,j.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let A=0,j=null;for(let q=this.dom;q;)if(q.nodeType==1){if(!j&&A<this.scrollTargets.length&&this.scrollTargets[A]==q)A++;else if(!j)j=this.scrollTargets.slice(0,A);if(j)j.push(q);q=q.assignedSlot||q.parentNode}else if(q.nodeType==11)q=q.host;else break;if(A<this.scrollTargets.length&&!j)j=this.scrollTargets.slice(0,A);if(j){for(let q of this.scrollTargets)q.removeEventListener("scroll",this.onScroll);for(let q of this.scrollTargets=j)q.addEventListener("scroll",this.onScroll)}}ignore(A){if(!this.active)return A();try{return this.stop(),A()}finally{this.start(),this.clear()}}start(){if(this.active)return;if(this.observer.observe(this.dom,m9),rq)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=!0}stop(){if(!this.active)return;if(this.active=!1,this.observer.disconnect(),rq)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(A,j){var q;if(!this.delayedAndroidKey){let $=()=>{let B=this.delayedAndroidKey;if(B){if(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=B.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&B.force)ej(this.dom,B.key,B.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame($)}if(!this.delayedAndroidKey||A=="Enter")this.delayedAndroidKey={key:A,keyCode:j,force:this.lastChange<Date.now()-50||!!((q=this.delayedAndroidKey)===null||q===void 0?void 0:q.force)}}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){if(this.delayedFlush<0)this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()})}forceFlush(){if(this.delayedFlush>=0)this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1;this.flush()}pendingRecords(){for(let A of this.observer.takeRecords())this.queue.push(A);return this.queue}processRecords(){let A=this.pendingRecords();if(A.length)this.queue=[];let j=-1,q=-1,$=!1;for(let B of A){let G=this.readMutation(B);if(!G)continue;if(G.typeOver)$=!0;if(j==-1)({from:j,to:q}=G);else j=Math.min(G.from,j),q=Math.max(G.to,q)}return{from:j,to:q,typeOver:$}}readChange(){let{from:A,to:j,typeOver:q}=this.processRecords(),$=this.selectionChanged&&R7(this.dom,this.selectionRange);if(A<0&&!$)return null;if(A>-1)this.lastChange=Date.now();this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let B=new l8(this.view,A,j,q);return this.view.docView.domChanged={newSel:B.newSel?B.newSel.main:null},B}flush(A=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;if(A)this.readSelectionRange();let j=this.readChange();if(!j)return this.view.requestMeasure(),!1;let q=this.view.state,$=d8(this.view,j);if(this.view.state==q&&(j.domChanged||j.newSel&&!j.newSel.main.eq(this.view.state.selection.main)))this.view.update([]);return $}readMutation(A){let j=this.view.docView.nearest(A.target);if(!j||j.ignoreMutation(A))return null;if(j.markDirty(A.type=="attributes"),A.type=="attributes")j.flags|=4;if(A.type=="childList"){let q=dB(j,A.previousSibling||A.target.previousSibling,-1),$=dB(j,A.nextSibling||A.target.nextSibling,1);return{from:q?j.posAfter(q):j.posAtStart,to:$?j.posBefore($):j.posAtEnd,typeOver:!1}}else if(A.type=="characterData")return{from:j.posAtStart,to:j.posAtEnd,typeOver:A.target.nodeValue==A.oldValue};else return null}setWindow(A){if(A!=this.win)this.removeWindowListeners(this.win),this.win=A,this.addWindowListeners(this.win)}addWindowListeners(A){if(A.addEventListener("resize",this.onResize),this.printQuery)if(this.printQuery.addEventListener)this.printQuery.addEventListener("change",this.onPrint);else this.printQuery.addListener(this.onPrint);else A.addEventListener("beforeprint",this.onPrint);A.addEventListener("scroll",this.onScroll),A.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(A){if(A.removeEventListener("scroll",this.onScroll),A.removeEventListener("resize",this.onResize),this.printQuery)if(this.printQuery.removeEventListener)this.printQuery.removeEventListener("change",this.onPrint);else this.printQuery.removeListener(this.onPrint);else A.removeEventListener("beforeprint",this.onPrint);A.document.removeEventListener("selectionchange",this.onSelectionChange)}update(A){if(this.editContext){if(this.editContext.update(A),A.startState.facet(Qj)!=A.state.facet(Qj))A.view.contentDOM.editContext=A.state.facet(Qj)?this.editContext.editContext:null}}destroy(){var A,j,q;this.stop(),(A=this.intersection)===null||A===void 0||A.disconnect(),(j=this.gapIntersection)===null||j===void 0||j.disconnect(),(q=this.resizeScroll)===null||q===void 0||q.disconnect();for(let $ of this.scrollTargets)$.removeEventListener("scroll",this.onScroll);if(this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext)this.view.contentDOM.editContext=null,this.editContext.destroy()}}function dB(A,j,q){while(j){let $=i.get(j);if($&&$.parent==A)return $;let B=j.parentNode;j=B!=A.dom?B:q>0?j.nextSibling:j.previousSibling}return null}function cB(A,j){let{startContainer:q,startOffset:$,endContainer:B,endOffset:G}=j,K=A.docView.domAtPos(A.state.selection.main.anchor);if(P6(K.node,K.offset,B,G))[q,$,B,G]=[B,G,q,$];return{anchorNode:q,anchorOffset:$,focusNode:B,focusOffset:G}}function u9(A,j){if(j.getComposedRanges){let B=j.getComposedRanges(A.root)[0];if(B)return cB(A,B)}let q=null;function $(B){B.preventDefault(),B.stopImmediatePropagation(),q=B.getTargetRanges()[0]}return A.contentDOM.addEventListener("beforeinput",$,!0),A.dom.ownerDocument.execCommand("indent"),A.contentDOM.removeEventListener("beforeinput",$,!0),q?cB(A,q):null}class UG{constructor(A){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(A.state);let j=this.editContext=new window.EditContext({text:A.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,A.state.selection.main.anchor))),selectionEnd:this.toContextPos(A.state.selection.main.head)});this.handlers.textupdate=(q)=>{let $=A.state.selection.main,{anchor:B,head:G}=$,K=this.toEditorPos(q.updateRangeStart),J=this.toEditorPos(q.updateRangeEnd);if(A.inputState.composing>=0&&!this.composing)this.composing={contextBase:q.updateRangeStart,editorBase:K,drifted:!1};let Z={from:K,to:J,insert:m.of(q.text.split(`
`))};if(Z.from==this.from&&B<this.from)Z.from=B;else if(Z.to==this.to&&B>this.to)Z.to=B;if(Z.from==Z.to&&!Z.insert.length){let X=E.single(this.toEditorPos(q.selectionStart),this.toEditorPos(q.selectionEnd));if(!X.main.eq($))A.dispatch({selection:X,userEvent:"select"});return}if((L.mac||L.android)&&Z.from==G-1&&/^\. ?$/.test(q.text)&&A.contentDOM.getAttribute("autocorrect")=="off")Z={from:K,to:J,insert:m.of([q.text.replace("."," ")])};if(this.pendingContextChange=Z,!A.state.readOnly){let X=this.to-this.from+(Z.to-Z.from+Z.insert.length);x0(A,Z,E.single(this.toEditorPos(q.selectionStart,X),this.toEditorPos(q.selectionEnd,X)))}if(this.pendingContextChange)this.revertPending(A.state),this.setSelection(A.state)},this.handlers.characterboundsupdate=(q)=>{let $=[],B=null;for(let G=this.toEditorPos(q.rangeStart),K=this.toEditorPos(q.rangeEnd);G<K;G++){let J=A.coordsForChar(G);B=J&&new DOMRect(J.left,J.top,J.right-J.left,J.bottom-J.top)||B||new DOMRect,$.push(B)}j.updateCharacterBounds(q.rangeStart,$)},this.handlers.textformatupdate=(q)=>{let $=[];for(let B of q.getTextFormats()){let{underlineStyle:G,underlineThickness:K}=B;if(G!="None"&&K!="None"){let J=this.toEditorPos(B.rangeStart),Z=this.toEditorPos(B.rangeEnd);if(J<Z){let X=`text-decoration: underline ${G=="Dashed"?"dashed ":G=="Squiggle"?"wavy ":""}${K=="Thin"?1:2}px`;$.push(C.mark({attributes:{style:X}}).range(J,Z))}}}A.dispatch({effects:w8.of(C.set($))})},this.handlers.compositionstart=()=>{if(A.inputState.composing<0)A.inputState.composing=0,A.inputState.compositionFirstChange=!0},this.handlers.compositionend=()=>{if(A.inputState.composing=-1,A.inputState.compositionFirstChange=null,this.composing){let{drifted:q}=this.composing;if(this.composing=null,q)this.reset(A.state)}};for(let q in this.handlers)j.addEventListener(q,this.handlers[q]);this.measureReq={read:(q)=>{this.editContext.updateControlBounds(q.contentDOM.getBoundingClientRect());let $=y6(q.root);if($&&$.rangeCount)this.editContext.updateSelectionBounds($.getRangeAt(0).getBoundingClientRect())}}}applyEdits(A){let j=0,q=!1,$=this.pendingContextChange;if(A.changes.iterChanges((B,G,K,J,Z)=>{if(q)return;let X=Z.length-(G-B);if($&&G>=$.to)if($.from==B&&$.to==G&&$.insert.eq(Z)){$=this.pendingContextChange=null,j+=X,this.to+=X;return}else $=null,this.revertPending(A.state);if(B+=j,G+=j,G<=this.from)this.from+=X,this.to+=X;else if(B<this.to){if(B<this.from||G>this.to||this.to-this.from+Z.length>30000){q=!0;return}this.editContext.updateText(this.toContextPos(B),this.toContextPos(G),Z.toString()),this.to+=X}j+=X}),$&&!q)this.revertPending(A.state);return!q}update(A){let j=this.pendingContextChange,q=A.startState.selection.main;if(this.composing&&(this.composing.drifted||!A.changes.touchesRange(q.from,q.to)&&A.transactions.some(($)=>!$.isUserEvent("input.type")&&$.changes.touchesRange(this.from,this.to))))this.composing.drifted=!0,this.composing.editorBase=A.changes.mapPos(this.composing.editorBase);else if(!this.applyEdits(A)||!this.rangeIsValid(A.state))this.pendingContextChange=null,this.reset(A.state);else if(A.docChanged||A.selectionSet||j)this.setSelection(A.state);if(A.geometryChanged||A.docChanged||A.selectionSet)A.view.requestMeasure(this.measureReq)}resetRange(A){let{head:j}=A.selection.main;this.from=Math.max(0,j-1e4),this.to=Math.min(A.doc.length,j+1e4)}reset(A){this.resetRange(A),this.editContext.updateText(0,this.editContext.text.length,A.doc.sliceString(this.from,this.to)),this.setSelection(A)}revertPending(A){let j=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(j.from),this.toContextPos(j.from+j.insert.length),A.doc.sliceString(j.from,j.to))}setSelection(A){let{main:j}=A.selection,q=this.toContextPos(Math.max(this.from,Math.min(this.to,j.anchor))),$=this.toContextPos(j.head);if(this.editContext.selectionStart!=q||this.editContext.selectionEnd!=$)this.editContext.updateSelection(q,$)}rangeIsValid(A){let{head:j}=A.selection.main;return!(this.from>0&&j-this.from<500||this.to<A.doc.length&&this.to-j<500||this.to-this.from>30000)}toEditorPos(A,j=this.to-this.from){A=Math.min(A,j);let q=this.composing;return q&&q.drifted?q.editorBase+(A-q.contextBase):A+this.from}toContextPos(A){let j=this.composing;return j&&j.drifted?j.contextBase+(A-j.editorBase):A-this.from}destroy(){for(let A in this.handlers)this.editContext.removeEventListener(A,this.handlers[A])}}class R{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(A={}){var j;if(this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),A.parent)A.parent.appendChild(this.dom);let{dispatch:q}=A;if(this.dispatchTransactions=A.dispatchTransactions||q&&(($)=>$.forEach((B)=>q(B,this)))||(($)=>this.update($)),this.dispatch=this.dispatch.bind(this),this._root=A.root||y4(A.parent)||document,this.viewState=new z0(A.state||v.create(A)),A.scrollTo&&A.scrollTo.is(I7))this.viewState.scrollTarget=A.scrollTo.value.clip(this.viewState.state);this.plugins=this.state.facet(oj).map(($)=>new k7($));for(let $ of this.plugins)$.update(this);if(this.observer=new XG(this),this.inputState=new c8(this),this.inputState.ensureHandlers(this.plugins),this.docView=new U0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(j=document.fonts)===null||j===void 0?void 0:j.ready)document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...A){let j=A.length==1&&A[0]instanceof e?A:A.length==1&&Array.isArray(A[0])?A[0]:[this.state.update(...A)];this.dispatchTransactions(j,this)}update(A){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let j=!1,q=!1,$,B=this.state;for(let Y of A){if(Y.startState!=B)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");B=Y.state}if(this.destroyed){this.viewState.state=B;return}let G=this.hasFocus,K=0,J=null;if(A.some((Y)=>Y.annotation(t8)))this.inputState.notifiedFocused=G,K=1;else if(G!=this.inputState.notifiedFocused){if(this.inputState.notifiedFocused=G,J=e8(B,G),!J)K=1}let Z=this.observer.delayedAndroidKey,X=null;if(Z){if(this.observer.clearDelayedAndroidKey(),X=this.observer.readChange(),X&&!this.state.doc.eq(B.doc)||!this.state.selection.eq(B.selection))X=null}else this.observer.clear();if(B.facet(v.phrases)!=this.state.facet(v.phrases))return this.setState(B);$=v7.create(this,B,A),$.flags|=K;let U=this.viewState.scrollTarget;try{this.updateState=2;for(let Y of A){if(U)U=U.map(Y.changes);if(Y.scrollIntoView){let{main:Q}=Y.state.selection;U=new A6(Q.empty?Q:E.cursor(Q.head,Q.head>Q.anchor?-1:1))}for(let Q of Y.effects)if(Q.is(I7))U=Q.value.clip(this.state)}if(this.viewState.update($,U),this.bidiCache=u7.update(this.bidiCache,$.changes),!$.empty)this.updatePlugins($),this.inputState.update($);if(j=this.docView.update($),this.state.facet(D6)!=this.styleModules)this.mountStyles();q=this.updateAttrs(),this.showAnnouncements(A),this.docView.updateSelection(j,A.some((Y)=>Y.isUserEvent("select.pointer")))}finally{this.updateState=0}if($.startState.facet(N7)!=$.state.facet(N7))this.viewState.mustMeasureContent=!0;if(j||q||U||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)this.requestMeasure();if(j)this.docViewUpdate();if(!$.empty)for(let Y of this.state.facet(X0))try{Y($)}catch(Q){YA(this.state,Q,"update listener")}if(J||X)Promise.resolve().then(()=>{if(J&&this.state==J.startState)this.dispatch(J);if(X){if(!d8(this,X)&&Z.force)ej(this.contentDOM,Z.key,Z.keyCode)}})}setState(A){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=A;return}this.updateState=2;let j=this.hasFocus;try{for(let q of this.plugins)q.destroy(this);this.viewState=new z0(A),this.plugins=A.facet(oj).map((q)=>new k7(q)),this.pluginMap.clear();for(let q of this.plugins)q.update(this);this.docView.destroy(),this.docView=new U0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}if(j)this.focus();this.requestMeasure()}updatePlugins(A){let j=A.startState.facet(oj),q=A.state.facet(oj);if(j!=q){let $=[];for(let B of q){let G=j.indexOf(B);if(G<0)$.push(new k7(B));else{let K=this.plugins[G];K.mustUpdate=A,$.push(K)}}for(let B of this.plugins)if(B.mustUpdate!=A)B.destroy(this);this.plugins=$,this.pluginMap.clear()}else for(let $ of this.plugins)$.mustUpdate=A;for(let $=0;$<this.plugins.length;$++)this.plugins[$].update(this);if(j!=q)this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let A of this.plugins){let j=A.value;if(j&&j.docViewUpdate)try{j.docViewUpdate(this)}catch(q){YA(this.state,q,"doc view update listener")}}}measure(A=!0){if(this.destroyed)return;if(this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);if(this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}if(this.measureScheduled=0,A)this.observer.forceFlush();let j=null,q=this.scrollDOM,$=q.scrollTop*this.scaleY,{scrollAnchorPos:B,scrollAnchorHeight:G}=this.viewState;if(Math.abs($-this.viewState.scrollTop)>1)G=-1;this.viewState.scrollAnchorHeight=-1;try{for(let K=0;;K++){if(G<0)if(U8(q))B=-1,G=this.viewState.heightMap.height;else{let Q=this.viewState.scrollAnchorAt($);B=Q.from,G=Q.top}this.updateState=1;let J=this.viewState.measure(this);if(!J&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(K>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let Z=[];if(!(J&4))[this.measureRequests,Z]=[Z,this.measureRequests];let X=Z.map((Q)=>{try{return Q.read(this)}catch(O){return YA(this.state,O),sB}}),U=v7.create(this,this.state,[]),Y=!1;if(U.flags|=J,!j)j=U;else j.flags|=J;if(this.updateState=2,!U.empty){if(this.updatePlugins(U),this.inputState.update(U),this.updateAttrs(),Y=this.docView.update(U),Y)this.docViewUpdate()}for(let Q=0;Q<Z.length;Q++)if(X[Q]!=sB)try{let O=Z[Q];if(O.write)O.write(X[Q],this)}catch(O){YA(this.state,O)}if(Y)this.docView.updateSelection(!0);if(!U.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,G=-1;continue}else{let O=(B<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(B).top)-G;if(O>1||O<-1){$=$+O,q.scrollTop=$/this.scaleY,G=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(j&&!j.empty)for(let K of this.state.facet(X0))K(j)}get themeClasses(){return W0+" "+(this.state.facet(I0)?JG:KG)+" "+this.state.facet(N7)}updateAttrs(){let A=iB(this,h8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),j={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:!this.state.facet(Qj)?"false":"true",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};if(this.state.readOnly)j["aria-readonly"]="true";iB(this,C0,j);let q=this.observer.ignore(()=>{let $=G0(this.contentDOM,this.contentAttrs,j),B=G0(this.dom,this.editorAttrs,A);return $||B});return this.editorAttrs=A,this.contentAttrs=j,q}showAnnouncements(A){let j=!0;for(let q of A)for(let $ of q.effects)if($.is(R.announce)){if(j)this.announceDOM.textContent="";j=!1;let B=this.announceDOM.appendChild(document.createElement("div"));B.textContent=$.value}}mountStyles(){this.styleModules=this.state.facet(D6);let A=this.state.facet(R.cspNonce);dA.mount(this.root,this.styleModules.concat(v9).reverse(),A?{nonce:A}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(!1)}requestMeasure(A){if(this.measureScheduled<0)this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure());if(A){if(this.measureRequests.indexOf(A)>-1)return;if(A.key!=null){for(let j=0;j<this.measureRequests.length;j++)if(this.measureRequests[j].key===A.key){this.measureRequests[j]=A;return}}this.measureRequests.push(A)}}plugin(A){let j=this.pluginMap.get(A);if(j===void 0||j&&j.plugin!=A)this.pluginMap.set(A,j=this.plugins.find((q)=>q.plugin==A)||null);return j&&j.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(A){return this.readMeasured(),this.viewState.elementAtHeight(A)}lineBlockAtHeight(A){return this.readMeasured(),this.viewState.lineBlockAtHeight(A)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(A){return this.viewState.lineBlockAt(A)}get contentHeight(){return this.viewState.contentHeight}moveByChar(A,j,q){return aq(this,A,CB(this,A,j,q))}moveByGroup(A,j){return aq(this,A,CB(this,A,j,(q)=>Z9(this,A.head,q)))}visualLineSide(A,j){let q=this.bidiSpans(A),$=this.textDirectionAt(A.from),B=q[j?q.length-1:0];return E.cursor(B.side(j,$)+A.from,B.forward(!j,$)?1:-1)}moveToLineBoundary(A,j,q=!0){return J9(this,A,j,q)}moveVertically(A,j,q){return aq(this,A,X9(this,A,j,q))}domAtPos(A){return this.docView.domAtPos(A)}posAtDOM(A,j=0){return this.docView.posFromDOM(A,j)}posAtCoords(A,j=!0){return this.readMeasured(),f8(this,A,j)}coordsAtPos(A,j=1){this.readMeasured();let q=this.docView.coordsAt(A,j);if(!q||q.left==q.right)return q;let $=this.state.doc.lineAt(A),B=this.bidiSpans($),G=B[Oj.find(B,A-$.from,-1,j)];return f7(q,G.dir==d.LTR==j>0)}coordsForChar(A){return this.readMeasured(),this.docView.coordsForChar(A)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(A){if(!this.state.facet(b8)||A<this.viewport.from||A>this.viewport.to)return this.textDirection;return this.readMeasured(),this.docView.textDirectionAt(A)}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(A){if(A.length>g9)return R8(A.length);let j=this.textDirectionAt(A.from),q;for(let B of this.bidiCache)if(B.from==A.from&&B.dir==j&&(B.fresh||M8(B.isolates,q=VB(this,A))))return B.order;if(!q)q=VB(this,A);let $=c4(A.text,j,q);return this.bidiCache.push(new u7(A.from,A.to,j,q,!0,$)),$}get hasFocus(){var A;return(this.dom.ownerDocument.hasFocus()||L.safari&&((A=this.inputState)===null||A===void 0?void 0:A.lastContextMenu)>Date.now()-30000)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Z8(this.contentDOM),this.docView.updateSelection()})}setRoot(A){if(this._root!=A)this._root=A,this.observer.setWindow((A.nodeType==9?A:A.ownerDocument).defaultView||window),this.mountStyles()}destroy(){if(this.root.activeElement==this.contentDOM)this.contentDOM.blur();for(let A of this.plugins)A.destroy(this);if(this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);this.destroyed=!0}static scrollIntoView(A,j={}){return I7.of(new A6(typeof A=="number"?E.cursor(A):A,j.y,j.x,j.yMargin,j.xMargin))}scrollSnapshot(){let{scrollTop:A,scrollLeft:j}=this.scrollDOM,q=this.viewState.scrollAnchorAt(A);return I7.of(new A6(E.cursor(q.from),"start","start",q.top-A,j,!0))}setTabFocusMode(A){if(A==null)this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1;else if(typeof A=="boolean")this.inputState.tabFocusMode=A?0:-1;else if(this.inputState.tabFocusMode!=0)this.inputState.tabFocusMode=Date.now()+A}static domEventHandlers(A){return r.define(()=>({}),{eventHandlers:A})}static domEventObservers(A){return r.define(()=>({}),{eventObservers:A})}static theme(A,j){let q=dA.newName(),$=[N7.of(q),D6.of(E0(`.${q}`,A))];if(j&&j.dark)$.push(I0.of(!0));return $}static baseTheme(A){return lA.lowest(D6.of(E0("."+W0,A,ZG)))}static findFromDOM(A){var j;let q=A.querySelector(".cm-content"),$=q&&i.get(q)||i.get(A);return((j=$===null||$===void 0?void 0:$.rootView)===null||j===void 0?void 0:j.view)||null}}R.styleModule=D6;R.inputHandler=C8;R.clipboardInputFilter=P0;R.clipboardOutputFilter=T0;R.scrollHandler=S8;R.focusChangeEffect=y8;R.perLineTextDirection=b8;R.exceptionSink=T8;R.updateListener=X0;R.editable=Qj;R.mouseSelectionStyle=P8;R.dragMovesSelection=L8;R.clickAddsSelectionRange=k8;R.decorations=x6;R.outerDecorations=v8;R.atomicRanges=y0;R.bidiIsolatedRanges=m8;R.scrollMargins=u8;R.darkTheme=I0;R.cspNonce=k.define({combine:(A)=>A.length?A[0]:""});R.contentAttributes=C0;R.editorAttributes=h8;R.lineWrapping=R.contentAttributes.of({class:"cm-lineWrapping"});R.announce=b.define();var g9=4096,sB={};class u7{constructor(A,j,q,$,B,G){this.from=A,this.to=j,this.dir=q,this.isolates=$,this.fresh=B,this.order=G}static update(A,j){if(j.empty&&!A.some((B)=>B.fresh))return A;let q=[],$=A.length?A[A.length-1].dir:d.LTR;for(let B=Math.max(0,A.length-10);B<A.length;B++){let G=A[B];if(G.dir==$&&!j.touchesRange(G.from,G.to))q.push(new u7(j.mapPos(G.from,1),j.mapPos(G.to,-1),G.dir,G.isolates,!1,G.order))}return q}}function iB(A,j,q){for(let $=A.state.facet(j),B=$.length-1;B>=0;B--){let G=$[B],K=typeof G=="function"?G(A):G;if(K)B0(K,q)}return q}var f9=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function p9(A,j){let q=A.split(/-(?!$)/),$=q[q.length-1];if($=="Space")$=" ";let B,G,K,J;for(let Z=0;Z<q.length-1;++Z){let X=q[Z];if(/^(cmd|meta|m)$/i.test(X))J=!0;else if(/^a(lt)?$/i.test(X))B=!0;else if(/^(c|ctrl|control)$/i.test(X))G=!0;else if(/^s(hift)?$/i.test(X))K=!0;else if(/^mod$/i.test(X))if(j=="mac")J=!0;else G=!0;else throw new Error("Unrecognized modifier name: "+X)}if(B)$="Alt-"+$;if(G)$="Ctrl-"+$;if(J)$="Meta-"+$;if(K)$="Shift-"+$;return $}function D7(A,j,q){if(j.altKey)A="Alt-"+A;if(j.ctrlKey)A="Ctrl-"+A;if(j.metaKey)A="Meta-"+A;if(q!==!1&&j.shiftKey)A="Shift-"+A;return A}var l9=lA.default(R.domEventHandlers({keydown(A,j){return OG(YG(j.state),A,j,"editor")}})),v6=k.define({enables:l9}),nB=new WeakMap;function YG(A){let j=A.facet(v6),q=nB.get(j);if(!q)nB.set(j,q=c9(j.reduce(($,B)=>$.concat(B),[])));return q}function QG(A,j,q){return OG(YG(A.state),j,A,q)}var Wj=null,d9=4000;function c9(A,j=f9){let q=Object.create(null),$=Object.create(null),B=(K,J)=>{let Z=$[K];if(Z==null)$[K]=J;else if(Z!=J)throw new Error("Key binding "+K+" is used both as a regular binding and as a multi-stroke prefix")},G=(K,J,Z,X,U)=>{var Y,Q;let O=q[K]||(q[K]=Object.create(null)),F=J.split(/ (?!$)/).map((W)=>p9(W,j));for(let W=1;W<F.length;W++){let N=F.slice(0,W).join(" ");if(B(N,!0),!O[N])O[N]={preventDefault:!0,stopPropagation:!1,run:[(_)=>{let H=Wj={view:_,prefix:N,scope:K};return setTimeout(()=>{if(Wj==H)Wj=null},d9),!0}]}}let z=F.join(" ");B(z,!1);let I=O[z]||(O[z]={preventDefault:!1,stopPropagation:!1,run:((Q=(Y=O._any)===null||Y===void 0?void 0:Y.run)===null||Q===void 0?void 0:Q.slice())||[]});if(Z)I.run.push(Z);if(X)I.preventDefault=!0;if(U)I.stopPropagation=!0};for(let K of A){let J=K.scope?K.scope.split(" "):["editor"];if(K.any)for(let X of J){let U=q[X]||(q[X]=Object.create(null));if(!U._any)U._any={preventDefault:!1,stopPropagation:!1,run:[]};let{any:Y}=K;for(let Q in U)U[Q].run.push((O)=>Y(O,H0))}let Z=K[j]||K.key;if(!Z)continue;for(let X of J)if(G(X,Z,K.run,K.preventDefault,K.stopPropagation),K.shift)G(X,"Shift-"+Z,K.shift,K.preventDefault,K.stopPropagation)}return q}var H0=null;function OG(A,j,q,$){H0=j;let B=IB(j),G=XA(B,0),K=VA(G)==B.length&&B!=" ",J="",Z=!1,X=!1,U=!1;if(Wj&&Wj.view==q&&Wj.scope==$){if(J=Wj.prefix+" ",i8.indexOf(j.keyCode)<0)X=!0,Wj=null}let Y=new Set,Q=(I)=>{if(I){for(let W of I.run)if(!Y.has(W)){if(Y.add(W),W(q)){if(I.stopPropagation)U=!0;return!0}}if(I.preventDefault){if(I.stopPropagation)U=!0;X=!0}}return!1},O=A[$],F,z;if(O){if(Q(O[J+D7(B,j,!K)]))Z=!0;else if(K&&(j.altKey||j.metaKey||j.ctrlKey)&&!(L.windows&&j.ctrlKey&&j.altKey)&&!(L.mac&&j.altKey&&!j.ctrlKey)&&(F=Yj[j.keyCode])&&F!=B){if(Q(O[J+D7(F,j,!0)]))Z=!0;else if(j.shiftKey&&(z=aj[j.keyCode])!=B&&z!=F&&Q(O[J+D7(z,j,!1)]))Z=!0}else if(K&&j.shiftKey&&Q(O[J+D7(B,j,!0)]))Z=!0;if(!Z&&Q(O._any))Z=!0}if(X)Z=!0;if(Z&&U)j.stopPropagation();return H0=null,Z}class m6{constructor(A,j,q,$,B){this.className=A,this.left=j,this.top=q,this.width=$,this.height=B}draw(){let A=document.createElement("div");return A.className=this.className,this.adjust(A),A}update(A,j){if(j.className!=this.className)return!1;return this.adjust(A),!0}adjust(A){if(A.style.left=this.left+"px",A.style.top=this.top+"px",this.width!=null)A.style.width=this.width+"px";A.style.height=this.height+"px"}eq(A){return this.left==A.left&&this.top==A.top&&this.width==A.width&&this.height==A.height&&this.className==A.className}static forRange(A,j,q){if(q.empty){let $=A.coordsAtPos(q.head,q.assoc||1);if(!$)return[];let B=FG(A);return[new m6(j,$.left-B.left,$.top-B.top,null,$.bottom-$.top)]}else return s9(A,j,q)}}function FG(A){let j=A.scrollDOM.getBoundingClientRect();return{left:(A.textDirection==d.LTR?j.left:j.right-A.scrollDOM.clientWidth*A.scaleX)-A.scrollDOM.scrollLeft*A.scaleX,top:j.top-A.scrollDOM.scrollTop*A.scaleY}}function aB(A,j,q,$){let B=A.coordsAtPos(j,q*2);if(!B)return $;let G=A.dom.getBoundingClientRect(),K=(B.top+B.bottom)/2,J=A.posAtCoords({x:G.left+1,y:K}),Z=A.posAtCoords({x:G.right-1,y:K});if(J==null||Z==null)return $;return{from:Math.max($.from,Math.min(J,Z)),to:Math.min($.to,Math.max(J,Z))}}function s9(A,j,q){if(q.to<=A.viewport.from||q.from>=A.viewport.to)return[];let $=Math.max(q.from,A.viewport.from),B=Math.min(q.to,A.viewport.to),G=A.textDirection==d.LTR,K=A.contentDOM,J=K.getBoundingClientRect(),Z=FG(A),X=K.querySelector(".cm-line"),U=X&&window.getComputedStyle(X),Y=J.left+(U?parseInt(U.paddingLeft)+Math.min(0,parseInt(U.textIndent)):0),Q=J.right-(U?parseInt(U.paddingRight):0),O=Q0(A,$,1),F=Q0(A,B,-1),z=O.type==EA.Text?O:null,I=F.type==EA.Text?F:null;if(z&&(A.lineWrapping||O.widgetLineBreaks))z=aB(A,$,1,z);if(I&&(A.lineWrapping||F.widgetLineBreaks))I=aB(A,B,-1,I);if(z&&I&&z.from==I.from&&z.to==I.to)return N(_(q.from,q.to,z));else{let D=z?_(q.from,null,z):H(O,!1),T=I?_(null,q.to,I):H(F,!0),P=[];if((z||O).to<(I||F).from-(z&&I?1:0)||O.widgetLineBreaks>1&&D.bottom+A.defaultLineHeight/2<T.top)P.push(W(Y,D.bottom,Q,T.top));else if(D.bottom<T.top&&A.elementAtHeight((D.bottom+T.top)/2).type==EA.Text)D.bottom=T.top=(D.bottom+T.top)/2;return N(D).concat(P).concat(N(T))}function W(D,T,P,x){return new m6(j,D-Z.left,T-Z.top,P-D,x-T)}function N({top:D,bottom:T,horizontal:P}){let x=[];for(let u=0;u<P.length;u+=2)x.push(W(P[u],D,P[u+1],T));return x}function _(D,T,P){let x=1e9,u=-1e9,c=[];function w(g,n,WA,MA,oA){let JA=A.coordsAtPos(g,g==P.to?-2:2),yA=A.coordsAtPos(WA,WA==P.from?2:-2);if(!JA||!yA)return;if(x=Math.min(JA.top,yA.top,x),u=Math.max(JA.bottom,yA.bottom,u),oA==d.LTR)c.push(G&&n?Y:JA.left,G&&MA?Q:yA.right);else c.push(!G&&MA?Y:yA.left,!G&&n?Q:JA.right)}let y=D!==null&&D!==void 0?D:P.from,p=T!==null&&T!==void 0?T:P.to;for(let g of A.visibleRanges)if(g.to>y&&g.from<p)for(let n=Math.max(g.from,y),WA=Math.min(g.to,p);;){let MA=A.state.doc.lineAt(n);for(let oA of A.bidiSpans(MA)){let JA=oA.from+MA.from,yA=oA.to+MA.from;if(JA>=WA)break;if(yA>n)w(Math.max(JA,n),D==null&&JA<=y,Math.min(yA,WA),T==null&&yA>=p,oA.dir)}if(n=MA.to+1,n>=WA)break}if(c.length==0)w(y,D==null,p,T==null,A.textDirection);return{top:x,bottom:u,horizontal:c}}function H(D,T){let P=J.top+(T?D.top:D.bottom);return{top:P,bottom:P,horizontal:[]}}}function i9(A,j){return A.constructor==j.constructor&&A.eq(j)}class zG{constructor(A,j){if(this.view=A,this.layer=j,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=A.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),j.above)this.dom.classList.add("cm-layer-above");if(j.class)this.dom.classList.add(j.class);if(this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(A.state),A.requestMeasure(this.measureReq),j.mount)j.mount(this.dom,A)}update(A){if(A.startState.facet(C7)!=A.state.facet(C7))this.setOrder(A.state);if(this.layer.update(A,this.dom)||A.geometryChanged)this.scale(),A.view.requestMeasure(this.measureReq)}docViewUpdate(A){if(this.layer.updateOnDocViewUpdate!==!1)A.requestMeasure(this.measureReq)}setOrder(A){let j=0,q=A.facet(C7);while(j<q.length&&q[j]!=this.layer)j++;this.dom.style.zIndex=String((this.layer.above?150:-1)-j)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:A,scaleY:j}=this.view;if(A!=this.scaleX||j!=this.scaleY)this.scaleX=A,this.scaleY=j,this.dom.style.transform=`scale(${1/A}, ${1/j})`}draw(A){if(A.length!=this.drawn.length||A.some((j,q)=>!i9(j,this.drawn[q]))){let j=this.dom.firstChild,q=0;for(let $ of A)if($.update&&j&&$.constructor&&this.drawn[q].constructor&&$.update(j,this.drawn[q]))j=j.nextSibling,q++;else this.dom.insertBefore($.draw(),j);while(j){let $=j.nextSibling;j.remove(),j=$}this.drawn=A}}destroy(){if(this.layer.destroy)this.layer.destroy(this.dom,this.view);this.dom.remove()}}var C7=k.define();function IG(A){return[r.define((j)=>new zG(j,A)),C7.of(A)]}var S6=k.define({combine(A){return FA(A,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(j,q)=>Math.min(j,q),drawRangeCursor:(j,q)=>j||q})}});function WG(A={}){return[S6.of(A),n9,a9,r9,x8.of(!0)]}function EG(A){return A.startState.facet(S6)!=A.state.facet(S6)}var n9=IG({above:!0,markers(A){let{state:j}=A,q=j.facet(S6),$=[];for(let B of j.selection.ranges){let G=B==j.selection.main;if(B.empty||q.drawRangeCursor){let K=G?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",J=B.empty?B:E.cursor(B.head,B.head>B.anchor?-1:1);for(let Z of m6.forRange(A,K,J))$.push(Z)}}return $},update(A,j){if(A.transactions.some(($)=>$.selection))j.style.animationName=j.style.animationName=="cm-blink"?"cm-blink2":"cm-blink";let q=EG(A);if(q)rB(A.state,j);return A.docChanged||A.selectionSet||q},mount(A,j){rB(j.state,A)},class:"cm-cursorLayer"});function rB(A,j){j.style.animationDuration=A.facet(S6).cursorBlinkRate+"ms"}var a9=IG({above:!1,markers(A){return A.state.selection.ranges.map((j)=>j.empty?[]:m6.forRange(A,"cm-selectionBackground",j)).reduce((j,q)=>j.concat(q))},update(A,j){return A.docChanged||A.selectionSet||A.viewportChanged||EG(A)},class:"cm-selectionLayer"}),r9=lA.highest(R.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),HG=b.define({map(A,j){return A==null?null:j.mapPos(A)}}),k6=o.define({create(){return null},update(A,j){if(A!=null)A=j.changes.mapPos(A);return j.effects.reduce((q,$)=>$.is(HG)?$.value:q,A)}}),o9=r.fromClass(class{constructor(A){this.view=A,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(A){var j;let q=A.state.field(k6);if(q==null){if(this.cursor!=null)(j=this.cursor)===null||j===void 0||j.remove(),this.cursor=null}else{if(!this.cursor)this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor";if(A.startState.field(k6)!=q||A.docChanged||A.geometryChanged)this.view.requestMeasure(this.measureReq)}}readPos(){let{view:A}=this,j=A.state.field(k6),q=j!=null&&A.coordsAtPos(j);if(!q)return null;let $=A.scrollDOM.getBoundingClientRect();return{left:q.left-$.left+A.scrollDOM.scrollLeft*A.scaleX,top:q.top-$.top+A.scrollDOM.scrollTop*A.scaleY,height:q.bottom-q.top}}drawCursor(A){if(this.cursor){let{scaleX:j,scaleY:q}=this.view;if(A)this.cursor.style.left=A.left/j+"px",this.cursor.style.top=A.top/q+"px",this.cursor.style.height=A.height/q+"px";else this.cursor.style.left="-100000px"}}destroy(){if(this.cursor)this.cursor.remove()}setDropPos(A){if(this.view.state.field(k6)!=A)this.view.dispatch({effects:HG.of(A)})}},{eventObservers:{dragover(A){this.setDropPos(this.view.posAtCoords({x:A.clientX,y:A.clientY}))},dragleave(A){if(A.target==this.view.contentDOM||!this.view.contentDOM.contains(A.relatedTarget))this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function _G(){return[k6,o9]}function oB(A,j,q,$,B){j.lastIndex=0;for(let G=A.iterRange(q,$),K=q,J;!G.next().done;K+=G.value.length)if(!G.lineBreak)while(J=j.exec(G.value))B(K+J.index,J)}function t9(A,j){let q=A.visibleRanges;if(q.length==1&&q[0].from==A.viewport.from&&q[0].to==A.viewport.to)return q;let $=[];for(let{from:B,to:G}of q)if(B=Math.max(A.state.doc.lineAt(B).from,B-j),G=Math.min(A.state.doc.lineAt(G).to,G+j),$.length&&$[$.length-1].to>=B)$[$.length-1].to=G;else $.push({from:B,to:G});return $}class NG{constructor(A){let{regexp:j,decoration:q,decorate:$,boundary:B,maxLength:G=1000}=A;if(!j.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=j,$)this.addMatch=(K,J,Z,X)=>$(X,Z,Z+K[0].length,K,J);else if(typeof q=="function")this.addMatch=(K,J,Z,X)=>{let U=q(K,J,Z);if(U)X(Z,Z+K[0].length,U)};else if(q)this.addMatch=(K,J,Z,X)=>X(Z,Z+K[0].length,q);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=B,this.maxLength=G}createDeco(A){let j=new RA,q=j.add.bind(j);for(let{from:$,to:B}of t9(A,this.maxLength))oB(A.state.doc,this.regexp,$,B,(G,K)=>this.addMatch(K,A,G,q));return j.finish()}updateDeco(A,j){let q=1e9,$=-1;if(A.docChanged)A.changes.iterChanges((B,G,K,J)=>{if(J>=A.view.viewport.from&&K<=A.view.viewport.to)q=Math.min(K,q),$=Math.max(J,$)});if(A.viewportMoved||$-q>1000)return this.createDeco(A.view);if($>-1)return this.updateRange(A.view,j.map(A.changes),q,$);return j}updateRange(A,j,q,$){for(let B of A.visibleRanges){let G=Math.max(B.from,q),K=Math.min(B.to,$);if(K>=G){let J=A.state.doc.lineAt(G),Z=J.to<K?A.state.doc.lineAt(K):J,X=Math.max(B.from,J.from),U=Math.min(B.to,Z.to);if(this.boundary){for(;G>J.from;G--)if(this.boundary.test(J.text[G-1-J.from])){X=G;break}for(;K<Z.to;K++)if(this.boundary.test(Z.text[K-Z.from])){U=K;break}}let Y=[],Q,O=(F,z,I)=>Y.push(I.range(F,z));if(J==Z){this.regexp.lastIndex=X-J.from;while((Q=this.regexp.exec(J.text))&&Q.index<U-J.from)this.addMatch(Q,A,Q.index+J.from,O)}else oB(A.state.doc,this.regexp,X,U,(F,z)=>this.addMatch(z,A,F,O));j=j.update({filterFrom:X,filterTo:U,filter:(F,z)=>F<X||z>U,add:Y})}}return j}}var _0=/x/.unicode!=null?"gu":"g",e9=new RegExp(`[\x00-\b
-\x1F-­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,_0),A1={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},oq=null;function j1(){var A;if(oq==null&&typeof document!="undefined"&&document.body){let j=document.body.style;oq=((A=j.tabSize)!==null&&A!==void 0?A:j.MozTabSize)!=null}return oq||!1}var y7=k.define({combine(A){let j=FA(A,{render:null,specialChars:e9,addSpecialChars:null});if(j.replaceTabs=!j1())j.specialChars=new RegExp("\t|"+j.specialChars.source,_0);if(j.addSpecialChars)j.specialChars=new RegExp(j.specialChars.source+"|"+j.addSpecialChars.source,_0);return j}});function DG(A={}){return[y7.of(A),q1()]}var tB=null;function q1(){return tB||(tB=r.fromClass(class{constructor(A){this.view=A,this.decorations=C.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(A.state.facet(y7)),this.decorations=this.decorator.createDeco(A)}makeDecorator(A){return new NG({regexp:A.specialChars,decoration:(j,q,$)=>{let{doc:B}=q.state,G=XA(j[0],0);if(G==9){let K=B.lineAt($),J=q.state.tabSize,Z=Uj(K.text,J,$-K.from);return C.replace({widget:new RG((J-Z%J)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[G]||(this.decorationCache[G]=C.replace({widget:new MG(A,G)}))},boundary:A.replaceTabs?void 0:/[^]/})}update(A){let j=A.state.facet(y7);if(A.startState.facet(y7)!=j)this.decorator=this.makeDecorator(j),this.decorations=this.decorator.createDeco(A.view);else this.decorations=this.decorator.updateDeco(A,this.decorations)}},{decorations:(A)=>A.decorations}))}var $1="•";function B1(A){if(A>=32)return $1;if(A==10)return"␤";return String.fromCharCode(9216+A)}class MG extends hA{constructor(A,j){super();this.options=A,this.code=j}eq(A){return A.code==this.code}toDOM(A){let j=B1(this.code),q=A.state.phrase("Control character")+" "+(A1[this.code]||"0x"+this.code.toString(16)),$=this.options.render&&this.options.render(this.code,q,j);if($)return $;let B=document.createElement("span");return B.textContent=j,B.title=q,B.setAttribute("aria-label",q),B.className="cm-specialChar",B}ignoreEvent(){return!1}}class RG extends hA{constructor(A){super();this.width=A}eq(A){return A.width==this.width}toDOM(){let A=document.createElement("span");return A.textContent="\t",A.className="cm-tab",A.style.width=this.width+"px",A}ignoreEvent(){return!1}}function VG(){return K1}var G1=C.line({class:"cm-activeLine"}),K1=r.fromClass(class{constructor(A){this.decorations=this.getDeco(A)}update(A){if(A.docChanged||A.selectionSet)this.decorations=this.getDeco(A.view)}getDeco(A){let j=-1,q=[];for(let $ of A.state.selection.ranges){let B=A.lineBlockAt($.head);if(B.from>j)q.push(G1.range(B.from)),j=B.from}return C.set(q)}},{decorations:(A)=>A.decorations});var N0=2000;function J1(A,j,q){let $=Math.min(j.line,q.line),B=Math.max(j.line,q.line),G=[];if(j.off>N0||q.off>N0||j.col<0||q.col<0){let K=Math.min(j.off,q.off),J=Math.max(j.off,q.off);for(let Z=$;Z<=B;Z++){let X=A.doc.line(Z);if(X.length<=J)G.push(E.range(X.from+K,X.to+J))}}else{let K=Math.min(j.col,q.col),J=Math.max(j.col,q.col);for(let Z=$;Z<=B;Z++){let X=A.doc.line(Z),U=F7(X.text,K,A.tabSize,!0);if(U<0)G.push(E.cursor(X.to));else{let Y=F7(X.text,J,A.tabSize);G.push(E.range(X.from+U,X.from+Y))}}}return G}function Z1(A,j){let q=A.coordsAtPos(A.viewport.from);return q?Math.round(Math.abs((q.left-j)/A.defaultCharacterWidth)):-1}function eB(A,j){let q=A.posAtCoords({x:j.clientX,y:j.clientY},!1),$=A.state.doc.lineAt(q),B=q-$.from,G=B>N0?-1:B==$.length?Z1(A,j.clientX):Uj($.text,A.state.tabSize,q-$.from);return{line:$.number,col:G,off:B}}function X1(A,j){let q=eB(A,j),$=A.state.selection;if(!q)return null;return{update(B){if(B.docChanged){let G=B.changes.mapPos(B.startState.doc.line(q.line).from),K=B.state.doc.lineAt(G);q={line:K.number,col:q.col,off:Math.min(q.off,K.length)},$=$.map(B.changes)}},get(B,G,K){let J=eB(A,B);if(!J)return $;let Z=J1(A.state,q,J);if(!Z.length)return $;if(K)return E.create(Z.concat($.ranges));else return E.create(Z)}}}function kG(A){let j=(A===null||A===void 0?void 0:A.eventFilter)||((q)=>q.altKey&&q.button==0);return R.mouseSelectionStyle.of((q,$)=>j($)?X1(q,$):null)}var U1={Alt:[18,(A)=>!!A.altKey],Control:[17,(A)=>!!A.ctrlKey],Shift:[16,(A)=>!!A.shiftKey],Meta:[91,(A)=>!!A.metaKey]},Y1={style:"cursor: crosshair"};function LG(A={}){let[j,q]=U1[A.key||"Alt"],$=r.fromClass(class{constructor(B){this.view=B,this.isDown=!1}set(B){if(this.isDown!=B)this.isDown=B,this.view.update([])}},{eventObservers:{keydown(B){this.set(B.keyCode==j||q(B))},keyup(B){if(B.keyCode==j||!q(B))this.set(!1)},mousemove(B){this.set(q(B))}}});return[$,R.contentAttributes.of((B)=>{var G;return((G=B.plugin($))===null||G===void 0?void 0:G.isDown)?Y1:null})]}var N6="-10000px";class v0{constructor(A,j,q,$){this.facet=j,this.createTooltipView=q,this.removeTooltipView=$,this.input=A.state.facet(j),this.tooltips=this.input.filter((G)=>G);let B=null;this.tooltipViews=this.tooltips.map((G)=>B=q(G,B))}update(A,j){var q;let $=A.state.facet(this.facet),B=$.filter((J)=>J);if($===this.input){for(let J of this.tooltipViews)if(J.update)J.update(A);return!1}let G=[],K=j?[]:null;for(let J=0;J<B.length;J++){let Z=B[J],X=-1;if(!Z)continue;for(let U=0;U<this.tooltips.length;U++){let Y=this.tooltips[U];if(Y&&Y.create==Z.create)X=U}if(X<0){if(G[J]=this.createTooltipView(Z,J?G[J-1]:null),K)K[J]=!!Z.above}else{let U=G[J]=this.tooltipViews[X];if(K)K[J]=j[X];if(U.update)U.update(A)}}for(let J of this.tooltipViews)if(G.indexOf(J)<0)this.removeTooltipView(J),(q=J.destroy)===null||q===void 0||q.call(J);if(j)K.forEach((J,Z)=>j[Z]=J),j.length=K.length;return this.input=$,this.tooltips=B,this.tooltipViews=G,!0}}function Q1(A){let j=A.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:j.clientHeight,right:j.clientWidth}}var tq=k.define({combine:(A)=>{var j,q,$;return{position:L.ios?"absolute":((j=A.find((B)=>B.position))===null||j===void 0?void 0:j.position)||"fixed",parent:((q=A.find((B)=>B.parent))===null||q===void 0?void 0:q.parent)||null,tooltipSpace:(($=A.find((B)=>B.tooltipSpace))===null||$===void 0?void 0:$.tooltipSpace)||Q1}}}),A8=new WeakMap,m0=r.fromClass(class{constructor(A){this.view=A,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let j=A.state.facet(tq);this.position=j.position,this.parent=j.parent,this.classes=A.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new v0(A,u6,(q,$)=>this.createTooltip(q,$),(q)=>{if(this.resizeObserver)this.resizeObserver.unobserve(q.dom);q.dom.remove()}),this.above=this.manager.tooltips.map((q)=>!!q.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver((q)=>{if(Date.now()>this.lastTransaction-50&&q.length>0&&q[q.length-1].intersectionRatio<1)this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),A.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){if(this.parent)this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container);else this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let A of this.manager.tooltipViews)this.intersectionObserver.observe(A.dom)}}measureSoon(){if(this.measureTimeout<0)this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50)}update(A){if(A.transactions.length)this.lastTransaction=Date.now();let j=this.manager.update(A,this.above);if(j)this.observeIntersection();let q=j||A.geometryChanged,$=A.state.facet(tq);if($.position!=this.position&&!this.madeAbsolute){this.position=$.position;for(let B of this.manager.tooltipViews)B.dom.style.position=this.position;q=!0}if($.parent!=this.parent){if(this.parent)this.container.remove();this.parent=$.parent,this.createContainer();for(let B of this.manager.tooltipViews)this.container.appendChild(B.dom);q=!0}else if(this.parent&&this.view.themeClasses!=this.classes)this.classes=this.container.className=this.view.themeClasses;if(q)this.maybeMeasure()}createTooltip(A,j){let q=A.create(this.view),$=j?j.dom:null;if(q.dom.classList.add("cm-tooltip"),A.arrow&&!q.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let B=document.createElement("div");B.className="cm-tooltip-arrow",q.dom.appendChild(B)}if(q.dom.style.position=this.position,q.dom.style.top=N6,q.dom.style.left="0px",this.container.insertBefore(q.dom,$),q.mount)q.mount(this.view);if(this.resizeObserver)this.resizeObserver.observe(q.dom);return q}destroy(){var A,j,q;this.view.win.removeEventListener("resize",this.measureSoon);for(let $ of this.manager.tooltipViews)$.dom.remove(),(A=$.destroy)===null||A===void 0||A.call($);if(this.parent)this.container.remove();(j=this.resizeObserver)===null||j===void 0||j.disconnect(),(q=this.intersectionObserver)===null||q===void 0||q.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let A=1,j=1,q=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:G}=this.manager.tooltipViews[0];if(L.gecko)q=G.offsetParent!=this.container.ownerDocument.body;else if(G.style.top==N6&&G.style.left=="0px"){let K=G.getBoundingClientRect();q=Math.abs(K.top+1e4)>1||Math.abs(K.left)>1}}if(q||this.position=="absolute")if(this.parent){let G=this.parent.getBoundingClientRect();if(G.width&&G.height)A=G.width/this.parent.offsetWidth,j=G.height/this.parent.offsetHeight}else({scaleX:A,scaleY:j}=this.view.viewState);let $=this.view.scrollDOM.getBoundingClientRect(),B=b0(this.view);return{visible:{left:$.left+B.left,top:$.top+B.top,right:$.right-B.right,bottom:$.bottom-B.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((G,K)=>{let J=this.manager.tooltipViews[K];return J.getCoords?J.getCoords(G.pos):this.view.coordsAtPos(G.pos)}),size:this.manager.tooltipViews.map(({dom:G})=>G.getBoundingClientRect()),space:this.view.state.facet(tq).tooltipSpace(this.view),scaleX:A,scaleY:j,makeAbsolute:q}}writeMeasure(A){var j;if(A.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let J of this.manager.tooltipViews)J.dom.style.position="absolute"}let{visible:q,space:$,scaleX:B,scaleY:G}=A,K=[];for(let J=0;J<this.manager.tooltips.length;J++){let Z=this.manager.tooltips[J],X=this.manager.tooltipViews[J],{dom:U}=X,Y=A.pos[J],Q=A.size[J];if(!Y||Z.clip!==!1&&(Y.bottom<=Math.max(q.top,$.top)||Y.top>=Math.min(q.bottom,$.bottom)||Y.right<Math.max(q.left,$.left)-0.1||Y.left>Math.min(q.right,$.right)+0.1)){U.style.top=N6;continue}let O=Z.arrow?X.dom.querySelector(".cm-tooltip-arrow"):null,F=O?7:0,z=Q.right-Q.left,I=(j=A8.get(X))!==null&&j!==void 0?j:Q.bottom-Q.top,W=X.offset||F1,N=this.view.textDirection==d.LTR,_=Q.width>$.right-$.left?N?$.left:$.right-Q.width:N?Math.max($.left,Math.min(Y.left-(O?14:0)+W.x,$.right-z)):Math.min(Math.max($.left,Y.left-z+(O?14:0)-W.x),$.right-z),H=this.above[J];if(!Z.strictSide&&(H?Y.top-I-F-W.y<$.top:Y.bottom+I+F+W.y>$.bottom)&&H==$.bottom-Y.bottom>Y.top-$.top)H=this.above[J]=!H;let D=(H?Y.top-$.top:$.bottom-Y.bottom)-F;if(D<I&&X.resize!==!1){if(D<this.view.defaultLineHeight){U.style.top=N6;continue}A8.set(X,I),U.style.height=(I=D)/G+"px"}else if(U.style.height)U.style.height="";let T=H?Y.top-I-F-W.y:Y.bottom+F+W.y,P=_+z;if(X.overlap!==!0){for(let x of K)if(x.left<P&&x.right>_&&x.top<T+I&&x.bottom>T)T=H?x.top-I-2-F:x.bottom+F+2}if(this.position=="absolute")U.style.top=(T-A.parent.top)/G+"px",j8(U,(_-A.parent.left)/B);else U.style.top=T/G+"px",j8(U,_/B);if(O){let x=Y.left+(N?W.x:-W.x)-(_+14-7);O.style.left=x/B+"px"}if(X.overlap!==!0)K.push({left:_,top:T,right:P,bottom:T+I});if(U.classList.toggle("cm-tooltip-above",H),U.classList.toggle("cm-tooltip-below",!H),X.positioned)X.positioned(A.space)}}maybeMeasure(){if(this.manager.tooltips.length){if(this.view.inView)this.view.requestMeasure(this.measureReq);if(this.inView!=this.view.inView){if(this.inView=this.view.inView,!this.inView)for(let A of this.manager.tooltipViews)A.dom.style.top=N6}}}},{eventObservers:{scroll(){this.maybeMeasure()}}});function j8(A,j){let q=parseInt(A.style.left,10);if(isNaN(q)||Math.abs(j-q)>1)A.style.left=j+"px"}var O1=R.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),F1={x:0,y:0},u6=k.define({enables:[m0,O1]}),g7=k.define({combine:(A)=>A.reduce((j,q)=>j.concat(q),[])});class d7{static create(A){return new d7(A)}constructor(A){this.view=A,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new v0(A,g7,(j,q)=>this.createHostedView(j,q),(j)=>j.dom.remove())}createHostedView(A,j){let q=A.create(this.view);if(q.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(q.dom,j?j.dom.nextSibling:this.dom.firstChild),this.mounted&&q.mount)q.mount(this.view);return q}mount(A){for(let j of this.manager.tooltipViews)if(j.mount)j.mount(A);this.mounted=!0}positioned(A){for(let j of this.manager.tooltipViews)if(j.positioned)j.positioned(A)}update(A){this.manager.update(A)}destroy(){var A;for(let j of this.manager.tooltipViews)(A=j.destroy)===null||A===void 0||A.call(j)}passProp(A){let j=void 0;for(let q of this.manager.tooltipViews){let $=q[A];if($!==void 0){if(j===void 0)j=$;else if(j!==$)return}}return j}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}var z1=u6.compute([g7],(A)=>{let j=A.facet(g7);if(j.length===0)return null;return{pos:Math.min(...j.map((q)=>q.pos)),end:Math.max(...j.map((q)=>{var $;return($=q.end)!==null&&$!==void 0?$:q.pos})),create:d7.create,above:j[0].above,arrow:j.some((q)=>q.arrow)}});class PG{constructor(A,j,q,$,B){this.view=A,this.source=j,this.field=q,this.setHover=$,this.hoverTime=B,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:A.dom,time:0},this.checkHover=this.checkHover.bind(this),A.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),A.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){if(this.pending)this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20)}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let A=Date.now()-this.lastMove.time;if(A<this.hoverTime)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-A);else this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:A,lastMove:j}=this,q=A.docView.nearest(j.target);if(!q)return;let $,B=1;if(q instanceof Ej)$=q.posAtStart;else{if($=A.posAtCoords(j),$==null)return;let K=A.coordsAtPos($);if(!K||j.y<K.top||j.y>K.bottom||j.x<K.left-A.defaultCharacterWidth||j.x>K.right+A.defaultCharacterWidth)return;let J=A.bidiSpans(A.state.doc.lineAt($)).find((X)=>X.from<=$&&X.to>=$),Z=J&&J.dir==d.RTL?-1:1;B=j.x<K.left?-Z:Z}let G=this.source(A,$,B);if(G===null||G===void 0?void 0:G.then){let K=this.pending={pos:$};G.then((J)=>{if(this.pending==K){if(this.pending=null,J&&!(Array.isArray(J)&&!J.length))A.dispatch({effects:this.setHover.of(Array.isArray(J)?J:[J])})}},(J)=>YA(A.state,J,"hover tooltip"))}else if(G&&!(Array.isArray(G)&&!G.length))A.dispatch({effects:this.setHover.of(Array.isArray(G)?G:[G])})}get tooltip(){let A=this.view.plugin(m0),j=A?A.manager.tooltips.findIndex((q)=>q.create==d7.create):-1;return j>-1?A.manager.tooltipViews[j]:null}mousemove(A){var j,q;if(this.lastMove={x:A.clientX,y:A.clientY,target:A.target,time:Date.now()},this.hoverTimeout<0)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime);let{active:$,tooltip:B}=this;if($.length&&B&&!I1(B.dom,A)||this.pending){let{pos:G}=$[0]||this.pending,K=(q=(j=$[0])===null||j===void 0?void 0:j.end)!==null&&q!==void 0?q:G;if(G==K?this.view.posAtCoords(this.lastMove)!=G:!W1(this.view,G,K,A.clientX,A.clientY))this.view.dispatch({effects:this.setHover.of([])}),this.pending=null}}mouseleave(A){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:j}=this;if(j.length){let{tooltip:q}=this;if(!(q&&q.dom.contains(A.relatedTarget)))this.view.dispatch({effects:this.setHover.of([])});else this.watchTooltipLeave(q.dom)}}watchTooltipLeave(A){let j=(q)=>{if(A.removeEventListener("mouseleave",j),this.active.length&&!this.view.dom.contains(q.relatedTarget))this.view.dispatch({effects:this.setHover.of([])})};A.addEventListener("mouseleave",j)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}var M7=4;function I1(A,j){let{left:q,right:$,top:B,bottom:G}=A.getBoundingClientRect(),K;if(K=A.querySelector(".cm-tooltip-arrow")){let J=K.getBoundingClientRect();B=Math.min(J.top,B),G=Math.max(J.bottom,G)}return j.clientX>=q-M7&&j.clientX<=$+M7&&j.clientY>=B-M7&&j.clientY<=G+M7}function W1(A,j,q,$,B,G){let K=A.scrollDOM.getBoundingClientRect(),J=A.documentTop+A.documentPadding.top+A.contentHeight;if(K.left>$||K.right<$||K.top>B||Math.min(K.bottom,J)<B)return!1;let Z=A.posAtCoords({x:$,y:B},!1);return Z>=j&&Z<=q}function TG(A,j={}){let q=b.define(),$=o.define({create(){return[]},update(B,G){if(B.length){if(j.hideOnChange&&(G.docChanged||G.selection))B=[];else if(j.hideOn)B=B.filter((K)=>!j.hideOn(G,K));if(G.docChanged){let K=[];for(let J of B){let Z=G.changes.mapPos(J.pos,-1,ZA.TrackDel);if(Z!=null){let X=Object.assign(Object.create(null),J);if(X.pos=Z,X.end!=null)X.end=G.changes.mapPos(X.end);K.push(X)}}B=K}}for(let K of G.effects){if(K.is(q))B=K.value;if(K.is(E1))B=[]}return B},provide:(B)=>g7.from(B)});return{active:$,extension:[$,r.define((B)=>new PG(B,A,$,q,j.hoverTime||300)),z1]}}function u0(A,j){let q=A.plugin(m0);if(!q)return null;let $=q.manager.tooltips.indexOf(j);return $<0?null:q.manager.tooltipViews[$]}var E1=b.define();var q8=k.define({combine(A){let j,q;for(let $ of A)j=j||$.topContainer,q=q||$.bottomContainer;return{topContainer:j,bottomContainer:q}}});function hj(A,j){let q=A.plugin(CG),$=q?q.specs.indexOf(j):-1;return $>-1?q.panels[$]:null}var CG=r.fromClass(class{constructor(A){this.input=A.state.facet(wj),this.specs=this.input.filter((q)=>q),this.panels=this.specs.map((q)=>q(A));let j=A.state.facet(q8);this.top=new L6(A,!0,j.topContainer),this.bottom=new L6(A,!1,j.bottomContainer),this.top.sync(this.panels.filter((q)=>q.top)),this.bottom.sync(this.panels.filter((q)=>!q.top));for(let q of this.panels)if(q.dom.classList.add("cm-panel"),q.mount)q.mount()}update(A){let j=A.state.facet(q8);if(this.top.container!=j.topContainer)this.top.sync([]),this.top=new L6(A.view,!0,j.topContainer);if(this.bottom.container!=j.bottomContainer)this.bottom.sync([]),this.bottom=new L6(A.view,!1,j.bottomContainer);this.top.syncClasses(),this.bottom.syncClasses();let q=A.state.facet(wj);if(q!=this.input){let $=q.filter((Z)=>Z),B=[],G=[],K=[],J=[];for(let Z of $){let X=this.specs.indexOf(Z),U;if(X<0)U=Z(A.view),J.push(U);else if(U=this.panels[X],U.update)U.update(A);B.push(U),(U.top?G:K).push(U)}this.specs=$,this.panels=B,this.top.sync(G),this.bottom.sync(K);for(let Z of J)if(Z.dom.classList.add("cm-panel"),Z.mount)Z.mount()}else for(let $ of this.panels)if($.update)$.update(A)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:(A)=>R.scrollMargins.of((j)=>{let q=j.plugin(A);return q&&{top:q.top.scrollMargin(),bottom:q.bottom.scrollMargin()}})});class L6{constructor(A,j,q){this.view=A,this.top=j,this.container=q,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(A){for(let j of this.panels)if(j.destroy&&A.indexOf(j)<0)j.destroy();this.panels=A,this.syncDOM()}syncDOM(){if(this.panels.length==0){if(this.dom)this.dom.remove(),this.dom=void 0;return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let j=this.container||this.view.dom;j.insertBefore(this.dom,this.top?j.firstChild:null)}let A=this.dom.firstChild;for(let j of this.panels)if(j.dom.parentNode==this.dom){while(A!=j.dom)A=$8(A);A=A.nextSibling}else this.dom.insertBefore(j.dom,A);while(A)A=$8(A)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!this.container||this.classes==this.view.themeClasses)return;for(let A of this.classes.split(" "))if(A)this.container.classList.remove(A);for(let A of(this.classes=this.view.themeClasses).split(" "))if(A)this.container.classList.add(A)}}function $8(A){let j=A.nextSibling;return A.remove(),j}var wj=k.define({enables:CG});class wA extends Aj{compare(A){return this==A||this.constructor==A.constructor&&this.eq(A)}eq(A){return!1}destroy(A){}}wA.prototype.elementClass="";wA.prototype.toDOM=void 0;wA.prototype.mapMode=ZA.TrackBefore;wA.prototype.startSide=wA.prototype.endSide=-1;wA.prototype.point=!0;var b7=k.define(),H1=k.define(),_1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>h.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},C6=k.define();function g0(A){return[yG(),C6.of({..._1,...A})]}var D0=k.define({combine:(A)=>A.some((j)=>j)});function yG(A){let j=[N1];if(A&&A.fixed===!1)j.push(D0.of(!0));return j}var N1=r.fromClass(class{constructor(A){this.view=A,this.domAfter=null,this.prevViewport=A.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=A.state.facet(C6).map((j)=>new R0(A,j)),this.fixed=!A.state.facet(D0);for(let j of this.gutters)if(j.config.side=="after")this.getDOMAfter().appendChild(j.dom);else this.dom.appendChild(j.dom);if(this.fixed)this.dom.style.position="sticky";this.syncGutters(!1),A.scrollDOM.insertBefore(this.dom,A.contentDOM)}getDOMAfter(){if(!this.domAfter)this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter);return this.domAfter}update(A){if(this.updateGutters(A)){let j=this.prevViewport,q=A.view.viewport,$=Math.min(j.to,q.to)-Math.max(j.from,q.from);this.syncGutters($<(q.to-q.from)*0.8)}if(A.geometryChanged){let j=this.view.contentHeight/this.view.scaleY+"px";if(this.dom.style.minHeight=j,this.domAfter)this.domAfter.style.minHeight=j}if(this.view.state.facet(D0)!=!this.fixed){if(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter)this.domAfter.style.position=this.fixed?"sticky":""}this.prevViewport=A.view.viewport}syncGutters(A){let j=this.dom.nextSibling;if(A){if(this.dom.remove(),this.domAfter)this.domAfter.remove()}let q=h.iter(this.view.state.facet(b7),this.view.viewport.from),$=[],B=this.gutters.map((G)=>new bG(G,this.view.viewport,-this.view.documentPadding.top));for(let G of this.view.viewportLineBlocks){if($.length)$=[];if(Array.isArray(G.type)){let K=!0;for(let J of G.type)if(J.type==EA.Text&&K){M0(q,$,J.from);for(let Z of B)Z.line(this.view,J,$);K=!1}else if(J.widget)for(let Z of B)Z.widget(this.view,J)}else if(G.type==EA.Text){M0(q,$,G.from);for(let K of B)K.line(this.view,G,$)}else if(G.widget)for(let K of B)K.widget(this.view,G)}for(let G of B)G.finish();if(A){if(this.view.scrollDOM.insertBefore(this.dom,j),this.domAfter)this.view.scrollDOM.appendChild(this.domAfter)}}updateGutters(A){let j=A.startState.facet(C6),q=A.state.facet(C6),$=A.docChanged||A.heightChanged||A.viewportChanged||!h.eq(A.startState.facet(b7),A.state.facet(b7),A.view.viewport.from,A.view.viewport.to);if(j==q){for(let B of this.gutters)if(B.update(A))$=!0}else{$=!0;let B=[];for(let G of q){let K=j.indexOf(G);if(K<0)B.push(new R0(this.view,G));else this.gutters[K].update(A),B.push(this.gutters[K])}for(let G of this.gutters)if(G.dom.remove(),B.indexOf(G)<0)G.destroy();for(let G of B)if(G.config.side=="after")this.getDOMAfter().appendChild(G.dom);else this.dom.appendChild(G.dom);this.gutters=B}return $}destroy(){for(let A of this.gutters)A.destroy();if(this.dom.remove(),this.domAfter)this.domAfter.remove()}},{provide:(A)=>R.scrollMargins.of((j)=>{let q=j.plugin(A);if(!q||q.gutters.length==0||!q.fixed)return null;let $=q.dom.offsetWidth*j.scaleX,B=q.domAfter?q.domAfter.offsetWidth*j.scaleX:0;return j.textDirection==d.LTR?{left:$,right:B}:{right:$,left:B}})});function B8(A){return Array.isArray(A)?A:[A]}function M0(A,j,q){while(A.value&&A.from<=q){if(A.from==q)j.push(A.value);A.next()}}class bG{constructor(A,j,q){this.gutter=A,this.height=q,this.i=0,this.cursor=h.iter(A.markers,j.from)}addElement(A,j,q){let{gutter:$}=this,B=(j.top-this.height)/A.scaleY,G=j.height/A.scaleY;if(this.i==$.elements.length){let K=new f0(A,G,B,q);$.elements.push(K),$.dom.appendChild(K.dom)}else $.elements[this.i].update(A,G,B,q);this.height=j.bottom,this.i++}line(A,j,q){let $=[];if(M0(this.cursor,$,j.from),q.length)$=$.concat(q);let B=this.gutter.config.lineMarker(A,j,$);if(B)$.unshift(B);let G=this.gutter;if($.length==0&&!G.config.renderEmptyElements)return;this.addElement(A,j,$)}widget(A,j){let q=this.gutter.config.widgetMarker(A,j.widget,j),$=q?[q]:null;for(let B of A.state.facet(H1)){let G=B(A,j.widget,j);if(G)($||($=[])).push(G)}if($)this.addElement(A,j,$)}finish(){let A=this.gutter;while(A.elements.length>this.i){let j=A.elements.pop();A.dom.removeChild(j.dom),j.destroy()}}}class R0{constructor(A,j){this.view=A,this.config=j,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let q in j.domEventHandlers)this.dom.addEventListener(q,($)=>{let B=$.target,G;if(B!=this.dom&&this.dom.contains(B)){while(B.parentNode!=this.dom)B=B.parentNode;let J=B.getBoundingClientRect();G=(J.top+J.bottom)/2}else G=$.clientY;let K=A.lineBlockAtHeight(G-A.documentTop);if(j.domEventHandlers[q](A,K,$))$.preventDefault()});if(this.markers=B8(j.markers(A)),j.initialSpacer)this.spacer=new f0(A,0,0,[j.initialSpacer(A)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none"}update(A){let j=this.markers;if(this.markers=B8(this.config.markers(A.view)),this.spacer&&this.config.updateSpacer){let $=this.config.updateSpacer(this.spacer.markers[0],A);if($!=this.spacer.markers[0])this.spacer.update(A.view,0,0,[$])}let q=A.view.viewport;return!h.eq(this.markers,j,q.from,q.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(A):!1)}destroy(){for(let A of this.elements)A.destroy()}}class f0{constructor(A,j,q,$){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(A,j,q,$)}update(A,j,q,$){if(this.height!=j)this.height=j,this.dom.style.height=j+"px";if(this.above!=q)this.dom.style.marginTop=(this.above=q)?q+"px":"";if(!D1(this.markers,$))this.setMarkers(A,$)}setMarkers(A,j){let q="cm-gutterElement",$=this.dom.firstChild;for(let B=0,G=0;;){let K=G,J=B<j.length?j[B++]:null,Z=!1;if(J){let X=J.elementClass;if(X)q+=" "+X;for(let U=G;U<this.markers.length;U++)if(this.markers[U].compare(J)){K=U,Z=!0;break}}else K=this.markers.length;while(G<K){let X=this.markers[G++];if(X.toDOM){X.destroy($);let U=$.nextSibling;$.remove(),$=U}}if(!J)break;if(J.toDOM)if(Z)$=$.nextSibling;else this.dom.insertBefore(J.toDOM(A),$);if(Z)G++}this.dom.className=q,this.markers=j}destroy(){this.setMarkers(null,[])}}function D1(A,j){if(A.length!=j.length)return!1;for(let q=0;q<A.length;q++)if(!A[q].compare(j[q]))return!1;return!0}var M1=k.define(),R1=k.define(),tj=k.define({combine(A){return FA(A,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(j,q){let $=Object.assign({},j);for(let B in q){let G=$[B],K=q[B];$[B]=G?(J,Z,X)=>G(J,Z,X)||K(J,Z,X):K}return $}})}});class x7 extends wA{constructor(A){super();this.number=A}eq(A){return this.number==A.number}toDOM(){return document.createTextNode(this.number)}}function eq(A,j){return A.state.facet(tj).formatNumber(j,A.state)}var V1=C6.compute([tj],(A)=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(j){return j.state.facet(M1)},lineMarker(j,q,$){if($.some((B)=>B.toDOM))return null;return new x7(eq(j,j.state.doc.lineAt(q.from).number))},widgetMarker:(j,q,$)=>{for(let B of j.state.facet(R1)){let G=B(j,q,$);if(G)return G}return null},lineMarkerChange:(j)=>j.startState.facet(tj)!=j.state.facet(tj),initialSpacer(j){return new x7(eq(j,G8(j.state.doc.lines)))},updateSpacer(j,q){let $=eq(q.view,G8(q.view.state.doc.lines));return $==j.number?j:new x7($)},domEventHandlers:A.facet(tj).domEventHandlers,side:"before"}));function xG(A={}){return[tj.of(A),yG(),V1]}function G8(A){let j=9;while(j<A)j=j*10+9;return j}var k1=new class extends wA{constructor(){super(...arguments);this.elementClass="cm-activeLineGutter"}},L1=b7.compute(["selection"],(A)=>{let j=[],q=-1;for(let $ of A.selection.ranges){let B=A.doc.lineAt($.head).from;if(B>q)q=B,j.push(k1.range(B))}return h.of(j)});function SG(){return L1}var P1=0;class s7{constructor(A,j){this.from=A,this.to=j}}class S{constructor(A={}){this.id=P1++,this.perNode=!!A.perNode,this.deserialize=A.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(A){if(this.perNode)throw new RangeError("Can't add per-node props to node types");if(typeof A!="function")A=PA.match(A);return(j)=>{let q=A(j);return q===void 0?null:[this,q]}}}S.closedBy=new S({deserialize:(A)=>A.split(" ")});S.openedBy=new S({deserialize:(A)=>A.split(" ")});S.group=new S({deserialize:(A)=>A.split(" ")});S.isolate=new S({deserialize:(A)=>{if(A&&A!="rtl"&&A!="ltr"&&A!="auto")throw new RangeError("Invalid value for isolate: "+A);return A||"auto"}});S.contextHash=new S({perNode:!0});S.lookAhead=new S({perNode:!0});S.mounted=new S({perNode:!0});class g6{constructor(A,j,q){this.tree=A,this.overlay=j,this.parser=q}static get(A){return A&&A.props&&A.props[S.mounted.id]}}var T1=Object.create(null);class PA{constructor(A,j,q,$=0){this.name=A,this.props=j,this.id=q,this.flags=$}static define(A){let j=A.props&&A.props.length?Object.create(null):T1,q=(A.top?1:0)|(A.skipped?2:0)|(A.error?4:0)|(A.name==null?8:0),$=new PA(A.name||"",j,A.id,q);if(A.props)for(let B of A.props){if(!Array.isArray(B))B=B($);if(B){if(B[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");j[B[0].id]=B[1]}}return $}prop(A){return this.props[A.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(A){if(typeof A=="string"){if(this.name==A)return!0;let j=this.prop(S.group);return j?j.indexOf(A)>-1:!1}return this.id==A}static match(A){let j=Object.create(null);for(let q in A)for(let $ of q.split(" "))j[$]=A[q];return(q)=>{for(let $=q.prop(S.group),B=-1;B<($?$.length:0);B++){let G=j[B<0?q.name:$[B]];if(G)return G}}}}PA.none=new PA("",Object.create(null),0,8);var c7=new WeakMap,wG=new WeakMap,BA;(function(A){A[A.ExcludeBuffers=1]="ExcludeBuffers",A[A.IncludeAnonymous=2]="IncludeAnonymous",A[A.IgnoreMounts=4]="IgnoreMounts",A[A.IgnoreOverlays=8]="IgnoreOverlays"})(BA||(BA={}));class QA{constructor(A,j,q,$,B){if(this.type=A,this.children=j,this.positions=q,this.length=$,this.props=null,B&&B.length){this.props=Object.create(null);for(let[G,K]of B)this.props[typeof G=="number"?G:G.id]=K}}toString(){let A=g6.get(this);if(A&&!A.overlay)return A.tree.toString();let j="";for(let q of this.children){let $=q.toString();if($){if(j)j+=",";j+=$}}return!this.type.name?j:(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(j.length?"("+j+")":"")}cursor(A=0){return new n7(this.topNode,A)}cursorAt(A,j=0,q=0){let $=c7.get(this)||this.topNode,B=new n7($);return B.moveTo(A,j),c7.set(this,B._tree),B}get topNode(){return new vA(this,0,0,null)}resolve(A,j=0){let q=f6(c7.get(this)||this.topNode,A,j,!1);return c7.set(this,q),q}resolveInner(A,j=0){let q=f6(wG.get(this)||this.topNode,A,j,!0);return wG.set(this,q),q}resolveStack(A,j=0){return C1(this,A,j)}iterate(A){let{enter:j,leave:q,from:$=0,to:B=this.length}=A,G=A.mode||0,K=(G&BA.IncludeAnonymous)>0;for(let J=this.cursor(G|BA.IncludeAnonymous);;){let Z=!1;if(J.from<=B&&J.to>=$&&(!K&&J.type.isAnonymous||j(J)!==!1)){if(J.firstChild())continue;Z=!0}for(;;){if(Z&&q&&(K||!J.type.isAnonymous))q(J);if(J.nextSibling())break;if(!J.parent())return;Z=!0}}}prop(A){return!A.perNode?this.type.prop(A):this.props?this.props[A.id]:void 0}get propValues(){let A=[];if(this.props)for(let j in this.props)A.push([+j,this.props[j]]);return A}balance(A={}){return this.children.length<=8?this:s0(PA.none,this.children,this.positions,0,this.children.length,0,this.length,(j,q,$)=>new QA(this.type,j,q,$,this.propValues),A.makeTree||((j,q,$)=>new QA(PA.none,j,q,$)))}static build(A){return y1(A)}}QA.empty=new QA(PA.none,[],[],0);class l0{constructor(A,j){this.buffer=A,this.index=j}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new l0(this.buffer,this.index)}}class Nj{constructor(A,j,q){this.buffer=A,this.length=j,this.set=q}get type(){return PA.none}toString(){let A=[];for(let j=0;j<this.buffer.length;)A.push(this.childString(j)),j=this.buffer[j+3];return A.join(",")}childString(A){let j=this.buffer[A],q=this.buffer[A+3],$=this.set.types[j],B=$.name;if(/\W/.test(B)&&!$.isError)B=JSON.stringify(B);if(A+=4,q==A)return B;let G=[];while(A<q)G.push(this.childString(A)),A=this.buffer[A+3];return B+"("+G.join(",")+")"}findChild(A,j,q,$,B){let{buffer:G}=this,K=-1;for(let J=A;J!=j;J=G[J+3])if(mG(B,$,G[J+1],G[J+2])){if(K=J,q>0)break}return K}slice(A,j,q){let $=this.buffer,B=new Uint16Array(j-A),G=0;for(let K=A,J=0;K<j;){B[J++]=$[K++],B[J++]=$[K++]-q;let Z=B[J++]=$[K++]-q;B[J++]=$[K++]-A,G=Math.max(G,Z)}return new Nj(B,G,this.set)}}function mG(A,j,q,$){switch(A){case-2:return q<j;case-1:return $>=j&&q<j;case 0:return q<j&&$>j;case 1:return q<=j&&$>j;case 2:return $>j;case 4:return!0}}function f6(A,j,q,$){var B;while(A.from==A.to||(q<1?A.from>=j:A.from>j)||(q>-1?A.to<=j:A.to<j)){let K=!$&&A instanceof vA&&A.index<0?null:A.parent;if(!K)return A;A=K}let G=$?0:BA.IgnoreOverlays;if($){for(let K=A,J=K.parent;J;K=J,J=K.parent)if(K instanceof vA&&K.index<0&&((B=J.enter(j,q,G))===null||B===void 0?void 0:B.from)!=K.from)A=J}for(;;){let K=A.enter(j,q,G);if(!K)return A;A=K}}class d0{cursor(A=0){return new n7(this,A)}getChild(A,j=null,q=null){let $=hG(this,A,j,q);return $.length?$[0]:null}getChildren(A,j=null,q=null){return hG(this,A,j,q)}resolve(A,j=0){return f6(this,A,j,!1)}resolveInner(A,j=0){return f6(this,A,j,!0)}matchContext(A){return p0(this.parent,A)}enterUnfinishedNodesBefore(A){let j=this.childBefore(A),q=this;while(j){let $=j.lastChild;if(!$||$.to!=j.to)break;if($.type.isError&&$.from==$.to)q=j,j=$.prevSibling;else j=$}return q}get node(){return this}get next(){return this.parent}}class vA extends d0{constructor(A,j,q,$){super();this._tree=A,this.from=j,this.index=q,this._parent=$}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(A,j,q,$,B=0){for(let G=this;;){for(let{children:K,positions:J}=G._tree,Z=j>0?K.length:-1;A!=Z;A+=j){let X=K[A],U=J[A]+G.from;if(!mG($,q,U,U+X.length))continue;if(X instanceof Nj){if(B&BA.ExcludeBuffers)continue;let Y=X.findChild(0,X.buffer.length,j,q-U,$);if(Y>-1)return new _j(new uG(G,X,A,U),null,Y)}else if(B&BA.IncludeAnonymous||(!X.type.isAnonymous||c0(X))){let Y;if(!(B&BA.IgnoreMounts)&&(Y=g6.get(X))&&!Y.overlay)return new vA(Y.tree,U,A,G);let Q=new vA(X,U,A,G);return B&BA.IncludeAnonymous||!Q.type.isAnonymous?Q:Q.nextChild(j<0?X.children.length-1:0,j,q,$)}}if(B&BA.IncludeAnonymous||!G.type.isAnonymous)return null;if(G.index>=0)A=G.index+j;else A=j<0?-1:G._parent._tree.children.length;if(G=G._parent,!G)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(A){return this.nextChild(0,1,A,2)}childBefore(A){return this.nextChild(this._tree.children.length-1,-1,A,-2)}enter(A,j,q=0){let $;if(!(q&BA.IgnoreOverlays)&&($=g6.get(this._tree))&&$.overlay){let B=A-this.from;for(let{from:G,to:K}of $.overlay)if((j>0?G<=B:G<B)&&(j<0?K>=B:K>B))return new vA($.tree,$.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,A,j,q)}nextSignificantParent(){let A=this;while(A.type.isAnonymous&&A._parent)A=A._parent;return A}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function hG(A,j,q,$){let B=A.cursor(),G=[];if(!B.firstChild())return G;if(q!=null){for(let K=!1;!K;)if(K=B.type.is(q),!B.nextSibling())return G}for(;;){if($!=null&&B.type.is($))return G;if(B.type.is(j))G.push(B.node);if(!B.nextSibling())return $==null?G:[]}}function p0(A,j,q=j.length-1){for(let $=A;q>=0;$=$.parent){if(!$)return!1;if(!$.type.isAnonymous){if(j[q]&&j[q]!=$.name)return!1;q--}}return!0}class uG{constructor(A,j,q,$){this.parent=A,this.buffer=j,this.index=q,this.start=$}}class _j extends d0{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(A,j,q){super();this.context=A,this._parent=j,this.index=q,this.type=A.buffer.set.types[A.buffer.buffer[q]]}child(A,j,q){let{buffer:$}=this.context,B=$.findChild(this.index+4,$.buffer[this.index+3],A,j-this.context.start,q);return B<0?null:new _j(this.context,this,B)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(A){return this.child(1,A,2)}childBefore(A){return this.child(-1,A,-2)}enter(A,j,q=0){if(q&BA.ExcludeBuffers)return null;let{buffer:$}=this.context,B=$.findChild(this.index+4,$.buffer[this.index+3],j>0?1:-1,A-this.context.start,j);return B<0?null:new _j(this.context,this,B)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(A){return this._parent?null:this.context.parent.nextChild(this.context.index+A,A,0,4)}get nextSibling(){let{buffer:A}=this.context,j=A.buffer[this.index+3];if(j<(this._parent?A.buffer[this._parent.index+3]:A.buffer.length))return new _j(this.context,this._parent,j);return this.externalSibling(1)}get prevSibling(){let{buffer:A}=this.context,j=this._parent?this._parent.index+4:0;if(this.index==j)return this.externalSibling(-1);return new _j(this.context,this._parent,A.findChild(j,this.index,-1,0,4))}get tree(){return null}toTree(){let A=[],j=[],{buffer:q}=this.context,$=this.index+4,B=q.buffer[this.index+3];if(B>$){let G=q.buffer[this.index+1];A.push(q.slice($,B,G)),j.push(0)}return new QA(this.type,A,j,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function gG(A){if(!A.length)return null;let j=0,q=A[0];for(let G=1;G<A.length;G++){let K=A[G];if(K.from>q.from||K.to<q.to)q=K,j=G}let $=q instanceof vA&&q.index<0?null:q.parent,B=A.slice();if($)B[j]=$;else B.splice(j,1);return new fG(B,q)}class fG{constructor(A,j){this.heads=A,this.node=j}get next(){return gG(this.heads)}}function C1(A,j,q){let $=A.resolveInner(j,q),B=null;for(let G=$ instanceof vA?$:$.context.parent;G;G=G.parent)if(G.index<0){let K=G.parent;(B||(B=[$])).push(K.resolve(j,q)),G=K}else{let K=g6.get(G.tree);if(K&&K.overlay&&K.overlay[0].from<=j&&K.overlay[K.overlay.length-1].to>=j){let J=new vA(K.tree,K.overlay[0].from+G.from,-1,G);(B||(B=[$])).push(f6(J,j,q,!1))}}return B?gG(B):$}class n7{get name(){return this.type.name}constructor(A,j=0){if(this.mode=j,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,A instanceof vA)this.yieldNode(A);else{this._tree=A.context.parent,this.buffer=A.context;for(let q=A._parent;q;q=q._parent)this.stack.unshift(q.index);this.bufferNode=A,this.yieldBuf(A.index)}}yieldNode(A){if(!A)return!1;return this._tree=A,this.type=A.type,this.from=A.from,this.to=A.to,!0}yieldBuf(A,j){this.index=A;let{start:q,buffer:$}=this.buffer;return this.type=j||$.set.types[$.buffer[A]],this.from=q+$.buffer[A+1],this.to=q+$.buffer[A+2],!0}yield(A){if(!A)return!1;if(A instanceof vA)return this.buffer=null,this.yieldNode(A);return this.buffer=A.context,this.yieldBuf(A.index,A.type)}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(A,j,q){if(!this.buffer)return this.yield(this._tree.nextChild(A<0?this._tree._tree.children.length-1:0,A,j,q,this.mode));let{buffer:$}=this.buffer,B=$.findChild(this.index+4,$.buffer[this.index+3],A,j-this.buffer.start,q);if(B<0)return!1;return this.stack.push(this.index),this.yieldBuf(B)}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(A){return this.enterChild(1,A,2)}childBefore(A){return this.enterChild(-1,A,-2)}enter(A,j,q=this.mode){if(!this.buffer)return this.yield(this._tree.enter(A,j,q));return q&BA.ExcludeBuffers?!1:this.enterChild(1,A,j)}parent(){if(!this.buffer)return this.yieldNode(this.mode&BA.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let A=this.mode&BA.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(A)}sibling(A){if(!this.buffer)return!this._tree._parent?!1:this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+A,A,0,4,this.mode));let{buffer:j}=this.buffer,q=this.stack.length-1;if(A<0){let $=q<0?0:this.stack[q]+4;if(this.index!=$)return this.yieldBuf(j.findChild($,this.index,-1,0,4))}else{let $=j.buffer[this.index+3];if($<(q<0?j.buffer.length:j.buffer[this.stack[q]+3]))return this.yieldBuf($)}return q<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+A,A,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(A){let j,q,{buffer:$}=this;if($){if(A>0){if(this.index<$.buffer.buffer.length)return!1}else for(let B=0;B<this.index;B++)if($.buffer.buffer[B+3]<this.index)return!1;({index:j,parent:q}=$)}else({index:j,_parent:q}=this._tree);for(;q;{index:j,_parent:q}=q)if(j>-1)for(let B=j+A,G=A<0?-1:q._tree.children.length;B!=G;B+=A){let K=q._tree.children[B];if(this.mode&BA.IncludeAnonymous||K instanceof Nj||!K.type.isAnonymous||c0(K))return!1}return!0}move(A,j){if(j&&this.enterChild(A,0,4))return!0;for(;;){if(this.sibling(A))return!0;if(this.atLastNode(A)||!this.parent())return!1}}next(A=!0){return this.move(1,A)}prev(A=!0){return this.move(-1,A)}moveTo(A,j=0){while(this.from==this.to||(j<1?this.from>=A:this.from>A)||(j>-1?this.to<=A:this.to<A))if(!this.parent())break;while(this.enterChild(1,A,j));return this}get node(){if(!this.buffer)return this._tree;let A=this.bufferNode,j=null,q=0;if(A&&A.context==this.buffer)A:for(let $=this.index,B=this.stack.length;B>=0;){for(let G=A;G;G=G._parent)if(G.index==$){if($==this.index)return G;j=G,q=B+1;break A}$=this.stack[--B]}for(let $=q;$<this.stack.length;$++)j=new _j(this.buffer,j,this.stack[$]);return this.bufferNode=new _j(this.buffer,j,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(A,j){for(let q=0;;){let $=!1;if(this.type.isAnonymous||A(this)!==!1){if(this.firstChild()){q++;continue}if(!this.type.isAnonymous)$=!0}for(;;){if($&&j)j(this);if($=this.type.isAnonymous,!q)return;if(this.nextSibling())break;this.parent(),q--,$=!0}}}matchContext(A){if(!this.buffer)return p0(this.node.parent,A);let{buffer:j}=this.buffer,{types:q}=j.set;for(let $=A.length-1,B=this.stack.length-1;$>=0;B--){if(B<0)return p0(this._tree,A,$);let G=q[j.buffer[this.stack[B]]];if(!G.isAnonymous){if(A[$]&&A[$]!=G.name)return!1;$--}}return!0}}function c0(A){return A.children.some((j)=>j instanceof Nj||!j.type.isAnonymous||c0(j))}function y1(A){var j;let{buffer:q,nodeSet:$,maxBufferLength:B=1024,reused:G=[],minRepeatType:K=$.types.length}=A,J=Array.isArray(q)?new l0(q,q.length):q,Z=$.types,X=0,U=0;function Y(D,T,P,x,u,c){let{id:w,start:y,end:p,size:g}=J,n=U,WA=X;while(g<0)if(J.next(),g==-1){let Xj=G[w];P.push(Xj),x.push(y-D);return}else if(g==-3){X=w;return}else if(g==-4){U=w;return}else throw new RangeError(`Unrecognized record size: ${g}`);let MA=Z[w],oA,JA,yA=y-D;if(p-y<=B&&(JA=I(J.pos-T,u))){let Xj=new Uint16Array(JA.size-JA.skip),bA=J.pos-JA.size,tA=Xj.length;while(J.pos>bA)tA=W(JA.start,Xj,tA);oA=new Nj(Xj,p-JA.start,$),yA=JA.start-D}else{let Xj=J.pos-g;J.next();let bA=[],tA=[],Pj=w>=K?w:-1,lj=0,G7=p;while(J.pos>Xj)if(Pj>=0&&J.id==Pj&&J.size>=0){if(J.end<=G7-B)F(bA,tA,y,lj,J.end,G7,Pj,n,WA),lj=bA.length,G7=J.end;J.next()}else if(c>2500)Q(y,Xj,bA,tA);else Y(y,Xj,bA,tA,Pj,c+1);if(Pj>=0&&lj>0&&lj<bA.length)F(bA,tA,y,lj,y,G7,Pj,n,WA);if(bA.reverse(),tA.reverse(),Pj>-1&&lj>0){let u$=O(MA,WA);oA=s0(MA,bA,tA,0,bA.length,0,p-y,u$,u$)}else oA=z(MA,bA,tA,p-y,n-p,WA)}P.push(oA),x.push(yA)}function Q(D,T,P,x){let u=[],c=0,w=-1;while(J.pos>T){let{id:y,start:p,end:g,size:n}=J;if(n>4)J.next();else if(w>-1&&p<w)break;else{if(w<0)w=g-B;u.push(y,p,g),c++,J.next()}}if(c){let y=new Uint16Array(c*4),p=u[u.length-2];for(let g=u.length-3,n=0;g>=0;g-=3)y[n++]=u[g],y[n++]=u[g+1]-p,y[n++]=u[g+2]-p,y[n++]=n;P.push(new Nj(y,u[2]-p,$)),x.push(p-D)}}function O(D,T){return(P,x,u)=>{let c=0,w=P.length-1,y,p;if(w>=0&&(y=P[w])instanceof QA){if(!w&&y.type==D&&y.length==u)return y;if(p=y.prop(S.lookAhead))c=x[w]+y.length+p}return z(D,P,x,u,c,T)}}function F(D,T,P,x,u,c,w,y,p){let g=[],n=[];while(D.length>x)g.push(D.pop()),n.push(T.pop()+P-u);D.push(z($.types[w],g,n,c-u,y-c,p)),T.push(u-P)}function z(D,T,P,x,u,c,w){if(c){let y=[S.contextHash,c];w=w?[y].concat(w):[y]}if(u>25){let y=[S.lookAhead,u];w=w?[y].concat(w):[y]}return new QA(D,T,P,x,w)}function I(D,T){let P=J.fork(),x=0,u=0,c=0,w=P.end-B,y={size:0,start:0,skip:0};A:for(let p=P.pos-D;P.pos>p;){let g=P.size;if(P.id==T&&g>=0){y.size=x,y.start=u,y.skip=c,c+=4,x+=4,P.next();continue}let n=P.pos-g;if(g<0||n<p||P.start<w)break;let WA=P.id>=K?4:0,MA=P.start;P.next();while(P.pos>n){if(P.size<0)if(P.size==-3)WA+=4;else break A;else if(P.id>=K)WA+=4;P.next()}u=MA,x+=g,c+=WA}if(T<0||x==D)y.size=x,y.start=u,y.skip=c;return y.size>4?y:void 0}function W(D,T,P){let{id:x,start:u,end:c,size:w}=J;if(J.next(),w>=0&&x<K){let y=P;if(w>4){let p=J.pos-(w-4);while(J.pos>p)P=W(D,T,P)}T[--P]=y,T[--P]=c-D,T[--P]=u-D,T[--P]=x}else if(w==-3)X=x;else if(w==-4)U=x;return P}let N=[],_=[];while(J.pos>0)Y(A.start||0,A.bufferStart||0,N,_,-1,0);let H=(j=A.length)!==null&&j!==void 0?j:N.length?_[0]+N[0].length:0;return new QA(Z[A.topID],N.reverse(),_.reverse(),H)}var vG=new WeakMap;function i7(A,j){if(!A.isAnonymous||j instanceof Nj||j.type!=A)return 1;let q=vG.get(j);if(q==null){q=1;for(let $ of j.children){if($.type!=A||!($ instanceof QA)){q=1;break}q+=i7(A,$)}vG.set(j,q)}return q}function s0(A,j,q,$,B,G,K,J,Z){let X=0;for(let F=$;F<B;F++)X+=i7(A,j[F]);let U=Math.ceil(X*1.5/8),Y=[],Q=[];function O(F,z,I,W,N){for(let _=I;_<W;){let H=_,D=z[_],T=i7(A,F[_]);_++;for(;_<W;_++){let P=i7(A,F[_]);if(T+P>=U)break;T+=P}if(_==H+1){if(T>U){let P=F[H];O(P.children,P.positions,0,P.children.length,z[H]+N);continue}Y.push(F[H])}else{let P=z[_-1]+F[_-1].length-D;Y.push(s0(A,F,z,H,_,D,P,null,Z))}Q.push(D+N-G)}}return O(j,q,$,B,0),(J||Z)(Y,Q,K)}class Dj{constructor(A,j,q,$,B=!1,G=!1){this.from=A,this.to=j,this.tree=q,this.offset=$,this.open=(B?1:0)|(G?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(A,j=[],q=!1){let $=[new Dj(0,A.length,A,0,!1,q)];for(let B of j)if(B.to>A.length)$.push(B);return $}static applyChanges(A,j,q=128){if(!j.length)return A;let $=[],B=1,G=A.length?A[0]:null;for(let K=0,J=0,Z=0;;K++){let X=K<j.length?j[K]:null,U=X?X.fromA:1e9;if(U-J>=q)while(G&&G.from<U){let Y=G;if(J>=Y.from||U<=Y.to||Z){let Q=Math.max(Y.from,J)-Z,O=Math.min(Y.to,U)-Z;Y=Q>=O?null:new Dj(Q,O,Y.tree,Y.offset+Z,K>0,!!X)}if(Y)$.push(Y);if(G.to>U)break;G=B<A.length?A[B++]:null}if(!X)break;J=X.toA,Z=X.toA-X.toB}return $}}class i0{startParse(A,j,q){if(typeof A=="string")A=new pG(A);return q=!q?[new s7(0,A.length)]:q.length?q.map(($)=>new s7($.from,$.to)):[new s7(0,0)],this.createParse(A,j||[],q)}parse(A,j,q){let $=this.startParse(A,j,q);for(;;){let B=$.advance();if(B)return B}}}class pG{constructor(A){this.string=A}get length(){return this.string.length}chunk(A){return this.string.slice(A)}get lineChunks(){return!1}read(A,j){return this.string.slice(A,j)}}var E2=new S({perNode:!0});var b1=0;class mA{constructor(A,j,q,$){this.name=A,this.set=j,this.base=q,this.modified=$,this.id=b1++}toString(){let{name:A}=this;for(let j of this.modified)if(j.name)A=`${j.name}(${A})`;return A}static define(A,j){let q=typeof A=="string"?A:"?";if(A instanceof mA)j=A;if(j===null||j===void 0?void 0:j.base)throw new Error("Can not derive from a modified tag");let $=new mA(q,[],null,[]);if($.set.push($),j)for(let B of j.set)$.set.push(B);return $}static defineModifier(A){let j=new t7(A);return(q)=>{if(q.modified.indexOf(j)>-1)return q;return t7.get(q.base||q,q.modified.concat(j).sort(($,B)=>$.id-B.id))}}}var x1=0;class t7{constructor(A){this.name=A,this.instances=[],this.id=x1++}static get(A,j){if(!j.length)return A;let q=j[0].instances.find((K)=>K.base==A&&S1(j,K.modified));if(q)return q;let $=[],B=new mA(A.name,$,A,j);for(let K of j)K.instances.push(B);let G=w1(j);for(let K of A.set)if(!K.modified.length)for(let J of G)$.push(t7.get(K,J));return B}}function S1(A,j){return A.length==j.length&&A.every((q,$)=>q==j[$])}function w1(A){let j=[[]];for(let q=0;q<A.length;q++)for(let $=0,B=j.length;$<B;$++)j.push(j[$].concat(A[q]));return j.sort((q,$)=>$.length-q.length)}function cG(A){let j=Object.create(null);for(let q in A){let $=A[q];if(!Array.isArray($))$=[$];for(let B of q.split(" "))if(B){let G=[],K=2,J=B;for(let Y=0;;){if(J=="..."&&Y>0&&Y+3==B.length){K=1;break}let Q=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(J);if(!Q)throw new RangeError("Invalid path: "+B);if(G.push(Q[0]=="*"?"":Q[0][0]=='"'?JSON.parse(Q[0]):Q[0]),Y+=Q[0].length,Y==B.length)break;let O=B[Y++];if(Y==B.length&&O=="!"){K=0;break}if(O!="/")throw new RangeError("Invalid path: "+B);J=B.slice(Y)}let Z=G.length-1,X=G[Z];if(!X)throw new RangeError("Invalid path: "+B);let U=new l6($,K,Z>0?G.slice(0,Z):null);j[X]=U.sort(j[X])}}return sG.add(j)}var sG=new S;class l6{constructor(A,j,q,$){this.tags=A,this.mode=j,this.context=q,this.next=$}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(A){if(!A||A.depth<this.depth)return this.next=A,this;return A.next=this.sort(A.next),A}get depth(){return this.context?this.context.length:0}}l6.empty=new l6([],2,null);function r0(A,j){let q=Object.create(null);for(let G of A)if(!Array.isArray(G.tag))q[G.tag.id]=G.class;else for(let K of G.tag)q[K.id]=G.class;let{scope:$,all:B=null}=j||{};return{style:(G)=>{let K=B;for(let J of G)for(let Z of J.set){let X=q[Z.id];if(X){K=K?K+" "+X:X;break}}return K},scope:$}}function h1(A,j){let q=null;for(let $ of A){let B=$.style(j);if(B)q=q?q+" "+B:B}return q}function iG(A,j,q,$=0,B=A.length){let G=new nG($,Array.isArray(j)?j:[j],q);G.highlightRange(A.cursor(),$,B,"",G.highlighters),G.flush(B)}class nG{constructor(A,j,q){this.at=A,this.highlighters=j,this.span=q,this.class=""}startSpan(A,j){if(j!=this.class){if(this.flush(A),A>this.at)this.at=A;this.class=j}}flush(A){if(A>this.at&&this.class)this.span(this.at,A,this.class)}highlightRange(A,j,q,$,B){let{type:G,from:K,to:J}=A;if(K>=q||J<=j)return;if(G.isTop)B=this.highlighters.filter((Q)=>!Q.scope||Q.scope(G));let Z=$,X=v1(A)||l6.empty,U=h1(B,X.tags);if(U){if(Z)Z+=" ";if(Z+=U,X.mode==1)$+=($?" ":"")+U}if(this.startSpan(Math.max(j,K),Z),X.opaque)return;let Y=A.tree&&A.tree.prop(S.mounted);if(Y&&Y.overlay){let Q=A.node.enter(Y.overlay[0].from+K,1),O=this.highlighters.filter((z)=>!z.scope||z.scope(Y.tree.type)),F=A.firstChild();for(let z=0,I=K;;z++){let W=z<Y.overlay.length?Y.overlay[z]:null,N=W?W.from+K:J,_=Math.max(j,I),H=Math.min(q,N);if(_<H&&F){while(A.from<H)if(this.highlightRange(A,_,H,$,B),this.startSpan(Math.min(H,A.to),Z),A.to>=N||!A.nextSibling())break}if(!W||N>q)break;if(I=W.to+K,I>j)this.highlightRange(Q.cursor(),Math.max(j,W.from+K),Math.min(q,I),"",O),this.startSpan(Math.min(q,I),Z)}if(F)A.parent()}else if(A.firstChild()){if(Y)$="";do{if(A.to<=j)continue;if(A.from>=q)break;this.highlightRange(A,j,q,$,B),this.startSpan(Math.min(q,A.to),Z)}while(A.nextSibling());A.parent()}}}function v1(A){let j=A.type.prop(sG);while(j&&j.context&&!A.matchContext(j.context))j=j.next;return j||null}var M=mA.define,a7=M(),Mj=M(),lG=M(Mj),dG=M(Mj),Rj=M(),r7=M(Rj),n0=M(Rj),Kj=M(),vj=M(Kj),Bj=M(),Gj=M(),a0=M(),p6=M(a0),o7=M(),V={comment:a7,lineComment:M(a7),blockComment:M(a7),docComment:M(a7),name:Mj,variableName:M(Mj),typeName:lG,tagName:M(lG),propertyName:dG,attributeName:M(dG),className:M(Mj),labelName:M(Mj),namespace:M(Mj),macroName:M(Mj),literal:Rj,string:r7,docString:M(r7),character:M(r7),attributeValue:M(r7),number:n0,integer:M(n0),float:M(n0),bool:M(Rj),regexp:M(Rj),escape:M(Rj),color:M(Rj),url:M(Rj),keyword:Bj,self:M(Bj),null:M(Bj),atom:M(Bj),unit:M(Bj),modifier:M(Bj),operatorKeyword:M(Bj),controlKeyword:M(Bj),definitionKeyword:M(Bj),moduleKeyword:M(Bj),operator:Gj,derefOperator:M(Gj),arithmeticOperator:M(Gj),logicOperator:M(Gj),bitwiseOperator:M(Gj),compareOperator:M(Gj),updateOperator:M(Gj),definitionOperator:M(Gj),typeOperator:M(Gj),controlOperator:M(Gj),punctuation:a0,separator:M(a0),bracket:p6,angleBracket:M(p6),squareBracket:M(p6),paren:M(p6),brace:M(p6),content:Kj,heading:vj,heading1:M(vj),heading2:M(vj),heading3:M(vj),heading4:M(vj),heading5:M(vj),heading6:M(vj),contentSeparator:M(Kj),list:M(Kj),quote:M(Kj),emphasis:M(Kj),strong:M(Kj),link:M(Kj),monospace:M(Kj),strikethrough:M(Kj),inserted:M(),deleted:M(),changed:M(),invalid:M(),meta:o7,documentMeta:M(o7),annotation:M(o7),processingInstruction:M(o7),definition:mA.defineModifier("definition"),constant:mA.defineModifier("constant"),function:mA.defineModifier("function"),standard:mA.defineModifier("standard"),local:mA.defineModifier("local"),special:mA.defineModifier("special")};for(let A in V){let j=V[A];if(j instanceof mA)j.name=A}var N2=r0([{tag:V.link,class:"tok-link"},{tag:V.heading,class:"tok-heading"},{tag:V.emphasis,class:"tok-emphasis"},{tag:V.strong,class:"tok-strong"},{tag:V.keyword,class:"tok-keyword"},{tag:V.atom,class:"tok-atom"},{tag:V.bool,class:"tok-bool"},{tag:V.url,class:"tok-url"},{tag:V.labelName,class:"tok-labelName"},{tag:V.inserted,class:"tok-inserted"},{tag:V.deleted,class:"tok-deleted"},{tag:V.literal,class:"tok-literal"},{tag:V.string,class:"tok-string"},{tag:V.number,class:"tok-number"},{tag:[V.regexp,V.escape,V.special(V.string)],class:"tok-string2"},{tag:V.variableName,class:"tok-variableName"},{tag:V.local(V.variableName),class:"tok-variableName tok-local"},{tag:V.definition(V.variableName),class:"tok-variableName tok-definition"},{tag:V.special(V.variableName),class:"tok-variableName2"},{tag:V.definition(V.propertyName),class:"tok-propertyName tok-definition"},{tag:V.typeName,class:"tok-typeName"},{tag:V.namespace,class:"tok-namespace"},{tag:V.className,class:"tok-className"},{tag:V.macroName,class:"tok-macroName"},{tag:V.propertyName,class:"tok-propertyName"},{tag:V.operator,class:"tok-operator"},{tag:V.comment,class:"tok-comment"},{tag:V.meta,class:"tok-meta"},{tag:V.invalid,class:"tok-invalid"},{tag:V.punctuation,class:"tok-punctuation"}]);var o0,c6=new S;var m1=new S;class iA{constructor(A,j,q=[],$=""){if(this.data=A,this.name=$,!v.prototype.hasOwnProperty("tree"))Object.defineProperty(v.prototype,"tree",{get(){return GA(this)}});this.parser=j,this.extension=[Vj.of(this),v.languageData.of((B,G,K)=>{let J=aG(B,G,K),Z=J.type.prop(c6);if(!Z)return[];let X=B.facet(Z),U=J.type.prop(m1);if(U){let Y=J.resolve(G-J.from,K);for(let Q of U)if(Q.test(Y,B)){let O=B.facet(Q.facet);return Q.type=="replace"?O:O.concat(X)}}return X})].concat(q)}isActiveAt(A,j,q=-1){return aG(A,j,q).type.prop(c6)==this.data}findRegions(A){let j=A.facet(Vj);if((j===null||j===void 0?void 0:j.data)==this.data)return[{from:0,to:A.doc.length}];if(!j||!j.allowsNesting)return[];let q=[],$=(B,G)=>{if(B.prop(c6)==this.data){q.push({from:G,to:G+B.length});return}let K=B.prop(S.mounted);if(K){if(K.tree.prop(c6)==this.data){if(K.overlay)for(let J of K.overlay)q.push({from:J.from+G,to:J.to+G});else q.push({from:G,to:G+B.length});return}else if(K.overlay){let J=q.length;if($(K.tree,K.overlay[0].from+G),q.length>J)return}}for(let J=0;J<B.children.length;J++){let Z=B.children[J];if(Z instanceof QA)$(Z,B.positions[J]+G)}};return $(GA(A),0),q}get allowsNesting(){return!0}}iA.setState=b.define();function aG(A,j,q){let $=A.facet(Vj),B=GA(A).topNode;if(!$||$.allowsNesting){for(let G=B;G;G=G.enter(j,q,BA.ExcludeBuffers))if(G.type.isTop)B=G}return B}function GA(A){let j=A.field(iA.state,!1);return j?j.tree:QA.empty}class q5{constructor(A){this.doc=A,this.cursorPos=0,this.string="",this.cursor=A.iter()}get length(){return this.doc.length}syncTo(A){return this.string=this.cursor.next(A-this.cursorPos).value,this.cursorPos=A+this.string.length,this.cursorPos-this.string.length}chunk(A){return this.syncTo(A),this.string}get lineChunks(){return!0}read(A,j){let q=this.cursorPos-this.string.length;if(A<q||j>=this.cursorPos)return this.doc.sliceString(A,j);else return this.string.slice(A-q,j-q)}}var d6=null;class Aq{constructor(A,j,q=[],$,B,G,K,J){this.parser=A,this.state=j,this.fragments=q,this.tree=$,this.treeLen=B,this.viewport=G,this.skipped=K,this.scheduleOn=J,this.parse=null,this.tempSkipped=[]}static create(A,j,q){return new Aq(A,j,[],QA.empty,0,q,[],null)}startParse(){return this.parser.startParse(new q5(this.state.doc),this.fragments)}work(A,j){if(j!=null&&j>=this.state.doc.length)j=void 0;if(this.tree!=QA.empty&&this.isDone(j!==null&&j!==void 0?j:this.state.doc.length))return this.takeTree(),!0;return this.withContext(()=>{var q;if(typeof A=="number"){let $=Date.now()+A;A=()=>Date.now()>$}if(!this.parse)this.parse=this.startParse();if(j!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>j)&&j<this.state.doc.length)this.parse.stopAt(j);for(;;){let $=this.parse.advance();if($)if(this.fragments=this.withoutTempSkipped(Dj.addTree($,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(q=this.parse.stoppedAt)!==null&&q!==void 0?q:this.state.doc.length,this.tree=$,this.parse=null,this.treeLen<(j!==null&&j!==void 0?j:this.state.doc.length))this.parse=this.startParse();else return!0;if(A())return!1}})}takeTree(){let A,j;if(this.parse&&(A=this.parse.parsedPos)>=this.treeLen){if(this.parse.stoppedAt==null||this.parse.stoppedAt>A)this.parse.stopAt(A);this.withContext(()=>{while(!(j=this.parse.advance()));}),this.treeLen=A,this.tree=j,this.fragments=this.withoutTempSkipped(Dj.addTree(this.tree,this.fragments,!0)),this.parse=null}}withContext(A){let j=d6;d6=this;try{return A()}finally{d6=j}}withoutTempSkipped(A){for(let j;j=this.tempSkipped.pop();)A=rG(A,j.from,j.to);return A}changes(A,j){let{fragments:q,tree:$,treeLen:B,viewport:G,skipped:K}=this;if(this.takeTree(),!A.empty){let J=[];if(A.iterChangedRanges((Z,X,U,Y)=>J.push({fromA:Z,toA:X,fromB:U,toB:Y})),q=Dj.applyChanges(q,J),$=QA.empty,B=0,G={from:A.mapPos(G.from,-1),to:A.mapPos(G.to,1)},this.skipped.length){K=[];for(let Z of this.skipped){let X=A.mapPos(Z.from,1),U=A.mapPos(Z.to,-1);if(X<U)K.push({from:X,to:U})}}}return new Aq(this.parser,j,q,$,B,G,K,this.scheduleOn)}updateViewport(A){if(this.viewport.from==A.from&&this.viewport.to==A.to)return!1;this.viewport=A;let j=this.skipped.length;for(let q=0;q<this.skipped.length;q++){let{from:$,to:B}=this.skipped[q];if($<A.to&&B>A.from)this.fragments=rG(this.fragments,$,B),this.skipped.splice(q--,1)}if(this.skipped.length>=j)return!1;return this.reset(),!0}reset(){if(this.parse)this.takeTree(),this.parse=null}skipUntilInView(A,j){this.skipped.push({from:A,to:j})}static getSkippingParser(A){return new class extends i0{createParse(j,q,$){let B=$[0].from,G=$[$.length-1].to;return{parsedPos:B,advance(){let J=d6;if(J){for(let Z of $)J.tempSkipped.push(Z);if(A)J.scheduleOn=J.scheduleOn?Promise.all([J.scheduleOn,A]):A}return this.parsedPos=G,new QA(PA.none,[],[],G-B)},stoppedAt:null,stopAt(){}}}}}isDone(A){A=Math.min(A,this.state.doc.length);let j=this.fragments;return this.treeLen>=A&&j.length&&j[0].from==0&&j[0].to>=A}static get(){return d6}}function rG(A,j,q){return Dj.applyChanges(A,[{fromA:j,toA:q,fromB:j,toB:q}])}class $6{constructor(A){this.context=A,this.tree=A.tree}apply(A){if(!A.docChanged&&this.tree==this.context.tree)return this;let j=this.context.changes(A.changes,A.state),q=this.context.treeLen==A.startState.doc.length?void 0:Math.max(A.changes.mapPos(this.context.treeLen),j.viewport.to);if(!j.work(20,q))j.takeTree();return new $6(j)}static init(A){let j=Math.min(3000,A.doc.length),q=Aq.create(A.facet(Vj).parser,A,{from:0,to:j});if(!q.work(20,j))q.takeTree();return new $6(q)}}iA.state=o.define({create:$6.init,update(A,j){for(let q of j.effects)if(q.is(iA.setState))return q.value;if(j.startState.facet(Vj)!=j.state.facet(Vj))return $6.init(j.state);return A.apply(j)}});var $5=(A)=>{let j=setTimeout(()=>A(),500);return()=>clearTimeout(j)};if(typeof requestIdleCallback!="undefined")$5=(A)=>{let j=-1,q=setTimeout(()=>{j=requestIdleCallback(A,{timeout:400})},100);return()=>j<0?clearTimeout(q):cancelIdleCallback(j)};var t0=typeof navigator!="undefined"&&((o0=navigator.scheduling)===null||o0===void 0?void 0:o0.isInputPending)?()=>navigator.scheduling.isInputPending():null,u1=r.fromClass(class A{constructor(j){this.view=j,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(j){let q=this.view.state.field(iA.state).context;if(q.updateViewport(j.view.viewport)||this.view.viewport.to>q.treeLen)this.scheduleWork();if(j.docChanged||j.selectionSet){if(this.view.hasFocus)this.chunkBudget+=50;this.scheduleWork()}this.checkAsyncSchedule(q)}scheduleWork(){if(this.working)return;let{state:j}=this.view,q=j.field(iA.state);if(q.tree!=q.context.tree||!q.context.isDone(j.doc.length))this.working=$5(this.work)}work(j){this.working=null;let q=Date.now();if(this.chunkEnd<q&&(this.chunkEnd<0||this.view.hasFocus))this.chunkEnd=q+30000,this.chunkBudget=3000;if(this.chunkBudget<=0)return;let{state:$,viewport:{to:B}}=this.view,G=$.field(iA.state);if(G.tree==G.context.tree&&G.context.isDone(B+1e5))return;let K=Date.now()+Math.min(this.chunkBudget,100,j&&!t0?Math.max(25,j.timeRemaining()-5):1e9),J=G.context.treeLen<B&&$.doc.length>B+1000,Z=G.context.work(()=>{return t0&&t0()||Date.now()>K},B+(J?0:1e5));if(this.chunkBudget-=Date.now()-q,Z||this.chunkBudget<=0)G.context.takeTree(),this.view.dispatch({effects:iA.setState.of(new $6(G.context))});if(this.chunkBudget>0&&!(Z&&!J))this.scheduleWork();this.checkAsyncSchedule(G.context)}checkAsyncSchedule(j){if(j.scheduleOn)this.workScheduled++,j.scheduleOn.then(()=>this.scheduleWork()).catch((q)=>YA(this.view.state,q)).then(()=>this.workScheduled--),j.scheduleOn=null}destroy(){if(this.working)this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Vj=k.define({combine(A){return A.length?A[0]:null},enables:(A)=>[iA.state,u1,R.contentAttributes.compute([A],(j)=>{let q=j.facet(A);return q&&q.name?{"data-language":q.name}:{}})]});var g1=k.define(),s6=k.define({combine:(A)=>{if(!A.length)return"  ";let j=A[0];if(!j||/\S/.test(j)||Array.from(j).some((q)=>q!=j[0]))throw new Error("Invalid indent unit: "+JSON.stringify(A[0]));return j}});function i6(A){let j=A.facet(s6);return j.charCodeAt(0)==9?A.tabSize*j.length:j.length}function B6(A,j){let q="",$=A.tabSize,B=A.facet(s6)[0];if(B=="\t"){while(j>=$)q+="\t",j-=$;B=" "}for(let G=0;G<j;G++)q+=B;return q}function $q(A,j){if(A instanceof v)A=new G6(A);for(let $ of A.state.facet(g1)){let B=$(A,j);if(B!==void 0)return B}let q=GA(A.state);return q.length>=j?p1(A,q,j):null}class G6{constructor(A,j={}){this.state=A,this.options=j,this.unit=i6(A)}lineAt(A,j=1){let q=this.state.doc.lineAt(A),{simulateBreak:$,simulateDoubleBreak:B}=this.options;if($!=null&&$>=q.from&&$<=q.to)if(B&&$==A)return{text:"",from:A};else if(j<0?$<A:$<=A)return{text:q.text.slice($-q.from),from:$};else return{text:q.text.slice(0,$-q.from),from:q.from};return q}textAfterPos(A,j=1){if(this.options.simulateDoubleBreak&&A==this.options.simulateBreak)return"";let{text:q,from:$}=this.lineAt(A,j);return q.slice(A-$,Math.min(q.length,A+100-$))}column(A,j=1){let{text:q,from:$}=this.lineAt(A,j),B=this.countColumn(q,A-$),G=this.options.overrideIndentation?this.options.overrideIndentation($):-1;if(G>-1)B+=G-this.countColumn(q,q.search(/\S|$/));return B}countColumn(A,j=A.length){return Uj(A,this.state.tabSize,j)}lineIndent(A,j=1){let{text:q,from:$}=this.lineAt(A,j),B=this.options.overrideIndentation;if(B){let G=B($);if(G>-1)return G}return this.countColumn(q,q.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}var f1=new S;function p1(A,j,q){let $=j.resolveStack(q),B=j.resolveInner(q,-1).resolve(q,0).enterUnfinishedNodesBefore(q);if(B!=$.node){let G=[];for(let K=B;K&&!(K.from<$.node.from||K.to>$.node.to||K.from==$.node.from&&K.type==$.node.type);K=K.parent)G.push(K);for(let K=G.length-1;K>=0;K--)$={node:G[K],next:$}}return B5($,A,q)}function B5(A,j,q){for(let $=A;$;$=$.next){let B=d1($.node);if(B)return B(B$.create(j,q,$))}return 0}function l1(A){return A.pos==A.options.simulateBreak&&A.options.simulateDoubleBreak}function d1(A){let j=A.type.prop(f1);if(j)return j;let q=A.firstChild,$;if(q&&($=q.type.prop(S.closedBy))){let B=A.lastChild,G=B&&$.indexOf(B.name)>-1;return(K)=>n1(K,!0,1,void 0,G&&!l1(K)?B.from:void 0)}return A.parent==null?c1:null}function c1(){return 0}class B$ extends G6{constructor(A,j,q){super(A.state,A.options);this.base=A,this.pos=j,this.context=q}get node(){return this.context.node}static create(A,j,q){return new B$(A,j,q)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(A){let j=this.state.doc.lineAt(A.from);for(;;){let q=A.resolve(j.from);while(q.parent&&q.parent.from==q.from)q=q.parent;if(s1(q,A))break;j=this.state.doc.lineAt(q.from)}return this.lineIndent(j.from)}continue(){return B5(this.context.next,this.base,this.pos)}}function s1(A,j){for(let q=j;q;q=q.parent)if(A==q)return!0;return!1}function i1(A){let j=A.node,q=j.childAfter(j.from),$=j.lastChild;if(!q)return null;let B=A.options.simulateBreak,G=A.state.doc.lineAt(q.from),K=B==null||B<=G.from?G.to:Math.min(G.to,B);for(let J=q.to;;){let Z=j.childAfter(J);if(!Z||Z==$)return null;if(!Z.type.isSkipped){if(Z.from>=K)return null;let X=/^ */.exec(G.text.slice(q.to-G.from))[0].length;return{from:q.from,to:q.to+X}}J=Z.to}}function n1(A,j,q,$,B){let G=A.textAfter,K=G.match(/^\s*/)[0].length,J=$&&G.slice(K,K+$.length)==$||B==A.pos+K,Z=j?i1(A):null;if(Z)return J?A.column(Z.from):A.column(Z.to);return A.baseIndent+(J?0:A.unit*q)}var a1=200;function G5(){return v.transactionFilter.of((A)=>{if(!A.docChanged||!A.isUserEvent("input.type")&&!A.isUserEvent("input.complete"))return A;let j=A.startState.languageDataAt("indentOnInput",A.startState.selection.main.head);if(!j.length)return A;let q=A.newDoc,{head:$}=A.newSelection.main,B=q.lineAt($);if($>B.from+a1)return A;let G=q.sliceString(B.from,$);if(!j.some((X)=>X.test(G)))return A;let{state:K}=A,J=-1,Z=[];for(let{head:X}of K.selection.ranges){let U=K.doc.lineAt(X);if(U.from==J)continue;J=U.from;let Y=$q(K,U.from);if(Y==null)continue;let Q=/^\s*/.exec(U.text)[0],O=B6(K,Y);if(Q!=O)Z.push({from:U.from,to:U.from+Q.length,insert:O})}return Z.length?[A,{changes:Z,sequential:!0}]:A})}var r1=k.define(),o1=new S;function t1(A,j,q){let $=GA(A);if($.length<q)return null;let B=$.resolveStack(q,1),G=null;for(let K=B;K;K=K.next){let J=K.node;if(J.to<=q||J.from>q)continue;if(G&&J.from<j)break;let Z=J.type.prop(o1);if(Z&&(J.to<$.length-50||$.length==A.doc.length||!e1(J))){let X=Z(J,A);if(X&&X.from<=q&&X.from>=j&&X.to>q)G=X}}return G}function e1(A){let j=A.lastChild;return j&&j.to==A.to&&j.type.isError}function jq(A,j,q){for(let $ of A.facet(r1)){let B=$(A,j,q);if(B)return B}return t1(A,j,q)}function K5(A,j){let q=j.mapPos(A.from,1),$=j.mapPos(A.to,-1);return q>=$?void 0:{from:q,to:$}}var Bq=b.define({map:K5}),n6=b.define({map:K5});function J5(A){let j=[];for(let{head:q}of A.state.selection.ranges){if(j.some(($)=>$.from<=q&&$.to>=q))continue;j.push(A.lineBlockAt(q))}return j}var mj=o.define({create(){return C.none},update(A,j){if(j.isUserEvent("delete"))j.changes.iterChangedRanges((q,$)=>A=oG(A,q,$));A=A.map(j.changes);for(let q of j.effects)if(q.is(Bq)&&!A3(A,q.value.from,q.value.to)){let{preparePlaceholder:$}=j.state.facet(G$),B=!$?tG:C.replace({widget:new O5($(j.state,q.value))});A=A.update({add:[B.range(q.value.from,q.value.to)]})}else if(q.is(n6))A=A.update({filter:($,B)=>q.value.from!=$||q.value.to!=B,filterFrom:q.value.from,filterTo:q.value.to});if(j.selection)A=oG(A,j.selection.main.head);return A},provide:(A)=>R.decorations.from(A),toJSON(A,j){let q=[];return A.between(0,j.doc.length,($,B)=>{q.push($,B)}),q},fromJSON(A){if(!Array.isArray(A)||A.length%2)throw new RangeError("Invalid JSON for fold state");let j=[];for(let q=0;q<A.length;){let $=A[q++],B=A[q++];if(typeof $!="number"||typeof B!="number")throw new RangeError("Invalid JSON for fold state");j.push(tG.range($,B))}return C.set(j,!0)}});function oG(A,j,q=j){let $=!1;return A.between(j,q,(B,G)=>{if(B<q&&G>j)$=!0}),!$?A:A.update({filterFrom:j,filterTo:q,filter:(B,G)=>B>=q||G<=j})}function qq(A,j,q){var $;let B=null;return($=A.field(mj,!1))===null||$===void 0||$.between(j,q,(G,K)=>{if(!B||B.from>G)B={from:G,to:K}}),B}function A3(A,j,q){let $=!1;return A.between(j,j,(B,G)=>{if(B==j&&G==q)$=!0}),$}function Z5(A,j){return A.field(mj,!1)?j:j.concat(b.appendConfig.of(Y5()))}var j3=(A)=>{for(let j of J5(A)){let q=jq(A.state,j.from,j.to);if(q)return A.dispatch({effects:Z5(A.state,[Bq.of(q),X5(A,q)])}),!0}return!1},q3=(A)=>{if(!A.state.field(mj,!1))return!1;let j=[];for(let q of J5(A)){let $=qq(A.state,q.from,q.to);if($)j.push(n6.of($),X5(A,$,!1))}if(j.length)A.dispatch({effects:j});return j.length>0};function X5(A,j,q=!0){let $=A.state.doc.lineAt(j.from).number,B=A.state.doc.lineAt(j.to).number;return R.announce.of(`${A.state.phrase(q?"Folded lines":"Unfolded lines")} ${$} ${A.state.phrase("to")} ${B}.`)}var $3=(A)=>{let{state:j}=A,q=[];for(let $=0;$<j.doc.length;){let B=A.lineBlockAt($),G=jq(j,B.from,B.to);if(G)q.push(Bq.of(G));$=(G?A.lineBlockAt(G.to):B).to+1}if(q.length)A.dispatch({effects:Z5(A.state,q)});return!!q.length},B3=(A)=>{let j=A.state.field(mj,!1);if(!j||!j.size)return!1;let q=[];return j.between(0,A.state.doc.length,($,B)=>{q.push(n6.of({from:$,to:B}))}),A.dispatch({effects:q}),!0};var U5=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:j3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:q3},{key:"Ctrl-Alt-[",run:$3},{key:"Ctrl-Alt-]",run:B3}],G3={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},G$=k.define({combine(A){return FA(A,G3)}});function Y5(A){let j=[mj,J3];if(A)j.push(G$.of(A));return j}function Q5(A,j){let{state:q}=A,$=q.facet(G$),B=(K)=>{let J=A.lineBlockAt(A.posAtDOM(K.target)),Z=qq(A.state,J.from,J.to);if(Z)A.dispatch({effects:n6.of(Z)});K.preventDefault()};if($.placeholderDOM)return $.placeholderDOM(A,B,j);let G=document.createElement("span");return G.textContent=$.placeholderText,G.setAttribute("aria-label",q.phrase("folded code")),G.title=q.phrase("unfold"),G.className="cm-foldPlaceholder",G.onclick=B,G}var tG=C.replace({widget:new class extends hA{toDOM(A){return Q5(A,null)}}});class O5 extends hA{constructor(A){super();this.value=A}eq(A){return this.value==A.value}toDOM(A){return Q5(A,this.value)}}var K3={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class e7 extends wA{constructor(A,j){super();this.config=A,this.open=j}eq(A){return this.config==A.config&&this.open==A.open}toDOM(A){if(this.config.markerDOM)return this.config.markerDOM(this.open);let j=document.createElement("span");return j.textContent=this.open?this.config.openText:this.config.closedText,j.title=A.state.phrase(this.open?"Fold line":"Unfold line"),j}}function F5(A={}){let j={...K3,...A},q=new e7(j,!0),$=new e7(j,!1),B=r.fromClass(class{constructor(K){this.from=K.viewport.from,this.markers=this.buildMarkers(K)}update(K){if(K.docChanged||K.viewportChanged||K.startState.facet(Vj)!=K.state.facet(Vj)||K.startState.field(mj,!1)!=K.state.field(mj,!1)||GA(K.startState)!=GA(K.state)||j.foldingChanged(K))this.markers=this.buildMarkers(K.view)}buildMarkers(K){let J=new RA;for(let Z of K.viewportLineBlocks){let X=qq(K.state,Z.from,Z.to)?$:jq(K.state,Z.from,Z.to)?q:null;if(X)J.add(Z.from,Z.from,X)}return J.finish()}}),{domEventHandlers:G}=j;return[B,g0({class:"cm-foldGutter",markers(K){var J;return((J=K.plugin(B))===null||J===void 0?void 0:J.markers)||h.empty},initialSpacer(){return new e7(j,!1)},domEventHandlers:{...G,click:(K,J,Z)=>{if(G.click&&G.click(K,J,Z))return!0;let X=qq(K.state,J.from,J.to);if(X)return K.dispatch({effects:n6.of(X)}),!0;let U=jq(K.state,J.from,J.to);if(U)return K.dispatch({effects:Bq.of(U)}),!0;return!1}}}),Y5()]}var J3=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Gq{constructor(A,j){this.specs=A;let q;function $(K){let J=dA.newName();return(q||(q=Object.create(null)))["."+J]=K,J}let B=typeof j.all=="string"?j.all:j.all?$(j.all):void 0,G=j.scope;this.scope=G instanceof iA?(K)=>K.prop(c6)==G.data:G?(K)=>K==G:void 0,this.style=r0(A.map((K)=>({tag:K.tag,class:K.class||$(Object.assign({},K,{tag:null}))})),{all:B}).style,this.module=q?new dA(q):null,this.themeType=j.themeType}static define(A,j){return new Gq(A,j||{})}}var j$=k.define(),z5=k.define({combine(A){return A.length?[A[0]]:null}});function e0(A){let j=A.facet(j$);return j.length?j:A.facet(z5)}function I5(A,j){let q=[Z3],$;if(A instanceof Gq){if(A.module)q.push(R.styleModule.of(A.module));$=A.themeType}if(j===null||j===void 0?void 0:j.fallback)q.push(z5.of(A));else if($)q.push(j$.computeN([R.darkTheme],(B)=>{return B.facet(R.darkTheme)==($=="dark")?[A]:[]}));else q.push(j$.of(A));return q}class W5{constructor(A){this.markCache=Object.create(null),this.tree=GA(A.state),this.decorations=this.buildDeco(A,e0(A.state)),this.decoratedTo=A.viewport.to}update(A){let j=GA(A.state),q=e0(A.state),$=q!=e0(A.startState),{viewport:B}=A.view,G=A.changes.mapPos(this.decoratedTo,1);if(j.length<B.to&&!$&&j.type==this.tree.type&&G>=B.to)this.decorations=this.decorations.map(A.changes),this.decoratedTo=G;else if(j!=this.tree||A.viewportChanged||$)this.tree=j,this.decorations=this.buildDeco(A.view,q),this.decoratedTo=B.to}buildDeco(A,j){if(!j||!this.tree.length)return C.none;let q=new RA;for(let{from:$,to:B}of A.visibleRanges)iG(this.tree,j,(G,K,J)=>{q.add(G,K,this.markCache[J]||(this.markCache[J]=C.mark({class:J})))},$,B);return q.finish()}}var Z3=lA.high(r.fromClass(W5,{decorations:(A)=>A.decorations})),E5=Gq.define([{tag:V.meta,color:"#404740"},{tag:V.link,textDecoration:"underline"},{tag:V.heading,textDecoration:"underline",fontWeight:"bold"},{tag:V.emphasis,fontStyle:"italic"},{tag:V.strong,fontWeight:"bold"},{tag:V.strikethrough,textDecoration:"line-through"},{tag:V.keyword,color:"#708"},{tag:[V.atom,V.bool,V.url,V.contentSeparator,V.labelName],color:"#219"},{tag:[V.literal,V.inserted],color:"#164"},{tag:[V.string,V.deleted],color:"#a11"},{tag:[V.regexp,V.escape,V.special(V.string)],color:"#e40"},{tag:V.definition(V.variableName),color:"#00f"},{tag:V.local(V.variableName),color:"#30a"},{tag:[V.typeName,V.namespace],color:"#085"},{tag:V.className,color:"#167"},{tag:[V.special(V.variableName),V.macroName],color:"#256"},{tag:V.definition(V.propertyName),color:"#00c"},{tag:V.comment,color:"#940"},{tag:V.invalid,color:"#f00"}]),X3=R.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),H5=1e4,_5="()[]{}",N5=k.define({combine(A){return FA(A,{afterCursor:!0,brackets:_5,maxScanDistance:H5,renderMatch:Q3})}}),U3=C.mark({class:"cm-matchingBracket"}),Y3=C.mark({class:"cm-nonmatchingBracket"});function Q3(A){let j=[],q=A.matched?U3:Y3;if(j.push(q.range(A.start.from,A.start.to)),A.end)j.push(q.range(A.end.from,A.end.to));return j}var O3=o.define({create(){return C.none},update(A,j){if(!j.docChanged&&!j.selection)return A;let q=[],$=j.state.facet(N5);for(let B of j.state.selection.ranges){if(!B.empty)continue;let G=nA(j.state,B.head,-1,$)||B.head>0&&nA(j.state,B.head-1,1,$)||$.afterCursor&&(nA(j.state,B.head,1,$)||B.head<j.state.doc.length&&nA(j.state,B.head+1,-1,$));if(G)q=q.concat($.renderMatch(G,j.state))}return C.set(q,!0)},provide:(A)=>R.decorations.from(A)}),F3=[O3,X3];function D5(A={}){return[N5.of(A),F3]}var z3=new S;function q$(A,j,q){let $=A.prop(j<0?S.openedBy:S.closedBy);if($)return $;if(A.name.length==1){let B=q.indexOf(A.name);if(B>-1&&B%2==(j<0?1:0))return[q[B+j]]}return null}function $$(A){let j=A.type.prop(z3);return j?j(A.node):A}function nA(A,j,q,$={}){let B=$.maxScanDistance||H5,G=$.brackets||_5,K=GA(A),J=K.resolveInner(j,q);for(let Z=J;Z;Z=Z.parent){let X=q$(Z.type,q,G);if(X&&Z.from<Z.to){let U=$$(Z);if(U&&(q>0?j>=U.from&&j<U.to:j>U.from&&j<=U.to))return I3(A,j,q,Z,U,X,G)}}return W3(A,j,q,K,J.type,B,G)}function I3(A,j,q,$,B,G,K){let J=$.parent,Z={from:B.from,to:B.to},X=0,U=J===null||J===void 0?void 0:J.cursor();if(U&&(q<0?U.childBefore($.from):U.childAfter($.to)))do if(q<0?U.to<=$.from:U.from>=$.to){if(X==0&&G.indexOf(U.type.name)>-1&&U.from<U.to){let Y=$$(U);return{start:Z,end:Y?{from:Y.from,to:Y.to}:void 0,matched:!0}}else if(q$(U.type,q,K))X++;else if(q$(U.type,-q,K)){if(X==0){let Y=$$(U);return{start:Z,end:Y&&Y.from<Y.to?{from:Y.from,to:Y.to}:void 0,matched:!1}}X--}}while(q<0?U.prevSibling():U.nextSibling());return{start:Z,matched:!1}}function W3(A,j,q,$,B,G,K){let J=q<0?A.sliceDoc(j-1,j):A.sliceDoc(j,j+1),Z=K.indexOf(J);if(Z<0||Z%2==0!=q>0)return null;let X={from:q<0?j-1:j,to:q>0?j+1:j},U=A.doc.iterRange(j,q>0?A.doc.length:0),Y=0;for(let Q=0;!U.next().done&&Q<=G;){let O=U.value;if(q<0)Q+=O.length;let F=j+Q*q;for(let z=q>0?0:O.length-1,I=q>0?O.length:-1;z!=I;z+=q){let W=K.indexOf(O[z]);if(W<0||$.resolveInner(F+z,1).type!=B)continue;if(W%2==0==q>0)Y++;else if(Y==1)return{start:X,end:{from:F+z,to:F+z+1},matched:W>>1==Z>>1};else Y--}if(q>0)Q+=O.length}return U.done?{start:X,matched:!1}:null}var E3=Object.create(null),eG=[PA.none];var A5=[],j5=Object.create(null),H3=Object.create(null);for(let[A,j]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])H3[A]=_3(E3,j);function A$(A,j){if(A5.indexOf(A)>-1)return;A5.push(A),console.warn(j)}function _3(A,j){let q=[];for(let J of j.split(" ")){let Z=[];for(let X of J.split(".")){let U=A[X]||V[X];if(!U)A$(X,`Unknown highlighting tag ${X}`);else if(typeof U=="function")if(!Z.length)A$(X,`Modifier ${X} used at start of tag`);else Z=Z.map(U);else if(Z.length)A$(X,`Tag ${X} used as modifier`);else Z=Array.isArray(U)?U:[U]}for(let X of Z)q.push(X)}if(!q.length)return 0;let $=j.replace(/ /g,"_"),B=$+" "+q.map((J)=>J.id),G=j5[B];if(G)return G.id;let K=j5[B]=PA.define({id:eG.length,name:$,props:[cG({[$]:q})]});return eG.push(K),K.id}var T2={rtl:C.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:d.RTL}),ltr:C.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:d.LTR}),auto:C.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var N3=(A)=>{let{state:j}=A,q=j.doc.lineAt(j.selection.main.from),$=Q$(A.state,q.from);return $.line?D3(A):$.block?R3(A):!1};function Y$(A,j){return({state:q,dispatch:$})=>{if(q.readOnly)return!1;let B=A(j,q);if(!B)return!1;return $(q.update(B)),!0}}var D3=Y$(L3,0);var M3=Y$(y5,0);var R3=Y$((A,j)=>y5(A,j,k3(j)),0);function Q$(A,j){let q=A.languageDataAt("commentTokens",j,1);return q.length?q[0]:{}}var a6=50;function V3(A,{open:j,close:q},$,B){let G=A.sliceDoc($-a6,$),K=A.sliceDoc(B,B+a6),J=/\s*$/.exec(G)[0].length,Z=/^\s*/.exec(K)[0].length,X=G.length-J;if(G.slice(X-j.length,X)==j&&K.slice(Z,Z+q.length)==q)return{open:{pos:$-J,margin:J&&1},close:{pos:B+Z,margin:Z&&1}};let U,Y;if(B-$<=2*a6)U=Y=A.sliceDoc($,B);else U=A.sliceDoc($,$+a6),Y=A.sliceDoc(B-a6,B);let Q=/^\s*/.exec(U)[0].length,O=/\s*$/.exec(Y)[0].length,F=Y.length-O-q.length;if(U.slice(Q,Q+j.length)==j&&Y.slice(F,F+q.length)==q)return{open:{pos:$+Q+j.length,margin:/\s/.test(U.charAt(Q+j.length))?1:0},close:{pos:B-O-q.length,margin:/\s/.test(Y.charAt(F-1))?1:0}};return null}function k3(A){let j=[];for(let q of A.selection.ranges){let $=A.doc.lineAt(q.from),B=q.to<=$.to?$:A.doc.lineAt(q.to);if(B.from>$.from&&B.from==q.to)B=q.to==$.to+1?$:A.doc.lineAt(q.to-1);let G=j.length-1;if(G>=0&&j[G].to>$.from)j[G].to=B.to;else j.push({from:$.from+/^\s*/.exec($.text)[0].length,to:B.to})}return j}function y5(A,j,q=j.selection.ranges){let $=q.map((G)=>Q$(j,G.from).block);if(!$.every((G)=>G))return null;let B=q.map((G,K)=>V3(j,$[K],G.from,G.to));if(A!=2&&!B.every((G)=>G))return{changes:j.changes(q.map((G,K)=>{if(B[K])return[];return[{from:G.from,insert:$[K].open+" "},{from:G.to,insert:" "+$[K].close}]}))};else if(A!=1&&B.some((G)=>G)){let G=[];for(let K=0,J;K<B.length;K++)if(J=B[K]){let Z=$[K],{open:X,close:U}=J;G.push({from:X.pos-Z.open.length,to:X.pos+X.margin},{from:U.pos-U.margin,to:U.pos+Z.close.length})}return{changes:G}}return null}function L3(A,j,q=j.selection.ranges){let $=[],B=-1;for(let{from:G,to:K}of q){let J=$.length,Z=1e9,X=Q$(j,G).line;if(!X)continue;for(let U=G;U<=K;){let Y=j.doc.lineAt(U);if(Y.from>B&&(G==K||K>Y.from)){B=Y.from;let Q=/^\s*/.exec(Y.text)[0].length,O=Q==Y.length,F=Y.text.slice(Q,Q+X.length)==X?Q:-1;if(Q<Y.text.length&&Q<Z)Z=Q;$.push({line:Y,comment:F,token:X,indent:Q,empty:O,single:!1})}U=Y.to+1}if(Z<1e9){for(let U=J;U<$.length;U++)if($[U].indent<$[U].line.text.length)$[U].indent=Z}if($.length==J+1)$[J].single=!0}if(A!=2&&$.some((G)=>G.comment<0&&(!G.empty||G.single))){let G=[];for(let{line:J,token:Z,indent:X,empty:U,single:Y}of $)if(Y||!U)G.push({from:J.from+X,insert:Z+" "});let K=j.changes(G);return{changes:K,selection:j.selection.map(K,1)}}else if(A!=1&&$.some((G)=>G.comment>=0)){let G=[];for(let{line:K,comment:J,token:Z}of $)if(J>=0){let X=K.from+J,U=X+Z.length;if(K.text[U-K.from]==" ")U++;G.push({from:X,to:U})}return{changes:G}}return null}var J$=kA.define(),P3=kA.define(),T3=k.define(),b5=k.define({combine(A){return FA(A,{minDepth:100,newGroupDelay:500,joinToEvent:(j,q)=>q},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(j,q)=>($,B)=>j($,B)||q($,B)})}}),x5=o.define({create(){return Jj.empty},update(A,j){let q=j.state.facet(b5),$=j.annotation(J$);if($){let Z=NA.fromTransaction(j,$.selection),X=$.side,U=X==0?A.undone:A.done;if(Z)U=Jq(U,U.length,q.minDepth,Z);else U=v5(U,j.startState.selection);return new Jj(X==0?$.rest:U,X==0?U:$.rest)}let B=j.annotation(P3);if(B=="full"||B=="before")A=A.isolate();if(j.annotation(e.addToHistory)===!1)return!j.changes.empty?A.addMapping(j.changes.desc):A;let G=NA.fromTransaction(j),K=j.annotation(e.time),J=j.annotation(e.userEvent);if(G)A=A.addChanges(G,K,J,q,j);else if(j.selection)A=A.addSelection(j.startState.selection,K,J,q.newGroupDelay);if(B=="full"||B=="after")A=A.isolate();return A},toJSON(A){return{done:A.done.map((j)=>j.toJSON()),undone:A.undone.map((j)=>j.toJSON())}},fromJSON(A){return new Jj(A.done.map(NA.fromJSON),A.undone.map(NA.fromJSON))}});function S5(A={}){return[x5,b5.of(A),R.domEventHandlers({beforeinput(j,q){let $=j.inputType=="historyUndo"?w5:j.inputType=="historyRedo"?Z$:null;if(!$)return!1;return j.preventDefault(),$(q)}})]}function Zq(A,j){return function({state:q,dispatch:$}){if(!j&&q.readOnly)return!1;let B=q.field(x5,!1);if(!B)return!1;let G=B.pop(A,q,j);if(!G)return!1;return $(G),!0}}var w5=Zq(0,!1),Z$=Zq(1,!1),C3=Zq(0,!0),y3=Zq(1,!0);class NA{constructor(A,j,q,$,B){this.changes=A,this.effects=j,this.mapped=q,this.startSelection=$,this.selectionsAfter=B}setSelAfter(A){return new NA(this.changes,this.effects,this.mapped,this.startSelection,A)}toJSON(){var A,j,q;return{changes:(A=this.changes)===null||A===void 0?void 0:A.toJSON(),mapped:(j=this.mapped)===null||j===void 0?void 0:j.toJSON(),startSelection:(q=this.startSelection)===null||q===void 0?void 0:q.toJSON(),selectionsAfter:this.selectionsAfter.map(($)=>$.toJSON())}}static fromJSON(A){return new NA(A.changes&&jA.fromJSON(A.changes),[],A.mapped&&pA.fromJSON(A.mapped),A.startSelection&&E.fromJSON(A.startSelection),A.selectionsAfter.map(E.fromJSON))}static fromTransaction(A,j){let q=uA;for(let $ of A.startState.facet(T3)){let B=$(A);if(B.length)q=q.concat(B)}if(!q.length&&A.changes.empty)return null;return new NA(A.changes.invert(A.startState.doc),q,void 0,j||A.startState.selection,uA)}static selection(A){return new NA(void 0,uA,void 0,void 0,A)}}function Jq(A,j,q,$){let B=j+1>q+20?j-q-1:0,G=A.slice(B,j);return G.push($),G}function b3(A,j){let q=[],$=!1;return A.iterChangedRanges((B,G)=>q.push(B,G)),j.iterChangedRanges((B,G,K,J)=>{for(let Z=0;Z<q.length;){let X=q[Z++],U=q[Z++];if(J>=X&&K<=U)$=!0}}),$}function x3(A,j){return A.ranges.length==j.ranges.length&&A.ranges.filter((q,$)=>q.empty!=j.ranges[$].empty).length===0}function h5(A,j){return!A.length?j:!j.length?A:A.concat(j)}var uA=[],S3=200;function v5(A,j){if(!A.length)return[NA.selection([j])];else{let q=A[A.length-1],$=q.selectionsAfter.slice(Math.max(0,q.selectionsAfter.length-S3));if($.length&&$[$.length-1].eq(j))return A;return $.push(j),Jq(A,A.length-1,1e9,q.setSelAfter($))}}function w3(A){let j=A[A.length-1],q=A.slice();return q[A.length-1]=j.setSelAfter(j.selectionsAfter.slice(0,j.selectionsAfter.length-1)),q}function K$(A,j){if(!A.length)return A;let q=A.length,$=uA;while(q){let B=h3(A[q-1],j,$);if(B.changes&&!B.changes.empty||B.effects.length){let G=A.slice(0,q);return G[q-1]=B,G}else j=B.mapped,q--,$=B.selectionsAfter}return $.length?[NA.selection($)]:uA}function h3(A,j,q){let $=h5(A.selectionsAfter.length?A.selectionsAfter.map((J)=>J.map(j)):uA,q);if(!A.changes)return NA.selection($);let B=A.changes.map(j),G=j.mapDesc(A.changes,!0),K=A.mapped?A.mapped.composeDesc(G):G;return new NA(B,b.mapEffects(A.effects,j),K,A.startSelection.map(G),$)}var v3=/^(input\.type|delete)($|\.)/;class Jj{constructor(A,j,q=0,$=void 0){this.done=A,this.undone=j,this.prevTime=q,this.prevUserEvent=$}isolate(){return this.prevTime?new Jj(this.done,this.undone):this}addChanges(A,j,q,$,B){let G=this.done,K=G[G.length-1];if(K&&K.changes&&!K.changes.empty&&A.changes&&(!q||v3.test(q))&&(!K.selectionsAfter.length&&j-this.prevTime<$.newGroupDelay&&$.joinToEvent(B,b3(K.changes,A.changes))||q=="input.type.compose"))G=Jq(G,G.length-1,$.minDepth,new NA(A.changes.compose(K.changes),h5(b.mapEffects(A.effects,K.changes),K.effects),K.mapped,K.startSelection,uA));else G=Jq(G,G.length,$.minDepth,A);return new Jj(G,uA,j,q)}addSelection(A,j,q,$){let B=this.done.length?this.done[this.done.length-1].selectionsAfter:uA;if(B.length>0&&j-this.prevTime<$&&q==this.prevUserEvent&&q&&/^select($|\.)/.test(q)&&x3(B[B.length-1],A))return this;return new Jj(v5(this.done,A),this.undone,j,q)}addMapping(A){return new Jj(K$(this.done,A),K$(this.undone,A),this.prevTime,this.prevUserEvent)}pop(A,j,q){let $=A==0?this.done:this.undone;if($.length==0)return null;let B=$[$.length-1],G=B.selectionsAfter[0]||j.selection;if(q&&B.selectionsAfter.length)return j.update({selection:B.selectionsAfter[B.selectionsAfter.length-1],annotations:J$.of({side:A,rest:w3($),selection:G}),userEvent:A==0?"select.undo":"select.redo",scrollIntoView:!0});else if(!B.changes)return null;else{let K=$.length==1?uA:$.slice(0,$.length-1);if(B.mapped)K=K$(K,B.mapped);return j.update({changes:B.changes,selection:B.startSelection,effects:B.effects,annotations:J$.of({side:A,rest:K,selection:G}),filter:!1,userEvent:A==0?"undo":"redo",scrollIntoView:!0})}}}Jj.empty=new Jj(uA,uA);var m5=[{key:"Mod-z",run:w5,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Z$,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Z$,preventDefault:!0},{key:"Mod-u",run:C3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:y3,preventDefault:!0}];function K6(A,j){return E.create(A.ranges.map(j),A.mainIndex)}function Zj(A,j){return A.update({selection:j,scrollIntoView:!0,userEvent:"select"})}function aA({state:A,dispatch:j},q){let $=K6(A.selection,q);if($.eq(A.selection,!0))return!1;return j(Zj(A,$)),!0}function Xq(A,j){return E.cursor(j?A.to:A.from)}function u5(A,j){return aA(A,(q)=>q.empty?A.moveByChar(q,j):Xq(q,j))}function IA(A){return A.textDirectionAt(A.state.selection.main.head)==d.LTR}var g5=(A)=>u5(A,!IA(A)),f5=(A)=>u5(A,IA(A));function p5(A,j){return aA(A,(q)=>q.empty?A.moveByGroup(q,j):Xq(q,j))}var m3=(A)=>p5(A,!IA(A)),u3=(A)=>p5(A,IA(A));var m2=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function g3(A,j,q){if(j.type.prop(q))return!0;let $=j.to-j.from;return $&&($>2||/[^\s,.;:]/.test(A.sliceDoc(j.from,j.to)))||j.firstChild}function Uq(A,j,q){let $=GA(A).resolveInner(j.head),B=q?S.closedBy:S.openedBy;for(let Z=j.head;;){let X=q?$.childAfter(Z):$.childBefore(Z);if(!X)break;if(g3(A,X,B))$=X;else Z=q?X.to:X.from}let G=$.type.prop(B),K,J;if(G&&(K=q?nA(A,$.from,1):nA(A,$.to,-1))&&K.matched)J=q?K.end.to:K.end.from;else J=q?$.to:$.from;return E.cursor(J,q?-1:1)}var f3=(A)=>aA(A,(j)=>Uq(A.state,j,!IA(A))),p3=(A)=>aA(A,(j)=>Uq(A.state,j,IA(A)));function l5(A,j){return aA(A,(q)=>{if(!q.empty)return Xq(q,j);let $=A.moveVertically(q,j);return $.head!=q.head?$:A.moveToLineBoundary(q,j)})}var d5=(A)=>l5(A,!1),c5=(A)=>l5(A,!0);function s5(A){let j=A.scrollDOM.clientHeight<A.scrollDOM.scrollHeight-2,q=0,$=0,B;if(j){for(let G of A.state.facet(R.scrollMargins)){let K=G(A);if(K===null||K===void 0?void 0:K.top)q=Math.max(K===null||K===void 0?void 0:K.top,q);if(K===null||K===void 0?void 0:K.bottom)$=Math.max(K===null||K===void 0?void 0:K.bottom,$)}B=A.scrollDOM.clientHeight-q-$}else B=(A.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:q,marginBottom:$,selfScroll:j,height:Math.max(A.defaultLineHeight,B-5)}}function i5(A,j){let q=s5(A),{state:$}=A,B=K6($.selection,(K)=>{return K.empty?A.moveVertically(K,j,q.height):Xq(K,j)});if(B.eq($.selection))return!1;let G;if(q.selfScroll){let K=A.coordsAtPos($.selection.main.head),J=A.scrollDOM.getBoundingClientRect(),Z=J.top+q.marginTop,X=J.bottom-q.marginBottom;if(K&&K.top>Z&&K.bottom<X)G=R.scrollIntoView(B.main.head,{y:"start",yMargin:K.top-Z})}return A.dispatch(Zj($,B),{effects:G}),!0}var M5=(A)=>i5(A,!1),X$=(A)=>i5(A,!0);function kj(A,j,q){let $=A.lineBlockAt(j.head),B=A.moveToLineBoundary(j,q);if(B.head==j.head&&B.head!=(q?$.to:$.from))B=A.moveToLineBoundary(j,q,!1);if(!q&&B.head==$.from&&$.length){let G=/^\s*/.exec(A.state.sliceDoc($.from,Math.min($.from+100,$.to)))[0].length;if(G&&j.head!=$.from+G)B=E.cursor($.from+G)}return B}var l3=(A)=>aA(A,(j)=>kj(A,j,!0)),d3=(A)=>aA(A,(j)=>kj(A,j,!1)),c3=(A)=>aA(A,(j)=>kj(A,j,!IA(A))),s3=(A)=>aA(A,(j)=>kj(A,j,IA(A))),i3=(A)=>aA(A,(j)=>E.cursor(A.lineBlockAt(j.head).from,1)),n3=(A)=>aA(A,(j)=>E.cursor(A.lineBlockAt(j.head).to,-1));function a3(A,j,q){let $=!1,B=K6(A.selection,(G)=>{let K=nA(A,G.head,-1)||nA(A,G.head,1)||G.head>0&&nA(A,G.head-1,1)||G.head<A.doc.length&&nA(A,G.head+1,-1);if(!K||!K.end)return G;$=!0;let J=K.start.from==G.head?K.end.to:K.end.from;return q?E.range(G.anchor,J):E.cursor(J)});if(!$)return!1;return j(Zj(A,B)),!0}var r3=({state:A,dispatch:j})=>a3(A,j,!1);function gA(A,j){let q=K6(A.state.selection,($)=>{let B=j($);return E.range($.anchor,B.head,B.goalColumn,B.bidiLevel||void 0)});if(q.eq(A.state.selection))return!1;return A.dispatch(Zj(A.state,q)),!0}function n5(A,j){return gA(A,(q)=>A.moveByChar(q,j))}var a5=(A)=>n5(A,!IA(A)),r5=(A)=>n5(A,IA(A));function o5(A,j){return gA(A,(q)=>A.moveByGroup(q,j))}var o3=(A)=>o5(A,!IA(A)),t3=(A)=>o5(A,IA(A));var e3=(A)=>gA(A,(j)=>Uq(A.state,j,!IA(A))),AJ=(A)=>gA(A,(j)=>Uq(A.state,j,IA(A)));function t5(A,j){return gA(A,(q)=>A.moveVertically(q,j))}var e5=(A)=>t5(A,!1),AK=(A)=>t5(A,!0);function jK(A,j){return gA(A,(q)=>A.moveVertically(q,j,s5(A).height))}var R5=(A)=>jK(A,!1),V5=(A)=>jK(A,!0),jJ=(A)=>gA(A,(j)=>kj(A,j,!0)),qJ=(A)=>gA(A,(j)=>kj(A,j,!1)),$J=(A)=>gA(A,(j)=>kj(A,j,!IA(A))),BJ=(A)=>gA(A,(j)=>kj(A,j,IA(A))),GJ=(A)=>gA(A,(j)=>E.cursor(A.lineBlockAt(j.head).from)),KJ=(A)=>gA(A,(j)=>E.cursor(A.lineBlockAt(j.head).to)),k5=({state:A,dispatch:j})=>{return j(Zj(A,{anchor:0})),!0},L5=({state:A,dispatch:j})=>{return j(Zj(A,{anchor:A.doc.length})),!0},P5=({state:A,dispatch:j})=>{return j(Zj(A,{anchor:A.selection.main.anchor,head:0})),!0},T5=({state:A,dispatch:j})=>{return j(Zj(A,{anchor:A.selection.main.anchor,head:A.doc.length})),!0},JJ=({state:A,dispatch:j})=>{return j(A.update({selection:{anchor:0,head:A.doc.length},userEvent:"select"})),!0},ZJ=({state:A,dispatch:j})=>{let q=Yq(A).map(({from:$,to:B})=>E.range($,Math.min(B+1,A.doc.length)));return j(A.update({selection:E.create(q),userEvent:"select"})),!0},XJ=({state:A,dispatch:j})=>{let q=K6(A.selection,($)=>{let B=GA(A),G=B.resolveStack($.from,1);if($.empty){let K=B.resolveStack($.from,-1);if(K.node.from>=G.node.from&&K.node.to<=G.node.to)G=K}for(let K=G;K;K=K.next){let{node:J}=K;if((J.from<$.from&&J.to>=$.to||J.to>$.to&&J.from<=$.from)&&K.next)return E.range(J.to,J.from)}return $});if(q.eq(A.selection))return!1;return j(Zj(A,q)),!0},UJ=({state:A,dispatch:j})=>{let q=A.selection,$=null;if(q.ranges.length>1)$=E.create([q.main]);else if(!q.main.empty)$=E.create([E.cursor(q.main.head)]);if(!$)return!1;return j(Zj(A,$)),!0};function r6(A,j){if(A.state.readOnly)return!1;let q="delete.selection",{state:$}=A,B=$.changeByRange((G)=>{let{from:K,to:J}=G;if(K==J){let Z=j(G);if(Z<K)q="delete.backward",Z=Kq(A,Z,!1);else if(Z>K)q="delete.forward",Z=Kq(A,Z,!0);K=Math.min(K,Z),J=Math.max(J,Z)}else K=Kq(A,K,!1),J=Kq(A,J,!0);return K==J?{range:G}:{changes:{from:K,to:J},range:E.cursor(K,K<G.head?-1:1)}});if(B.changes.empty)return!1;return A.dispatch($.update(B,{scrollIntoView:!0,userEvent:q,effects:q=="delete.selection"?R.announce.of($.phrase("Selection deleted")):void 0})),!0}function Kq(A,j,q){if(A instanceof R)for(let $ of A.state.facet(R.atomicRanges).map((B)=>B(A)))$.between(j,j,(B,G)=>{if(B<j&&G>j)j=q?G:B});return j}var qK=(A,j,q)=>r6(A,($)=>{let B=$.from,{state:G}=A,K=G.doc.lineAt(B),J,Z;if(q&&!j&&B>K.from&&B<K.from+200&&!/[^ \t]/.test(J=K.text.slice(0,B-K.from))){if(J[J.length-1]=="\t")return B-1;let X=Uj(J,G.tabSize),U=X%i6(G)||i6(G);for(let Y=0;Y<U&&J[J.length-1-Y]==" ";Y++)B--;Z=B}else if(Z=qA(K.text,B-K.from,j,j)+K.from,Z==B&&K.number!=(j?G.doc.lines:1))Z+=j?1:-1;else if(!j&&/[\ufe00-\ufe0f]/.test(K.text.slice(Z-K.from,B-K.from)))Z=qA(K.text,Z-K.from,!1,!1)+K.from;return Z}),U$=(A)=>qK(A,!1,!0);var $K=(A)=>qK(A,!0,!1),BK=(A,j)=>r6(A,(q)=>{let $=q.head,{state:B}=A,G=B.doc.lineAt($),K=B.charCategorizer($);for(let J=null;;){if($==(j?G.to:G.from)){if($==q.head&&G.number!=(j?B.doc.lines:1))$+=j?1:-1;break}let Z=qA(G.text,$-G.from,j)+G.from,X=G.text.slice(Math.min($,Z)-G.from,Math.max($,Z)-G.from),U=K(X);if(J!=null&&U!=J)break;if(X!=" "||$!=q.head)J=U;$=Z}return $}),GK=(A)=>BK(A,!1),YJ=(A)=>BK(A,!0),QJ=(A)=>r6(A,(j)=>{let q=A.lineBlockAt(j.head).to;return j.head<q?q:Math.min(A.state.doc.length,j.head+1)});var OJ=(A)=>r6(A,(j)=>{let q=A.moveToLineBoundary(j,!1).head;return j.head>q?q:Math.max(0,j.head-1)}),FJ=(A)=>r6(A,(j)=>{let q=A.moveToLineBoundary(j,!0).head;return j.head<q?q:Math.min(A.state.doc.length,j.head+1)});var zJ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;let q=A.changeByRange(($)=>{return{changes:{from:$.from,to:$.to,insert:m.of(["",""])},range:E.cursor($.from)}});return j(A.update(q,{scrollIntoView:!0,userEvent:"input"})),!0},IJ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;let q=A.changeByRange(($)=>{if(!$.empty||$.from==0||$.from==A.doc.length)return{range:$};let B=$.from,G=A.doc.lineAt(B),K=B==G.from?B-1:qA(G.text,B-G.from,!1)+G.from,J=B==G.to?B+1:qA(G.text,B-G.from,!0)+G.from;return{changes:{from:K,to:J,insert:A.doc.slice(B,J).append(A.doc.slice(K,B))},range:E.cursor(J)}});if(q.changes.empty)return!1;return j(A.update(q,{scrollIntoView:!0,userEvent:"move.character"})),!0};function Yq(A){let j=[],q=-1;for(let $ of A.selection.ranges){let B=A.doc.lineAt($.from),G=A.doc.lineAt($.to);if(!$.empty&&$.to==G.from)G=A.doc.lineAt($.to-1);if(q>=B.number){let K=j[j.length-1];K.to=G.to,K.ranges.push($)}else j.push({from:B.from,to:G.to,ranges:[$]});q=G.number+1}return j}function KK(A,j,q){if(A.readOnly)return!1;let $=[],B=[];for(let G of Yq(A)){if(q?G.to==A.doc.length:G.from==0)continue;let K=A.doc.lineAt(q?G.to+1:G.from-1),J=K.length+1;if(q){$.push({from:G.to,to:K.to},{from:G.from,insert:K.text+A.lineBreak});for(let Z of G.ranges)B.push(E.range(Math.min(A.doc.length,Z.anchor+J),Math.min(A.doc.length,Z.head+J)))}else{$.push({from:K.from,to:G.from},{from:G.to,insert:A.lineBreak+K.text});for(let Z of G.ranges)B.push(E.range(Z.anchor-J,Z.head-J))}}if(!$.length)return!1;return j(A.update({changes:$,scrollIntoView:!0,selection:E.create(B,A.selection.mainIndex),userEvent:"move.line"})),!0}var WJ=({state:A,dispatch:j})=>KK(A,j,!1),EJ=({state:A,dispatch:j})=>KK(A,j,!0);function JK(A,j,q){if(A.readOnly)return!1;let $=[];for(let B of Yq(A))if(q)$.push({from:B.from,insert:A.doc.slice(B.from,B.to)+A.lineBreak});else $.push({from:B.to,insert:A.lineBreak+A.doc.slice(B.from,B.to)});return j(A.update({changes:$,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var HJ=({state:A,dispatch:j})=>JK(A,j,!1),_J=({state:A,dispatch:j})=>JK(A,j,!0),NJ=(A)=>{if(A.state.readOnly)return!1;let{state:j}=A,q=j.changes(Yq(j).map(({from:B,to:G})=>{if(B>0)B--;else if(G<j.doc.length)G++;return{from:B,to:G}})),$=K6(j.selection,(B)=>{let G=void 0;if(A.lineWrapping){let K=A.lineBlockAt(B.head),J=A.coordsAtPos(B.head,B.assoc||1);if(J)G=K.bottom+A.documentTop-J.bottom+A.defaultLineHeight/2}return A.moveVertically(B,!0,G)}).map(q);return A.dispatch({changes:q,selection:$,scrollIntoView:!0,userEvent:"delete.line"}),!0};function DJ(A,j){if(/\(\)|\[\]|\{\}/.test(A.sliceDoc(j-1,j+1)))return{from:j,to:j};let q=GA(A).resolveInner(j),$=q.childBefore(j),B=q.childAfter(j),G;if($&&B&&$.to<=j&&B.from>=j&&(G=$.type.prop(S.closedBy))&&G.indexOf(B.name)>-1&&A.doc.lineAt($.to).from==A.doc.lineAt(B.from).from&&!/\S/.test(A.sliceDoc($.to,B.from)))return{from:$.to,to:B.from};return null}var C5=ZK(!1),MJ=ZK(!0);function ZK(A){return({state:j,dispatch:q})=>{if(j.readOnly)return!1;let $=j.changeByRange((B)=>{let{from:G,to:K}=B,J=j.doc.lineAt(G),Z=!A&&G==K&&DJ(j,G);if(A)G=K=(K<=J.to?J:j.doc.lineAt(K)).to;let X=new G6(j,{simulateBreak:G,simulateDoubleBreak:!!Z}),U=$q(X,G);if(U==null)U=Uj(/^\s*/.exec(j.doc.lineAt(G).text)[0],j.tabSize);while(K<J.to&&/\s/.test(J.text[K-J.from]))K++;if(Z)({from:G,to:K}=Z);else if(G>J.from&&G<J.from+100&&!/\S/.test(J.text.slice(0,G)))G=J.from;let Y=["",B6(j,U)];if(Z)Y.push(B6(j,X.lineIndent(J.from,-1)));return{changes:{from:G,to:K,insert:m.of(Y)},range:E.cursor(G+1+Y[1].length)}});return q(j.update($,{scrollIntoView:!0,userEvent:"input"})),!0}}function O$(A,j){let q=-1;return A.changeByRange(($)=>{let B=[];for(let K=$.from;K<=$.to;){let J=A.doc.lineAt(K);if(J.number>q&&($.empty||$.to>J.from))j(J,B,$),q=J.number;K=J.to+1}let G=A.changes(B);return{changes:B,range:E.range(G.mapPos($.anchor,1),G.mapPos($.head,1))}})}var RJ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;let q=Object.create(null),$=new G6(A,{overrideIndentation:(G)=>{let K=q[G];return K==null?-1:K}}),B=O$(A,(G,K,J)=>{let Z=$q($,G.from);if(Z==null)return;if(!/\S/.test(G.text))Z=0;let X=/^\s*/.exec(G.text)[0],U=B6(A,Z);if(X!=U||J.from<G.from+X.length)q[G.from]=Z,K.push({from:G.from,to:G.from+X.length,insert:U})});if(!B.changes.empty)j(A.update(B,{userEvent:"indent"}));return!0},VJ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;return j(A.update(O$(A,(q,$)=>{$.push({from:q.from,insert:A.facet(s6)})}),{userEvent:"input.indent"})),!0},kJ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;return j(A.update(O$(A,(q,$)=>{let B=/^\s*/.exec(q.text)[0];if(!B)return;let G=Uj(B,A.tabSize),K=0,J=B6(A,Math.max(0,G-i6(A)));while(K<B.length&&K<J.length&&B.charCodeAt(K)==J.charCodeAt(K))K++;$.push({from:q.from+K,to:q.from+B.length,insert:J.slice(K)})}),{userEvent:"delete.dedent"})),!0},LJ=(A)=>{return A.setTabFocusMode(),!0};var PJ=[{key:"Ctrl-b",run:g5,shift:a5,preventDefault:!0},{key:"Ctrl-f",run:f5,shift:r5},{key:"Ctrl-p",run:d5,shift:e5},{key:"Ctrl-n",run:c5,shift:AK},{key:"Ctrl-a",run:i3,shift:GJ},{key:"Ctrl-e",run:n3,shift:KJ},{key:"Ctrl-d",run:$K},{key:"Ctrl-h",run:U$},{key:"Ctrl-k",run:QJ},{key:"Ctrl-Alt-h",run:GK},{key:"Ctrl-o",run:zJ},{key:"Ctrl-t",run:IJ},{key:"Ctrl-v",run:X$}],TJ=[{key:"ArrowLeft",run:g5,shift:a5,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:m3,shift:o3,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:c3,shift:$J,preventDefault:!0},{key:"ArrowRight",run:f5,shift:r5,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:u3,shift:t3,preventDefault:!0},{mac:"Cmd-ArrowRight",run:s3,shift:BJ,preventDefault:!0},{key:"ArrowUp",run:d5,shift:e5,preventDefault:!0},{mac:"Cmd-ArrowUp",run:k5,shift:P5},{mac:"Ctrl-ArrowUp",run:M5,shift:R5},{key:"ArrowDown",run:c5,shift:AK,preventDefault:!0},{mac:"Cmd-ArrowDown",run:L5,shift:T5},{mac:"Ctrl-ArrowDown",run:X$,shift:V5},{key:"PageUp",run:M5,shift:R5},{key:"PageDown",run:X$,shift:V5},{key:"Home",run:d3,shift:qJ,preventDefault:!0},{key:"Mod-Home",run:k5,shift:P5},{key:"End",run:l3,shift:jJ,preventDefault:!0},{key:"Mod-End",run:L5,shift:T5},{key:"Enter",run:C5,shift:C5},{key:"Mod-a",run:JJ},{key:"Backspace",run:U$,shift:U$},{key:"Delete",run:$K},{key:"Mod-Backspace",mac:"Alt-Backspace",run:GK},{key:"Mod-Delete",mac:"Alt-Delete",run:YJ},{mac:"Mod-Backspace",run:OJ},{mac:"Mod-Delete",run:FJ}].concat(PJ.map((A)=>({mac:A.key,run:A.run,shift:A.shift}))),XK=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:f3,shift:e3},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:p3,shift:AJ},{key:"Alt-ArrowUp",run:WJ},{key:"Shift-Alt-ArrowUp",run:HJ},{key:"Alt-ArrowDown",run:EJ},{key:"Shift-Alt-ArrowDown",run:_J},{key:"Escape",run:UJ},{key:"Mod-Enter",run:MJ},{key:"Alt-l",mac:"Ctrl-l",run:ZJ},{key:"Mod-i",run:XJ,preventDefault:!0},{key:"Mod-[",run:kJ},{key:"Mod-]",run:VJ},{key:"Mod-Alt-\\",run:RJ},{key:"Shift-Mod-k",run:NJ},{key:"Shift-Mod-\\",run:r3},{key:"Mod-/",run:N3},{key:"Alt-A",run:M3},{key:"Ctrl-m",mac:"Shift-Alt-m",run:LJ}].concat(TJ);var UK=typeof String.prototype.normalize=="function"?(A)=>A.normalize("NFKD"):(A)=>A;class uj{constructor(A,j,q=0,$=A.length,B,G){this.test=G,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=A.iterRange(q,$),this.bufferStart=q,this.normalize=B?(K)=>B(UK(K)):UK,this.query=this.normalize(j)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return XA(this.buffer,this.bufferPos)}next(){while(this.matches.length)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let A=this.peek();if(A<0)return this.done=!0,this;let j=H6(A),q=this.bufferStart+this.bufferPos;this.bufferPos+=VA(A);let $=this.normalize(j);if($.length)for(let B=0,G=q;;B++){let K=$.charCodeAt(B),J=this.match(K,G,this.bufferPos+this.bufferStart);if(B==$.length-1){if(J)return this.value=J,this;break}if(G==q&&B<j.length&&j.charCodeAt(B)==K)G++}}}match(A,j,q){let $=null;for(let B=0;B<this.matches.length;B+=2){let G=this.matches[B],K=!1;if(this.query.charCodeAt(G)==A)if(G==this.query.length-1)$={from:this.matches[B+1],to:q};else this.matches[B]++,K=!0;if(!K)this.matches.splice(B,2),B-=2}if(this.query.charCodeAt(0)==A)if(this.query.length==1)$={from:j,to:q};else this.matches.push(1,j);if($&&this.test&&!this.test($.from,$.to,this.buffer,this.bufferStart))$=null;return $}}if(typeof Symbol!="undefined")uj.prototype[Symbol.iterator]=function(){return this};var FK={from:-1,to:-1,match:/.*/.exec("")},W$="gm"+(/x/.unicode==null?"":"u");class E${constructor(A,j,q,$=0,B=A.length){if(this.text=A,this.to=B,this.curLine="",this.done=!1,this.value=FK,/\\[sWDnr]|\n|\r|\[\^/.test(j))return new H$(A,j,q,$,B);this.re=new RegExp(j,W$+((q===null||q===void 0?void 0:q.ignoreCase)?"i":"")),this.test=q===null||q===void 0?void 0:q.test,this.iter=A.iter();let G=A.lineAt($);this.curLineStart=G.from,this.matchPos=zq(A,$),this.getLine(this.curLineStart)}getLine(A){if(this.iter.next(A),this.iter.lineBreak)this.curLine="";else{if(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to)this.curLine=this.curLine.slice(0,this.to-this.curLineStart);this.iter.next()}}nextLine(){if(this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to)this.curLine="";else this.getLine(0)}next(){for(let A=this.matchPos-this.curLineStart;;){this.re.lastIndex=A;let j=this.matchPos<=this.to&&this.re.exec(this.curLine);if(j){let q=this.curLineStart+j.index,$=q+j[0].length;if(this.matchPos=zq(this.text,$+(q==$?1:0)),q==this.curLineStart+this.curLine.length)this.nextLine();if((q<$||q>this.value.to)&&(!this.test||this.test(q,$,j)))return this.value={from:q,to:$,match:j},this;A=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),A=0;else return this.done=!0,this}}}var F$=new WeakMap;class X6{constructor(A,j){this.from=A,this.text=j}get to(){return this.from+this.text.length}static get(A,j,q){let $=F$.get(A);if(!$||$.from>=q||$.to<=j){let K=new X6(j,A.sliceString(j,q));return F$.set(A,K),K}if($.from==j&&$.to==q)return $;let{text:B,from:G}=$;if(G>j)B=A.sliceString(j,G)+B,G=j;if($.to<q)B+=A.sliceString($.to,q);return F$.set(A,new X6(G,B)),new X6(j,B.slice(j-G,q-G))}}class H${constructor(A,j,q,$,B){this.text=A,this.to=B,this.done=!1,this.value=FK,this.matchPos=zq(A,$),this.re=new RegExp(j,W$+((q===null||q===void 0?void 0:q.ignoreCase)?"i":"")),this.test=q===null||q===void 0?void 0:q.test,this.flat=X6.get(A,$,this.chunkEnd($+5000))}chunkEnd(A){return A>=this.to?this.to:this.text.lineAt(A).to}next(){for(;;){let A=this.re.lastIndex=this.matchPos-this.flat.from,j=this.re.exec(this.flat.text);if(j&&!j[0]&&j.index==A)this.re.lastIndex=A+1,j=this.re.exec(this.flat.text);if(j){let q=this.flat.from+j.index,$=q+j[0].length;if((this.flat.to>=this.to||j.index+j[0].length<=this.flat.text.length-10)&&(!this.test||this.test(q,$,j)))return this.value={from:q,to:$,match:j},this.matchPos=zq(this.text,$+(q==$?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=X6.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}if(typeof Symbol!="undefined")E$.prototype[Symbol.iterator]=H$.prototype[Symbol.iterator]=function(){return this};function CJ(A){try{return new RegExp(A,W$),!0}catch(j){return!1}}function zq(A,j){if(j>=A.length)return j;let q=A.lineAt(j),$;while(j<q.to&&($=q.text.charCodeAt(j-q.from))>=56320&&$<57344)j++;return j}function z$(A){let j=String(A.state.doc.lineAt(A.state.selection.main.head).number),q=f("input",{class:"cm-textfield",name:"line",value:j}),$=f("form",{class:"cm-gotoLine",onkeydown:(G)=>{if(G.keyCode==27)G.preventDefault(),A.dispatch({effects:o6.of(!1)}),A.focus();else if(G.keyCode==13)G.preventDefault(),B()},onsubmit:(G)=>{G.preventDefault(),B()}},f("label",A.state.phrase("Go to line"),": ",q)," ",f("button",{class:"cm-button",type:"submit"},A.state.phrase("go")),f("button",{name:"close",onclick:()=>{A.dispatch({effects:o6.of(!1)}),A.focus()},"aria-label":A.state.phrase("close"),type:"button"},["×"]));function B(){let G=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(q.value);if(!G)return;let{state:K}=A,J=K.doc.lineAt(K.selection.main.head),[,Z,X,U,Y]=G,Q=U?+U.slice(1):0,O=X?+X:J.number;if(X&&Y){let I=O/100;if(Z)I=I*(Z=="-"?-1:1)+J.number/K.doc.lines;O=Math.round(K.doc.lines*I)}else if(X&&Z)O=O*(Z=="-"?-1:1)+J.number;let F=K.doc.line(Math.max(1,Math.min(K.doc.lines,O))),z=E.cursor(F.from+Math.max(0,Math.min(Q,F.length)));A.dispatch({effects:[o6.of(!1),R.scrollIntoView(z.from,{y:"center"})],selection:z}),A.focus()}return{dom:$}}var o6=b.define(),YK=o.define({create(){return!0},update(A,j){for(let q of j.effects)if(q.is(o6))A=q.value;return A},provide:(A)=>wj.from(A,(j)=>j?z$:null)}),yJ=(A)=>{let j=hj(A,z$);if(!j){let q=[o6.of(!0)];if(A.state.field(YK,!1)==null)q.push(b.appendConfig.of([YK,bJ]));A.dispatch({effects:q}),j=hj(A,z$)}if(j)j.dom.querySelector("input").select();return!0},bJ=R.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),xJ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},zK=k.define({combine(A){return FA(A,xJ,{highlightWordAroundCursor:(j,q)=>j||q,minSelectionLength:Math.min,maxMatches:Math.min})}});function IK(A){let j=[mJ,vJ];if(A)j.push(zK.of(A));return j}var SJ=C.mark({class:"cm-selectionMatch"}),wJ=C.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function QK(A,j,q,$){return(q==0||A(j.sliceDoc(q-1,q))!=l.Word)&&($==j.doc.length||A(j.sliceDoc($,$+1))!=l.Word)}function hJ(A,j,q,$){return A(j.sliceDoc(q,q+1))==l.Word&&A(j.sliceDoc($-1,$))==l.Word}var vJ=r.fromClass(class{constructor(A){this.decorations=this.getDeco(A)}update(A){if(A.selectionSet||A.docChanged||A.viewportChanged)this.decorations=this.getDeco(A.view)}getDeco(A){let j=A.state.facet(zK),{state:q}=A,$=q.selection;if($.ranges.length>1)return C.none;let B=$.main,G,K=null;if(B.empty){if(!j.highlightWordAroundCursor)return C.none;let Z=q.wordAt(B.head);if(!Z)return C.none;K=q.charCategorizer(B.head),G=q.sliceDoc(Z.from,Z.to)}else{let Z=B.to-B.from;if(Z<j.minSelectionLength||Z>200)return C.none;if(j.wholeWords){if(G=q.sliceDoc(B.from,B.to),K=q.charCategorizer(B.head),!(QK(K,q,B.from,B.to)&&hJ(K,q,B.from,B.to)))return C.none}else if(G=q.sliceDoc(B.from,B.to),!G)return C.none}let J=[];for(let Z of A.visibleRanges){let X=new uj(q.doc,G,Z.from,Z.to);while(!X.next().done){let{from:U,to:Y}=X.value;if(!K||QK(K,q,U,Y)){if(B.empty&&U<=B.from&&Y>=B.to)J.push(wJ.range(U,Y));else if(U>=B.to||Y<=B.from)J.push(SJ.range(U,Y));if(J.length>j.maxMatches)return C.none}}}return C.set(J)}},{decorations:(A)=>A.decorations}),mJ=R.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),uJ=({state:A,dispatch:j})=>{let{selection:q}=A,$=E.create(q.ranges.map((B)=>A.wordAt(B.head)||E.cursor(B.head)),q.mainIndex);if($.eq(q))return!1;return j(A.update({selection:$})),!0};function gJ(A,j){let{main:q,ranges:$}=A.selection,B=A.wordAt(q.head),G=B&&B.from==q.from&&B.to==q.to;for(let K=!1,J=new uj(A.doc,j,$[$.length-1].to);;)if(J.next(),J.done){if(K)return null;J=new uj(A.doc,j,0,Math.max(0,$[$.length-1].from-1)),K=!0}else{if(K&&$.some((Z)=>Z.from==J.value.from))continue;if(G){let Z=A.wordAt(J.value.from);if(!Z||Z.from!=J.value.from||Z.to!=J.value.to)continue}return J.value}}var fJ=({state:A,dispatch:j})=>{let{ranges:q}=A.selection;if(q.some((G)=>G.from===G.to))return uJ({state:A,dispatch:j});let $=A.sliceDoc(q[0].from,q[0].to);if(A.selection.ranges.some((G)=>A.sliceDoc(G.from,G.to)!=$))return!1;let B=gJ(A,$);if(!B)return!1;return j(A.update({selection:A.selection.addRange(E.range(B.from,B.to),!1),effects:R.scrollIntoView(B.to)})),!0},U6=k.define({combine(A){return FA(A,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:(j)=>new RK(j),scrollToMatch:(j)=>R.scrollIntoView(j)})}});class _${constructor(A){this.search=A.search,this.caseSensitive=!!A.caseSensitive,this.literal=!!A.literal,this.regexp=!!A.regexp,this.replace=A.replace||"",this.valid=!!this.search&&(!this.regexp||CJ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!A.wholeWord}unquote(A){return this.literal?A:A.replace(/\\([nrt\\])/g,(j,q)=>q=="n"?`
`:q=="r"?"\r":q=="t"?"\t":"\\")}eq(A){return this.search==A.search&&this.replace==A.replace&&this.caseSensitive==A.caseSensitive&&this.regexp==A.regexp&&this.wholeWord==A.wholeWord}create(){return this.regexp?new EK(this):new WK(this)}getCursor(A,j=0,q){let $=A.doc?A:v.create({doc:A});if(q==null)q=$.doc.length;return this.regexp?Z6(this,$,j,q):J6(this,$,j,q)}}class N${constructor(A){this.spec=A}}function J6(A,j,q,$){return new uj(j.doc,A.unquoted,q,$,A.caseSensitive?void 0:(B)=>B.toLowerCase(),A.wholeWord?pJ(j.doc,j.charCategorizer(j.selection.main.head)):void 0)}function pJ(A,j){return(q,$,B,G)=>{if(G>q||G+B.length<$)G=Math.max(0,q-2),B=A.sliceString(G,Math.min(A.length,$+2));return(j(Iq(B,q-G))!=l.Word||j(Wq(B,q-G))!=l.Word)&&(j(Wq(B,$-G))!=l.Word||j(Iq(B,$-G))!=l.Word)}}class WK extends N${constructor(A){super(A)}nextMatch(A,j,q){let $=J6(this.spec,A,q,A.doc.length).nextOverlapping();if($.done){let B=Math.min(A.doc.length,j+this.spec.unquoted.length);$=J6(this.spec,A,0,B).nextOverlapping()}return $.done||$.value.from==j&&$.value.to==q?null:$.value}prevMatchInRange(A,j,q){for(let $=q;;){let B=Math.max(j,$-1e4-this.spec.unquoted.length),G=J6(this.spec,A,B,$),K=null;while(!G.nextOverlapping().done)K=G.value;if(K)return K;if(B==j)return null;$-=1e4}}prevMatch(A,j,q){let $=this.prevMatchInRange(A,0,j);if(!$)$=this.prevMatchInRange(A,Math.max(0,q-this.spec.unquoted.length),A.doc.length);return $&&($.from!=j||$.to!=q)?$:null}getReplacement(A){return this.spec.unquote(this.spec.replace)}matchAll(A,j){let q=J6(this.spec,A,0,A.doc.length),$=[];while(!q.next().done){if($.length>=j)return null;$.push(q.value)}return $}highlight(A,j,q,$){let B=J6(this.spec,A,Math.max(0,j-this.spec.unquoted.length),Math.min(q+this.spec.unquoted.length,A.doc.length));while(!B.next().done)$(B.value.from,B.value.to)}}function Z6(A,j,q,$){return new E$(j.doc,A.search,{ignoreCase:!A.caseSensitive,test:A.wholeWord?lJ(j.charCategorizer(j.selection.main.head)):void 0},q,$)}function Iq(A,j){return A.slice(qA(A,j,!1),j)}function Wq(A,j){return A.slice(j,qA(A,j))}function lJ(A){return(j,q,$)=>!$[0].length||(A(Iq($.input,$.index))!=l.Word||A(Wq($.input,$.index))!=l.Word)&&(A(Wq($.input,$.index+$[0].length))!=l.Word||A(Iq($.input,$.index+$[0].length))!=l.Word)}class EK extends N${nextMatch(A,j,q){let $=Z6(this.spec,A,q,A.doc.length).next();if($.done)$=Z6(this.spec,A,0,j).next();return $.done?null:$.value}prevMatchInRange(A,j,q){for(let $=1;;$++){let B=Math.max(j,q-$*1e4),G=Z6(this.spec,A,B,q),K=null;while(!G.next().done)K=G.value;if(K&&(B==j||K.from>B+10))return K;if(B==j)return null}}prevMatch(A,j,q){return this.prevMatchInRange(A,0,j)||this.prevMatchInRange(A,q,A.doc.length)}getReplacement(A){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(j,q)=>{if(q=="&")return A.match[0];if(q=="$")return"$";for(let $=q.length;$>0;$--){let B=+q.slice(0,$);if(B>0&&B<A.match.length)return A.match[B]+q.slice($)}return j})}matchAll(A,j){let q=Z6(this.spec,A,0,A.doc.length),$=[];while(!q.next().done){if($.length>=j)return null;$.push(q.value)}return $}highlight(A,j,q,$){let B=Z6(this.spec,A,Math.max(0,j-250),Math.min(q+250,A.doc.length));while(!B.next().done)$(B.value.from,B.value.to)}}var t6=b.define(),D$=b.define(),Lj=o.define({create(A){return new Fq(I$(A).create(),null)},update(A,j){for(let q of j.effects)if(q.is(t6))A=new Fq(q.value.create(),A.panel);else if(q.is(D$))A=new Fq(A.query,q.value?M$:null);return A},provide:(A)=>wj.from(A,(j)=>j.panel)});class Fq{constructor(A,j){this.query=A,this.panel=j}}var dJ=C.mark({class:"cm-searchMatch"}),cJ=C.mark({class:"cm-searchMatch cm-searchMatch-selected"}),sJ=r.fromClass(class{constructor(A){this.view=A,this.decorations=this.highlight(A.state.field(Lj))}update(A){let j=A.state.field(Lj);if(j!=A.startState.field(Lj)||A.docChanged||A.selectionSet||A.viewportChanged)this.decorations=this.highlight(j)}highlight({query:A,panel:j}){if(!j||!A.spec.valid)return C.none;let{view:q}=this,$=new RA;for(let B=0,G=q.visibleRanges,K=G.length;B<K;B++){let{from:J,to:Z}=G[B];while(B<K-1&&Z>G[B+1].from-500)Z=G[++B].to;A.highlight(q.state,J,Z,(X,U)=>{let Y=q.state.selection.ranges.some((Q)=>Q.from==X&&Q.to==U);$.add(X,U,Y?cJ:dJ)})}return $.finish()}},{decorations:(A)=>A.decorations});function e6(A){return(j)=>{let q=j.state.field(Lj,!1);return q&&q.query.spec.valid?A(j,q):NK(j)}}var Eq=e6((A,{query:j})=>{let{to:q}=A.state.selection.main,$=j.nextMatch(A.state,q,q);if(!$)return!1;let B=E.single($.from,$.to),G=A.state.facet(U6);return A.dispatch({selection:B,effects:[R$(A,$),G.scrollToMatch(B.main,A)],userEvent:"select.search"}),_K(A),!0}),Hq=e6((A,{query:j})=>{let{state:q}=A,{from:$}=q.selection.main,B=j.prevMatch(q,$,$);if(!B)return!1;let G=E.single(B.from,B.to),K=A.state.facet(U6);return A.dispatch({selection:G,effects:[R$(A,B),K.scrollToMatch(G.main,A)],userEvent:"select.search"}),_K(A),!0}),iJ=e6((A,{query:j})=>{let q=j.matchAll(A.state,1000);if(!q||!q.length)return!1;return A.dispatch({selection:E.create(q.map(($)=>E.range($.from,$.to))),userEvent:"select.search.matches"}),!0}),nJ=({state:A,dispatch:j})=>{let q=A.selection;if(q.ranges.length>1||q.main.empty)return!1;let{from:$,to:B}=q.main,G=[],K=0;for(let J=new uj(A.doc,A.sliceDoc($,B));!J.next().done;){if(G.length>1000)return!1;if(J.value.from==$)K=G.length;G.push(E.range(J.value.from,J.value.to))}return j(A.update({selection:E.create(G,K),userEvent:"select.search.matches"})),!0},OK=e6((A,{query:j})=>{let{state:q}=A,{from:$,to:B}=q.selection.main;if(q.readOnly)return!1;let G=j.nextMatch(q,$,$);if(!G)return!1;let K=G,J=[],Z,X,U=[];if(K.from==$&&K.to==B)X=q.toText(j.getReplacement(K)),J.push({from:K.from,to:K.to,insert:X}),K=j.nextMatch(q,K.from,K.to),U.push(R.announce.of(q.phrase("replaced match on line $",q.doc.lineAt($).number)+"."));let Y=A.state.changes(J);if(K)Z=E.single(K.from,K.to).map(Y),U.push(R$(A,K)),U.push(q.facet(U6).scrollToMatch(Z.main,A));return A.dispatch({changes:Y,selection:Z,effects:U,userEvent:"input.replace"}),!0}),aJ=e6((A,{query:j})=>{if(A.state.readOnly)return!1;let q=j.matchAll(A.state,1e9).map((B)=>{let{from:G,to:K}=B;return{from:G,to:K,insert:j.getReplacement(B)}});if(!q.length)return!1;let $=A.state.phrase("replaced $ matches",q.length)+".";return A.dispatch({changes:q,effects:R.announce.of($),userEvent:"input.replace.all"}),!0});function M$(A){return A.state.facet(U6).createPanel(A)}function I$(A,j){var q,$,B,G,K;let J=A.selection.main,Z=J.empty||J.to>J.from+100?"":A.sliceDoc(J.from,J.to);if(j&&!Z)return j;let X=A.facet(U6);return new _$({search:((q=j===null||j===void 0?void 0:j.literal)!==null&&q!==void 0?q:X.literal)?Z:Z.replace(/\n/g,"\\n"),caseSensitive:($=j===null||j===void 0?void 0:j.caseSensitive)!==null&&$!==void 0?$:X.caseSensitive,literal:(B=j===null||j===void 0?void 0:j.literal)!==null&&B!==void 0?B:X.literal,regexp:(G=j===null||j===void 0?void 0:j.regexp)!==null&&G!==void 0?G:X.regexp,wholeWord:(K=j===null||j===void 0?void 0:j.wholeWord)!==null&&K!==void 0?K:X.wholeWord})}function HK(A){let j=hj(A,M$);return j&&j.dom.querySelector("[main-field]")}function _K(A){let j=HK(A);if(j&&j==A.root.activeElement)j.select()}var NK=(A)=>{let j=A.state.field(Lj,!1);if(j&&j.panel){let q=HK(A);if(q&&q!=A.root.activeElement){let $=I$(A.state,j.query.spec);if($.valid)A.dispatch({effects:t6.of($)});q.focus(),q.select()}}else A.dispatch({effects:[D$.of(!0),j?t6.of(I$(A.state,j.query.spec)):b.appendConfig.of(oJ)]});return!0},DK=(A)=>{let j=A.state.field(Lj,!1);if(!j||!j.panel)return!1;let q=hj(A,M$);if(q&&q.dom.contains(A.root.activeElement))A.focus();return A.dispatch({effects:D$.of(!1)}),!0},MK=[{key:"Mod-f",run:NK,scope:"editor search-panel"},{key:"F3",run:Eq,shift:Hq,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Eq,shift:Hq,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:DK,scope:"editor search-panel"},{key:"Mod-Shift-l",run:nJ},{key:"Mod-Alt-g",run:yJ},{key:"Mod-d",run:fJ,preventDefault:!0}];class RK{constructor(A){this.view=A;let j=this.query=A.state.field(Lj).query.spec;this.commit=this.commit.bind(this),this.searchField=f("input",{value:j.search,placeholder:TA(A,"Find"),"aria-label":TA(A,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=f("input",{value:j.replace,placeholder:TA(A,"Replace"),"aria-label":TA(A,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=f("input",{type:"checkbox",name:"case",form:"",checked:j.caseSensitive,onchange:this.commit}),this.reField=f("input",{type:"checkbox",name:"re",form:"",checked:j.regexp,onchange:this.commit}),this.wordField=f("input",{type:"checkbox",name:"word",form:"",checked:j.wholeWord,onchange:this.commit});function q($,B,G){return f("button",{class:"cm-button",name:$,onclick:B,type:"button"},G)}this.dom=f("div",{onkeydown:($)=>this.keydown($),class:"cm-search"},[this.searchField,q("next",()=>Eq(A),[TA(A,"next")]),q("prev",()=>Hq(A),[TA(A,"previous")]),q("select",()=>iJ(A),[TA(A,"all")]),f("label",null,[this.caseField,TA(A,"match case")]),f("label",null,[this.reField,TA(A,"regexp")]),f("label",null,[this.wordField,TA(A,"by word")]),...A.state.readOnly?[]:[f("br"),this.replaceField,q("replace",()=>OK(A),[TA(A,"replace")]),q("replaceAll",()=>aJ(A),[TA(A,"replace all")])],f("button",{name:"close",onclick:()=>DK(A),"aria-label":TA(A,"close"),type:"button"},["×"])])}commit(){let A=new _$({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});if(!A.eq(this.query))this.query=A,this.view.dispatch({effects:t6.of(A)})}keydown(A){if(QG(this.view,A,"search-panel"))A.preventDefault();else if(A.keyCode==13&&A.target==this.searchField)A.preventDefault(),(A.shiftKey?Hq:Eq)(this.view);else if(A.keyCode==13&&A.target==this.replaceField)A.preventDefault(),OK(this.view)}update(A){for(let j of A.transactions)for(let q of j.effects)if(q.is(t6)&&!q.value.eq(this.query))this.setQuery(q.value)}setQuery(A){this.query=A,this.searchField.value=A.search,this.replaceField.value=A.replace,this.caseField.checked=A.caseSensitive,this.reField.checked=A.regexp,this.wordField.checked=A.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(U6).top}}function TA(A,j){return A.state.phrase(j)}var Qq=30,Oq=/[\s\.,:;?!]/;function R$(A,{from:j,to:q}){let $=A.state.doc.lineAt(j),B=A.state.doc.lineAt(q).to,G=Math.max($.from,j-Qq),K=Math.min(B,q+Qq),J=A.state.sliceDoc(G,K);if(G!=$.from){for(let Z=0;Z<Qq;Z++)if(!Oq.test(J[Z+1])&&Oq.test(J[Z])){J=J.slice(Z);break}}if(K!=B){for(let Z=J.length-1;Z>J.length-Qq;Z--)if(!Oq.test(J[Z-1])&&Oq.test(J[Z])){J=J.slice(0,Z);break}}return R.announce.of(`${A.state.phrase("current match")}. ${J} ${A.state.phrase("on line")} ${$.number}.`)}var rJ=R.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),oJ=[Lj,lA.low(sJ),rJ];class P${constructor(A,j,q,$){this.state=A,this.pos=j,this.explicit=q,this.view=$,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(A){let j=GA(this.state).resolveInner(this.pos,-1);while(j&&A.indexOf(j.name)<0)j=j.parent;return j?{from:j.from,to:this.pos,text:this.state.sliceDoc(j.from,this.pos),type:j.type}:null}matchBefore(A){let j=this.state.doc.lineAt(this.pos),q=Math.max(j.from,this.pos-250),$=j.text.slice(q-j.from,this.pos-j.from),B=$.search(xK(A,!1));return B<0?null:{from:q+B,to:this.pos,text:$.slice(B)}}get aborted(){return this.abortListeners==null}addEventListener(A,j,q){if(A=="abort"&&this.abortListeners){if(this.abortListeners.push(j),q&&q.onDocChange)this.abortOnDocChange=!0}}}function VK(A){let j=Object.keys(A).join(""),q=/\w/.test(j);if(q)j=j.replace(/\w/g,"");return`[${q?"\\w":""}${j.replace(/[^\w\s]/g,"\\$&")}]`}function tJ(A){let j=Object.create(null),q=Object.create(null);for(let{label:B}of A){j[B[0]]=!0;for(let G=1;G<B.length;G++)q[B[G]]=!0}let $=VK(j)+VK(q)+"*$";return[new RegExp("^"+$),new RegExp($)]}function eJ(A){let j=A.map((B)=>typeof B=="string"?{label:B}:B),[q,$]=j.every((B)=>/^\w+$/.test(B.label))?[/\w*$/,/\w+$/]:tJ(j);return(B)=>{let G=B.matchBefore($);return G||B.explicit?{from:G?G.from:B.pos,options:j,validFor:q}:null}}class L${constructor(A,j,q,$){this.completion=A,this.source=j,this.match=q,this.score=$}}function fj(A){return A.selection.main.from}function xK(A,j){var q;let{source:$}=A,B=j&&$[0]!="^",G=$[$.length-1]!="$";if(!B&&!G)return A;return new RegExp(`${B?"^":""}(?:${$})${G?"$":""}`,(q=A.flags)!==null&&q!==void 0?q:A.ignoreCase?"i":"")}var SK=kA.define();function AZ(A,j,q,$){let{main:B}=A.selection,G=q-B.from,K=$-B.from;return Object.assign(Object.assign({},A.changeByRange((J)=>{if(J!=B&&q!=$&&A.sliceDoc(J.from+G,J.from+K)!=A.sliceDoc(q,$))return{range:J};let Z=A.toText(j);return{changes:{from:J.from+G,to:$==B.from?J.to:J.from+K,insert:Z},range:E.cursor(J.from+G+Z.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}var kK=new WeakMap;function jZ(A){if(!Array.isArray(A))return A;let j=kK.get(A);if(!j)kK.set(A,j=eJ(A));return j}var Nq=b.define(),A7=b.define();class wK{constructor(A){this.pattern=A,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let j=0;j<A.length;){let q=XA(A,j),$=VA(q);this.chars.push(q);let B=A.slice(j,j+$),G=B.toUpperCase();this.folded.push(XA(G==B?B.toLowerCase():G,0)),j+=$}this.astral=A.length!=this.chars.length}ret(A,j){return this.score=A,this.matched=j,this}match(A){if(this.pattern.length==0)return this.ret(-100,[]);if(A.length<this.pattern.length)return null;let{chars:j,folded:q,any:$,precise:B,byWord:G}=this;if(j.length==1){let W=XA(A,0),N=VA(W),_=N==A.length?0:-100;if(W==j[0]);else if(W==q[0])_+=-200;else return null;return this.ret(_,[0,N])}let K=A.indexOf(this.pattern);if(K==0)return this.ret(A.length==this.pattern.length?0:-100,[0,this.pattern.length]);let J=j.length,Z=0;if(K<0){for(let W=0,N=Math.min(A.length,200);W<N&&Z<J;){let _=XA(A,W);if(_==j[Z]||_==q[Z])$[Z++]=W;W+=VA(_)}if(Z<J)return null}let X=0,U=0,Y=!1,Q=0,O=-1,F=-1,z=/[a-z]/.test(A),I=!0;for(let W=0,N=Math.min(A.length,200),_=0;W<N&&U<J;){let H=XA(A,W);if(K<0){if(X<J&&H==j[X])B[X++]=W;if(Q<J)if(H==j[Q]||H==q[Q]){if(Q==0)O=W;F=W+1,Q++}else Q=0}let D,T=H<255?H>=48&&H<=57||H>=97&&H<=122?2:H>=65&&H<=90?1:0:(D=H6(H))!=D.toLowerCase()?1:D!=D.toUpperCase()?2:0;if(!W||T==1&&z||_==0&&T!=0){if(j[U]==H||q[U]==H&&(Y=!0))G[U++]=W;else if(G.length)I=!1}_=T,W+=VA(H)}if(U==J&&G[0]==0&&I)return this.result(-100+(Y?-200:0),G,A);if(Q==J&&O==0)return this.ret(-200-A.length+(F==A.length?0:-100),[0,F]);if(K>-1)return this.ret(-700-A.length,[K,K+this.pattern.length]);if(Q==J)return this.ret(-900-A.length,[O,F]);if(U==J)return this.result(-100+(Y?-200:0)+-700+(I?0:-1100),G,A);return j.length==2?null:this.result(($[0]?-700:0)+-200+-1100,$,A)}result(A,j,q){let $=[],B=0;for(let G of j){let K=G+(this.astral?VA(XA(q,G)):1);if(B&&$[B-1]==G)$[B-1]=K;else $[B++]=G,$[B++]=K}return this.ret(A-q.length,$)}}class hK{constructor(A){this.pattern=A,this.matched=[],this.score=0,this.folded=A.toLowerCase()}match(A){if(A.length<this.pattern.length)return null;let j=A.slice(0,this.pattern.length),q=j==this.pattern?0:j.toLowerCase()==this.folded?-200:null;if(q==null)return null;return this.matched=[0,j.length],this.score=q+(A.length==this.pattern.length?0:-100),this}}var KA=k.define({combine(A){return FA(A,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:qZ,filterStrict:!1,compareCompletions:(j,q)=>j.label.localeCompare(q.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(j,q)=>j&&q,closeOnBlur:(j,q)=>j&&q,icons:(j,q)=>j&&q,tooltipClass:(j,q)=>($)=>LK(j($),q($)),optionClass:(j,q)=>($)=>LK(j($),q($)),addToOptions:(j,q)=>j.concat(q),filterStrict:(j,q)=>j||q})}});function LK(A,j){return A?j?A+" "+j:A:j}function qZ(A,j,q,$,B,G){let K=A.textDirection==d.RTL,J=K,Z=!1,X="top",U,Y,Q=j.left-B.left,O=B.right-j.right,F=$.right-$.left,z=$.bottom-$.top;if(J&&Q<Math.min(F,O))J=!1;else if(!J&&O<Math.min(F,Q))J=!0;if(F<=(J?Q:O))U=Math.max(B.top,Math.min(q.top,B.bottom-z))-j.top,Y=Math.min(400,J?Q:O);else{Z=!0,Y=Math.min(400,(K?j.right:B.right-j.left)-30);let N=B.bottom-j.bottom;if(N>=z||N>j.top)U=q.bottom-j.top;else X="bottom",U=j.bottom-q.top}let I=(j.bottom-j.top)/G.offsetHeight,W=(j.right-j.left)/G.offsetWidth;return{style:`${X}: ${U/I}px; max-width: ${Y/W}px`,class:"cm-completionInfo-"+(Z?K?"left-narrow":"right-narrow":J?"left":"right")}}function $Z(A){let j=A.addToOptions.slice();if(A.icons)j.push({render(q){let $=document.createElement("div");if($.classList.add("cm-completionIcon"),q.type)$.classList.add(...q.type.split(/\s+/g).map((B)=>"cm-completionIcon-"+B));return $.setAttribute("aria-hidden","true"),$},position:20});return j.push({render(q,$,B,G){let K=document.createElement("span");K.className="cm-completionLabel";let J=q.displayLabel||q.label,Z=0;for(let X=0;X<G.length;){let U=G[X++],Y=G[X++];if(U>Z)K.appendChild(document.createTextNode(J.slice(Z,U)));let Q=K.appendChild(document.createElement("span"));Q.appendChild(document.createTextNode(J.slice(U,Y))),Q.className="cm-completionMatchedText",Z=Y}if(Z<J.length)K.appendChild(document.createTextNode(J.slice(Z)));return K},position:50},{render(q){if(!q.detail)return null;let $=document.createElement("span");return $.className="cm-completionDetail",$.textContent=q.detail,$},position:80}),j.sort((q,$)=>q.position-$.position).map((q)=>q.render)}function V$(A,j,q){if(A<=q)return{from:0,to:A};if(j<0)j=0;if(j<=A>>1){let B=Math.floor(j/q);return{from:B*q,to:(B+1)*q}}let $=Math.floor((A-j)/q);return{from:A-($+1)*q,to:A-$*q}}class vK{constructor(A,j,q){this.view=A,this.stateField=j,this.applyCompletion=q,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:(J)=>this.placeInfo(J),key:this},this.space=null,this.currentClass="";let $=A.state.field(j),{options:B,selected:G}=$.open,K=A.state.facet(KA);this.optionContent=$Z(K),this.optionClass=K.optionClass,this.tooltipClass=K.tooltipClass,this.range=V$(B.length,G,K.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(A.state),this.dom.addEventListener("mousedown",(J)=>{let{options:Z}=A.state.field(j).open;for(let X=J.target,U;X&&X!=this.dom;X=X.parentNode)if(X.nodeName=="LI"&&(U=/-(\d+)$/.exec(X.id))&&+U[1]<Z.length){this.applyCompletion(A,Z[+U[1]]),J.preventDefault();return}}),this.dom.addEventListener("focusout",(J)=>{let Z=A.state.field(this.stateField,!1);if(Z&&Z.tooltip&&A.state.facet(KA).closeOnBlur&&J.relatedTarget!=A.contentDOM)A.dispatch({effects:A7.of(null)})}),this.showOptions(B,$.id)}mount(){this.updateSel()}showOptions(A,j){if(this.list)this.list.remove();this.list=this.dom.appendChild(this.createListBox(A,j,this.range)),this.list.addEventListener("scroll",()=>{if(this.info)this.view.requestMeasure(this.placeInfoReq)})}update(A){var j;let q=A.state.field(this.stateField),$=A.startState.field(this.stateField);if(this.updateTooltipClass(A.state),q!=$){let{options:B,selected:G,disabled:K}=q.open;if(!$.open||$.open.options!=B)this.range=V$(B.length,G,A.state.facet(KA).maxRenderedOptions),this.showOptions(B,q.id);if(this.updateSel(),K!=((j=$.open)===null||j===void 0?void 0:j.disabled))this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!K)}}updateTooltipClass(A){let j=this.tooltipClass(A);if(j!=this.currentClass){for(let q of this.currentClass.split(" "))if(q)this.dom.classList.remove(q);for(let q of j.split(" "))if(q)this.dom.classList.add(q);this.currentClass=j}}positioned(A){if(this.space=A,this.info)this.view.requestMeasure(this.placeInfoReq)}updateSel(){let A=this.view.state.field(this.stateField),j=A.open;if(j.selected>-1&&j.selected<this.range.from||j.selected>=this.range.to)this.range=V$(j.options.length,j.selected,this.view.state.facet(KA).maxRenderedOptions),this.showOptions(j.options,A.id);if(this.updateSelectedOption(j.selected)){this.destroyInfo();let{completion:q}=j.options[j.selected],{info:$}=q;if(!$)return;let B=typeof $==="string"?document.createTextNode($):$(q);if(!B)return;if("then"in B)B.then((G)=>{if(G&&this.view.state.field(this.stateField,!1)==A)this.addInfoPane(G,q)}).catch((G)=>YA(this.view.state,G,"completion info"));else this.addInfoPane(B,q)}}addInfoPane(A,j){this.destroyInfo();let q=this.info=document.createElement("div");if(q.className="cm-tooltip cm-completionInfo",A.nodeType!=null)q.appendChild(A),this.infoDestroy=null;else{let{dom:$,destroy:B}=A;q.appendChild($),this.infoDestroy=B||null}this.dom.appendChild(q),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(A){let j=null;for(let q=this.list.firstChild,$=this.range.from;q;q=q.nextSibling,$++)if(q.nodeName!="LI"||!q.id)$--;else if($==A){if(!q.hasAttribute("aria-selected"))q.setAttribute("aria-selected","true"),j=q}else if(q.hasAttribute("aria-selected"))q.removeAttribute("aria-selected");if(j)GZ(this.list,j);return j}measureInfo(){let A=this.dom.querySelector("[aria-selected]");if(!A||!this.info)return null;let j=this.dom.getBoundingClientRect(),q=this.info.getBoundingClientRect(),$=A.getBoundingClientRect(),B=this.space;if(!B){let G=this.dom.ownerDocument.documentElement;B={left:0,top:0,right:G.clientWidth,bottom:G.clientHeight}}if($.top>Math.min(B.bottom,j.bottom)-10||$.bottom<Math.max(B.top,j.top)+10)return null;return this.view.state.facet(KA).positionInfo(this.view,j,$,q,B,this.dom)}placeInfo(A){if(this.info)if(A){if(A.style)this.info.style.cssText=A.style;this.info.className="cm-tooltip cm-completionInfo "+(A.class||"")}else this.info.style.cssText="top: -1e6px"}createListBox(A,j,q){let $=document.createElement("ul");$.id=j,$.setAttribute("role","listbox"),$.setAttribute("aria-expanded","true"),$.setAttribute("aria-label",this.view.state.phrase("Completions")),$.addEventListener("mousedown",(G)=>{if(G.target==$)G.preventDefault()});let B=null;for(let G=q.from;G<q.to;G++){let{completion:K,match:J}=A[G],{section:Z}=K;if(Z){let Y=typeof Z=="string"?Z:Z.name;if(Y!=B&&(G>q.from||q.from==0))if(B=Y,typeof Z!="string"&&Z.header)$.appendChild(Z.header(Z));else{let Q=$.appendChild(document.createElement("completion-section"));Q.textContent=Y}}let X=$.appendChild(document.createElement("li"));X.id=j+"-"+G,X.setAttribute("role","option");let U=this.optionClass(K);if(U)X.className=U;for(let Y of this.optionContent){let Q=Y(K,this.view.state,this.view,J);if(Q)X.appendChild(Q)}}if(q.from)$.classList.add("cm-completionListIncompleteTop");if(q.to<A.length)$.classList.add("cm-completionListIncompleteBottom");return $}destroyInfo(){if(this.info){if(this.infoDestroy)this.infoDestroy();this.info.remove(),this.info=null}}destroy(){this.destroyInfo()}}function BZ(A,j){return(q)=>new vK(q,A,j)}function GZ(A,j){let q=A.getBoundingClientRect(),$=j.getBoundingClientRect(),B=q.height/A.offsetHeight;if($.top<q.top)A.scrollTop-=(q.top-$.top)/B;else if($.bottom>q.bottom)A.scrollTop+=($.bottom-q.bottom)/B}function PK(A){return(A.boost||0)*100+(A.apply?10:0)+(A.info?5:0)+(A.type?1:0)}function KZ(A,j){let q=[],$=null,B=(X)=>{q.push(X);let{section:U}=X.completion;if(U){if(!$)$=[];let Y=typeof U=="string"?U:U.name;if(!$.some((Q)=>Q.name==Y))$.push(typeof U=="string"?{name:Y}:U)}},G=j.facet(KA);for(let X of A)if(X.hasResult()){let U=X.result.getMatch;if(X.result.filter===!1)for(let Y of X.result.options)B(new L$(Y,X.source,U?U(Y):[],1e9-q.length));else{let Y=j.sliceDoc(X.from,X.to),Q,O=G.filterStrict?new hK(Y):new wK(Y);for(let F of X.result.options)if(Q=O.match(F.label)){let z=!F.displayLabel?Q.matched:U?U(F,Q.matched):[];B(new L$(F,X.source,z,Q.score+(F.boost||0)))}}}if($){let X=Object.create(null),U=0,Y=(Q,O)=>{var F,z;return((F=Q.rank)!==null&&F!==void 0?F:1e9)-((z=O.rank)!==null&&z!==void 0?z:1e9)||(Q.name<O.name?-1:1)};for(let Q of $.sort(Y))U-=1e5,X[Q.name]=U;for(let Q of q){let{section:O}=Q.completion;if(O)Q.score+=X[typeof O=="string"?O:O.name]}}let K=[],J=null,Z=G.compareCompletions;for(let X of q.sort((U,Y)=>Y.score-U.score||Z(U.completion,Y.completion))){let U=X.completion;if(!J||J.label!=U.label||J.detail!=U.detail||J.type!=null&&U.type!=null&&J.type!=U.type||J.apply!=U.apply||J.boost!=U.boost)K.push(X);else if(PK(X.completion)>PK(J))K[K.length-1]=X;J=X.completion}return K}class Y6{constructor(A,j,q,$,B,G){this.options=A,this.attrs=j,this.tooltip=q,this.timestamp=$,this.selected=B,this.disabled=G}setSelected(A,j){return A==this.selected||A>=this.options.length?this:new Y6(this.options,TK(j,A),this.tooltip,this.timestamp,A,this.disabled)}static build(A,j,q,$,B,G){if($&&!G&&A.some((Z)=>Z.isPending))return $.setDisabled();let K=KZ(A,j);if(!K.length)return $&&A.some((Z)=>Z.isPending)?$.setDisabled():null;let J=j.facet(KA).selectOnOpen?0:-1;if($&&$.selected!=J&&$.selected!=-1){let Z=$.options[$.selected].completion;for(let X=0;X<K.length;X++)if(K[X].completion==Z){J=X;break}}return new Y6(K,TK(q,J),{pos:A.reduce((Z,X)=>X.hasResult()?Math.min(Z,X.from):Z,1e8),create:QZ,above:B.aboveCursor},$?$.timestamp:Date.now(),J,!1)}map(A){return new Y6(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:A.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Y6(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Dq{constructor(A,j,q){this.active=A,this.id=j,this.open=q}static start(){return new Dq(UZ,"cm-ac-"+Math.floor(Math.random()*2000000).toString(36),null)}update(A){let{state:j}=A,q=j.facet(KA),B=(q.override||j.languageDataAt("autocomplete",fj(j)).map(jZ)).map((J)=>{return(this.active.find((X)=>X.source==J)||new fA(J,this.active.some((X)=>X.state!=0)?1:0)).update(A,q)});if(B.length==this.active.length&&B.every((J,Z)=>J==this.active[Z]))B=this.active;let G=this.open,K=A.effects.some((J)=>J.is(T$));if(G&&A.docChanged)G=G.map(A.changes);if(A.selection||B.some((J)=>J.hasResult()&&A.changes.touchesRange(J.from,J.to))||!JZ(B,this.active)||K)G=Y6.build(B,j,this.id,G,q,K);else if(G&&G.disabled&&!B.some((J)=>J.isPending))G=null;if(!G&&B.every((J)=>!J.isPending)&&B.some((J)=>J.hasResult()))B=B.map((J)=>J.hasResult()?new fA(J.source,0):J);for(let J of A.effects)if(J.is(uK))G=G&&G.setSelected(J.value,this.id);return B==this.active&&G==this.open?this:new Dq(B,this.id,G)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ZZ:XZ}}function JZ(A,j){if(A==j)return!0;for(let q=0,$=0;;){while(q<A.length&&!A[q].hasResult())q++;while($<j.length&&!j[$].hasResult())$++;let B=q==A.length,G=$==j.length;if(B||G)return B==G;if(A[q++].result!=j[$++].result)return!1}}var ZZ={"aria-autocomplete":"list"},XZ={};function TK(A,j){let q={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":A};if(j>-1)q["aria-activedescendant"]=A+"-"+j;return q}var UZ=[];function mK(A,j){if(A.isUserEvent("input.complete")){let $=A.annotation(SK);if($&&j.activateOnCompletion($))return 12}let q=A.isUserEvent("input.type");return q&&j.activateOnTyping?5:q?1:A.isUserEvent("delete.backward")?2:A.selection?8:A.docChanged?16:0}class fA{constructor(A,j,q=!1){this.source=A,this.state=j,this.explicit=q}hasResult(){return!1}get isPending(){return this.state==1}update(A,j){let q=mK(A,j),$=this;if(q&8||q&16&&this.touches(A))$=new fA($.source,0);if(q&4&&$.state==0)$=new fA(this.source,1);$=$.updateFor(A,q);for(let B of A.effects)if(B.is(Nq))$=new fA($.source,1,B.value);else if(B.is(A7))$=new fA($.source,0);else if(B.is(T$)){for(let G of B.value)if(G.source==$.source)$=G}return $}updateFor(A,j){return this.map(A.changes)}map(A){return this}touches(A){return A.changes.touchesRange(fj(A.state))}}class Q6 extends fA{constructor(A,j,q,$,B,G){super(A,3,j);this.limit=q,this.result=$,this.from=B,this.to=G}hasResult(){return!0}updateFor(A,j){var q;if(!(j&3))return this.map(A.changes);let $=this.result;if($.map&&!A.changes.empty)$=$.map($,A.changes);let B=A.changes.mapPos(this.from),G=A.changes.mapPos(this.to,1),K=fj(A.state);if(K>G||!$||j&2&&(fj(A.startState)==this.from||K<this.limit))return new fA(this.source,j&4?1:0);let J=A.changes.mapPos(this.limit);if(YZ($.validFor,A.state,B,G))return new Q6(this.source,this.explicit,J,$,B,G);if($.update&&($=$.update($,B,G,new P$(A.state,K,!1))))return new Q6(this.source,this.explicit,J,$,$.from,(q=$.to)!==null&&q!==void 0?q:fj(A.state));return new fA(this.source,1,this.explicit)}map(A){if(A.empty)return this;if(!(this.result.map?this.result.map(this.result,A):this.result))return new fA(this.source,0);return new Q6(this.source,this.explicit,A.mapPos(this.limit),this.result,A.mapPos(this.from),A.mapPos(this.to,1))}touches(A){return A.changes.touchesRange(this.from,this.to)}}function YZ(A,j,q,$){if(!A)return!1;let B=j.sliceDoc(q,$);return typeof A=="function"?A(B,q,$,j):xK(A,!0).test(B)}var T$=b.define({map(A,j){return A.map((q)=>q.map(j))}}),uK=b.define(),DA=o.define({create(){return Dq.start()},update(A,j){return A.update(j)},provide:(A)=>[u6.from(A,(j)=>j.tooltip),R.contentAttributes.from(A,(j)=>j.attrs)]});function C$(A,j){let q=j.completion.apply||j.completion.label,$=A.state.field(DA).active.find((B)=>B.source==j.source);if(!($ instanceof Q6))return!1;if(typeof q=="string")A.dispatch(Object.assign(Object.assign({},AZ(A.state,q,$.from,$.to)),{annotations:SK.of(j.completion)}));else q(A,j.completion,$.from,$.to);return!0}var QZ=BZ(DA,C$);function _q(A,j="option"){return(q)=>{let $=q.state.field(DA,!1);if(!$||!$.open||$.open.disabled||Date.now()-$.open.timestamp<q.state.facet(KA).interactionDelay)return!1;let B=1,G;if(j=="page"&&(G=u0(q,$.open.tooltip)))B=Math.max(2,Math.floor(G.dom.offsetHeight/G.dom.querySelector("li").offsetHeight)-1);let{length:K}=$.open.options,J=$.open.selected>-1?$.open.selected+B*(A?1:-1):A?0:K-1;if(J<0)J=j=="page"?0:K-1;else if(J>=K)J=j=="page"?K-1:0;return q.dispatch({effects:uK.of(J)}),!0}}var OZ=(A)=>{let j=A.state.field(DA,!1);if(A.state.readOnly||!j||!j.open||j.open.selected<0||j.open.disabled||Date.now()-j.open.timestamp<A.state.facet(KA).interactionDelay)return!1;return C$(A,j.open.options[j.open.selected])},CK=(A)=>{if(!A.state.field(DA,!1))return!1;return A.dispatch({effects:Nq.of(!0)}),!0},FZ=(A)=>{let j=A.state.field(DA,!1);if(!j||!j.active.some((q)=>q.state!=0))return!1;return A.dispatch({effects:A7.of(null)}),!0};class gK{constructor(A,j){this.active=A,this.context=j,this.time=Date.now(),this.updates=[],this.done=void 0}}var zZ=50,IZ=1000,WZ=r.fromClass(class{constructor(A){this.view=A,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let j of A.state.field(DA).active)if(j.isPending)this.startQuery(j)}update(A){let j=A.state.field(DA),q=A.state.facet(KA);if(!A.selectionSet&&!A.docChanged&&A.startState.field(DA)==j)return;let $=A.transactions.some((G)=>{let K=mK(G,q);return K&8||(G.selection||G.docChanged)&&!(K&3)});for(let G=0;G<this.running.length;G++){let K=this.running[G];if($||K.context.abortOnDocChange&&A.docChanged||K.updates.length+A.transactions.length>zZ&&Date.now()-K.time>IZ){for(let J of K.context.abortListeners)try{J()}catch(Z){YA(this.view.state,Z)}K.context.abortListeners=null,this.running.splice(G--,1)}else K.updates.push(...A.transactions)}if(this.debounceUpdate>-1)clearTimeout(this.debounceUpdate);if(A.transactions.some((G)=>G.effects.some((K)=>K.is(Nq))))this.pendingStart=!0;let B=this.pendingStart?50:q.activateOnTypingDelay;if(this.debounceUpdate=j.active.some((G)=>G.isPending&&!this.running.some((K)=>K.active.source==G.source))?setTimeout(()=>this.startUpdate(),B):-1,this.composing!=0){for(let G of A.transactions)if(G.isUserEvent("input.type"))this.composing=2;else if(this.composing==2&&G.selection)this.composing=3}}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:A}=this.view,j=A.field(DA);for(let q of j.active)if(q.isPending&&!this.running.some(($)=>$.active.source==q.source))this.startQuery(q);if(this.running.length&&j.open&&j.open.disabled)this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(KA).updateSyncTime)}startQuery(A){let{state:j}=this.view,q=fj(j),$=new P$(j,q,A.explicit,this.view),B=new gK(A,$);this.running.push(B),Promise.resolve(A.source($)).then((G)=>{if(!B.context.aborted)B.done=G||null,this.scheduleAccept()},(G)=>{this.view.dispatch({effects:A7.of(null)}),YA(this.view.state,G)})}scheduleAccept(){if(this.running.every((A)=>A.done!==void 0))this.accept();else if(this.debounceAccept<0)this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(KA).updateSyncTime)}accept(){var A;if(this.debounceAccept>-1)clearTimeout(this.debounceAccept);this.debounceAccept=-1;let j=[],q=this.view.state.facet(KA),$=this.view.state.field(DA);for(let B=0;B<this.running.length;B++){let G=this.running[B];if(G.done===void 0)continue;if(this.running.splice(B--,1),G.done){let J=fj(G.updates.length?G.updates[0].startState:this.view.state),Z=Math.min(J,G.done.from+(G.active.explicit?0:1)),X=new Q6(G.active.source,G.active.explicit,Z,G.done,G.done.from,(A=G.done.to)!==null&&A!==void 0?A:J);for(let U of G.updates)X=X.update(U,q);if(X.hasResult()){j.push(X);continue}}let K=$.active.find((J)=>J.source==G.active.source);if(K&&K.isPending)if(G.done==null){let J=new fA(G.active.source,0);for(let Z of G.updates)J=J.update(Z,q);if(!J.isPending)j.push(J)}else this.startQuery(K)}if(j.length||$.open&&$.open.disabled)this.view.dispatch({effects:T$.of(j)})}},{eventHandlers:{blur(A){let j=this.view.state.field(DA,!1);if(j&&j.tooltip&&this.view.state.facet(KA).closeOnBlur){let q=j.open&&u0(this.view,j.open.tooltip);if(!q||!q.dom.contains(A.relatedTarget))setTimeout(()=>this.view.dispatch({effects:A7.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){if(this.composing==3)setTimeout(()=>this.view.dispatch({effects:Nq.of(!1)}),20);this.composing=0}}}),EZ=typeof navigator=="object"&&/Win/.test(navigator.platform),HZ=lA.highest(R.domEventHandlers({keydown(A,j){let q=j.state.field(DA,!1);if(!q||!q.open||q.open.disabled||q.open.selected<0||A.key.length>1||A.ctrlKey&&!(EZ&&A.altKey)||A.metaKey)return!1;let $=q.open.options[q.open.selected],B=q.active.find((K)=>K.source==$.source),G=$.completion.commitCharacters||B.result.commitCharacters;if(G&&G.indexOf(A.key)>-1)C$(j,$);return!1}})),_Z=R.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:0.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:0.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var j7={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gj=b.define({map(A,j){let q=j.mapPos(A,-1,ZA.TrackAfter);return q==null?void 0:q}}),y$=new class extends Aj{};y$.startSide=1;y$.endSide=-1;var fK=o.define({create(){return h.empty},update(A,j){if(A=A.map(j.changes),j.selection){let q=j.state.doc.lineAt(j.selection.main.head);A=A.update({filter:($)=>$>=q.from&&$<=q.to})}for(let q of j.effects)if(q.is(gj))A=A.update({add:[y$.range(q.value,q.value+1)]});return A}});function pK(){return[DZ,fK]}var k$="()[]{}<>«»»«［］｛｝";function lK(A){for(let j=0;j<k$.length;j+=2)if(k$.charCodeAt(j)==A)return k$.charAt(j+1);return H6(A<128?A:A+1)}function dK(A,j){return A.languageDataAt("closeBrackets",j)[0]||j7}var NZ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),DZ=R.inputHandler.of((A,j,q,$)=>{if((NZ?A.composing:A.compositionStarted)||A.state.readOnly)return!1;let B=A.state.selection.main;if($.length>2||$.length==2&&VA(XA($,0))==1||j!=B.from||q!=B.to)return!1;let G=RZ(A.state,$);if(!G)return!1;return A.dispatch(G),!0}),MZ=({state:A,dispatch:j})=>{if(A.readOnly)return!1;let $=dK(A,A.selection.main.head).brackets||j7.brackets,B=null,G=A.changeByRange((K)=>{if(K.empty){let J=VZ(A.doc,K.head);for(let Z of $)if(Z==J&&Mq(A.doc,K.head)==lK(XA(Z,0)))return{changes:{from:K.head-Z.length,to:K.head+Z.length},range:E.cursor(K.head-Z.length)}}return{range:B=K}});if(!B)j(A.update(G,{scrollIntoView:!0,userEvent:"delete.backward"}));return!B},cK=[{key:"Backspace",run:MZ}];function RZ(A,j){let q=dK(A,A.selection.main.head),$=q.brackets||j7.brackets;for(let B of $){let G=lK(XA(B,0));if(j==B)return G==B?PZ(A,B,$.indexOf(B+B+B)>-1,q):kZ(A,B,G,q.before||j7.before);if(j==G&&sK(A,A.selection.main.from))return LZ(A,B,G)}return null}function sK(A,j){let q=!1;return A.field(fK).between(0,A.doc.length,($)=>{if($==j)q=!0}),q}function Mq(A,j){let q=A.sliceString(j,j+2);return q.slice(0,VA(XA(q,0)))}function VZ(A,j){let q=A.sliceString(j-2,j);return VA(XA(q,0))==q.length?q:q.slice(1)}function kZ(A,j,q,$){let B=null,G=A.changeByRange((K)=>{if(!K.empty)return{changes:[{insert:j,from:K.from},{insert:q,from:K.to}],effects:gj.of(K.to+j.length),range:E.range(K.anchor+j.length,K.head+j.length)};let J=Mq(A.doc,K.head);if(!J||/\s/.test(J)||$.indexOf(J)>-1)return{changes:{insert:j+q,from:K.head},effects:gj.of(K.head+j.length),range:E.cursor(K.head+j.length)};return{range:B=K}});return B?null:A.update(G,{scrollIntoView:!0,userEvent:"input.type"})}function LZ(A,j,q){let $=null,B=A.changeByRange((G)=>{if(G.empty&&Mq(A.doc,G.head)==q)return{changes:{from:G.head,to:G.head+q.length,insert:q},range:E.cursor(G.head+q.length)};return $={range:G}});return $?null:A.update(B,{scrollIntoView:!0,userEvent:"input.type"})}function PZ(A,j,q,$){let B=$.stringPrefixes||j7.stringPrefixes,G=null,K=A.changeByRange((J)=>{if(!J.empty)return{changes:[{insert:j,from:J.from},{insert:j,from:J.to}],effects:gj.of(J.to+j.length),range:E.range(J.anchor+j.length,J.head+j.length)};let Z=J.head,X=Mq(A.doc,Z),U;if(X==j){if(yK(A,Z))return{changes:{insert:j+j,from:Z},effects:gj.of(Z+j.length),range:E.cursor(Z+j.length)};else if(sK(A,Z)){let Q=q&&A.sliceDoc(Z,Z+j.length*3)==j+j+j?j+j+j:j;return{changes:{from:Z,to:Z+Q.length,insert:Q},range:E.cursor(Z+Q.length)}}}else if(q&&A.sliceDoc(Z-2*j.length,Z)==j+j&&(U=bK(A,Z-2*j.length,B))>-1&&yK(A,U))return{changes:{insert:j+j+j+j,from:Z},effects:gj.of(Z+j.length),range:E.cursor(Z+j.length)};else if(A.charCategorizer(Z)(X)!=l.Word){if(bK(A,Z,B)>-1&&!TZ(A,Z,j,B))return{changes:{insert:j+j,from:Z},effects:gj.of(Z+j.length),range:E.cursor(Z+j.length)}}return{range:G=J}});return G?null:A.update(K,{scrollIntoView:!0,userEvent:"input.type"})}function yK(A,j){let q=GA(A).resolveInner(j+1);return q.parent&&q.from==j}function TZ(A,j,q,$){let B=GA(A).resolveInner(j,-1),G=$.reduce((K,J)=>Math.max(K,J.length),0);for(let K=0;K<5;K++){let J=A.sliceDoc(B.from,Math.min(B.to,B.from+q.length+G)),Z=J.indexOf(q);if(!Z||Z>-1&&$.indexOf(J.slice(0,Z))>-1){let U=B.firstChild;while(U&&U.from==B.from&&U.to-U.from>q.length+Z){if(A.sliceDoc(U.to-q.length,U.to)==q)return!1;U=U.firstChild}return!0}let X=B.to==j&&B.parent;if(!X)break;B=X}return!1}function bK(A,j,q){let $=A.charCategorizer(j);if($(A.sliceDoc(j-1,j))!=l.Word)return j;for(let B of q){let G=j-B.length;if(A.sliceDoc(G,j)==B&&$(A.sliceDoc(G-1,G))!=l.Word)return G}return-1}function iK(A={}){return[HZ,DA,KA.of(A),WZ,CZ,_Z]}var b$=[{key:"Ctrl-Space",run:CK},{mac:"Alt-`",run:CK},{key:"Escape",run:FZ},{key:"ArrowDown",run:_q(!0)},{key:"ArrowUp",run:_q(!1)},{key:"PageDown",run:_q(!0,"page")},{key:"PageUp",run:_q(!1,"page")},{key:"Enter",run:OZ}],CZ=lA.highest(v6.computeN([KA],(A)=>A.facet(KA).defaultKeymap?[b$]:[]));class x${constructor(A,j,q){this.from=A,this.to=j,this.diagnostic=q}}class pj{constructor(A,j,q){this.diagnostics=A,this.panel=j,this.selected=q}static init(A,j,q){let $=q.facet(q7).markerFilter;if($)A=$(A,q);let B=A.slice().sort((X,U)=>X.from-U.from||X.to-U.to),G=new RA,K=[],J=0;for(let X=0;;){let U=X==B.length?null:B[X];if(!U&&!K.length)break;let Y,Q;if(K.length)Y=J,Q=K.reduce((F,z)=>Math.min(F,z.to),U&&U.from>Y?U.from:1e8);else Y=U.from,Q=U.to,K.push(U),X++;while(X<B.length){let F=B[X];if(F.from==Y&&(F.to>F.from||F.to==Y))K.push(F),X++,Q=Math.min(F.to,Q);else{Q=Math.min(F.from,Q);break}}let O=fZ(K);if(K.some((F)=>F.from==F.to||F.from==F.to-1&&q.doc.lineAt(F.from).to==F.from))G.add(Y,Y,C.widget({widget:new A4(O),diagnostics:K.slice()}));else{let F=K.reduce((z,I)=>I.markClass?z+" "+I.markClass:z,"");G.add(Y,Q,C.mark({class:"cm-lintRange cm-lintRange-"+O+F,diagnostics:K.slice(),inclusiveEnd:K.some((z)=>z.to>Q)}))}J=Q;for(let F=0;F<K.length;F++)if(K[F].to<=J)K.splice(F--,1)}let Z=G.finish();return new pj(Z,j,O6(Z))}}function O6(A,j=null,q=0){let $=null;return A.between(q,1e9,(B,G,{spec:K})=>{if(j&&K.diagnostics.indexOf(j)<0)return;if(!$)$=new x$(B,G,j||K.diagnostics[0]);else if(K.diagnostics.indexOf($.diagnostic)<0)return!1;else $=new x$($.from,G,$.diagnostic)}),$}function yZ(A,j){let q=j.pos,$=j.end||q,B=A.state.facet(q7).hideOn(A,q,$);if(B!=null)return B;let G=A.startState.doc.lineAt(j.pos);return!!(A.effects.some((K)=>K.is(aK))||A.changes.touchesRange(G.from,Math.max(G.to,$)))}function bZ(A,j){return A.field(CA,!1)?j:j.concat(b.appendConfig.of(pZ))}var aK=b.define(),w$=b.define(),rK=b.define(),CA=o.define({create(){return new pj(C.none,null,null)},update(A,j){if(j.docChanged&&A.diagnostics.size){let q=A.diagnostics.map(j.changes),$=null,B=A.panel;if(A.selected){let G=j.changes.mapPos(A.selected.from,1);$=O6(q,A.selected.diagnostic,G)||O6(q,null,G)}if(!q.size&&B&&j.state.facet(q7).autoPanel)B=null;A=new pj(q,B,$)}for(let q of j.effects)if(q.is(aK)){let $=!j.state.facet(q7).autoPanel?A.panel:q.value.length?$7.open:null;A=pj.init(q.value,$,j.state)}else if(q.is(w$))A=new pj(A.diagnostics,q.value?$7.open:null,A.selected);else if(q.is(rK))A=new pj(A.diagnostics,A.panel,q.value);return A},provide:(A)=>[wj.from(A,(j)=>j.panel),R.decorations.from(A,(j)=>j.diagnostics)]});var xZ=C.mark({class:"cm-lintRange cm-lintRange-active"});function SZ(A,j,q){let{diagnostics:$}=A.state.field(CA),B,G=-1,K=-1;$.between(j-(q<0?1:0),j+(q>0?1:0),(Z,X,{spec:U})=>{if(j>=Z&&j<=X&&(Z==X||(j>Z||q>0)&&(j<X||q<0)))return B=U.diagnostics,G=Z,K=X,!1});let J=A.state.facet(q7).tooltipFilter;if(B&&J)B=J(B,A.state);if(!B)return null;return{pos:G,end:K,above:A.state.doc.lineAt(G).to<K,create(){return{dom:wZ(A,B)}}}}function wZ(A,j){return f("ul",{class:"cm-tooltip-lint"},j.map((q)=>eK(A,q,!1)))}var hZ=(A)=>{let j=A.state.field(CA,!1);if(!j||!j.panel)A.dispatch({effects:bZ(A.state,[w$.of(!0)])});let q=hj(A,$7.open);if(q)q.dom.querySelector(".cm-panel-lint ul").focus();return!0},nK=(A)=>{let j=A.state.field(CA,!1);if(!j||!j.panel)return!1;return A.dispatch({effects:w$.of(!1)}),!0},vZ=(A)=>{let j=A.state.field(CA,!1);if(!j)return!1;let q=A.state.selection.main,$=j.diagnostics.iter(q.to+1);if(!$.value){if($=j.diagnostics.iter(0),!$.value||$.from==q.from&&$.to==q.to)return!1}return A.dispatch({selection:{anchor:$.from,head:$.to},scrollIntoView:!0}),!0};var oK=[{key:"Mod-Shift-m",run:hZ,preventDefault:!0},{key:"F8",run:vZ}];var q7=k.define({combine(A){return Object.assign({sources:A.map((j)=>j.source).filter((j)=>j!=null)},FA(A.map((j)=>j.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(j,q)=>!j?q:!q?j:($)=>j($)||q($)}))}});function tK(A){let j=[];if(A)A:for(let{name:q}of A){for(let $=0;$<q.length;$++){let B=q[$];if(/[a-zA-Z]/.test(B)&&!j.some((G)=>G.toLowerCase()==B.toLowerCase())){j.push(B);continue A}}j.push("")}return j}function eK(A,j,q){var $;let B=q?tK(j.actions):[];return f("li",{class:"cm-diagnostic cm-diagnostic-"+j.severity},f("span",{class:"cm-diagnosticText"},j.renderMessage?j.renderMessage(A):j.message),($=j.actions)===null||$===void 0?void 0:$.map((G,K)=>{let J=!1,Z=(Q)=>{if(Q.preventDefault(),J)return;J=!0;let O=O6(A.state.field(CA).diagnostics,j);if(O)G.apply(A,O.from,O.to)},{name:X}=G,U=B[K]?X.indexOf(B[K]):-1,Y=U<0?X:[X.slice(0,U),f("u",X.slice(U,U+1)),X.slice(U+1)];return f("button",{type:"button",class:"cm-diagnosticAction",onclick:Z,onmousedown:Z,"aria-label":` Action: ${X}${U<0?"":` (access key "${B[K]})"`}.`},Y)}),j.source&&f("div",{class:"cm-diagnosticSource"},j.source))}class A4 extends hA{constructor(A){super();this.sev=A}eq(A){return A.sev==this.sev}toDOM(){return f("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class S${constructor(A,j){this.diagnostic=j,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eK(A,j,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class $7{constructor(A){this.view=A,this.items=[];let j=($)=>{if($.keyCode==27)nK(this.view),this.view.focus();else if($.keyCode==38||$.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if($.keyCode==40||$.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if($.keyCode==36)this.moveSelection(0);else if($.keyCode==35)this.moveSelection(this.items.length-1);else if($.keyCode==13)this.view.focus();else if($.keyCode>=65&&$.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:B}=this.items[this.selectedIndex],G=tK(B.actions);for(let K=0;K<G.length;K++)if(G[K].toUpperCase().charCodeAt(0)==$.keyCode){let J=O6(this.view.state.field(CA).diagnostics,B);if(J)B.actions[K].apply(A,J.from,J.to)}}else return;$.preventDefault()},q=($)=>{for(let B=0;B<this.items.length;B++)if(this.items[B].dom.contains($.target))this.moveSelection(B)};this.list=f("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:j,onclick:q}),this.dom=f("div",{class:"cm-panel-lint"},this.list,f("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nK(this.view)},"×")),this.update()}get selectedIndex(){let A=this.view.state.field(CA).selected;if(!A)return-1;for(let j=0;j<this.items.length;j++)if(this.items[j].diagnostic==A.diagnostic)return j;return-1}update(){let{diagnostics:A,selected:j}=this.view.state.field(CA),q=0,$=!1,B=null,G=new Set;A.between(0,this.view.state.doc.length,(K,J,{spec:Z})=>{for(let X of Z.diagnostics){if(G.has(X))continue;G.add(X);let U=-1,Y;for(let Q=q;Q<this.items.length;Q++)if(this.items[Q].diagnostic==X){U=Q;break}if(U<0)Y=new S$(this.view,X),this.items.splice(q,0,Y),$=!0;else if(Y=this.items[U],U>q)this.items.splice(q,U-q),$=!0;if(j&&Y.diagnostic==j.diagnostic){if(!Y.dom.hasAttribute("aria-selected"))Y.dom.setAttribute("aria-selected","true"),B=Y}else if(Y.dom.hasAttribute("aria-selected"))Y.dom.removeAttribute("aria-selected");q++}});while(q<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0))$=!0,this.items.pop();if(this.items.length==0)this.items.push(new S$(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),$=!0;if(B)this.list.setAttribute("aria-activedescendant",B.id),this.view.requestMeasure({key:this,read:()=>({sel:B.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:K,panel:J})=>{let Z=J.height/this.list.offsetHeight;if(K.top<J.top)this.list.scrollTop-=(J.top-K.top)/Z;else if(K.bottom>J.bottom)this.list.scrollTop+=(K.bottom-J.bottom)/Z}});else if(this.selectedIndex<0)this.list.removeAttribute("aria-activedescendant");if($)this.sync()}sync(){let A=this.list.firstChild;function j(){let q=A;A=q.nextSibling,q.remove()}for(let q of this.items)if(q.dom.parentNode==this.list){while(A!=q.dom)j();A=q.dom.nextSibling}else this.list.insertBefore(q.dom,A);while(A)j()}moveSelection(A){if(this.selectedIndex<0)return;let j=this.view.state.field(CA),q=O6(j.diagnostics,this.items[A].diagnostic);if(!q)return;this.view.dispatch({selection:{anchor:q.from,head:q.to},scrollIntoView:!0,effects:rK.of(q)})}static open(A){return new $7(A)}}function mZ(A,j='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${j}>${encodeURIComponent(A)}</svg>')`}function Rq(A){return mZ(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${A}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var uZ=R.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:0.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Rq("#d11")},".cm-lintRange-warning":{backgroundImage:Rq("orange")},".cm-lintRange-info":{backgroundImage:Rq("#999")},".cm-lintRange-hint":{backgroundImage:Rq("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function gZ(A){return A=="error"?4:A=="warning"?3:A=="info"?2:1}function fZ(A){let j="hint",q=1;for(let $ of A){let B=gZ($.severity);if(B>q)q=B,j=$.severity}return j}var pZ=[CA,R.decorations.compute([CA],(A)=>{let{selected:j,panel:q}=A.field(CA);return!j||!q||j.from==j.to?C.none:C.set([xZ.range(j.from,j.to)])}),TG(SZ,{hideOn:yZ}),uZ];var j4=(()=>[xG(),SG(),DG(),S5(),F5(),WG(),_G(),v.allowMultipleSelections.of(!0),G5(),I5(E5,{fallback:!0}),D5(),pK(),iK(),kG(),LG(),VG(),IK(),v6.of([...cK,...XK,...MK,...m5,...U5,...b$,...oK])])();var rA,h$=0,B7=null;function Vq(){if(B7===null||B7.byteLength===0)B7=new Uint8Array(rA.memory.buffer);return B7}var kq=typeof TextEncoder!=="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},lZ=typeof kq.encodeInto==="function"?function(A,j){return kq.encodeInto(A,j)}:function(A,j){let q=kq.encode(A);return j.set(q),{read:A.length,written:q.length}};function dZ(A,j,q){if(q===void 0){let J=kq.encode(A),Z=j(J.length,1)>>>0;return Vq().subarray(Z,Z+J.length).set(J),h$=J.length,Z}let $=A.length,B=j($,1)>>>0,G=Vq(),K=0;for(;K<$;K++){let J=A.charCodeAt(K);if(J>127)break;G[B+K]=J}if(K!==$){if(K!==0)A=A.slice(K);B=q(B,$,$=K+A.length*3,1)>>>0;let J=Vq().subarray(B+K,B+$),Z=lZ(A,J);K+=Z.written,B=q(B,$,K,1)>>>0}return h$=K,B}var q4=typeof TextDecoder!=="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};if(typeof TextDecoder!=="undefined")q4.decode();function cZ(A,j){return A=A>>>0,q4.decode(Vq().subarray(A,A+j))}function $4(A,j,q){let $,B;try{let G=dZ(A,rA.__wbindgen_malloc,rA.__wbindgen_realloc),K=h$,J=rA.run_simulation(G,K,j,q);return $=J[0],B=J[1],cZ(J[0],J[1])}finally{rA.__wbindgen_free($,B,1)}}async function sZ(A,j){if(typeof Response==="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming==="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch($){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",$);else throw $}let q=await A.arrayBuffer();return await WebAssembly.instantiate(q,j)}else{let q=await WebAssembly.instantiate(A,j);if(q instanceof WebAssembly.Instance)return{instance:q,module:A};else return q}}function iZ(){let A={};return A.wbg={},A.wbg.__wbindgen_init_externref_table=function(){let j=rA.__wbindgen_export_0,q=j.grow(4);j.set(0,void 0),j.set(q+0,void 0),j.set(q+1,null),j.set(q+2,!0),j.set(q+3,!1)},A}function nZ(A,j){}function aZ(A,j){return rA=A.exports,B4.__wbindgen_wasm_module=j,B7=null,rA.__wbindgen_start(),rA}async function B4(A){if(rA!==void 0)return rA;if(typeof A!=="undefined")if(Object.getPrototypeOf(A)===Object.prototype)({module_or_path:A}=A);else console.warn("using deprecated parameters for the initialization function; pass a single object instead");if(typeof A==="undefined")A=new URL("icache_sim_bg.wasm",import.meta.url);let j=iZ();if(typeof A==="string"||typeof Request==="function"&&A instanceof Request||typeof URL==="function"&&A instanceof URL)A=fetch(A);nZ(j);let{instance:q,module:$}=await sZ(await A,j);return aZ(q,$)}var G4=B4;var v$={};U4(v$,{default:()=>oZ});var oZ="./icache_sim_bg.wasm";((A)=>{})(v$);var Z4=new R({doc:"",parent:document.querySelector("#editor"),extensions:[j4]}),K4=new R({doc:"click 'Run' to simulate",parent:document.querySelector("#output"),extensions:[R.editable.of(!1)]});function m$(A,j){A.dispatch({changes:{from:0,to:A.state.doc.length,insert:j}})}async function J4(A){return fetch(`/icache_sim/traces/${A}`).then((j)=>j.text()).then((j)=>m$(Z4,j))}G4().then(()=>{let A=document.querySelector("#hit-cycles-input"),j=document.querySelector("#miss-cycles-input");document.querySelector("#simulate-btn").addEventListener("click",()=>{m$(K4,"running simulation ..."),setTimeout(()=>{let B=Z4.state.doc.toString(),G=$4(B,parseInt(A.value),parseInt(j.value));m$(K4,G)},0)});let $=document.querySelector("#traces-select");$.addEventListener("change",(B)=>{J4(B.target.value)}),J4($.value)});

//# debugId=6E21D6D5F9B66AFD64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi5cXG5vZGVfbW9kdWxlc1xcQG1hcmlqblxcZmluZC1jbHVzdGVyLWJyZWFrXFxzcmNcXGluZGV4LmpzIiwgIi4uXFxub2RlX21vZHVsZXNcXEBjb2RlbWlycm9yXFxzdGF0ZVxcZGlzdFxcaW5kZXguanMiLCAiLi5cXG5vZGVfbW9kdWxlc1xcc3R5bGUtbW9kXFxzcmNcXHN0eWxlLW1vZC5qcyIsICIuLlxcbm9kZV9tb2R1bGVzXFx3M2Mta2V5bmFtZVxcaW5kZXguanMiLCAiLi5cXG5vZGVfbW9kdWxlc1xcY3JlbHRcXGluZGV4LmpzIiwgIi4uXFxub2RlX21vZHVsZXNcXEBjb2RlbWlycm9yXFx2aWV3XFxkaXN0XFxpbmRleC5qcyIsICIuLlxcbm9kZV9tb2R1bGVzXFxAbGV6ZXJcXGNvbW1vblxcZGlzdFxcaW5kZXguanMiLCAiLi5cXG5vZGVfbW9kdWxlc1xcQGxlemVyXFxoaWdobGlnaHRcXGRpc3RcXGluZGV4LmpzIiwgIi4uXFxub2RlX21vZHVsZXNcXEBjb2RlbWlycm9yXFxsYW5ndWFnZVxcZGlzdFxcaW5kZXguanMiLCAiLi5cXG5vZGVfbW9kdWxlc1xcQGNvZGVtaXJyb3JcXGNvbW1hbmRzXFxkaXN0XFxpbmRleC5qcyIsICIuLlxcbm9kZV9tb2R1bGVzXFxAY29kZW1pcnJvclxcc2VhcmNoXFxkaXN0XFxpbmRleC5qcyIsICIuLlxcbm9kZV9tb2R1bGVzXFxAY29kZW1pcnJvclxcYXV0b2NvbXBsZXRlXFxkaXN0XFxpbmRleC5qcyIsICIuLlxcbm9kZV9tb2R1bGVzXFxAY29kZW1pcnJvclxcbGludFxcZGlzdFxcaW5kZXguanMiLCAiLi5cXG5vZGVfbW9kdWxlc1xcY29kZW1pcnJvclxcZGlzdFxcaW5kZXguanMiLCAiLi5cXGljYWNoZV9zaW1cXGljYWNoZV9zaW0uanMiLCAiLi5cXGluZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8vIFRoZXNlIGFyZSBmaWxsZWQgd2l0aCByYW5nZXMgKHJhbmdlRnJvbVtpXSB1cCB0byBidXQgbm90IGluY2x1ZGluZ1xuLy8gcmFuZ2VUb1tpXSkgb2YgY29kZSBwb2ludHMgdGhhdCBjb3VudCBhcyBleHRlbmRpbmcgY2hhcmFjdGVycy5cbmxldCByYW5nZUZyb20gPSBbXSwgcmFuZ2VUbyA9IFtdXG5cbjsoKCkgPT4ge1xuICAvLyBDb21wcmVzc2VkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBHcmFwaGVtZV9DbHVzdGVyX0JyZWFrPUV4dGVuZFxuICAvLyBpbmZvcm1hdGlvbiBmcm9tXG4gIC8vIGh0dHA6Ly93d3cudW5pY29kZS5vcmcvUHVibGljLzE2LjAuMC91Y2QvYXV4aWxpYXJ5L0dyYXBoZW1lQnJlYWtQcm9wZXJ0eS50eHQuXG4gIC8vIEVhY2ggcGFpciBvZiBlbGVtZW50cyByZXByZXNlbnRzIGEgcmFuZ2UsIGFzIGFuIG9mZmV0IGZyb20gdGhlXG4gIC8vIHByZXZpb3VzIHJhbmdlIGFuZCBhIGxlbmd0aC4gTnVtYmVycyBhcmUgaW4gYmFzZS0zNiwgd2l0aCB0aGUgZW1wdHlcbiAgLy8gc3RyaW5nIGJlaW5nIGEgc2hvcnRoYW5kIGZvciAxLlxuICBsZXQgbnVtYmVycyA9IFwibGMsMzQsN24sNyw3YiwxOSwsLCwyLCwyLCwsMjAsYiwxYyxsLGcsLDJ0LDcsMiw2LDIsMiwsNCx6LCx1LHIsMmosYiwxbSw5LDksLG8sNCwsOSwsMywsNSwxNywzLDNiLGYsLHcsMWosLCwsNCw4LDQsLDMsNyxhLDIsdCwsMW0sLCwsMiw0LDgsLDksLGEsMixxLCwyLDIsMWwsLDQsMiw0LDIsMiwzLDMsLHUsMiwzLCxiLDIsMWwsLDQsNSwsMiw0LCxrLDIsbSw2LCwsMW0sLCwyLCw0LDgsLDcsMyxhLDIsdSwsMW4sLCwsYywsOSwsMTQsLDMsLDFsLDMsNSwzLCw0LDcsMixiLDIsdCwsMW0sLDIsLDIsLDMsLDUsMiw3LDIsYiwyLHMsMiwxbCwyLCwsMiw0LDgsLDksLGEsMix0LCwyMCwsNCwsMiwzLCwsOCwsMjksLDIsNyxjLDgsMnEsLDIsOSxiLDYsMjIsMixyLCwsLCwsMWosZSwsNSwsMiw1LGIsLDEwLDksLDJ1LDQsLDYsLDIsMiwyLHAsMiw0LDMsZyw0LGQsLDIsMiw2LCxmLCxqaiwzLHFhLDMsdCwzLHQsMix1LDIsMXMsMiwsNyw4LCwyLGIsOSwsMTksMywzYiwyLHksLDNhLDMsNCwyLDksLDYsMyw2MywyLDIsLDFtLCwsNywsLCwsMiw4LDYsYSwyLCwxYyxoLDFyLDQsMWMsNywsLDUsLDE0LDksYywyLHcsNCwyLDIsLDMsMWssLCwyLDMsLCwzLDFtLDgsMiwyLDQ4LDMsLGQsLDcsNCwsNiwsMywyLDVpLDFtLCw1LGVrLCw1Zix4LDJkYSwzLDN4LCwybyx3LGZlLDYsMngsMixuOXcsNCwsYSx3LDIsMjgsMiw3aywsMywsNCwscCwyLDUsLDQ3LDIscSxpLGQsLDEyLDgscCxiLDFhLDMsMWMsLDIsNCwyLDIsMTMsLDF2LDYsMiwyLDIsMixjLCw4LCwxYiwsMWYsLCwzLDIsMiw1LDIsLCwxNiwyLDgsLDZtLCwyLCw0LCxmbjQsLGtoLGcsZyxnLGE2LDIsZ3QsLDZhLCw0NSw1LDFhZSwzLCwyLDUsNCwxNCwzLDQsLDRsLDIsZngsNCxhciwyLDQ5LGIsNHcsLDFpLGYsMWssMywxZCw0LDIsMiwxeCwzLDEwLDUsLDgsMXEsLGMsMiwxZyw5LGEsNCwyLCwybiwzLDIsLCwyLDYsLDRnLCwzLDgsbCwyLDFsLDIsLCwsLG0sLGUsNywzLDUsNWYsOCwyLDMsLCxuLCwyOSwsMiw2LCwsMiwsLDIsLDIsNmosLDIsNCw2LDIsLDIsciwyLDJkLDgsMiwsLDIsMnksLCwsMiw2LCwsMnQsMywyLDQsLDUsNzcsOSwsMiw2dCwsYSwyLCwsNCwsNDAsNCwyLDIsNCwsdyxhLDE0LDYsMiw0LDgsLDksNiwyLDMsMWEsZCwsMixiYSw3LCw2LCwsMmEsbSwyLDcsLDIsLDIsM2UsNiwzLCwsMiwsNywsLDIwLDIsMywsLCw5biwyLGYwYiw1LDFuLDcsdDQsLDFyLDQsMjksLGY1aywyLDQzcSwsLDMsNCw1LDgsOCwyLDcsdSw0LDQ0LDMsMWl6LDFqLDQsMWUsOCwsZSwsbSw1LCxmLDExcyw3LCxoLDIsNywsMiwsNSw3OSw3LGM1LDQsMTVzLDcsMzEsNywyNDAsNSxneDdrLDJvLDNrLDZvXCIuc3BsaXQoXCIsXCIpLm1hcChzID0+IHMgPyBwYXJzZUludChzLCAzNikgOiAxKVxuICBmb3IgKGxldCBpID0gMCwgbiA9IDA7IGkgPCBudW1iZXJzLmxlbmd0aDsgaSsrKVxuICAgIChpICUgMiA/IHJhbmdlVG8gOiByYW5nZUZyb20pLnB1c2gobiA9IG4gKyBudW1iZXJzW2ldKVxufSkoKVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlbmRpbmdDaGFyKGNvZGUpIHtcbiAgaWYgKGNvZGUgPCA3NjgpIHJldHVybiBmYWxzZVxuICBmb3IgKGxldCBmcm9tID0gMCwgdG8gPSByYW5nZUZyb20ubGVuZ3RoOzspIHtcbiAgICBsZXQgbWlkID0gKGZyb20gKyB0bykgPj4gMVxuICAgIGlmIChjb2RlIDwgcmFuZ2VGcm9tW21pZF0pIHRvID0gbWlkXG4gICAgZWxzZSBpZiAoY29kZSA+PSByYW5nZVRvW21pZF0pIGZyb20gPSBtaWQgKyAxXG4gICAgZWxzZSByZXR1cm4gdHJ1ZVxuICAgIGlmIChmcm9tID09IHRvKSByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1JlZ2lvbmFsSW5kaWNhdG9yKGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPj0gMHgxRjFFNiAmJiBjb2RlIDw9IDB4MUYxRkZcbn1cblxuZnVuY3Rpb24gY2hlY2soY29kZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlRnJvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChyYW5nZVRvW2ldID4gY29kZSkgcmV0dXJuIHJhbmdlRnJvbVtpXSA8PSBjb2RlXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmNvbnN0IFpXSiA9IDB4MjAwZFxuXG5leHBvcnQgZnVuY3Rpb24gZmluZENsdXN0ZXJCcmVhayhzdHIsIHBvcywgZm9yd2FyZCA9IHRydWUsIGluY2x1ZGVFeHRlbmRpbmcgPSB0cnVlKSB7XG4gIHJldHVybiAoZm9yd2FyZCA/IG5leHRDbHVzdGVyQnJlYWsgOiBwcmV2Q2x1c3RlckJyZWFrKShzdHIsIHBvcywgaW5jbHVkZUV4dGVuZGluZylcbn1cblxuZnVuY3Rpb24gbmV4dENsdXN0ZXJCcmVhayhzdHIsIHBvcywgaW5jbHVkZUV4dGVuZGluZykge1xuICBpZiAocG9zID09IHN0ci5sZW5ndGgpIHJldHVybiBwb3NcbiAgLy8gSWYgcG9zIGlzIGluIHRoZSBtaWRkbGUgb2YgYSBzdXJyb2dhdGUgcGFpciwgbW92ZSB0byBpdHMgc3RhcnRcbiAgaWYgKHBvcyAmJiBzdXJyb2dhdGVMb3coc3RyLmNoYXJDb2RlQXQocG9zKSkgJiYgc3Vycm9nYXRlSGlnaChzdHIuY2hhckNvZGVBdChwb3MgLSAxKSkpIHBvcy0tXG4gIGxldCBwcmV2ID0gY29kZVBvaW50QXQoc3RyLCBwb3MpXG4gIHBvcyArPSBjb2RlUG9pbnRTaXplKHByZXYpXG4gIHdoaWxlIChwb3MgPCBzdHIubGVuZ3RoKSB7XG4gICAgbGV0IG5leHQgPSBjb2RlUG9pbnRBdChzdHIsIHBvcylcbiAgICBpZiAocHJldiA9PSBaV0ogfHwgbmV4dCA9PSBaV0ogfHwgaW5jbHVkZUV4dGVuZGluZyAmJiBpc0V4dGVuZGluZ0NoYXIobmV4dCkpIHtcbiAgICAgIHBvcyArPSBjb2RlUG9pbnRTaXplKG5leHQpXG4gICAgICBwcmV2ID0gbmV4dFxuICAgIH0gZWxzZSBpZiAoaXNSZWdpb25hbEluZGljYXRvcihuZXh0KSkge1xuICAgICAgbGV0IGNvdW50QmVmb3JlID0gMCwgaSA9IHBvcyAtIDJcbiAgICAgIHdoaWxlIChpID49IDAgJiYgaXNSZWdpb25hbEluZGljYXRvcihjb2RlUG9pbnRBdChzdHIsIGkpKSkgeyBjb3VudEJlZm9yZSsrOyBpIC09IDIgfVxuICAgICAgaWYgKGNvdW50QmVmb3JlICUgMiA9PSAwKSBicmVha1xuICAgICAgZWxzZSBwb3MgKz0gMlxuICAgIH0gZWxzZSB7XG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuICByZXR1cm4gcG9zXG59XG5cbmZ1bmN0aW9uIHByZXZDbHVzdGVyQnJlYWsoc3RyLCBwb3MsIGluY2x1ZGVFeHRlbmRpbmcpIHtcbiAgd2hpbGUgKHBvcyA+IDApIHtcbiAgICBsZXQgZm91bmQgPSBuZXh0Q2x1c3RlckJyZWFrKHN0ciwgcG9zIC0gMiwgaW5jbHVkZUV4dGVuZGluZylcbiAgICBpZiAoZm91bmQgPCBwb3MpIHJldHVybiBmb3VuZFxuICAgIHBvcy0tXG4gIH1cbiAgcmV0dXJuIDBcbn1cblxuZnVuY3Rpb24gY29kZVBvaW50QXQoc3RyLCBwb3MpIHtcbiAgbGV0IGNvZGUwID0gc3RyLmNoYXJDb2RlQXQocG9zKVxuICBpZiAoIXN1cnJvZ2F0ZUhpZ2goY29kZTApIHx8IHBvcyArIDEgPT0gc3RyLmxlbmd0aCkgcmV0dXJuIGNvZGUwXG4gIGxldCBjb2RlMSA9IHN0ci5jaGFyQ29kZUF0KHBvcyArIDEpXG4gIGlmICghc3Vycm9nYXRlTG93KGNvZGUxKSkgcmV0dXJuIGNvZGUwXG4gIHJldHVybiAoKGNvZGUwIC0gMHhkODAwKSA8PCAxMCkgKyAoY29kZTEgLSAweGRjMDApICsgMHgxMDAwMFxufVxuXG5mdW5jdGlvbiBzdXJyb2dhdGVMb3coY2gpIHsgcmV0dXJuIGNoID49IDB4REMwMCAmJiBjaCA8IDB4RTAwMCB9XG5mdW5jdGlvbiBzdXJyb2dhdGVIaWdoKGNoKSB7IHJldHVybiBjaCA+PSAweEQ4MDAgJiYgY2ggPCAweERDMDAgfVxuZnVuY3Rpb24gY29kZVBvaW50U2l6ZShjb2RlKSB7IHJldHVybiBjb2RlIDwgMHgxMDAwMCA/IDEgOiAyIH1cbiIsCiAgICAiaW1wb3J0IHsgZmluZENsdXN0ZXJCcmVhayBhcyBmaW5kQ2x1c3RlckJyZWFrJDEgfSBmcm9tICdAbWFyaWpuL2ZpbmQtY2x1c3Rlci1icmVhayc7XG5cbi8qKlxuVGhlIGRhdGEgc3RydWN0dXJlIGZvciBkb2N1bWVudHMuIEBub25hYnN0cmFjdFxuKi9cbmNsYXNzIFRleHQge1xuICAgIC8qKlxuICAgIEdldCB0aGUgbGluZSBkZXNjcmlwdGlvbiBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbGluZUF0KHBvcykge1xuICAgICAgICBpZiAocG9zIDwgMCB8fCBwb3MgPiB0aGlzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIHBvc2l0aW9uICR7cG9zfSBpbiBkb2N1bWVudCBvZiBsZW5ndGggJHt0aGlzLmxlbmd0aH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUlubmVyKHBvcywgZmFsc2UsIDEsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgZ2l2ZW4gKDEtYmFzZWQpIGxpbmUgbnVtYmVyLlxuICAgICovXG4gICAgbGluZShuKSB7XG4gICAgICAgIGlmIChuIDwgMSB8fCBuID4gdGhpcy5saW5lcylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGxpbmUgbnVtYmVyICR7bn0gaW4gJHt0aGlzLmxpbmVzfS1saW5lIGRvY3VtZW50YCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVJbm5lcihuLCB0cnVlLCAxLCAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIHJhbmdlIG9mIHRoZSB0ZXh0IHdpdGggdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgKi9cbiAgICByZXBsYWNlKGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZGVjb21wb3NlKDAsIGZyb20sIHBhcnRzLCAyIC8qIE9wZW4uVG8gKi8pO1xuICAgICAgICBpZiAodGV4dC5sZW5ndGgpXG4gICAgICAgICAgICB0ZXh0LmRlY29tcG9zZSgwLCB0ZXh0Lmxlbmd0aCwgcGFydHMsIDEgLyogT3Blbi5Gcm9tICovIHwgMiAvKiBPcGVuLlRvICovKTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2UodG8sIHRoaXMubGVuZ3RoLCBwYXJ0cywgMSAvKiBPcGVuLkZyb20gKi8pO1xuICAgICAgICByZXR1cm4gVGV4dE5vZGUuZnJvbShwYXJ0cywgdGhpcy5sZW5ndGggLSAodG8gLSBmcm9tKSArIHRleHQubGVuZ3RoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwZW5kIGFub3RoZXIgZG9jdW1lbnQgdG8gdGhpcyBvbmUuXG4gICAgKi9cbiAgICBhcHBlbmQob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSh0aGlzLmxlbmd0aCwgdGhpcy5sZW5ndGgsIG90aGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdGhlIHRleHQgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9pbnRzLlxuICAgICovXG4gICAgc2xpY2UoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCkge1xuICAgICAgICBbZnJvbSwgdG9dID0gY2xpcCh0aGlzLCBmcm9tLCB0byk7XG4gICAgICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmRlY29tcG9zZShmcm9tLCB0bywgcGFydHMsIDApO1xuICAgICAgICByZXR1cm4gVGV4dE5vZGUuZnJvbShwYXJ0cywgdG8gLSBmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoaXMgdGV4dCBpcyBlcXVhbCB0byBhbm90aGVyIGluc3RhbmNlLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09IHRoaXMpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG90aGVyLmxlbmd0aCAhPSB0aGlzLmxlbmd0aCB8fCBvdGhlci5saW5lcyAhPSB0aGlzLmxpbmVzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnNjYW5JZGVudGljYWwob3RoZXIsIDEpLCBlbmQgPSB0aGlzLmxlbmd0aCAtIHRoaXMuc2NhbklkZW50aWNhbChvdGhlciwgLTEpO1xuICAgICAgICBsZXQgYSA9IG5ldyBSYXdUZXh0Q3Vyc29yKHRoaXMpLCBiID0gbmV3IFJhd1RleHRDdXJzb3Iob3RoZXIpO1xuICAgICAgICBmb3IgKGxldCBza2lwID0gc3RhcnQsIHBvcyA9IHN0YXJ0OzspIHtcbiAgICAgICAgICAgIGEubmV4dChza2lwKTtcbiAgICAgICAgICAgIGIubmV4dChza2lwKTtcbiAgICAgICAgICAgIHNraXAgPSAwO1xuICAgICAgICAgICAgaWYgKGEubGluZUJyZWFrICE9IGIubGluZUJyZWFrIHx8IGEuZG9uZSAhPSBiLmRvbmUgfHwgYS52YWx1ZSAhPSBiLnZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHBvcyArPSBhLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChhLmRvbmUgfHwgcG9zID49IGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHRleHQuIFdoZW4gYGRpcmAgaXMgYC0xYCwgaXRlcmF0aW9uIGhhcHBlbnNcbiAgICBmcm9tIGVuZCB0byBzdGFydC4gVGhpcyB3aWxsIHJldHVybiBsaW5lcyBhbmQgdGhlIGJyZWFrcyBiZXR3ZWVuXG4gICAgdGhlbSBhcyBzZXBhcmF0ZSBzdHJpbmdzLlxuICAgICovXG4gICAgaXRlcihkaXIgPSAxKSB7IHJldHVybiBuZXcgUmF3VGV4dEN1cnNvcih0aGlzLCBkaXIpOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIGEgcmFuZ2Ugb2YgdGhlIHRleHQuIFdoZW4gYGZyb21gID4gYHRvYCwgdGhlXG4gICAgaXRlcmF0b3Igd2lsbCBydW4gaW4gcmV2ZXJzZS5cbiAgICAqL1xuICAgIGl0ZXJSYW5nZShmcm9tLCB0byA9IHRoaXMubGVuZ3RoKSB7IHJldHVybiBuZXcgUGFydGlhbFRleHRDdXJzb3IodGhpcywgZnJvbSwgdG8pOyB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgY3Vyc29yIHRoYXQgaXRlcmF0ZXMgb3ZlciB0aGUgZ2l2ZW4gcmFuZ2Ugb2YgbGluZXMsXG4gICAgX3dpdGhvdXRfIHJldHVybmluZyB0aGUgbGluZSBicmVha3MgYmV0d2VlbiwgYW5kIHlpZWxkaW5nIGVtcHR5XG4gICAgc3RyaW5ncyBmb3IgZW1wdHkgbGluZXMuXG4gICAgXG4gICAgV2hlbiBgZnJvbWAgYW5kIGB0b2AgYXJlIGdpdmVuLCB0aGV5IHNob3VsZCBiZSAxLWJhc2VkIGxpbmUgbnVtYmVycy5cbiAgICAqL1xuICAgIGl0ZXJMaW5lcyhmcm9tLCB0bykge1xuICAgICAgICBsZXQgaW5uZXI7XG4gICAgICAgIGlmIChmcm9tID09IG51bGwpIHtcbiAgICAgICAgICAgIGlubmVyID0gdGhpcy5pdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0byA9IHRoaXMubGluZXMgKyAxO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5saW5lKGZyb20pLmZyb207XG4gICAgICAgICAgICBpbm5lciA9IHRoaXMuaXRlclJhbmdlKHN0YXJ0LCBNYXRoLm1heChzdGFydCwgdG8gPT0gdGhpcy5saW5lcyArIDEgPyB0aGlzLmxlbmd0aCA6IHRvIDw9IDEgPyAwIDogdGhpcy5saW5lKHRvIC0gMSkudG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExpbmVDdXJzb3IoaW5uZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIGRvY3VtZW50IGFzIGEgc3RyaW5nLCB1c2luZyBuZXdsaW5lIGNoYXJhY3RlcnMgdG9cbiAgICBzZXBhcmF0ZSBsaW5lcy5cbiAgICAqL1xuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5zbGljZVN0cmluZygwKTsgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgdGhlIGRvY3VtZW50IHRvIGFuIGFycmF5IG9mIGxpbmVzICh3aGljaCBjYW4gYmVcbiAgICBkZXNlcmlhbGl6ZWQgYWdhaW4gdmlhIFtgVGV4dC5vZmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dF5vZikpLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgbGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mbGF0dGVuKGxpbmVzKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgYFRleHRgIGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXJyYXkgb2YgbGluZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgb2YodGV4dCkge1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQSBkb2N1bWVudCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGxpbmVcIik7XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PSAxICYmICF0ZXh0WzBdKVxuICAgICAgICAgICAgcmV0dXJuIFRleHQuZW1wdHk7XG4gICAgICAgIHJldHVybiB0ZXh0Lmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLyA/IG5ldyBUZXh0TGVhZih0ZXh0KSA6IFRleHROb2RlLmZyb20oVGV4dExlYWYuc3BsaXQodGV4dCwgW10pKTtcbiAgICB9XG59XG4vLyBMZWF2ZXMgc3RvcmUgYW4gYXJyYXkgb2YgbGluZSBzdHJpbmdzLiBUaGVyZSBhcmUgYWx3YXlzIGxpbmUgYnJlYWtzXG4vLyBiZXR3ZWVuIHRoZXNlIHN0cmluZ3MuIExlYXZlcyBhcmUgbGltaXRlZCBpbiBzaXplIGFuZCBoYXZlIHRvIGJlXG4vLyBjb250YWluZWQgaW4gVGV4dE5vZGUgaW5zdGFuY2VzIGZvciBiaWdnZXIgZG9jdW1lbnRzLlxuY2xhc3MgVGV4dExlYWYgZXh0ZW5kcyBUZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBsZW5ndGggPSB0ZXh0TGVuZ3RoKHRleHQpKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgbGluZXMoKSB7IHJldHVybiB0aGlzLnRleHQubGVuZ3RoOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIGxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RyaW5nID0gdGhpcy50ZXh0W2ldLCBlbmQgPSBvZmZzZXQgKyBzdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKChpc0xpbmUgPyBsaW5lIDogZW5kKSA+PSB0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaW5lKG9mZnNldCwgZW5kLCBsaW5lLCBzdHJpbmcpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kICsgMTtcbiAgICAgICAgICAgIGxpbmUrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWNvbXBvc2UoZnJvbSwgdG8sIHRhcmdldCwgb3Blbikge1xuICAgICAgICBsZXQgdGV4dCA9IGZyb20gPD0gMCAmJiB0byA+PSB0aGlzLmxlbmd0aCA/IHRoaXNcbiAgICAgICAgICAgIDogbmV3IFRleHRMZWFmKHNsaWNlVGV4dCh0aGlzLnRleHQsIGZyb20sIHRvKSwgTWF0aC5taW4odG8sIHRoaXMubGVuZ3RoKSAtIE1hdGgubWF4KDAsIGZyb20pKTtcbiAgICAgICAgaWYgKG9wZW4gJiAxIC8qIE9wZW4uRnJvbSAqLykge1xuICAgICAgICAgICAgbGV0IHByZXYgPSB0YXJnZXQucG9wKCk7XG4gICAgICAgICAgICBsZXQgam9pbmVkID0gYXBwZW5kVGV4dCh0ZXh0LnRleHQsIHByZXYudGV4dC5zbGljZSgpLCAwLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAoam9pbmVkLmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5wdXNoKG5ldyBUZXh0TGVhZihqb2luZWQsIHByZXYubGVuZ3RoICsgdGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBtaWQgPSBqb2luZWQubGVuZ3RoID4+IDE7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKGpvaW5lZC5zbGljZSgwLCBtaWQpKSwgbmV3IFRleHRMZWFmKGpvaW5lZC5zbGljZShtaWQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQucHVzaCh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIGlmICghKHRleHQgaW5zdGFuY2VvZiBUZXh0TGVhZikpXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIucmVwbGFjZShmcm9tLCB0bywgdGV4dCk7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IGxpbmVzID0gYXBwZW5kVGV4dCh0aGlzLnRleHQsIGFwcGVuZFRleHQodGV4dC50ZXh0LCBzbGljZVRleHQodGhpcy50ZXh0LCAwLCBmcm9tKSksIHRvKTtcbiAgICAgICAgbGV0IG5ld0xlbiA9IHRoaXMubGVuZ3RoICsgdGV4dC5sZW5ndGggLSAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLylcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dExlYWYobGluZXMsIG5ld0xlbik7XG4gICAgICAgIHJldHVybiBUZXh0Tm9kZS5mcm9tKFRleHRMZWFmLnNwbGl0KGxpbmVzLCBbXSksIG5ld0xlbik7XG4gICAgfVxuICAgIHNsaWNlU3RyaW5nKGZyb20sIHRvID0gdGhpcy5sZW5ndGgsIGxpbmVTZXAgPSBcIlxcblwiKSB7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDAsIGkgPSAwOyBwb3MgPD0gdG8gJiYgaSA8IHRoaXMudGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnRleHRbaV0sIGVuZCA9IHBvcyArIGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgaSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZVNlcDtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgZW5kICYmIHRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGZyb20gLSBwb3MpLCB0byAtIHBvcyk7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZsYXR0ZW4odGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy50ZXh0KVxuICAgICAgICAgICAgdGFyZ2V0LnB1c2gobGluZSk7XG4gICAgfVxuICAgIHNjYW5JZGVudGljYWwoKSB7IHJldHVybiAwOyB9XG4gICAgc3RhdGljIHNwbGl0KHRleHQsIHRhcmdldCkge1xuICAgICAgICBsZXQgcGFydCA9IFtdLCBsZW4gPSAtMTtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0ZXh0KSB7XG4gICAgICAgICAgICBwYXJ0LnB1c2gobGluZSk7XG4gICAgICAgICAgICBsZW4gKz0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoID09IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKHBhcnQsIGxlbikpO1xuICAgICAgICAgICAgICAgIHBhcnQgPSBbXTtcbiAgICAgICAgICAgICAgICBsZW4gPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuID4gLTEpXG4gICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYocGFydCwgbGVuKSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxufVxuLy8gTm9kZXMgcHJvdmlkZSB0aGUgdHJlZSBzdHJ1Y3R1cmUgb2YgdGhlIGBUZXh0YCB0eXBlLiBUaGV5IHN0b3JlIGFcbi8vIG51bWJlciBvZiBvdGhlciBub2RlcyBvciBsZWF2ZXMsIHRha2luZyBjYXJlIHRvIGJhbGFuY2UgdGhlbXNlbHZlc1xuLy8gb24gY2hhbmdlcy4gVGhlcmUgYXJlIGltcGxpZWQgbGluZSBicmVha3MgX2JldHdlZW5fIHRoZSBjaGlsZHJlbiBvZlxuLy8gYSBub2RlIChidXQgbm90IGJlZm9yZSB0aGUgZmlyc3Qgb3IgYWZ0ZXIgdGhlIGxhc3QgY2hpbGQpLlxuY2xhc3MgVGV4dE5vZGUgZXh0ZW5kcyBUZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiwgbGVuZ3RoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMubGluZXMgPSAwO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIHRoaXMubGluZXMgKz0gY2hpbGQubGluZXM7XG4gICAgfVxuICAgIGxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBvZmZzZXQgKyBjaGlsZC5sZW5ndGgsIGVuZExpbmUgPSBsaW5lICsgY2hpbGQubGluZXMgLSAxO1xuICAgICAgICAgICAgaWYgKChpc0xpbmUgPyBlbmRMaW5lIDogZW5kKSA+PSB0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmxpbmVJbm5lcih0YXJnZXQsIGlzTGluZSwgbGluZSwgb2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZCArIDE7XG4gICAgICAgICAgICBsaW5lID0gZW5kTGluZSArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb21wb3NlKGZyb20sIHRvLCB0YXJnZXQsIG9wZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IHBvcyA8PSB0byAmJiBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZyb20gPD0gZW5kICYmIHRvID49IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZE9wZW4gPSBvcGVuICYgKChwb3MgPD0gZnJvbSA/IDEgLyogT3Blbi5Gcm9tICovIDogMCkgfCAoZW5kID49IHRvID8gMiAvKiBPcGVuLlRvICovIDogMCkpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gZnJvbSAmJiBlbmQgPD0gdG8gJiYgIWNoaWxkT3BlbilcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGVjb21wb3NlKGZyb20gLSBwb3MsIHRvIC0gcG9zLCB0YXJnZXQsIGNoaWxkT3Blbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHRleHQpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBpZiAodGV4dC5saW5lcyA8IHRoaXMubGluZXMpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoOiBpZiB0aGUgY2hhbmdlIG9ubHkgYWZmZWN0cyBvbmUgY2hpbGQgYW5kIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoaWxkJ3Mgc2l6ZSByZW1haW5zIGluIHRoZSBhY2NlcHRhYmxlIHJhbmdlLCBvbmx5IHVwZGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY2hpbGRcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+PSBwb3MgJiYgdG8gPD0gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkID0gY2hpbGQucmVwbGFjZShmcm9tIC0gcG9zLCB0byAtIHBvcywgdGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbExpbmVzID0gdGhpcy5saW5lcyAtIGNoaWxkLmxpbmVzICsgdXBkYXRlZC5saW5lcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWQubGluZXMgPCAodG90YWxMaW5lcyA+PiAoNSAvKiBUcmVlLkJyYW5jaFNoaWZ0ICovIC0gMSkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLmxpbmVzID4gKHRvdGFsTGluZXMgPj4gKDUgLyogVHJlZS5CcmFuY2hTaGlmdCAqLyArIDEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvcHkgPSB0aGlzLmNoaWxkcmVuLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5W2ldID0gdXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dE5vZGUoY29weSwgdGhpcy5sZW5ndGggLSAodG8gLSBmcm9tKSArIHRleHQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIucmVwbGFjZShwb3MsIGVuZCwgdXBkYXRlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5yZXBsYWNlKGZyb20sIHRvLCB0ZXh0KTtcbiAgICB9XG4gICAgc2xpY2VTdHJpbmcoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCwgbGluZVNlcCA9IFwiXFxuXCIpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAmJiBwb3MgPD0gdG87IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+IGZyb20gJiYgaSlcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZVNlcDtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgZW5kICYmIHRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGlsZC5zbGljZVN0cmluZyhmcm9tIC0gcG9zLCB0byAtIHBvcywgbGluZVNlcCk7XG4gICAgICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZsYXR0ZW4odGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pXG4gICAgICAgICAgICBjaGlsZC5mbGF0dGVuKHRhcmdldCk7XG4gICAgfVxuICAgIHNjYW5JZGVudGljYWwob3RoZXIsIGRpcikge1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFRleHROb2RlKSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICAgICAgbGV0IFtpQSwgaUIsIGVBLCBlQl0gPSBkaXIgPiAwID8gWzAsIDAsIHRoaXMuY2hpbGRyZW4ubGVuZ3RoLCBvdGhlci5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgICA6IFt0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEsIG90aGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEsIC0xLCAtMV07XG4gICAgICAgIGZvciAoOzsgaUEgKz0gZGlyLCBpQiArPSBkaXIpIHtcbiAgICAgICAgICAgIGlmIChpQSA9PSBlQSB8fCBpQiA9PSBlQilcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGNoQSA9IHRoaXMuY2hpbGRyZW5baUFdLCBjaEIgPSBvdGhlci5jaGlsZHJlbltpQl07XG4gICAgICAgICAgICBpZiAoY2hBICE9IGNoQilcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoICsgY2hBLnNjYW5JZGVudGljYWwoY2hCLCBkaXIpO1xuICAgICAgICAgICAgbGVuZ3RoICs9IGNoQS5sZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGNoaWxkcmVuLCBsZW5ndGggPSBjaGlsZHJlbi5yZWR1Y2UoKGwsIGNoKSA9PiBsICsgY2gubGVuZ3RoICsgMSwgLTEpKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGNoIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgbGluZXMgKz0gY2gubGluZXM7XG4gICAgICAgIGlmIChsaW5lcyA8IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICBsZXQgZmxhdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2YgY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgY2guZmxhdHRlbihmbGF0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dExlYWYoZmxhdCwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2h1bmsgPSBNYXRoLm1heCgzMiAvKiBUcmVlLkJyYW5jaCAqLywgbGluZXMgPj4gNSAvKiBUcmVlLkJyYW5jaFNoaWZ0ICovKSwgbWF4Q2h1bmsgPSBjaHVuayA8PCAxLCBtaW5DaHVuayA9IGNodW5rID4+IDE7XG4gICAgICAgIGxldCBjaHVua2VkID0gW10sIGN1cnJlbnRMaW5lcyA9IDAsIGN1cnJlbnRMZW4gPSAtMSwgY3VycmVudENodW5rID0gW107XG4gICAgICAgIGZ1bmN0aW9uIGFkZChjaGlsZCkge1xuICAgICAgICAgICAgbGV0IGxhc3Q7XG4gICAgICAgICAgICBpZiAoY2hpbGQubGluZXMgPiBtYXhDaHVuayAmJiBjaGlsZCBpbnN0YW5jZW9mIFRleHROb2RlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbm9kZSBvZiBjaGlsZC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgYWRkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQubGluZXMgPiBtaW5DaHVuayAmJiAoY3VycmVudExpbmVzID4gbWluQ2h1bmsgfHwgIWN1cnJlbnRMaW5lcykpIHtcbiAgICAgICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICAgICAgICAgIGNodW5rZWQucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRleHRMZWFmICYmIGN1cnJlbnRMaW5lcyAmJlxuICAgICAgICAgICAgICAgIChsYXN0ID0gY3VycmVudENodW5rW2N1cnJlbnRDaHVuay5sZW5ndGggLSAxXSkgaW5zdGFuY2VvZiBUZXh0TGVhZiAmJlxuICAgICAgICAgICAgICAgIGNoaWxkLmxpbmVzICsgbGFzdC5saW5lcyA8PSAzMiAvKiBUcmVlLkJyYW5jaCAqLykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lcyArPSBjaGlsZC5saW5lcztcbiAgICAgICAgICAgICAgICBjdXJyZW50TGVuICs9IGNoaWxkLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgY3VycmVudENodW5rW2N1cnJlbnRDaHVuay5sZW5ndGggLSAxXSA9IG5ldyBUZXh0TGVhZihsYXN0LnRleHQuY29uY2F0KGNoaWxkLnRleHQpLCBsYXN0Lmxlbmd0aCArIDEgKyBjaGlsZC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMaW5lcyArIGNoaWxkLmxpbmVzID4gY2h1bmspXG4gICAgICAgICAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExpbmVzICs9IGNoaWxkLmxpbmVzO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMZW4gKz0gY2hpbGQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmsucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudExpbmVzID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2h1bmtlZC5wdXNoKGN1cnJlbnRDaHVuay5sZW5ndGggPT0gMSA/IGN1cnJlbnRDaHVua1swXSA6IFRleHROb2RlLmZyb20oY3VycmVudENodW5rLCBjdXJyZW50TGVuKSk7XG4gICAgICAgICAgICBjdXJyZW50TGVuID0gLTE7XG4gICAgICAgICAgICBjdXJyZW50TGluZXMgPSBjdXJyZW50Q2h1bmsubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgIGFkZChjaGlsZCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgICAgIHJldHVybiBjaHVua2VkLmxlbmd0aCA9PSAxID8gY2h1bmtlZFswXSA6IG5ldyBUZXh0Tm9kZShjaHVua2VkLCBsZW5ndGgpO1xuICAgIH1cbn1cblRleHQuZW1wdHkgPSAvKkBfX1BVUkVfXyovbmV3IFRleHRMZWFmKFtcIlwiXSwgMCk7XG5mdW5jdGlvbiB0ZXh0TGVuZ3RoKHRleHQpIHtcbiAgICBsZXQgbGVuZ3RoID0gLTE7XG4gICAgZm9yIChsZXQgbGluZSBvZiB0ZXh0KVxuICAgICAgICBsZW5ndGggKz0gbGluZS5sZW5ndGggKyAxO1xuICAgIHJldHVybiBsZW5ndGg7XG59XG5mdW5jdGlvbiBhcHBlbmRUZXh0KHRleHQsIHRhcmdldCwgZnJvbSA9IDAsIHRvID0gMWU5KSB7XG4gICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDAsIGZpcnN0ID0gdHJ1ZTsgaSA8IHRleHQubGVuZ3RoICYmIHBvcyA8PSB0bzsgaSsrKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGV4dFtpXSwgZW5kID0gcG9zICsgbGluZS5sZW5ndGg7XG4gICAgICAgIGlmIChlbmQgPj0gZnJvbSkge1xuICAgICAgICAgICAgaWYgKGVuZCA+IHRvKVxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKDAsIHRvIC0gcG9zKTtcbiAgICAgICAgICAgIGlmIChwb3MgPCBmcm9tKVxuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKGZyb20gLSBwb3MpO1xuICAgICAgICAgICAgaWYgKGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W3RhcmdldC5sZW5ndGggLSAxXSArPSBsaW5lO1xuICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gZW5kICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIHNsaWNlVGV4dCh0ZXh0LCBmcm9tLCB0bykge1xuICAgIHJldHVybiBhcHBlbmRUZXh0KHRleHQsIFtcIlwiXSwgZnJvbSwgdG8pO1xufVxuY2xhc3MgUmF3VGV4dEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IodGV4dCwgZGlyID0gMSkge1xuICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGluZUJyZWFrID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm5vZGVzID0gW3RleHRdO1xuICAgICAgICB0aGlzLm9mZnNldHMgPSBbZGlyID4gMCA/IDEgOiAodGV4dCBpbnN0YW5jZW9mIFRleHRMZWFmID8gdGV4dC50ZXh0Lmxlbmd0aCA6IHRleHQuY2hpbGRyZW4ubGVuZ3RoKSA8PCAxXTtcbiAgICB9XG4gICAgbmV4dElubmVyKHNraXAsIGRpcikge1xuICAgICAgICB0aGlzLmRvbmUgPSB0aGlzLmxpbmVCcmVhayA9IGZhbHNlO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMubm9kZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLm5vZGVzW2xhc3RdLCBvZmZzZXRWYWx1ZSA9IHRoaXMub2Zmc2V0c1tsYXN0XSwgb2Zmc2V0ID0gb2Zmc2V0VmFsdWUgPj4gMTtcbiAgICAgICAgICAgIGxldCBzaXplID0gdG9wIGluc3RhbmNlb2YgVGV4dExlYWYgPyB0b3AudGV4dC5sZW5ndGggOiB0b3AuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAoZGlyID4gMCA/IHNpemUgOiAwKSkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlyID4gMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzW2xhc3QgLSAxXSsrO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKG9mZnNldFZhbHVlICYgMSkgPT0gKGRpciA+IDAgPyAwIDogMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIGlmIChza2lwID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNraXAtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRvcCBpbnN0YW5jZW9mIFRleHRMZWFmKSB7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgbmV4dCBzdHJpbmdcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRvcC50ZXh0W29mZnNldCArIChkaXIgPCAwID8gLTEgOiAwKV07XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRzW2xhc3RdICs9IGRpcjtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5sZW5ndGggPiBNYXRoLm1heCgwLCBza2lwKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gc2tpcCA9PSAwID8gbmV4dCA6IGRpciA+IDAgPyBuZXh0LnNsaWNlKHNraXApIDogbmV4dC5zbGljZSgwLCBuZXh0Lmxlbmd0aCAtIHNraXApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpcCAtPSBuZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLmNoaWxkcmVuW29mZnNldCArIChkaXIgPCAwID8gLTEgOiAwKV07XG4gICAgICAgICAgICAgICAgaWYgKHNraXAgPiBuZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBza2lwIC09IG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0tLTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHMucHVzaChkaXIgPiAwID8gMSA6IChuZXh0IGluc3RhbmNlb2YgVGV4dExlYWYgPyBuZXh0LnRleHQubGVuZ3RoIDogbmV4dC5jaGlsZHJlbi5sZW5ndGgpIDw8IDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXh0KHNraXAgPSAwKSB7XG4gICAgICAgIGlmIChza2lwIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0SW5uZXIoLXNraXAsICgtdGhpcy5kaXIpKTtcbiAgICAgICAgICAgIHNraXAgPSB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0SW5uZXIoc2tpcCwgdGhpcy5kaXIpO1xuICAgIH1cbn1cbmNsYXNzIFBhcnRpYWxUZXh0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBzdGFydCwgZW5kKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBuZXcgUmF3VGV4dEN1cnNvcih0ZXh0LCBzdGFydCA+IGVuZCA/IC0xIDogMSk7XG4gICAgICAgIHRoaXMucG9zID0gc3RhcnQgPiBlbmQgPyB0ZXh0Lmxlbmd0aCA6IDA7XG4gICAgICAgIHRoaXMuZnJvbSA9IE1hdGgubWluKHN0YXJ0LCBlbmQpO1xuICAgICAgICB0aGlzLnRvID0gTWF0aC5tYXgoc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIG5leHRJbm5lcihza2lwLCBkaXIpIHtcbiAgICAgICAgaWYgKGRpciA8IDAgPyB0aGlzLnBvcyA8PSB0aGlzLmZyb20gOiB0aGlzLnBvcyA+PSB0aGlzLnRvKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBza2lwICs9IE1hdGgubWF4KDAsIGRpciA8IDAgPyB0aGlzLnBvcyAtIHRoaXMudG8gOiB0aGlzLmZyb20gLSB0aGlzLnBvcyk7XG4gICAgICAgIGxldCBsaW1pdCA9IGRpciA8IDAgPyB0aGlzLnBvcyAtIHRoaXMuZnJvbSA6IHRoaXMudG8gLSB0aGlzLnBvcztcbiAgICAgICAgaWYgKHNraXAgPiBsaW1pdClcbiAgICAgICAgICAgIHNraXAgPSBsaW1pdDtcbiAgICAgICAgbGltaXQgLT0gc2tpcDtcbiAgICAgICAgbGV0IHsgdmFsdWUgfSA9IHRoaXMuY3Vyc29yLm5leHQoc2tpcCk7XG4gICAgICAgIHRoaXMucG9zICs9ICh2YWx1ZS5sZW5ndGggKyBza2lwKSAqIGRpcjtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlLmxlbmd0aCA8PSBsaW1pdCA/IHZhbHVlIDogZGlyIDwgMCA/IHZhbHVlLnNsaWNlKHZhbHVlLmxlbmd0aCAtIGxpbWl0KSA6IHZhbHVlLnNsaWNlKDAsIGxpbWl0KTtcbiAgICAgICAgdGhpcy5kb25lID0gIXRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBuZXh0KHNraXAgPSAwKSB7XG4gICAgICAgIGlmIChza2lwIDwgMClcbiAgICAgICAgICAgIHNraXAgPSBNYXRoLm1heChza2lwLCB0aGlzLmZyb20gLSB0aGlzLnBvcyk7XG4gICAgICAgIGVsc2UgaWYgKHNraXAgPiAwKVxuICAgICAgICAgICAgc2tpcCA9IE1hdGgubWluKHNraXAsIHRoaXMudG8gLSB0aGlzLnBvcyk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRJbm5lcihza2lwLCB0aGlzLmN1cnNvci5kaXIpO1xuICAgIH1cbiAgICBnZXQgbGluZUJyZWFrKCkgeyByZXR1cm4gdGhpcy5jdXJzb3IubGluZUJyZWFrICYmIHRoaXMudmFsdWUgIT0gXCJcIjsgfVxufVxuY2xhc3MgTGluZUN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoaW5uZXIpIHtcbiAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgICAgICB0aGlzLmFmdGVyQnJlYWsgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgbGV0IHsgZG9uZSwgbGluZUJyZWFrLCB2YWx1ZSB9ID0gdGhpcy5pbm5lci5uZXh0KHNraXApO1xuICAgICAgICBpZiAoZG9uZSAmJiB0aGlzLmFmdGVyQnJlYWspIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpbmVCcmVhaykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWZ0ZXJCcmVhaykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJCcmVhayA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQgbGluZUJyZWFrKCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cbmlmICh0eXBlb2YgU3ltYm9sICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICBUZXh0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pdGVyKCk7IH07XG4gICAgUmF3VGV4dEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IFBhcnRpYWxUZXh0Q3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID1cbiAgICAgICAgTGluZUN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG4vKipcblRoaXMgdHlwZSBkZXNjcmliZXMgYSBsaW5lIGluIHRoZSBkb2N1bWVudC4gSXQgaXMgY3JlYXRlZFxub24tZGVtYW5kIHdoZW4gbGluZXMgYXJlIFtxdWVyaWVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRleHQubGluZUF0KS5cbiovXG5jbGFzcyBMaW5lIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBvZiB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGUgbGluZSAoX2JlZm9yZV8gdGhlIGxpbmUgYnJlYWssXG4gICAgb3IgYXQgdGhlIGVuZCBvZiBkb2N1bWVudCBmb3IgdGhlIGxhc3QgbGluZSkuXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhpcyBsaW5lJ3MgbGluZSBudW1iZXIgKDEtYmFzZWQpLlxuICAgICovXG4gICAgbnVtYmVyLCBcbiAgICAvKipcbiAgICBUaGUgbGluZSdzIGNvbnRlbnQuXG4gICAgKi9cbiAgICB0ZXh0KSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBsZW5ndGggb2YgdGhlIGxpbmUgKG5vdCBpbmNsdWRpbmcgYW55IGxpbmUgYnJlYWsgYWZ0ZXIgaXQpLlxuICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMudG8gLSB0aGlzLmZyb207IH1cbn1cbmZ1bmN0aW9uIGNsaXAodGV4dCwgZnJvbSwgdG8pIHtcbiAgICBmcm9tID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGV4dC5sZW5ndGgsIGZyb20pKTtcbiAgICByZXR1cm4gW2Zyb20sIE1hdGgubWF4KGZyb20sIE1hdGgubWluKHRleHQubGVuZ3RoLCB0bykpXTtcbn1cblxuLyoqXG5SZXR1cm5zIGEgbmV4dCBncmFwaGVtZSBjbHVzdGVyIGJyZWFrIF9hZnRlcl8gKG5vdCBlcXVhbCB0bylcbmBwb3NgLCBpZiBgZm9yd2FyZGAgaXMgdHJ1ZSwgb3IgYmVmb3JlIG90aGVyd2lzZS4gUmV0dXJucyBgcG9zYFxuaXRzZWxmIGlmIG5vIGZ1cnRoZXIgY2x1c3RlciBicmVhayBpcyBhdmFpbGFibGUgaW4gdGhlIHN0cmluZy5cbk1vdmVzIGFjcm9zcyBzdXJyb2dhdGUgcGFpcnMsIGV4dGVuZGluZyBjaGFyYWN0ZXJzICh3aGVuXG5gaW5jbHVkZUV4dGVuZGluZ2AgaXMgdHJ1ZSksIGNoYXJhY3RlcnMgam9pbmVkIHdpdGggemVyby13aWR0aFxuam9pbmVycywgYW5kIGZsYWcgZW1vamkuXG4qL1xuZnVuY3Rpb24gZmluZENsdXN0ZXJCcmVhayhzdHIsIHBvcywgZm9yd2FyZCA9IHRydWUsIGluY2x1ZGVFeHRlbmRpbmcgPSB0cnVlKSB7XG4gICAgcmV0dXJuIGZpbmRDbHVzdGVyQnJlYWskMShzdHIsIHBvcywgZm9yd2FyZCwgaW5jbHVkZUV4dGVuZGluZyk7XG59XG5mdW5jdGlvbiBzdXJyb2dhdGVMb3coY2gpIHsgcmV0dXJuIGNoID49IDB4REMwMCAmJiBjaCA8IDB4RTAwMDsgfVxuZnVuY3Rpb24gc3Vycm9nYXRlSGlnaChjaCkgeyByZXR1cm4gY2ggPj0gMHhEODAwICYmIGNoIDwgMHhEQzAwOyB9XG4vKipcbkZpbmQgdGhlIGNvZGUgcG9pbnQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIGluIGEgc3RyaW5nIChsaWtlIHRoZVxuW2Bjb2RlUG9pbnRBdGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9jb2RlUG9pbnRBdClcbnN0cmluZyBtZXRob2QpLlxuKi9cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0ciwgcG9zKSB7XG4gICAgbGV0IGNvZGUwID0gc3RyLmNoYXJDb2RlQXQocG9zKTtcbiAgICBpZiAoIXN1cnJvZ2F0ZUhpZ2goY29kZTApIHx8IHBvcyArIDEgPT0gc3RyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIGxldCBjb2RlMSA9IHN0ci5jaGFyQ29kZUF0KHBvcyArIDEpO1xuICAgIGlmICghc3Vycm9nYXRlTG93KGNvZGUxKSlcbiAgICAgICAgcmV0dXJuIGNvZGUwO1xuICAgIHJldHVybiAoKGNvZGUwIC0gMHhkODAwKSA8PCAxMCkgKyAoY29kZTEgLSAweGRjMDApICsgMHgxMDAwMDtcbn1cbi8qKlxuR2l2ZW4gYSBVbmljb2RlIGNvZGVwb2ludCwgcmV0dXJuIHRoZSBKYXZhU2NyaXB0IHN0cmluZyB0aGF0XG5yZXNwcmVzZW50cyBpdCAobGlrZVxuW2BTdHJpbmcuZnJvbUNvZGVQb2ludGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9mcm9tQ29kZVBvaW50KSkuXG4qL1xuZnVuY3Rpb24gZnJvbUNvZGVQb2ludChjb2RlKSB7XG4gICAgaWYgKGNvZGUgPD0gMHhmZmZmKVxuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICBjb2RlIC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGUgPj4gMTApICsgMHhkODAwLCAoY29kZSAmIDEwMjMpICsgMHhkYzAwKTtcbn1cbi8qKlxuVGhlIGFtb3VudCBvZiBwb3NpdGlvbnMgYSBjaGFyYWN0ZXIgdGFrZXMgdXAgaW4gYSBKYXZhU2NyaXB0IHN0cmluZy5cbiovXG5mdW5jdGlvbiBjb2RlUG9pbnRTaXplKGNvZGUpIHsgcmV0dXJuIGNvZGUgPCAweDEwMDAwID8gMSA6IDI7IH1cblxuY29uc3QgRGVmYXVsdFNwbGl0ID0gL1xcclxcbj98XFxuLztcbi8qKlxuRGlzdGluZ3Vpc2hlcyBkaWZmZXJlbnQgd2F5cyBpbiB3aGljaCBwb3NpdGlvbnMgY2FuIGJlIG1hcHBlZC5cbiovXG52YXIgTWFwTW9kZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcE1vZGUpIHtcbiAgICAvKipcbiAgICBNYXAgYSBwb3NpdGlvbiB0byBhIHZhbGlkIG5ldyBwb3NpdGlvbiwgZXZlbiB3aGVuIGl0cyBjb250ZXh0XG4gICAgd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJTaW1wbGVcIl0gPSAwXSA9IFwiU2ltcGxlXCI7XG4gICAgLyoqXG4gICAgUmV0dXJuIG51bGwgaWYgZGVsZXRpb24gaGFwcGVucyBhY3Jvc3MgdGhlIHBvc2l0aW9uLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tEZWxcIl0gPSAxXSA9IFwiVHJhY2tEZWxcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9iZWZvcmVfIHRoZSBwb3NpdGlvbiBpcyBkZWxldGVkLlxuICAgICovXG4gICAgTWFwTW9kZVtNYXBNb2RlW1wiVHJhY2tCZWZvcmVcIl0gPSAyXSA9IFwiVHJhY2tCZWZvcmVcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiB0aGUgY2hhcmFjdGVyIF9hZnRlcl8gdGhlIHBvc2l0aW9uIGlzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJUcmFja0FmdGVyXCJdID0gM10gPSBcIlRyYWNrQWZ0ZXJcIjtcbnJldHVybiBNYXBNb2RlfSkoTWFwTW9kZSB8fCAoTWFwTW9kZSA9IHt9KSk7XG4vKipcbkEgY2hhbmdlIGRlc2NyaXB0aW9uIGlzIGEgdmFyaWFudCBvZiBbY2hhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VTZXQpXG50aGF0IGRvZXNuJ3Qgc3RvcmUgdGhlIGluc2VydGVkIHRleHQuIEFzIHN1Y2gsIGl0IGNhbid0IGJlXG5hcHBsaWVkLCBidXQgaXMgY2hlYXBlciB0byBzdG9yZSBhbmQgbWFuaXB1bGF0ZS5cbiovXG5jbGFzcyBDaGFuZ2VEZXNjIHtcbiAgICAvLyBTZWN0aW9ucyBhcmUgZW5jb2RlZCBhcyBwYWlycyBvZiBpbnRlZ2Vycy4gVGhlIGZpcnN0IGlzIHRoZVxuICAgIC8vIGxlbmd0aCBpbiB0aGUgY3VycmVudCBkb2N1bWVudCwgYW5kIHRoZSBzZWNvbmQgaXMgLTEgZm9yXG4gICAgLy8gdW5hZmZlY3RlZCBzZWN0aW9ucywgYW5kIHRoZSBsZW5ndGggb2YgdGhlIHJlcGxhY2VtZW50IGNvbnRlbnRcbiAgICAvLyBvdGhlcndpc2UuIFNvIGFuIGluc2VydGlvbiB3b3VsZCBiZSAoMCwgbj4wKSwgYSBkZWxldGlvbiAobj4wLFxuICAgIC8vIDApLCBhbmQgYSByZXBsYWNlbWVudCB0d28gcG9zaXRpdmUgbnVtYmVycy5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2VjdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHNlY3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbGVuZ3RoIG9mIHRoZSBkb2N1bWVudCBiZWZvcmUgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5zZWN0aW9uc1tpXTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgdGhlIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBuZXdMZW5ndGgoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBpbnMgPSB0aGlzLnNlY3Rpb25zW2kgKyAxXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbnMgPCAwID8gdGhpcy5zZWN0aW9uc1tpXSA6IGlucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBGYWxzZSB3aGVuIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcyBpbiB0aGlzIHNldC5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMuc2VjdGlvbnMubGVuZ3RoID09IDAgfHwgdGhpcy5zZWN0aW9ucy5sZW5ndGggPT0gMiAmJiB0aGlzLnNlY3Rpb25zWzFdIDwgMDsgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdW5jaGFuZ2VkIHBhcnRzIGxlZnQgYnkgdGhlc2UgY2hhbmdlcy4gYHBvc0FgXG4gICAgcHJvdmlkZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSByYW5nZSBpbiB0aGUgb2xkIGRvY3VtZW50LCBgcG9zQmBcbiAgICB0aGUgbmV3IHBvc2l0aW9uIGluIHRoZSBjaGFuZ2VkIGRvY3VtZW50LlxuICAgICovXG4gICAgaXRlckdhcHMoZikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zQSA9IDAsIHBvc0IgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpKytdLCBpbnMgPSB0aGlzLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICBpZiAoaW5zIDwgMCkge1xuICAgICAgICAgICAgICAgIGYocG9zQSwgcG9zQiwgbGVuKTtcbiAgICAgICAgICAgICAgICBwb3NCICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gaW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQSArPSBsZW47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgY2hhbmdlZCBieSB0aGVzZSBjaGFuZ2VzLiAoU2VlXG4gICAgW2BDaGFuZ2VTZXQuaXRlckNoYW5nZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC5pdGVyQ2hhbmdlcykgZm9yIGFcbiAgICB2YXJpYW50IHRoYXQgYWxzbyBwcm92aWRlcyB5b3Ugd2l0aCB0aGUgaW5zZXJ0ZWQgdGV4dC4pXG4gICAgYGZyb21BYC9gdG9BYCBwcm92aWRlcyB0aGUgZXh0ZW50IG9mIHRoZSBjaGFuZ2UgaW4gdGhlIHN0YXJ0aW5nXG4gICAgZG9jdW1lbnQsIGBmcm9tQmAvYHRvQmAgdGhlIGV4dGVudCBvZiB0aGUgcmVwbGFjZW1lbnQgaW4gdGhlXG4gICAgY2hhbmdlZCBkb2N1bWVudC5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzICh3aGljaCBhcmUga2VwdFxuICAgIHNlcGFyYXRlIGZvciBbcG9zaXRpb24gbWFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VEZXNjLm1hcFBvcykpIGFyZVxuICAgIHJlcG9ydGVkIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlZFJhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpbnZlcnRlZCBmb3JtIG9mIHRoZXNlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBnZXQgaW52ZXJ0ZWREZXNjKCkge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gobGVuLCBpbnMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2goaW5zLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXB1dGUgdGhlIGNvbWJpbmVkIGVmZmVjdCBvZiBhcHBseWluZyBhbm90aGVyIHNldCBvZiBjaGFuZ2VzXG4gICAgYWZ0ZXIgdGhpcyBvbmUuIFRoZSBsZW5ndGggb2YgdGhlIGRvY3VtZW50IGFmdGVyIHRoaXMgc2V0IHNob3VsZFxuICAgIG1hdGNoIHRoZSBsZW5ndGggYmVmb3JlIGBvdGhlcmAuXG4gICAgKi9cbiAgICBjb21wb3NlRGVzYyhvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIpOyB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgZGVzY3JpcHRpb24sIHdoaWNoIHNob3VsZCBzdGFydCB3aXRoIHRoZSBzYW1lIGRvY3VtZW50XG4gICAgYXMgYG90aGVyYCwgb3ZlciBhbm90aGVyIHNldCBvZiBjaGFuZ2VzLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAgIGFwcGxpZWQgYWZ0ZXIgaXQuIFdoZW4gYGJlZm9yZWAgaXMgdHJ1ZSwgbWFwIGFzIGlmIHRoZSBjaGFuZ2VzXG4gICAgaW4gYHRoaXNgIGhhcHBlbmVkIGJlZm9yZSB0aGUgb25lcyBpbiBgb3RoZXJgLlxuICAgICovXG4gICAgbWFwRGVzYyhvdGhlciwgYmVmb3JlID0gZmFsc2UpIHsgcmV0dXJuIG90aGVyLmVtcHR5ID8gdGhpcyA6IG1hcFNldCh0aGlzLCBvdGhlciwgYmVmb3JlKTsgfVxuICAgIG1hcFBvcyhwb3MsIGFzc29jID0gLTEsIG1vZGUgPSBNYXBNb2RlLlNpbXBsZSkge1xuICAgICAgICBsZXQgcG9zQSA9IDAsIHBvc0IgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdLCBlbmRBID0gcG9zQSArIGxlbjtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3NCICsgKHBvcyAtIHBvc0EpO1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgIT0gTWFwTW9kZS5TaW1wbGUgJiYgZW5kQSA+PSBwb3MgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1vZGUgPT0gTWFwTW9kZS5UcmFja0RlbCAmJiBwb3NBIDwgcG9zICYmIGVuZEEgPiBwb3MgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPT0gTWFwTW9kZS5UcmFja0JlZm9yZSAmJiBwb3NBIDwgcG9zIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID09IE1hcE1vZGUuVHJhY2tBZnRlciAmJiBlbmRBID4gcG9zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGVuZEEgPiBwb3MgfHwgZW5kQSA9PSBwb3MgJiYgYXNzb2MgPCAwICYmICFsZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3MgPT0gcG9zQSB8fCBhc3NvYyA8IDAgPyBwb3NCIDogcG9zQiArIGlucztcbiAgICAgICAgICAgICAgICBwb3NCICs9IGlucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvc0EgPSBlbmRBO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3MgPiBwb3NBKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFBvc2l0aW9uICR7cG9zfSBpcyBvdXQgb2YgcmFuZ2UgZm9yIGNoYW5nZXNldCBvZiBsZW5ndGggJHtwb3NBfWApO1xuICAgICAgICByZXR1cm4gcG9zQjtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgd2hldGhlciB0aGVzZSBjaGFuZ2VzIHRvdWNoIGEgZ2l2ZW4gcmFuZ2UuIFdoZW4gb25lIG9mIHRoZVxuICAgIGNoYW5nZXMgZW50aXJlbHkgY292ZXJzIHRoZSByYW5nZSwgdGhlIHN0cmluZyBgXCJjb3ZlclwiYCBpc1xuICAgIHJldHVybmVkLlxuICAgICovXG4gICAgdG91Y2hlc1JhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoICYmIHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgZW5kID0gcG9zICsgbGVuO1xuICAgICAgICAgICAgaWYgKGlucyA+PSAwICYmIHBvcyA8PSB0byAmJiBlbmQgPj0gZnJvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zIDwgZnJvbSAmJiBlbmQgPiB0byA/IFwiY292ZXJcIiA6IHRydWU7XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSAocmVzdWx0ID8gXCIgXCIgOiBcIlwiKSArIGxlbiArIChpbnMgPj0gMCA/IFwiOlwiICsgaW5zIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgU2VyaWFsaXplIHRoaXMgY2hhbmdlIGRlc2MgdG8gYSBKU09OLXJlcHJlc2VudGFibGUgdmFsdWUuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7IHJldHVybiB0aGlzLnNlY3Rpb25zOyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlIGRlc2MgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiAoYXMgcHJvZHVjZWRcbiAgICBieSBbYHRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYy50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pIHx8IGpzb24ubGVuZ3RoICUgMiB8fCBqc29uLnNvbWUoYSA9PiB0eXBlb2YgYSAhPSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIENoYW5nZURlc2NcIik7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlRGVzYyhqc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHNlY3Rpb25zKSB7IHJldHVybiBuZXcgQ2hhbmdlRGVzYyhzZWN0aW9ucyk7IH1cbn1cbi8qKlxuQSBjaGFuZ2Ugc2V0IHJlcHJlc2VudHMgYSBncm91cCBvZiBtb2RpZmljYXRpb25zIHRvIGEgZG9jdW1lbnQuIEl0XG5zdG9yZXMgdGhlIGRvY3VtZW50IGxlbmd0aCwgYW5kIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gZG9jdW1lbnRzXG53aXRoIGV4YWN0bHkgdGhhdCBsZW5ndGguXG4qL1xuY2xhc3MgQ2hhbmdlU2V0IGV4dGVuZHMgQ2hhbmdlRGVzYyB7XG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaW5zZXJ0ZWQpIHtcbiAgICAgICAgc3VwZXIoc2VjdGlvbnMpO1xuICAgICAgICB0aGlzLmluc2VydGVkID0gaW5zZXJ0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IHRoZSBjaGFuZ2VzIHRvIGEgZG9jdW1lbnQsIHJldHVybmluZyB0aGUgbW9kaWZpZWRcbiAgICBkb2N1bWVudC5cbiAgICAqL1xuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggIT0gZG9jLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQXBwbHlpbmcgY2hhbmdlIHNldCB0byBhIGRvY3VtZW50IHdpdGggdGhlIHdyb25nIGxlbmd0aFwiKTtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgKGZyb21BLCB0b0EsIGZyb21CLCBfdG9CLCB0ZXh0KSA9PiBkb2MgPSBkb2MucmVwbGFjZShmcm9tQiwgZnJvbUIgKyAodG9BIC0gZnJvbUEpLCB0ZXh0KSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gZG9jO1xuICAgIH1cbiAgICBtYXBEZXNjKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gdGhlIGRvY3VtZW50IGFzIGl0IGV4aXN0ZWQgX2JlZm9yZV8gdGhlIGNoYW5nZXMsIHJldHVybiBhXG4gICAgY2hhbmdlIHNldCB0aGF0IHJlcHJlc2VudHMgdGhlIGludmVyc2Ugb2YgdGhpcyBzZXQsIHdoaWNoIGNvdWxkXG4gICAgYmUgdXNlZCB0byBnbyBmcm9tIHRoZSBkb2N1bWVudCBjcmVhdGVkIGJ5IHRoZSBjaGFuZ2VzIGJhY2sgdG9cbiAgICB0aGUgZG9jdW1lbnQgYXMgaXQgZXhpc3RlZCBiZWZvcmUgdGhlIGNoYW5nZXMuXG4gICAgKi9cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuc2xpY2UoKSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHNlY3Rpb25zW2ldLCBpbnMgPSBzZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zID49IDApIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpXSA9IGlucztcbiAgICAgICAgICAgICAgICBzZWN0aW9uc1tpICsgMV0gPSBsZW47XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaSA+PiAxO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWQucHVzaChUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKGxlbiA/IGRvYy5zbGljZShwb3MsIHBvcyArIGxlbikgOiBUZXh0LmVtcHR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tYmluZSB0d28gc3Vic2VxdWVudCBjaGFuZ2Ugc2V0cyBpbnRvIGEgc2luZ2xlIHNldC4gYG90aGVyYFxuICAgIG11c3Qgc3RhcnQgaW4gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGB0aGlzYC4gSWYgYHRoaXNgIGdvZXNcbiAgICBgZG9jQWAg4oaSIGBkb2NCYCBhbmQgYG90aGVyYCByZXByZXNlbnRzIGBkb2NCYCDihpIgYGRvY0NgLCB0aGVcbiAgICByZXR1cm5lZCB2YWx1ZSB3aWxsIHJlcHJlc2VudCB0aGUgY2hhbmdlIGBkb2NBYCDihpIgYGRvY0NgLlxuICAgICovXG4gICAgY29tcG9zZShvdGhlcikgeyByZXR1cm4gdGhpcy5lbXB0eSA/IG90aGVyIDogb3RoZXIuZW1wdHkgPyB0aGlzIDogY29tcG9zZVNldHModGhpcywgb3RoZXIsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgR2l2ZW4gYW5vdGhlciBjaGFuZ2Ugc2V0IHN0YXJ0aW5nIGluIHRoZSBzYW1lIGRvY3VtZW50LCBtYXBzIHRoaXNcbiAgICBjaGFuZ2Ugc2V0IG92ZXIgdGhlIG90aGVyLCBwcm9kdWNpbmcgYSBuZXcgY2hhbmdlIHNldCB0aGF0IGNhbiBiZVxuICAgIGFwcGxpZWQgdG8gdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IGFwcGx5aW5nIGBvdGhlcmAuIFdoZW5cbiAgICBgYmVmb3JlYCBpcyBgdHJ1ZWAsIG9yZGVyIGNoYW5nZXMgYXMgaWYgYHRoaXNgIGNvbWVzIGJlZm9yZVxuICAgIGBvdGhlcmAsIG90aGVyd2lzZSAodGhlIGRlZmF1bHQpIHRyZWF0IGBvdGhlcmAgYXMgY29taW5nIGZpcnN0LlxuICAgIFxuICAgIEdpdmVuIHR3byBjaGFuZ2VzIGBBYCBhbmQgYEJgLCBgQS5jb21wb3NlKEIubWFwKEEpKWAgYW5kXG4gICAgYEIuY29tcG9zZShBLm1hcChCLCB0cnVlKSlgIHdpbGwgcHJvZHVjZSB0aGUgc2FtZSBkb2N1bWVudC4gVGhpc1xuICAgIHByb3ZpZGVzIGEgYmFzaWMgZm9ybSBvZiBbb3BlcmF0aW9uYWxcbiAgICB0cmFuc2Zvcm1hdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3BlcmF0aW9uYWxfdHJhbnNmb3JtYXRpb24pLFxuICAgIGFuZCBjYW4gYmUgdXNlZCBmb3IgY29sbGFib3JhdGl2ZSBlZGl0aW5nLlxuICAgICovXG4gICAgbWFwKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gb3RoZXIuZW1wdHkgPyB0aGlzIDogbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUsIHRydWUpOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSBjaGFuZ2VkIHJhbmdlcyBpbiB0aGUgZG9jdW1lbnQsIGNhbGxpbmcgYGZgIGZvclxuICAgIGVhY2gsIHdpdGggdGhlIHJhbmdlIGluIHRoZSBvcmlnaW5hbCBkb2N1bWVudCAoYGZyb21BYC1gdG9BYClcbiAgICBhbmQgdGhlIHJhbmdlIHRoYXQgcmVwbGFjZXMgaXQgaW4gdGhlIG5ldyBkb2N1bWVudFxuICAgIChgZnJvbUJgLWB0b0JgKS5cbiAgICBcbiAgICBXaGVuIGBpbmRpdmlkdWFsYCBpcyB0cnVlLCBhZGphY2VudCBjaGFuZ2VzIGFyZSByZXBvcnRlZFxuICAgIHNlcGFyYXRlbHkuXG4gICAgKi9cbiAgICBpdGVyQ2hhbmdlcyhmLCBpbmRpdmlkdWFsID0gZmFsc2UpIHtcbiAgICAgICAgaXRlckNoYW5nZXModGhpcywgZiwgaW5kaXZpZHVhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFtjaGFuZ2UgZGVzY3JpcHRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlRGVzYykgZm9yIHRoaXMgY2hhbmdlXG4gICAgc2V0LlxuICAgICovXG4gICAgZ2V0IGRlc2MoKSB7IHJldHVybiBDaGFuZ2VEZXNjLmNyZWF0ZSh0aGlzLnNlY3Rpb25zKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmlsdGVyKHJhbmdlcykge1xuICAgICAgICBsZXQgcmVzdWx0U2VjdGlvbnMgPSBbXSwgcmVzdWx0SW5zZXJ0ZWQgPSBbXSwgZmlsdGVyZWRTZWN0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgaXRlciA9IG5ldyBTZWN0aW9uSXRlcih0aGlzKTtcbiAgICAgICAgZG9uZTogZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpID09IHJhbmdlcy5sZW5ndGggPyAxZTkgOiByYW5nZXNbaSsrXTtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCBuZXh0IHx8IHBvcyA9PSBuZXh0ICYmIGl0ZXIubGVuID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlci5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhayBkb25lO1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihpdGVyLmxlbiwgbmV4dCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zID0gaXRlci5pbnMgPT0gLTEgPyAtMSA6IGl0ZXIub2ZmID09IDAgPyBpdGVyLmlucyA6IDA7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCBpbnMpO1xuICAgICAgICAgICAgICAgIGlmIChpbnMgPiAwKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQocmVzdWx0SW5zZXJ0ZWQsIHJlc3VsdFNlY3Rpb25zLCBpdGVyLnRleHQpO1xuICAgICAgICAgICAgICAgIGl0ZXIuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW5kID0gcmFuZ2VzW2krK107XG4gICAgICAgICAgICB3aGlsZSAocG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXIuZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZG9uZTtcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gTWF0aC5taW4oaXRlci5sZW4sIGVuZCAtIHBvcyk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihyZXN1bHRTZWN0aW9ucywgbGVuLCAtMSk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihmaWx0ZXJlZFNlY3Rpb25zLCBsZW4sIGl0ZXIuaW5zID09IC0xID8gLTEgOiBpdGVyLm9mZiA9PSAwID8gaXRlci5pbnMgOiAwKTtcbiAgICAgICAgICAgICAgICBpdGVyLmZvcndhcmQobGVuKTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IG5ldyBDaGFuZ2VTZXQocmVzdWx0U2VjdGlvbnMsIHJlc3VsdEluc2VydGVkKSxcbiAgICAgICAgICAgIGZpbHRlcmVkOiBDaGFuZ2VEZXNjLmNyZWF0ZShmaWx0ZXJlZFNlY3Rpb25zKSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhpcyBjaGFuZ2Ugc2V0IHRvIGEgSlNPTi1yZXByZXNlbnRhYmxlIHZhbHVlLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgcGFydHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoaW5zIDwgMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGxlbik7XG4gICAgICAgICAgICBlbHNlIGlmIChpbnMgPT0gMClcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKFtsZW5dLmNvbmNhdCh0aGlzLmluc2VydGVkW2kgPj4gMV0udG9KU09OKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGNoYW5nZSBzZXQgZm9yIHRoZSBnaXZlbiBjaGFuZ2VzLCBmb3IgYSBkb2N1bWVudCBvZiB0aGVcbiAgICBnaXZlbiBsZW5ndGgsIHVzaW5nIGBsaW5lU2VwYCBhcyBsaW5lIHNlcGFyYXRvci5cbiAgICAqL1xuICAgIHN0YXRpYyBvZihjaGFuZ2VzLCBsZW5ndGgsIGxpbmVTZXApIHtcbiAgICAgICAgbGV0IHNlY3Rpb25zID0gW10sIGluc2VydGVkID0gW10sIHBvcyA9IDA7XG4gICAgICAgIGxldCB0b3RhbCA9IG51bGw7XG4gICAgICAgIGZ1bmN0aW9uIGZsdXNoKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghZm9yY2UgJiYgIXNlY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAocG9zIDwgbGVuZ3RoKVxuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbmd0aCAtIHBvcywgLTEpO1xuICAgICAgICAgICAgbGV0IHNldCA9IG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICAgICAgICAgIHRvdGFsID0gdG90YWwgPyB0b3RhbC5jb21wb3NlKHNldC5tYXAodG90YWwpKSA6IHNldDtcbiAgICAgICAgICAgIHNlY3Rpb25zID0gW107XG4gICAgICAgICAgICBpbnNlcnRlZCA9IFtdO1xuICAgICAgICAgICAgcG9zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzKHNwZWMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNwZWMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViIG9mIHNwZWMpXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3Moc3ViKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNwZWMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3BlYy5sZW5ndGggIT0gbGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aCAoZ290ICR7c3BlYy5sZW5ndGh9LCBleHBlY3RlZCAke2xlbmd0aH0pYCk7XG4gICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICB0b3RhbCA9IHRvdGFsID8gdG90YWwuY29tcG9zZShzcGVjLm1hcCh0b3RhbCkpIDogc3BlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB7IGZyb20sIHRvID0gZnJvbSwgaW5zZXJ0IH0gPSBzcGVjO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID4gdG8gfHwgZnJvbSA8IDAgfHwgdG8gPiBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGNoYW5nZSByYW5nZSAke2Zyb219IHRvICR7dG99IChpbiBkb2Mgb2YgbGVuZ3RoICR7bGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zVGV4dCA9ICFpbnNlcnQgPyBUZXh0LmVtcHR5IDogdHlwZW9mIGluc2VydCA9PSBcInN0cmluZ1wiID8gVGV4dC5vZihpbnNlcnQuc3BsaXQobGluZVNlcCB8fCBEZWZhdWx0U3BsaXQpKSA6IGluc2VydDtcbiAgICAgICAgICAgICAgICBsZXQgaW5zTGVuID0gaW5zVGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPT0gdG8gJiYgaW5zTGVuID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgZnJvbSAtIHBvcywgLTEpO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIHRvIC0gZnJvbSwgaW5zTGVuKTtcbiAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0ZWQsIHNlY3Rpb25zLCBpbnNUZXh0KTtcbiAgICAgICAgICAgICAgICBwb3MgPSB0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzKGNoYW5nZXMpO1xuICAgICAgICBmbHVzaCghdG90YWwpO1xuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBlbXB0eSBjaGFuZ2VzZXQgb2YgdGhlIGdpdmVuIGxlbmd0aC5cbiAgICAqL1xuICAgIHN0YXRpYyBlbXB0eShsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQobGVuZ3RoID8gW2xlbmd0aCwgLTFdIDogW10sIFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlc2V0IGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gKGFzIHByb2R1Y2VkIGJ5XG4gICAgW2B0b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldC50b0pTT04pLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24pKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gb2YgQ2hhbmdlU2V0XCIpO1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IGpzb25baV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gocGFydCwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFydCkgfHwgdHlwZW9mIHBhcnRbMF0gIT0gXCJudW1iZXJcIiB8fCBwYXJ0LnNvbWUoKGUsIGkpID0+IGkgJiYgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBDaGFuZ2VTZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJ0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChwYXJ0WzBdLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChpbnNlcnRlZC5sZW5ndGggPCBpKVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICAgICAgICAgIGluc2VydGVkW2ldID0gVGV4dC5vZihwYXJ0LnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHBhcnRbMF0sIGluc2VydGVkW2ldLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VTZXQoc2VjdGlvbnMsIGluc2VydGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlU2V0KHNlY3Rpb25zLCBpbnNlcnRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zLCBmb3JjZUpvaW4gPSBmYWxzZSkge1xuICAgIGlmIChsZW4gPT0gMCAmJiBpbnMgPD0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBsYXN0ID0gc2VjdGlvbnMubGVuZ3RoIC0gMjtcbiAgICBpZiAobGFzdCA+PSAwICYmIGlucyA8PSAwICYmIGlucyA9PSBzZWN0aW9uc1tsYXN0ICsgMV0pXG4gICAgICAgIHNlY3Rpb25zW2xhc3RdICs9IGxlbjtcbiAgICBlbHNlIGlmIChsYXN0ID49IDAgJiYgbGVuID09IDAgJiYgc2VjdGlvbnNbbGFzdF0gPT0gMClcbiAgICAgICAgc2VjdGlvbnNbbGFzdCArIDFdICs9IGlucztcbiAgICBlbHNlIGlmIChmb3JjZUpvaW4pIHtcbiAgICAgICAgc2VjdGlvbnNbbGFzdF0gKz0gbGVuO1xuICAgICAgICBzZWN0aW9uc1tsYXN0ICsgMV0gKz0gaW5zO1xuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIHNlY3Rpb25zLnB1c2gobGVuLCBpbnMpO1xufVxuZnVuY3Rpb24gYWRkSW5zZXJ0KHZhbHVlcywgc2VjdGlvbnMsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGluZGV4ID0gKHNlY3Rpb25zLmxlbmd0aCAtIDIpID4+IDE7XG4gICAgaWYgKGluZGV4IDwgdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdID0gdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXS5hcHBlbmQodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd2hpbGUgKHZhbHVlcy5sZW5ndGggPCBpbmRleClcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXRlckNoYW5nZXMoZGVzYywgZiwgaW5kaXZpZHVhbCkge1xuICAgIGxldCBpbnNlcnRlZCA9IGRlc2MuaW5zZXJ0ZWQ7XG4gICAgZm9yIChsZXQgcG9zQSA9IDAsIHBvc0IgPSAwLCBpID0gMDsgaSA8IGRlc2Muc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICBsZXQgbGVuID0gZGVzYy5zZWN0aW9uc1tpKytdLCBpbnMgPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICBwb3NBICs9IGxlbjtcbiAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGVuZEEgPSBwb3NBLCBlbmRCID0gcG9zQiwgdGV4dCA9IFRleHQuZW1wdHk7XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgZW5kQSArPSBsZW47XG4gICAgICAgICAgICAgICAgZW5kQiArPSBpbnM7XG4gICAgICAgICAgICAgICAgaWYgKGlucyAmJiBpbnNlcnRlZClcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuYXBwZW5kKGluc2VydGVkWyhpIC0gMikgPj4gMV0pO1xuICAgICAgICAgICAgICAgIGlmIChpbmRpdmlkdWFsIHx8IGkgPT0gZGVzYy5zZWN0aW9ucy5sZW5ndGggfHwgZGVzYy5zZWN0aW9uc1tpICsgMV0gPCAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBsZW4gPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICAgICAgaW5zID0gZGVzYy5zZWN0aW9uc1tpKytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZihwb3NBLCBlbmRBLCBwb3NCLCBlbmRCLCB0ZXh0KTtcbiAgICAgICAgICAgIHBvc0EgPSBlbmRBO1xuICAgICAgICAgICAgcG9zQiA9IGVuZEI7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBtYXBTZXQoc2V0QSwgc2V0QiwgYmVmb3JlLCBta1NldCA9IGZhbHNlKSB7XG4gICAgLy8gUHJvZHVjZSBhIGNvcHkgb2Ygc2V0QSB0aGF0IGFwcGxpZXMgdG8gdGhlIGRvY3VtZW50IGFmdGVyIHNldEJcbiAgICAvLyBoYXMgYmVlbiBhcHBsaWVkIChhc3N1bWluZyBib3RoIHN0YXJ0IGF0IHRoZSBzYW1lIGRvY3VtZW50KS5cbiAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ID0gbWtTZXQgPyBbXSA6IG51bGw7XG4gICAgbGV0IGEgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0QSksIGIgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0Qik7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGJvdGggc2V0cyBpbiBwYXJhbGxlbC4gaW5zZXJ0ZWQgdHJhY2tzLCBmb3IgY2hhbmdlc1xuICAgIC8vIGluIEEgdGhhdCBoYXZlIHRvIGJlIHByb2Nlc3NlZCBwaWVjZS1ieS1waWVjZSwgd2hldGhlciB0aGVpclxuICAgIC8vIGNvbnRlbnQgaGFzIGJlZW4gaW5zZXJ0ZWQgYWxyZWFkeSwgYW5kIHJlZmVycyB0byB0aGUgc2VjdGlvblxuICAgIC8vIGluZGV4LlxuICAgIGZvciAobGV0IGluc2VydGVkID0gLTE7Oykge1xuICAgICAgICBpZiAoYS5kb25lICYmIGIubGVuIHx8IGIuZG9uZSAmJiBhLmxlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPT0gLTEgJiYgYi5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIE1vdmUgYWNyb3NzIHJhbmdlcyBza2lwcGVkIGJ5IGJvdGggc2V0cy5cbiAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihhLmxlbiwgYi5sZW4pO1xuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuLCAtMSk7XG4gICAgICAgICAgICBhLmZvcndhcmQobGVuKTtcbiAgICAgICAgICAgIGIuZm9yd2FyZChsZW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGIuaW5zID49IDAgJiYgKGEuaW5zIDwgMCB8fCBpbnNlcnRlZCA9PSBhLmkgfHwgYS5vZmYgPT0gMCAmJiAoYi5sZW4gPCBhLmxlbiB8fCBiLmxlbiA9PSBhLmxlbiAmJiAhYmVmb3JlKSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjaGFuZ2UgaW4gQiB0aGF0IGNvbWVzIGJlZm9yZSB0aGUgbmV4dCBjaGFuZ2UgaW5cbiAgICAgICAgICAgIC8vIEEgKG9yZGVyZWQgYnkgc3RhcnQgcG9zLCB0aGVuIGxlbiwgdGhlbiBiZWZvcmUgZmxhZyksIHNraXBcbiAgICAgICAgICAgIC8vIHRoYXQgKGFuZCBwcm9jZXNzIGFueSBjaGFuZ2VzIGluIEEgaXQgY292ZXJzKS5cbiAgICAgICAgICAgIGxldCBsZW4gPSBiLmxlbjtcbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGIuaW5zLCAtMSk7XG4gICAgICAgICAgICB3aGlsZSAobGVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gTWF0aC5taW4oYS5sZW4sIGxlbik7XG4gICAgICAgICAgICAgICAgaWYgKGEuaW5zID49IDAgJiYgaW5zZXJ0ZWQgPCBhLmkgJiYgYS5sZW4gPD0gcGllY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgMCwgYS5pbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGEudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGluc2VydGVkID0gYS5pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhLmZvcndhcmQocGllY2UpO1xuICAgICAgICAgICAgICAgIGxlbiAtPSBwaWVjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGIubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuaW5zID49IDApIHtcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHBhcnQgb2YgYSBjaGFuZ2UgaW4gQSB1cCB0byB0aGUgc3RhcnQgb2YgdGhlIG5leHRcbiAgICAgICAgICAgIC8vIG5vbi1kZWxldGlvbiBjaGFuZ2UgaW4gQiAoaWYgb3ZlcmxhcHBpbmcpLlxuICAgICAgICAgICAgbGV0IGxlbiA9IDAsIGxlZnQgPSBhLmxlbjtcbiAgICAgICAgICAgIHdoaWxlIChsZWZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGIuaW5zID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwaWVjZSA9IE1hdGgubWluKGxlZnQsIGIubGVuKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuICs9IHBpZWNlO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IHBpZWNlO1xuICAgICAgICAgICAgICAgICAgICBiLmZvcndhcmQocGllY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiLmlucyA9PSAwICYmIGIubGVuIDwgbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IGIubGVuO1xuICAgICAgICAgICAgICAgICAgICBiLm5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zZXJ0ZWQgPCBhLmkgPyBhLmlucyA6IDApO1xuICAgICAgICAgICAgaWYgKGluc2VydCAmJiBpbnNlcnRlZCA8IGEuaSlcbiAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYS50ZXh0KTtcbiAgICAgICAgICAgIGluc2VydGVkID0gYS5pO1xuICAgICAgICAgICAgYS5mb3J3YXJkKGEubGVuIC0gbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5kb25lICYmIGIuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGluc2VydCA/IENoYW5nZVNldC5jcmVhdGVTZXQoc2VjdGlvbnMsIGluc2VydCkgOiBDaGFuZ2VEZXNjLmNyZWF0ZShzZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3Roc1wiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBvc2VTZXRzKHNldEEsIHNldEIsIG1rU2V0ID0gZmFsc2UpIHtcbiAgICBsZXQgc2VjdGlvbnMgPSBbXTtcbiAgICBsZXQgaW5zZXJ0ID0gbWtTZXQgPyBbXSA6IG51bGw7XG4gICAgbGV0IGEgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0QSksIGIgPSBuZXcgU2VjdGlvbkl0ZXIoc2V0Qik7XG4gICAgZm9yIChsZXQgb3BlbiA9IGZhbHNlOzspIHtcbiAgICAgICAgaWYgKGEuZG9uZSAmJiBiLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnNlcnQgPyBDaGFuZ2VTZXQuY3JlYXRlU2V0KHNlY3Rpb25zLCBpbnNlcnQpIDogQ2hhbmdlRGVzYy5jcmVhdGUoc2VjdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuaW5zID09IDApIHsgLy8gRGVsZXRpb24gaW4gQVxuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYS5sZW4sIDAsIG9wZW4pO1xuICAgICAgICAgICAgYS5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYi5sZW4gPT0gMCAmJiAhYi5kb25lKSB7IC8vIEluc2VydGlvbiBpbiBCXG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCAwLCBiLmlucywgb3Blbik7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0KVxuICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBiLnRleHQpO1xuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5kb25lIHx8IGIuZG9uZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCBjaGFuZ2Ugc2V0IGxlbmd0aHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gTWF0aC5taW4oYS5sZW4yLCBiLmxlbiksIHNlY3Rpb25MZW4gPSBzZWN0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoYS5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5zQiA9IGIuaW5zID09IC0xID8gLTEgOiBiLm9mZiA/IDAgOiBiLmlucztcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBsZW4sIGluc0IsIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQgJiYgaW5zQilcbiAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGIudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGEub2ZmID8gMCA6IGEubGVuLCBsZW4sIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBhLnRleHRCaXQobGVuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBhLm9mZiA/IDAgOiBhLmxlbiwgYi5vZmYgPyAwIDogYi5pbnMsIG9wZW4pO1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQgJiYgIWIub2ZmKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYi50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wZW4gPSAoYS5pbnMgPiBsZW4gfHwgYi5pbnMgPj0gMCAmJiBiLmxlbiA+IGxlbikgJiYgKG9wZW4gfHwgc2VjdGlvbnMubGVuZ3RoID4gc2VjdGlvbkxlbik7XG4gICAgICAgICAgICBhLmZvcndhcmQyKGxlbik7XG4gICAgICAgICAgICBiLmZvcndhcmQobGVuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFNlY3Rpb25JdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzZXQpIHtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBsZXQgeyBzZWN0aW9ucyB9ID0gdGhpcy5zZXQ7XG4gICAgICAgIGlmICh0aGlzLmkgPCBzZWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubGVuID0gc2VjdGlvbnNbdGhpcy5pKytdO1xuICAgICAgICAgICAgdGhpcy5pbnMgPSBzZWN0aW9uc1t0aGlzLmkrK107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlbiA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucyA9IC0yO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2ZmID0gMDtcbiAgICB9XG4gICAgZ2V0IGRvbmUoKSB7IHJldHVybiB0aGlzLmlucyA9PSAtMjsgfVxuICAgIGdldCBsZW4yKCkgeyByZXR1cm4gdGhpcy5pbnMgPCAwID8gdGhpcy5sZW4gOiB0aGlzLmluczsgfVxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBsZXQgeyBpbnNlcnRlZCB9ID0gdGhpcy5zZXQsIGluZGV4ID0gKHRoaXMuaSAtIDIpID4+IDE7XG4gICAgICAgIHJldHVybiBpbmRleCA+PSBpbnNlcnRlZC5sZW5ndGggPyBUZXh0LmVtcHR5IDogaW5zZXJ0ZWRbaW5kZXhdO1xuICAgIH1cbiAgICB0ZXh0Qml0KGxlbikge1xuICAgICAgICBsZXQgeyBpbnNlcnRlZCB9ID0gdGhpcy5zZXQsIGluZGV4ID0gKHRoaXMuaSAtIDIpID4+IDE7XG4gICAgICAgIHJldHVybiBpbmRleCA+PSBpbnNlcnRlZC5sZW5ndGggJiYgIWxlbiA/IFRleHQuZW1wdHlcbiAgICAgICAgICAgIDogaW5zZXJ0ZWRbaW5kZXhdLnNsaWNlKHRoaXMub2ZmLCBsZW4gPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRoaXMub2ZmICsgbGVuKTtcbiAgICB9XG4gICAgZm9yd2FyZChsZW4pIHtcbiAgICAgICAgaWYgKGxlbiA9PSB0aGlzLmxlbilcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGVuIC09IGxlbjtcbiAgICAgICAgICAgIHRoaXMub2ZmICs9IGxlbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3J3YXJkMihsZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zID09IC0xKVxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkKGxlbik7XG4gICAgICAgIGVsc2UgaWYgKGxlbiA9PSB0aGlzLmlucylcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5zIC09IGxlbjtcbiAgICAgICAgICAgIHRoaXMub2ZmICs9IGxlbjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG5BIHNpbmdsZSBzZWxlY3Rpb24gcmFuZ2UuIFdoZW5cbltgYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKVxuaXMgZW5hYmxlZCwgYSBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclNlbGVjdGlvbikgbWF5IGhvbGRcbm11bHRpcGxlIHJhbmdlcy4gQnkgZGVmYXVsdCwgc2VsZWN0aW9ucyBob2xkIGV4YWN0bHkgb25lIHJhbmdlLlxuKi9cbmNsYXNzIFNlbGVjdGlvblJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbG93ZXIgYm91bmRhcnkgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIHVwcGVyIGJvdW5kYXJ5IG9mIHRoZSByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBmbGFncykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGFuY2hvciBvZiB0aGUgcmFuZ2XigJR0aGUgc2lkZSB0aGF0IGRvZXNuJ3QgbW92ZSB3aGVuIHlvdVxuICAgIGV4dGVuZCBpdC5cbiAgICAqL1xuICAgIGdldCBhbmNob3IoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgMzIgLyogUmFuZ2VGbGFnLkludmVydGVkICovID8gdGhpcy50byA6IHRoaXMuZnJvbTsgfVxuICAgIC8qKlxuICAgIFRoZSBoZWFkIG9mIHRoZSByYW5nZSwgd2hpY2ggaXMgbW92ZWQgd2hlbiB0aGUgcmFuZ2UgaXNcbiAgICBbZXh0ZW5kZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UuZXh0ZW5kKS5cbiAgICAqL1xuICAgIGdldCBoZWFkKCkgeyByZXR1cm4gdGhpcy5mbGFncyAmIDMyIC8qIFJhbmdlRmxhZy5JbnZlcnRlZCAqLyA/IHRoaXMuZnJvbSA6IHRoaXMudG87IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gYGFuY2hvcmAgYW5kIGBoZWFkYCBhcmUgYXQgdGhlIHNhbWUgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgZW1wdHkoKSB7IHJldHVybiB0aGlzLmZyb20gPT0gdGhpcy50bzsgfVxuICAgIC8qKlxuICAgIElmIHRoaXMgaXMgYSBjdXJzb3IgdGhhdCBpcyBleHBsaWNpdGx5IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICBjaGFyYWN0ZXIgb24gb25lIG9mIGl0cyBzaWRlcywgdGhpcyByZXR1cm5zIHRoZSBzaWRlLiAtMSBtZWFuc1xuICAgIHRoZSBjaGFyYWN0ZXIgYmVmb3JlIGl0cyBwb3NpdGlvbiwgMSB0aGUgY2hhcmFjdGVyIGFmdGVyLCBhbmQgMFxuICAgIG1lYW5zIG5vIGFzc29jaWF0aW9uLlxuICAgICovXG4gICAgZ2V0IGFzc29jKCkgeyByZXR1cm4gdGhpcy5mbGFncyAmIDggLyogUmFuZ2VGbGFnLkFzc29jQmVmb3JlICovID8gLTEgOiB0aGlzLmZsYWdzICYgMTYgLyogUmFuZ2VGbGFnLkFzc29jQWZ0ZXIgKi8gPyAxIDogMDsgfVxuICAgIC8qKlxuICAgIFRoZSBiaWRpcmVjdGlvbmFsIHRleHQgbGV2ZWwgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY3Vyc29yLCBpZlxuICAgIGFueS5cbiAgICAqL1xuICAgIGdldCBiaWRpTGV2ZWwoKSB7XG4gICAgICAgIGxldCBsZXZlbCA9IHRoaXMuZmxhZ3MgJiA3IC8qIFJhbmdlRmxhZy5CaWRpTGV2ZWxNYXNrICovO1xuICAgICAgICByZXR1cm4gbGV2ZWwgPT0gNyA/IG51bGwgOiBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGdvYWwgY29sdW1uIChzdG9yZWQgdmVydGljYWwgb2Zmc2V0KSBhc3NvY2lhdGVkIHdpdGggYVxuICAgIGN1cnNvci4gVGhpcyBpcyB1c2VkIHRvIHByZXNlcnZlIHRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB3aGVuXG4gICAgW21vdmluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcubW92ZVZlcnRpY2FsbHkpIGFjcm9zc1xuICAgIGxpbmVzIG9mIGRpZmZlcmVudCBsZW5ndGguXG4gICAgKi9cbiAgICBnZXQgZ29hbENvbHVtbigpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5mbGFncyA+PiA2IC8qIFJhbmdlRmxhZy5Hb2FsQ29sdW1uT2Zmc2V0ICovO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT0gMTY3NzcyMTUgLyogUmFuZ2VGbGFnLk5vR29hbENvbHVtbiAqLyA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyByYW5nZSB0aHJvdWdoIGEgY2hhbmdlLCBwcm9kdWNpbmcgYSB2YWxpZCByYW5nZSBpbiB0aGVcbiAgICB1cGRhdGVkIGRvY3VtZW50LlxuICAgICovXG4gICAgbWFwKGNoYW5nZSwgYXNzb2MgPSAtMSkge1xuICAgICAgICBsZXQgZnJvbSwgdG87XG4gICAgICAgIGlmICh0aGlzLmVtcHR5KSB7XG4gICAgICAgICAgICBmcm9tID0gdG8gPSBjaGFuZ2UubWFwUG9zKHRoaXMuZnJvbSwgYXNzb2MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnJvbSA9IGNoYW5nZS5tYXBQb3ModGhpcy5mcm9tLCAxKTtcbiAgICAgICAgICAgIHRvID0gY2hhbmdlLm1hcFBvcyh0aGlzLnRvLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb20gPT0gdGhpcy5mcm9tICYmIHRvID09IHRoaXMudG8gPyB0aGlzIDogbmV3IFNlbGVjdGlvblJhbmdlKGZyb20sIHRvLCB0aGlzLmZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRXh0ZW5kIHRoaXMgcmFuZ2UgdG8gY292ZXIgYXQgbGVhc3QgYGZyb21gIHRvIGB0b2AuXG4gICAgKi9cbiAgICBleHRlbmQoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmIChmcm9tIDw9IHRoaXMuYW5jaG9yICYmIHRvID49IHRoaXMuYW5jaG9yKVxuICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0byk7XG4gICAgICAgIGxldCBoZWFkID0gTWF0aC5hYnMoZnJvbSAtIHRoaXMuYW5jaG9yKSA+IE1hdGguYWJzKHRvIC0gdGhpcy5hbmNob3IpID8gZnJvbSA6IHRvO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRoaXMuYW5jaG9yLCBoZWFkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIHJhbmdlIHRvIGFub3RoZXIgcmFuZ2UuXG4gICAgKi9cbiAgICBlcShvdGhlciwgaW5jbHVkZUFzc29jID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yID09IG90aGVyLmFuY2hvciAmJiB0aGlzLmhlYWQgPT0gb3RoZXIuaGVhZCAmJlxuICAgICAgICAgICAgKCFpbmNsdWRlQXNzb2MgfHwgIXRoaXMuZW1wdHkgfHwgdGhpcy5hc3NvYyA9PSBvdGhlci5hc3NvYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJhbmdlLlxuICAgICovXG4gICAgdG9KU09OKCkgeyByZXR1cm4geyBhbmNob3I6IHRoaXMuYW5jaG9yLCBoZWFkOiB0aGlzLmhlYWQgfTsgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgcmFuZ2UgdG8gYSBgU2VsZWN0aW9uUmFuZ2VgXG4gICAgaW5zdGFuY2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoIWpzb24gfHwgdHlwZW9mIGpzb24uYW5jaG9yICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24uaGVhZCAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIFNlbGVjdGlvblJhbmdlXCIpO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGpzb24uYW5jaG9yLCBqc29uLmhlYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZnJvbSwgdG8sIGZsYWdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VsZWN0aW9uUmFuZ2UoZnJvbSwgdG8sIGZsYWdzKTtcbiAgICB9XG59XG4vKipcbkFuIGVkaXRvciBzZWxlY3Rpb24gaG9sZHMgb25lIG9yIG1vcmUgc2VsZWN0aW9uIHJhbmdlcy5cbiovXG5jbGFzcyBFZGl0b3JTZWxlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSByYW5nZXMgaW4gdGhlIHNlbGVjdGlvbiwgc29ydGVkIGJ5IHBvc2l0aW9uLiBSYW5nZXMgY2Fubm90XG4gICAgb3ZlcmxhcCAoYnV0IHRoZXkgbWF5IHRvdWNoLCBpZiB0aGV5IGFyZW4ndCBlbXB0eSkuXG4gICAgKi9cbiAgICByYW5nZXMsIFxuICAgIC8qKlxuICAgIFRoZSBpbmRleCBvZiB0aGUgX21haW5fIHJhbmdlIGluIHRoZSBzZWxlY3Rpb24gKHdoaWNoIGlzXG4gICAgdXN1YWxseSB0aGUgcmFuZ2UgdGhhdCB3YXMgYWRkZWQgbGFzdCkuXG4gICAgKi9cbiAgICBtYWluSW5kZXgpIHtcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMubWFpbkluZGV4ID0gbWFpbkluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgYSBzZWxlY3Rpb24gdGhyb3VnaCBhIGNoYW5nZS4gVXNlZCB0byBhZGp1c3QgdGhlIHNlbGVjdGlvblxuICAgIHBvc2l0aW9uIGZvciBjaGFuZ2VzLlxuICAgICovXG4gICAgbWFwKGNoYW5nZSwgYXNzb2MgPSAtMSkge1xuICAgICAgICBpZiAoY2hhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHRoaXMucmFuZ2VzLm1hcChyID0+IHIubWFwKGNoYW5nZSwgYXNzb2MpKSwgdGhpcy5tYWluSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgc2VsZWN0aW9uIHRvIGFub3RoZXIgc2VsZWN0aW9uLiBCeSBkZWZhdWx0LCByYW5nZXNcbiAgICBhcmUgY29tcGFyZWQgb25seSBieSBwb3NpdGlvbi4gV2hlbiBgaW5jbHVkZUFzc29jYCBpcyB0cnVlLFxuICAgIGN1cnNvciByYW5nZXMgbXVzdCBhbHNvIGhhdmUgdGhlIHNhbWVcbiAgICBbYGFzc29jYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZS5hc3NvYykgdmFsdWUuXG4gICAgKi9cbiAgICBlcShvdGhlciwgaW5jbHVkZUFzc29jID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VzLmxlbmd0aCAhPSBvdGhlci5yYW5nZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICB0aGlzLm1haW5JbmRleCAhPSBvdGhlci5tYWluSW5kZXgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIXRoaXMucmFuZ2VzW2ldLmVxKG90aGVyLnJhbmdlc1tpXSwgaW5jbHVkZUFzc29jKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHByaW1hcnkgc2VsZWN0aW9uIHJhbmdlLiBVc3VhbGx5LCB5b3Ugc2hvdWxkIG1ha2Ugc3VyZVxuICAgIHlvdXIgY29kZSBhcHBsaWVzIHRvIF9hbGxfIHJhbmdlcywgYnkgdXNpbmcgbWV0aG9kcyBsaWtlXG4gICAgW2BjaGFuZ2VCeVJhbmdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFuZ2VCeVJhbmdlKS5cbiAgICAqL1xuICAgIGdldCBtYWluKCkgeyByZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5tYWluSW5kZXhdOyB9XG4gICAgLyoqXG4gICAgTWFrZSBzdXJlIHRoZSBzZWxlY3Rpb24gb25seSBoYXMgb25lIHJhbmdlLiBSZXR1cm5zIGEgc2VsZWN0aW9uXG4gICAgaG9sZGluZyBvbmx5IHRoZSBtYWluIHJhbmdlIGZyb20gdGhpcyBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBhc1NpbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLmxlbmd0aCA9PSAxID8gdGhpcyA6IG5ldyBFZGl0b3JTZWxlY3Rpb24oW3RoaXMubWFpbl0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRlbmQgdGhpcyBzZWxlY3Rpb24gd2l0aCBhbiBleHRyYSByYW5nZS5cbiAgICAqL1xuICAgIGFkZFJhbmdlKHJhbmdlLCBtYWluID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbcmFuZ2VdLmNvbmNhdCh0aGlzLnJhbmdlcyksIG1haW4gPyAwIDogdGhpcy5tYWluSW5kZXggKyAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSBhIGdpdmVuIHJhbmdlIHdpdGggYW5vdGhlciByYW5nZSwgYW5kIHRoZW4gbm9ybWFsaXplIHRoZVxuICAgIHNlbGVjdGlvbiB0byBtZXJnZSBhbmQgc29ydCByYW5nZXMgaWYgbmVjZXNzYXJ5LlxuICAgICovXG4gICAgcmVwbGFjZVJhbmdlKHJhbmdlLCB3aGljaCA9IHRoaXMubWFpbkluZGV4KSB7XG4gICAgICAgIGxldCByYW5nZXMgPSB0aGlzLnJhbmdlcy5zbGljZSgpO1xuICAgICAgICByYW5nZXNbd2hpY2hdID0gcmFuZ2U7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgdGhpcy5tYWluSW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgc2VsZWN0aW9uIHRvIGFuIG9iamVjdCB0aGF0IGNhbiBiZSBzZXJpYWxpemVkIHRvXG4gICAgSlNPTi5cbiAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgcmFuZ2VzOiB0aGlzLnJhbmdlcy5tYXAociA9PiByLnRvSlNPTigpKSwgbWFpbjogdGhpcy5tYWluSW5kZXggfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2VsZWN0aW9uIGZyb20gYSBKU09OIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFqc29uIHx8ICFBcnJheS5pc0FycmF5KGpzb24ucmFuZ2VzKSB8fCB0eXBlb2YganNvbi5tYWluICE9IFwibnVtYmVyXCIgfHwganNvbi5tYWluID49IGpzb24ucmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBFZGl0b3JTZWxlY3Rpb25cIik7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKGpzb24ucmFuZ2VzLm1hcCgocikgPT4gU2VsZWN0aW9uUmFuZ2UuZnJvbUpTT04ocikpLCBqc29uLm1haW4pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZWxlY3Rpb24gaG9sZGluZyBhIHNpbmdsZSByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyBzaW5nbGUoYW5jaG9yLCBoZWFkID0gYW5jaG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKFtFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoYW5jaG9yLCBoZWFkKV0sIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBTb3J0IGFuZCBtZXJnZSB0aGUgZ2l2ZW4gc2V0IG9mIHJhbmdlcywgY3JlYXRpbmcgYSB2YWxpZFxuICAgIHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUocmFuZ2VzLCBtYWluSW5kZXggPSAwKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkEgc2VsZWN0aW9uIG5lZWRzIGF0IGxlYXN0IG9uZSByYW5nZVwiKTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbXB0eSA/IHJhbmdlLmZyb20gPD0gcG9zIDogcmFuZ2UuZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLm5vcm1hbGl6ZWQocmFuZ2VzLnNsaWNlKCksIG1haW5JbmRleCk7XG4gICAgICAgICAgICBwb3MgPSByYW5nZS50bztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVkaXRvclNlbGVjdGlvbihyYW5nZXMsIG1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGN1cnNvciBzZWxlY3Rpb24gcmFuZ2UgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBZb3UgY2FuXG4gICAgc2FmZWx5IGlnbm9yZSB0aGUgb3B0aW9uYWwgYXJndW1lbnRzIGluIG1vc3Qgc2l0dWF0aW9ucy5cbiAgICAqL1xuICAgIHN0YXRpYyBjdXJzb3IocG9zLCBhc3NvYyA9IDAsIGJpZGlMZXZlbCwgZ29hbENvbHVtbikge1xuICAgICAgICByZXR1cm4gU2VsZWN0aW9uUmFuZ2UuY3JlYXRlKHBvcywgcG9zLCAoYXNzb2MgPT0gMCA/IDAgOiBhc3NvYyA8IDAgPyA4IC8qIFJhbmdlRmxhZy5Bc3NvY0JlZm9yZSAqLyA6IDE2IC8qIFJhbmdlRmxhZy5Bc3NvY0FmdGVyICovKSB8XG4gICAgICAgICAgICAoYmlkaUxldmVsID09IG51bGwgPyA3IDogTWF0aC5taW4oNiwgYmlkaUxldmVsKSkgfFxuICAgICAgICAgICAgKChnb2FsQ29sdW1uICE9PSBudWxsICYmIGdvYWxDb2x1bW4gIT09IHZvaWQgMCA/IGdvYWxDb2x1bW4gOiAxNjc3NzIxNSAvKiBSYW5nZUZsYWcuTm9Hb2FsQ29sdW1uICovKSA8PCA2IC8qIFJhbmdlRmxhZy5Hb2FsQ29sdW1uT2Zmc2V0ICovKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNlbGVjdGlvbiByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyByYW5nZShhbmNob3IsIGhlYWQsIGdvYWxDb2x1bW4sIGJpZGlMZXZlbCkge1xuICAgICAgICBsZXQgZmxhZ3MgPSAoKGdvYWxDb2x1bW4gIT09IG51bGwgJiYgZ29hbENvbHVtbiAhPT0gdm9pZCAwID8gZ29hbENvbHVtbiA6IDE2Nzc3MjE1IC8qIFJhbmdlRmxhZy5Ob0dvYWxDb2x1bW4gKi8pIDw8IDYgLyogUmFuZ2VGbGFnLkdvYWxDb2x1bW5PZmZzZXQgKi8pIHxcbiAgICAgICAgICAgIChiaWRpTGV2ZWwgPT0gbnVsbCA/IDcgOiBNYXRoLm1pbig2LCBiaWRpTGV2ZWwpKTtcbiAgICAgICAgcmV0dXJuIGhlYWQgPCBhbmNob3IgPyBTZWxlY3Rpb25SYW5nZS5jcmVhdGUoaGVhZCwgYW5jaG9yLCAzMiAvKiBSYW5nZUZsYWcuSW52ZXJ0ZWQgKi8gfCAxNiAvKiBSYW5nZUZsYWcuQXNzb2NBZnRlciAqLyB8IGZsYWdzKVxuICAgICAgICAgICAgOiBTZWxlY3Rpb25SYW5nZS5jcmVhdGUoYW5jaG9yLCBoZWFkLCAoaGVhZCA+IGFuY2hvciA/IDggLyogUmFuZ2VGbGFnLkFzc29jQmVmb3JlICovIDogMCkgfCBmbGFncyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIG5vcm1hbGl6ZWQocmFuZ2VzLCBtYWluSW5kZXggPSAwKSB7XG4gICAgICAgIGxldCBtYWluID0gcmFuZ2VzW21haW5JbmRleF07XG4gICAgICAgIHJhbmdlcy5zb3J0KChhLCBiKSA9PiBhLmZyb20gLSBiLmZyb20pO1xuICAgICAgICBtYWluSW5kZXggPSByYW5nZXMuaW5kZXhPZihtYWluKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXSwgcHJldiA9IHJhbmdlc1tpIC0gMV07XG4gICAgICAgICAgICBpZiAocmFuZ2UuZW1wdHkgPyByYW5nZS5mcm9tIDw9IHByZXYudG8gOiByYW5nZS5mcm9tIDwgcHJldi50bykge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcHJldi5mcm9tLCB0byA9IE1hdGgubWF4KHJhbmdlLnRvLCBwcmV2LnRvKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA8PSBtYWluSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIG1haW5JbmRleC0tO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5zcGxpY2UoLS1pLCAyLCByYW5nZS5hbmNob3IgPiByYW5nZS5oZWFkID8gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRvLCBmcm9tKSA6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKHJhbmdlcywgbWFpbkluZGV4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1NlbGVjdGlvbihzZWxlY3Rpb24sIGRvY0xlbmd0aCkge1xuICAgIGZvciAobGV0IHJhbmdlIG9mIHNlbGVjdGlvbi5yYW5nZXMpXG4gICAgICAgIGlmIChyYW5nZS50byA+IGRvY0xlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiU2VsZWN0aW9uIHBvaW50cyBvdXRzaWRlIG9mIGRvY3VtZW50XCIpO1xufVxuXG5sZXQgbmV4dElEID0gMDtcbi8qKlxuQSBmYWNldCBpcyBhIGxhYmVsZWQgdmFsdWUgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggYW4gZWRpdG9yXG5zdGF0ZS4gSXQgdGFrZXMgaW5wdXRzIGZyb20gYW55IG51bWJlciBvZiBleHRlbnNpb25zLCBhbmQgY29tYmluZXNcbnRob3NlIGludG8gYSBzaW5nbGUgb3V0cHV0IHZhbHVlLlxuXG5FeGFtcGxlcyBvZiB1c2VzIG9mIGZhY2V0cyBhcmUgdGhlIFt0YWJcbnNpemVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedGFiU2l6ZSksIFtlZGl0b3JcbmF0dHJpYnV0ZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmVkaXRvckF0dHJpYnV0ZXMpLCBhbmQgW3VwZGF0ZVxubGlzdGVuZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld151cGRhdGVMaXN0ZW5lcikuXG5cbk5vdGUgdGhhdCBgRmFjZXRgIGluc3RhbmNlcyBjYW4gYmUgdXNlZCBhbnl3aGVyZSB3aGVyZVxuW2BGYWNldFJlYWRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRmFjZXRSZWFkZXIpIGlzIGV4cGVjdGVkLlxuKi9cbmNsYXNzIEZhY2V0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbWJpbmUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZUlucHV0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmUsIGlzU3RhdGljLCBlbmFibGVzKSB7XG4gICAgICAgIHRoaXMuY29tYmluZSA9IGNvbWJpbmU7XG4gICAgICAgIHRoaXMuY29tcGFyZUlucHV0ID0gY29tcGFyZUlucHV0O1xuICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuICAgICAgICB0aGlzLmlzU3RhdGljID0gaXNTdGF0aWM7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pZCA9IG5leHRJRCsrO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSBjb21iaW5lKFtdKTtcbiAgICAgICAgdGhpcy5leHRlbnNpb25zID0gdHlwZW9mIGVuYWJsZXMgPT0gXCJmdW5jdGlvblwiID8gZW5hYmxlcyh0aGlzKSA6IGVuYWJsZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYSBmYWNldCByZWFkZXIgZm9yIHRoaXMgZmFjZXQsIHdoaWNoIGNhbiBiZSB1c2VkIHRvXG4gICAgW3JlYWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuZmFjZXQpIGl0IGJ1dCBub3QgdG8gZGVmaW5lIHZhbHVlcyBmb3IgaXQuXG4gICAgKi9cbiAgICBnZXQgcmVhZGVyKCkgeyByZXR1cm4gdGhpczsgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyBmYWNldC5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldChjb25maWcuY29tYmluZSB8fCAoKGEpID0+IGEpLCBjb25maWcuY29tcGFyZUlucHV0IHx8ICgoYSwgYikgPT4gYSA9PT0gYiksIGNvbmZpZy5jb21wYXJlIHx8ICghY29uZmlnLmNvbWJpbmUgPyBzYW1lQXJyYXkgOiAoYSwgYikgPT4gYSA9PT0gYiksICEhY29uZmlnLnN0YXRpYywgY29uZmlnLmVuYWJsZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGFkZHMgdGhlIGdpdmVuIHZhbHVlIHRvIHRoaXMgZmFjZXQuXG4gICAgKi9cbiAgICBvZih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZhY2V0UHJvdmlkZXIoW10sIHRoaXMsIDAgLyogUHJvdmlkZXIuU3RhdGljICovLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBjb21wdXRlcyBhIHZhbHVlIGZvciB0aGUgZmFjZXQgZnJvbSBhXG4gICAgc3RhdGUuIFlvdSBtdXN0IHRha2UgY2FyZSB0byBkZWNsYXJlIHRoZSBwYXJ0cyBvZiB0aGUgc3RhdGUgdGhhdFxuICAgIHRoaXMgdmFsdWUgZGVwZW5kcyBvbiwgc2luY2UgeW91ciBmdW5jdGlvbiBpcyBvbmx5IGNhbGxlZCBhZ2FpblxuICAgIGZvciBhIG5ldyBzdGF0ZSB3aGVuIG9uZSBvZiB0aG9zZSBwYXJ0cyBjaGFuZ2VkLlxuICAgIFxuICAgIEluIGNhc2VzIHdoZXJlIHlvdXIgdmFsdWUgZGVwZW5kcyBvbmx5IG9uIGEgc2luZ2xlIGZpZWxkLCB5b3UnbGxcbiAgICB3YW50IHRvIHVzZSB0aGUgW2Bmcm9tYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5GYWNldC5mcm9tKSBtZXRob2QgaW5zdGVhZC5cbiAgICAqL1xuICAgIGNvbXB1dGUoZGVwcywgZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RhdGljKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29tcHV0ZSBhIHN0YXRpYyBmYWNldFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldFByb3ZpZGVyKGRlcHMsIHRoaXMsIDEgLyogUHJvdmlkZXIuU2luZ2xlICovLCBnZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgY29tcHV0ZXMgemVybyBvciBtb3JlIHZhbHVlcyBmb3IgdGhpc1xuICAgIGZhY2V0IGZyb20gYSBzdGF0ZS5cbiAgICAqL1xuICAgIGNvbXB1dGVOKGRlcHMsIGdldCkge1xuICAgICAgICBpZiAodGhpcy5pc1N0YXRpYylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGNvbXB1dGUgYSBzdGF0aWMgZmFjZXRcIik7XG4gICAgICAgIHJldHVybiBuZXcgRmFjZXRQcm92aWRlcihkZXBzLCB0aGlzLCAyIC8qIFByb3ZpZGVyLk11bHRpICovLCBnZXQpO1xuICAgIH1cbiAgICBmcm9tKGZpZWxkLCBnZXQpIHtcbiAgICAgICAgaWYgKCFnZXQpXG4gICAgICAgICAgICBnZXQgPSB4ID0+IHg7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGUoW2ZpZWxkXSwgc3RhdGUgPT4gZ2V0KHN0YXRlLmZpZWxkKGZpZWxkKSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVBcnJheShhLCBiKSB7XG4gICAgcmV0dXJuIGEgPT0gYiB8fCBhLmxlbmd0aCA9PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KChlLCBpKSA9PiBlID09PSBiW2ldKTtcbn1cbmNsYXNzIEZhY2V0UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGRlcGVuZGVuY2llcywgZmFjZXQsIHR5cGUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICB0aGlzLmZhY2V0ID0gZmFjZXQ7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRJRCsrO1xuICAgIH1cbiAgICBkeW5hbWljU2xvdChhZGRyZXNzZXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgZ2V0dGVyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgbGV0IGNvbXBhcmUgPSB0aGlzLmZhY2V0LmNvbXBhcmVJbnB1dDtcbiAgICAgICAgbGV0IGlkID0gdGhpcy5pZCwgaWR4ID0gYWRkcmVzc2VzW2lkXSA+PiAxLCBtdWx0aSA9IHRoaXMudHlwZSA9PSAyIC8qIFByb3ZpZGVyLk11bHRpICovO1xuICAgICAgICBsZXQgZGVwRG9jID0gZmFsc2UsIGRlcFNlbCA9IGZhbHNlLCBkZXBBZGRycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkZXAgb2YgdGhpcy5kZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgICAgIGlmIChkZXAgPT0gXCJkb2NcIilcbiAgICAgICAgICAgICAgICBkZXBEb2MgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoZGVwID09IFwic2VsZWN0aW9uXCIpXG4gICAgICAgICAgICAgICAgZGVwU2VsID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCgoKF9hID0gYWRkcmVzc2VzW2RlcC5pZF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEpICYgMSkgPT0gMClcbiAgICAgICAgICAgICAgICBkZXBBZGRycy5wdXNoKGFkZHJlc3Nlc1tkZXAuaWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBnZXR0ZXIoc3RhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGUoc3RhdGUsIHRyKSB7XG4gICAgICAgICAgICAgICAgaWYgKChkZXBEb2MgJiYgdHIuZG9jQ2hhbmdlZCkgfHwgKGRlcFNlbCAmJiAodHIuZG9jQ2hhbmdlZCB8fCB0ci5zZWxlY3Rpb24pKSB8fCBlbnN1cmVBbGwoc3RhdGUsIGRlcEFkZHJzKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsID0gZ2V0dGVyKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpID8gIWNvbXBhcmVBcnJheShuZXdWYWwsIHN0YXRlLnZhbHVlc1tpZHhdLCBjb21wYXJlKSA6ICFjb21wYXJlKG5ld1ZhbCwgc3RhdGUudmFsdWVzW2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG5ld1ZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWNvbmZpZ3VyZTogKHN0YXRlLCBvbGRTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXdWYWwsIG9sZEFkZHIgPSBvbGRTdGF0ZS5jb25maWcuYWRkcmVzc1tpZF07XG4gICAgICAgICAgICAgICAgaWYgKG9sZEFkZHIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2xkVmFsID0gZ2V0QWRkcihvbGRTdGF0ZSwgb2xkQWRkcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcGVuZGVuY2llcy5ldmVyeShkZXAgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlcCBpbnN0YW5jZW9mIEZhY2V0ID8gb2xkU3RhdGUuZmFjZXQoZGVwKSA9PT0gc3RhdGUuZmFjZXQoZGVwKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwIGluc3RhbmNlb2YgU3RhdGVGaWVsZCA/IG9sZFN0YXRlLmZpZWxkKGRlcCwgZmFsc2UpID09IHN0YXRlLmZpZWxkKGRlcCwgZmFsc2UpIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkgfHwgKG11bHRpID8gY29tcGFyZUFycmF5KG5ld1ZhbCA9IGdldHRlcihzdGF0ZSksIG9sZFZhbCwgY29tcGFyZSkgOiBjb21wYXJlKG5ld1ZhbCA9IGdldHRlcihzdGF0ZSksIG9sZFZhbCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWwgPSBnZXR0ZXIoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG5ld1ZhbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGFyZUFycmF5KGEsIGIsIGNvbXBhcmUpIHtcbiAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghY29tcGFyZShhW2ldLCBiW2ldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGVuc3VyZUFsbChzdGF0ZSwgYWRkcnMpIHtcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGFkZHIgb2YgYWRkcnMpXG4gICAgICAgIGlmIChlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKSAmIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovKVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgcmV0dXJuIGNoYW5nZWQ7XG59XG5mdW5jdGlvbiBkeW5hbWljRmFjZXRTbG90KGFkZHJlc3NlcywgZmFjZXQsIHByb3ZpZGVycykge1xuICAgIGxldCBwcm92aWRlckFkZHJzID0gcHJvdmlkZXJzLm1hcChwID0+IGFkZHJlc3Nlc1twLmlkXSk7XG4gICAgbGV0IHByb3ZpZGVyVHlwZXMgPSBwcm92aWRlcnMubWFwKHAgPT4gcC50eXBlKTtcbiAgICBsZXQgZHluYW1pYyA9IHByb3ZpZGVyQWRkcnMuZmlsdGVyKHAgPT4gIShwICYgMSkpO1xuICAgIGxldCBpZHggPSBhZGRyZXNzZXNbZmFjZXQuaWRdID4+IDE7XG4gICAgZnVuY3Rpb24gZ2V0KHN0YXRlKSB7XG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm92aWRlckFkZHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBnZXRBZGRyKHN0YXRlLCBwcm92aWRlckFkZHJzW2ldKTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlclR5cGVzW2ldID09IDIgLyogUHJvdmlkZXIuTXVsdGkgKi8pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdmFsIG9mIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWwpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFjZXQuY29tYmluZSh2YWx1ZXMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGFkZHIgb2YgcHJvdmlkZXJBZGRycylcbiAgICAgICAgICAgICAgICBlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKTtcbiAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlKHN0YXRlLCB0cikge1xuICAgICAgICAgICAgaWYgKCFlbnN1cmVBbGwoc3RhdGUsIGR5bmFtaWMpKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChmYWNldC5jb21wYXJlKHZhbHVlLCBzdGF0ZS52YWx1ZXNbaWR4XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICB9LFxuICAgICAgICByZWNvbmZpZ3VyZShzdGF0ZSwgb2xkU3RhdGUpIHtcbiAgICAgICAgICAgIGxldCBkZXBDaGFuZ2VkID0gZW5zdXJlQWxsKHN0YXRlLCBwcm92aWRlckFkZHJzKTtcbiAgICAgICAgICAgIGxldCBvbGRQcm92aWRlcnMgPSBvbGRTdGF0ZS5jb25maWcuZmFjZXRzW2ZhY2V0LmlkXSwgb2xkVmFsdWUgPSBvbGRTdGF0ZS5mYWNldChmYWNldCk7XG4gICAgICAgICAgICBpZiAob2xkUHJvdmlkZXJzICYmICFkZXBDaGFuZ2VkICYmIHNhbWVBcnJheShwcm92aWRlcnMsIG9sZFByb3ZpZGVycykpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0KHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChmYWNldC5jb21wYXJlKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgfVxuICAgIH07XG59XG5jb25zdCBpbml0RmllbGQgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgc3RhdGljOiB0cnVlIH0pO1xuLyoqXG5GaWVsZHMgY2FuIHN0b3JlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gaW4gYW4gZWRpdG9yIHN0YXRlLCBhbmRcbmtlZXAgaXQgaW4gc3luYyB3aXRoIHRoZSByZXN0IG9mIHRoZSBzdGF0ZS5cbiovXG5jbGFzcyBTdGF0ZUZpZWxkIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlkLCBjcmVhdGVGLCB1cGRhdGVGLCBjb21wYXJlRiwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzcGVjKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5jcmVhdGVGID0gY3JlYXRlRjtcbiAgICAgICAgdGhpcy51cGRhdGVGID0gdXBkYXRlRjtcbiAgICAgICAgdGhpcy5jb21wYXJlRiA9IGNvbXBhcmVGO1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucHJvdmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIHN0YXRlIGZpZWxkLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjb25maWcpIHtcbiAgICAgICAgbGV0IGZpZWxkID0gbmV3IFN0YXRlRmllbGQobmV4dElEKyssIGNvbmZpZy5jcmVhdGUsIGNvbmZpZy51cGRhdGUsIGNvbmZpZy5jb21wYXJlIHx8ICgoYSwgYikgPT4gYSA9PT0gYiksIGNvbmZpZyk7XG4gICAgICAgIGlmIChjb25maWcucHJvdmlkZSlcbiAgICAgICAgICAgIGZpZWxkLnByb3ZpZGVzID0gY29uZmlnLnByb3ZpZGUoZmllbGQpO1xuICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgfVxuICAgIGNyZWF0ZShzdGF0ZSkge1xuICAgICAgICBsZXQgaW5pdCA9IHN0YXRlLmZhY2V0KGluaXRGaWVsZCkuZmluZChpID0+IGkuZmllbGQgPT0gdGhpcyk7XG4gICAgICAgIHJldHVybiAoKGluaXQgPT09IG51bGwgfHwgaW5pdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5pdC5jcmVhdGUpIHx8IHRoaXMuY3JlYXRlRikoc3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNsb3QoYWRkcmVzc2VzKSB7XG4gICAgICAgIGxldCBpZHggPSBhZGRyZXNzZXNbdGhpcy5pZF0gPj4gMTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZTogKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB0aGlzLmNyZWF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogKHN0YXRlLCB0cikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBvbGRWYWwgPSBzdGF0ZS52YWx1ZXNbaWR4XTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnVwZGF0ZUYob2xkVmFsLCB0cik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZUYob2xkVmFsLCB2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlY29uZmlndXJlOiAoc3RhdGUsIG9sZFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGluaXQgPSBzdGF0ZS5mYWNldChpbml0RmllbGQpLCBvbGRJbml0ID0gb2xkU3RhdGUuZmFjZXQoaW5pdEZpZWxkKSwgcmVJbml0O1xuICAgICAgICAgICAgICAgIGlmICgocmVJbml0ID0gaW5pdC5maW5kKGkgPT4gaS5maWVsZCA9PSB0aGlzKSkgJiYgcmVJbml0ICE9IG9sZEluaXQuZmluZChpID0+IGkuZmllbGQgPT0gdGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSByZUluaXQuY3JlYXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob2xkU3RhdGUuY29uZmlnLmFkZHJlc3NbdGhpcy5pZF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IG9sZFN0YXRlLmZpZWxkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB0aGlzLmNyZWF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgdGhpcyBmaWVsZCBhbmQgb3ZlcnJpZGVzIHRoZVxuICAgIHdheSBpdCBpcyBpbml0aWFsaXplZC4gQ2FuIGJlIHVzZWZ1bCB3aGVuIHlvdSBuZWVkIHRvIHByb3ZpZGUgYVxuICAgIG5vbi1kZWZhdWx0IHN0YXJ0aW5nIHZhbHVlIGZvciB0aGUgZmllbGQuXG4gICAgKi9cbiAgICBpbml0KGNyZWF0ZSkge1xuICAgICAgICByZXR1cm4gW3RoaXMsIGluaXRGaWVsZC5vZih7IGZpZWxkOiB0aGlzLCBjcmVhdGUgfSldO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGF0ZSBmaWVsZCBpbnN0YW5jZXMgY2FuIGJlIHVzZWQgYXNcbiAgICBbYEV4dGVuc2lvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRXh0ZW5zaW9uKSB2YWx1ZXMgdG8gZW5hYmxlIHRoZSBmaWVsZCBpbiBhXG4gICAgZ2l2ZW4gc3RhdGUuXG4gICAgKi9cbiAgICBnZXQgZXh0ZW5zaW9uKCkgeyByZXR1cm4gdGhpczsgfVxufVxuY29uc3QgUHJlY18gPSB7IGxvd2VzdDogNCwgbG93OiAzLCBkZWZhdWx0OiAyLCBoaWdoOiAxLCBoaWdoZXN0OiAwIH07XG5mdW5jdGlvbiBwcmVjKHZhbHVlKSB7XG4gICAgcmV0dXJuIChleHQpID0+IG5ldyBQcmVjRXh0ZW5zaW9uKGV4dCwgdmFsdWUpO1xufVxuLyoqXG5CeSBkZWZhdWx0IGV4dGVuc2lvbnMgYXJlIHJlZ2lzdGVyZWQgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIGZvdW5kXG5pbiB0aGUgZmxhdHRlbmVkIGZvcm0gb2YgbmVzdGVkIGFycmF5IHRoYXQgd2FzIHByb3ZpZGVkLlxuSW5kaXZpZHVhbCBleHRlbnNpb24gdmFsdWVzIGNhbiBiZSBhc3NpZ25lZCBhIHByZWNlZGVuY2UgdG9cbm92ZXJyaWRlIHRoaXMuIEV4dGVuc2lvbnMgdGhhdCBkbyBub3QgaGF2ZSBhIHByZWNlZGVuY2Ugc2V0IGdldFxudGhlIHByZWNlZGVuY2Ugb2YgdGhlIG5lYXJlc3QgcGFyZW50IHdpdGggYSBwcmVjZWRlbmNlLCBvclxuW2BkZWZhdWx0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5QcmVjLmRlZmF1bHQpIGlmIHRoZXJlIGlzIG5vIHN1Y2ggcGFyZW50LiBUaGVcbmZpbmFsIG9yZGVyaW5nIG9mIGV4dGVuc2lvbnMgaXMgZGV0ZXJtaW5lZCBieSBmaXJzdCBzb3J0aW5nIGJ5XG5wcmVjZWRlbmNlIGFuZCB0aGVuIGJ5IG9yZGVyIHdpdGhpbiBlYWNoIHByZWNlZGVuY2UuXG4qL1xuY29uc3QgUHJlYyA9IHtcbiAgICAvKipcbiAgICBUaGUgaGlnaGVzdCBwcmVjZWRlbmNlIGxldmVsLCBmb3IgZXh0ZW5zaW9ucyB0aGF0IHNob3VsZCBlbmQgdXBcbiAgICBuZWFyIHRoZSBzdGFydCBvZiB0aGUgcHJlY2VkZW5jZSBvcmRlcmluZy5cbiAgICAqL1xuICAgIGhpZ2hlc3Q6IC8qQF9fUFVSRV9fKi9wcmVjKFByZWNfLmhpZ2hlc3QpLFxuICAgIC8qKlxuICAgIEEgaGlnaGVyLXRoYW4tZGVmYXVsdCBwcmVjZWRlbmNlLCBmb3IgZXh0ZW5zaW9ucyB0aGF0IHNob3VsZFxuICAgIGNvbWUgYmVmb3JlIHRob3NlIHdpdGggZGVmYXVsdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgaGlnaDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uaGlnaCksXG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgcHJlY2VkZW5jZSwgd2hpY2ggaXMgYWxzbyB1c2VkIGZvciBleHRlbnNpb25zXG4gICAgd2l0aG91dCBhbiBleHBsaWNpdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgZGVmYXVsdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uZGVmYXVsdCksXG4gICAgLyoqXG4gICAgQSBsb3dlci10aGFuLWRlZmF1bHQgcHJlY2VkZW5jZS5cbiAgICAqL1xuICAgIGxvdzogLypAX19QVVJFX18qL3ByZWMoUHJlY18ubG93KSxcbiAgICAvKipcbiAgICBUaGUgbG93ZXN0IHByZWNlZGVuY2UgbGV2ZWwuIE1lYW50IGZvciB0aGluZ3MgdGhhdCBzaG91bGQgZW5kIHVwXG4gICAgbmVhciB0aGUgZW5kIG9mIHRoZSBleHRlbnNpb24gb3JkZXIuXG4gICAgKi9cbiAgICBsb3dlc3Q6IC8qQF9fUFVSRV9fKi9wcmVjKFByZWNfLmxvd2VzdClcbn07XG5jbGFzcyBQcmVjRXh0ZW5zaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihpbm5lciwgcHJlYykge1xuICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICAgIHRoaXMucHJlYyA9IHByZWM7XG4gICAgfVxufVxuLyoqXG5FeHRlbnNpb24gY29tcGFydG1lbnRzIGNhbiBiZSB1c2VkIHRvIG1ha2UgYSBjb25maWd1cmF0aW9uXG5keW5hbWljLiBCeSBbd3JhcHBpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ29tcGFydG1lbnQub2YpIHBhcnQgb2YgeW91clxuY29uZmlndXJhdGlvbiBpbiBhIGNvbXBhcnRtZW50LCB5b3UgY2FuIGxhdGVyXG5bcmVwbGFjZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSkgdGhhdCBwYXJ0IHRocm91Z2ggYVxudHJhbnNhY3Rpb24uXG4qL1xuY2xhc3MgQ29tcGFydG1lbnQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNvbXBhcnRtZW50IHRvIGFkZCB0byB5b3VyIFtzdGF0ZVxuICAgIGNvbmZpZ3VyYXRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVDb25maWcuZXh0ZW5zaW9ucykuXG4gICAgKi9cbiAgICBvZihleHQpIHsgcmV0dXJuIG5ldyBDb21wYXJ0bWVudEluc3RhbmNlKHRoaXMsIGV4dCk7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gW2VmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZWZmZWN0cykgdGhhdFxuICAgIHJlY29uZmlndXJlcyB0aGlzIGNvbXBhcnRtZW50LlxuICAgICovXG4gICAgcmVjb25maWd1cmUoY29udGVudCkge1xuICAgICAgICByZXR1cm4gQ29tcGFydG1lbnQucmVjb25maWd1cmUub2YoeyBjb21wYXJ0bWVudDogdGhpcywgZXh0ZW5zaW9uOiBjb250ZW50IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgY29tcGFydG1lbnQgaW4gdGhlIHN0YXRlLCBvclxuICAgIGB1bmRlZmluZWRgIGlmIGl0IGlzbid0IHByZXNlbnQuXG4gICAgKi9cbiAgICBnZXQoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmNvbmZpZy5jb21wYXJ0bWVudHMuZ2V0KHRoaXMpO1xuICAgIH1cbn1cbmNsYXNzIENvbXBhcnRtZW50SW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKGNvbXBhcnRtZW50LCBpbm5lcikge1xuICAgICAgICB0aGlzLmNvbXBhcnRtZW50ID0gY29tcGFydG1lbnQ7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgICB9XG59XG5jbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlLCBjb21wYXJ0bWVudHMsIGR5bmFtaWNTbG90cywgYWRkcmVzcywgc3RhdGljVmFsdWVzLCBmYWNldHMpIHtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5jb21wYXJ0bWVudHMgPSBjb21wYXJ0bWVudHM7XG4gICAgICAgIHRoaXMuZHluYW1pY1Nsb3RzID0gZHluYW1pY1Nsb3RzO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLnN0YXRpY1ZhbHVlcyA9IHN0YXRpY1ZhbHVlcztcbiAgICAgICAgdGhpcy5mYWNldHMgPSBmYWNldHM7XG4gICAgICAgIHRoaXMuc3RhdHVzVGVtcGxhdGUgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMuc3RhdHVzVGVtcGxhdGUubGVuZ3RoIDwgZHluYW1pY1Nsb3RzLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzVGVtcGxhdGUucHVzaCgwIC8qIFNsb3RTdGF0dXMuVW5yZXNvbHZlZCAqLyk7XG4gICAgfVxuICAgIHN0YXRpY0ZhY2V0KGZhY2V0KSB7XG4gICAgICAgIGxldCBhZGRyID0gdGhpcy5hZGRyZXNzW2ZhY2V0LmlkXTtcbiAgICAgICAgcmV0dXJuIGFkZHIgPT0gbnVsbCA/IGZhY2V0LmRlZmF1bHQgOiB0aGlzLnN0YXRpY1ZhbHVlc1thZGRyID4+IDFdO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZShiYXNlLCBjb21wYXJ0bWVudHMsIG9sZFN0YXRlKSB7XG4gICAgICAgIGxldCBmaWVsZHMgPSBbXTtcbiAgICAgICAgbGV0IGZhY2V0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBuZXdDb21wYXJ0bWVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAobGV0IGV4dCBvZiBmbGF0dGVuKGJhc2UsIGNvbXBhcnRtZW50cywgbmV3Q29tcGFydG1lbnRzKSkge1xuICAgICAgICAgICAgaWYgKGV4dCBpbnN0YW5jZW9mIFN0YXRlRmllbGQpXG4gICAgICAgICAgICAgICAgZmllbGRzLnB1c2goZXh0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAoZmFjZXRzW2V4dC5mYWNldC5pZF0gfHwgKGZhY2V0c1tleHQuZmFjZXQuaWRdID0gW10pKS5wdXNoKGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFkZHJlc3MgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgc3RhdGljVmFsdWVzID0gW107XG4gICAgICAgIGxldCBkeW5hbWljU2xvdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICAgICAgICBhZGRyZXNzW2ZpZWxkLmlkXSA9IGR5bmFtaWNTbG90cy5sZW5ndGggPDwgMTtcbiAgICAgICAgICAgIGR5bmFtaWNTbG90cy5wdXNoKGEgPT4gZmllbGQuc2xvdChhKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9sZEZhY2V0cyA9IG9sZFN0YXRlID09PSBudWxsIHx8IG9sZFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbGRTdGF0ZS5jb25maWcuZmFjZXRzO1xuICAgICAgICBmb3IgKGxldCBpZCBpbiBmYWNldHMpIHtcbiAgICAgICAgICAgIGxldCBwcm92aWRlcnMgPSBmYWNldHNbaWRdLCBmYWNldCA9IHByb3ZpZGVyc1swXS5mYWNldDtcbiAgICAgICAgICAgIGxldCBvbGRQcm92aWRlcnMgPSBvbGRGYWNldHMgJiYgb2xkRmFjZXRzW2lkXSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlcnMuZXZlcnkocCA9PiBwLnR5cGUgPT0gMCAvKiBQcm92aWRlci5TdGF0aWMgKi8pKSB7XG4gICAgICAgICAgICAgICAgYWRkcmVzc1tmYWNldC5pZF0gPSAoc3RhdGljVmFsdWVzLmxlbmd0aCA8PCAxKSB8IDE7XG4gICAgICAgICAgICAgICAgaWYgKHNhbWVBcnJheShvbGRQcm92aWRlcnMsIHByb3ZpZGVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gob2xkU3RhdGUuZmFjZXQoZmFjZXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGZhY2V0LmNvbWJpbmUocHJvdmlkZXJzLm1hcChwID0+IHAudmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gob2xkU3RhdGUgJiYgZmFjZXQuY29tcGFyZSh2YWx1ZSwgb2xkU3RhdGUuZmFjZXQoZmFjZXQpKSA/IG9sZFN0YXRlLmZhY2V0KGZhY2V0KSA6IHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwIG9mIHByb3ZpZGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09IDAgLyogUHJvdmlkZXIuU3RhdGljICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzW3AuaWRdID0gKHN0YXRpY1ZhbHVlcy5sZW5ndGggPDwgMSkgfCAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVzLnB1c2gocC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzW3AuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY1Nsb3RzLnB1c2goYSA9PiBwLmR5bmFtaWNTbG90KGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRyZXNzW2ZhY2V0LmlkXSA9IGR5bmFtaWNTbG90cy5sZW5ndGggPDwgMTtcbiAgICAgICAgICAgICAgICBkeW5hbWljU2xvdHMucHVzaChhID0+IGR5bmFtaWNGYWNldFNsb3QoYSwgZmFjZXQsIHByb3ZpZGVycykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY1Nsb3RzLm1hcChmID0+IGYoYWRkcmVzcykpO1xuICAgICAgICByZXR1cm4gbmV3IENvbmZpZ3VyYXRpb24oYmFzZSwgbmV3Q29tcGFydG1lbnRzLCBkeW5hbWljLCBhZGRyZXNzLCBzdGF0aWNWYWx1ZXMsIGZhY2V0cyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmxhdHRlbihleHRlbnNpb24sIGNvbXBhcnRtZW50cywgbmV3Q29tcGFydG1lbnRzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtbXSwgW10sIFtdLCBbXSwgW11dO1xuICAgIGxldCBzZWVuID0gbmV3IE1hcCgpO1xuICAgIGZ1bmN0aW9uIGlubmVyKGV4dCwgcHJlYykge1xuICAgICAgICBsZXQga25vd24gPSBzZWVuLmdldChleHQpO1xuICAgICAgICBpZiAoa25vd24gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGtub3duIDw9IHByZWMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gcmVzdWx0W2tub3duXS5pbmRleE9mKGV4dCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgPiAtMSlcbiAgICAgICAgICAgICAgICByZXN1bHRba25vd25dLnNwbGljZShmb3VuZCwgMSk7XG4gICAgICAgICAgICBpZiAoZXh0IGluc3RhbmNlb2YgQ29tcGFydG1lbnRJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICBuZXdDb21wYXJ0bWVudHMuZGVsZXRlKGV4dC5jb21wYXJ0bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc2Vlbi5zZXQoZXh0LCBwcmVjKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXh0KSkge1xuICAgICAgICAgICAgZm9yIChsZXQgZSBvZiBleHQpXG4gICAgICAgICAgICAgICAgaW5uZXIoZSwgcHJlYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0IGluc3RhbmNlb2YgQ29tcGFydG1lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgaWYgKG5ld0NvbXBhcnRtZW50cy5oYXMoZXh0LmNvbXBhcnRtZW50KSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgRHVwbGljYXRlIHVzZSBvZiBjb21wYXJ0bWVudCBpbiBleHRlbnNpb25zYCk7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGNvbXBhcnRtZW50cy5nZXQoZXh0LmNvbXBhcnRtZW50KSB8fCBleHQuaW5uZXI7XG4gICAgICAgICAgICBuZXdDb21wYXJ0bWVudHMuc2V0KGV4dC5jb21wYXJ0bWVudCwgY29udGVudCk7XG4gICAgICAgICAgICBpbm5lcihjb250ZW50LCBwcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBQcmVjRXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICBpbm5lcihleHQuaW5uZXIsIGV4dC5wcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBTdGF0ZUZpZWxkKSB7XG4gICAgICAgICAgICByZXN1bHRbcHJlY10ucHVzaChleHQpO1xuICAgICAgICAgICAgaWYgKGV4dC5wcm92aWRlcylcbiAgICAgICAgICAgICAgICBpbm5lcihleHQucHJvdmlkZXMsIHByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIEZhY2V0UHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdFtwcmVjXS5wdXNoKGV4dCk7XG4gICAgICAgICAgICBpZiAoZXh0LmZhY2V0LmV4dGVuc2lvbnMpXG4gICAgICAgICAgICAgICAgaW5uZXIoZXh0LmZhY2V0LmV4dGVuc2lvbnMsIFByZWNfLmRlZmF1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBleHQuZXh0ZW5zaW9uO1xuICAgICAgICAgICAgaWYgKCFjb250ZW50KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGV4dGVuc2lvbiB2YWx1ZSBpbiBleHRlbnNpb24gc2V0ICgke2V4dH0pLiBUaGlzIHNvbWV0aW1lcyBoYXBwZW5zIGJlY2F1c2UgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIEBjb2RlbWlycm9yL3N0YXRlIGFyZSBsb2FkZWQsIGJyZWFraW5nIGluc3RhbmNlb2YgY2hlY2tzLmApO1xuICAgICAgICAgICAgaW5uZXIoY29udGVudCwgcHJlYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5uZXIoZXh0ZW5zaW9uLCBQcmVjXy5kZWZhdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0LnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpO1xufVxuZnVuY3Rpb24gZW5zdXJlQWRkcihzdGF0ZSwgYWRkcikge1xuICAgIGlmIChhZGRyICYgMSlcbiAgICAgICAgcmV0dXJuIDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLztcbiAgICBsZXQgaWR4ID0gYWRkciA+PiAxO1xuICAgIGxldCBzdGF0dXMgPSBzdGF0ZS5zdGF0dXNbaWR4XTtcbiAgICBpZiAoc3RhdHVzID09IDQgLyogU2xvdFN0YXR1cy5Db21wdXRpbmcgKi8pXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN5Y2xpYyBkZXBlbmRlbmN5IGJldHdlZW4gZmllbGRzIGFuZC9vciBmYWNldHNcIik7XG4gICAgaWYgKHN0YXR1cyAmIDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLylcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICBzdGF0ZS5zdGF0dXNbaWR4XSA9IDQgLyogU2xvdFN0YXR1cy5Db21wdXRpbmcgKi87XG4gICAgbGV0IGNoYW5nZWQgPSBzdGF0ZS5jb21wdXRlU2xvdChzdGF0ZSwgc3RhdGUuY29uZmlnLmR5bmFtaWNTbG90c1tpZHhdKTtcbiAgICByZXR1cm4gc3RhdGUuc3RhdHVzW2lkeF0gPSAyIC8qIFNsb3RTdGF0dXMuQ29tcHV0ZWQgKi8gfCBjaGFuZ2VkO1xufVxuZnVuY3Rpb24gZ2V0QWRkcihzdGF0ZSwgYWRkcikge1xuICAgIHJldHVybiBhZGRyICYgMSA/IHN0YXRlLmNvbmZpZy5zdGF0aWNWYWx1ZXNbYWRkciA+PiAxXSA6IHN0YXRlLnZhbHVlc1thZGRyID4+IDFdO1xufVxuXG5jb25zdCBsYW5ndWFnZURhdGEgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBhbGxvd011bHRpcGxlU2VsZWN0aW9ucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh2ID0+IHYpLFxuICAgIHN0YXRpYzogdHJ1ZVxufSk7XG5jb25zdCBsaW5lU2VwYXJhdG9yID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiB1bmRlZmluZWQsXG4gICAgc3RhdGljOiB0cnVlXG59KTtcbmNvbnN0IGNoYW5nZUZpbHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRmlsdGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgdHJhbnNhY3Rpb25FeHRlbmRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHJlYWRPbmx5ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiBmYWxzZVxufSk7XG5cbi8qKlxuQW5ub3RhdGlvbnMgYXJlIHRhZ2dlZCB2YWx1ZXMgdGhhdCBhcmUgdXNlZCB0byBhZGQgbWV0YWRhdGEgdG9cbnRyYW5zYWN0aW9ucyBpbiBhbiBleHRlbnNpYmxlIHdheS4gVGhleSBzaG91bGQgYmUgdXNlZCB0byBtb2RlbFxudGhpbmdzIHRoYXQgZWZmZWN0IHRoZSBlbnRpcmUgdHJhbnNhY3Rpb24gKHN1Y2ggYXMgaXRzIFt0aW1lXG5zdGFtcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl50aW1lKSBvciBpbmZvcm1hdGlvbiBhYm91dCBpdHNcbltvcmlnaW5dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25edXNlckV2ZW50KSkuIEZvciBlZmZlY3RzIHRoYXQgaGFwcGVuXG5fYWxvbmdzaWRlXyB0aGUgb3RoZXIgY2hhbmdlcyBtYWRlIGJ5IHRoZSB0cmFuc2FjdGlvbiwgW3N0YXRlXG5lZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0KSBhcmUgbW9yZSBhcHByb3ByaWF0ZS5cbiovXG5jbGFzcyBBbm5vdGF0aW9uIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBhbm5vdGF0aW9uIHR5cGUuXG4gICAgKi9cbiAgICB0eXBlLCBcbiAgICAvKipcbiAgICBUaGUgdmFsdWUgb2YgdGhpcyBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBuZXcgdHlwZSBvZiBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZSgpIHsgcmV0dXJuIG5ldyBBbm5vdGF0aW9uVHlwZSgpOyB9XG59XG4vKipcbk1hcmtlciB0aGF0IGlkZW50aWZpZXMgYSB0eXBlIG9mIFthbm5vdGF0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkFubm90YXRpb24pLlxuKi9cbmNsYXNzIEFubm90YXRpb25UeXBlIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBhbm5vdGF0aW9uLlxuICAgICovXG4gICAgb2YodmFsdWUpIHsgcmV0dXJuIG5ldyBBbm5vdGF0aW9uKHRoaXMsIHZhbHVlKTsgfVxufVxuLyoqXG5SZXByZXNlbnRhdGlvbiBvZiBhIHR5cGUgb2Ygc3RhdGUgZWZmZWN0LiBEZWZpbmVkIHdpdGhcbltgU3RhdGVFZmZlY3QuZGVmaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdF5kZWZpbmUpLlxuKi9cbmNsYXNzIFN0YXRlRWZmZWN0VHlwZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUaGUgYGFueWAgdHlwZXMgaW4gdGhlc2UgZnVuY3Rpb24gdHlwZXMgYXJlIHRoZXJlIHRvIHdvcmtcbiAgICAvLyBhcm91bmQgVHlwZVNjcmlwdCBpc3N1ZSAjMzc2MzEsIHdoZXJlIHRoZSB0eXBlIGd1YXJkIG9uXG4gICAgLy8gYFN0YXRlRWZmZWN0LmlzYCBteXN0ZXJpb3VzbHkgc3RvcHMgd29ya2luZyB3aGVuIHRoZXNlIHByb3Blcmx5XG4gICAgLy8gaGF2ZSB0eXBlIGBWYWx1ZWAuXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXApIHtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFtzdGF0ZSBlZmZlY3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QpIGluc3RhbmNlIG9mIHRoaXNcbiAgICB0eXBlLlxuICAgICovXG4gICAgb2YodmFsdWUpIHsgcmV0dXJuIG5ldyBTdGF0ZUVmZmVjdCh0aGlzLCB2YWx1ZSk7IH1cbn1cbi8qKlxuU3RhdGUgZWZmZWN0cyBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYWRkaXRpb25hbCBlZmZlY3RzXG5hc3NvY2lhdGVkIHdpdGggYSBbdHJhbnNhY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uZWZmZWN0cykuIFRoZXlcbmFyZSBvZnRlbiB1c2VmdWwgdG8gbW9kZWwgY2hhbmdlcyB0byBjdXN0b20gW3N0YXRlXG5maWVsZHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVGaWVsZCksIHdoZW4gdGhvc2UgY2hhbmdlcyBhcmVuJ3QgaW1wbGljaXQgaW5cbmRvY3VtZW50IG9yIHNlbGVjdGlvbiBjaGFuZ2VzLlxuKi9cbmNsYXNzIFN0YXRlRWZmZWN0IHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgVGhlIHZhbHVlIG9mIHRoaXMgZWZmZWN0LlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyBlZmZlY3QgdGhyb3VnaCBhIHBvc2l0aW9uIG1hcHBpbmcuIFdpbGwgcmV0dXJuXG4gICAgYHVuZGVmaW5lZGAgd2hlbiB0aGF0IGVuZHMgdXAgZGVsZXRpbmcgdGhlIGVmZmVjdC5cbiAgICAqL1xuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGxldCBtYXBwZWQgPSB0aGlzLnR5cGUubWFwKHRoaXMudmFsdWUsIG1hcHBpbmcpO1xuICAgICAgICByZXR1cm4gbWFwcGVkID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBtYXBwZWQgPT0gdGhpcy52YWx1ZSA/IHRoaXMgOiBuZXcgU3RhdGVFZmZlY3QodGhpcy50eXBlLCBtYXBwZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGlzIGVmZmVjdCBvYmplY3QgaXMgb2YgYSBnaXZlblxuICAgIFt0eXBlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0VHlwZSkuXG4gICAgKi9cbiAgICBpcyh0eXBlKSB7IHJldHVybiB0aGlzLnR5cGUgPT0gdHlwZTsgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyBlZmZlY3QgdHlwZS4gVGhlIHR5cGUgcGFyYW1ldGVyIGluZGljYXRlcyB0aGUgdHlwZVxuICAgIG9mIHZhbHVlcyB0aGF0IGhpcyBlZmZlY3QgaG9sZHMuIEl0IHNob3VsZCBiZSBhIHR5cGUgdGhhdFxuICAgIGRvZXNuJ3QgaW5jbHVkZSBgdW5kZWZpbmVkYCwgc2luY2UgdGhhdCBpcyB1c2VkIGluXG4gICAgW21hcHBpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QubWFwKSB0byBpbmRpY2F0ZSB0aGF0IGFuIGVmZmVjdCBpc1xuICAgIHJlbW92ZWQuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMgPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IFN0YXRlRWZmZWN0VHlwZShzcGVjLm1hcCB8fCAodiA9PiB2KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhbiBhcnJheSBvZiBlZmZlY3RzIHRocm91Z2ggYSBjaGFuZ2Ugc2V0LlxuICAgICovXG4gICAgc3RhdGljIG1hcEVmZmVjdHMoZWZmZWN0cywgbWFwcGluZykge1xuICAgICAgICBpZiAoIWVmZmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGVmZmVjdHM7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIGVmZmVjdHMpIHtcbiAgICAgICAgICAgIGxldCBtYXBwZWQgPSBlZmZlY3QubWFwKG1hcHBpbmcpO1xuICAgICAgICAgICAgaWYgKG1hcHBlZClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChtYXBwZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5UaGlzIGVmZmVjdCBjYW4gYmUgdXNlZCB0byByZWNvbmZpZ3VyZSB0aGUgcm9vdCBleHRlbnNpb25zIG9mXG50aGUgZWRpdG9yLiBEb2luZyB0aGlzIHdpbGwgZGlzY2FyZCBhbnkgZXh0ZW5zaW9uc1xuW2FwcGVuZGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0XmFwcGVuZENvbmZpZyksIGJ1dCBkb2VzIG5vdCByZXNldFxudGhlIGNvbnRlbnQgb2YgW3JlY29uZmlndXJlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSlcbmNvbXBhcnRtZW50cy5cbiovXG5TdGF0ZUVmZmVjdC5yZWNvbmZpZ3VyZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8qKlxuQXBwZW5kIGV4dGVuc2lvbnMgdG8gdGhlIHRvcC1sZXZlbCBjb25maWd1cmF0aW9uIG9mIHRoZSBlZGl0b3IuXG4qL1xuU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5DaGFuZ2VzIHRvIHRoZSBlZGl0b3Igc3RhdGUgYXJlIGdyb3VwZWQgaW50byB0cmFuc2FjdGlvbnMuXG5UeXBpY2FsbHksIGEgdXNlciBhY3Rpb24gY3JlYXRlcyBhIHNpbmdsZSB0cmFuc2FjdGlvbiwgd2hpY2ggbWF5XG5jb250YWluIGFueSBudW1iZXIgb2YgZG9jdW1lbnQgY2hhbmdlcywgbWF5IGNoYW5nZSB0aGUgc2VsZWN0aW9uLFxub3IgaGF2ZSBvdGhlciBlZmZlY3RzLiBDcmVhdGUgYSB0cmFuc2FjdGlvbiBieSBjYWxsaW5nXG5bYEVkaXRvclN0YXRlLnVwZGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSwgb3IgaW1tZWRpYXRlbHlcbmRpc3BhdGNoIG9uZSBieSBjYWxsaW5nXG5bYEVkaXRvclZpZXcuZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkuXG4qL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGF0ZSBmcm9tIHdoaWNoIHRoZSB0cmFuc2FjdGlvbiBzdGFydHMuXG4gICAgKi9cbiAgICBzdGFydFN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgZG9jdW1lbnQgY2hhbmdlcyBtYWRlIGJ5IHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBjaGFuZ2VzLCBcbiAgICAvKipcbiAgICBUaGUgc2VsZWN0aW9uIHNldCBieSB0aGlzIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgaXRcbiAgICBkb2Vzbid0IGV4cGxpY2l0bHkgc2V0IGEgc2VsZWN0aW9uLlxuICAgICovXG4gICAgc2VsZWN0aW9uLCBcbiAgICAvKipcbiAgICBUaGUgZWZmZWN0cyBhZGRlZCB0byB0aGUgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBlZmZlY3RzLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFubm90YXRpb25zLCBcbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIHNjcm9sbGVkIGludG8gdmlldyBhZnRlciB0aGlzXG4gICAgdHJhbnNhY3Rpb24gaXMgZGlzcGF0Y2hlZC5cbiAgICAqL1xuICAgIHNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZSA9IHN0YXJ0U3RhdGU7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgICAgICB0aGlzLmVmZmVjdHMgPSBlZmZlY3RzO1xuICAgICAgICB0aGlzLmFubm90YXRpb25zID0gYW5ub3RhdGlvbnM7XG4gICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcgPSBzY3JvbGxJbnRvVmlldztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kb2MgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX3N0YXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHNlbGVjdGlvbilcbiAgICAgICAgICAgIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgY2hhbmdlcy5uZXdMZW5ndGgpO1xuICAgICAgICBpZiAoIWFubm90YXRpb25zLnNvbWUoKGEpID0+IGEudHlwZSA9PSBUcmFuc2FjdGlvbi50aW1lKSlcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9ucy5jb25jYXQoVHJhbnNhY3Rpb24udGltZS5vZihEYXRlLm5vdygpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShzdGFydFN0YXRlLCBjaGFuZ2VzLCBzZWxlY3Rpb24sIGVmZmVjdHMsIGFubm90YXRpb25zLCBzY3JvbGxJbnRvVmlldykge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHN0YXJ0U3RhdGUsIGNoYW5nZXMsIHNlbGVjdGlvbiwgZWZmZWN0cywgYW5ub3RhdGlvbnMsIHNjcm9sbEludG9WaWV3KTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG5ldyBkb2N1bWVudCBwcm9kdWNlZCBieSB0aGUgdHJhbnNhY3Rpb24uIENvbnRyYXJ5IHRvXG4gICAgW2Auc3RhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnN0YXRlKWAuZG9jYCwgYWNjZXNzaW5nIHRoaXMgd29uJ3RcbiAgICBmb3JjZSB0aGUgZW50aXJlIG5ldyBzdGF0ZSB0byBiZSBjb21wdXRlZCByaWdodCBhd2F5LCBzbyBpdCBpc1xuICAgIHJlY29tbWVuZGVkIHRoYXQgW3RyYW5zYWN0aW9uXG4gICAgZmlsdGVyc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50cmFuc2FjdGlvbkZpbHRlcikgdXNlIHRoaXMgZ2V0dGVyXG4gICAgd2hlbiB0aGV5IG5lZWQgdG8gbG9vayBhdCB0aGUgbmV3IGRvY3VtZW50LlxuICAgICovXG4gICAgZ2V0IG5ld0RvYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvYyB8fCAodGhpcy5fZG9jID0gdGhpcy5jaGFuZ2VzLmFwcGx5KHRoaXMuc3RhcnRTdGF0ZS5kb2MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG5ldyBzZWxlY3Rpb24gcHJvZHVjZWQgYnkgdGhlIHRyYW5zYWN0aW9uLiBJZlxuICAgIFtgdGhpcy5zZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnNlbGVjdGlvbikgaXMgdW5kZWZpbmVkLFxuICAgIHRoaXMgd2lsbCBbbWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclNlbGVjdGlvbi5tYXApIHRoZSBzdGFydCBzdGF0ZSdzXG4gICAgY3VycmVudCBzZWxlY3Rpb24gdGhyb3VnaCB0aGUgY2hhbmdlcyBtYWRlIGJ5IHRoZSB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGdldCBuZXdTZWxlY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbiB8fCB0aGlzLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1hcCh0aGlzLmNoYW5nZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IHN0YXRlIGNyZWF0ZWQgYnkgdGhlIHRyYW5zYWN0aW9uLiBDb21wdXRlZCBvbiBkZW1hbmRcbiAgICAoYnV0IHJldGFpbmVkIGZvciBzdWJzZXF1ZW50IGFjY2VzcyksIHNvIGl0IGlzIHJlY29tbWVuZGVkIG5vdCB0b1xuICAgIGFjY2VzcyBpdCBpbiBbdHJhbnNhY3Rpb25cbiAgICBmaWx0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRyYW5zYWN0aW9uRmlsdGVyKSB3aGVuIHBvc3NpYmxlLlxuICAgICovXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3N0YXRlKVxuICAgICAgICAgICAgdGhpcy5zdGFydFN0YXRlLmFwcGx5VHJhbnNhY3Rpb24odGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gYW5ub3RhdGlvbiB0eXBlLCBpZiBhbnkuXG4gICAgKi9cbiAgICBhbm5vdGF0aW9uKHR5cGUpIHtcbiAgICAgICAgZm9yIChsZXQgYW5uIG9mIHRoaXMuYW5ub3RhdGlvbnMpXG4gICAgICAgICAgICBpZiAoYW5uLnR5cGUgPT0gdHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5uLnZhbHVlO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgdHJhbnNhY3Rpb24gY2hhbmdlZCB0aGUgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgZG9jQ2hhbmdlZCgpIHsgcmV0dXJuICF0aGlzLmNoYW5nZXMuZW1wdHk7IH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIHRyYW5zYWN0aW9uIHJlY29uZmlndXJlcyB0aGUgc3RhdGVcbiAgICAodGhyb3VnaCBhIFtjb25maWd1cmF0aW9uIGNvbXBhcnRtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50KSBvclxuICAgIHdpdGggYSB0b3AtbGV2ZWwgY29uZmlndXJhdGlvblxuICAgIFtlZmZlY3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3RecmVjb25maWd1cmUpLlxuICAgICovXG4gICAgZ2V0IHJlY29uZmlndXJlZCgpIHsgcmV0dXJuIHRoaXMuc3RhcnRTdGF0ZS5jb25maWcgIT0gdGhpcy5zdGF0ZS5jb25maWc7IH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGhhcyBhIFt1c2VyXG4gICAgZXZlbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25edXNlckV2ZW50KSBhbm5vdGF0aW9uIHRoYXQgaXMgZXF1YWwgdG9cbiAgICBvciBtb3JlIHNwZWNpZmljIHRoYW4gYGV2ZW50YC4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0cmFuc2FjdGlvblxuICAgIGhhcyBgXCJzZWxlY3QucG9pbnRlclwiYCBhcyB1c2VyIGV2ZW50LCBgXCJzZWxlY3RcImAgYW5kXG4gICAgYFwic2VsZWN0LnBvaW50ZXJcImAgd2lsbCBtYXRjaCBpdC5cbiAgICAqL1xuICAgIGlzVXNlckV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnVzZXJFdmVudCk7XG4gICAgICAgIHJldHVybiAhIShlICYmIChlID09IGV2ZW50IHx8IGUubGVuZ3RoID4gZXZlbnQubGVuZ3RoICYmIGUuc2xpY2UoMCwgZXZlbnQubGVuZ3RoKSA9PSBldmVudCAmJiBlW2V2ZW50Lmxlbmd0aF0gPT0gXCIuXCIpKTtcbiAgICB9XG59XG4vKipcbkFubm90YXRpb24gdXNlZCB0byBzdG9yZSB0cmFuc2FjdGlvbiB0aW1lc3RhbXBzLiBBdXRvbWF0aWNhbGx5XG5hZGRlZCB0byBldmVyeSB0cmFuc2FjdGlvbiwgaG9sZGluZyBgRGF0ZS5ub3coKWAuXG4qL1xuVHJhbnNhY3Rpb24udGltZSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5Bbm5vdGF0aW9uIHVzZWQgdG8gYXNzb2NpYXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBhIHVzZXIgaW50ZXJmYWNlXG5ldmVudC4gSG9sZHMgYSBzdHJpbmcgaWRlbnRpZnlpbmcgdGhlIGV2ZW50LCB1c2luZyBhXG5kb3Qtc2VwYXJhdGVkIGZvcm1hdCB0byBzdXBwb3J0IGF0dGFjaGluZyBtb3JlIHNwZWNpZmljXG5pbmZvcm1hdGlvbi4gVGhlIGV2ZW50cyB1c2VkIGJ5IHRoZSBjb3JlIGxpYnJhcmllcyBhcmU6XG5cbiAtIGBcImlucHV0XCJgIHdoZW4gY29udGVudCBpcyBlbnRlcmVkXG4gICAtIGBcImlucHV0LnR5cGVcImAgZm9yIHR5cGVkIGlucHV0XG4gICAgIC0gYFwiaW5wdXQudHlwZS5jb21wb3NlXCJgIGZvciBjb21wb3NpdGlvblxuICAgLSBgXCJpbnB1dC5wYXN0ZVwiYCBmb3IgcGFzdGVkIGlucHV0XG4gICAtIGBcImlucHV0LmRyb3BcImAgd2hlbiBhZGRpbmcgY29udGVudCB3aXRoIGRyYWctYW5kLWRyb3BcbiAgIC0gYFwiaW5wdXQuY29tcGxldGVcImAgd2hlbiBhdXRvY29tcGxldGluZ1xuIC0gYFwiZGVsZXRlXCJgIHdoZW4gdGhlIHVzZXIgZGVsZXRlcyBjb250ZW50XG4gICAtIGBcImRlbGV0ZS5zZWxlY3Rpb25cImAgd2hlbiBkZWxldGluZyB0aGUgc2VsZWN0aW9uXG4gICAtIGBcImRlbGV0ZS5mb3J3YXJkXCJgIHdoZW4gZGVsZXRpbmcgZm9yd2FyZCBmcm9tIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmJhY2t3YXJkXCJgIHdoZW4gZGVsZXRpbmcgYmFja3dhcmQgZnJvbSB0aGUgc2VsZWN0aW9uXG4gICAtIGBcImRlbGV0ZS5jdXRcImAgd2hlbiBjdXR0aW5nIHRvIHRoZSBjbGlwYm9hcmRcbiAtIGBcIm1vdmVcImAgd2hlbiBjb250ZW50IGlzIG1vdmVkXG4gICAtIGBcIm1vdmUuZHJvcFwiYCB3aGVuIGNvbnRlbnQgaXMgbW92ZWQgd2l0aGluIHRoZSBlZGl0b3IgdGhyb3VnaCBkcmFnLWFuZC1kcm9wXG4gLSBgXCJzZWxlY3RcImAgd2hlbiBleHBsaWNpdGx5IGNoYW5naW5nIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwic2VsZWN0LnBvaW50ZXJcImAgd2hlbiBzZWxlY3Rpbmcgd2l0aCBhIG1vdXNlIG9yIG90aGVyIHBvaW50aW5nIGRldmljZVxuIC0gYFwidW5kb1wiYCBhbmQgYFwicmVkb1wiYCBmb3IgaGlzdG9yeSBhY3Rpb25zXG5cblVzZSBbYGlzVXNlckV2ZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5pc1VzZXJFdmVudCkgdG8gY2hlY2tcbndoZXRoZXIgdGhlIGFubm90YXRpb24gbWF0Y2hlcyBhIGdpdmVuIGV2ZW50LlxuKi9cblRyYW5zYWN0aW9uLnVzZXJFdmVudCA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5Bbm5vdGF0aW9uIGluZGljYXRpbmcgd2hldGhlciBhIHRyYW5zYWN0aW9uIHNob3VsZCBiZSBhZGRlZCB0b1xudGhlIHVuZG8gaGlzdG9yeSBvciBub3QuXG4qL1xuVHJhbnNhY3Rpb24uYWRkVG9IaXN0b3J5ID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gaW5kaWNhdGluZyAod2hlbiBwcmVzZW50IGFuZCB0cnVlKSB0aGF0IGEgdHJhbnNhY3Rpb25cbnJlcHJlc2VudHMgYSBjaGFuZ2UgbWFkZSBieSBzb21lIG90aGVyIGFjdG9yLCBub3QgdGhlIHVzZXIuIFRoaXNcbmlzIHVzZWQsIGZvciBleGFtcGxlLCB0byB0YWcgb3RoZXIgcGVvcGxlJ3MgY2hhbmdlcyBpblxuY29sbGFib3JhdGl2ZSBlZGl0aW5nLlxuKi9cblRyYW5zYWN0aW9uLnJlbW90ZSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuZnVuY3Rpb24gam9pblJhbmdlcyhhLCBiKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IGlBID0gMCwgaUIgPSAwOzspIHtcbiAgICAgICAgbGV0IGZyb20sIHRvO1xuICAgICAgICBpZiAoaUEgPCBhLmxlbmd0aCAmJiAoaUIgPT0gYi5sZW5ndGggfHwgYltpQl0gPj0gYVtpQV0pKSB7XG4gICAgICAgICAgICBmcm9tID0gYVtpQSsrXTtcbiAgICAgICAgICAgIHRvID0gYVtpQSsrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpQiA8IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICBmcm9tID0gYltpQisrXTtcbiAgICAgICAgICAgIHRvID0gYltpQisrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBpZiAoIXJlc3VsdC5sZW5ndGggfHwgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA8IGZyb20pXG4gICAgICAgICAgICByZXN1bHQucHVzaChmcm9tLCB0byk7XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPCB0bylcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPSB0bztcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVRyYW5zYWN0aW9uKGEsIGIsIHNlcXVlbnRpYWwpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG1hcEZvckEsIG1hcEZvckIsIGNoYW5nZXM7XG4gICAgaWYgKHNlcXVlbnRpYWwpIHtcbiAgICAgICAgbWFwRm9yQSA9IGIuY2hhbmdlcztcbiAgICAgICAgbWFwRm9yQiA9IENoYW5nZVNldC5lbXB0eShiLmNoYW5nZXMubGVuZ3RoKTtcbiAgICAgICAgY2hhbmdlcyA9IGEuY2hhbmdlcy5jb21wb3NlKGIuY2hhbmdlcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXBGb3JBID0gYi5jaGFuZ2VzLm1hcChhLmNoYW5nZXMpO1xuICAgICAgICBtYXBGb3JCID0gYS5jaGFuZ2VzLm1hcERlc2MoYi5jaGFuZ2VzLCB0cnVlKTtcbiAgICAgICAgY2hhbmdlcyA9IGEuY2hhbmdlcy5jb21wb3NlKG1hcEZvckEpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGFuZ2VzLFxuICAgICAgICBzZWxlY3Rpb246IGIuc2VsZWN0aW9uID8gYi5zZWxlY3Rpb24ubWFwKG1hcEZvckIpIDogKF9hID0gYS5zZWxlY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAobWFwRm9yQSksXG4gICAgICAgIGVmZmVjdHM6IFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoYS5lZmZlY3RzLCBtYXBGb3JBKS5jb25jYXQoU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhiLmVmZmVjdHMsIG1hcEZvckIpKSxcbiAgICAgICAgYW5ub3RhdGlvbnM6IGEuYW5ub3RhdGlvbnMubGVuZ3RoID8gYS5hbm5vdGF0aW9ucy5jb25jYXQoYi5hbm5vdGF0aW9ucykgOiBiLmFubm90YXRpb25zLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogYS5zY3JvbGxJbnRvVmlldyB8fCBiLnNjcm9sbEludG9WaWV3XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2FjdGlvbklubmVyKHN0YXRlLCBzcGVjLCBkb2NTaXplKSB7XG4gICAgbGV0IHNlbCA9IHNwZWMuc2VsZWN0aW9uLCBhbm5vdGF0aW9ucyA9IGFzQXJyYXkoc3BlYy5hbm5vdGF0aW9ucyk7XG4gICAgaWYgKHNwZWMudXNlckV2ZW50KVxuICAgICAgICBhbm5vdGF0aW9ucyA9IGFubm90YXRpb25zLmNvbmNhdChUcmFuc2FjdGlvbi51c2VyRXZlbnQub2Yoc3BlYy51c2VyRXZlbnQpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaGFuZ2VzOiBzcGVjLmNoYW5nZXMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQgPyBzcGVjLmNoYW5nZXNcbiAgICAgICAgICAgIDogQ2hhbmdlU2V0Lm9mKHNwZWMuY2hhbmdlcyB8fCBbXSwgZG9jU2l6ZSwgc3RhdGUuZmFjZXQobGluZVNlcGFyYXRvcikpLFxuICAgICAgICBzZWxlY3Rpb246IHNlbCAmJiAoc2VsIGluc3RhbmNlb2YgRWRpdG9yU2VsZWN0aW9uID8gc2VsIDogRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShzZWwuYW5jaG9yLCBzZWwuaGVhZCkpLFxuICAgICAgICBlZmZlY3RzOiBhc0FycmF5KHNwZWMuZWZmZWN0cyksXG4gICAgICAgIGFubm90YXRpb25zLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogISFzcGVjLnNjcm9sbEludG9WaWV3XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2FjdGlvbihzdGF0ZSwgc3BlY3MsIGZpbHRlcikge1xuICAgIGxldCBzID0gcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIHNwZWNzLmxlbmd0aCA/IHNwZWNzWzBdIDoge30sIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgIGlmIChzcGVjcy5sZW5ndGggJiYgc3BlY3NbMF0uZmlsdGVyID09PSBmYWxzZSlcbiAgICAgICAgZmlsdGVyID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzcGVjcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc3BlY3NbaV0uZmlsdGVyID09PSBmYWxzZSlcbiAgICAgICAgICAgIGZpbHRlciA9IGZhbHNlO1xuICAgICAgICBsZXQgc2VxID0gISFzcGVjc1tpXS5zZXF1ZW50aWFsO1xuICAgICAgICBzID0gbWVyZ2VUcmFuc2FjdGlvbihzLCByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgc3BlY3NbaV0sIHNlcSA/IHMuY2hhbmdlcy5uZXdMZW5ndGggOiBzdGF0ZS5kb2MubGVuZ3RoKSwgc2VxKTtcbiAgICB9XG4gICAgbGV0IHRyID0gVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCBzLmNoYW5nZXMsIHMuc2VsZWN0aW9uLCBzLmVmZmVjdHMsIHMuYW5ub3RhdGlvbnMsIHMuc2Nyb2xsSW50b1ZpZXcpO1xuICAgIHJldHVybiBleHRlbmRUcmFuc2FjdGlvbihmaWx0ZXIgPyBmaWx0ZXJUcmFuc2FjdGlvbih0cikgOiB0cik7XG59XG4vLyBGaW5pc2ggYSB0cmFuc2FjdGlvbiBieSBhcHBseWluZyBmaWx0ZXJzIGlmIG5lY2Vzc2FyeS5cbmZ1bmN0aW9uIGZpbHRlclRyYW5zYWN0aW9uKHRyKSB7XG4gICAgbGV0IHN0YXRlID0gdHIuc3RhcnRTdGF0ZTtcbiAgICAvLyBDaGFuZ2UgZmlsdGVyc1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgIGZvciAobGV0IGZpbHRlciBvZiBzdGF0ZS5mYWNldChjaGFuZ2VGaWx0ZXIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGZpbHRlcih0cik7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID09PSB0cnVlID8gdmFsdWUgOiBqb2luUmFuZ2VzKHJlc3VsdCwgdmFsdWUpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgIGxldCBjaGFuZ2VzLCBiYWNrO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYmFjayA9IHRyLmNoYW5nZXMuaW52ZXJ0ZWREZXNjO1xuICAgICAgICAgICAgY2hhbmdlcyA9IENoYW5nZVNldC5lbXB0eShzdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmaWx0ZXJlZCA9IHRyLmNoYW5nZXMuZmlsdGVyKHJlc3VsdCk7XG4gICAgICAgICAgICBjaGFuZ2VzID0gZmlsdGVyZWQuY2hhbmdlcztcbiAgICAgICAgICAgIGJhY2sgPSBmaWx0ZXJlZC5maWx0ZXJlZC5tYXBEZXNjKGZpbHRlcmVkLmNoYW5nZXMpLmludmVydGVkRGVzYztcbiAgICAgICAgfVxuICAgICAgICB0ciA9IFRyYW5zYWN0aW9uLmNyZWF0ZShzdGF0ZSwgY2hhbmdlcywgdHIuc2VsZWN0aW9uICYmIHRyLnNlbGVjdGlvbi5tYXAoYmFjayksIFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHModHIuZWZmZWN0cywgYmFjayksIHRyLmFubm90YXRpb25zLCB0ci5zY3JvbGxJbnRvVmlldyk7XG4gICAgfVxuICAgIC8vIFRyYW5zYWN0aW9uIGZpbHRlcnNcbiAgICBsZXQgZmlsdGVycyA9IHN0YXRlLmZhY2V0KHRyYW5zYWN0aW9uRmlsdGVyKTtcbiAgICBmb3IgKGxldCBpID0gZmlsdGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBsZXQgZmlsdGVyZWQgPSBmaWx0ZXJzW2ldKHRyKTtcbiAgICAgICAgaWYgKGZpbHRlcmVkIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pXG4gICAgICAgICAgICB0ciA9IGZpbHRlcmVkO1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcmVkKSAmJiBmaWx0ZXJlZC5sZW5ndGggPT0gMSAmJiBmaWx0ZXJlZFswXSBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgdHIgPSBmaWx0ZXJlZFswXTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdHIgPSByZXNvbHZlVHJhbnNhY3Rpb24oc3RhdGUsIGFzQXJyYXkoZmlsdGVyZWQpLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiB0cjtcbn1cbmZ1bmN0aW9uIGV4dGVuZFRyYW5zYWN0aW9uKHRyKSB7XG4gICAgbGV0IHN0YXRlID0gdHIuc3RhcnRTdGF0ZSwgZXh0ZW5kZXJzID0gc3RhdGUuZmFjZXQodHJhbnNhY3Rpb25FeHRlbmRlciksIHNwZWMgPSB0cjtcbiAgICBmb3IgKGxldCBpID0gZXh0ZW5kZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBleHRlbnNpb24gPSBleHRlbmRlcnNbaV0odHIpO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uICYmIE9iamVjdC5rZXlzKGV4dGVuc2lvbikubGVuZ3RoKVxuICAgICAgICAgICAgc3BlYyA9IG1lcmdlVHJhbnNhY3Rpb24oc3BlYywgcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIGV4dGVuc2lvbiwgdHIuY2hhbmdlcy5uZXdMZW5ndGgpLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHNwZWMgPT0gdHIgPyB0ciA6IFRyYW5zYWN0aW9uLmNyZWF0ZShzdGF0ZSwgdHIuY2hhbmdlcywgdHIuc2VsZWN0aW9uLCBzcGVjLmVmZmVjdHMsIHNwZWMuYW5ub3RhdGlvbnMsIHNwZWMuc2Nyb2xsSW50b1ZpZXcpO1xufVxuY29uc3Qgbm9uZSA9IFtdO1xuZnVuY3Rpb24gYXNBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gbm9uZSA6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xufVxuXG4vKipcblRoZSBjYXRlZ29yaWVzIHByb2R1Y2VkIGJ5IGEgW2NoYXJhY3RlclxuY2F0ZWdvcml6ZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuY2hhckNhdGVnb3JpemVyKS4gVGhlc2UgYXJlIHVzZWRcbmRvIHRoaW5ncyBsaWtlIHNlbGVjdGluZyBieSB3b3JkLlxuKi9cbnZhciBDaGFyQ2F0ZWdvcnkgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDaGFyQ2F0ZWdvcnkpIHtcbiAgICAvKipcbiAgICBXb3JkIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBDaGFyQ2F0ZWdvcnlbQ2hhckNhdGVnb3J5W1wiV29yZFwiXSA9IDBdID0gXCJXb3JkXCI7XG4gICAgLyoqXG4gICAgV2hpdGVzcGFjZS5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJTcGFjZVwiXSA9IDFdID0gXCJTcGFjZVwiO1xuICAgIC8qKlxuICAgIEFueXRoaW5nIGVsc2UuXG4gICAgKi9cbiAgICBDaGFyQ2F0ZWdvcnlbQ2hhckNhdGVnb3J5W1wiT3RoZXJcIl0gPSAyXSA9IFwiT3RoZXJcIjtcbnJldHVybiBDaGFyQ2F0ZWdvcnl9KShDaGFyQ2F0ZWdvcnkgfHwgKENoYXJDYXRlZ29yeSA9IHt9KSk7XG5jb25zdCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhciA9IC9bXFx1MDBkZlxcdTA1ODdcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhYzAwLVxcdWQ3YWZdLztcbmxldCB3b3JkQ2hhcjtcbnRyeSB7XG4gICAgd29yZENoYXIgPSAvKkBfX1BVUkVfXyovbmV3IFJlZ0V4cChcIltcXFxccHtBbHBoYWJldGljfVxcXFxwe051bWJlcn1fXVwiLCBcInVcIik7XG59XG5jYXRjaCAoXykgeyB9XG5mdW5jdGlvbiBoYXNXb3JkQ2hhcihzdHIpIHtcbiAgICBpZiAod29yZENoYXIpXG4gICAgICAgIHJldHVybiB3b3JkQ2hhci50ZXN0KHN0cik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGNoID0gc3RyW2ldO1xuICAgICAgICBpZiAoL1xcdy8udGVzdChjaCkgfHwgY2ggPiBcIlxceDgwXCIgJiYgKGNoLnRvVXBwZXJDYXNlKCkgIT0gY2gudG9Mb3dlckNhc2UoKSB8fCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhci50ZXN0KGNoKSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gbWFrZUNhdGVnb3JpemVyKHdvcmRDaGFycykge1xuICAgIHJldHVybiAoY2hhcikgPT4ge1xuICAgICAgICBpZiAoIS9cXFMvLnRlc3QoY2hhcikpXG4gICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LlNwYWNlO1xuICAgICAgICBpZiAoaGFzV29yZENoYXIoY2hhcikpXG4gICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LldvcmQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZENoYXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKGNoYXIuaW5kZXhPZih3b3JkQ2hhcnNbaV0pID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIENoYXJDYXRlZ29yeS5Xb3JkO1xuICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5Lk90aGVyO1xuICAgIH07XG59XG5cbi8qKlxuVGhlIGVkaXRvciBzdGF0ZSBjbGFzcyBpcyBhIHBlcnNpc3RlbnQgKGltbXV0YWJsZSkgZGF0YSBzdHJ1Y3R1cmUuXG5UbyB1cGRhdGUgYSBzdGF0ZSwgeW91IFtjcmVhdGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSBhXG5bdHJhbnNhY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24pLCB3aGljaCBwcm9kdWNlcyBhIF9uZXdfIHN0YXRlXG5pbnN0YW5jZSwgd2l0aG91dCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsIG9iamVjdC5cblxuQXMgc3VjaCwgX25ldmVyXyBtdXRhdGUgcHJvcGVydGllcyBvZiBhIHN0YXRlIGRpcmVjdGx5LiBUaGF0J2xsXG5qdXN0IGJyZWFrIHRoaW5ncy5cbiovXG5jbGFzcyBFZGl0b3JTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25maWcsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgICovXG4gICAgZG9jLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBzZWxlY3Rpb24sIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdmFsdWVzLCBjb21wdXRlU2xvdCwgdHIpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gY29uZmlnLnN0YXR1c1RlbXBsYXRlLnNsaWNlKCk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVNsb3QgPSBjb21wdXRlU2xvdDtcbiAgICAgICAgLy8gRmlsbCBpbiB0aGUgY29tcHV0ZWQgc3RhdGUgaW1tZWRpYXRlbHksIHNvIHRoYXQgZnVydGhlciBxdWVyaWVzXG4gICAgICAgIC8vIGZvciBpdCBtYWRlIGR1cmluZyB0aGUgdXBkYXRlIHJldHVybiB0aGlzIHN0YXRlXG4gICAgICAgIGlmICh0cilcbiAgICAgICAgICAgIHRyLl9zdGF0ZSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcuZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgZW5zdXJlQWRkcih0aGlzLCBpIDw8IDEpO1xuICAgICAgICB0aGlzLmNvbXB1dGVTbG90ID0gbnVsbDtcbiAgICB9XG4gICAgZmllbGQoZmllbGQsIHJlcXVpcmUgPSB0cnVlKSB7XG4gICAgICAgIGxldCBhZGRyID0gdGhpcy5jb25maWcuYWRkcmVzc1tmaWVsZC5pZF07XG4gICAgICAgIGlmIChhZGRyID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChyZXF1aXJlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRmllbGQgaXMgbm90IHByZXNlbnQgaW4gdGhpcyBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZW5zdXJlQWRkcih0aGlzLCBhZGRyKTtcbiAgICAgICAgcmV0dXJuIGdldEFkZHIodGhpcywgYWRkcik7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbikgdGhhdCB1cGRhdGVzIHRoaXNcbiAgICBzdGF0ZS4gQW55IG51bWJlciBvZiBbdHJhbnNhY3Rpb24gc3BlY3NdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjKVxuICAgIGNhbiBiZSBwYXNzZWQuIFVubGVzc1xuICAgIFtgc2VxdWVudGlhbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLnNlcXVlbnRpYWwpIGlzIHNldCwgdGhlXG4gICAgW2NoYW5nZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmNoYW5nZXMpIChpZiBhbnkpIG9mIGVhY2ggc3BlY1xuICAgIGFyZSBhc3N1bWVkIHRvIHN0YXJ0IGluIHRoZSBfY3VycmVudF8gZG9jdW1lbnQgKG5vdCB0aGUgZG9jdW1lbnRcbiAgICBwcm9kdWNlZCBieSBwcmV2aW91cyBzcGVjcyksIGFuZCBpdHNcbiAgICBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pIGFuZFxuICAgIFtlZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKSBhcmUgYXNzdW1lZCB0byByZWZlclxuICAgIHRvIHRoZSBkb2N1bWVudCBjcmVhdGVkIGJ5IGl0cyBfb3duXyBjaGFuZ2VzLiBUaGUgcmVzdWx0aW5nXG4gICAgdHJhbnNhY3Rpb24gY29udGFpbnMgdGhlIGNvbWJpbmVkIGVmZmVjdCBvZiBhbGwgdGhlIGRpZmZlcmVudFxuICAgIHNwZWNzLiBGb3IgW3NlbGVjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuc2VsZWN0aW9uKSwgbGF0ZXJcbiAgICBzcGVjcyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlYXJsaWVyIG9uZXMuXG4gICAgKi9cbiAgICB1cGRhdGUoLi4uc3BlY3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVUcmFuc2FjdGlvbih0aGlzLCBzcGVjcywgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYXBwbHlUcmFuc2FjdGlvbih0cikge1xuICAgICAgICBsZXQgY29uZiA9IHRoaXMuY29uZmlnLCB7IGJhc2UsIGNvbXBhcnRtZW50cyB9ID0gY29uZjtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoQ29tcGFydG1lbnQucmVjb25maWd1cmUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGFydG1lbnRzID0gbmV3IE1hcDtcbiAgICAgICAgICAgICAgICAgICAgY29uZi5jb21wYXJ0bWVudHMuZm9yRWFjaCgodmFsLCBrZXkpID0+IGNvbXBhcnRtZW50cy5zZXQoa2V5LCB2YWwpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBhcnRtZW50cy5zZXQoZWZmZWN0LnZhbHVlLmNvbXBhcnRtZW50LCBlZmZlY3QudmFsdWUuZXh0ZW5zaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhTdGF0ZUVmZmVjdC5yZWNvbmZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiYXNlID0gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICBiYXNlID0gYXNBcnJheShiYXNlKS5jb25jYXQoZWZmZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnRWYWx1ZXM7XG4gICAgICAgIGlmICghY29uZikge1xuICAgICAgICAgICAgY29uZiA9IENvbmZpZ3VyYXRpb24ucmVzb2x2ZShiYXNlLCBjb21wYXJ0bWVudHMsIHRoaXMpO1xuICAgICAgICAgICAgbGV0IGludGVybWVkaWF0ZVN0YXRlID0gbmV3IEVkaXRvclN0YXRlKGNvbmYsIHRoaXMuZG9jLCB0aGlzLnNlbGVjdGlvbiwgY29uZi5keW5hbWljU2xvdHMubWFwKCgpID0+IG51bGwpLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QucmVjb25maWd1cmUoc3RhdGUsIHRoaXMpLCBudWxsKTtcbiAgICAgICAgICAgIHN0YXJ0VmFsdWVzID0gaW50ZXJtZWRpYXRlU3RhdGUudmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRWYWx1ZXMgPSB0ci5zdGFydFN0YXRlLnZhbHVlcy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSB0ci5zdGFydFN0YXRlLmZhY2V0KGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSA/IHRyLm5ld1NlbGVjdGlvbiA6IHRyLm5ld1NlbGVjdGlvbi5hc1NpbmdsZSgpO1xuICAgICAgICBuZXcgRWRpdG9yU3RhdGUoY29uZiwgdHIubmV3RG9jLCBzZWxlY3Rpb24sIHN0YXJ0VmFsdWVzLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QudXBkYXRlKHN0YXRlLCB0ciksIHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3RyYW5zYWN0aW9uIHNwZWNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjKSB0aGF0XG4gICAgcmVwbGFjZXMgZXZlcnkgc2VsZWN0aW9uIHJhbmdlIHdpdGggdGhlIGdpdmVuIGNvbnRlbnQuXG4gICAgKi9cbiAgICByZXBsYWNlU2VsZWN0aW9uKHRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy50b1RleHQodGV4dCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4gKHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogdGV4dCB9LFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIHRleHQubGVuZ3RoKSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCBvZiBjaGFuZ2VzIGFuZCBhIG5ldyBzZWxlY3Rpb24gYnkgcnVubmluZyB0aGUgZ2l2ZW5cbiAgICBmdW5jdGlvbiBmb3IgZWFjaCByYW5nZSBpbiB0aGUgYWN0aXZlIHNlbGVjdGlvbi4gVGhlIGZ1bmN0aW9uXG4gICAgY2FuIHJldHVybiBhbiBvcHRpb25hbCBzZXQgb2YgY2hhbmdlcyAoaW4gdGhlIGNvb3JkaW5hdGUgc3BhY2VcbiAgICBvZiB0aGUgc3RhcnQgZG9jdW1lbnQpLCBwbHVzIGFuIHVwZGF0ZWQgcmFuZ2UgKGluIHRoZSBjb29yZGluYXRlXG4gICAgc3BhY2Ugb2YgdGhlIGRvY3VtZW50IHByb2R1Y2VkIGJ5IHRoZSBjYWxsJ3Mgb3duIGNoYW5nZXMpLiBUaGlzXG4gICAgbWV0aG9kIHdpbGwgbWVyZ2UgYWxsIHRoZSBjaGFuZ2VzIGFuZCByYW5nZXMgaW50byBhIHNpbmdsZVxuICAgIGNoYW5nZXNldCBhbmQgc2VsZWN0aW9uLCBhbmQgcmV0dXJuIGl0IGFzIGEgW3RyYW5zYWN0aW9uXG4gICAgc3BlY10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMpLCB3aGljaCBjYW4gYmUgcGFzc2VkIHRvXG4gICAgW2B1cGRhdGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnVwZGF0ZSkuXG4gICAgKi9cbiAgICBjaGFuZ2VCeVJhbmdlKGYpIHtcbiAgICAgICAgbGV0IHNlbCA9IHRoaXMuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgcmVzdWx0MSA9IGYoc2VsLnJhbmdlc1swXSk7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5jaGFuZ2VzKHJlc3VsdDEuY2hhbmdlcyksIHJhbmdlcyA9IFtyZXN1bHQxLnJhbmdlXTtcbiAgICAgICAgbGV0IGVmZmVjdHMgPSBhc0FycmF5KHJlc3VsdDEuZWZmZWN0cyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGYoc2VsLnJhbmdlc1tpXSk7XG4gICAgICAgICAgICBsZXQgbmV3Q2hhbmdlcyA9IHRoaXMuY2hhbmdlcyhyZXN1bHQuY2hhbmdlcyksIG5ld01hcHBlZCA9IG5ld0NoYW5nZXMubWFwKGNoYW5nZXMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspXG4gICAgICAgICAgICAgICAgcmFuZ2VzW2pdID0gcmFuZ2VzW2pdLm1hcChuZXdNYXBwZWQpO1xuICAgICAgICAgICAgbGV0IG1hcEJ5ID0gY2hhbmdlcy5tYXBEZXNjKG5ld0NoYW5nZXMsIHRydWUpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2gocmVzdWx0LnJhbmdlLm1hcChtYXBCeSkpO1xuICAgICAgICAgICAgY2hhbmdlcyA9IGNoYW5nZXMuY29tcG9zZShuZXdNYXBwZWQpO1xuICAgICAgICAgICAgZWZmZWN0cyA9IFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoZWZmZWN0cywgbmV3TWFwcGVkKS5jb25jYXQoU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhhc0FycmF5KHJlc3VsdC5lZmZlY3RzKSwgbWFwQnkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMsIHNlbC5tYWluSW5kZXgpLFxuICAgICAgICAgICAgZWZmZWN0c1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBbY2hhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VTZXQpIGZyb20gdGhlIGdpdmVuIGNoYW5nZVxuICAgIGRlc2NyaXB0aW9uLCB0YWtpbmcgdGhlIHN0YXRlJ3MgZG9jdW1lbnQgbGVuZ3RoIGFuZCBsaW5lXG4gICAgc2VwYXJhdG9yIGludG8gYWNjb3VudC5cbiAgICAqL1xuICAgIGNoYW5nZXMoc3BlYyA9IFtdKSB7XG4gICAgICAgIGlmIChzcGVjIGluc3RhbmNlb2YgQ2hhbmdlU2V0KVxuICAgICAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgICAgIHJldHVybiBDaGFuZ2VTZXQub2Yoc3BlYywgdGhpcy5kb2MubGVuZ3RoLCB0aGlzLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXNpbmcgdGhlIHN0YXRlJ3MgW2xpbmVcbiAgICBzZXBhcmF0b3JdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVebGluZVNlcGFyYXRvciksIGNyZWF0ZSBhXG4gICAgW2BUZXh0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UZXh0KSBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgKi9cbiAgICB0b1RleHQoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBUZXh0Lm9mKHN0cmluZy5zcGxpdCh0aGlzLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpIHx8IERlZmF1bHRTcGxpdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIGdpdmVuIHJhbmdlIG9mIHRoZSBkb2N1bWVudCBhcyBhIHN0cmluZy5cbiAgICAqL1xuICAgIHNsaWNlRG9jKGZyb20gPSAwLCB0byA9IHRoaXMuZG9jLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8sIHRoaXMubGluZUJyZWFrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiBhIHN0YXRlIFtmYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5GYWNldCkuXG4gICAgKi9cbiAgICBmYWNldChmYWNldCkge1xuICAgICAgICBsZXQgYWRkciA9IHRoaXMuY29uZmlnLmFkZHJlc3NbZmFjZXQuaWRdO1xuICAgICAgICBpZiAoYWRkciA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhY2V0LmRlZmF1bHQ7XG4gICAgICAgIGVuc3VyZUFkZHIodGhpcywgYWRkcik7XG4gICAgICAgIHJldHVybiBnZXRBZGRyKHRoaXMsIGFkZHIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgc3RhdGUgdG8gYSBKU09OLXNlcmlhbGl6YWJsZSBvYmplY3QuIFdoZW4gY3VzdG9tXG4gICAgZmllbGRzIHNob3VsZCBiZSBzZXJpYWxpemVkLCB5b3UgY2FuIHBhc3MgdGhlbSBpbiBhcyBhbiBvYmplY3RcbiAgICBtYXBwaW5nIHByb3BlcnR5IG5hbWVzIChpbiB0aGUgcmVzdWx0aW5nIG9iamVjdCwgd2hpY2ggc2hvdWxkXG4gICAgbm90IHVzZSBgZG9jYCBvciBgc2VsZWN0aW9uYCkgdG8gZmllbGRzLlxuICAgICovXG4gICAgdG9KU09OKGZpZWxkcykge1xuICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZG9jOiB0aGlzLnNsaWNlRG9jKCksXG4gICAgICAgICAgICBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZHMpXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGZpZWxkc1twcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTdGF0ZUZpZWxkICYmIHRoaXMuY29uZmlnLmFkZHJlc3NbdmFsdWUuaWRdICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IHZhbHVlLnNwZWMudG9KU09OKHRoaXMuZmllbGQoZmllbGRzW3Byb3BdKSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgc3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gV2hlbiBjdXN0b21cbiAgICBmaWVsZHMgc2hvdWxkIGJlIGRlc2VyaWFsaXplZCwgcGFzcyB0aGUgc2FtZSBvYmplY3QgeW91IHBhc3NlZFxuICAgIHRvIFtgdG9KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS50b0pTT04pIHdoZW4gc2VyaWFsaXppbmcgYXNcbiAgICB0aGlyZCBhcmd1bWVudC5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uLCBjb25maWcgPSB7fSwgZmllbGRzKSB7XG4gICAgICAgIGlmICghanNvbiB8fCB0eXBlb2YganNvbi5kb2MgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBFZGl0b3JTdGF0ZVwiKTtcbiAgICAgICAgbGV0IGZpZWxkSW5pdCA9IFtdO1xuICAgICAgICBpZiAoZmllbGRzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZCA9IGZpZWxkc1twcm9wXSwgdmFsdWUgPSBqc29uW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEluaXQucHVzaChmaWVsZC5pbml0KHN0YXRlID0+IGZpZWxkLnNwZWMuZnJvbUpTT04odmFsdWUsIHN0YXRlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVkaXRvclN0YXRlLmNyZWF0ZSh7XG4gICAgICAgICAgICBkb2M6IGpzb24uZG9jLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uZnJvbUpTT04oanNvbi5zZWxlY3Rpb24pLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogY29uZmlnLmV4dGVuc2lvbnMgPyBmaWVsZEluaXQuY29uY2F0KFtjb25maWcuZXh0ZW5zaW9uc10pIDogZmllbGRJbml0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgc3RhdGUuIFlvdSdsbCB1c3VhbGx5IG9ubHkgbmVlZCB0aGlzIHdoZW5cbiAgICBpbml0aWFsaXppbmcgYW4gZWRpdG9y4oCUdXBkYXRlZCBzdGF0ZXMgYXJlIGNyZWF0ZWQgYnkgYXBwbHlpbmdcbiAgICB0cmFuc2FjdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIGxldCBjb25maWd1cmF0aW9uID0gQ29uZmlndXJhdGlvbi5yZXNvbHZlKGNvbmZpZy5leHRlbnNpb25zIHx8IFtdLCBuZXcgTWFwKTtcbiAgICAgICAgbGV0IGRvYyA9IGNvbmZpZy5kb2MgaW5zdGFuY2VvZiBUZXh0ID8gY29uZmlnLmRvY1xuICAgICAgICAgICAgOiBUZXh0Lm9mKChjb25maWcuZG9jIHx8IFwiXCIpLnNwbGl0KGNvbmZpZ3VyYXRpb24uc3RhdGljRmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikgfHwgRGVmYXVsdFNwbGl0KSk7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSAhY29uZmlnLnNlbGVjdGlvbiA/IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoMClcbiAgICAgICAgICAgIDogY29uZmlnLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEVkaXRvclNlbGVjdGlvbiA/IGNvbmZpZy5zZWxlY3Rpb25cbiAgICAgICAgICAgICAgICA6IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoY29uZmlnLnNlbGVjdGlvbi5hbmNob3IsIGNvbmZpZy5zZWxlY3Rpb24uaGVhZCk7XG4gICAgICAgIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jLmxlbmd0aCk7XG4gICAgICAgIGlmICghY29uZmlndXJhdGlvbi5zdGF0aWNGYWNldChhbGxvd011bHRpcGxlU2VsZWN0aW9ucykpXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3Rpb24uYXNTaW5nbGUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTdGF0ZShjb25maWd1cmF0aW9uLCBkb2MsIHNlbGVjdGlvbiwgY29uZmlndXJhdGlvbi5keW5hbWljU2xvdHMubWFwKCgpID0+IG51bGwpLCAoc3RhdGUsIHNsb3QpID0+IHNsb3QuY3JlYXRlKHN0YXRlKSwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzaXplIChpbiBjb2x1bW5zKSBvZiBhIHRhYiBpbiB0aGUgZG9jdW1lbnQsIGRldGVybWluZWQgYnlcbiAgICB0aGUgW2B0YWJTaXplYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50YWJTaXplKSBmYWNldC5cbiAgICAqL1xuICAgIGdldCB0YWJTaXplKCkgeyByZXR1cm4gdGhpcy5mYWNldChFZGl0b3JTdGF0ZS50YWJTaXplKTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcHJvcGVyIFtsaW5lLWJyZWFrXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmxpbmVTZXBhcmF0b3IpXG4gICAgc3RyaW5nIGZvciB0aGlzIHN0YXRlLlxuICAgICovXG4gICAgZ2V0IGxpbmVCcmVhaygpIHsgcmV0dXJuIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikgfHwgXCJcXG5cIjsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSBlZGl0b3IgaXNcbiAgICBbY29uZmlndXJlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5yZWFkT25seSkgdG8gYmUgcmVhZC1vbmx5LlxuICAgICovXG4gICAgZ2V0IHJlYWRPbmx5KCkgeyByZXR1cm4gdGhpcy5mYWNldChyZWFkT25seSk7IH1cbiAgICAvKipcbiAgICBMb29rIHVwIGEgdHJhbnNsYXRpb24gZm9yIHRoZSBnaXZlbiBwaHJhc2UgKHZpYSB0aGVcbiAgICBbYHBocmFzZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnBocmFzZXMpIGZhY2V0KSwgb3IgcmV0dXJuIHRoZVxuICAgIG9yaWdpbmFsIHN0cmluZyBpZiBubyB0cmFuc2xhdGlvbiBpcyBmb3VuZC5cbiAgICBcbiAgICBJZiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCB0aGV5IHdpbGwgYmUgaW5zZXJ0ZWQgaW5cbiAgICBwbGFjZSBvZiBtYXJrZXJzIGxpa2UgYCQxYCAoZm9yIHRoZSBmaXJzdCB2YWx1ZSkgYW5kIGAkMmAsIGV0Yy5cbiAgICBBIHNpbmdsZSBgJGAgaXMgZXF1aXZhbGVudCB0byBgJDFgLCBhbmQgYCQkYCB3aWxsIHByb2R1Y2UgYVxuICAgIGxpdGVyYWwgZG9sbGFyIHNpZ24uXG4gICAgKi9cbiAgICBwaHJhc2UocGhyYXNlLCAuLi5pbnNlcnQpIHtcbiAgICAgICAgZm9yIChsZXQgbWFwIG9mIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUucGhyYXNlcykpXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1hcCwgcGhyYXNlKSkge1xuICAgICAgICAgICAgICAgIHBocmFzZSA9IG1hcFtwaHJhc2VdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoaW5zZXJ0Lmxlbmd0aClcbiAgICAgICAgICAgIHBocmFzZSA9IHBocmFzZS5yZXBsYWNlKC9cXCQoXFwkfFxcZCopL2csIChtLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gXCIkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiRcIjtcbiAgICAgICAgICAgICAgICBsZXQgbiA9ICsoaSB8fCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIW4gfHwgbiA+IGluc2VydC5sZW5ndGggPyBtIDogaW5zZXJ0W24gLSAxXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGhyYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSB2YWx1ZXMgZm9yIGEgZ2l2ZW4gbGFuZ3VhZ2UgZGF0YSBmaWVsZCwgcHJvdmlkZWQgYnkgdGhlXG4gICAgdGhlIFtgbGFuZ3VhZ2VEYXRhYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5sYW5ndWFnZURhdGEpIGZhY2V0LlxuICAgIFxuICAgIEV4YW1wbGVzIG9mIGxhbmd1YWdlIGRhdGEgZmllbGRzIGFyZS4uLlxuICAgIFxuICAgIC0gW2BcImNvbW1lbnRUb2tlbnNcImBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuQ29tbWVudFRva2VucykgZm9yIHNwZWNpZnlpbmdcbiAgICAgIGNvbW1lbnQgc3ludGF4LlxuICAgIC0gW2BcImF1dG9jb21wbGV0ZVwiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuYXV0b2NvbXBsZXRpb25eY29uZmlnLm92ZXJyaWRlKVxuICAgICAgZm9yIHByb3ZpZGluZyBsYW5ndWFnZS1zcGVjaWZpYyBjb21wbGV0aW9uIHNvdXJjZXMuXG4gICAgLSBbYFwid29yZENoYXJzXCJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYXJDYXRlZ29yaXplcikgZm9yIGFkZGluZ1xuICAgICAgY2hhcmFjdGVycyB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHBhcnQgb2Ygd29yZHMgaW4gdGhpc1xuICAgICAgbGFuZ3VhZ2UuXG4gICAgLSBbYFwiY2xvc2VCcmFja2V0c1wiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ2xvc2VCcmFja2V0Q29uZmlnKSBjb250cm9sc1xuICAgICAgYnJhY2tldCBjbG9zaW5nIGJlaGF2aW9yLlxuICAgICovXG4gICAgbGFuZ3VhZ2VEYXRhQXQobmFtZSwgcG9zLCBzaWRlID0gLTEpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBwcm92aWRlciBvZiB0aGlzLmZhY2V0KGxhbmd1YWdlRGF0YSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJlc3VsdCBvZiBwcm92aWRlcih0aGlzLCBwb3MsIHNpZGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIG5hbWUpKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChyZXN1bHRbbmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgY2FuIGNhdGVnb3JpemUgc3RyaW5ncyAoZXhwZWN0ZWQgdG9cbiAgICByZXByZXNlbnQgYSBzaW5nbGUgW2dyYXBoZW1lIGNsdXN0ZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuZmluZENsdXN0ZXJCcmVhaykpXG4gICAgaW50byBvbmUgb2Y6XG4gICAgXG4gICAgIC0gV29yZCAoY29udGFpbnMgYW4gYWxwaGFudW1lcmljIGNoYXJhY3RlciBvciBhIGNoYXJhY3RlclxuICAgICAgIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBsb2NhbCBsYW5ndWFnZSdzIGBcIndvcmRDaGFyc1wiYFxuICAgICAgIGxhbmd1YWdlIGRhdGEsIHdoaWNoIHNob3VsZCBiZSBhIHN0cmluZylcbiAgICAgLSBTcGFjZSAoY29udGFpbnMgb25seSB3aGl0ZXNwYWNlKVxuICAgICAtIE90aGVyIChhbnl0aGluZyBlbHNlKVxuICAgICovXG4gICAgY2hhckNhdGVnb3JpemVyKGF0KSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2F0ZWdvcml6ZXIodGhpcy5sYW5ndWFnZURhdGFBdChcIndvcmRDaGFyc1wiLCBhdCkuam9pbihcIlwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIHdvcmQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLCBtZWFuaW5nIHRoZSByYW5nZVxuICAgIGNvbnRhaW5pbmcgYWxsIFt3b3JkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYXJDYXRlZ29yeS5Xb3JkKSBjaGFyYWN0ZXJzXG4gICAgYXJvdW5kIGl0LiBJZiBubyB3b3JkIGNoYXJhY3RlcnMgYXJlIGFkamFjZW50IHRvIHRoZSBwb3NpdGlvbixcbiAgICB0aGlzIHJldHVybnMgbnVsbC5cbiAgICAqL1xuICAgIHdvcmRBdChwb3MpIHtcbiAgICAgICAgbGV0IHsgdGV4dCwgZnJvbSwgbGVuZ3RoIH0gPSB0aGlzLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgbGV0IGNhdCA9IHRoaXMuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgICAgIGxldCBzdGFydCA9IHBvcyAtIGZyb20sIGVuZCA9IHBvcyAtIGZyb207XG4gICAgICAgIHdoaWxlIChzdGFydCA+IDApIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gZmluZENsdXN0ZXJCcmVhayh0ZXh0LCBzdGFydCwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKGNhdCh0ZXh0LnNsaWNlKHByZXYsIHN0YXJ0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzdGFydCA9IHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGVuZCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBmaW5kQ2x1c3RlckJyZWFrKHRleHQsIGVuZCk7XG4gICAgICAgICAgICBpZiAoY2F0KHRleHQuc2xpY2UoZW5kLCBuZXh0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBlbmQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFydCA9PSBlbmQgPyBudWxsIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHN0YXJ0ICsgZnJvbSwgZW5kICsgZnJvbSk7XG4gICAgfVxufVxuLyoqXG5BIGZhY2V0IHRoYXQsIHdoZW4gZW5hYmxlZCwgY2F1c2VzIHRoZSBlZGl0b3IgdG8gYWxsb3cgbXVsdGlwbGVcbnJhbmdlcyB0byBiZSBzZWxlY3RlZC4gQmUgY2FyZWZ1bCB0aG91Z2gsIGJlY2F1c2UgYnkgZGVmYXVsdCB0aGVcbmVkaXRvciByZWxpZXMgb24gdGhlIG5hdGl2ZSBET00gc2VsZWN0aW9uLCB3aGljaCBjYW5ub3QgaGFuZGxlXG5tdWx0aXBsZSBzZWxlY3Rpb25zLiBBbiBleHRlbnNpb24gbGlrZVxuW2BkcmF3U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pIGNhbiBiZSB1c2VkIHRvIG1ha2VcbnNlY29uZGFyeSBzZWxlY3Rpb25zIHZpc2libGUgdG8gdGhlIHVzZXIuXG4qL1xuRWRpdG9yU3RhdGUuYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMgPSBhbGxvd011bHRpcGxlU2VsZWN0aW9ucztcbi8qKlxuQ29uZmlndXJlcyB0aGUgdGFiIHNpemUgdG8gdXNlIGluIHRoaXMgc3RhdGUuIFRoZSBmaXJzdFxuKGhpZ2hlc3QtcHJlY2VkZW5jZSkgdmFsdWUgb2YgdGhlIGZhY2V0IGlzIHVzZWQuIElmIG5vIHZhbHVlIGlzXG5naXZlbiwgdGhpcyBkZWZhdWx0cyB0byA0LlxuKi9cbkVkaXRvclN0YXRlLnRhYlNpemUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IDRcbn0pO1xuLyoqXG5UaGUgbGluZSBzZXBhcmF0b3IgdG8gdXNlLiBCeSBkZWZhdWx0LCBhbnkgb2YgYFwiXFxuXCJgLCBgXCJcXHJcXG5cImBcbmFuZCBgXCJcXHJcImAgaXMgdHJlYXRlZCBhcyBhIHNlcGFyYXRvciB3aGVuIHNwbGl0dGluZyBsaW5lcywgYW5kXG5saW5lcyBhcmUgam9pbmVkIHdpdGggYFwiXFxuXCJgLlxuXG5XaGVuIHlvdSBjb25maWd1cmUgYSB2YWx1ZSBoZXJlLCBvbmx5IHRoYXQgcHJlY2lzZSBzZXBhcmF0b3JcbndpbGwgYmUgdXNlZCwgYWxsb3dpbmcgeW91IHRvIHJvdW5kLXRyaXAgZG9jdW1lbnRzIHRocm91Z2ggdGhlXG5lZGl0b3Igd2l0aG91dCBub3JtYWxpemluZyBsaW5lIHNlcGFyYXRvcnMuXG4qL1xuRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvciA9IGxpbmVTZXBhcmF0b3I7XG4vKipcblRoaXMgZmFjZXQgY29udHJvbHMgdGhlIHZhbHVlIG9mIHRoZVxuW2ByZWFkT25seWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUucmVhZE9ubHkpIGdldHRlciwgd2hpY2ggaXNcbmNvbnN1bHRlZCBieSBjb21tYW5kcyBhbmQgZXh0ZW5zaW9ucyB0aGF0IGltcGxlbWVudCBlZGl0aW5nXG5mdW5jdGlvbmFsaXR5IHRvIGRldGVybWluZSB3aGV0aGVyIHRoZXkgc2hvdWxkIGFwcGx5LiBJdFxuZGVmYXVsdHMgdG8gZmFsc2UsIGJ1dCB3aGVuIGl0cyBoaWdoZXN0LXByZWNlZGVuY2UgdmFsdWUgaXNcbmB0cnVlYCwgc3VjaCBmdW5jdGlvbmFsaXR5IGRpc2FibGVzIGl0c2VsZi5cblxuTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGhcbltgRWRpdG9yVmlldy5lZGl0YWJsZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmVkaXRhYmxlKSwgd2hpY2hcbmNvbnRyb2xzIHdoZXRoZXIgdGhlIGVkaXRvcidzIERPTSBpcyBzZXQgdG8gYmUgZWRpdGFibGUgKGFuZFxudGh1cyBmb2N1c2FibGUpLlxuKi9cbkVkaXRvclN0YXRlLnJlYWRPbmx5ID0gcmVhZE9ubHk7XG4vKipcblJlZ2lzdGVycyB0cmFuc2xhdGlvbiBwaHJhc2VzLiBUaGVcbltgcGhyYXNlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5waHJhc2UpIG1ldGhvZCB3aWxsIGxvb2sgdGhyb3VnaFxuYWxsIG9iamVjdHMgcmVnaXN0ZXJlZCB3aXRoIHRoaXMgZmFjZXQgdG8gZmluZCB0cmFuc2xhdGlvbnMgZm9yXG5pdHMgYXJndW1lbnQuXG4qL1xuRWRpdG9yU3RhdGUucGhyYXNlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbXBhcmUoYSwgYikge1xuICAgICAgICBsZXQga0EgPSBPYmplY3Qua2V5cyhhKSwga0IgPSBPYmplY3Qua2V5cyhiKTtcbiAgICAgICAgcmV0dXJuIGtBLmxlbmd0aCA9PSBrQi5sZW5ndGggJiYga0EuZXZlcnkoayA9PiBhW2tdID09IGJba10pO1xuICAgIH1cbn0pO1xuLyoqXG5BIGZhY2V0IHVzZWQgdG8gcmVnaXN0ZXIgW2xhbmd1YWdlXG5kYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KSBwcm92aWRlcnMuXG4qL1xuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhID0gbGFuZ3VhZ2VEYXRhO1xuLyoqXG5GYWNldCB1c2VkIHRvIHJlZ2lzdGVyIGNoYW5nZSBmaWx0ZXJzLCB3aGljaCBhcmUgY2FsbGVkIGZvciBlYWNoXG50cmFuc2FjdGlvbiAodW5sZXNzIGV4cGxpY2l0bHlcbltkaXNhYmxlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZmlsdGVyKSksIGFuZCBjYW4gc3VwcHJlc3NcbnBhcnQgb2YgdGhlIHRyYW5zYWN0aW9uJ3MgY2hhbmdlcy5cblxuU3VjaCBhIGZ1bmN0aW9uIGNhbiByZXR1cm4gYHRydWVgIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndFxud2FudCB0byBkbyBhbnl0aGluZywgYGZhbHNlYCB0byBjb21wbGV0ZWx5IHN0b3AgdGhlIGNoYW5nZXMgaW5cbnRoZSB0cmFuc2FjdGlvbiwgb3IgYSBzZXQgb2YgcmFuZ2VzIGluIHdoaWNoIGNoYW5nZXMgc2hvdWxkIGJlXG5zdXBwcmVzc2VkLiBTdWNoIHJhbmdlcyBhcmUgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2YgbnVtYmVycyxcbndpdGggZWFjaCBwYWlyIG9mIHR3byBudW1iZXJzIGluZGljYXRpbmcgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgYVxucmFuZ2UuIFNvIGZvciBleGFtcGxlIGBbMTAsIDIwLCAxMDAsIDExMF1gIHN1cHByZXNzZXMgY2hhbmdlc1xuYmV0d2VlbiAxMCBhbmQgMjAsIGFuZCBiZXR3ZWVuIDEwMCBhbmQgMTEwLlxuKi9cbkVkaXRvclN0YXRlLmNoYW5nZUZpbHRlciA9IGNoYW5nZUZpbHRlcjtcbi8qKlxuRmFjZXQgdXNlZCB0byByZWdpc3RlciBhIGhvb2sgdGhhdCBnZXRzIGEgY2hhbmNlIHRvIHVwZGF0ZSBvclxucmVwbGFjZSB0cmFuc2FjdGlvbiBzcGVjcyBiZWZvcmUgdGhleSBhcmUgYXBwbGllZC4gVGhpcyB3aWxsXG5vbmx5IGJlIGFwcGxpZWQgZm9yIHRyYW5zYWN0aW9ucyB0aGF0IGRvbid0IGhhdmVcbltgZmlsdGVyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZmlsdGVyKSBzZXQgdG8gYGZhbHNlYC4gWW91XG5jYW4gZWl0aGVyIHJldHVybiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBzcGVjIChwb3NzaWJseSB0aGUgaW5wdXRcbnRyYW5zYWN0aW9uKSwgb3IgYW4gYXJyYXkgb2Ygc3BlY3MgKHdoaWNoIHdpbGwgYmUgY29tYmluZWQgaW5cbnRoZSBzYW1lIHdheSBhcyB0aGUgYXJndW1lbnRzIHRvXG5bYEVkaXRvclN0YXRlLnVwZGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKSkuXG5cbldoZW4gcG9zc2libGUsIGl0IGlzIHJlY29tbWVuZGVkIHRvIGF2b2lkIGFjY2Vzc2luZ1xuW2BUcmFuc2FjdGlvbi5zdGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc3RhdGUpIGluIGEgZmlsdGVyLFxuc2luY2UgaXQgd2lsbCBmb3JjZSBjcmVhdGlvbiBvZiBhIHN0YXRlIHRoYXQgd2lsbCB0aGVuIGJlXG5kaXNjYXJkZWQgYWdhaW4sIGlmIHRoZSB0cmFuc2FjdGlvbiBpcyBhY3R1YWxseSBmaWx0ZXJlZC5cblxuKFRoaXMgZnVuY3Rpb25hbGl0eSBzaG91bGQgYmUgdXNlZCB3aXRoIGNhcmUuIEluZGlzY3JpbWluYXRlbHlcbm1vZGlmeWluZyB0cmFuc2FjdGlvbiBpcyBsaWtlbHkgdG8gYnJlYWsgc29tZXRoaW5nIG9yIGRlZ3JhZGVcbnRoZSB1c2VyIGV4cGVyaWVuY2UuKVxuKi9cbkVkaXRvclN0YXRlLnRyYW5zYWN0aW9uRmlsdGVyID0gdHJhbnNhY3Rpb25GaWx0ZXI7XG4vKipcblRoaXMgaXMgYSBtb3JlIGxpbWl0ZWQgZm9ybSBvZlxuW2B0cmFuc2FjdGlvbkZpbHRlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedHJhbnNhY3Rpb25GaWx0ZXIpLFxud2hpY2ggY2FuIG9ubHkgYWRkXG5bYW5ub3RhdGlvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmFubm90YXRpb25zKSBhbmRcbltlZmZlY3RzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKS4gX0J1dF8sIHRoaXMgdHlwZVxub2YgZmlsdGVyIHJ1bnMgZXZlbiBpZiB0aGUgdHJhbnNhY3Rpb24gaGFzIGRpc2FibGVkIHJlZ3VsYXJcbltmaWx0ZXJpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmZpbHRlciksIG1ha2luZyBpdCBzdWl0YWJsZVxuZm9yIGVmZmVjdHMgdGhhdCBkb24ndCBuZWVkIHRvIHRvdWNoIHRoZSBjaGFuZ2VzIG9yIHNlbGVjdGlvbixcbmJ1dCBkbyB3YW50IHRvIHByb2Nlc3MgZXZlcnkgdHJhbnNhY3Rpb24uXG5cbkV4dGVuZGVycyBydW4gX2FmdGVyXyBmaWx0ZXJzLCB3aGVuIGJvdGggYXJlIHByZXNlbnQuXG4qL1xuRWRpdG9yU3RhdGUudHJhbnNhY3Rpb25FeHRlbmRlciA9IHRyYW5zYWN0aW9uRXh0ZW5kZXI7XG5Db21wYXJ0bWVudC5yZWNvbmZpZ3VyZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcblxuLyoqXG5VdGlsaXR5IGZ1bmN0aW9uIGZvciBjb21iaW5pbmcgYmVoYXZpb3JzIHRvIGZpbGwgaW4gYSBjb25maWdcbm9iamVjdCBmcm9tIGFuIGFycmF5IG9mIHByb3ZpZGVkIGNvbmZpZ3MuIGBkZWZhdWx0c2Agc2hvdWxkIGhvbGRcbmRlZmF1bHQgdmFsdWVzIGZvciBhbGwgb3B0aW9uYWwgZmllbGRzIGluIGBDb25maWdgLlxuXG5UaGUgZnVuY3Rpb24gd2lsbCwgYnkgZGVmYXVsdCwgZXJyb3JcbndoZW4gYSBmaWVsZCBnZXRzIHR3byB2YWx1ZXMgdGhhdCBhcmVuJ3QgYD09PWAtZXF1YWwsIGJ1dCB5b3UgY2FuXG5wcm92aWRlIGNvbWJpbmUgZnVuY3Rpb25zIHBlciBmaWVsZCB0byBkbyBzb21ldGhpbmcgZWxzZS5cbiovXG5mdW5jdGlvbiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIGRlZmF1bHRzLCAvLyBTaG91bGQgaG9sZCBvbmx5IHRoZSBvcHRpb25hbCBwcm9wZXJ0aWVzIG9mIENvbmZpZywgYnV0IEkgaGF2ZW4ndCBtYW5hZ2VkIHRvIGV4cHJlc3MgdGhhdFxuY29tYmluZSA9IHt9KSB7XG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAobGV0IGNvbmZpZyBvZiBjb25maWdzKVxuICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoY29uZmlnKSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gY29uZmlnW2tleV0sIGN1cnJlbnQgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnQgPT09IHZhbHVlIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIDsgLy8gTm8gY29uZmxpY3RcbiAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbWJpbmUsIGtleSkpXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjb21iaW5lW2tleV0oY3VycmVudCwgdmFsdWUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZyBtZXJnZSBjb25mbGljdCBmb3IgZmllbGQgXCIgKyBrZXkpO1xuICAgICAgICB9XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKVxuICAgICAgICBpZiAocmVzdWx0W2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbkVhY2ggcmFuZ2UgaXMgYXNzb2NpYXRlZCB3aXRoIGEgdmFsdWUsIHdoaWNoIG11c3QgaW5oZXJpdCBmcm9tXG50aGlzIGNsYXNzLlxuKi9cbmNsYXNzIFJhbmdlVmFsdWUge1xuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyB2YWx1ZSB3aXRoIGFub3RoZXIgdmFsdWUuIFVzZWQgd2hlbiBjb21wYXJpbmdcbiAgICByYW5nZXNldHMuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNvbXBhcmVzIGJ5IGlkZW50aXR5LlxuICAgIFVubGVzcyB5b3UgYXJlIG9ubHkgY3JlYXRpbmcgYSBmaXhlZCBudW1iZXIgb2YgdW5pcXVlIGluc3RhbmNlc1xuICAgIG9mIHlvdXIgdmFsdWUgdHlwZSwgaXQgaXMgYSBnb29kIGlkZWEgdG8gaW1wbGVtZW50IHRoaXNcbiAgICBwcm9wZXJseS5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzID09IG90aGVyOyB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3JhbmdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSB3aXRoIHRoaXMgdmFsdWUuXG4gICAgKi9cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHsgcmV0dXJuIFJhbmdlLmNyZWF0ZShmcm9tLCB0bywgdGhpcyk7IH1cbn1cblJhbmdlVmFsdWUucHJvdG90eXBlLnN0YXJ0U2lkZSA9IFJhbmdlVmFsdWUucHJvdG90eXBlLmVuZFNpZGUgPSAwO1xuUmFuZ2VWYWx1ZS5wcm90b3R5cGUucG9pbnQgPSBmYWxzZTtcblJhbmdlVmFsdWUucHJvdG90eXBlLm1hcE1vZGUgPSBNYXBNb2RlLlRyYWNrRGVsO1xuLyoqXG5BIHJhbmdlIGFzc29jaWF0ZXMgYSB2YWx1ZSB3aXRoIGEgcmFuZ2Ugb2YgcG9zaXRpb25zLlxuKi9cbmNsYXNzIFJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcmFuZ2UncyBzdGFydCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIEl0cyBlbmQgcG9zaXRpb24uXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJhbmdlLlxuICAgICovXG4gICAgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShmcm9tLCB0bywgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShmcm9tLCB0bywgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNtcFJhbmdlKGEsIGIpIHtcbiAgICByZXR1cm4gYS5mcm9tIC0gYi5mcm9tIHx8IGEudmFsdWUuc3RhcnRTaWRlIC0gYi52YWx1ZS5zdGFydFNpZGU7XG59XG5jbGFzcyBDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8sIHZhbHVlLCBcbiAgICAvLyBDaHVua3MgYXJlIG1hcmtlZCB3aXRoIHRoZSBsYXJnZXN0IHBvaW50IHRoYXQgb2NjdXJzXG4gICAgLy8gaW4gdGhlbSAob3IgLTEgZm9yIG5vIHBvaW50cyksIHNvIHRoYXQgc2NhbnMgdGhhdCBhcmVcbiAgICAvLyBvbmx5IGludGVyZXN0ZWQgaW4gcG9pbnRzIChzdWNoIGFzIHRoZVxuICAgIC8vIGhlaWdodG1hcC1yZWxhdGVkIGxvZ2ljKSBjYW4gc2tpcCByYW5nZS1vbmx5IGNodW5rcy5cbiAgICBtYXhQb2ludCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IG1heFBvaW50O1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy50b1t0aGlzLnRvLmxlbmd0aCAtIDFdOyB9XG4gICAgLy8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIHBvc2l0aW9uIGFuZCBzaWRlLiBVc2UgdGhlIHJhbmdlcydcbiAgICAvLyBgZnJvbWAgcG9zIHdoZW4gYGVuZCA9PSBmYWxzZWAsIGB0b2Agd2hlbiBgZW5kID09IHRydWVgLlxuICAgIGZpbmRJbmRleChwb3MsIHNpZGUsIGVuZCwgc3RhcnRBdCA9IDApIHtcbiAgICAgICAgbGV0IGFyciA9IGVuZCA/IHRoaXMudG8gOiB0aGlzLmZyb207XG4gICAgICAgIGZvciAobGV0IGxvID0gc3RhcnRBdCwgaGkgPSBhcnIubGVuZ3RoOzspIHtcbiAgICAgICAgICAgIGlmIChsbyA9PSBoaSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbG87XG4gICAgICAgICAgICBsZXQgbWlkID0gKGxvICsgaGkpID4+IDE7XG4gICAgICAgICAgICBsZXQgZGlmZiA9IGFyclttaWRdIC0gcG9zIHx8IChlbmQgPyB0aGlzLnZhbHVlW21pZF0uZW5kU2lkZSA6IHRoaXMudmFsdWVbbWlkXS5zdGFydFNpZGUpIC0gc2lkZTtcbiAgICAgICAgICAgIGlmIChtaWQgPT0gbG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpZmYgPj0gMCA/IGxvIDogaGk7XG4gICAgICAgICAgICBpZiAoZGlmZiA+PSAwKVxuICAgICAgICAgICAgICAgIGhpID0gbWlkO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGxvID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZXR3ZWVuKG9mZnNldCwgZnJvbSwgdG8sIGYpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZmluZEluZGV4KGZyb20sIC0xMDAwMDAwMDAwIC8qIEMuRmFyICovLCB0cnVlKSwgZSA9IHRoaXMuZmluZEluZGV4KHRvLCAxMDAwMDAwMDAwIC8qIEMuRmFyICovLCBmYWxzZSwgaSk7IGkgPCBlOyBpKyspXG4gICAgICAgICAgICBpZiAoZih0aGlzLmZyb21baV0gKyBvZmZzZXQsIHRoaXMudG9baV0gKyBvZmZzZXQsIHRoaXMudmFsdWVbaV0pID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG1hcChvZmZzZXQsIGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gW10sIGZyb20gPSBbXSwgdG8gPSBbXSwgbmV3UG9zID0gLTEsIG1heFBvaW50ID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZhbCA9IHRoaXMudmFsdWVbaV0sIGN1ckZyb20gPSB0aGlzLmZyb21baV0gKyBvZmZzZXQsIGN1clRvID0gdGhpcy50b1tpXSArIG9mZnNldCwgbmV3RnJvbSwgbmV3VG87XG4gICAgICAgICAgICBpZiAoY3VyRnJvbSA9PSBjdXJUbykge1xuICAgICAgICAgICAgICAgIGxldCBtYXBwZWQgPSBjaGFuZ2VzLm1hcFBvcyhjdXJGcm9tLCB2YWwuc3RhcnRTaWRlLCB2YWwubWFwTW9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZCA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBuZXdGcm9tID0gbmV3VG8gPSBtYXBwZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHZhbC5zdGFydFNpZGUgIT0gdmFsLmVuZFNpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VG8gPSBjaGFuZ2VzLm1hcFBvcyhjdXJGcm9tLCB2YWwuZW5kU2lkZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUbyA8IG5ld0Zyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdGcm9tID0gY2hhbmdlcy5tYXBQb3MoY3VyRnJvbSwgdmFsLnN0YXJ0U2lkZSk7XG4gICAgICAgICAgICAgICAgbmV3VG8gPSBjaGFuZ2VzLm1hcFBvcyhjdXJUbywgdmFsLmVuZFNpZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdGcm9tID4gbmV3VG8gfHwgbmV3RnJvbSA9PSBuZXdUbyAmJiB2YWwuc3RhcnRTaWRlID4gMCAmJiB2YWwuZW5kU2lkZSA8PSAwKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgobmV3VG8gLSBuZXdGcm9tIHx8IHZhbC5lbmRTaWRlIC0gdmFsLnN0YXJ0U2lkZSkgPCAwKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKG5ld1BvcyA8IDApXG4gICAgICAgICAgICAgICAgbmV3UG9zID0gbmV3RnJvbTtcbiAgICAgICAgICAgIGlmICh2YWwucG9pbnQpXG4gICAgICAgICAgICAgICAgbWF4UG9pbnQgPSBNYXRoLm1heChtYXhQb2ludCwgbmV3VG8gLSBuZXdGcm9tKTtcbiAgICAgICAgICAgIHZhbHVlLnB1c2godmFsKTtcbiAgICAgICAgICAgIGZyb20ucHVzaChuZXdGcm9tIC0gbmV3UG9zKTtcbiAgICAgICAgICAgIHRvLnB1c2gobmV3VG8gLSBuZXdQb3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG1hcHBlZDogdmFsdWUubGVuZ3RoID8gbmV3IENodW5rKGZyb20sIHRvLCB2YWx1ZSwgbWF4UG9pbnQpIDogbnVsbCwgcG9zOiBuZXdQb3MgfTtcbiAgICB9XG59XG4vKipcbkEgcmFuZ2Ugc2V0IHN0b3JlcyBhIGNvbGxlY3Rpb24gb2YgW3Jhbmdlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZSkgaW4gYVxud2F5IHRoYXQgbWFrZXMgdGhlbSBlZmZpY2llbnQgdG8gW21hcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldC5tYXApIGFuZFxuW3VwZGF0ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldC51cGRhdGUpLiBUaGlzIGlzIGFuIGltbXV0YWJsZSBkYXRhXG5zdHJ1Y3R1cmUuXG4qL1xuY2xhc3MgUmFuZ2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmtQb3MsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmssIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbmV4dExheWVyLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1heFBvaW50KSB7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MgPSBjaHVua1BvcztcbiAgICAgICAgdGhpcy5jaHVuayA9IGNodW5rO1xuICAgICAgICB0aGlzLm5leHRMYXllciA9IG5leHRMYXllcjtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IG1heFBvaW50O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY2h1bmtQb3MsIGNodW5rLCBuZXh0TGF5ZXIsIG1heFBvaW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2VTZXQoY2h1bmtQb3MsIGNodW5rLCBuZXh0TGF5ZXIsIG1heFBvaW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuY2h1bmsubGVuZ3RoIC0gMTtcbiAgICAgICAgcmV0dXJuIGxhc3QgPCAwID8gMCA6IE1hdGgubWF4KHRoaXMuY2h1bmtFbmQobGFzdCksIHRoaXMubmV4dExheWVyLmxlbmd0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBudW1iZXIgb2YgcmFuZ2VzIGluIHRoZSBzZXQuXG4gICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgc2l6ZSA9IHRoaXMubmV4dExheWVyLnNpemU7XG4gICAgICAgIGZvciAobGV0IGNodW5rIG9mIHRoaXMuY2h1bmspXG4gICAgICAgICAgICBzaXplICs9IGNodW5rLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2h1bmtFbmQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmtQb3NbaW5kZXhdICsgdGhpcy5jaHVua1tpbmRleF0ubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHJhbmdlIHNldCwgb3B0aW9uYWxseSBhZGRpbmcgbmV3IHJhbmdlcyBvciBmaWx0ZXJpbmdcbiAgICBvdXQgZXhpc3Rpbmcgb25lcy5cbiAgICBcbiAgICAoTm90ZTogVGhlIHR5cGUgcGFyYW1ldGVyIGlzIGp1c3QgdGhlcmUgYXMgYSBrbHVkZ2UgdG8gd29ya1xuICAgIGFyb3VuZCBUeXBlU2NyaXB0IHZhcmlhbmNlIGlzc3VlcyB0aGF0IHByZXZlbnRlZCBgUmFuZ2VTZXQ8WD5gXG4gICAgZnJvbSBiZWluZyBhIHN1YnR5cGUgb2YgYFJhbmdlU2V0PFk+YCB3aGVuIGBYYCBpcyBhIHN1YnR5cGUgb2ZcbiAgICBgWWAuKVxuICAgICovXG4gICAgdXBkYXRlKHVwZGF0ZVNwZWMpIHtcbiAgICAgICAgbGV0IHsgYWRkID0gW10sIHNvcnQgPSBmYWxzZSwgZmlsdGVyRnJvbSA9IDAsIGZpbHRlclRvID0gdGhpcy5sZW5ndGggfSA9IHVwZGF0ZVNwZWM7XG4gICAgICAgIGxldCBmaWx0ZXIgPSB1cGRhdGVTcGVjLmZpbHRlcjtcbiAgICAgICAgaWYgKGFkZC5sZW5ndGggPT0gMCAmJiAhZmlsdGVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGlmIChzb3J0KVxuICAgICAgICAgICAgYWRkID0gYWRkLnNsaWNlKCkuc29ydChjbXBSYW5nZSk7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gYWRkLmxlbmd0aCA/IFJhbmdlU2V0Lm9mKGFkZCkgOiB0aGlzO1xuICAgICAgICBsZXQgY3VyID0gbmV3IExheWVyQ3Vyc29yKHRoaXMsIG51bGwsIC0xKS5nb3RvKDApLCBpID0gMCwgc3BpbGwgPSBbXTtcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgIHdoaWxlIChjdXIudmFsdWUgfHwgaSA8IGFkZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpIDwgYWRkLmxlbmd0aCAmJiAoY3VyLmZyb20gLSBhZGRbaV0uZnJvbSB8fCBjdXIuc3RhcnRTaWRlIC0gYWRkW2ldLnZhbHVlLnN0YXJ0U2lkZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGFkZFtpKytdO1xuICAgICAgICAgICAgICAgIGlmICghYnVpbGRlci5hZGRJbm5lcihyYW5nZS5mcm9tLCByYW5nZS50bywgcmFuZ2UudmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICBzcGlsbC5wdXNoKHJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1ci5yYW5nZUluZGV4ID09IDEgJiYgY3VyLmNodW5rSW5kZXggPCB0aGlzLmNodW5rLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIChpID09IGFkZC5sZW5ndGggfHwgdGhpcy5jaHVua0VuZChjdXIuY2h1bmtJbmRleCkgPCBhZGRbaV0uZnJvbSkgJiZcbiAgICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXJGcm9tID4gdGhpcy5jaHVua0VuZChjdXIuY2h1bmtJbmRleCkgfHwgZmlsdGVyVG8gPCB0aGlzLmNodW5rUG9zW2N1ci5jaHVua0luZGV4XSkgJiZcbiAgICAgICAgICAgICAgICBidWlsZGVyLmFkZENodW5rKHRoaXMuY2h1bmtQb3NbY3VyLmNodW5rSW5kZXhdLCB0aGlzLmNodW5rW2N1ci5jaHVua0luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICBjdXIubmV4dENodW5rKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbHRlciB8fCBmaWx0ZXJGcm9tID4gY3VyLnRvIHx8IGZpbHRlclRvIDwgY3VyLmZyb20gfHwgZmlsdGVyKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFidWlsZGVyLmFkZElubmVyKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGlsbC5wdXNoKFJhbmdlLmNyZWF0ZShjdXIuZnJvbSwgY3VyLnRvLCBjdXIudmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2hJbm5lcih0aGlzLm5leHRMYXllci5pc0VtcHR5ICYmICFzcGlsbC5sZW5ndGggPyBSYW5nZVNldC5lbXB0eVxuICAgICAgICAgICAgOiB0aGlzLm5leHRMYXllci51cGRhdGUoeyBhZGQ6IHNwaWxsLCBmaWx0ZXIsIGZpbHRlckZyb20sIGZpbHRlclRvIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIHRoaXMgcmFuZ2Ugc2V0IHRocm91Z2ggYSBzZXQgb2YgY2hhbmdlcywgcmV0dXJuIHRoZSBuZXcgc2V0LlxuICAgICovXG4gICAgbWFwKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuZW1wdHkgfHwgdGhpcy5pc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCBjaHVua3MgPSBbXSwgY2h1bmtQb3MgPSBbXSwgbWF4UG9pbnQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNodW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmNodW5rUG9zW2ldLCBjaHVuayA9IHRoaXMuY2h1bmtbaV07XG4gICAgICAgICAgICBsZXQgdG91Y2ggPSBjaGFuZ2VzLnRvdWNoZXNSYW5nZShzdGFydCwgc3RhcnQgKyBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHRvdWNoID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIG1heFBvaW50ID0gTWF0aC5tYXgobWF4UG9pbnQsIGNodW5rLm1heFBvaW50KTtcbiAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgY2h1bmtQb3MucHVzaChjaGFuZ2VzLm1hcFBvcyhzdGFydCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG91Y2ggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBtYXBwZWQsIHBvcyB9ID0gY2h1bmsubWFwKHN0YXJ0LCBjaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFBvaW50ID0gTWF0aC5tYXgobWF4UG9pbnQsIG1hcHBlZC5tYXhQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKG1hcHBlZCk7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rUG9zLnB1c2gocG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSB0aGlzLm5leHRMYXllci5tYXAoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiBjaHVua3MubGVuZ3RoID09IDAgPyBuZXh0IDogbmV3IFJhbmdlU2V0KGNodW5rUG9zLCBjaHVua3MsIG5leHQgfHwgUmFuZ2VTZXQuZW1wdHksIG1heFBvaW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgdGhhdCB0b3VjaCB0aGUgcmVnaW9uIGBmcm9tYCB0byBgdG9gLFxuICAgIGNhbGxpbmcgYGZgIGZvciBlYWNoLiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgcmFuZ2VzIHdpbGxcbiAgICBiZSByZXBvcnRlZCBpbiBhbnkgc3BlY2lmaWMgb3JkZXIuIFdoZW4gdGhlIGNhbGxiYWNrIHJldHVybnNcbiAgICBgZmFsc2VgLCBpdGVyYXRpb24gc3RvcHMuXG4gICAgKi9cbiAgICBiZXR3ZWVuKGZyb20sIHRvLCBmKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVuay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5jaHVua1Bvc1tpXSwgY2h1bmsgPSB0aGlzLmNodW5rW2ldO1xuICAgICAgICAgICAgaWYgKHRvID49IHN0YXJ0ICYmIGZyb20gPD0gc3RhcnQgKyBjaHVuay5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBjaHVuay5iZXR3ZWVuKHN0YXJ0LCBmcm9tIC0gc3RhcnQsIHRvIC0gc3RhcnQsIGYpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0TGF5ZXIuYmV0d2Vlbihmcm9tLCB0bywgZik7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2VzIGluIHRoaXMgc2V0LCBpbiBvcmRlciwgaW5jbHVkaW5nIGFsbFxuICAgIHJhbmdlcyB0aGF0IGVuZCBhdCBvciBhZnRlciBgZnJvbWAuXG4gICAgKi9cbiAgICBpdGVyKGZyb20gPSAwKSB7XG4gICAgICAgIHJldHVybiBIZWFwQ3Vyc29yLmZyb20oW3RoaXNdKS5nb3RvKGZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBpc0VtcHR5KCkgeyByZXR1cm4gdGhpcy5uZXh0TGF5ZXIgPT0gdGhpczsgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2VzIGluIGEgY29sbGVjdGlvbiBvZiBzZXRzLCBpbiBvcmRlcixcbiAgICBzdGFydGluZyBmcm9tIGBmcm9tYC5cbiAgICAqL1xuICAgIHN0YXRpYyBpdGVyKHNldHMsIGZyb20gPSAwKSB7XG4gICAgICAgIHJldHVybiBIZWFwQ3Vyc29yLmZyb20oc2V0cykuZ290byhmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHR3byBncm91cHMgb2Ygc2V0cywgY2FsbGluZyBtZXRob2RzIG9uIGBjb21wYXJhdG9yYFxuICAgIHRvIG5vdGlmeSBpdCBvZiBwb3NzaWJsZSBkaWZmZXJlbmNlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBjb21wYXJlKG9sZFNldHMsIG5ld1NldHMsIFxuICAgIC8qKlxuICAgIFRoaXMgaW5kaWNhdGVzIGhvdyB0aGUgdW5kZXJseWluZyBkYXRhIGNoYW5nZWQgYmV0d2VlbiB0aGVzZVxuICAgIHJhbmdlcywgYW5kIGlzIG5lZWRlZCB0byBzeW5jaHJvbml6ZSB0aGUgaXRlcmF0aW9uLlxuICAgICovXG4gICAgdGV4dERpZmYsIGNvbXBhcmF0b3IsIFxuICAgIC8qKlxuICAgIENhbiBiZSB1c2VkIHRvIGlnbm9yZSBhbGwgbm9uLXBvaW50IHJhbmdlcywgYW5kIHBvaW50cyBiZWxvd1xuICAgIHRoZSBnaXZlbiBzaXplLiBXaGVuIC0xLCBhbGwgcmFuZ2VzIGFyZSBjb21wYXJlZC5cbiAgICAqL1xuICAgIG1pblBvaW50U2l6ZSA9IC0xKSB7XG4gICAgICAgIGxldCBhID0gb2xkU2V0cy5maWx0ZXIoc2V0ID0+IHNldC5tYXhQb2ludCA+IDAgfHwgIXNldC5pc0VtcHR5ICYmIHNldC5tYXhQb2ludCA+PSBtaW5Qb2ludFNpemUpO1xuICAgICAgICBsZXQgYiA9IG5ld1NldHMuZmlsdGVyKHNldCA9PiBzZXQubWF4UG9pbnQgPiAwIHx8ICFzZXQuaXNFbXB0eSAmJiBzZXQubWF4UG9pbnQgPj0gbWluUG9pbnRTaXplKTtcbiAgICAgICAgbGV0IHNoYXJlZENodW5rcyA9IGZpbmRTaGFyZWRDaHVua3MoYSwgYiwgdGV4dERpZmYpO1xuICAgICAgICBsZXQgc2lkZUEgPSBuZXcgU3BhbkN1cnNvcihhLCBzaGFyZWRDaHVua3MsIG1pblBvaW50U2l6ZSk7XG4gICAgICAgIGxldCBzaWRlQiA9IG5ldyBTcGFuQ3Vyc29yKGIsIHNoYXJlZENodW5rcywgbWluUG9pbnRTaXplKTtcbiAgICAgICAgdGV4dERpZmYuaXRlckdhcHMoKGZyb21BLCBmcm9tQiwgbGVuZ3RoKSA9PiBjb21wYXJlKHNpZGVBLCBmcm9tQSwgc2lkZUIsIGZyb21CLCBsZW5ndGgsIGNvbXBhcmF0b3IpKTtcbiAgICAgICAgaWYgKHRleHREaWZmLmVtcHR5ICYmIHRleHREaWZmLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgY29tcGFyZShzaWRlQSwgMCwgc2lkZUIsIDAsIDAsIGNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoZSBjb250ZW50cyBvZiB0d28gZ3JvdXBzIG9mIHJhbmdlIHNldHMsIHJldHVybmluZyB0cnVlXG4gICAgaWYgdGhleSBhcmUgZXF1aXZhbGVudCBpbiB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZXEob2xkU2V0cywgbmV3U2V0cywgZnJvbSA9IDAsIHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgdG8gPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovIC0gMTtcbiAgICAgICAgbGV0IGEgPSBvbGRTZXRzLmZpbHRlcihzZXQgPT4gIXNldC5pc0VtcHR5ICYmIG5ld1NldHMuaW5kZXhPZihzZXQpIDwgMCk7XG4gICAgICAgIGxldCBiID0gbmV3U2V0cy5maWx0ZXIoc2V0ID0+ICFzZXQuaXNFbXB0eSAmJiBvbGRTZXRzLmluZGV4T2Yoc2V0KSA8IDApO1xuICAgICAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghYS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IHNoYXJlZENodW5rcyA9IGZpbmRTaGFyZWRDaHVua3MoYSwgYik7XG4gICAgICAgIGxldCBzaWRlQSA9IG5ldyBTcGFuQ3Vyc29yKGEsIHNoYXJlZENodW5rcywgMCkuZ290byhmcm9tKSwgc2lkZUIgPSBuZXcgU3BhbkN1cnNvcihiLCBzaGFyZWRDaHVua3MsIDApLmdvdG8oZnJvbSk7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmIChzaWRlQS50byAhPSBzaWRlQi50byB8fFxuICAgICAgICAgICAgICAgICFzYW1lVmFsdWVzKHNpZGVBLmFjdGl2ZSwgc2lkZUIuYWN0aXZlKSB8fFxuICAgICAgICAgICAgICAgIHNpZGVBLnBvaW50ICYmICghc2lkZUIucG9pbnQgfHwgIXNpZGVBLnBvaW50LmVxKHNpZGVCLnBvaW50KSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNpZGVBLnRvID4gdG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBzaWRlQS5uZXh0KCk7XG4gICAgICAgICAgICBzaWRlQi5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIGEgZ3JvdXAgb2YgcmFuZ2Ugc2V0cyBhdCB0aGUgc2FtZSB0aW1lLCBub3RpZnlpbmdcbiAgICB0aGUgaXRlcmF0b3IgYWJvdXQgdGhlIHJhbmdlcyBjb3ZlcmluZyBldmVyeSBnaXZlbiBwaWVjZSBvZlxuICAgIGNvbnRlbnQuIFJldHVybnMgdGhlIG9wZW4gY291bnQgKHNlZVxuICAgIFtgU3Bhbkl0ZXJhdG9yLnNwYW5gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlNwYW5JdGVyYXRvci5zcGFuKSkgYXQgdGhlIGVuZFxuICAgIG9mIHRoZSBpdGVyYXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgc3BhbnMoc2V0cywgZnJvbSwgdG8sIGl0ZXJhdG9yLCBcbiAgICAvKipcbiAgICBXaGVuIGdpdmVuIGFuZCBncmVhdGVyIHRoYW4gLTEsIG9ubHkgcG9pbnRzIG9mIGF0IGxlYXN0IHRoaXNcbiAgICBzaXplIGFyZSB0YWtlbiBpbnRvIGFjY291bnQuXG4gICAgKi9cbiAgICBtaW5Qb2ludFNpemUgPSAtMSkge1xuICAgICAgICBsZXQgY3Vyc29yID0gbmV3IFNwYW5DdXJzb3Ioc2V0cywgbnVsbCwgbWluUG9pbnRTaXplKS5nb3RvKGZyb20pLCBwb3MgPSBmcm9tO1xuICAgICAgICBsZXQgb3BlblJhbmdlcyA9IGN1cnNvci5vcGVuU3RhcnQ7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBjdXJUbyA9IE1hdGgubWluKGN1cnNvci50bywgdG8pO1xuICAgICAgICAgICAgaWYgKGN1cnNvci5wb2ludCkge1xuICAgICAgICAgICAgICAgIGxldCBhY3RpdmUgPSBjdXJzb3IuYWN0aXZlRm9yUG9pbnQoY3Vyc29yLnRvKTtcbiAgICAgICAgICAgICAgICBsZXQgb3BlbkNvdW50ID0gY3Vyc29yLnBvaW50RnJvbSA8IGZyb20gPyBhY3RpdmUubGVuZ3RoICsgMVxuICAgICAgICAgICAgICAgICAgICA6IGN1cnNvci5wb2ludC5zdGFydFNpZGUgPCAwID8gYWN0aXZlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbihhY3RpdmUubGVuZ3RoLCBvcGVuUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5wb2ludChwb3MsIGN1clRvLCBjdXJzb3IucG9pbnQsIGFjdGl2ZSwgb3BlbkNvdW50LCBjdXJzb3IucG9pbnRSYW5rKTtcbiAgICAgICAgICAgICAgICBvcGVuUmFuZ2VzID0gTWF0aC5taW4oY3Vyc29yLm9wZW5FbmQoY3VyVG8pLCBhY3RpdmUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGN1clRvID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3Iuc3Bhbihwb3MsIGN1clRvLCBjdXJzb3IuYWN0aXZlLCBvcGVuUmFuZ2VzKTtcbiAgICAgICAgICAgICAgICBvcGVuUmFuZ2VzID0gY3Vyc29yLm9wZW5FbmQoY3VyVG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnNvci50byA+IHRvKVxuICAgICAgICAgICAgICAgIHJldHVybiBvcGVuUmFuZ2VzICsgKGN1cnNvci5wb2ludCAmJiBjdXJzb3IudG8gPiB0byA/IDEgOiAwKTtcbiAgICAgICAgICAgIHBvcyA9IGN1cnNvci50bztcbiAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcmFuZ2Ugc2V0IGZvciB0aGUgZ2l2ZW4gcmFuZ2Ugb3IgYXJyYXkgb2YgcmFuZ2VzLiBCeVxuICAgIGRlZmF1bHQsIHRoaXMgZXhwZWN0cyB0aGUgcmFuZ2VzIHRvIGJlIF9zb3J0ZWRfIChieSBzdGFydFxuICAgIHBvc2l0aW9uIGFuZCwgaWYgdHdvIHN0YXJ0IGF0IHRoZSBzYW1lIHBvc2l0aW9uLFxuICAgIGB2YWx1ZS5zdGFydFNpZGVgKS4gWW91IGNhbiBwYXNzIGB0cnVlYCBhcyBzZWNvbmQgYXJndW1lbnQgdG9cbiAgICBjYXVzZSB0aGUgbWV0aG9kIHRvIHNvcnQgdGhlbS5cbiAgICAqL1xuICAgIHN0YXRpYyBvZihyYW5nZXMsIHNvcnQgPSBmYWxzZSkge1xuICAgICAgICBsZXQgYnVpbGQgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgIGZvciAobGV0IHJhbmdlIG9mIHJhbmdlcyBpbnN0YW5jZW9mIFJhbmdlID8gW3Jhbmdlc10gOiBzb3J0ID8gbGF6eVNvcnQocmFuZ2VzKSA6IHJhbmdlcylcbiAgICAgICAgICAgIGJ1aWxkLmFkZChyYW5nZS5mcm9tLCByYW5nZS50bywgcmFuZ2UudmFsdWUpO1xuICAgICAgICByZXR1cm4gYnVpbGQuZmluaXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEpvaW4gYW4gYXJyYXkgb2YgcmFuZ2Ugc2V0cyBpbnRvIGEgc2luZ2xlIHNldC5cbiAgICAqL1xuICAgIHN0YXRpYyBqb2luKHNldHMpIHtcbiAgICAgICAgaWYgKCFzZXRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBSYW5nZVNldC5lbXB0eTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHNldHNbc2V0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHNldHMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGxheWVyID0gc2V0c1tpXTsgbGF5ZXIgIT0gUmFuZ2VTZXQuZW1wdHk7IGxheWVyID0gbGF5ZXIubmV4dExheWVyKVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBSYW5nZVNldChsYXllci5jaHVua1BvcywgbGF5ZXIuY2h1bmssIHJlc3VsdCwgTWF0aC5tYXgobGF5ZXIubWF4UG9pbnQsIHJlc3VsdC5tYXhQb2ludCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIHJhbmdlcy5cbiovXG5SYW5nZVNldC5lbXB0eSA9IC8qQF9fUFVSRV9fKi9uZXcgUmFuZ2VTZXQoW10sIFtdLCBudWxsLCAtMSk7XG5mdW5jdGlvbiBsYXp5U29ydChyYW5nZXMpIHtcbiAgICBpZiAocmFuZ2VzLmxlbmd0aCA+IDEpXG4gICAgICAgIGZvciAobGV0IHByZXYgPSByYW5nZXNbMF0sIGkgPSAxOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY3VyID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgaWYgKGNtcFJhbmdlKHByZXYsIGN1cikgPiAwKVxuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZXMuc2xpY2UoKS5zb3J0KGNtcFJhbmdlKTtcbiAgICAgICAgICAgIHByZXYgPSBjdXI7XG4gICAgICAgIH1cbiAgICByZXR1cm4gcmFuZ2VzO1xufVxuUmFuZ2VTZXQuZW1wdHkubmV4dExheWVyID0gUmFuZ2VTZXQuZW1wdHk7XG4vKipcbkEgcmFuZ2Ugc2V0IGJ1aWxkZXIgaXMgYSBkYXRhIHN0cnVjdHVyZSB0aGF0IGhlbHBzIGJ1aWxkIHVwIGFcbltyYW5nZSBzZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2VTZXQpIGRpcmVjdGx5LCB3aXRob3V0IGZpcnN0IGFsbG9jYXRpbmdcbmFuIGFycmF5IG9mIFtgUmFuZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSBvYmplY3RzLlxuKi9cbmNsYXNzIFJhbmdlU2V0QnVpbGRlciB7XG4gICAgZmluaXNoQ2h1bmsobmV3QXJyYXlzKSB7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3IENodW5rKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy52YWx1ZSwgdGhpcy5tYXhQb2ludCkpO1xuICAgICAgICB0aGlzLmNodW5rUG9zLnB1c2godGhpcy5jaHVua1N0YXJ0KTtcbiAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMuc2V0TWF4UG9pbnQgPSBNYXRoLm1heCh0aGlzLnNldE1heFBvaW50LCB0aGlzLm1heFBvaW50KTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IC0xO1xuICAgICAgICBpZiAobmV3QXJyYXlzKSB7XG4gICAgICAgICAgICB0aGlzLmZyb20gPSBbXTtcbiAgICAgICAgICAgIHRoaXMudG8gPSBbXTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZW1wdHkgYnVpbGRlci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gW107XG4gICAgICAgIHRoaXMuY2h1bmtTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmxhc3QgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RGcm9tID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMubGFzdFRvID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgIHRoaXMuZnJvbSA9IFtdO1xuICAgICAgICB0aGlzLnRvID0gW107XG4gICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgdGhpcy5tYXhQb2ludCA9IC0xO1xuICAgICAgICB0aGlzLnNldE1heFBvaW50ID0gLTE7XG4gICAgICAgIHRoaXMubmV4dExheWVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgQWRkIGEgcmFuZ2UuIFJhbmdlcyBzaG91bGQgYmUgYWRkZWQgaW4gc29ydGVkIChieSBgZnJvbWAgYW5kXG4gICAgYHZhbHVlLnN0YXJ0U2lkZWApIG9yZGVyLlxuICAgICovXG4gICAgYWRkKGZyb20sIHRvLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuYWRkSW5uZXIoZnJvbSwgdG8sIHZhbHVlKSlcbiAgICAgICAgICAgICh0aGlzLm5leHRMYXllciB8fCAodGhpcy5uZXh0TGF5ZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKSkuYWRkKGZyb20sIHRvLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYWRkSW5uZXIoZnJvbSwgdG8sIHZhbHVlKSB7XG4gICAgICAgIGxldCBkaWZmID0gZnJvbSAtIHRoaXMubGFzdFRvIHx8IHZhbHVlLnN0YXJ0U2lkZSAtIHRoaXMubGFzdC5lbmRTaWRlO1xuICAgICAgICBpZiAoZGlmZiA8PSAwICYmIChmcm9tIC0gdGhpcy5sYXN0RnJvbSB8fCB2YWx1ZS5zdGFydFNpZGUgLSB0aGlzLmxhc3Quc3RhcnRTaWRlKSA8IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZXMgbXVzdCBiZSBhZGRlZCBzb3J0ZWQgYnkgYGZyb21gIHBvc2l0aW9uIGFuZCBgc3RhcnRTaWRlYFwiKTtcbiAgICAgICAgaWYgKGRpZmYgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5mcm9tLmxlbmd0aCA9PSAyNTAgLyogQy5DaHVua1NpemUgKi8pXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENodW5rKHRydWUpO1xuICAgICAgICBpZiAodGhpcy5jaHVua1N0YXJ0IDwgMClcbiAgICAgICAgICAgIHRoaXMuY2h1bmtTdGFydCA9IGZyb207XG4gICAgICAgIHRoaXMuZnJvbS5wdXNoKGZyb20gLSB0aGlzLmNodW5rU3RhcnQpO1xuICAgICAgICB0aGlzLnRvLnB1c2godG8gLSB0aGlzLmNodW5rU3RhcnQpO1xuICAgICAgICB0aGlzLmxhc3QgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5sYXN0RnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMubGFzdFRvID0gdG87XG4gICAgICAgIHRoaXMudmFsdWUucHVzaCh2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZS5wb2ludClcbiAgICAgICAgICAgIHRoaXMubWF4UG9pbnQgPSBNYXRoLm1heCh0aGlzLm1heFBvaW50LCB0byAtIGZyb20pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhZGRDaHVuayhmcm9tLCBjaHVuaykge1xuICAgICAgICBpZiAoKGZyb20gLSB0aGlzLmxhc3RUbyB8fCBjaHVuay52YWx1ZVswXS5zdGFydFNpZGUgLSB0aGlzLmxhc3QuZW5kU2lkZSkgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5mcm9tLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuZmluaXNoQ2h1bmsodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2V0TWF4UG9pbnQgPSBNYXRoLm1heCh0aGlzLnNldE1heFBvaW50LCBjaHVuay5tYXhQb2ludCk7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICB0aGlzLmNodW5rUG9zLnB1c2goZnJvbSk7XG4gICAgICAgIGxldCBsYXN0ID0gY2h1bmsudmFsdWUubGVuZ3RoIC0gMTtcbiAgICAgICAgdGhpcy5sYXN0ID0gY2h1bmsudmFsdWVbbGFzdF07XG4gICAgICAgIHRoaXMubGFzdEZyb20gPSBjaHVuay5mcm9tW2xhc3RdICsgZnJvbTtcbiAgICAgICAgdGhpcy5sYXN0VG8gPSBjaHVuay50b1tsYXN0XSArIGZyb207XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5pc2ggdGhlIHJhbmdlIHNldC4gUmV0dXJucyB0aGUgbmV3IHNldC4gVGhlIGJ1aWxkZXIgY2FuJ3QgYmVcbiAgICB1c2VkIGFueW1vcmUgYWZ0ZXIgdGhpcyBoYXMgYmVlbiBjYWxsZWQuXG4gICAgKi9cbiAgICBmaW5pc2goKSB7IHJldHVybiB0aGlzLmZpbmlzaElubmVyKFJhbmdlU2V0LmVtcHR5KTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmluaXNoSW5uZXIobmV4dCkge1xuICAgICAgICBpZiAodGhpcy5mcm9tLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuZmluaXNoQ2h1bmsoZmFsc2UpO1xuICAgICAgICBpZiAodGhpcy5jaHVua3MubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFJhbmdlU2V0LmNyZWF0ZSh0aGlzLmNodW5rUG9zLCB0aGlzLmNodW5rcywgdGhpcy5uZXh0TGF5ZXIgPyB0aGlzLm5leHRMYXllci5maW5pc2hJbm5lcihuZXh0KSA6IG5leHQsIHRoaXMuc2V0TWF4UG9pbnQpO1xuICAgICAgICB0aGlzLmZyb20gPSBudWxsOyAvLyBNYWtlIHN1cmUgZnVydGhlciBgYWRkYCBjYWxscyBwcm9kdWNlIGVycm9yc1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbmRTaGFyZWRDaHVua3MoYSwgYiwgdGV4dERpZmYpIHtcbiAgICBsZXQgaW5BID0gbmV3IE1hcCgpO1xuICAgIGZvciAobGV0IHNldCBvZiBhKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5jaHVuay5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChzZXQuY2h1bmtbaV0ubWF4UG9pbnQgPD0gMClcbiAgICAgICAgICAgICAgICBpbkEuc2V0KHNldC5jaHVua1tpXSwgc2V0LmNodW5rUG9zW2ldKTtcbiAgICBsZXQgc2hhcmVkID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IHNldCBvZiBiKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5jaHVuay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGtub3duID0gaW5BLmdldChzZXQuY2h1bmtbaV0pO1xuICAgICAgICAgICAgaWYgKGtub3duICE9IG51bGwgJiYgKHRleHREaWZmID8gdGV4dERpZmYubWFwUG9zKGtub3duKSA6IGtub3duKSA9PSBzZXQuY2h1bmtQb3NbaV0gJiZcbiAgICAgICAgICAgICAgICAhKHRleHREaWZmID09PSBudWxsIHx8IHRleHREaWZmID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZXh0RGlmZi50b3VjaGVzUmFuZ2Uoa25vd24sIGtub3duICsgc2V0LmNodW5rW2ldLmxlbmd0aCkpKVxuICAgICAgICAgICAgICAgIHNoYXJlZC5hZGQoc2V0LmNodW5rW2ldKTtcbiAgICAgICAgfVxuICAgIHJldHVybiBzaGFyZWQ7XG59XG5jbGFzcyBMYXllckN1cnNvciB7XG4gICAgY29uc3RydWN0b3IobGF5ZXIsIHNraXAsIG1pblBvaW50LCByYW5rID0gMCkge1xuICAgICAgICB0aGlzLmxheWVyID0gbGF5ZXI7XG4gICAgICAgIHRoaXMuc2tpcCA9IHNraXA7XG4gICAgICAgIHRoaXMubWluUG9pbnQgPSBtaW5Qb2ludDtcbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICB9XG4gICAgZ2V0IHN0YXJ0U2lkZSgpIHsgcmV0dXJuIHRoaXMudmFsdWUgPyB0aGlzLnZhbHVlLnN0YXJ0U2lkZSA6IDA7IH1cbiAgICBnZXQgZW5kU2lkZSgpIHsgcmV0dXJuIHRoaXMudmFsdWUgPyB0aGlzLnZhbHVlLmVuZFNpZGUgOiAwOyB9XG4gICAgZ290byhwb3MsIHNpZGUgPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLykge1xuICAgICAgICB0aGlzLmNodW5rSW5kZXggPSB0aGlzLnJhbmdlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLmdvdG9Jbm5lcihwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdvdG9Jbm5lcihwb3MsIHNpZGUsIGZvcndhcmQpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY2h1bmtJbmRleCA8IHRoaXMubGF5ZXIuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XTtcbiAgICAgICAgICAgIGlmICghKHRoaXMuc2tpcCAmJiB0aGlzLnNraXAuaGFzKG5leHQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci5jaHVua0VuZCh0aGlzLmNodW5rSW5kZXgpIDwgcG9zIHx8XG4gICAgICAgICAgICAgICAgbmV4dC5tYXhQb2ludCA8IHRoaXMubWluUG9pbnQpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdGhpcy5jaHVua0luZGV4Kys7XG4gICAgICAgICAgICBmb3J3YXJkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2h1bmtJbmRleCA8IHRoaXMubGF5ZXIuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2VJbmRleCA9IHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XS5maW5kSW5kZXgocG9zIC0gdGhpcy5sYXllci5jaHVua1Bvc1t0aGlzLmNodW5rSW5kZXhdLCBzaWRlLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghZm9yd2FyZCB8fCB0aGlzLnJhbmdlSW5kZXggPCByYW5nZUluZGV4KVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmFuZ2VJbmRleChyYW5nZUluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG4gICAgZm9yd2FyZChwb3MsIHNpZGUpIHtcbiAgICAgICAgaWYgKCh0aGlzLnRvIC0gcG9zIHx8IHRoaXMuZW5kU2lkZSAtIHNpZGUpIDwgMClcbiAgICAgICAgICAgIHRoaXMuZ290b0lubmVyKHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNodW5rSW5kZXggPT0gdGhpcy5sYXllci5jaHVuay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyb20gPSB0aGlzLnRvID0gMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBjaHVua1BvcyA9IHRoaXMubGF5ZXIuY2h1bmtQb3NbdGhpcy5jaHVua0luZGV4XSwgY2h1bmsgPSB0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF07XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBjaHVua1BvcyArIGNodW5rLmZyb21bdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICAgICAgICAgIHRoaXMudG8gPSBjaHVua1BvcyArIGNodW5rLnRvW3RoaXMucmFuZ2VJbmRleF07XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGNodW5rLnZhbHVlW3RoaXMucmFuZ2VJbmRleF07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSYW5nZUluZGV4KHRoaXMucmFuZ2VJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pblBvaW50IDwgMCB8fCB0aGlzLnZhbHVlLnBvaW50ICYmIHRoaXMudG8gLSB0aGlzLmZyb20gPj0gdGhpcy5taW5Qb2ludClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UmFuZ2VJbmRleChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jaHVua0luZGV4Kys7XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuY2h1bmtJbmRleCA8IHRoaXMubGF5ZXIuY2h1bmsubGVuZ3RoICYmIHRoaXMuc2tpcC5oYXModGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVua0luZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV4dENodW5rKCkge1xuICAgICAgICB0aGlzLmNodW5rSW5kZXgrKztcbiAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIGNvbXBhcmUob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbSAtIG90aGVyLmZyb20gfHwgdGhpcy5zdGFydFNpZGUgLSBvdGhlci5zdGFydFNpZGUgfHwgdGhpcy5yYW5rIC0gb3RoZXIucmFuayB8fFxuICAgICAgICAgICAgdGhpcy50byAtIG90aGVyLnRvIHx8IHRoaXMuZW5kU2lkZSAtIG90aGVyLmVuZFNpZGU7XG4gICAgfVxufVxuY2xhc3MgSGVhcEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoaGVhcCkge1xuICAgICAgICB0aGlzLmhlYXAgPSBoZWFwO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbShzZXRzLCBza2lwID0gbnVsbCwgbWluUG9pbnQgPSAtMSkge1xuICAgICAgICBsZXQgaGVhcCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGN1ciA9IHNldHNbaV07ICFjdXIuaXNFbXB0eTsgY3VyID0gY3VyLm5leHRMYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChjdXIubWF4UG9pbnQgPj0gbWluUG9pbnQpXG4gICAgICAgICAgICAgICAgICAgIGhlYXAucHVzaChuZXcgTGF5ZXJDdXJzb3IoY3VyLCBza2lwLCBtaW5Qb2ludCwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFwLmxlbmd0aCA9PSAxID8gaGVhcFswXSA6IG5ldyBIZWFwQ3Vyc29yKGhlYXApO1xuICAgIH1cbiAgICBnZXQgc3RhcnRTaWRlKCkgeyByZXR1cm4gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3RhcnRTaWRlIDogMDsgfVxuICAgIGdvdG8ocG9zLCBzaWRlID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi8pIHtcbiAgICAgICAgZm9yIChsZXQgY3VyIG9mIHRoaXMuaGVhcClcbiAgICAgICAgICAgIGN1ci5nb3RvKHBvcywgc2lkZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmhlYXAubGVuZ3RoID4+IDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgaGVhcEJ1YmJsZSh0aGlzLmhlYXAsIGkpO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGZvcndhcmQocG9zLCBzaWRlKSB7XG4gICAgICAgIGZvciAobGV0IGN1ciBvZiB0aGlzLmhlYXApXG4gICAgICAgICAgICBjdXIuZm9yd2FyZChwb3MsIHNpZGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5oZWFwLmxlbmd0aCA+PiAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIGhlYXBCdWJibGUodGhpcy5oZWFwLCBpKTtcbiAgICAgICAgaWYgKCh0aGlzLnRvIC0gcG9zIHx8IHRoaXMudmFsdWUuZW5kU2lkZSAtIHNpZGUpIDwgMClcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5oZWFwLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZyb20gPSB0aGlzLnRvID0gMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yYW5rID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdG9wID0gdGhpcy5oZWFwWzBdO1xuICAgICAgICAgICAgdGhpcy5mcm9tID0gdG9wLmZyb207XG4gICAgICAgICAgICB0aGlzLnRvID0gdG9wLnRvO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRvcC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMucmFuayA9IHRvcC5yYW5rO1xuICAgICAgICAgICAgaWYgKHRvcC52YWx1ZSlcbiAgICAgICAgICAgICAgICB0b3AubmV4dCgpO1xuICAgICAgICAgICAgaGVhcEJ1YmJsZSh0aGlzLmhlYXAsIDApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaGVhcEJ1YmJsZShoZWFwLCBpbmRleCkge1xuICAgIGZvciAobGV0IGN1ciA9IGhlYXBbaW5kZXhdOzspIHtcbiAgICAgICAgbGV0IGNoaWxkSW5kZXggPSAoaW5kZXggPDwgMSkgKyAxO1xuICAgICAgICBpZiAoY2hpbGRJbmRleCA+PSBoZWFwLmxlbmd0aClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBsZXQgY2hpbGQgPSBoZWFwW2NoaWxkSW5kZXhdO1xuICAgICAgICBpZiAoY2hpbGRJbmRleCArIDEgPCBoZWFwLmxlbmd0aCAmJiBjaGlsZC5jb21wYXJlKGhlYXBbY2hpbGRJbmRleCArIDFdKSA+PSAwKSB7XG4gICAgICAgICAgICBjaGlsZCA9IGhlYXBbY2hpbGRJbmRleCArIDFdO1xuICAgICAgICAgICAgY2hpbGRJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXIuY29tcGFyZShjaGlsZCkgPCAwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGhlYXBbY2hpbGRJbmRleF0gPSBjdXI7XG4gICAgICAgIGhlYXBbaW5kZXhdID0gY2hpbGQ7XG4gICAgICAgIGluZGV4ID0gY2hpbGRJbmRleDtcbiAgICB9XG59XG5jbGFzcyBTcGFuQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihzZXRzLCBza2lwLCBtaW5Qb2ludCkge1xuICAgICAgICB0aGlzLm1pblBvaW50ID0gbWluUG9pbnQ7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlVG8gPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmVSYW5rID0gW107XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gLTE7XG4gICAgICAgIC8vIEEgY3VycmVudGx5IGFjdGl2ZSBwb2ludCByYW5nZSwgaWYgYW55XG4gICAgICAgIHRoaXMucG9pbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnBvaW50RnJvbSA9IDA7XG4gICAgICAgIHRoaXMucG9pbnRSYW5rID0gMDtcbiAgICAgICAgdGhpcy50byA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICB0aGlzLmVuZFNpZGUgPSAwO1xuICAgICAgICAvLyBUaGUgYW1vdW50IG9mIG9wZW4gYWN0aXZlIHJhbmdlcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAvLyBOb3QgaW5jbHVkaW5nIHBvaW50cy5cbiAgICAgICAgdGhpcy5vcGVuU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBIZWFwQ3Vyc29yLmZyb20oc2V0cywgc2tpcCwgbWluUG9pbnQpO1xuICAgIH1cbiAgICBnb3RvKHBvcywgc2lkZSA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLmdvdG8ocG9zLCBzaWRlKTtcbiAgICAgICAgdGhpcy5hY3RpdmUubGVuZ3RoID0gdGhpcy5hY3RpdmVUby5sZW5ndGggPSB0aGlzLmFjdGl2ZVJhbmsubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5taW5BY3RpdmUgPSAtMTtcbiAgICAgICAgdGhpcy50byA9IHBvcztcbiAgICAgICAgdGhpcy5lbmRTaWRlID0gc2lkZTtcbiAgICAgICAgdGhpcy5vcGVuU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBmb3J3YXJkKHBvcywgc2lkZSkge1xuICAgICAgICB3aGlsZSAodGhpcy5taW5BY3RpdmUgPiAtMSAmJiAodGhpcy5hY3RpdmVUb1t0aGlzLm1pbkFjdGl2ZV0gLSBwb3MgfHwgdGhpcy5hY3RpdmVbdGhpcy5taW5BY3RpdmVdLmVuZFNpZGUgLSBzaWRlKSA8IDApXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZSh0aGlzLm1pbkFjdGl2ZSk7XG4gICAgICAgIHRoaXMuY3Vyc29yLmZvcndhcmQocG9zLCBzaWRlKTtcbiAgICB9XG4gICAgcmVtb3ZlQWN0aXZlKGluZGV4KSB7XG4gICAgICAgIHJlbW92ZSh0aGlzLmFjdGl2ZSwgaW5kZXgpO1xuICAgICAgICByZW1vdmUodGhpcy5hY3RpdmVUbywgaW5kZXgpO1xuICAgICAgICByZW1vdmUodGhpcy5hY3RpdmVSYW5rLCBpbmRleCk7XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gZmluZE1pbkluZGV4KHRoaXMuYWN0aXZlLCB0aGlzLmFjdGl2ZVRvKTtcbiAgICB9XG4gICAgYWRkQWN0aXZlKHRyYWNrT3Blbikge1xuICAgICAgICBsZXQgaSA9IDAsIHsgdmFsdWUsIHRvLCByYW5rIH0gPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gT3JnYW5pemUgYWN0aXZlIG1hcmtzIGJ5IHJhbmsgZmlyc3QsIHRoZW4gYnkgc2l6ZVxuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYWN0aXZlUmFuay5sZW5ndGggJiYgKHJhbmsgLSB0aGlzLmFjdGl2ZVJhbmtbaV0gfHwgdG8gLSB0aGlzLmFjdGl2ZVRvW2ldKSA+IDApXG4gICAgICAgICAgICBpKys7XG4gICAgICAgIGluc2VydCh0aGlzLmFjdGl2ZSwgaSwgdmFsdWUpO1xuICAgICAgICBpbnNlcnQodGhpcy5hY3RpdmVUbywgaSwgdG8pO1xuICAgICAgICBpbnNlcnQodGhpcy5hY3RpdmVSYW5rLCBpLCByYW5rKTtcbiAgICAgICAgaWYgKHRyYWNrT3BlbilcbiAgICAgICAgICAgIGluc2VydCh0cmFja09wZW4sIGksIHRoaXMuY3Vyc29yLmZyb20pO1xuICAgICAgICB0aGlzLm1pbkFjdGl2ZSA9IGZpbmRNaW5JbmRleCh0aGlzLmFjdGl2ZSwgdGhpcy5hY3RpdmVUbyk7XG4gICAgfVxuICAgIC8vIEFmdGVyIGNhbGxpbmcgdGhpcywgaWYgYHRoaXMucG9pbnRgICE9IG51bGwsIHRoZSBuZXh0IHJhbmdlIGlzIGFcbiAgICAvLyBwb2ludC4gT3RoZXJ3aXNlLCBpdCdzIGEgcmVndWxhciByYW5nZSwgY292ZXJlZCBieSBgdGhpcy5hY3RpdmVgLlxuICAgIG5leHQoKSB7XG4gICAgICAgIGxldCBmcm9tID0gdGhpcy50bywgd2FzUG9pbnQgPSB0aGlzLnBvaW50O1xuICAgICAgICB0aGlzLnBvaW50ID0gbnVsbDtcbiAgICAgICAgbGV0IHRyYWNrT3BlbiA9IHRoaXMub3BlblN0YXJ0IDwgMCA/IFtdIDogbnVsbDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGEgPSB0aGlzLm1pbkFjdGl2ZTtcbiAgICAgICAgICAgIGlmIChhID4gLTEgJiYgKHRoaXMuYWN0aXZlVG9bYV0gLSB0aGlzLmN1cnNvci5mcm9tIHx8IHRoaXMuYWN0aXZlW2FdLmVuZFNpZGUgLSB0aGlzLmN1cnNvci5zdGFydFNpZGUpIDwgMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRvW2FdID4gZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5hY3RpdmVUb1thXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRTaWRlID0gdGhpcy5hY3RpdmVbYV0uZW5kU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlKGEpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFja09wZW4pXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZSh0cmFja09wZW4sIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuY3Vyc29yLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50byA9IHRoaXMuZW5kU2lkZSA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnNvci5mcm9tID4gZnJvbSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG8gPSB0aGlzLmN1cnNvci5mcm9tO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kU2lkZSA9IHRoaXMuY3Vyc29yLnN0YXJ0U2lkZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0VmFsID0gdGhpcy5jdXJzb3IudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0VmFsLnBvaW50KSB7IC8vIE9wZW5pbmcgYSByYW5nZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2ZSh0cmFja09wZW4pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc1BvaW50ICYmIHRoaXMuY3Vyc29yLnRvID09IHRoaXMudG8gJiYgdGhpcy5jdXJzb3IuZnJvbSA8IHRoaXMuY3Vyc29yLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBhbnkgbm9uLWVtcHR5IHBvaW50cyB0aGF0IGVuZCBwcmVjaXNlbHkgYXQgdGhlIGVuZCBvZiB0aGUgcHJldiBwb2ludFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBOZXcgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludCA9IG5leHRWYWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRGcm9tID0gdGhpcy5jdXJzb3IuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludFJhbmsgPSB0aGlzLmN1cnNvci5yYW5rO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5jdXJzb3IudG87XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kU2lkZSA9IG5leHRWYWwuZW5kU2lkZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmQodGhpcy50bywgdGhpcy5lbmRTaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFja09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMub3BlblN0YXJ0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0cmFja09wZW4ubGVuZ3RoIC0gMTsgaSA+PSAwICYmIHRyYWNrT3BlbltpXSA8IGZyb207IGktLSlcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdGFydCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjdGl2ZUZvclBvaW50KHRvKSB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICAgICAgICBsZXQgYWN0aXZlID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmFjdGl2ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlUmFua1tpXSA8IHRoaXMucG9pbnRSYW5rKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVG9baV0gPiB0byB8fCB0aGlzLmFjdGl2ZVRvW2ldID09IHRvICYmIHRoaXMuYWN0aXZlW2ldLmVuZFNpZGUgPj0gdGhpcy5wb2ludC5lbmRTaWRlKVxuICAgICAgICAgICAgICAgIGFjdGl2ZS5wdXNoKHRoaXMuYWN0aXZlW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aXZlLnJldmVyc2UoKTtcbiAgICB9XG4gICAgb3BlbkVuZCh0bykge1xuICAgICAgICBsZXQgb3BlbiA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmFjdGl2ZVRvLmxlbmd0aCAtIDE7IGkgPj0gMCAmJiB0aGlzLmFjdGl2ZVRvW2ldID4gdG87IGktLSlcbiAgICAgICAgICAgIG9wZW4rKztcbiAgICAgICAgcmV0dXJuIG9wZW47XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGFyZShhLCBzdGFydEEsIGIsIHN0YXJ0QiwgbGVuZ3RoLCBjb21wYXJhdG9yKSB7XG4gICAgYS5nb3RvKHN0YXJ0QSk7XG4gICAgYi5nb3RvKHN0YXJ0Qik7XG4gICAgbGV0IGVuZEIgPSBzdGFydEIgKyBsZW5ndGg7XG4gICAgbGV0IHBvcyA9IHN0YXJ0QiwgZFBvcyA9IHN0YXJ0QiAtIHN0YXJ0QTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGxldCBkRW5kID0gKGEudG8gKyBkUG9zKSAtIGIudG8sIGRpZmYgPSBkRW5kIHx8IGEuZW5kU2lkZSAtIGIuZW5kU2lkZTtcbiAgICAgICAgbGV0IGVuZCA9IGRpZmYgPCAwID8gYS50byArIGRQb3MgOiBiLnRvLCBjbGlwRW5kID0gTWF0aC5taW4oZW5kLCBlbmRCKTtcbiAgICAgICAgaWYgKGEucG9pbnQgfHwgYi5wb2ludCkge1xuICAgICAgICAgICAgaWYgKCEoYS5wb2ludCAmJiBiLnBvaW50ICYmIChhLnBvaW50ID09IGIucG9pbnQgfHwgYS5wb2ludC5lcShiLnBvaW50KSkgJiZcbiAgICAgICAgICAgICAgICBzYW1lVmFsdWVzKGEuYWN0aXZlRm9yUG9pbnQoYS50byksIGIuYWN0aXZlRm9yUG9pbnQoYi50bykpKSlcbiAgICAgICAgICAgICAgICBjb21wYXJhdG9yLmNvbXBhcmVQb2ludChwb3MsIGNsaXBFbmQsIGEucG9pbnQsIGIucG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNsaXBFbmQgPiBwb3MgJiYgIXNhbWVWYWx1ZXMoYS5hY3RpdmUsIGIuYWN0aXZlKSlcbiAgICAgICAgICAgICAgICBjb21wYXJhdG9yLmNvbXBhcmVSYW5nZShwb3MsIGNsaXBFbmQsIGEuYWN0aXZlLCBiLmFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZCA+IGVuZEIpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKChkRW5kIHx8IGEub3BlbkVuZCAhPSBiLm9wZW5FbmQpICYmIGNvbXBhcmF0b3IuYm91bmRDaGFuZ2UpXG4gICAgICAgICAgICBjb21wYXJhdG9yLmJvdW5kQ2hhbmdlKGVuZCk7XG4gICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgaWYgKGRpZmYgPD0gMClcbiAgICAgICAgICAgIGEubmV4dCgpO1xuICAgICAgICBpZiAoZGlmZiA+PSAwKVxuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZVZhbHVlcyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoYVtpXSAhPSBiW2ldICYmICFhW2ldLmVxKGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmVtb3ZlKGFycmF5LCBpbmRleCkge1xuICAgIGZvciAobGV0IGkgPSBpbmRleCwgZSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPCBlOyBpKyspXG4gICAgICAgIGFycmF5W2ldID0gYXJyYXlbaSArIDFdO1xuICAgIGFycmF5LnBvcCgpO1xufVxuZnVuY3Rpb24gaW5zZXJ0KGFycmF5LCBpbmRleCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+PSBpbmRleDsgaS0tKVxuICAgICAgICBhcnJheVtpICsgMV0gPSBhcnJheVtpXTtcbiAgICBhcnJheVtpbmRleF0gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRNaW5JbmRleCh2YWx1ZSwgYXJyYXkpIHtcbiAgICBsZXQgZm91bmQgPSAtMSwgZm91bmRQb3MgPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICgoYXJyYXlbaV0gLSBmb3VuZFBvcyB8fCB2YWx1ZVtpXS5lbmRTaWRlIC0gdmFsdWVbZm91bmRdLmVuZFNpZGUpIDwgMCkge1xuICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgZm91bmRQb3MgPSBhcnJheVtpXTtcbiAgICAgICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cblxuLyoqXG5Db3VudCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBvZmZzZXQgaW50byB0aGUgc3RyaW5nLFxudGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuXG4qL1xuZnVuY3Rpb24gY291bnRDb2x1bW4oc3RyaW5nLCB0YWJTaXplLCB0byA9IHN0cmluZy5sZW5ndGgpIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0byAmJiBpIDwgc3RyaW5nLmxlbmd0aDspIHtcbiAgICAgICAgaWYgKHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkpIHtcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuKys7XG4gICAgICAgICAgICBpID0gZmluZENsdXN0ZXJCcmVhayhzdHJpbmcsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuLyoqXG5GaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gY29sdW1uIHBvc2l0aW9uIGluIGFcbnN0cmluZywgdGFraW5nIGV4dGVuZGluZyBjaGFyYWN0ZXJzIGFuZCB0YWIgc2l6ZSBpbnRvIGFjY291bnQuIEJ5XG5kZWZhdWx0LCB0aGUgc3RyaW5nIGxlbmd0aCBpcyByZXR1cm5lZCB3aGVuIGl0IGlzIHRvbyBzaG9ydCB0b1xucmVhY2ggdGhlIGNvbHVtbi4gUGFzcyBgc3RyaWN0YCB0cnVlIHRvIG1ha2UgaXQgcmV0dXJuIC0xIGluIHRoYXRcbnNpdHVhdGlvbi5cbiovXG5mdW5jdGlvbiBmaW5kQ29sdW1uKHN0cmluZywgY29sLCB0YWJTaXplLCBzdHJpY3QpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IDA7Oykge1xuICAgICAgICBpZiAobiA+PSBjb2wpXG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgaWYgKGkgPT0gc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBuICs9IHN0cmluZy5jaGFyQ29kZUF0KGkpID09IDkgPyB0YWJTaXplIC0gKG4gJSB0YWJTaXplKSA6IDE7XG4gICAgICAgIGkgPSBmaW5kQ2x1c3RlckJyZWFrKHN0cmluZywgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpY3QgPT09IHRydWUgPyAtMSA6IHN0cmluZy5sZW5ndGg7XG59XG5cbmV4cG9ydCB7IEFubm90YXRpb24sIEFubm90YXRpb25UeXBlLCBDaGFuZ2VEZXNjLCBDaGFuZ2VTZXQsIENoYXJDYXRlZ29yeSwgQ29tcGFydG1lbnQsIEVkaXRvclNlbGVjdGlvbiwgRWRpdG9yU3RhdGUsIEZhY2V0LCBMaW5lLCBNYXBNb2RlLCBQcmVjLCBSYW5nZSwgUmFuZ2VTZXQsIFJhbmdlU2V0QnVpbGRlciwgUmFuZ2VWYWx1ZSwgU2VsZWN0aW9uUmFuZ2UsIFN0YXRlRWZmZWN0LCBTdGF0ZUVmZmVjdFR5cGUsIFN0YXRlRmllbGQsIFRleHQsIFRyYW5zYWN0aW9uLCBjb2RlUG9pbnRBdCwgY29kZVBvaW50U2l6ZSwgY29tYmluZUNvbmZpZywgY291bnRDb2x1bW4sIGZpbmRDbHVzdGVyQnJlYWssIGZpbmRDb2x1bW4sIGZyb21Db2RlUG9pbnQgfTtcbiIsCiAgICAiY29uc3QgQyA9IFwiXFx1MDM3Y1wiXG5jb25zdCBDT1VOVCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJ1bmRlZmluZWRcIiA/IFwiX19cIiArIEMgOiBTeW1ib2wuZm9yKEMpXG5jb25zdCBTRVQgPSB0eXBlb2YgU3ltYm9sID09IFwidW5kZWZpbmVkXCIgPyBcIl9fc3R5bGVTZXRcIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDFlOCkgOiBTeW1ib2woXCJzdHlsZVNldFwiKVxuY29uc3QgdG9wID0gdHlwZW9mIGdsb2JhbFRoaXMgIT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fVxuXG4vLyA6OiAtIFN0eWxlIG1vZHVsZXMgZW5jYXBzdWxhdGUgYSBzZXQgb2YgQ1NTIHJ1bGVzIGRlZmluZWQgZnJvbVxuLy8gSmF2YVNjcmlwdC4gVGhlaXIgZGVmaW5pdGlvbnMgYXJlIG9ubHkgYXZhaWxhYmxlIGluIGEgZ2l2ZW4gRE9NXG4vLyByb290IGFmdGVyIGl0IGhhcyBiZWVuIF9tb3VudGVkXyB0aGVyZSB3aXRoIGBTdHlsZU1vZHVsZS5tb3VudGAuXG4vL1xuLy8gU3R5bGUgbW9kdWxlcyBzaG91bGQgYmUgY3JlYXRlZCBvbmNlIGFuZCBzdG9yZWQgc29tZXdoZXJlLCBhc1xuLy8gb3Bwb3NlZCB0byByZS1jcmVhdGluZyB0aGVtIGV2ZXJ5IHRpbWUgeW91IG5lZWQgdGhlbS4gVGhlIGFtb3VudCBvZlxuLy8gQ1NTIHJ1bGVzIGdlbmVyYXRlZCBmb3IgYSBnaXZlbiBET00gcm9vdCBpcyBib3VuZGVkIGJ5IHRoZSBhbW91bnRcbi8vIG9mIHN0eWxlIG1vZHVsZXMgdGhhdCB3ZXJlIHVzZWQuIFNvIHRvIGF2b2lkIGxlYWtpbmcgcnVsZXMsIGRvbid0XG4vLyBjcmVhdGUgdGhlc2UgZHluYW1pY2FsbHksIGJ1dCB0cmVhdCB0aGVtIGFzIG9uZS10aW1lIGFsbG9jYXRpb25zLlxuZXhwb3J0IGNsYXNzIFN0eWxlTW9kdWxlIHtcbiAgLy8gOjogKE9iamVjdDxTdHlsZT4sID97ZmluaXNoOiA/KHN0cmluZykg4oaSIHN0cmluZ30pXG4gIC8vIENyZWF0ZSBhIHN0eWxlIG1vZHVsZSBmcm9tIHRoZSBnaXZlbiBzcGVjLlxuICAvL1xuICAvLyBXaGVuIGBmaW5pc2hgIGlzIGdpdmVuLCBpdCBpcyBjYWxsZWQgb24gcmVndWxhciAobm9uLWBAYClcbiAgLy8gc2VsZWN0b3JzIChhZnRlciBgJmAgZXhwYW5zaW9uKSB0byBjb21wdXRlIHRoZSBmaW5hbCBzZWxlY3Rvci5cbiAgY29uc3RydWN0b3Ioc3BlYywgb3B0aW9ucykge1xuICAgIHRoaXMucnVsZXMgPSBbXVxuICAgIGxldCB7ZmluaXNofSA9IG9wdGlvbnMgfHwge31cblxuICAgIGZ1bmN0aW9uIHNwbGl0U2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiAvXkAvLnRlc3Qoc2VsZWN0b3IpID8gW3NlbGVjdG9yXSA6IHNlbGVjdG9yLnNwbGl0KC8sXFxzKi8pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyKHNlbGVjdG9ycywgc3BlYywgdGFyZ2V0LCBpc0tleWZyYW1lcykge1xuICAgICAgbGV0IGxvY2FsID0gW10sIGlzQXQgPSAvXkAoXFx3KylcXGIvLmV4ZWMoc2VsZWN0b3JzWzBdKSwga2V5ZnJhbWVzID0gaXNBdCAmJiBpc0F0WzFdID09IFwia2V5ZnJhbWVzXCJcbiAgICAgIGlmIChpc0F0ICYmIHNwZWMgPT0gbnVsbCkgcmV0dXJuIHRhcmdldC5wdXNoKHNlbGVjdG9yc1swXSArIFwiO1wiKVxuICAgICAgZm9yIChsZXQgcHJvcCBpbiBzcGVjKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHNwZWNbcHJvcF1cbiAgICAgICAgaWYgKC8mLy50ZXN0KHByb3ApKSB7XG4gICAgICAgICAgcmVuZGVyKHByb3Auc3BsaXQoLyxcXHMqLykubWFwKHBhcnQgPT4gc2VsZWN0b3JzLm1hcChzZWwgPT4gcGFydC5yZXBsYWNlKC8mLywgc2VsKSkpLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpLFxuICAgICAgICAgICAgICAgICB2YWx1ZSwgdGFyZ2V0KVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgaWYgKCFpc0F0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IChcIiArIHByb3AgKyBcIikgc2hvdWxkIGJlIGEgcHJpbWl0aXZlIHZhbHVlLlwiKVxuICAgICAgICAgIHJlbmRlcihzcGxpdFNlbGVjdG9yKHByb3ApLCB2YWx1ZSwgbG9jYWwsIGtleWZyYW1lcylcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgbG9jYWwucHVzaChwcm9wLnJlcGxhY2UoL18uKi8sIFwiXCIpLnJlcGxhY2UoL1tBLVpdL2csIGwgPT4gXCItXCIgKyBsLnRvTG93ZXJDYXNlKCkpICsgXCI6IFwiICsgdmFsdWUgKyBcIjtcIilcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxvY2FsLmxlbmd0aCB8fCBrZXlmcmFtZXMpIHtcbiAgICAgICAgdGFyZ2V0LnB1c2goKGZpbmlzaCAmJiAhaXNBdCAmJiAhaXNLZXlmcmFtZXMgPyBzZWxlY3RvcnMubWFwKGZpbmlzaCkgOiBzZWxlY3RvcnMpLmpvaW4oXCIsIFwiKSArXG4gICAgICAgICAgICAgICAgICAgIFwiIHtcIiArIGxvY2FsLmpvaW4oXCIgXCIpICsgXCJ9XCIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgcHJvcCBpbiBzcGVjKSByZW5kZXIoc3BsaXRTZWxlY3Rvcihwcm9wKSwgc3BlY1twcm9wXSwgdGhpcy5ydWxlcylcbiAgfVxuXG4gIC8vIDo6ICgpIOKGkiBzdHJpbmdcbiAgLy8gUmV0dXJucyBhIHN0cmluZyBjb250YWluaW5nIHRoZSBtb2R1bGUncyBDU1MgcnVsZXMuXG4gIGdldFJ1bGVzKCkgeyByZXR1cm4gdGhpcy5ydWxlcy5qb2luKFwiXFxuXCIpIH1cblxuICAvLyA6OiAoKSDihpIgc3RyaW5nXG4gIC8vIEdlbmVyYXRlIGEgbmV3IHVuaXF1ZSBDU1MgY2xhc3MgbmFtZS5cbiAgc3RhdGljIG5ld05hbWUoKSB7XG4gICAgbGV0IGlkID0gdG9wW0NPVU5UXSB8fCAxXG4gICAgdG9wW0NPVU5UXSA9IGlkICsgMVxuICAgIHJldHVybiBDICsgaWQudG9TdHJpbmcoMzYpXG4gIH1cblxuICAvLyA6OiAodW5pb248RG9jdW1lbnQsIFNoYWRvd1Jvb3Q+LCB1bmlvbjxbU3R5bGVNb2R1bGVdLCBTdHlsZU1vZHVsZT4sID97bm9uY2U6ID9zdHJpbmd9KVxuICAvL1xuICAvLyBNb3VudCB0aGUgZ2l2ZW4gc2V0IG9mIG1vZHVsZXMgaW4gdGhlIGdpdmVuIERPTSByb290LCB3aGljaCBlbnN1cmVzXG4gIC8vIHRoYXQgdGhlIENTUyBydWxlcyBkZWZpbmVkIGJ5IHRoZSBtb2R1bGUgYXJlIGF2YWlsYWJsZSBpbiB0aGF0XG4gIC8vIGNvbnRleHQuXG4gIC8vXG4gIC8vIFJ1bGVzIGFyZSBvbmx5IGFkZGVkIHRvIHRoZSBkb2N1bWVudCBvbmNlIHBlciByb290LlxuICAvL1xuICAvLyBSdWxlIG9yZGVyIHdpbGwgZm9sbG93IHRoZSBvcmRlciBvZiB0aGUgbW9kdWxlcywgc28gdGhhdCBydWxlcyBmcm9tXG4gIC8vIG1vZHVsZXMgbGF0ZXIgaW4gdGhlIGFycmF5IHRha2UgcHJlY2VkZW5jZSBvZiB0aG9zZSBmcm9tIGVhcmxpZXJcbiAgLy8gbW9kdWxlcy4gSWYgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBtdWx0aXBsZSB0aW1lcyBmb3IgdGhlIHNhbWUgcm9vdFxuICAvLyBpbiBhIHdheSB0aGF0IGNoYW5nZXMgdGhlIG9yZGVyIG9mIGFscmVhZHkgbW91bnRlZCBtb2R1bGVzLCB0aGUgb2xkXG4gIC8vIG9yZGVyIHdpbGwgYmUgY2hhbmdlZC5cbiAgLy9cbiAgLy8gSWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBub25jZSBpcyBwcm92aWRlZCwgaXQgaXMgYWRkZWQgdG9cbiAgLy8gdGhlIGA8c3R5bGU+YCB0YWcgZ2VuZXJhdGVkIGJ5IHRoZSBsaWJyYXJ5LlxuICBzdGF0aWMgbW91bnQocm9vdCwgbW9kdWxlcywgb3B0aW9ucykge1xuICAgIGxldCBzZXQgPSByb290W1NFVF0sIG5vbmNlID0gb3B0aW9ucyAmJiBvcHRpb25zLm5vbmNlXG4gICAgaWYgKCFzZXQpIHNldCA9IG5ldyBTdHlsZVNldChyb290LCBub25jZSlcbiAgICBlbHNlIGlmIChub25jZSkgc2V0LnNldE5vbmNlKG5vbmNlKVxuICAgIHNldC5tb3VudChBcnJheS5pc0FycmF5KG1vZHVsZXMpID8gbW9kdWxlcyA6IFttb2R1bGVzXSwgcm9vdClcbiAgfVxufVxuXG5sZXQgYWRvcHRlZFNldCA9IG5ldyBNYXAgLy88RG9jdW1lbnQsIFN0eWxlU2V0PlxuXG5jbGFzcyBTdHlsZVNldCB7XG4gIGNvbnN0cnVjdG9yKHJvb3QsIG5vbmNlKSB7XG4gICAgbGV0IGRvYyA9IHJvb3Qub3duZXJEb2N1bWVudCB8fCByb290LCB3aW4gPSBkb2MuZGVmYXVsdFZpZXdcbiAgICBpZiAoIXJvb3QuaGVhZCAmJiByb290LmFkb3B0ZWRTdHlsZVNoZWV0cyAmJiB3aW4uQ1NTU3R5bGVTaGVldCkge1xuICAgICAgbGV0IGFkb3B0ZWQgPSBhZG9wdGVkU2V0LmdldChkb2MpXG4gICAgICBpZiAoYWRvcHRlZCkgcmV0dXJuIHJvb3RbU0VUXSA9IGFkb3B0ZWRcbiAgICAgIHRoaXMuc2hlZXQgPSBuZXcgd2luLkNTU1N0eWxlU2hlZXRcbiAgICAgIGFkb3B0ZWRTZXQuc2V0KGRvYywgdGhpcylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdHlsZVRhZyA9IGRvYy5jcmVhdGVFbGVtZW50KFwic3R5bGVcIilcbiAgICAgIGlmIChub25jZSkgdGhpcy5zdHlsZVRhZy5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSlcbiAgICB9XG4gICAgdGhpcy5tb2R1bGVzID0gW11cbiAgICByb290W1NFVF0gPSB0aGlzXG4gIH1cblxuICBtb3VudChtb2R1bGVzLCByb290KSB7XG4gICAgbGV0IHNoZWV0ID0gdGhpcy5zaGVldFxuICAgIGxldCBwb3MgPSAwIC8qIEN1cnJlbnQgcnVsZSBvZmZzZXQgKi8sIGogPSAwIC8qIEluZGV4IGludG8gdGhpcy5tb2R1bGVzICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgbW9kID0gbW9kdWxlc1tpXSwgaW5kZXggPSB0aGlzLm1vZHVsZXMuaW5kZXhPZihtb2QpXG4gICAgICBpZiAoaW5kZXggPCBqICYmIGluZGV4ID4gLTEpIHsgLy8gT3JkZXJpbmcgY29uZmxpY3RcbiAgICAgICAgdGhpcy5tb2R1bGVzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgai0tXG4gICAgICAgIGluZGV4ID0gLTFcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA9PSAtMSkge1xuICAgICAgICB0aGlzLm1vZHVsZXMuc3BsaWNlKGorKywgMCwgbW9kKVxuICAgICAgICBpZiAoc2hlZXQpIGZvciAobGV0IGsgPSAwOyBrIDwgbW9kLnJ1bGVzLmxlbmd0aDsgaysrKVxuICAgICAgICAgIHNoZWV0Lmluc2VydFJ1bGUobW9kLnJ1bGVzW2tdLCBwb3MrKylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoaWxlIChqIDwgaW5kZXgpIHBvcyArPSB0aGlzLm1vZHVsZXNbaisrXS5ydWxlcy5sZW5ndGhcbiAgICAgICAgcG9zICs9IG1vZC5ydWxlcy5sZW5ndGhcbiAgICAgICAgaisrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNoZWV0KSB7XG4gICAgICBpZiAocm9vdC5hZG9wdGVkU3R5bGVTaGVldHMuaW5kZXhPZih0aGlzLnNoZWV0KSA8IDApXG4gICAgICAgIHJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3RoaXMuc2hlZXQsIC4uLnJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzXVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdGV4dCA9IFwiXCJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2R1bGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB0ZXh0ICs9IHRoaXMubW9kdWxlc1tpXS5nZXRSdWxlcygpICsgXCJcXG5cIlxuICAgICAgdGhpcy5zdHlsZVRhZy50ZXh0Q29udGVudCA9IHRleHRcbiAgICAgIGxldCB0YXJnZXQgPSByb290LmhlYWQgfHwgcm9vdFxuICAgICAgaWYgKHRoaXMuc3R5bGVUYWcucGFyZW50Tm9kZSAhPSB0YXJnZXQpXG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodGhpcy5zdHlsZVRhZywgdGFyZ2V0LmZpcnN0Q2hpbGQpXG4gICAgfVxuICB9XG5cbiAgc2V0Tm9uY2Uobm9uY2UpIHtcbiAgICBpZiAodGhpcy5zdHlsZVRhZyAmJiB0aGlzLnN0eWxlVGFnLmdldEF0dHJpYnV0ZShcIm5vbmNlXCIpICE9IG5vbmNlKVxuICAgICAgdGhpcy5zdHlsZVRhZy5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSlcbiAgfVxufVxuXG4vLyBTdHlsZTo6T2JqZWN0PHVuaW9uPFN0eWxlLHN0cmluZz4+XG4vL1xuLy8gQSBzdHlsZSBpcyBhbiBvYmplY3QgdGhhdCwgaW4gdGhlIHNpbXBsZSBjYXNlLCBtYXBzIENTUyBwcm9wZXJ0eVxuLy8gbmFtZXMgdG8gc3RyaW5ncyBob2xkaW5nIHRoZWlyIHZhbHVlcywgYXMgaW4gYHtjb2xvcjogXCJyZWRcIixcbi8vIGZvbnRXZWlnaHQ6IFwiYm9sZFwifWAuIFRoZSBwcm9wZXJ0eSBuYW1lcyBjYW4gYmUgZ2l2ZW4gaW5cbi8vIGNhbWVsLWNhc2XigJR0aGUgbGlicmFyeSB3aWxsIGluc2VydCBhIGRhc2ggYmVmb3JlIGNhcGl0YWwgbGV0dGVyc1xuLy8gd2hlbiBjb252ZXJ0aW5nIHRoZW0gdG8gQ1NTLlxuLy9cbi8vIElmIHlvdSBpbmNsdWRlIGFuIHVuZGVyc2NvcmUgaW4gYSBwcm9wZXJ0eSBuYW1lLCBpdCBhbmQgZXZlcnl0aGluZ1xuLy8gYWZ0ZXIgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIG91dHB1dCwgd2hpY2ggY2FuIGJlIHVzZWZ1bCB3aGVuXG4vLyBwcm92aWRpbmcgYSBwcm9wZXJ0eSBtdWx0aXBsZSB0aW1lcywgZm9yIGJyb3dzZXIgY29tcGF0aWJpbGl0eVxuLy8gcmVhc29ucy5cbi8vXG4vLyBBIHByb3BlcnR5IGluIGEgc3R5bGUgb2JqZWN0IGNhbiBhbHNvIGJlIGEgc3ViLXNlbGVjdG9yLCB3aGljaFxuLy8gZXh0ZW5kcyB0aGUgY3VycmVudCBjb250ZXh0IHRvIGFkZCBhIHBzZXVkby1zZWxlY3RvciBvciBhIGNoaWxkXG4vLyBzZWxlY3Rvci4gU3VjaCBhIHByb3BlcnR5IHNob3VsZCBjb250YWluIGEgYCZgIGNoYXJhY3Rlciwgd2hpY2hcbi8vIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGN1cnJlbnQgc2VsZWN0b3IuIEZvciBleGFtcGxlIGB7XCImOmJlZm9yZVwiOlxuLy8ge2NvbnRlbnQ6ICdcImhpXCInfX1gLiBTdWItc2VsZWN0b3JzIGFuZCByZWd1bGFyIHByb3BlcnRpZXMgY2FuXG4vLyBmcmVlbHkgYmUgbWl4ZWQgaW4gYSBnaXZlbiBvYmplY3QuIEFueSBwcm9wZXJ0eSBjb250YWluaW5nIGEgYCZgIGlzXG4vLyBhc3N1bWVkIHRvIGJlIGEgc3ViLXNlbGVjdG9yLlxuLy9cbi8vIEZpbmFsbHksIGEgcHJvcGVydHkgY2FuIHNwZWNpZnkgYW4gQC1ibG9jayB0byBiZSB3cmFwcGVkIGFyb3VuZCB0aGVcbi8vIHN0eWxlcyBkZWZpbmVkIGluc2lkZSB0aGUgb2JqZWN0IHRoYXQncyB0aGUgcHJvcGVydHkncyB2YWx1ZS4gRm9yXG4vLyBleGFtcGxlIHRvIGNyZWF0ZSBhIG1lZGlhIHF1ZXJ5IHlvdSBjYW4gZG8gYHtcIkBtZWRpYSBzY3JlZW4gYW5kXG4vLyAobWluLXdpZHRoOiA0MDBweClcIjogey4uLn19YC5cbiIsCiAgICAiZXhwb3J0IHZhciBiYXNlID0ge1xuICA4OiBcIkJhY2tzcGFjZVwiLFxuICA5OiBcIlRhYlwiLFxuICAxMDogXCJFbnRlclwiLFxuICAxMjogXCJOdW1Mb2NrXCIsXG4gIDEzOiBcIkVudGVyXCIsXG4gIDE2OiBcIlNoaWZ0XCIsXG4gIDE3OiBcIkNvbnRyb2xcIixcbiAgMTg6IFwiQWx0XCIsXG4gIDIwOiBcIkNhcHNMb2NrXCIsXG4gIDI3OiBcIkVzY2FwZVwiLFxuICAzMjogXCIgXCIsXG4gIDMzOiBcIlBhZ2VVcFwiLFxuICAzNDogXCJQYWdlRG93blwiLFxuICAzNTogXCJFbmRcIixcbiAgMzY6IFwiSG9tZVwiLFxuICAzNzogXCJBcnJvd0xlZnRcIixcbiAgMzg6IFwiQXJyb3dVcFwiLFxuICAzOTogXCJBcnJvd1JpZ2h0XCIsXG4gIDQwOiBcIkFycm93RG93blwiLFxuICA0NDogXCJQcmludFNjcmVlblwiLFxuICA0NTogXCJJbnNlcnRcIixcbiAgNDY6IFwiRGVsZXRlXCIsXG4gIDU5OiBcIjtcIixcbiAgNjE6IFwiPVwiLFxuICA5MTogXCJNZXRhXCIsXG4gIDkyOiBcIk1ldGFcIixcbiAgMTA2OiBcIipcIixcbiAgMTA3OiBcIitcIixcbiAgMTA4OiBcIixcIixcbiAgMTA5OiBcIi1cIixcbiAgMTEwOiBcIi5cIixcbiAgMTExOiBcIi9cIixcbiAgMTQ0OiBcIk51bUxvY2tcIixcbiAgMTQ1OiBcIlNjcm9sbExvY2tcIixcbiAgMTYwOiBcIlNoaWZ0XCIsXG4gIDE2MTogXCJTaGlmdFwiLFxuICAxNjI6IFwiQ29udHJvbFwiLFxuICAxNjM6IFwiQ29udHJvbFwiLFxuICAxNjQ6IFwiQWx0XCIsXG4gIDE2NTogXCJBbHRcIixcbiAgMTczOiBcIi1cIixcbiAgMTg2OiBcIjtcIixcbiAgMTg3OiBcIj1cIixcbiAgMTg4OiBcIixcIixcbiAgMTg5OiBcIi1cIixcbiAgMTkwOiBcIi5cIixcbiAgMTkxOiBcIi9cIixcbiAgMTkyOiBcImBcIixcbiAgMjE5OiBcIltcIixcbiAgMjIwOiBcIlxcXFxcIixcbiAgMjIxOiBcIl1cIixcbiAgMjIyOiBcIidcIlxufVxuXG5leHBvcnQgdmFyIHNoaWZ0ID0ge1xuICA0ODogXCIpXCIsXG4gIDQ5OiBcIiFcIixcbiAgNTA6IFwiQFwiLFxuICA1MTogXCIjXCIsXG4gIDUyOiBcIiRcIixcbiAgNTM6IFwiJVwiLFxuICA1NDogXCJeXCIsXG4gIDU1OiBcIiZcIixcbiAgNTY6IFwiKlwiLFxuICA1NzogXCIoXCIsXG4gIDU5OiBcIjpcIixcbiAgNjE6IFwiK1wiLFxuICAxNzM6IFwiX1wiLFxuICAxODY6IFwiOlwiLFxuICAxODc6IFwiK1wiLFxuICAxODg6IFwiPFwiLFxuICAxODk6IFwiX1wiLFxuICAxOTA6IFwiPlwiLFxuICAxOTE6IFwiP1wiLFxuICAxOTI6IFwiflwiLFxuICAyMTk6IFwie1wiLFxuICAyMjA6IFwifFwiLFxuICAyMjE6IFwifVwiLFxuICAyMjI6IFwiXFxcIlwiXG59XG5cbnZhciBtYWMgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pXG52YXIgaWUgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgXFxkfFRyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIEZpbGwgaW4gdGhlIGRpZ2l0IGtleXNcbmZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgYmFzZVs0OCArIGldID0gYmFzZVs5NiArIGldID0gU3RyaW5nKGkpXG5cbi8vIFRoZSBmdW5jdGlvbiBrZXlzXG5mb3IgKHZhciBpID0gMTsgaSA8PSAyNDsgaSsrKSBiYXNlW2kgKyAxMTFdID0gXCJGXCIgKyBpXG5cbi8vIEFuZCB0aGUgYWxwaGFiZXRpYyBrZXlzXG5mb3IgKHZhciBpID0gNjU7IGkgPD0gOTA7IGkrKykge1xuICBiYXNlW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpICsgMzIpXG4gIHNoaWZ0W2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKVxufVxuXG4vLyBGb3IgZWFjaCBjb2RlIHRoYXQgZG9lc24ndCBoYXZlIGEgc2hpZnQtZXF1aXZhbGVudCwgY29weSB0aGUgYmFzZSBuYW1lXG5mb3IgKHZhciBjb2RlIGluIGJhc2UpIGlmICghc2hpZnQuaGFzT3duUHJvcGVydHkoY29kZSkpIHNoaWZ0W2NvZGVdID0gYmFzZVtjb2RlXVxuXG5leHBvcnQgZnVuY3Rpb24ga2V5TmFtZShldmVudCkge1xuICAvLyBPbiBtYWNPUywga2V5cyBoZWxkIHdpdGggU2hpZnQgYW5kIENtZCBkb24ndCByZWZsZWN0IHRoZSBlZmZlY3Qgb2YgU2hpZnQgaW4gYC5rZXlgLlxuICAvLyBPbiBJRSwgc2hpZnQgZWZmZWN0IGlzIG5ldmVyIGluY2x1ZGVkIGluIGAua2V5YC5cbiAgdmFyIGlnbm9yZUtleSA9IG1hYyAmJiBldmVudC5tZXRhS2V5ICYmIGV2ZW50LnNoaWZ0S2V5ICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5hbHRLZXkgfHxcbiAgICAgIGllICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LmtleSAmJiBldmVudC5rZXkubGVuZ3RoID09IDEgfHxcbiAgICAgIGV2ZW50LmtleSA9PSBcIlVuaWRlbnRpZmllZFwiXG4gIHZhciBuYW1lID0gKCFpZ25vcmVLZXkgJiYgZXZlbnQua2V5KSB8fFxuICAgIChldmVudC5zaGlmdEtleSA/IHNoaWZ0IDogYmFzZSlbZXZlbnQua2V5Q29kZV0gfHxcbiAgICBldmVudC5rZXkgfHwgXCJVbmlkZW50aWZpZWRcIlxuICAvLyBFZGdlIHNvbWV0aW1lcyBwcm9kdWNlcyB3cm9uZyBuYW1lcyAoSXNzdWUgIzMpXG4gIGlmIChuYW1lID09IFwiRXNjXCIpIG5hbWUgPSBcIkVzY2FwZVwiXG4gIGlmIChuYW1lID09IFwiRGVsXCIpIG5hbWUgPSBcIkRlbGV0ZVwiXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzg4NjA1NzEvXG4gIGlmIChuYW1lID09IFwiTGVmdFwiKSBuYW1lID0gXCJBcnJvd0xlZnRcIlxuICBpZiAobmFtZSA9PSBcIlVwXCIpIG5hbWUgPSBcIkFycm93VXBcIlxuICBpZiAobmFtZSA9PSBcIlJpZ2h0XCIpIG5hbWUgPSBcIkFycm93UmlnaHRcIlxuICBpZiAobmFtZSA9PSBcIkRvd25cIikgbmFtZSA9IFwiQXJyb3dEb3duXCJcbiAgcmV0dXJuIG5hbWVcbn1cbiIsCiAgICAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlbHQoKSB7XG4gIHZhciBlbHQgPSBhcmd1bWVudHNbMF1cbiAgaWYgKHR5cGVvZiBlbHQgPT0gXCJzdHJpbmdcIikgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbHQpXG4gIHZhciBpID0gMSwgbmV4dCA9IGFyZ3VtZW50c1sxXVxuICBpZiAobmV4dCAmJiB0eXBlb2YgbmV4dCA9PSBcIm9iamVjdFwiICYmIG5leHQubm9kZVR5cGUgPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShuZXh0KSkge1xuICAgIGZvciAodmFyIG5hbWUgaW4gbmV4dCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0LCBuYW1lKSkge1xuICAgICAgdmFyIHZhbHVlID0gbmV4dFtuYW1lXVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSBlbHQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKVxuICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkgZWx0W25hbWVdID0gdmFsdWVcbiAgICB9XG4gICAgaSsrXG4gIH1cbiAgZm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFkZChlbHQsIGFyZ3VtZW50c1tpXSlcbiAgcmV0dXJuIGVsdFxufVxuXG5mdW5jdGlvbiBhZGQoZWx0LCBjaGlsZCkge1xuICBpZiAodHlwZW9mIGNoaWxkID09IFwic3RyaW5nXCIpIHtcbiAgICBlbHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2hpbGQpKVxuICB9IGVsc2UgaWYgKGNoaWxkID09IG51bGwpIHtcbiAgfSBlbHNlIGlmIChjaGlsZC5ub2RlVHlwZSAhPSBudWxsKSB7XG4gICAgZWx0LmFwcGVuZENoaWxkKGNoaWxkKVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZC5sZW5ndGg7IGkrKykgYWRkKGVsdCwgY2hpbGRbaV0pXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVbnN1cHBvcnRlZCBjaGlsZCBub2RlOiBcIiArIGNoaWxkKVxuICB9XG59XG4iLAogICAgImltcG9ydCB7IFRleHQsIFJhbmdlU2V0LCBNYXBNb2RlLCBSYW5nZVZhbHVlLCBmaW5kQ2x1c3RlckJyZWFrLCBFZGl0b3JTZWxlY3Rpb24sIEZhY2V0LCBTdGF0ZUVmZmVjdCwgQ2hhbmdlU2V0LCBmaW5kQ29sdW1uLCBDaGFyQ2F0ZWdvcnksIEVkaXRvclN0YXRlLCBBbm5vdGF0aW9uLCBUcmFuc2FjdGlvbiwgUHJlYywgY29kZVBvaW50QXQsIGNvZGVQb2ludFNpemUsIGNvbWJpbmVDb25maWcsIFN0YXRlRmllbGQsIFJhbmdlU2V0QnVpbGRlciwgY291bnRDb2x1bW4gfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBTdHlsZU1vZHVsZSB9IGZyb20gJ3N0eWxlLW1vZCc7XG5pbXBvcnQgeyBrZXlOYW1lLCBiYXNlLCBzaGlmdCB9IGZyb20gJ3czYy1rZXluYW1lJztcbmltcG9ydCBlbHQgZnJvbSAnY3JlbHQnO1xuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24ocm9vdCkge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgLy8gQnJvd3NlcnMgZGlmZmVyIG9uIHdoZXRoZXIgc2hhZG93IHJvb3RzIGhhdmUgYSBnZXRTZWxlY3Rpb25cbiAgICAvLyBtZXRob2QuIElmIGl0IGV4aXN0cywgdXNlIHRoYXQsIG90aGVyd2lzZSwgY2FsbCBpdCBvbiB0aGVcbiAgICAvLyBkb2N1bWVudC5cbiAgICBpZiAocm9vdC5ub2RlVHlwZSA9PSAxMSkgeyAvLyBTaGFkb3cgcm9vdFxuICAgICAgICB0YXJnZXQgPSByb290LmdldFNlbGVjdGlvbiA/IHJvb3QgOiByb290Lm93bmVyRG9jdW1lbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0YXJnZXQgPSByb290O1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0LmdldFNlbGVjdGlvbigpO1xufVxuZnVuY3Rpb24gY29udGFpbnMoZG9tLCBub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgPyBkb20gPT0gbm9kZSB8fCBkb20uY29udGFpbnMobm9kZS5ub2RlVHlwZSAhPSAxID8gbm9kZS5wYXJlbnROb2RlIDogbm9kZSkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGhhc1NlbGVjdGlvbihkb20sIHNlbGVjdGlvbikge1xuICAgIGlmICghc2VsZWN0aW9uLmFuY2hvck5vZGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBGaXJlZm94IHdpbGwgcmFpc2UgJ3Blcm1pc3Npb24gZGVuaWVkJyBlcnJvcnMgd2hlbiBhY2Nlc3NpbmdcbiAgICAgICAgLy8gcHJvcGVydGllcyBvZiBgc2VsLmFuY2hvck5vZGVgIHdoZW4gaXQncyBpbiBhIGdlbmVyYXRlZCBDU1NcbiAgICAgICAgLy8gZWxlbWVudC5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zKGRvbSwgc2VsZWN0aW9uLmFuY2hvck5vZGUpO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xpZW50UmVjdHNGb3IoZG9tKSB7XG4gICAgaWYgKGRvbS5ub2RlVHlwZSA9PSAzKVxuICAgICAgICByZXR1cm4gdGV4dFJhbmdlKGRvbSwgMCwgZG9tLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCk7XG4gICAgZWxzZSBpZiAoZG9tLm5vZGVUeXBlID09IDEpXG4gICAgICAgIHJldHVybiBkb20uZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBbXTtcbn1cbi8vIFNjYW5zIGZvcndhcmQgYW5kIGJhY2t3YXJkIHRocm91Z2ggRE9NIHBvc2l0aW9ucyBlcXVpdmFsZW50IHRvIHRoZVxuLy8gZ2l2ZW4gb25lIHRvIHNlZSBpZiB0aGUgdHdvIGFyZSBpbiB0aGUgc2FtZSBwbGFjZSAoaS5lLiBhZnRlciBhXG4vLyB0ZXh0IG5vZGUgdnMgYXQgdGhlIGVuZCBvZiB0aGF0IHRleHQgbm9kZSlcbmZ1bmN0aW9uIGlzRXF1aXZhbGVudFBvc2l0aW9uKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmKSB7XG4gICAgcmV0dXJuIHRhcmdldE5vZGUgPyAoc2NhbkZvcihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZiwgLTEpIHx8XG4gICAgICAgIHNjYW5Gb3Iobm9kZSwgb2ZmLCB0YXJnZXROb2RlLCB0YXJnZXRPZmYsIDEpKSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gZG9tSW5kZXgobm9kZSkge1xuICAgIGZvciAodmFyIGluZGV4ID0gMDs7IGluZGV4KyspIHtcbiAgICAgICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNCbG9ja0VsZW1lbnQobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09IDEgJiYgL14oRElWfFB8TEl8VUx8T0x8QkxPQ0tRVU9URXxERHxEVHxIXFxkfFNFQ1RJT058UFJFKSQvLnRlc3Qobm9kZS5ub2RlTmFtZSk7XG59XG5mdW5jdGlvbiBzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCBkaXIpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChub2RlID09IHRhcmdldE5vZGUgJiYgb2ZmID09IHRhcmdldE9mZilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob2ZmID09IChkaXIgPCAwID8gMCA6IG1heE9mZnNldChub2RlKSkpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IFwiRElWXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICghcGFyZW50IHx8IHBhcmVudC5ub2RlVHlwZSAhPSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG9mZiA9IGRvbUluZGV4KG5vZGUpICsgKGRpciA8IDAgPyAwIDogMSk7XG4gICAgICAgICAgICBub2RlID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmYgKyAoZGlyIDwgMCA/IC0xIDogMCldO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBub2RlLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgb2ZmID0gZGlyIDwgMCA/IG1heE9mZnNldChub2RlKSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBtYXhPZmZzZXQobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlLm5vZGVWYWx1ZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gZmxhdHRlblJlY3QocmVjdCwgbGVmdCkge1xuICAgIGxldCB4ID0gbGVmdCA/IHJlY3QubGVmdCA6IHJlY3QucmlnaHQ7XG4gICAgcmV0dXJuIHsgbGVmdDogeCwgcmlnaHQ6IHgsIHRvcDogcmVjdC50b3AsIGJvdHRvbTogcmVjdC5ib3R0b20gfTtcbn1cbmZ1bmN0aW9uIHdpbmRvd1JlY3Qod2luKSB7XG4gICAgbGV0IHZwID0gd2luLnZpc3VhbFZpZXdwb3J0O1xuICAgIGlmICh2cClcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZnQ6IDAsIHJpZ2h0OiB2cC53aWR0aCxcbiAgICAgICAgICAgIHRvcDogMCwgYm90dG9tOiB2cC5oZWlnaHRcbiAgICAgICAgfTtcbiAgICByZXR1cm4geyBsZWZ0OiAwLCByaWdodDogd2luLmlubmVyV2lkdGgsXG4gICAgICAgIHRvcDogMCwgYm90dG9tOiB3aW4uaW5uZXJIZWlnaHQgfTtcbn1cbmZ1bmN0aW9uIGdldFNjYWxlKGVsdCwgcmVjdCkge1xuICAgIGxldCBzY2FsZVggPSByZWN0LndpZHRoIC8gZWx0Lm9mZnNldFdpZHRoO1xuICAgIGxldCBzY2FsZVkgPSByZWN0LmhlaWdodCAvIGVsdC5vZmZzZXRIZWlnaHQ7XG4gICAgaWYgKHNjYWxlWCA+IDAuOTk1ICYmIHNjYWxlWCA8IDEuMDA1IHx8ICFpc0Zpbml0ZShzY2FsZVgpIHx8IE1hdGguYWJzKHJlY3Qud2lkdGggLSBlbHQub2Zmc2V0V2lkdGgpIDwgMSlcbiAgICAgICAgc2NhbGVYID0gMTtcbiAgICBpZiAoc2NhbGVZID4gMC45OTUgJiYgc2NhbGVZIDwgMS4wMDUgfHwgIWlzRmluaXRlKHNjYWxlWSkgfHwgTWF0aC5hYnMocmVjdC5oZWlnaHQgLSBlbHQub2Zmc2V0SGVpZ2h0KSA8IDEpXG4gICAgICAgIHNjYWxlWSA9IDE7XG4gICAgcmV0dXJuIHsgc2NhbGVYLCBzY2FsZVkgfTtcbn1cbmZ1bmN0aW9uIHNjcm9sbFJlY3RJbnRvVmlldyhkb20sIHJlY3QsIHNpZGUsIHgsIHksIHhNYXJnaW4sIHlNYXJnaW4sIGx0cikge1xuICAgIGxldCBkb2MgPSBkb20ub3duZXJEb2N1bWVudCwgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IHdpbmRvdztcbiAgICBmb3IgKGxldCBjdXIgPSBkb20sIHN0b3AgPSBmYWxzZTsgY3VyICYmICFzdG9wOykge1xuICAgICAgICBpZiAoY3VyLm5vZGVUeXBlID09IDEpIHsgLy8gRWxlbWVudFxuICAgICAgICAgICAgbGV0IGJvdW5kaW5nLCB0b3AgPSBjdXIgPT0gZG9jLmJvZHk7XG4gICAgICAgICAgICBsZXQgc2NhbGVYID0gMSwgc2NhbGVZID0gMTtcbiAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICBib3VuZGluZyA9IHdpbmRvd1JlY3Qod2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgvXihmaXhlZHxzdGlja3kpJC8udGVzdChnZXRDb21wdXRlZFN0eWxlKGN1cikucG9zaXRpb24pKVxuICAgICAgICAgICAgICAgICAgICBzdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLnNjcm9sbEhlaWdodCA8PSBjdXIuY2xpZW50SGVpZ2h0ICYmIGN1ci5zY3JvbGxXaWR0aCA8PSBjdXIuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByZWN0ID0gY3VyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICh7IHNjYWxlWCwgc2NhbGVZIH0gPSBnZXRTY2FsZShjdXIsIHJlY3QpKTtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgc2Nyb2xsYmFyIHdpZHRoIGlzbid0IGluY2x1ZGVkIGluIHRoZSByZWN0YW5nbGVcbiAgICAgICAgICAgICAgICBib3VuZGluZyA9IHsgbGVmdDogcmVjdC5sZWZ0LCByaWdodDogcmVjdC5sZWZ0ICsgY3VyLmNsaWVudFdpZHRoICogc2NhbGVYLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHJlY3QudG9wLCBib3R0b206IHJlY3QudG9wICsgY3VyLmNsaWVudEhlaWdodCAqIHNjYWxlWSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1vdmVYID0gMCwgbW92ZVkgPSAwO1xuICAgICAgICAgICAgaWYgKHkgPT0gXCJuZWFyZXN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVjdC50b3AgPCBib3VuZGluZy50b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LnRvcCAtIChib3VuZGluZy50b3AgKyB5TWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPiAwICYmIHJlY3QuYm90dG9tID4gYm91bmRpbmcuYm90dG9tICsgbW92ZVkpXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlWSA9IHJlY3QuYm90dG9tIC0gYm91bmRpbmcuYm90dG9tICsgeU1hcmdpbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVjdC5ib3R0b20gPiBib3VuZGluZy5ib3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LmJvdHRvbSAtIGJvdW5kaW5nLmJvdHRvbSArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlIDwgMCAmJiAocmVjdC50b3AgLSBtb3ZlWSkgPCBib3VuZGluZy50b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlWSA9IHJlY3QudG9wIC0gKGJvdW5kaW5nLnRvcCArIHlNYXJnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCByZWN0SGVpZ2h0ID0gcmVjdC5ib3R0b20gLSByZWN0LnRvcCwgYm91bmRpbmdIZWlnaHQgPSBib3VuZGluZy5ib3R0b20gLSBib3VuZGluZy50b3A7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldFRvcCA9IHkgPT0gXCJjZW50ZXJcIiAmJiByZWN0SGVpZ2h0IDw9IGJvdW5kaW5nSGVpZ2h0ID8gcmVjdC50b3AgKyByZWN0SGVpZ2h0IC8gMiAtIGJvdW5kaW5nSGVpZ2h0IC8gMiA6XG4gICAgICAgICAgICAgICAgICAgIHkgPT0gXCJzdGFydFwiIHx8IHkgPT0gXCJjZW50ZXJcIiAmJiBzaWRlIDwgMCA/IHJlY3QudG9wIC0geU1hcmdpbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LmJvdHRvbSAtIGJvdW5kaW5nSGVpZ2h0ICsgeU1hcmdpbjtcbiAgICAgICAgICAgICAgICBtb3ZlWSA9IHRhcmdldFRvcCAtIGJvdW5kaW5nLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4ID09IFwibmVhcmVzdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3QubGVmdCA8IGJvdW5kaW5nLmxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LmxlZnQgLSAoYm91bmRpbmcubGVmdCArIHhNYXJnaW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA+IDAgJiYgcmVjdC5yaWdodCA+IGJvdW5kaW5nLnJpZ2h0ICsgbW92ZVgpXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlWCA9IHJlY3QucmlnaHQgLSBib3VuZGluZy5yaWdodCArIHhNYXJnaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlY3QucmlnaHQgPiBib3VuZGluZy5yaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBtb3ZlWCA9IHJlY3QucmlnaHQgLSBib3VuZGluZy5yaWdodCArIHhNYXJnaW47XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlIDwgMCAmJiByZWN0LmxlZnQgPCBib3VuZGluZy5sZWZ0ICsgbW92ZVgpXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlWCA9IHJlY3QubGVmdCAtIChib3VuZGluZy5sZWZ0ICsgeE1hcmdpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldExlZnQgPSB4ID09IFwiY2VudGVyXCIgPyByZWN0LmxlZnQgKyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAyIC0gKGJvdW5kaW5nLnJpZ2h0IC0gYm91bmRpbmcubGVmdCkgLyAyIDpcbiAgICAgICAgICAgICAgICAgICAgKHggPT0gXCJzdGFydFwiKSA9PSBsdHIgPyByZWN0LmxlZnQgLSB4TWFyZ2luIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QucmlnaHQgLSAoYm91bmRpbmcucmlnaHQgLSBib3VuZGluZy5sZWZ0KSArIHhNYXJnaW47XG4gICAgICAgICAgICAgICAgbW92ZVggPSB0YXJnZXRMZWZ0IC0gYm91bmRpbmcubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb3ZlWCB8fCBtb3ZlWSkge1xuICAgICAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luLnNjcm9sbEJ5KG1vdmVYLCBtb3ZlWSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW92ZWRYID0gMCwgbW92ZWRZID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBjdXIuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyLnNjcm9sbFRvcCArPSBtb3ZlWSAvIHNjYWxlWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkWSA9IChjdXIuc2Nyb2xsVG9wIC0gc3RhcnQpICogc2NhbGVZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlWCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gY3VyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXIuc2Nyb2xsTGVmdCArPSBtb3ZlWCAvIHNjYWxlWDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkWCA9IChjdXIuc2Nyb2xsTGVmdCAtIHN0YXJ0KSAqIHNjYWxlWDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZWN0ID0geyBsZWZ0OiByZWN0LmxlZnQgLSBtb3ZlZFgsIHRvcDogcmVjdC50b3AgLSBtb3ZlZFksXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogcmVjdC5yaWdodCAtIG1vdmVkWCwgYm90dG9tOiByZWN0LmJvdHRvbSAtIG1vdmVkWSB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZWRYICYmIE1hdGguYWJzKG1vdmVkWCAtIG1vdmVYKSA8IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gXCJuZWFyZXN0XCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlZFkgJiYgTWF0aC5hYnMobW92ZWRZIC0gbW92ZVkpIDwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBcIm5lYXJlc3RcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9wKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHJlY3QudG9wIDwgYm91bmRpbmcudG9wIHx8IHJlY3QuYm90dG9tID4gYm91bmRpbmcuYm90dG9tIHx8XG4gICAgICAgICAgICAgICAgcmVjdC5sZWZ0IDwgYm91bmRpbmcubGVmdCB8fCByZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQpXG4gICAgICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogTWF0aC5tYXgocmVjdC5sZWZ0LCBib3VuZGluZy5sZWZ0KSwgcmlnaHQ6IE1hdGgubWluKHJlY3QucmlnaHQsIGJvdW5kaW5nLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBNYXRoLm1heChyZWN0LnRvcCwgYm91bmRpbmcudG9wKSwgYm90dG9tOiBNYXRoLm1pbihyZWN0LmJvdHRvbSwgYm91bmRpbmcuYm90dG9tKSB9O1xuICAgICAgICAgICAgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIubm9kZVR5cGUgPT0gMTEpIHsgLy8gQSBzaGFkb3cgcm9vdFxuICAgICAgICAgICAgY3VyID0gY3VyLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNjcm9sbGFibGVQYXJlbnRzKGRvbSkge1xuICAgIGxldCBkb2MgPSBkb20ub3duZXJEb2N1bWVudCwgeCwgeTtcbiAgICBmb3IgKGxldCBjdXIgPSBkb20ucGFyZW50Tm9kZTsgY3VyOykge1xuICAgICAgICBpZiAoY3VyID09IGRvYy5ib2R5IHx8ICh4ICYmIHkpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgaWYgKCF5ICYmIGN1ci5zY3JvbGxIZWlnaHQgPiBjdXIuY2xpZW50SGVpZ2h0KVxuICAgICAgICAgICAgICAgIHkgPSBjdXI7XG4gICAgICAgICAgICBpZiAoIXggJiYgY3VyLnNjcm9sbFdpZHRoID4gY3VyLmNsaWVudFdpZHRoKVxuICAgICAgICAgICAgICAgIHggPSBjdXI7XG4gICAgICAgICAgICBjdXIgPSBjdXIuYXNzaWduZWRTbG90IHx8IGN1ci5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1ci5ub2RlVHlwZSA9PSAxMSkge1xuICAgICAgICAgICAgY3VyID0gY3VyLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB4LCB5IH07XG59XG5jbGFzcyBET01TZWxlY3Rpb25TdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYW5jaG9yTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYW5jaG9yT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5mb2N1c05vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgZXEoZG9tU2VsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuY2hvck5vZGUgPT0gZG9tU2VsLmFuY2hvck5vZGUgJiYgdGhpcy5hbmNob3JPZmZzZXQgPT0gZG9tU2VsLmFuY2hvck9mZnNldCAmJlxuICAgICAgICAgICAgdGhpcy5mb2N1c05vZGUgPT0gZG9tU2VsLmZvY3VzTm9kZSAmJiB0aGlzLmZvY3VzT2Zmc2V0ID09IGRvbVNlbC5mb2N1c09mZnNldDtcbiAgICB9XG4gICAgc2V0UmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgbGV0IHsgYW5jaG9yTm9kZSwgZm9jdXNOb2RlIH0gPSByYW5nZTtcbiAgICAgICAgLy8gQ2xpcCBvZmZzZXRzIHRvIG5vZGUgc2l6ZSB0byBhdm9pZCBjcmFzaGVzIHdoZW4gU2FmYXJpIHJlcG9ydHMgYm9ndXMgb2Zmc2V0cyAoIzExNTIpXG4gICAgICAgIHRoaXMuc2V0KGFuY2hvck5vZGUsIE1hdGgubWluKHJhbmdlLmFuY2hvck9mZnNldCwgYW5jaG9yTm9kZSA/IG1heE9mZnNldChhbmNob3JOb2RlKSA6IDApLCBmb2N1c05vZGUsIE1hdGgubWluKHJhbmdlLmZvY3VzT2Zmc2V0LCBmb2N1c05vZGUgPyBtYXhPZmZzZXQoZm9jdXNOb2RlKSA6IDApKTtcbiAgICB9XG4gICAgc2V0KGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCkge1xuICAgICAgICB0aGlzLmFuY2hvck5vZGUgPSBhbmNob3JOb2RlO1xuICAgICAgICB0aGlzLmFuY2hvck9mZnNldCA9IGFuY2hvck9mZnNldDtcbiAgICAgICAgdGhpcy5mb2N1c05vZGUgPSBmb2N1c05vZGU7XG4gICAgICAgIHRoaXMuZm9jdXNPZmZzZXQgPSBmb2N1c09mZnNldDtcbiAgICB9XG59XG5sZXQgcHJldmVudFNjcm9sbFN1cHBvcnRlZCA9IG51bGw7XG4vLyBGZWF0dXJlLWRldGVjdHMgc3VwcG9ydCBmb3IgLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiB0cnVlfSksIGFuZCB1c2VzXG4vLyBhIGZhbGxiYWNrIGtsdWRnZSB3aGVuIG5vdCBzdXBwb3J0ZWQuXG5mdW5jdGlvbiBmb2N1c1ByZXZlbnRTY3JvbGwoZG9tKSB7XG4gICAgaWYgKGRvbS5zZXRBY3RpdmUpXG4gICAgICAgIHJldHVybiBkb20uc2V0QWN0aXZlKCk7IC8vIGluIElFXG4gICAgaWYgKHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQpXG4gICAgICAgIHJldHVybiBkb20uZm9jdXMocHJldmVudFNjcm9sbFN1cHBvcnRlZCk7XG4gICAgbGV0IHN0YWNrID0gW107XG4gICAgZm9yIChsZXQgY3VyID0gZG9tOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlKSB7XG4gICAgICAgIHN0YWNrLnB1c2goY3VyLCBjdXIuc2Nyb2xsVG9wLCBjdXIuc2Nyb2xsTGVmdCk7XG4gICAgICAgIGlmIChjdXIgPT0gY3VyLm93bmVyRG9jdW1lbnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgZG9tLmZvY3VzKHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPT0gbnVsbCA/IHtcbiAgICAgICAgZ2V0IHByZXZlbnRTY3JvbGwoKSB7XG4gICAgICAgICAgICBwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkID0geyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0gOiB1bmRlZmluZWQpO1xuICAgIGlmICghcHJldmVudFNjcm9sbFN1cHBvcnRlZCkge1xuICAgICAgICBwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGVsdCA9IHN0YWNrW2krK10sIHRvcCA9IHN0YWNrW2krK10sIGxlZnQgPSBzdGFja1tpKytdO1xuICAgICAgICAgICAgaWYgKGVsdC5zY3JvbGxUb3AgIT0gdG9wKVxuICAgICAgICAgICAgICAgIGVsdC5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgICAgICBpZiAoZWx0LnNjcm9sbExlZnQgIT0gbGVmdClcbiAgICAgICAgICAgICAgICBlbHQuc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgc2NyYXRjaFJhbmdlO1xuZnVuY3Rpb24gdGV4dFJhbmdlKG5vZGUsIGZyb20sIHRvID0gZnJvbSkge1xuICAgIGxldCByYW5nZSA9IHNjcmF0Y2hSYW5nZSB8fCAoc2NyYXRjaFJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSk7XG4gICAgcmFuZ2Uuc2V0RW5kKG5vZGUsIHRvKTtcbiAgICByYW5nZS5zZXRTdGFydChub2RlLCBmcm9tKTtcbiAgICByZXR1cm4gcmFuZ2U7XG59XG5mdW5jdGlvbiBkaXNwYXRjaEtleShlbHQsIG5hbWUsIGNvZGUsIG1vZHMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IHsga2V5OiBuYW1lLCBjb2RlOiBuYW1lLCBrZXlDb2RlOiBjb2RlLCB3aGljaDogY29kZSwgY2FuY2VsYWJsZTogdHJ1ZSB9O1xuICAgIGlmIChtb2RzKVxuICAgICAgICAoeyBhbHRLZXk6IG9wdGlvbnMuYWx0S2V5LCBjdHJsS2V5OiBvcHRpb25zLmN0cmxLZXksIHNoaWZ0S2V5OiBvcHRpb25zLnNoaWZ0S2V5LCBtZXRhS2V5OiBvcHRpb25zLm1ldGFLZXkgfSA9IG1vZHMpO1xuICAgIGxldCBkb3duID0gbmV3IEtleWJvYXJkRXZlbnQoXCJrZXlkb3duXCIsIG9wdGlvbnMpO1xuICAgIGRvd24uc3ludGhldGljID0gdHJ1ZTtcbiAgICBlbHQuZGlzcGF0Y2hFdmVudChkb3duKTtcbiAgICBsZXQgdXAgPSBuZXcgS2V5Ym9hcmRFdmVudChcImtleXVwXCIsIG9wdGlvbnMpO1xuICAgIHVwLnN5bnRoZXRpYyA9IHRydWU7XG4gICAgZWx0LmRpc3BhdGNoRXZlbnQodXApO1xuICAgIHJldHVybiBkb3duLmRlZmF1bHRQcmV2ZW50ZWQgfHwgdXAuZGVmYXVsdFByZXZlbnRlZDtcbn1cbmZ1bmN0aW9uIGdldFJvb3Qobm9kZSkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlICYmIChub2RlLm5vZGVUeXBlID09IDkgfHwgbm9kZS5ub2RlVHlwZSA9PSAxMSAmJiBub2RlLmhvc3QpKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIG5vZGUgPSBub2RlLmFzc2lnbmVkU2xvdCB8fCBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gY2xlYXJBdHRyaWJ1dGVzKG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5hdHRyaWJ1dGVzLmxlbmd0aClcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOb2RlKG5vZGUuYXR0cmlidXRlc1swXSk7XG59XG5mdW5jdGlvbiBhdEVsZW1lbnRTdGFydChkb2MsIHNlbGVjdGlvbikge1xuICAgIGxldCBub2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZSwgb2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICAgIGlmICghbm9kZSB8fCBzZWxlY3Rpb24uYW5jaG9yTm9kZSAhPSBub2RlIHx8IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgIT0gb2Zmc2V0KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gU2FmYXJpIGNhbiByZXBvcnQgYm9ndXMgb2Zmc2V0cyAoIzExNTIpXG4gICAgb2Zmc2V0ID0gTWF0aC5taW4ob2Zmc2V0LCBtYXhPZmZzZXQobm9kZSkpO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZXQgcHJldiA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXTtcbiAgICAgICAgICAgIGlmIChwcmV2LmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgb2Zmc2V0LS07XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gcHJldjtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSA9PSBkb2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTY3JvbGxlZFRvQm90dG9tKGVsdCkge1xuICAgIHJldHVybiBlbHQuc2Nyb2xsVG9wID4gTWF0aC5tYXgoMSwgZWx0LnNjcm9sbEhlaWdodCAtIGVsdC5jbGllbnRIZWlnaHQgLSA0KTtcbn1cbmZ1bmN0aW9uIHRleHROb2RlQmVmb3JlKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogbm9kZSwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICYmICFpc0Jsb2NrRWxlbWVudChub2RlKSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0ZXh0Tm9kZUFmdGVyKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0IDwgbm9kZS5ub2RlVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiBub2RlLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgJiYgIWlzQmxvY2tFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBkb21JbmRleChub2RlKSArIDE7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIERPTVBvcyB7XG4gICAgY29uc3RydWN0b3Iobm9kZSwgb2Zmc2V0LCBwcmVjaXNlID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5wcmVjaXNlID0gcHJlY2lzZTtcbiAgICB9XG4gICAgc3RhdGljIGJlZm9yZShkb20sIHByZWNpc2UpIHsgcmV0dXJuIG5ldyBET01Qb3MoZG9tLnBhcmVudE5vZGUsIGRvbUluZGV4KGRvbSksIHByZWNpc2UpOyB9XG4gICAgc3RhdGljIGFmdGVyKGRvbSwgcHJlY2lzZSkgeyByZXR1cm4gbmV3IERPTVBvcyhkb20ucGFyZW50Tm9kZSwgZG9tSW5kZXgoZG9tKSArIDEsIHByZWNpc2UpOyB9XG59XG5jb25zdCBub0NoaWxkcmVuID0gW107XG5jbGFzcyBDb250ZW50VmlldyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5kb20gPSBudWxsO1xuICAgICAgICB0aGlzLmZsYWdzID0gMiAvKiBWaWV3RmxhZy5Ob2RlRGlydHkgKi87XG4gICAgfVxuICAgIGdldCBvdmVycmlkZURPTVRleHQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgZ2V0IHBvc0F0U3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LnBvc0JlZm9yZSh0aGlzKSA6IDA7XG4gICAgfVxuICAgIGdldCBwb3NBdEVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zQXRTdGFydCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3NCZWZvcmUodmlldykge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5wb3NBdFN0YXJ0O1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQgPT0gdmlldylcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgcG9zICs9IGNoaWxkLmxlbmd0aCArIGNoaWxkLmJyZWFrQWZ0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNoaWxkIGluIHBvc0JlZm9yZVwiKTtcbiAgICB9XG4gICAgcG9zQWZ0ZXIodmlldykge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NCZWZvcmUodmlldykgKyB2aWV3Lmxlbmd0aDtcbiAgICB9XG4gICAgc3luYyh2aWV3LCB0cmFjaykge1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDIgLyogVmlld0ZsYWcuTm9kZURpcnR5ICovKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5kb207XG4gICAgICAgICAgICBsZXQgcHJldiA9IG51bGwsIG5leHQ7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmZsYWdzICYgNyAvKiBWaWV3RmxhZy5EaXJ0eSAqLykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLmRvbSAmJiAobmV4dCA9IHByZXYgPyBwcmV2Lm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudFZpZXcgPSBDb250ZW50Vmlldy5nZXQobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnRWaWV3IHx8ICFjb250ZW50Vmlldy5wYXJlbnQgJiYgY29udGVudFZpZXcuY2FuUmV1c2VET00oY2hpbGQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnJldXNlRE9NKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnN5bmModmlldywgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5mbGFncyAmPSB+NyAvKiBWaWV3RmxhZy5EaXJ0eSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IHByZXYgPyBwcmV2Lm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrICYmICF0cmFjay53cml0dGVuICYmIHRyYWNrLm5vZGUgPT0gcGFyZW50ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICB0cmFjay53cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuZG9tLnBhcmVudE5vZGUgPT0gcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLmRvbSwgbmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXYgPSBjaGlsZC5kb207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gcHJldiA/IHByZXYubmV4dFNpYmxpbmcgOiBwYXJlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGlmIChuZXh0ICYmIHRyYWNrICYmIHRyYWNrLm5vZGUgPT0gcGFyZW50KVxuICAgICAgICAgICAgICAgIHRyYWNrLndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgd2hpbGUgKG5leHQpXG4gICAgICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5mbGFncyAmIDEgLyogVmlld0ZsYWcuQ2hpbGREaXJ0eSAqLykge1xuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuZmxhZ3MgJiA3IC8qIFZpZXdGbGFnLkRpcnR5ICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnN5bmModmlldywgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5mbGFncyAmPSB+NyAvKiBWaWV3RmxhZy5EaXJ0eSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV1c2VET00oX2RvbSkgeyB9XG4gICAgbG9jYWxQb3NGcm9tRE9NKG5vZGUsIG9mZnNldCkge1xuICAgICAgICBsZXQgYWZ0ZXI7XG4gICAgICAgIGlmIChub2RlID09IHRoaXMuZG9tKSB7XG4gICAgICAgICAgICBhZnRlciA9IHRoaXMuZG9tLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBiaWFzID0gbWF4T2Zmc2V0KG5vZGUpID09IDAgPyAwIDogb2Zmc2V0ID09IDAgPyAtMSA6IDE7XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50ID09IHRoaXMuZG9tKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoYmlhcyA9PSAwICYmIHBhcmVudC5maXJzdENoaWxkICE9IHBhcmVudC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWFzID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpYXMgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJpYXMgPCAwKVxuICAgICAgICAgICAgICAgIGFmdGVyID0gbm9kZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhZnRlciA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFmdGVyID09IHRoaXMuZG9tLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgd2hpbGUgKGFmdGVyICYmICFDb250ZW50Vmlldy5nZXQoYWZ0ZXIpKVxuICAgICAgICAgICAgYWZ0ZXIgPSBhZnRlci5uZXh0U2libGluZztcbiAgICAgICAgaWYgKCFhZnRlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAoY2hpbGQuZG9tID09IGFmdGVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgICAgICBwb3MgKz0gY2hpbGQubGVuZ3RoICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkb21Cb3VuZHNBcm91bmQoZnJvbSwgdG8sIG9mZnNldCA9IDApIHtcbiAgICAgICAgbGV0IGZyb21JID0gLTEsIGZyb21TdGFydCA9IC0xLCB0b0kgPSAtMSwgdG9FbmQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IG9mZnNldCwgcHJldkVuZCA9IG9mZnNldDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIGVuZCA9IHBvcyArIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChwb3MgPCBmcm9tICYmIGVuZCA+IHRvKVxuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5kb21Cb3VuZHNBcm91bmQoZnJvbSwgdG8sIHBvcyk7XG4gICAgICAgICAgICBpZiAoZW5kID49IGZyb20gJiYgZnJvbUkgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmcm9tSSA9IGk7XG4gICAgICAgICAgICAgICAgZnJvbVN0YXJ0ID0gcG9zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvcyA+IHRvICYmIGNoaWxkLmRvbS5wYXJlbnROb2RlID09IHRoaXMuZG9tKSB7XG4gICAgICAgICAgICAgICAgdG9JID0gaTtcbiAgICAgICAgICAgICAgICB0b0VuZCA9IHByZXZFbmQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2RW5kID0gZW5kO1xuICAgICAgICAgICAgcG9zID0gZW5kICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmcm9tOiBmcm9tU3RhcnQsIHRvOiB0b0VuZCA8IDAgPyBvZmZzZXQgKyB0aGlzLmxlbmd0aCA6IHRvRW5kLFxuICAgICAgICAgICAgc3RhcnRET006IChmcm9tSSA/IHRoaXMuY2hpbGRyZW5bZnJvbUkgLSAxXS5kb20ubmV4dFNpYmxpbmcgOiBudWxsKSB8fCB0aGlzLmRvbS5maXJzdENoaWxkLFxuICAgICAgICAgICAgZW5kRE9NOiB0b0kgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAmJiB0b0kgPj0gMCA/IHRoaXMuY2hpbGRyZW5bdG9JXS5kb20gOiBudWxsIH07XG4gICAgfVxuICAgIG1hcmtEaXJ0eShhbmRQYXJlbnQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmZsYWdzIHw9IDIgLyogVmlld0ZsYWcuTm9kZURpcnR5ICovO1xuICAgICAgICB0aGlzLm1hcmtQYXJlbnRzRGlydHkoYW5kUGFyZW50KTtcbiAgICB9XG4gICAgbWFya1BhcmVudHNEaXJ0eShjaGlsZExpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50ID0gdGhpcy5wYXJlbnQ7IHBhcmVudDsgcGFyZW50ID0gcGFyZW50LnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGNoaWxkTGlzdClcbiAgICAgICAgICAgICAgICBwYXJlbnQuZmxhZ3MgfD0gMiAvKiBWaWV3RmxhZy5Ob2RlRGlydHkgKi87XG4gICAgICAgICAgICBpZiAocGFyZW50LmZsYWdzICYgMSAvKiBWaWV3RmxhZy5DaGlsZERpcnR5ICovKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHBhcmVudC5mbGFncyB8PSAxIC8qIFZpZXdGbGFnLkNoaWxkRGlydHkgKi87XG4gICAgICAgICAgICBjaGlsZExpc3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQYXJlbnQocGFyZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudCAhPSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiA3IC8qIFZpZXdGbGFnLkRpcnR5ICovKVxuICAgICAgICAgICAgICAgIHRoaXMubWFya1BhcmVudHNEaXJ0eSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRET00oZG9tKSB7XG4gICAgICAgIGlmICh0aGlzLmRvbSA9PSBkb20pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmRvbSlcbiAgICAgICAgICAgIHRoaXMuZG9tLmNtVmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICBkb20uY21WaWV3ID0gdGhpcztcbiAgICB9XG4gICAgZ2V0IHJvb3RWaWV3KCkge1xuICAgICAgICBmb3IgKGxldCB2ID0gdGhpczs7KSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdi5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgICAgIHYgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZUNoaWxkcmVuKGZyb20sIHRvLCBjaGlsZHJlbiA9IG5vQ2hpbGRyZW4pIHtcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLnBhcmVudCA9PSB0aGlzICYmIGNoaWxkcmVuLmluZGV4T2YoY2hpbGQpIDwgMClcbiAgICAgICAgICAgICAgICBjaGlsZC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA8IDI1MClcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGZyb20sIHRvIC0gZnJvbSwgLi4uY2hpbGRyZW4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gW10uY29uY2F0KHRoaXMuY2hpbGRyZW4uc2xpY2UoMCwgZnJvbSksIGNoaWxkcmVuLCB0aGlzLmNoaWxkcmVuLnNsaWNlKHRvKSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBjaGlsZHJlbltpXS5zZXRQYXJlbnQodGhpcyk7XG4gICAgfVxuICAgIGlnbm9yZU11dGF0aW9uKF9yZWMpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWdub3JlRXZlbnQoX2V2ZW50KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGNoaWxkQ3Vyc29yKHBvcyA9IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRDdXJzb3IodGhpcy5jaGlsZHJlbiwgcG9zLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgfVxuICAgIGNoaWxkUG9zKHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRDdXJzb3IoKS5maW5kUG9zKHBvcywgYmlhcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKFwiVmlld1wiLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgKyAodGhpcy5jaGlsZHJlbi5sZW5ndGggPyBcIihcIiArIHRoaXMuY2hpbGRyZW4uam9pbigpICsgXCIpXCIgOlxuICAgICAgICAgICAgdGhpcy5sZW5ndGggPyBcIltcIiArIChuYW1lID09IFwiVGV4dFwiID8gdGhpcy50ZXh0IDogdGhpcy5sZW5ndGgpICsgXCJdXCIgOiBcIlwiKSArXG4gICAgICAgICAgICAodGhpcy5icmVha0FmdGVyID8gXCIjXCIgOiBcIlwiKTtcbiAgICB9XG4gICAgc3RhdGljIGdldChub2RlKSB7IHJldHVybiBub2RlLmNtVmlldzsgfVxuICAgIGdldCBpc0VkaXRhYmxlKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGdldCBpc1dpZGdldCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBoYXNTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYmVjb21lKG90aGVyKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGNhblJldXNlRE9NKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci5jb25zdHJ1Y3RvciA9PSB0aGlzLmNvbnN0cnVjdG9yICYmICEoKHRoaXMuZmxhZ3MgfCBvdGhlci5mbGFncykgJiA4IC8qIFZpZXdGbGFnLkNvbXBvc2l0aW9uICovKTtcbiAgICB9XG4gICAgLy8gV2hlbiB0aGlzIGlzIGEgemVyby1sZW5ndGggdmlldyB3aXRoIGEgc2lkZSwgdGhpcyBzaG91bGQgcmV0dXJuIGFcbiAgICAvLyBudW1iZXIgPD0gMCB0byBpbmRpY2F0ZSBpdCBpcyBiZWZvcmUgaXRzIHBvc2l0aW9uLCBvciBhXG4gICAgLy8gbnVtYmVyID4gMCB3aGVuIGFmdGVyIGl0cyBwb3NpdGlvbi5cbiAgICBnZXRTaWRlKCkgeyByZXR1cm4gMDsgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pXG4gICAgICAgICAgICBpZiAoY2hpbGQucGFyZW50ID09IHRoaXMpXG4gICAgICAgICAgICAgICAgY2hpbGQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgfVxufVxuQ29udGVudFZpZXcucHJvdG90eXBlLmJyZWFrQWZ0ZXIgPSAwO1xuLy8gUmVtb3ZlIGEgRE9NIG5vZGUgYW5kIHJldHVybiBpdHMgbmV4dCBzaWJsaW5nLlxuZnVuY3Rpb24gcm0kMShkb20pIHtcbiAgICBsZXQgbmV4dCA9IGRvbS5uZXh0U2libGluZztcbiAgICBkb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb20pO1xuICAgIHJldHVybiBuZXh0O1xufVxuY2xhc3MgQ2hpbGRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNoaWxkcmVuLCBwb3MsIGkpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5pID0gaTtcbiAgICAgICAgdGhpcy5vZmYgPSAwO1xuICAgIH1cbiAgICBmaW5kUG9zKHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHBvcyA+IHRoaXMucG9zIHx8IHBvcyA9PSB0aGlzLnBvcyAmJlxuICAgICAgICAgICAgICAgIChiaWFzID4gMCB8fCB0aGlzLmkgPT0gMCB8fCB0aGlzLmNoaWxkcmVuW3RoaXMuaSAtIDFdLmJyZWFrQWZ0ZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmYgPSBwb3MgLSB0aGlzLnBvcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5jaGlsZHJlblstLXRoaXMuaV07XG4gICAgICAgICAgICB0aGlzLnBvcyAtPSBuZXh0Lmxlbmd0aCArIG5leHQuYnJlYWtBZnRlcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcGxhY2VSYW5nZShwYXJlbnQsIGZyb21JLCBmcm9tT2ZmLCB0b0ksIHRvT2ZmLCBpbnNlcnQsIGJyZWFrQXRTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgbGV0IHsgY2hpbGRyZW4gfSA9IHBhcmVudDtcbiAgICBsZXQgYmVmb3JlID0gY2hpbGRyZW4ubGVuZ3RoID8gY2hpbGRyZW5bZnJvbUldIDogbnVsbDtcbiAgICBsZXQgbGFzdCA9IGluc2VydC5sZW5ndGggPyBpbnNlcnRbaW5zZXJ0Lmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICBsZXQgYnJlYWtBdEVuZCA9IGxhc3QgPyBsYXN0LmJyZWFrQWZ0ZXIgOiBicmVha0F0U3RhcnQ7XG4gICAgLy8gQ2hhbmdlIHdpdGhpbiBhIHNpbmdsZSBjaGlsZFxuICAgIGlmIChmcm9tSSA9PSB0b0kgJiYgYmVmb3JlICYmICFicmVha0F0U3RhcnQgJiYgIWJyZWFrQXRFbmQgJiYgaW5zZXJ0Lmxlbmd0aCA8IDIgJiZcbiAgICAgICAgYmVmb3JlLm1lcmdlKGZyb21PZmYsIHRvT2ZmLCBpbnNlcnQubGVuZ3RoID8gbGFzdCA6IG51bGwsIGZyb21PZmYgPT0gMCwgb3BlblN0YXJ0LCBvcGVuRW5kKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICh0b0kgPCBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgbGV0IGFmdGVyID0gY2hpbGRyZW5bdG9JXTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBlbmQgb2YgdGhlIGNoaWxkIGFmdGVyIHRoZSB1cGRhdGUgaXMgcHJlc2VydmVkIGluIGBhZnRlcmBcbiAgICAgICAgaWYgKGFmdGVyICYmICh0b09mZiA8IGFmdGVyLmxlbmd0aCB8fCBhZnRlci5icmVha0FmdGVyICYmIChsYXN0ID09PSBudWxsIHx8IGxhc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3QuYnJlYWtBZnRlcikpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBzcGxpdHRpbmcgYSBjaGlsZCwgc2VwYXJhdGUgcGFydCBvZiBpdCB0byBhdm9pZCB0aGF0XG4gICAgICAgICAgICAvLyBiZWluZyBtYW5nbGVkIHdoZW4gdXBkYXRpbmcgdGhlIGNoaWxkIGJlZm9yZSB0aGUgdXBkYXRlLlxuICAgICAgICAgICAgaWYgKGZyb21JID09IHRvSSkge1xuICAgICAgICAgICAgICAgIGFmdGVyID0gYWZ0ZXIuc3BsaXQodG9PZmYpO1xuICAgICAgICAgICAgICAgIHRvT2ZmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGFmdGVyIHRoZSByZXBsYWNlbWVudCBzaG91bGQgYmUgbWVyZ2VkIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IHJlcGxhY2luZyBlbGVtZW50LCB1cGRhdGUgYGNvbnRlbnRgXG4gICAgICAgICAgICBpZiAoIWJyZWFrQXRFbmQgJiYgbGFzdCAmJiBhZnRlci5tZXJnZSgwLCB0b09mZiwgbGFzdCwgdHJ1ZSwgMCwgb3BlbkVuZCkpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRbaW5zZXJ0Lmxlbmd0aCAtIDFdID0gYWZ0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHN0YXJ0IG9mIHRoZSBhZnRlciBlbGVtZW50LCBpZiBuZWNlc3NhcnksIGFuZFxuICAgICAgICAgICAgICAgIC8vIGFkZCBpdCB0byBgY29udGVudGAuXG4gICAgICAgICAgICAgICAgaWYgKHRvT2ZmIHx8IGFmdGVyLmNoaWxkcmVuLmxlbmd0aCAmJiAhYWZ0ZXIuY2hpbGRyZW5bMF0ubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBhZnRlci5tZXJnZSgwLCB0b09mZiwgbnVsbCwgZmFsc2UsIDAsIG9wZW5FbmQpO1xuICAgICAgICAgICAgICAgIGluc2VydC5wdXNoKGFmdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhZnRlciA9PT0gbnVsbCB8fCBhZnRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWZ0ZXIuYnJlYWtBZnRlcikge1xuICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgYXQgYHRvSWAgaXMgZW50aXJlbHkgY292ZXJlZCBieSB0aGlzIHJhbmdlLlxuICAgICAgICAgICAgLy8gUHJlc2VydmUgaXRzIGxpbmUgYnJlYWssIGlmIGFueS5cbiAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgIGxhc3QuYnJlYWtBZnRlciA9IDE7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYnJlYWtBdFN0YXJ0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaW5jZSB3ZSd2ZSBoYW5kbGVkIHRoZSBuZXh0IGVsZW1lbnQgZnJvbSB0aGUgY3VycmVudCBlbGVtZW50c1xuICAgICAgICAvLyBub3csIG1ha2Ugc3VyZSBgdG9JYCBwb2ludHMgYWZ0ZXIgdGhhdC5cbiAgICAgICAgdG9JKys7XG4gICAgfVxuICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgYmVmb3JlLmJyZWFrQWZ0ZXIgPSBicmVha0F0U3RhcnQ7XG4gICAgICAgIGlmIChmcm9tT2ZmID4gMCkge1xuICAgICAgICAgICAgaWYgKCFicmVha0F0U3RhcnQgJiYgaW5zZXJ0Lmxlbmd0aCAmJiBiZWZvcmUubWVyZ2UoZnJvbU9mZiwgYmVmb3JlLmxlbmd0aCwgaW5zZXJ0WzBdLCBmYWxzZSwgb3BlblN0YXJ0LCAwKSkge1xuICAgICAgICAgICAgICAgIGJlZm9yZS5icmVha0FmdGVyID0gaW5zZXJ0LnNoaWZ0KCkuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZyb21PZmYgPCBiZWZvcmUubGVuZ3RoIHx8IGJlZm9yZS5jaGlsZHJlbi5sZW5ndGggJiYgYmVmb3JlLmNoaWxkcmVuW2JlZm9yZS5jaGlsZHJlbi5sZW5ndGggLSAxXS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJlZm9yZS5tZXJnZShmcm9tT2ZmLCBiZWZvcmUubGVuZ3RoLCBudWxsLCBmYWxzZSwgb3BlblN0YXJ0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21JKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJ5IHRvIG1lcmdlIHdpZGdldHMgb24gdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHJlcGxhY2VtZW50XG4gICAgd2hpbGUgKGZyb21JIDwgdG9JICYmIGluc2VydC5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuW3RvSSAtIDFdLmJlY29tZShpbnNlcnRbaW5zZXJ0Lmxlbmd0aCAtIDFdKSkge1xuICAgICAgICAgICAgdG9JLS07XG4gICAgICAgICAgICBpbnNlcnQucG9wKCk7XG4gICAgICAgICAgICBvcGVuRW5kID0gaW5zZXJ0Lmxlbmd0aCA/IDAgOiBvcGVuU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hpbGRyZW5bZnJvbUldLmJlY29tZShpbnNlcnRbMF0pKSB7XG4gICAgICAgICAgICBmcm9tSSsrO1xuICAgICAgICAgICAgaW5zZXJ0LnNoaWZ0KCk7XG4gICAgICAgICAgICBvcGVuU3RhcnQgPSBpbnNlcnQubGVuZ3RoID8gMCA6IG9wZW5FbmQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWluc2VydC5sZW5ndGggJiYgZnJvbUkgJiYgdG9JIDwgY2hpbGRyZW4ubGVuZ3RoICYmICFjaGlsZHJlbltmcm9tSSAtIDFdLmJyZWFrQWZ0ZXIgJiZcbiAgICAgICAgY2hpbGRyZW5bdG9JXS5tZXJnZSgwLCAwLCBjaGlsZHJlbltmcm9tSSAtIDFdLCBmYWxzZSwgb3BlblN0YXJ0LCBvcGVuRW5kKSlcbiAgICAgICAgZnJvbUktLTtcbiAgICBpZiAoZnJvbUkgPCB0b0kgfHwgaW5zZXJ0Lmxlbmd0aClcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZHJlbihmcm9tSSwgdG9JLCBpbnNlcnQpO1xufVxuZnVuY3Rpb24gbWVyZ2VDaGlsZHJlbkludG8ocGFyZW50LCBmcm9tLCB0bywgaW5zZXJ0LCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICBsZXQgY3VyID0gcGFyZW50LmNoaWxkQ3Vyc29yKCk7XG4gICAgbGV0IHsgaTogdG9JLCBvZmY6IHRvT2ZmIH0gPSBjdXIuZmluZFBvcyh0bywgMSk7XG4gICAgbGV0IHsgaTogZnJvbUksIG9mZjogZnJvbU9mZiB9ID0gY3VyLmZpbmRQb3MoZnJvbSwgLTEpO1xuICAgIGxldCBkTGVuID0gZnJvbSAtIHRvO1xuICAgIGZvciAobGV0IHZpZXcgb2YgaW5zZXJ0KVxuICAgICAgICBkTGVuICs9IHZpZXcubGVuZ3RoO1xuICAgIHBhcmVudC5sZW5ndGggKz0gZExlbjtcbiAgICByZXBsYWNlUmFuZ2UocGFyZW50LCBmcm9tSSwgZnJvbU9mZiwgdG9JLCB0b09mZiwgaW5zZXJ0LCAwLCBvcGVuU3RhcnQsIG9wZW5FbmQpO1xufVxuXG5sZXQgbmF2ID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yIDogeyB1c2VyQWdlbnQ6IFwiXCIsIHZlbmRvcjogXCJcIiwgcGxhdGZvcm06IFwiXCIgfTtcbmxldCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT0gXCJ1bmRlZmluZWRcIiA/IGRvY3VtZW50IDogeyBkb2N1bWVudEVsZW1lbnQ6IHsgc3R5bGU6IHt9IH0gfTtcbmNvbnN0IGllX2VkZ2UgPSAvKkBfX1BVUkVfXyovL0VkZ2VcXC8oXFxkKykvLmV4ZWMobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBpZV91cHRvMTAgPSAvKkBfX1BVUkVfXyovL01TSUUgXFxkLy50ZXN0KG5hdi51c2VyQWdlbnQpO1xuY29uc3QgaWVfMTF1cCA9IC8qQF9fUFVSRV9fKi8vVHJpZGVudFxcLyg/Ols3LTldfFxcZHsyLH0pXFwuLipydjooXFxkKykvLmV4ZWMobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBpZSA9ICEhKGllX3VwdG8xMCB8fCBpZV8xMXVwIHx8IGllX2VkZ2UpO1xuY29uc3QgZ2Vja28gPSAhaWUgJiYgLypAX19QVVJFX18qLy9nZWNrb1xcLyhcXGQrKS9pLnRlc3QobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBjaHJvbWUgPSAhaWUgJiYgLypAX19QVVJFX18qLy9DaHJvbWVcXC8oXFxkKykvLmV4ZWMobmF2LnVzZXJBZ2VudCk7XG5jb25zdCB3ZWJraXQgPSBcIndlYmtpdEZvbnRTbW9vdGhpbmdcIiBpbiBkb2MuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuY29uc3Qgc2FmYXJpID0gIWllICYmIC8qQF9fUFVSRV9fKi8vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2LnZlbmRvcik7XG5jb25zdCBpb3MgPSBzYWZhcmkgJiYgKC8qQF9fUFVSRV9fKi8vTW9iaWxlXFwvXFx3Ky8udGVzdChuYXYudXNlckFnZW50KSB8fCBuYXYubWF4VG91Y2hQb2ludHMgPiAyKTtcbnZhciBicm93c2VyID0ge1xuICAgIG1hYzogaW9zIHx8IC8qQF9fUFVSRV9fKi8vTWFjLy50ZXN0KG5hdi5wbGF0Zm9ybSksXG4gICAgd2luZG93czogLypAX19QVVJFX18qLy9XaW4vLnRlc3QobmF2LnBsYXRmb3JtKSxcbiAgICBsaW51eDogLypAX19QVVJFX18qLy9MaW51eHxYMTEvLnRlc3QobmF2LnBsYXRmb3JtKSxcbiAgICBpZSxcbiAgICBpZV92ZXJzaW9uOiBpZV91cHRvMTAgPyBkb2MuZG9jdW1lbnRNb2RlIHx8IDYgOiBpZV8xMXVwID8gK2llXzExdXBbMV0gOiBpZV9lZGdlID8gK2llX2VkZ2VbMV0gOiAwLFxuICAgIGdlY2tvLFxuICAgIGdlY2tvX3ZlcnNpb246IGdlY2tvID8gKygvKkBfX1BVUkVfXyovL0ZpcmVmb3hcXC8oXFxkKykvLmV4ZWMobmF2LnVzZXJBZ2VudCkgfHwgWzAsIDBdKVsxXSA6IDAsXG4gICAgY2hyb21lOiAhIWNocm9tZSxcbiAgICBjaHJvbWVfdmVyc2lvbjogY2hyb21lID8gK2Nocm9tZVsxXSA6IDAsXG4gICAgaW9zLFxuICAgIGFuZHJvaWQ6IC8qQF9fUFVSRV9fKi8vQW5kcm9pZFxcYi8udGVzdChuYXYudXNlckFnZW50KSxcbiAgICB3ZWJraXQsXG4gICAgc2FmYXJpLFxuICAgIHdlYmtpdF92ZXJzaW9uOiB3ZWJraXQgPyArKC8qQF9fUFVSRV9fKi8vXFxiQXBwbGVXZWJLaXRcXC8oXFxkKykvLmV4ZWMobmF2LnVzZXJBZ2VudCkgfHwgWzAsIDBdKVsxXSA6IDAsXG4gICAgdGFiU2l6ZTogZG9jLmRvY3VtZW50RWxlbWVudC5zdHlsZS50YWJTaXplICE9IG51bGwgPyBcInRhYi1zaXplXCIgOiBcIi1tb3otdGFiLXNpemVcIlxufTtcblxuY29uc3QgTWF4Sm9pbkxlbiA9IDI1NjtcbmNsYXNzIFRleHRWaWV3IGV4dGVuZHMgQ29udGVudFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHRleHQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHsgcmV0dXJuIHRoaXMudGV4dC5sZW5ndGg7IH1cbiAgICBjcmVhdGVET00odGV4dERPTSkge1xuICAgICAgICB0aGlzLnNldERPTSh0ZXh0RE9NIHx8IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMudGV4dCkpO1xuICAgIH1cbiAgICBzeW5jKHZpZXcsIHRyYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5kb20pXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURPTSgpO1xuICAgICAgICBpZiAodGhpcy5kb20ubm9kZVZhbHVlICE9IHRoaXMudGV4dCkge1xuICAgICAgICAgICAgaWYgKHRyYWNrICYmIHRyYWNrLm5vZGUgPT0gdGhpcy5kb20pXG4gICAgICAgICAgICAgICAgdHJhY2sud3JpdHRlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRvbS5ub2RlVmFsdWUgPSB0aGlzLnRleHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV1c2VET00oZG9tKSB7XG4gICAgICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMylcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRE9NKGRvbSk7XG4gICAgfVxuICAgIG1lcmdlKGZyb20sIHRvLCBzb3VyY2UpIHtcbiAgICAgICAgaWYgKCh0aGlzLmZsYWdzICYgOCAvKiBWaWV3RmxhZy5Db21wb3NpdGlvbiAqLykgfHxcbiAgICAgICAgICAgIHNvdXJjZSAmJiAoIShzb3VyY2UgaW5zdGFuY2VvZiBUZXh0VmlldykgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCAtICh0byAtIGZyb20pICsgc291cmNlLmxlbmd0aCA+IE1heEpvaW5MZW4gfHxcbiAgICAgICAgICAgICAgICAoc291cmNlLmZsYWdzICYgOCAvKiBWaWV3RmxhZy5Db21wb3NpdGlvbiAqLykpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQuc2xpY2UoMCwgZnJvbSkgKyAoc291cmNlID8gc291cmNlLnRleHQgOiBcIlwiKSArIHRoaXMudGV4dC5zbGljZSh0byk7XG4gICAgICAgIHRoaXMubWFya0RpcnR5KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzcGxpdChmcm9tKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVGV4dFZpZXcodGhpcy50ZXh0LnNsaWNlKGZyb20pKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnNsaWNlKDAsIGZyb20pO1xuICAgICAgICB0aGlzLm1hcmtEaXJ0eSgpO1xuICAgICAgICByZXN1bHQuZmxhZ3MgfD0gdGhpcy5mbGFncyAmIDggLyogVmlld0ZsYWcuQ29tcG9zaXRpb24gKi87XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGxvY2FsUG9zRnJvbURPTShub2RlLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgPT0gdGhpcy5kb20gPyBvZmZzZXQgOiBvZmZzZXQgPyB0aGlzLnRleHQubGVuZ3RoIDogMDtcbiAgICB9XG4gICAgZG9tQXRQb3MocG9zKSB7IHJldHVybiBuZXcgRE9NUG9zKHRoaXMuZG9tLCBwb3MpOyB9XG4gICAgZG9tQm91bmRzQXJvdW5kKF9mcm9tLCBfdG8sIG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBmcm9tOiBvZmZzZXQsIHRvOiBvZmZzZXQgKyB0aGlzLmxlbmd0aCwgc3RhcnRET006IHRoaXMuZG9tLCBlbmRET006IHRoaXMuZG9tLm5leHRTaWJsaW5nIH07XG4gICAgfVxuICAgIGNvb3Jkc0F0KHBvcywgc2lkZSkge1xuICAgICAgICByZXR1cm4gdGV4dENvb3Jkcyh0aGlzLmRvbSwgcG9zLCBzaWRlKTtcbiAgICB9XG59XG5jbGFzcyBNYXJrVmlldyBleHRlbmRzIENvbnRlbnRWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihtYXJrLCBjaGlsZHJlbiA9IFtdLCBsZW5ndGggPSAwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGNoIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgY2guc2V0UGFyZW50KHRoaXMpO1xuICAgIH1cbiAgICBzZXRBdHRycyhkb20pIHtcbiAgICAgICAgY2xlYXJBdHRyaWJ1dGVzKGRvbSk7XG4gICAgICAgIGlmICh0aGlzLm1hcmsuY2xhc3MpXG4gICAgICAgICAgICBkb20uY2xhc3NOYW1lID0gdGhpcy5tYXJrLmNsYXNzO1xuICAgICAgICBpZiAodGhpcy5tYXJrLmF0dHJzKVxuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiB0aGlzLm1hcmsuYXR0cnMpXG4gICAgICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShuYW1lLCB0aGlzLm1hcmsuYXR0cnNbbmFtZV0pO1xuICAgICAgICByZXR1cm4gZG9tO1xuICAgIH1cbiAgICBjYW5SZXVzZURPTShvdGhlcikge1xuICAgICAgICByZXR1cm4gc3VwZXIuY2FuUmV1c2VET00ob3RoZXIpICYmICEoKHRoaXMuZmxhZ3MgfCBvdGhlci5mbGFncykgJiA4IC8qIFZpZXdGbGFnLkNvbXBvc2l0aW9uICovKTtcbiAgICB9XG4gICAgcmV1c2VET00obm9kZSkge1xuICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSB0aGlzLm1hcmsudGFnTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldERPTShub2RlKTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gNCAvKiBWaWV3RmxhZy5BdHRyc0RpcnR5ICovIHwgMiAvKiBWaWV3RmxhZy5Ob2RlRGlydHkgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3luYyh2aWV3LCB0cmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuZG9tKVxuICAgICAgICAgICAgdGhpcy5zZXRET00odGhpcy5zZXRBdHRycyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMubWFyay50YWdOYW1lKSkpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLmZsYWdzICYgNCAvKiBWaWV3RmxhZy5BdHRyc0RpcnR5ICovKVxuICAgICAgICAgICAgdGhpcy5zZXRBdHRycyh0aGlzLmRvbSk7XG4gICAgICAgIHN1cGVyLnN5bmModmlldywgdHJhY2spO1xuICAgIH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBfaGFzU3RhcnQsIG9wZW5TdGFydCwgb3BlbkVuZCkge1xuICAgICAgICBpZiAoc291cmNlICYmICghKHNvdXJjZSBpbnN0YW5jZW9mIE1hcmtWaWV3ICYmIHNvdXJjZS5tYXJrLmVxKHRoaXMubWFyaykpIHx8XG4gICAgICAgICAgICAoZnJvbSAmJiBvcGVuU3RhcnQgPD0gMCkgfHwgKHRvIDwgdGhpcy5sZW5ndGggJiYgb3BlbkVuZCA8PSAwKSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIG1lcmdlQ2hpbGRyZW5JbnRvKHRoaXMsIGZyb20sIHRvLCBzb3VyY2UgPyBzb3VyY2UuY2hpbGRyZW4uc2xpY2UoKSA6IFtdLCBvcGVuU3RhcnQgLSAxLCBvcGVuRW5kIC0gMSk7XG4gICAgICAgIHRoaXMubWFya0RpcnR5KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzcGxpdChmcm9tKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgb2ZmID0gMCwgZGV0YWNoRnJvbSA9IC0xLCBpID0gMDtcbiAgICAgICAgZm9yIChsZXQgZWx0IG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBvZmYgKyBlbHQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVuZCA+IGZyb20pXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob2ZmIDwgZnJvbSA/IGVsdC5zcGxpdChmcm9tIC0gb2ZmKSA6IGVsdCk7XG4gICAgICAgICAgICBpZiAoZGV0YWNoRnJvbSA8IDAgJiYgb2ZmID49IGZyb20pXG4gICAgICAgICAgICAgICAgZGV0YWNoRnJvbSA9IGk7XG4gICAgICAgICAgICBvZmYgPSBlbmQ7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMubGVuZ3RoIC0gZnJvbTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBmcm9tO1xuICAgICAgICBpZiAoZGV0YWNoRnJvbSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9IGRldGFjaEZyb207XG4gICAgICAgICAgICB0aGlzLm1hcmtEaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTWFya1ZpZXcodGhpcy5tYXJrLCByZXN1bHQsIGxlbmd0aCk7XG4gICAgfVxuICAgIGRvbUF0UG9zKHBvcykge1xuICAgICAgICByZXR1cm4gaW5saW5lRE9NQXRQb3ModGhpcywgcG9zKTtcbiAgICB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIHJldHVybiBjb29yZHNJbkNoaWxkcmVuKHRoaXMsIHBvcywgc2lkZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGV4dENvb3Jkcyh0ZXh0LCBwb3MsIHNpZGUpIHtcbiAgICBsZXQgbGVuZ3RoID0gdGV4dC5ub2RlVmFsdWUubGVuZ3RoO1xuICAgIGlmIChwb3MgPiBsZW5ndGgpXG4gICAgICAgIHBvcyA9IGxlbmd0aDtcbiAgICBsZXQgZnJvbSA9IHBvcywgdG8gPSBwb3MsIGZsYXR0ZW4gPSAwO1xuICAgIGlmIChwb3MgPT0gMCAmJiBzaWRlIDwgMCB8fCBwb3MgPT0gbGVuZ3RoICYmIHNpZGUgPj0gMCkge1xuICAgICAgICBpZiAoIShicm93c2VyLmNocm9tZSB8fCBicm93c2VyLmdlY2tvKSkgeyAvLyBUaGVzZSBicm93c2VycyByZWxpYWJseSByZXR1cm4gdmFsaWQgcmVjdGFuZ2xlcyBmb3IgZW1wdHkgcmFuZ2VzXG4gICAgICAgICAgICBpZiAocG9zKSB7XG4gICAgICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICAgICAgICAgIGZsYXR0ZW4gPSAxO1xuICAgICAgICAgICAgfSAvLyBGSVhNRSB0aGlzIGlzIHdyb25nIGluIFJUTCB0ZXh0XG4gICAgICAgICAgICBlbHNlIGlmICh0byA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICAgICAgZmxhdHRlbiA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoc2lkZSA8IDApXG4gICAgICAgICAgICBmcm9tLS07XG4gICAgICAgIGVsc2UgaWYgKHRvIDwgbGVuZ3RoKVxuICAgICAgICAgICAgdG8rKztcbiAgICB9XG4gICAgbGV0IHJlY3RzID0gdGV4dFJhbmdlKHRleHQsIGZyb20sIHRvKS5nZXRDbGllbnRSZWN0cygpO1xuICAgIGlmICghcmVjdHMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgcmVjdCA9IHJlY3RzWyhmbGF0dGVuID8gZmxhdHRlbiA8IDAgOiBzaWRlID49IDApID8gMCA6IHJlY3RzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChicm93c2VyLnNhZmFyaSAmJiAhZmxhdHRlbiAmJiByZWN0LndpZHRoID09IDApXG4gICAgICAgIHJlY3QgPSBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKHJlY3RzLCByID0+IHIud2lkdGgpIHx8IHJlY3Q7XG4gICAgcmV0dXJuIGZsYXR0ZW4gPyBmbGF0dGVuUmVjdChyZWN0LCBmbGF0dGVuIDwgMCkgOiByZWN0IHx8IG51bGw7XG59XG4vLyBBbHNvIHVzZWQgZm9yIGNvbGxhcHNlZCByYW5nZXMgdGhhdCBkb24ndCBoYXZlIGEgcGxhY2Vob2xkZXIgd2lkZ2V0IVxuY2xhc3MgV2lkZ2V0VmlldyBleHRlbmRzIENvbnRlbnRWaWV3IHtcbiAgICBzdGF0aWMgY3JlYXRlKHdpZGdldCwgbGVuZ3RoLCBzaWRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgV2lkZ2V0Vmlldyh3aWRnZXQsIGxlbmd0aCwgc2lkZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCwgbGVuZ3RoLCBzaWRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5zaWRlID0gc2lkZTtcbiAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgc3BsaXQoZnJvbSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gV2lkZ2V0Vmlldy5jcmVhdGUodGhpcy53aWRnZXQsIHRoaXMubGVuZ3RoIC0gZnJvbSwgdGhpcy5zaWRlKTtcbiAgICAgICAgdGhpcy5sZW5ndGggLT0gZnJvbTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc3luYyh2aWV3KSB7XG4gICAgICAgIGlmICghdGhpcy5kb20gfHwgIXRoaXMud2lkZ2V0LnVwZGF0ZURPTSh0aGlzLmRvbSwgdmlldykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbSAmJiB0aGlzLnByZXZXaWRnZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0LmRlc3Ryb3kodGhpcy5kb20pO1xuICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKHRoaXMud2lkZ2V0LnRvRE9NKHZpZXcpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy53aWRnZXQuZWRpdGFibGUpXG4gICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFNpZGUoKSB7IHJldHVybiB0aGlzLnNpZGU7IH1cbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBoYXNTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgICAgIGlmIChzb3VyY2UgJiYgKCEoc291cmNlIGluc3RhbmNlb2YgV2lkZ2V0VmlldykgfHwgIXRoaXMud2lkZ2V0LmNvbXBhcmUoc291cmNlLndpZGdldCkgfHxcbiAgICAgICAgICAgIGZyb20gPiAwICYmIG9wZW5TdGFydCA8PSAwIHx8IHRvIDwgdGhpcy5sZW5ndGggJiYgb3BlbkVuZCA8PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBmcm9tICsgKHNvdXJjZSA/IHNvdXJjZS5sZW5ndGggOiAwKSArICh0aGlzLmxlbmd0aCAtIHRvKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGJlY29tZShvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBXaWRnZXRWaWV3ICYmIG90aGVyLnNpZGUgPT0gdGhpcy5zaWRlICYmXG4gICAgICAgICAgICB0aGlzLndpZGdldC5jb25zdHJ1Y3RvciA9PSBvdGhlci53aWRnZXQuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy53aWRnZXQuY29tcGFyZShvdGhlci53aWRnZXQpKVxuICAgICAgICAgICAgICAgIHRoaXMubWFya0RpcnR5KHRydWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tICYmICF0aGlzLnByZXZXaWRnZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gdGhpcy53aWRnZXQ7XG4gICAgICAgICAgICB0aGlzLndpZGdldCA9IG90aGVyLndpZGdldDtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZ25vcmVNdXRhdGlvbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBpZ25vcmVFdmVudChldmVudCkgeyByZXR1cm4gdGhpcy53aWRnZXQuaWdub3JlRXZlbnQoZXZlbnQpOyB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gVGV4dC5lbXB0eTtcbiAgICAgICAgbGV0IHRvcCA9IHRoaXM7XG4gICAgICAgIHdoaWxlICh0b3AucGFyZW50KVxuICAgICAgICAgICAgdG9wID0gdG9wLnBhcmVudDtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdG9wLCB0ZXh0ID0gdmlldyAmJiB2aWV3LnN0YXRlLmRvYywgc3RhcnQgPSB0aGlzLnBvc0F0U3RhcnQ7XG4gICAgICAgIHJldHVybiB0ZXh0ID8gdGV4dC5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLmxlbmd0aCkgOiBUZXh0LmVtcHR5O1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmxlbmd0aCA/IHBvcyA9PSAwIDogdGhpcy5zaWRlID4gMClcbiAgICAgICAgICAgID8gRE9NUG9zLmJlZm9yZSh0aGlzLmRvbSlcbiAgICAgICAgICAgIDogRE9NUG9zLmFmdGVyKHRoaXMuZG9tLCBwb3MgPT0gdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBkb21Cb3VuZHNBcm91bmQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBjdXN0b20gPSB0aGlzLndpZGdldC5jb29yZHNBdCh0aGlzLmRvbSwgcG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKGN1c3RvbSlcbiAgICAgICAgICAgIHJldHVybiBjdXN0b207XG4gICAgICAgIGxldCByZWN0cyA9IHRoaXMuZG9tLmdldENsaWVudFJlY3RzKCksIHJlY3QgPSBudWxsO1xuICAgICAgICBpZiAoIXJlY3RzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgZnJvbUJhY2sgPSB0aGlzLnNpZGUgPyB0aGlzLnNpZGUgPCAwIDogcG9zID4gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb21CYWNrID8gcmVjdHMubGVuZ3RoIC0gMSA6IDA7OyBpICs9IChmcm9tQmFjayA/IC0xIDogMSkpIHtcbiAgICAgICAgICAgIHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgICAgIGlmIChwb3MgPiAwID8gaSA9PSAwIDogaSA9PSByZWN0cy5sZW5ndGggLSAxIHx8IHJlY3QudG9wIDwgcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYXR0ZW5SZWN0KHJlY3QsICFmcm9tQmFjayk7XG4gICAgfVxuICAgIGdldCBpc0VkaXRhYmxlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBnZXQgaXNXaWRnZXQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gdGhpcy53aWRnZXQuaXNIaWRkZW47IH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLmRvbSlcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0LmRlc3Ryb3kodGhpcy5kb20pO1xuICAgIH1cbn1cbi8vIFRoZXNlIGFyZSBkcmF3biBhcm91bmQgdW5lZGl0YWJsZSB3aWRnZXRzIHRvIGF2b2lkIGEgbnVtYmVyIG9mXG4vLyBicm93c2VyIGJ1Z3MgdGhhdCBzaG93IHVwIHdoZW4gdGhlIGN1cnNvciBpcyBkaXJlY3RseSBuZXh0IHRvXG4vLyB1bmVkaXRhYmxlIGlubGluZSBjb250ZW50LlxuY2xhc3MgV2lkZ2V0QnVmZmVyVmlldyBleHRlbmRzIENvbnRlbnRWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihzaWRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2lkZSA9IHNpZGU7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiAwOyB9XG4gICAgbWVyZ2UoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGJlY29tZShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBXaWRnZXRCdWZmZXJWaWV3ICYmIG90aGVyLnNpZGUgPT0gdGhpcy5zaWRlO1xuICAgIH1cbiAgICBzcGxpdCgpIHsgcmV0dXJuIG5ldyBXaWRnZXRCdWZmZXJWaWV3KHRoaXMuc2lkZSk7IH1cbiAgICBzeW5jKCkge1xuICAgICAgICBpZiAoIXRoaXMuZG9tKSB7XG4gICAgICAgICAgICBsZXQgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgICAgIGRvbS5jbGFzc05hbWUgPSBcImNtLXdpZGdldEJ1ZmZlclwiO1xuICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKGRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0U2lkZSgpIHsgcmV0dXJuIHRoaXMuc2lkZTsgfVxuICAgIGRvbUF0UG9zKHBvcykgeyByZXR1cm4gdGhpcy5zaWRlID4gMCA/IERPTVBvcy5iZWZvcmUodGhpcy5kb20pIDogRE9NUG9zLmFmdGVyKHRoaXMuZG9tKTsgfVxuICAgIGxvY2FsUG9zRnJvbURPTSgpIHsgcmV0dXJuIDA7IH1cbiAgICBkb21Cb3VuZHNBcm91bmQoKSB7IHJldHVybiBudWxsOyB9XG4gICAgY29vcmRzQXQocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFRleHQuZW1wdHk7XG4gICAgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIHRydWU7IH1cbn1cblRleHRWaWV3LnByb3RvdHlwZS5jaGlsZHJlbiA9IFdpZGdldFZpZXcucHJvdG90eXBlLmNoaWxkcmVuID0gV2lkZ2V0QnVmZmVyVmlldy5wcm90b3R5cGUuY2hpbGRyZW4gPSBub0NoaWxkcmVuO1xuZnVuY3Rpb24gaW5saW5lRE9NQXRQb3MocGFyZW50LCBwb3MpIHtcbiAgICBsZXQgZG9tID0gcGFyZW50LmRvbSwgeyBjaGlsZHJlbiB9ID0gcGFyZW50LCBpID0gMDtcbiAgICBmb3IgKGxldCBvZmYgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV0sIGVuZCA9IG9mZiArIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgaWYgKGVuZCA9PSBvZmYgJiYgY2hpbGQuZ2V0U2lkZSgpIDw9IDApXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKHBvcyA+IG9mZiAmJiBwb3MgPCBlbmQgJiYgY2hpbGQuZG9tLnBhcmVudE5vZGUgPT0gZG9tKVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmRvbUF0UG9zKHBvcyAtIG9mZik7XG4gICAgICAgIGlmIChwb3MgPD0gb2ZmKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIG9mZiA9IGVuZDtcbiAgICB9XG4gICAgZm9yIChsZXQgaiA9IGk7IGogPiAwOyBqLS0pIHtcbiAgICAgICAgbGV0IHByZXYgPSBjaGlsZHJlbltqIC0gMV07XG4gICAgICAgIGlmIChwcmV2LmRvbS5wYXJlbnROb2RlID09IGRvbSlcbiAgICAgICAgICAgIHJldHVybiBwcmV2LmRvbUF0UG9zKHByZXYubGVuZ3RoKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaiA9IGk7IGogPCBjaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICBsZXQgbmV4dCA9IGNoaWxkcmVuW2pdO1xuICAgICAgICBpZiAobmV4dC5kb20ucGFyZW50Tm9kZSA9PSBkb20pXG4gICAgICAgICAgICByZXR1cm4gbmV4dC5kb21BdFBvcygwKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBET01Qb3MoZG9tLCAwKTtcbn1cbi8vIEFzc3VtZXMgYHZpZXdgLCBpZiBhIG1hcmsgdmlldywgaGFzIHByZWNpc2VseSAxIGNoaWxkLlxuZnVuY3Rpb24gam9pbklubGluZUludG8ocGFyZW50LCB2aWV3LCBvcGVuKSB7XG4gICAgbGV0IGxhc3QsIHsgY2hpbGRyZW4gfSA9IHBhcmVudDtcbiAgICBpZiAob3BlbiA+IDAgJiYgdmlldyBpbnN0YW5jZW9mIE1hcmtWaWV3ICYmIGNoaWxkcmVuLmxlbmd0aCAmJlxuICAgICAgICAobGFzdCA9IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdKSBpbnN0YW5jZW9mIE1hcmtWaWV3ICYmIGxhc3QubWFyay5lcSh2aWV3Lm1hcmspKSB7XG4gICAgICAgIGpvaW5JbmxpbmVJbnRvKGxhc3QsIHZpZXcuY2hpbGRyZW5bMF0sIG9wZW4gLSAxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2godmlldyk7XG4gICAgICAgIHZpZXcuc2V0UGFyZW50KHBhcmVudCk7XG4gICAgfVxuICAgIHBhcmVudC5sZW5ndGggKz0gdmlldy5sZW5ndGg7XG59XG5mdW5jdGlvbiBjb29yZHNJbkNoaWxkcmVuKHZpZXcsIHBvcywgc2lkZSkge1xuICAgIGxldCBiZWZvcmUgPSBudWxsLCBiZWZvcmVQb3MgPSAtMSwgYWZ0ZXIgPSBudWxsLCBhZnRlclBvcyA9IC0xO1xuICAgIGZ1bmN0aW9uIHNjYW4odmlldywgcG9zKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBvZmYgPSAwOyBpIDwgdmlldy5jaGlsZHJlbi5sZW5ndGggJiYgb2ZmIDw9IHBvczsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB2aWV3LmNoaWxkcmVuW2ldLCBlbmQgPSBvZmYgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZW5kID49IHBvcykge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbihjaGlsZCwgcG9zIC0gb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKCFhZnRlciB8fCBhZnRlci5pc0hpZGRlbiAmJiAoc2lkZSA+IDAgfHwgb25TYW1lTGluZShhZnRlciwgY2hpbGQpKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGVuZCA+IHBvcyB8fCBvZmYgPT0gZW5kICYmIGNoaWxkLmdldFNpZGUoKSA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyUG9zID0gcG9zIC0gb2ZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvZmYgPCBwb3MgfHwgKG9mZiA9PSBlbmQgJiYgY2hpbGQuZ2V0U2lkZSgpIDwgMCkgJiYgIWNoaWxkLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmVQb3MgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2ZmID0gZW5kO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjYW4odmlldywgcG9zKTtcbiAgICBsZXQgdGFyZ2V0ID0gKHNpZGUgPCAwID8gYmVmb3JlIDogYWZ0ZXIpIHx8IGJlZm9yZSB8fCBhZnRlcjtcbiAgICBpZiAodGFyZ2V0KVxuICAgICAgICByZXR1cm4gdGFyZ2V0LmNvb3Jkc0F0KE1hdGgubWF4KDAsIHRhcmdldCA9PSBiZWZvcmUgPyBiZWZvcmVQb3MgOiBhZnRlclBvcyksIHNpZGUpO1xuICAgIHJldHVybiBmYWxsYmFja1JlY3Qodmlldyk7XG59XG5mdW5jdGlvbiBmYWxsYmFja1JlY3Qodmlldykge1xuICAgIGxldCBsYXN0ID0gdmlldy5kb20ubGFzdENoaWxkO1xuICAgIGlmICghbGFzdClcbiAgICAgICAgcmV0dXJuIHZpZXcuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCByZWN0cyA9IGNsaWVudFJlY3RzRm9yKGxhc3QpO1xuICAgIHJldHVybiByZWN0c1tyZWN0cy5sZW5ndGggLSAxXSB8fCBudWxsO1xufVxuZnVuY3Rpb24gb25TYW1lTGluZShhLCBiKSB7XG4gICAgbGV0IHBvc0EgPSBhLmNvb3Jkc0F0KDAsIDEpLCBwb3NCID0gYi5jb29yZHNBdCgwLCAxKTtcbiAgICByZXR1cm4gcG9zQSAmJiBwb3NCICYmIHBvc0IudG9wIDwgcG9zQS5ib3R0b207XG59XG5cbmZ1bmN0aW9uIGNvbWJpbmVBdHRycyhzb3VyY2UsIHRhcmdldCkge1xuICAgIGZvciAobGV0IG5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChuYW1lID09IFwiY2xhc3NcIiAmJiB0YXJnZXQuY2xhc3MpXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3MgKz0gXCIgXCIgKyBzb3VyY2UuY2xhc3M7XG4gICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gXCJzdHlsZVwiICYmIHRhcmdldC5zdHlsZSlcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZSArPSBcIjtcIiArIHNvdXJjZS5zdHlsZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gc291cmNlW25hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuY29uc3Qgbm9BdHRycyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gYXR0cnNFcShhLCBiLCBpZ25vcmUpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWEpXG4gICAgICAgIGEgPSBub0F0dHJzO1xuICAgIGlmICghYilcbiAgICAgICAgYiA9IG5vQXR0cnM7XG4gICAgbGV0IGtleXNBID0gT2JqZWN0LmtleXMoYSksIGtleXNCID0gT2JqZWN0LmtleXMoYik7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAtIChpZ25vcmUgJiYga2V5c0EuaW5kZXhPZihpZ25vcmUpID4gLTEgPyAxIDogMCkgIT1cbiAgICAgICAga2V5c0IubGVuZ3RoIC0gKGlnbm9yZSAmJiBrZXlzQi5pbmRleE9mKGlnbm9yZSkgPiAtMSA/IDEgOiAwKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGtleSBvZiBrZXlzQSkge1xuICAgICAgICBpZiAoa2V5ICE9IGlnbm9yZSAmJiAoa2V5c0IuaW5kZXhPZihrZXkpID09IC0xIHx8IGFba2V5XSAhPT0gYltrZXldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB1cGRhdGVBdHRycyhkb20sIHByZXYsIGF0dHJzKSB7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAocHJldilcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwcmV2KVxuICAgICAgICAgICAgaWYgKCEoYXR0cnMgJiYgbmFtZSBpbiBhdHRycykpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgaWYgKGF0dHJzKVxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKVxuICAgICAgICAgICAgaWYgKCEocHJldiAmJiBwcmV2W25hbWVdID09IGF0dHJzW25hbWVdKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09IFwic3R5bGVcIilcbiAgICAgICAgICAgICAgICAgICAgZG9tLnN0eWxlLmNzc1RleHQgPSBhdHRyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUobmFtZSwgYXR0cnNbbmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgIHJldHVybiBjaGFuZ2VkO1xufVxuZnVuY3Rpb24gZ2V0QXR0cnMoZG9tKSB7XG4gICAgbGV0IGF0dHJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbS5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBhdHRyID0gZG9tLmF0dHJpYnV0ZXNbaV07XG4gICAgICAgIGF0dHJzW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cnM7XG59XG5cbi8qKlxuV2lkZ2V0cyBhZGRlZCB0byB0aGUgY29udGVudCBhcmUgZGVzY3JpYmVkIGJ5IHN1YmNsYXNzZXMgb2YgdGhpc1xuY2xhc3MuIFVzaW5nIGEgZGVzY3JpcHRpb24gb2JqZWN0IGxpa2UgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSB0b1xuZGVsYXkgY3JlYXRpbmcgb2YgdGhlIERPTSBzdHJ1Y3R1cmUgZm9yIGEgd2lkZ2V0IHVudGlsIGl0IGlzXG5uZWVkZWQsIGFuZCB0byBhdm9pZCByZWRyYXdpbmcgd2lkZ2V0cyBldmVuIGlmIHRoZSBkZWNvcmF0aW9uc1xudGhhdCBkZWZpbmUgdGhlbSBhcmUgcmVjcmVhdGVkLlxuKi9cbmNsYXNzIFdpZGdldFR5cGUge1xuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBpbnN0YW5jZSB0byBhbm90aGVyIGluc3RhbmNlIG9mIHRoZSBzYW1lIHR5cGUuXG4gICAgKFR5cGVTY3JpcHQgY2FuJ3QgZXhwcmVzcyB0aGlzLCBidXQgb25seSBpbnN0YW5jZXMgb2YgdGhlIHNhbWVcbiAgICBzcGVjaWZpYyBjbGFzcyB3aWxsIGJlIHBhc3NlZCB0byB0aGlzIG1ldGhvZC4pIFRoaXMgaXMgdXNlZCB0b1xuICAgIGF2b2lkIHJlZHJhd2luZyB3aWRnZXRzIHdoZW4gdGhleSBhcmUgcmVwbGFjZWQgYnkgYSBuZXdcbiAgICBkZWNvcmF0aW9uIG9mIHRoZSBzYW1lIHR5cGUuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGp1c3RcbiAgICByZXR1cm5zIGBmYWxzZWAsIHdoaWNoIHdpbGwgY2F1c2UgbmV3IGluc3RhbmNlcyBvZiB0aGUgd2lkZ2V0IHRvXG4gICAgYWx3YXlzIGJlIHJlZHJhd24uXG4gICAgKi9cbiAgICBlcSh3aWRnZXQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLyoqXG4gICAgVXBkYXRlIGEgRE9NIGVsZW1lbnQgY3JlYXRlZCBieSBhIHdpZGdldCBvZiB0aGUgc2FtZSB0eXBlIChidXRcbiAgICBkaWZmZXJlbnQsIG5vbi1gZXFgIGNvbnRlbnQpIHRvIHJlZmxlY3QgdGhpcyB3aWRnZXQuIE1heSByZXR1cm5cbiAgICB0cnVlIHRvIGluZGljYXRlIHRoYXQgaXQgY291bGQgdXBkYXRlLCBmYWxzZSB0byBpbmRpY2F0ZSBpdFxuICAgIGNvdWxkbid0IChpbiB3aGljaCBjYXNlIHRoZSB3aWRnZXQgd2lsbCBiZSByZWRyYXduKS4gVGhlIGRlZmF1bHRcbiAgICBpbXBsZW1lbnRhdGlvbiBqdXN0IHJldHVybnMgZmFsc2UuXG4gICAgKi9cbiAgICB1cGRhdGVET00oZG9tLCB2aWV3KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlciB8fCB0aGlzLmNvbnN0cnVjdG9yID09IG90aGVyLmNvbnN0cnVjdG9yICYmIHRoaXMuZXEob3RoZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZXN0aW1hdGVkIGhlaWdodCB0aGlzIHdpZGdldCB3aWxsIGhhdmUsIHRvIGJlIHVzZWQgd2hlblxuICAgIGVzdGltYXRpbmcgdGhlIGhlaWdodCBvZiBjb250ZW50IHRoYXQgaGFzbid0IGJlZW4gZHJhd24uIE1heVxuICAgIHJldHVybiAtMSB0byBpbmRpY2F0ZSB5b3UgZG9uJ3Qga25vdy4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgICByZXR1cm5zIC0xLlxuICAgICovXG4gICAgZ2V0IGVzdGltYXRlZEhlaWdodCgpIHsgcmV0dXJuIC0xOyB9XG4gICAgLyoqXG4gICAgRm9yIGlubGluZSB3aWRnZXRzIHRoYXQgYXJlIGRpc3BsYXllZCBpbmxpbmUgKGFzIG9wcG9zZWQgdG9cbiAgICBgaW5saW5lLWJsb2NrYCkgYW5kIGludHJvZHVjZSBsaW5lIGJyZWFrcyAodGhyb3VnaCBgPGJyPmAgdGFnc1xuICAgIG9yIHRleHR1YWwgbmV3bGluZXMpLCB0aGlzIG11c3QgaW5kaWNhdGUgdGhlIGFtb3VudCBvZiBsaW5lXG4gICAgYnJlYWtzIHRoZXkgaW50cm9kdWNlLiBEZWZhdWx0cyB0byAwLlxuICAgICovXG4gICAgZ2V0IGxpbmVCcmVha3MoKSB7IHJldHVybiAwOyB9XG4gICAgLyoqXG4gICAgQ2FuIGJlIHVzZWQgdG8gY29uZmlndXJlIHdoaWNoIGtpbmRzIG9mIGV2ZW50cyBpbnNpZGUgdGhlIHdpZGdldFxuICAgIHNob3VsZCBiZSBpZ25vcmVkIGJ5IHRoZSBlZGl0b3IuIFRoZSBkZWZhdWx0IGlzIHRvIGlnbm9yZSBhbGxcbiAgICBldmVudHMuXG4gICAgKi9cbiAgICBpZ25vcmVFdmVudChldmVudCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIC8qKlxuICAgIE92ZXJyaWRlIHRoZSB3YXkgc2NyZWVuIGNvb3JkaW5hdGVzIGZvciBwb3NpdGlvbnMgYXQvaW4gdGhlXG4gICAgd2lkZ2V0IGFyZSBmb3VuZC4gYHBvc2Agd2lsbCBiZSB0aGUgb2Zmc2V0IGludG8gdGhlIHdpZGdldCwgYW5kXG4gICAgYHNpZGVgIHRoZSBzaWRlIG9mIHRoZSBwb3NpdGlvbiB0aGF0IGlzIGJlaW5nIHF1ZXJpZWTigJRsZXNzIHRoYW5cbiAgICB6ZXJvIGZvciBiZWZvcmUsIGdyZWF0ZXIgdGhhbiB6ZXJvIGZvciBhZnRlciwgYW5kIHplcm8gZm9yXG4gICAgZGlyZWN0bHkgYXQgdGhhdCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGNvb3Jkc0F0KGRvbSwgcG9zLCBzaWRlKSB7IHJldHVybiBudWxsOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgaXNIaWRkZW4oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGVkaXRhYmxlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBhbiBpbnN0YW5jZSBvZiB0aGUgd2lkZ2V0IGlzIHJlbW92ZWRcbiAgICBmcm9tIHRoZSBlZGl0b3Igdmlldy5cbiAgICAqL1xuICAgIGRlc3Ryb3koZG9tKSB7IH1cbn1cbi8qKlxuVGhlIGRpZmZlcmVudCB0eXBlcyBvZiBibG9ja3MgdGhhdCBjYW4gb2NjdXIgaW4gYW4gZWRpdG9yIHZpZXcuXG4qL1xudmFyIEJsb2NrVHlwZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJsb2NrVHlwZSkge1xuICAgIC8qKlxuICAgIEEgbGluZSBvZiB0ZXh0LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIlRleHRcIl0gPSAwXSA9IFwiVGV4dFwiO1xuICAgIC8qKlxuICAgIEEgYmxvY2sgd2lkZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9zaXRpb24gYWZ0ZXIgaXQuXG4gICAgKi9cbiAgICBCbG9ja1R5cGVbQmxvY2tUeXBlW1wiV2lkZ2V0QmVmb3JlXCJdID0gMV0gPSBcIldpZGdldEJlZm9yZVwiO1xuICAgIC8qKlxuICAgIEEgYmxvY2sgd2lkZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9zaXRpb24gYmVmb3JlIGl0LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIldpZGdldEFmdGVyXCJdID0gMl0gPSBcIldpZGdldEFmdGVyXCI7XG4gICAgLyoqXG4gICAgQSBibG9jayB3aWRnZXQgW3JlcGxhY2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25ecmVwbGFjZSkgYSByYW5nZSBvZiBjb250ZW50LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIldpZGdldFJhbmdlXCJdID0gM10gPSBcIldpZGdldFJhbmdlXCI7XG5yZXR1cm4gQmxvY2tUeXBlfSkoQmxvY2tUeXBlIHx8IChCbG9ja1R5cGUgPSB7fSkpO1xuLyoqXG5BIGRlY29yYXRpb24gcHJvdmlkZXMgaW5mb3JtYXRpb24gb24gaG93IHRvIGRyYXcgb3Igc3R5bGUgYSBwaWVjZVxub2YgY29udGVudC4gWW91J2xsIHVzdWFsbHkgdXNlIGl0IHdyYXBwZWQgaW4gYVxuW2BSYW5nZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2UpLCB3aGljaCBhZGRzIGEgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbi5cbkBub25hYnN0cmFjdFxuKi9cbmNsYXNzIERlY29yYXRpb24gZXh0ZW5kcyBSYW5nZVZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXJ0U2lkZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBlbmRTaWRlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHdpZGdldCwgXG4gICAgLyoqXG4gICAgVGhlIGNvbmZpZyBvYmplY3QgdXNlZCB0byBjcmVhdGUgdGhpcyBkZWNvcmF0aW9uLiBZb3UgY2FuXG4gICAgaW5jbHVkZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgaW4gdGhlcmUgdG8gc3RvcmUgbWV0YWRhdGEgYWJvdXRcbiAgICB5b3VyIGRlY29yYXRpb24uXG4gICAgKi9cbiAgICBzcGVjKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3RhcnRTaWRlID0gc3RhcnRTaWRlO1xuICAgICAgICB0aGlzLmVuZFNpZGUgPSBlbmRTaWRlO1xuICAgICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgaGVpZ2h0UmVsZXZhbnQoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmsgZGVjb3JhdGlvbiwgd2hpY2ggaW5mbHVlbmNlcyB0aGUgc3R5bGluZyBvZiB0aGVcbiAgICBjb250ZW50IGluIGl0cyByYW5nZS4gTmVzdGVkIG1hcmsgZGVjb3JhdGlvbnMgd2lsbCBjYXVzZSBuZXN0ZWRcbiAgICBET00gZWxlbWVudHMgdG8gYmUgY3JlYXRlZC4gTmVzdGluZyBvcmRlciBpcyBkZXRlcm1pbmVkIGJ5XG4gICAgcHJlY2VkZW5jZSBvZiB0aGUgW2ZhY2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15kZWNvcmF0aW9ucyksIHdpdGhcbiAgICB0aGUgaGlnaGVyLXByZWNlZGVuY2UgZGVjb3JhdGlvbnMgY3JlYXRpbmcgdGhlIGlubmVyIERPTSBub2Rlcy5cbiAgICBTdWNoIGVsZW1lbnRzIGFyZSBzcGxpdCBvbiBsaW5lIGJvdW5kYXJpZXMgYW5kIG9uIHRoZSBib3VuZGFyaWVzXG4gICAgb2YgbG93ZXItcHJlY2VkZW5jZSBkZWNvcmF0aW9ucy5cbiAgICAqL1xuICAgIHN0YXRpYyBtYXJrKHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXJrRGVjb3JhdGlvbihzcGVjKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgd2lkZ2V0IGRlY29yYXRpb24sIHdoaWNoIGRpc3BsYXlzIGEgRE9NIGVsZW1lbnQgYXQgdGhlXG4gICAgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgd2lkZ2V0KHNwZWMpIHtcbiAgICAgICAgbGV0IHNpZGUgPSBNYXRoLm1heCgtMTAwMDAsIE1hdGgubWluKDEwMDAwLCBzcGVjLnNpZGUgfHwgMCkpLCBibG9jayA9ICEhc3BlYy5ibG9jaztcbiAgICAgICAgc2lkZSArPSAoYmxvY2sgJiYgIXNwZWMuaW5saW5lT3JkZXIpXG4gICAgICAgICAgICA/IChzaWRlID4gMCA/IDMwMDAwMDAwMCAvKiBTaWRlLkJsb2NrQWZ0ZXIgKi8gOiAtNDAwMDAwMDAwIC8qIFNpZGUuQmxvY2tCZWZvcmUgKi8pXG4gICAgICAgICAgICA6IChzaWRlID4gMCA/IDEwMDAwMDAwMCAvKiBTaWRlLklubGluZUFmdGVyICovIDogLTEwMDAwMDAwMCAvKiBTaWRlLklubGluZUJlZm9yZSAqLyk7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnREZWNvcmF0aW9uKHNwZWMsIHNpZGUsIHNpZGUsIGJsb2NrLCBzcGVjLndpZGdldCB8fCBudWxsLCBmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHJlcGxhY2UgZGVjb3JhdGlvbiB3aGljaCByZXBsYWNlcyB0aGUgZ2l2ZW4gcmFuZ2Ugd2l0aFxuICAgIGEgd2lkZ2V0LCBvciBzaW1wbHkgaGlkZXMgaXQuXG4gICAgKi9cbiAgICBzdGF0aWMgcmVwbGFjZShzcGVjKSB7XG4gICAgICAgIGxldCBibG9jayA9ICEhc3BlYy5ibG9jaywgc3RhcnRTaWRlLCBlbmRTaWRlO1xuICAgICAgICBpZiAoc3BlYy5pc0Jsb2NrR2FwKSB7XG4gICAgICAgICAgICBzdGFydFNpZGUgPSAtNTAwMDAwMDAwIC8qIFNpZGUuR2FwU3RhcnQgKi87XG4gICAgICAgICAgICBlbmRTaWRlID0gNDAwMDAwMDAwIC8qIFNpZGUuR2FwRW5kICovO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHsgc3RhcnQsIGVuZCB9ID0gZ2V0SW5jbHVzaXZlKHNwZWMsIGJsb2NrKTtcbiAgICAgICAgICAgIHN0YXJ0U2lkZSA9IChzdGFydCA/IChibG9jayA/IC0zMDAwMDAwMDAgLyogU2lkZS5CbG9ja0luY1N0YXJ0ICovIDogLTEgLyogU2lkZS5JbmxpbmVJbmNTdGFydCAqLykgOiA1MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNTdGFydCAqLykgLSAxO1xuICAgICAgICAgICAgZW5kU2lkZSA9IChlbmQgPyAoYmxvY2sgPyAyMDAwMDAwMDAgLyogU2lkZS5CbG9ja0luY0VuZCAqLyA6IDEgLyogU2lkZS5JbmxpbmVJbmNFbmQgKi8pIDogLTYwMDAwMDAwMCAvKiBTaWRlLk5vbkluY0VuZCAqLykgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnREZWNvcmF0aW9uKHNwZWMsIHN0YXJ0U2lkZSwgZW5kU2lkZSwgYmxvY2ssIHNwZWMud2lkZ2V0IHx8IG51bGwsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBsaW5lIGRlY29yYXRpb24sIHdoaWNoIGNhbiBhZGQgRE9NIGF0dHJpYnV0ZXMgdG8gdGhlXG4gICAgbGluZSBzdGFydGluZyBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgbGluZShzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZURlY29yYXRpb24oc3BlYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEJ1aWxkIGEgW2BEZWNvcmF0aW9uU2V0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25TZXQpIGZyb20gdGhlIGdpdmVuXG4gICAgZGVjb3JhdGVkIHJhbmdlIG9yIHJhbmdlcy4gSWYgdGhlIHJhbmdlcyBhcmVuJ3QgYWxyZWFkeSBzb3J0ZWQsXG4gICAgcGFzcyBgdHJ1ZWAgZm9yIGBzb3J0YCB0byBtYWtlIHRoZSBsaWJyYXJ5IHNvcnQgdGhlbSBmb3IgeW91LlxuICAgICovXG4gICAgc3RhdGljIHNldChvZiwgc29ydCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBSYW5nZVNldC5vZihvZiwgc29ydCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaGFzSGVpZ2h0KCkgeyByZXR1cm4gdGhpcy53aWRnZXQgPyB0aGlzLndpZGdldC5lc3RpbWF0ZWRIZWlnaHQgPiAtMSA6IGZhbHNlOyB9XG59XG4vKipcblRoZSBlbXB0eSBzZXQgb2YgZGVjb3JhdGlvbnMuXG4qL1xuRGVjb3JhdGlvbi5ub25lID0gUmFuZ2VTZXQuZW1wdHk7XG5jbGFzcyBNYXJrRGVjb3JhdGlvbiBleHRlbmRzIERlY29yYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgbGV0IHsgc3RhcnQsIGVuZCB9ID0gZ2V0SW5jbHVzaXZlKHNwZWMpO1xuICAgICAgICBzdXBlcihzdGFydCA/IC0xIC8qIFNpZGUuSW5saW5lSW5jU3RhcnQgKi8gOiA1MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNTdGFydCAqLywgZW5kID8gMSAvKiBTaWRlLklubGluZUluY0VuZCAqLyA6IC02MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNFbmQgKi8sIG51bGwsIHNwZWMpO1xuICAgICAgICB0aGlzLnRhZ05hbWUgPSBzcGVjLnRhZ05hbWUgfHwgXCJzcGFuXCI7XG4gICAgICAgIHRoaXMuY2xhc3MgPSBzcGVjLmNsYXNzIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBzcGVjLmF0dHJpYnV0ZXMgfHwgbnVsbDtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHxcbiAgICAgICAgICAgIG90aGVyIGluc3RhbmNlb2YgTWFya0RlY29yYXRpb24gJiZcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ05hbWUgPT0gb3RoZXIudGFnTmFtZSAmJlxuICAgICAgICAgICAgICAgICh0aGlzLmNsYXNzIHx8ICgoX2EgPSB0aGlzLmF0dHJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xhc3MpKSA9PSAob3RoZXIuY2xhc3MgfHwgKChfYiA9IG90aGVyLmF0dHJzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xhc3MpKSAmJlxuICAgICAgICAgICAgICAgIGF0dHJzRXEodGhpcy5hdHRycywgb3RoZXIuYXR0cnMsIFwiY2xhc3NcIik7XG4gICAgfVxuICAgIHJhbmdlKGZyb20sIHRvID0gZnJvbSkge1xuICAgICAgICBpZiAoZnJvbSA+PSB0bylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTWFyayBkZWNvcmF0aW9ucyBtYXkgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cbk1hcmtEZWNvcmF0aW9uLnByb3RvdHlwZS5wb2ludCA9IGZhbHNlO1xuY2xhc3MgTGluZURlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHN1cGVyKC0yMDAwMDAwMDAgLyogU2lkZS5MaW5lICovLCAtMjAwMDAwMDAwIC8qIFNpZGUuTGluZSAqLywgbnVsbCwgc3BlYyk7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIExpbmVEZWNvcmF0aW9uICYmXG4gICAgICAgICAgICB0aGlzLnNwZWMuY2xhc3MgPT0gb3RoZXIuc3BlYy5jbGFzcyAmJlxuICAgICAgICAgICAgYXR0cnNFcSh0aGlzLnNwZWMuYXR0cmlidXRlcywgb3RoZXIuc3BlYy5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgcmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmICh0byAhPSBmcm9tKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJMaW5lIGRlY29yYXRpb24gcmFuZ2VzIG11c3QgYmUgemVyby1sZW5ndGhcIik7XG4gICAgICAgIHJldHVybiBzdXBlci5yYW5nZShmcm9tLCB0byk7XG4gICAgfVxufVxuTGluZURlY29yYXRpb24ucHJvdG90eXBlLm1hcE1vZGUgPSBNYXBNb2RlLlRyYWNrQmVmb3JlO1xuTGluZURlY29yYXRpb24ucHJvdG90eXBlLnBvaW50ID0gdHJ1ZTtcbmNsYXNzIFBvaW50RGVjb3JhdGlvbiBleHRlbmRzIERlY29yYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMsIHN0YXJ0U2lkZSwgZW5kU2lkZSwgYmxvY2ssIHdpZGdldCwgaXNSZXBsYWNlKSB7XG4gICAgICAgIHN1cGVyKHN0YXJ0U2lkZSwgZW5kU2lkZSwgd2lkZ2V0LCBzcGVjKTtcbiAgICAgICAgdGhpcy5ibG9jayA9IGJsb2NrO1xuICAgICAgICB0aGlzLmlzUmVwbGFjZSA9IGlzUmVwbGFjZTtcbiAgICAgICAgdGhpcy5tYXBNb2RlID0gIWJsb2NrID8gTWFwTW9kZS5UcmFja0RlbCA6IHN0YXJ0U2lkZSA8PSAwID8gTWFwTW9kZS5UcmFja0JlZm9yZSA6IE1hcE1vZGUuVHJhY2tBZnRlcjtcbiAgICB9XG4gICAgLy8gT25seSByZWxldmFudCB3aGVuIHRoaXMuYmxvY2sgPT0gdHJ1ZVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFNpZGUgIT0gdGhpcy5lbmRTaWRlID8gQmxvY2tUeXBlLldpZGdldFJhbmdlXG4gICAgICAgICAgICA6IHRoaXMuc3RhcnRTaWRlIDw9IDAgPyBCbG9ja1R5cGUuV2lkZ2V0QmVmb3JlIDogQmxvY2tUeXBlLldpZGdldEFmdGVyO1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0UmVsZXZhbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrIHx8ICEhdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LmVzdGltYXRlZEhlaWdodCA+PSA1IHx8IHRoaXMud2lkZ2V0LmxpbmVCcmVha3MgPiAwKTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgUG9pbnREZWNvcmF0aW9uICYmXG4gICAgICAgICAgICB3aWRnZXRzRXEodGhpcy53aWRnZXQsIG90aGVyLndpZGdldCkgJiZcbiAgICAgICAgICAgIHRoaXMuYmxvY2sgPT0gb3RoZXIuYmxvY2sgJiZcbiAgICAgICAgICAgIHRoaXMuc3RhcnRTaWRlID09IG90aGVyLnN0YXJ0U2lkZSAmJiB0aGlzLmVuZFNpZGUgPT0gb3RoZXIuZW5kU2lkZTtcbiAgICB9XG4gICAgcmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVwbGFjZSAmJiAoZnJvbSA+IHRvIHx8IChmcm9tID09IHRvICYmIHRoaXMuc3RhcnRTaWRlID4gMCAmJiB0aGlzLmVuZFNpZGUgPD0gMCkpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHJhbmdlIGZvciByZXBsYWNlbWVudCBkZWNvcmF0aW9uXCIpO1xuICAgICAgICBpZiAoIXRoaXMuaXNSZXBsYWNlICYmIHRvICE9IGZyb20pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIldpZGdldCBkZWNvcmF0aW9ucyBjYW4gb25seSBoYXZlIHplcm8tbGVuZ3RoIHJhbmdlc1wiKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJhbmdlKGZyb20sIHRvKTtcbiAgICB9XG59XG5Qb2ludERlY29yYXRpb24ucHJvdG90eXBlLnBvaW50ID0gdHJ1ZTtcbmZ1bmN0aW9uIGdldEluY2x1c2l2ZShzcGVjLCBibG9jayA9IGZhbHNlKSB7XG4gICAgbGV0IHsgaW5jbHVzaXZlU3RhcnQ6IHN0YXJ0LCBpbmNsdXNpdmVFbmQ6IGVuZCB9ID0gc3BlYztcbiAgICBpZiAoc3RhcnQgPT0gbnVsbClcbiAgICAgICAgc3RhcnQgPSBzcGVjLmluY2x1c2l2ZTtcbiAgICBpZiAoZW5kID09IG51bGwpXG4gICAgICAgIGVuZCA9IHNwZWMuaW5jbHVzaXZlO1xuICAgIHJldHVybiB7IHN0YXJ0OiBzdGFydCAhPT0gbnVsbCAmJiBzdGFydCAhPT0gdm9pZCAwID8gc3RhcnQgOiBibG9jaywgZW5kOiBlbmQgIT09IG51bGwgJiYgZW5kICE9PSB2b2lkIDAgPyBlbmQgOiBibG9jayB9O1xufVxuZnVuY3Rpb24gd2lkZ2V0c0VxKGEsIGIpIHtcbiAgICByZXR1cm4gYSA9PSBiIHx8ICEhKGEgJiYgYiAmJiBhLmNvbXBhcmUoYikpO1xufVxuZnVuY3Rpb24gYWRkUmFuZ2UoZnJvbSwgdG8sIHJhbmdlcywgbWFyZ2luID0gMCkge1xuICAgIGxldCBsYXN0ID0gcmFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgaWYgKGxhc3QgPj0gMCAmJiByYW5nZXNbbGFzdF0gKyBtYXJnaW4gPj0gZnJvbSlcbiAgICAgICAgcmFuZ2VzW2xhc3RdID0gTWF0aC5tYXgocmFuZ2VzW2xhc3RdLCB0byk7XG4gICAgZWxzZVxuICAgICAgICByYW5nZXMucHVzaChmcm9tLCB0byk7XG59XG5cbmNsYXNzIExpbmVWaWV3IGV4dGVuZHMgQ29udGVudFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBudWxsO1xuICAgICAgICB0aGlzLmJyZWFrQWZ0ZXIgPSAwO1xuICAgIH1cbiAgICAvLyBDb25zdW1lcyBzb3VyY2VcbiAgICBtZXJnZShmcm9tLCB0bywgc291cmNlLCBoYXNTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIExpbmVWaWV3KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZG9tKVxuICAgICAgICAgICAgICAgIHNvdXJjZS50cmFuc2ZlckRPTSh0aGlzKTsgLy8gUmV1c2Ugc291cmNlLmRvbSB3aGVuIGFwcHJvcHJpYXRlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1N0YXJ0KVxuICAgICAgICAgICAgdGhpcy5zZXREZWNvKHNvdXJjZSA/IHNvdXJjZS5hdHRycyA6IG51bGwpO1xuICAgICAgICBtZXJnZUNoaWxkcmVuSW50byh0aGlzLCBmcm9tLCB0bywgc291cmNlID8gc291cmNlLmNoaWxkcmVuLnNsaWNlKCkgOiBbXSwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHNwbGl0KGF0KSB7XG4gICAgICAgIGxldCBlbmQgPSBuZXcgTGluZVZpZXc7XG4gICAgICAgIGVuZC5icmVha0FmdGVyID0gdGhpcy5icmVha0FmdGVyO1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBlbmQ7XG4gICAgICAgIGxldCB7IGksIG9mZiB9ID0gdGhpcy5jaGlsZFBvcyhhdCk7XG4gICAgICAgIGlmIChvZmYpIHtcbiAgICAgICAgICAgIGVuZC5hcHBlbmQodGhpcy5jaGlsZHJlbltpXS5zcGxpdChvZmYpLCAwKTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0ubWVyZ2Uob2ZmLCB0aGlzLmNoaWxkcmVuW2ldLmxlbmd0aCwgbnVsbCwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIGVuZC5hcHBlbmQodGhpcy5jaGlsZHJlbltqXSwgMCk7XG4gICAgICAgIHdoaWxlIChpID4gMCAmJiB0aGlzLmNoaWxkcmVuW2kgLSAxXS5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5bLS1pXS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gaTtcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBhdDtcbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG4gICAgdHJhbnNmZXJET00ob3RoZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvbSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgb3RoZXIuc2V0RE9NKHRoaXMuZG9tKTtcbiAgICAgICAgb3RoZXIucHJldkF0dHJzID0gdGhpcy5wcmV2QXR0cnMgPT09IHVuZGVmaW5lZCA/IHRoaXMuYXR0cnMgOiB0aGlzLnByZXZBdHRycztcbiAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZG9tID0gbnVsbDtcbiAgICB9XG4gICAgc2V0RGVjbyhhdHRycykge1xuICAgICAgICBpZiAoIWF0dHJzRXEodGhpcy5hdHRycywgYXR0cnMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZBdHRycyA9IHRoaXMuYXR0cnM7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmQoY2hpbGQsIG9wZW5TdGFydCkge1xuICAgICAgICBqb2luSW5saW5lSW50byh0aGlzLCBjaGlsZCwgb3BlblN0YXJ0KTtcbiAgICB9XG4gICAgLy8gT25seSBjYWxsZWQgd2hlbiBidWlsZGluZyBhIGxpbmUgdmlldyBpbiBDb250ZW50QnVpbGRlclxuICAgIGFkZExpbmVEZWNvKGRlY28pIHtcbiAgICAgICAgbGV0IGF0dHJzID0gZGVjby5zcGVjLmF0dHJpYnV0ZXMsIGNscyA9IGRlY28uc3BlYy5jbGFzcztcbiAgICAgICAgaWYgKGF0dHJzKVxuICAgICAgICAgICAgdGhpcy5hdHRycyA9IGNvbWJpbmVBdHRycyhhdHRycywgdGhpcy5hdHRycyB8fCB7fSk7XG4gICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICB0aGlzLmF0dHJzID0gY29tYmluZUF0dHJzKHsgY2xhc3M6IGNscyB9LCB0aGlzLmF0dHJzIHx8IHt9KTtcbiAgICB9XG4gICAgZG9tQXRQb3MocG9zKSB7XG4gICAgICAgIHJldHVybiBpbmxpbmVET01BdFBvcyh0aGlzLCBwb3MpO1xuICAgIH1cbiAgICByZXVzZURPTShub2RlKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IFwiRElWXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RE9NKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSA0IC8qIFZpZXdGbGFnLkF0dHJzRGlydHkgKi8gfCAyIC8qIFZpZXdGbGFnLk5vZGVEaXJ0eSAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jKHZpZXcsIHRyYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLmRvbSkge1xuICAgICAgICAgICAgdGhpcy5zZXRET00oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWxpbmVcIjtcbiAgICAgICAgICAgIHRoaXMucHJldkF0dHJzID0gdGhpcy5hdHRycyA/IG51bGwgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5mbGFncyAmIDQgLyogVmlld0ZsYWcuQXR0cnNEaXJ0eSAqLykge1xuICAgICAgICAgICAgY2xlYXJBdHRyaWJ1dGVzKHRoaXMuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tbGluZVwiO1xuICAgICAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB0aGlzLmF0dHJzID8gbnVsbCA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmV2QXR0cnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXBkYXRlQXR0cnModGhpcy5kb20sIHRoaXMucHJldkF0dHJzLCB0aGlzLmF0dHJzKTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS1saW5lXCIpO1xuICAgICAgICAgICAgdGhpcy5wcmV2QXR0cnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIuc3luYyh2aWV3LCB0cmFjayk7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5kb20ubGFzdENoaWxkO1xuICAgICAgICB3aGlsZSAobGFzdCAmJiBDb250ZW50Vmlldy5nZXQobGFzdCkgaW5zdGFuY2VvZiBNYXJrVmlldylcbiAgICAgICAgICAgIGxhc3QgPSBsYXN0Lmxhc3RDaGlsZDtcbiAgICAgICAgaWYgKCFsYXN0IHx8ICF0aGlzLmxlbmd0aCB8fFxuICAgICAgICAgICAgbGFzdC5ub2RlTmFtZSAhPSBcIkJSXCIgJiYgKChfYSA9IENvbnRlbnRWaWV3LmdldChsYXN0KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzRWRpdGFibGUpID09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgKCFicm93c2VyLmlvcyB8fCAhdGhpcy5jaGlsZHJlbi5zb21lKGNoID0+IGNoIGluc3RhbmNlb2YgVGV4dFZpZXcpKSkge1xuICAgICAgICAgICAgbGV0IGhhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQlJcIik7XG4gICAgICAgICAgICBoYWNrLmNtSWdub3JlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGhhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1lYXN1cmVUZXh0U2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09IDAgfHwgdGhpcy5sZW5ndGggPiAyMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgdG90YWxXaWR0aCA9IDAsIHRleHRIZWlnaHQ7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghKGNoaWxkIGluc3RhbmNlb2YgVGV4dFZpZXcpIHx8IC9bXiAtfl0vLnRlc3QoY2hpbGQudGV4dCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgcmVjdHMgPSBjbGllbnRSZWN0c0ZvcihjaGlsZC5kb20pO1xuICAgICAgICAgICAgaWYgKHJlY3RzLmxlbmd0aCAhPSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgdG90YWxXaWR0aCArPSByZWN0c1swXS53aWR0aDtcbiAgICAgICAgICAgIHRleHRIZWlnaHQgPSByZWN0c1swXS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICF0b3RhbFdpZHRoID8gbnVsbCA6IHtcbiAgICAgICAgICAgIGxpbmVIZWlnaHQ6IHRoaXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcbiAgICAgICAgICAgIGNoYXJXaWR0aDogdG90YWxXaWR0aCAvIHRoaXMubGVuZ3RoLFxuICAgICAgICAgICAgdGV4dEhlaWdodFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb29yZHNBdChwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IHJlY3QgPSBjb29yZHNJbkNoaWxkcmVuKHRoaXMsIHBvcywgc2lkZSk7XG4gICAgICAgIC8vIENvcnJlY3QgcmVjdGFuZ2xlIGhlaWdodCBmb3IgZW1wdHkgbGluZXMgd2hlbiB0aGUgcmV0dXJuZWRcbiAgICAgICAgLy8gaGVpZ2h0IGlzIGxhcmdlciB0aGFuIHRoZSB0ZXh0IGhlaWdodC5cbiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuLmxlbmd0aCAmJiByZWN0ICYmIHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICBsZXQgeyBoZWlnaHRPcmFjbGUgfSA9IHRoaXMucGFyZW50LnZpZXcudmlld1N0YXRlLCBoZWlnaHQgPSByZWN0LmJvdHRvbSAtIHJlY3QudG9wO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGhlaWdodCAtIGhlaWdodE9yYWNsZS5saW5lSGVpZ2h0KSA8IDIgJiYgaGVpZ2h0T3JhY2xlLnRleHRIZWlnaHQgPCBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlzdCA9IChoZWlnaHQgLSBoZWlnaHRPcmFjbGUudGV4dEhlaWdodCkgLyAyO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHRvcDogcmVjdC50b3AgKyBkaXN0LCBib3R0b206IHJlY3QuYm90dG9tIC0gZGlzdCwgbGVmdDogcmVjdC5sZWZ0LCByaWdodDogcmVjdC5sZWZ0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIGJlY29tZShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBMaW5lVmlldyAmJiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PSAwICYmIG90aGVyLmNoaWxkcmVuLmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgICBhdHRyc0VxKHRoaXMuYXR0cnMsIG90aGVyLmF0dHJzKSAmJiB0aGlzLmJyZWFrQWZ0ZXIgPT0gb3RoZXIuYnJlYWtBZnRlcjtcbiAgICB9XG4gICAgY292ZXJzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHN0YXRpYyBmaW5kKGRvY1ZpZXcsIHBvcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgb2ZmID0gMDsgaSA8IGRvY1ZpZXcuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBibG9jayA9IGRvY1ZpZXcuY2hpbGRyZW5baV0sIGVuZCA9IG9mZiArIGJsb2NrLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPj0gcG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgTGluZVZpZXcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBibG9jaztcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZiA9IGVuZCArIGJsb2NrLmJyZWFrQWZ0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuY2xhc3MgQmxvY2tXaWRnZXRWaWV3IGV4dGVuZHMgQ29udGVudFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHdpZGdldCwgbGVuZ3RoLCBkZWNvKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5kZWNvID0gZGVjbztcbiAgICAgICAgdGhpcy5icmVha0FmdGVyID0gMDtcbiAgICAgICAgdGhpcy5wcmV2V2lkZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgbWVyZ2UoZnJvbSwgdG8sIHNvdXJjZSwgX3Rha2VEZWNvLCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICAgICAgaWYgKHNvdXJjZSAmJiAoIShzb3VyY2UgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcpIHx8ICF0aGlzLndpZGdldC5jb21wYXJlKHNvdXJjZS53aWRnZXQpIHx8XG4gICAgICAgICAgICBmcm9tID4gMCAmJiBvcGVuU3RhcnQgPD0gMCB8fCB0byA8IHRoaXMubGVuZ3RoICYmIG9wZW5FbmQgPD0gMCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gZnJvbSArIChzb3VyY2UgPyBzb3VyY2UubGVuZ3RoIDogMCkgKyAodGhpcy5sZW5ndGggLSB0byk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgcmV0dXJuIHBvcyA9PSAwID8gRE9NUG9zLmJlZm9yZSh0aGlzLmRvbSkgOiBET01Qb3MuYWZ0ZXIodGhpcy5kb20sIHBvcyA9PSB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIHNwbGl0KGF0KSB7XG4gICAgICAgIGxldCBsZW4gPSB0aGlzLmxlbmd0aCAtIGF0O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGF0O1xuICAgICAgICBsZXQgZW5kID0gbmV3IEJsb2NrV2lkZ2V0Vmlldyh0aGlzLndpZGdldCwgbGVuLCB0aGlzLmRlY28pO1xuICAgICAgICBlbmQuYnJlYWtBZnRlciA9IHRoaXMuYnJlYWtBZnRlcjtcbiAgICAgICAgcmV0dXJuIGVuZDtcbiAgICB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbm9DaGlsZHJlbjsgfVxuICAgIHN5bmModmlldykge1xuICAgICAgICBpZiAoIXRoaXMuZG9tIHx8ICF0aGlzLndpZGdldC51cGRhdGVET00odGhpcy5kb20sIHZpZXcpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20gJiYgdGhpcy5wcmV2V2lkZ2V0KVxuICAgICAgICAgICAgICAgIHRoaXMucHJldldpZGdldC5kZXN0cm95KHRoaXMuZG9tKTtcbiAgICAgICAgICAgIHRoaXMucHJldldpZGdldCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNldERPTSh0aGlzLndpZGdldC50b0RPTSh2aWV3KSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMud2lkZ2V0LmVkaXRhYmxlKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgb3ZlcnJpZGVET01UZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC52aWV3LnN0YXRlLmRvYy5zbGljZSh0aGlzLnBvc0F0U3RhcnQsIHRoaXMucG9zQXRFbmQpIDogVGV4dC5lbXB0eTtcbiAgICB9XG4gICAgZG9tQm91bmRzQXJvdW5kKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIGJlY29tZShvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcgJiZcbiAgICAgICAgICAgIG90aGVyLndpZGdldC5jb25zdHJ1Y3RvciA9PSB0aGlzLndpZGdldC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgaWYgKCFvdGhlci53aWRnZXQuY29tcGFyZSh0aGlzLndpZGdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrRGlydHkodHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20gJiYgIXRoaXMucHJldldpZGdldClcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZXaWRnZXQgPSB0aGlzLndpZGdldDtcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0ID0gb3RoZXIud2lkZ2V0O1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBvdGhlci5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmRlY28gPSBvdGhlci5kZWNvO1xuICAgICAgICAgICAgdGhpcy5icmVha0FmdGVyID0gb3RoZXIuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWdub3JlTXV0YXRpb24oKSB7IHJldHVybiB0cnVlOyB9XG4gICAgaWdub3JlRXZlbnQoZXZlbnQpIHsgcmV0dXJuIHRoaXMud2lkZ2V0Lmlnbm9yZUV2ZW50KGV2ZW50KTsgfVxuICAgIGdldCBpc0VkaXRhYmxlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBnZXQgaXNXaWRnZXQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBjdXN0b20gPSB0aGlzLndpZGdldC5jb29yZHNBdCh0aGlzLmRvbSwgcG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKGN1c3RvbSlcbiAgICAgICAgICAgIHJldHVybiBjdXN0b207XG4gICAgICAgIGlmICh0aGlzLndpZGdldCBpbnN0YW5jZW9mIEJsb2NrR2FwV2lkZ2V0KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBmbGF0dGVuUmVjdCh0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdGhpcy5sZW5ndGggPyBwb3MgPT0gMCA6IHNpZGUgPD0gMCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuZG9tKVxuICAgICAgICAgICAgdGhpcy53aWRnZXQuZGVzdHJveSh0aGlzLmRvbSk7XG4gICAgfVxuICAgIGNvdmVycyhzaWRlKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0U2lkZSwgZW5kU2lkZSB9ID0gdGhpcy5kZWNvO1xuICAgICAgICByZXR1cm4gc3RhcnRTaWRlID09IGVuZFNpZGUgPyBmYWxzZSA6IHNpZGUgPCAwID8gc3RhcnRTaWRlIDwgMCA6IGVuZFNpZGUgPiAwO1xuICAgIH1cbn1cbmNsYXNzIEJsb2NrR2FwV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3IoaGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICB0b0RPTSgpIHtcbiAgICAgICAgbGV0IGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVsdC5jbGFzc05hbWUgPSBcImNtLWdhcFwiO1xuICAgICAgICB0aGlzLnVwZGF0ZURPTShlbHQpO1xuICAgICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuaGVpZ2h0ID09IHRoaXMuaGVpZ2h0OyB9XG4gICAgdXBkYXRlRE9NKGVsdCkge1xuICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgZWRpdGFibGUoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGVzdGltYXRlZEhlaWdodCgpIHsgcmV0dXJuIHRoaXMuaGVpZ2h0OyB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuXG5jbGFzcyBDb250ZW50QnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IoZG9jLCBwb3MsIGVuZCwgZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3IpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5kaXNhbGxvd0Jsb2NrRWZmZWN0c0ZvciA9IGRpc2FsbG93QmxvY2tFZmZlY3RzRm9yO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJMaW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5icmVha0F0U3RhcnQgPSAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdCdWZmZXIgPSAwIC8qIEJ1Zi5ObyAqLztcbiAgICAgICAgdGhpcy5idWZmZXJNYXJrcyA9IFtdO1xuICAgICAgICAvLyBTZXQgdG8gZmFsc2UgZGlyZWN0bHkgYWZ0ZXIgYSB3aWRnZXQgdGhhdCBjb3ZlcnMgdGhlIHBvc2l0aW9uIGFmdGVyIGl0XG4gICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSB0cnVlO1xuICAgICAgICB0aGlzLm9wZW5TdGFydCA9IC0xO1xuICAgICAgICB0aGlzLm9wZW5FbmQgPSAtMTtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy50ZXh0T2ZmID0gMDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBkb2MuaXRlcigpO1xuICAgICAgICB0aGlzLnNraXAgPSBwb3M7XG4gICAgfVxuICAgIHBvc0NvdmVyZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuYnJlYWtBdFN0YXJ0ICYmIHRoaXMuZG9jLmxpbmVBdCh0aGlzLnBvcykuZnJvbSAhPSB0aGlzLnBvcztcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gIShsYXN0LmJyZWFrQWZ0ZXIgfHwgbGFzdCBpbnN0YW5jZW9mIEJsb2NrV2lkZ2V0VmlldyAmJiBsYXN0LmRlY28uZW5kU2lkZSA8IDApO1xuICAgIH1cbiAgICBnZXRMaW5lKCkge1xuICAgICAgICBpZiAoIXRoaXMuY3VyTGluZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LnB1c2godGhpcy5jdXJMaW5lID0gbmV3IExpbmVWaWV3KTtcbiAgICAgICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmN1ckxpbmU7XG4gICAgfVxuICAgIGZsdXNoQnVmZmVyKGFjdGl2ZSA9IHRoaXMuYnVmZmVyTWFya3MpIHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0J1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5jdXJMaW5lLmFwcGVuZCh3cmFwTWFya3MobmV3IFdpZGdldEJ1ZmZlclZpZXcoLTEpLCBhY3RpdmUpLCBhY3RpdmUubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0J1ZmZlciA9IDAgLyogQnVmLk5vICovO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEJsb2NrV2lkZ2V0KHZpZXcpIHtcbiAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICB0aGlzLmN1ckxpbmUgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbnRlbnQucHVzaCh2aWV3KTtcbiAgICB9XG4gICAgZmluaXNoKG9wZW5FbmQpIHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0J1ZmZlciAmJiBvcGVuRW5kIDw9IHRoaXMuYnVmZmVyTWFya3MubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdCdWZmZXIgPSAwIC8qIEJ1Zi5ObyAqLztcbiAgICAgICAgaWYgKCF0aGlzLnBvc0NvdmVyZWQoKSAmJlxuICAgICAgICAgICAgIShvcGVuRW5kICYmIHRoaXMuY29udGVudC5sZW5ndGggJiYgdGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGggLSAxXSBpbnN0YW5jZW9mIEJsb2NrV2lkZ2V0VmlldykpXG4gICAgICAgICAgICB0aGlzLmdldExpbmUoKTtcbiAgICB9XG4gICAgYnVpbGRUZXh0KGxlbmd0aCwgYWN0aXZlLCBvcGVuU3RhcnQpIHtcbiAgICAgICAgd2hpbGUgKGxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHRPZmYgPT0gdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCB7IHZhbHVlLCBsaW5lQnJlYWssIGRvbmUgfSA9IHRoaXMuY3Vyc29yLm5leHQodGhpcy5za2lwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNraXAgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSYW4gb3V0IG9mIHRleHQgY29udGVudCB3aGVuIGRyYXdpbmcgaW5saW5lIHZpZXdzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lQnJlYWspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBvc0NvdmVyZWQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMV0uYnJlYWtBZnRlciA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJlYWtBdFN0YXJ0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0Q3Vyc29yUG9zID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dE9mZiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRha2UgPSBNYXRoLm1pbih0aGlzLnRleHQubGVuZ3RoIC0gdGhpcy50ZXh0T2ZmLCBsZW5ndGgsIDUxMiAvKiBULkNodW5rICovKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoYWN0aXZlLnNsaWNlKGFjdGl2ZS5sZW5ndGggLSBvcGVuU3RhcnQpKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpLmFwcGVuZCh3cmFwTWFya3MobmV3IFRleHRWaWV3KHRoaXMudGV4dC5zbGljZSh0aGlzLnRleHRPZmYsIHRoaXMudGV4dE9mZiArIHRha2UpKSwgYWN0aXZlKSwgb3BlblN0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMuYXRDdXJzb3JQb3MgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50ZXh0T2ZmICs9IHRha2U7XG4gICAgICAgICAgICBsZW5ndGggLT0gdGFrZTtcbiAgICAgICAgICAgIG9wZW5TdGFydCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Bhbihmcm9tLCB0bywgYWN0aXZlLCBvcGVuU3RhcnQpIHtcbiAgICAgICAgdGhpcy5idWlsZFRleHQodG8gLSBmcm9tLCBhY3RpdmUsIG9wZW5TdGFydCk7XG4gICAgICAgIHRoaXMucG9zID0gdG87XG4gICAgICAgIGlmICh0aGlzLm9wZW5TdGFydCA8IDApXG4gICAgICAgICAgICB0aGlzLm9wZW5TdGFydCA9IG9wZW5TdGFydDtcbiAgICB9XG4gICAgcG9pbnQoZnJvbSwgdG8sIGRlY28sIGFjdGl2ZSwgb3BlblN0YXJ0LCBpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhbGxvd0Jsb2NrRWZmZWN0c0ZvcltpbmRleF0gJiYgZGVjbyBpbnN0YW5jZW9mIFBvaW50RGVjb3JhdGlvbikge1xuICAgICAgICAgICAgaWYgKGRlY28uYmxvY2spXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCbG9jayBkZWNvcmF0aW9ucyBtYXkgbm90IGJlIHNwZWNpZmllZCB2aWEgcGx1Z2luc1wiKTtcbiAgICAgICAgICAgIGlmICh0byA+IHRoaXMuZG9jLmxpbmVBdCh0aGlzLnBvcykudG8pXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEZWNvcmF0aW9ucyB0aGF0IHJlcGxhY2UgbGluZSBicmVha3MgbWF5IG5vdCBiZSBzcGVjaWZpZWQgdmlhIHBsdWdpbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxlbiA9IHRvIC0gZnJvbTtcbiAgICAgICAgaWYgKGRlY28gaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChkZWNvLmJsb2NrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlY28uc3RhcnRTaWRlID4gMCAmJiAhdGhpcy5wb3NDb3ZlcmVkKCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGluZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQmxvY2tXaWRnZXQobmV3IEJsb2NrV2lkZ2V0VmlldyhkZWNvLndpZGdldCB8fCBOdWxsV2lkZ2V0LmJsb2NrLCBsZW4sIGRlY28pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB2aWV3ID0gV2lkZ2V0Vmlldy5jcmVhdGUoZGVjby53aWRnZXQgfHwgTnVsbFdpZGdldC5pbmxpbmUsIGxlbiwgbGVuID8gMCA6IGRlY28uc3RhcnRTaWRlKTtcbiAgICAgICAgICAgICAgICBsZXQgY3Vyc29yQmVmb3JlID0gdGhpcy5hdEN1cnNvclBvcyAmJiAhdmlldy5pc0VkaXRhYmxlICYmIG9wZW5TdGFydCA8PSBhY3RpdmUubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgIChmcm9tIDwgdG8gfHwgZGVjby5zdGFydFNpZGUgPiAwKTtcbiAgICAgICAgICAgICAgICBsZXQgY3Vyc29yQWZ0ZXIgPSAhdmlldy5pc0VkaXRhYmxlICYmIChmcm9tIDwgdG8gfHwgb3BlblN0YXJ0ID4gYWN0aXZlLmxlbmd0aCB8fCBkZWNvLnN0YXJ0U2lkZSA8PSAwKTtcbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IHRoaXMuZ2V0TGluZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdCdWZmZXIgPT0gMiAvKiBCdWYuSWZDdXJzb3IgKi8gJiYgIWN1cnNvckJlZm9yZSAmJiAhdmlldy5pc0VkaXRhYmxlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdCdWZmZXIgPSAwIC8qIEJ1Zi5ObyAqLztcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyKGFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvckJlZm9yZSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lLmFwcGVuZCh3cmFwTWFya3MobmV3IFdpZGdldEJ1ZmZlclZpZXcoMSksIGFjdGl2ZSksIG9wZW5TdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5TdGFydCA9IGFjdGl2ZS5sZW5ndGggKyBNYXRoLm1heCgwLCBvcGVuU3RhcnQgLSBhY3RpdmUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGluZS5hcHBlbmQod3JhcE1hcmtzKHZpZXcsIGFjdGl2ZSksIG9wZW5TdGFydCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hdEN1cnNvclBvcyA9IGN1cnNvckFmdGVyO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0J1ZmZlciA9ICFjdXJzb3JBZnRlciA/IDAgLyogQnVmLk5vICovIDogZnJvbSA8IHRvIHx8IG9wZW5TdGFydCA+IGFjdGl2ZS5sZW5ndGggPyAxIC8qIEJ1Zi5ZZXMgKi8gOiAyIC8qIEJ1Zi5JZkN1cnNvciAqLztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nQnVmZmVyKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlck1hcmtzID0gYWN0aXZlLnNsaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb2MubGluZUF0KHRoaXMucG9zKS5mcm9tID09IHRoaXMucG9zKSB7IC8vIExpbmUgZGVjb3JhdGlvblxuICAgICAgICAgICAgdGhpcy5nZXRMaW5lKCkuYWRkTGluZURlY28oZGVjbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgaXRlcmF0b3IgcGFzdCB0aGUgcmVwbGFjZWQgY29udGVudFxuICAgICAgICAgICAgaWYgKHRoaXMudGV4dE9mZiArIGxlbiA8PSB0aGlzLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0T2ZmICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcCArPSBsZW4gLSAodGhpcy50ZXh0Lmxlbmd0aCAtIHRoaXMudGV4dE9mZik7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRPZmYgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb3MgPSB0bztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGVuU3RhcnQgPCAwKVxuICAgICAgICAgICAgdGhpcy5vcGVuU3RhcnQgPSBvcGVuU3RhcnQ7XG4gICAgfVxuICAgIHN0YXRpYyBidWlsZCh0ZXh0LCBmcm9tLCB0bywgZGVjb3JhdGlvbnMsIGR5bmFtaWNEZWNvcmF0aW9uTWFwKSB7XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IENvbnRlbnRCdWlsZGVyKHRleHQsIGZyb20sIHRvLCBkeW5hbWljRGVjb3JhdGlvbk1hcCk7XG4gICAgICAgIGJ1aWxkZXIub3BlbkVuZCA9IFJhbmdlU2V0LnNwYW5zKGRlY29yYXRpb25zLCBmcm9tLCB0bywgYnVpbGRlcik7XG4gICAgICAgIGlmIChidWlsZGVyLm9wZW5TdGFydCA8IDApXG4gICAgICAgICAgICBidWlsZGVyLm9wZW5TdGFydCA9IGJ1aWxkZXIub3BlbkVuZDtcbiAgICAgICAgYnVpbGRlci5maW5pc2goYnVpbGRlci5vcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gd3JhcE1hcmtzKHZpZXcsIGFjdGl2ZSkge1xuICAgIGZvciAobGV0IG1hcmsgb2YgYWN0aXZlKVxuICAgICAgICB2aWV3ID0gbmV3IE1hcmtWaWV3KG1hcmssIFt2aWV3XSwgdmlldy5sZW5ndGgpO1xuICAgIHJldHVybiB2aWV3O1xufVxuY2xhc3MgTnVsbFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHRhZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRhZyA9IHRhZztcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLnRhZyA9PSB0aGlzLnRhZzsgfVxuICAgIHRvRE9NKCkgeyByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZyk7IH1cbiAgICB1cGRhdGVET00oZWx0KSB7IHJldHVybiBlbHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSB0aGlzLnRhZzsgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIHRydWU7IH1cbn1cbk51bGxXaWRnZXQuaW5saW5lID0gLypAX19QVVJFX18qL25ldyBOdWxsV2lkZ2V0KFwic3BhblwiKTtcbk51bGxXaWRnZXQuYmxvY2sgPSAvKkBfX1BVUkVfXyovbmV3IE51bGxXaWRnZXQoXCJkaXZcIik7XG5cbi8qKlxuVXNlZCB0byBpbmRpY2F0ZSBbdGV4dCBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLlxuKi9cbnZhciBEaXJlY3Rpb24gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICAvLyAoVGhlc2UgYXJlIGNob3NlbiB0byBtYXRjaCB0aGUgYmFzZSBsZXZlbHMsIGluIGJpZGkgYWxnb3JpdGhtXG4gICAgLy8gdGVybXMsIG9mIHNwYW5zIGluIHRoYXQgZGlyZWN0aW9uLilcbiAgICAvKipcbiAgICBMZWZ0LXRvLXJpZ2h0LlxuICAgICovXG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxUUlwiXSA9IDBdID0gXCJMVFJcIjtcbiAgICAvKipcbiAgICBSaWdodC10by1sZWZ0LlxuICAgICovXG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlJUTFwiXSA9IDFdID0gXCJSVExcIjtcbnJldHVybiBEaXJlY3Rpb259KShEaXJlY3Rpb24gfHwgKERpcmVjdGlvbiA9IHt9KSk7XG5jb25zdCBMVFIgPSBEaXJlY3Rpb24uTFRSLCBSVEwgPSBEaXJlY3Rpb24uUlRMO1xuLy8gRGVjb2RlIGEgc3RyaW5nIHdpdGggZWFjaCB0eXBlIGVuY29kZWQgYXMgbG9nMih0eXBlKVxuZnVuY3Rpb24gZGVjKHN0cikge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKylcbiAgICAgICAgcmVzdWx0LnB1c2goMSA8PCArc3RyW2ldKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDAgdG8gMHhmOFxuY29uc3QgTG93VHlwZXMgPSAvKkBfX1BVUkVfXyovZGVjKFwiODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg2NjY4ODg4ODg3ODc4MzMzMzMzMzMzMzc4ODg4ODgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODc4NjY2Njg4ODgwODg4ODg2NjMzODA4ODgzMDg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDhcIik7XG4vLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZjlcbmNvbnN0IEFyYWJpY1R5cGVzID0gLypAX19QVVJFX18qL2RlYyhcIjQ0NDQ0NDg4MjY2MjcyODg5OTk5OTk5OTk5OTIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjk5OTk5OTk5OTk5OTk5OTk5OTk5OTQ0NDQ0NDQ0NDQ2NDQyMjI4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI5OTk5OTk5NDk5OTk5OTkyMjk5ODk5OTkyMjMzMzMzMzMzMzNcIik7XG5jb25zdCBCcmFja2V0cyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpLCBCcmFja2V0U3RhY2sgPSBbXTtcbi8vIFRoZXJlJ3MgYSBsb3QgbW9yZSBpblxuLy8gaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvUHVibGljL1VDRC9sYXRlc3QvdWNkL0JpZGlCcmFja2V0cy50eHQsXG4vLyB3aGljaCBhcmUgbGVmdCBvdXQgdG8ga2VlcCBjb2RlIHNpemUgZG93bi5cbmZvciAobGV0IHAgb2YgW1wiKClcIiwgXCJbXVwiLCBcInt9XCJdKSB7XG4gICAgbGV0IGwgPSAvKkBfX1BVUkVfXyovcC5jaGFyQ29kZUF0KDApLCByID0gLypAX19QVVJFX18qL3AuY2hhckNvZGVBdCgxKTtcbiAgICBCcmFja2V0c1tsXSA9IHI7XG4gICAgQnJhY2tldHNbcl0gPSAtbDtcbn1cbmZ1bmN0aW9uIGNoYXJUeXBlKGNoKSB7XG4gICAgcmV0dXJuIGNoIDw9IDB4ZjcgPyBMb3dUeXBlc1tjaF0gOlxuICAgICAgICAweDU5MCA8PSBjaCAmJiBjaCA8PSAweDVmNCA/IDIgLyogVC5SICovIDpcbiAgICAgICAgICAgIDB4NjAwIDw9IGNoICYmIGNoIDw9IDB4NmY5ID8gQXJhYmljVHlwZXNbY2ggLSAweDYwMF0gOlxuICAgICAgICAgICAgICAgIDB4NmVlIDw9IGNoICYmIGNoIDw9IDB4OGFjID8gNCAvKiBULkFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgMHgyMDAwIDw9IGNoICYmIGNoIDw9IDB4MjAwYyA/IDI1NiAvKiBULk5JICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIDB4ZmI1MCA8PSBjaCAmJiBjaCA8PSAweGZkZmYgPyA0IC8qIFQuQUwgKi8gOiAxIC8qIFQuTCAqLztcbn1cbmNvbnN0IEJpZGlSRSA9IC9bXFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MDcwMC1cXHUwOGFjXFx1ZmI1MC1cXHVmZGZmXS87XG4vKipcblJlcHJlc2VudHMgYSBjb250aWd1b3VzIHJhbmdlIG9mIHRleHQgdGhhdCBoYXMgYSBzaW5nbGUgZGlyZWN0aW9uXG4oYXMgaW4gbGVmdC10by1yaWdodCBvciByaWdodC10by1sZWZ0KS5cbiovXG5jbGFzcyBCaWRpU3BhbiB7XG4gICAgLyoqXG4gICAgVGhlIGRpcmVjdGlvbiBvZiB0aGlzIHNwYW4uXG4gICAgKi9cbiAgICBnZXQgZGlyKCkgeyByZXR1cm4gdGhpcy5sZXZlbCAlIDIgPyBSVEwgOiBMVFI7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBvZiB0aGUgc3BhbiAocmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lKS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIHNwYW4uXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhlIFtcImJpZGlcbiAgICBsZXZlbFwiXShodHRwczovL3VuaWNvZGUub3JnL3JlcG9ydHMvdHI5LyNCYXNpY19EaXNwbGF5X0FsZ29yaXRobSlcbiAgICBvZiB0aGUgc3BhbiAoaW4gdGhpcyBjb250ZXh0LCAwIG1lYW5zXG4gICAgbGVmdC10by1yaWdodCwgMSBtZWFucyByaWdodC10by1sZWZ0LCAyIG1lYW5zIGxlZnQtdG8tcmlnaHRcbiAgICBudW1iZXIgaW5zaWRlIHJpZ2h0LXRvLWxlZnQgdGV4dCkuXG4gICAgKi9cbiAgICBsZXZlbCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzaWRlKGVuZCwgZGlyKSB7IHJldHVybiAodGhpcy5kaXIgPT0gZGlyKSA9PSBlbmQgPyB0aGlzLnRvIDogdGhpcy5mcm9tOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmb3J3YXJkKGZvcndhcmQsIGRpcikgeyByZXR1cm4gZm9yd2FyZCA9PSAodGhpcy5kaXIgPT0gZGlyKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZpbmQob3JkZXIsIGluZGV4LCBsZXZlbCwgYXNzb2MpIHtcbiAgICAgICAgbGV0IG1heWJlID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzcGFuID0gb3JkZXJbaV07XG4gICAgICAgICAgICBpZiAoc3Bhbi5mcm9tIDw9IGluZGV4ICYmIHNwYW4udG8gPj0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Bhbi5sZXZlbCA9PSBsZXZlbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBtdWx0aXBsZSBzcGFucyBtYXRjaCwgaWYgYXNzb2MgIT0gMCwgdGFrZSB0aGUgb25lIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBjb3ZlcnMgdGhhdCBzaWRlLCBvdGhlcndpc2UgdGFrZSB0aGUgb25lIHdpdGggdGhlIG1pbmltdW1cbiAgICAgICAgICAgICAgICAvLyBsZXZlbC5cbiAgICAgICAgICAgICAgICBpZiAobWF5YmUgPCAwIHx8IChhc3NvYyAhPSAwID8gKGFzc29jIDwgMCA/IHNwYW4uZnJvbSA8IGluZGV4IDogc3Bhbi50byA+IGluZGV4KSA6IG9yZGVyW21heWJlXS5sZXZlbCA+IHNwYW4ubGV2ZWwpKVxuICAgICAgICAgICAgICAgICAgICBtYXliZSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heWJlIDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO1xuICAgICAgICByZXR1cm4gbWF5YmU7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNvbGF0ZXNFcShhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBpQSA9IGFbaV0sIGlCID0gYltpXTtcbiAgICAgICAgaWYgKGlBLmZyb20gIT0gaUIuZnJvbSB8fCBpQS50byAhPSBpQi50byB8fCBpQS5kaXJlY3Rpb24gIT0gaUIuZGlyZWN0aW9uIHx8ICFpc29sYXRlc0VxKGlBLmlubmVyLCBpQi5pbm5lcikpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLy8gUmV1c2VkIGFycmF5IG9mIGNoYXJhY3RlciB0eXBlc1xuY29uc3QgdHlwZXMgPSBbXTtcbi8vIEZpbGwgaW4gdGhlIGNoYXJhY3RlciB0eXBlcyAoaW4gYHR5cGVzYCkgZnJvbSBgZnJvbWAgdG8gYHRvYCBhbmRcbi8vIGFwcGx5IFcgbm9ybWFsaXphdGlvbiBydWxlcy5cbmZ1bmN0aW9uIGNvbXB1dGVDaGFyVHlwZXMobGluZSwgckZyb20sIHJUbywgaXNvbGF0ZXMsIG91dGVyVHlwZSkge1xuICAgIGZvciAobGV0IGlJID0gMDsgaUkgPD0gaXNvbGF0ZXMubGVuZ3RoOyBpSSsrKSB7XG4gICAgICAgIGxldCBmcm9tID0gaUkgPyBpc29sYXRlc1tpSSAtIDFdLnRvIDogckZyb20sIHRvID0gaUkgPCBpc29sYXRlcy5sZW5ndGggPyBpc29sYXRlc1tpSV0uZnJvbSA6IHJUbztcbiAgICAgICAgbGV0IHByZXZUeXBlID0gaUkgPyAyNTYgLyogVC5OSSAqLyA6IG91dGVyVHlwZTtcbiAgICAgICAgLy8gVzEuIEV4YW1pbmUgZWFjaCBub24tc3BhY2luZyBtYXJrIChOU00pIGluIHRoZSBsZXZlbCBydW4sIGFuZFxuICAgICAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0aGUgdHlwZSBvZiB0aGUgcHJldmlvdXNcbiAgICAgICAgLy8gY2hhcmFjdGVyLiBJZiB0aGUgTlNNIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGV2ZWwgcnVuLCBpdCB3aWxsXG4gICAgICAgIC8vIGdldCB0aGUgdHlwZSBvZiBzb3IuXG4gICAgICAgIC8vIFcyLiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIEFMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhblxuICAgICAgICAvLyBBTCBpcyBmb3VuZCwgY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gQXJhYmljXG4gICAgICAgIC8vIG51bWJlci5cbiAgICAgICAgLy8gVzMuIENoYW5nZSBhbGwgQUxzIHRvIFIuXG4gICAgICAgIC8vIChMZWZ0IGFmdGVyIHRoaXM6IEwsIFIsIEVOLCBBTiwgRVQsIENTLCBOSSlcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb20sIHByZXYgPSBwcmV2VHlwZSwgcHJldlN0cm9uZyA9IHByZXZUeXBlOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgbGV0IHR5cGUgPSBjaGFyVHlwZShsaW5lLmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gNTEyIC8qIFQuTlNNICovKVxuICAgICAgICAgICAgICAgIHR5cGUgPSBwcmV2O1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSA4IC8qIFQuRU4gKi8gJiYgcHJldlN0cm9uZyA9PSA0IC8qIFQuQUwgKi8pXG4gICAgICAgICAgICAgICAgdHlwZSA9IDE2IC8qIFQuQU4gKi87XG4gICAgICAgICAgICB0eXBlc1tpXSA9IHR5cGUgPT0gNCAvKiBULkFMICovID8gMiAvKiBULlIgKi8gOiB0eXBlO1xuICAgICAgICAgICAgaWYgKHR5cGUgJiA3IC8qIFQuU3Ryb25nICovKVxuICAgICAgICAgICAgICAgIHByZXZTdHJvbmcgPSB0eXBlO1xuICAgICAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVzUuIEEgc2VxdWVuY2Ugb2YgRXVyb3BlYW4gdGVybWluYXRvcnMgYWRqYWNlbnQgdG8gRXVyb3BlYW5cbiAgICAgICAgLy8gbnVtYmVycyBjaGFuZ2VzIHRvIGFsbCBFdXJvcGVhbiBudW1iZXJzLlxuICAgICAgICAvLyBXNi4gT3RoZXJ3aXNlLCBzZXBhcmF0b3JzIGFuZCB0ZXJtaW5hdG9ycyBjaGFuZ2UgdG8gT3RoZXJcbiAgICAgICAgLy8gTmV1dHJhbC5cbiAgICAgICAgLy8gVzcuIFNlYXJjaCBiYWNrd2FyZHMgZnJvbSBlYWNoIGluc3RhbmNlIG9mIGEgRXVyb3BlYW4gbnVtYmVyXG4gICAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW4gTCBpc1xuICAgICAgICAvLyBmb3VuZCwgdGhlbiBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBMLlxuICAgICAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTitBTiwgTkkpXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tLCBwcmV2ID0gcHJldlR5cGUsIHByZXZTdHJvbmcgPSBwcmV2VHlwZTsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgICAgICBpZiAodHlwZSA9PSAxMjggLyogVC5DUyAqLykge1xuICAgICAgICAgICAgICAgIGlmIChpIDwgdG8gLSAxICYmIHByZXYgPT0gdHlwZXNbaSArIDFdICYmIChwcmV2ICYgMjQgLyogVC5OdW0gKi8pKVxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gdHlwZXNbaV0gPSBwcmV2O1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdHlwZXNbaV0gPSAyNTYgLyogVC5OSSAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gNjQgLyogVC5FVCAqLykge1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBpICsgMTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZW5kIDwgdG8gJiYgdHlwZXNbZW5kXSA9PSA2NCAvKiBULkVUICovKVxuICAgICAgICAgICAgICAgICAgICBlbmQrKztcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZSA9IChpICYmIHByZXYgPT0gOCAvKiBULkVOICovKSB8fCAoZW5kIDwgclRvICYmIHR5cGVzW2VuZF0gPT0gOCAvKiBULkVOICovKSA/IChwcmV2U3Ryb25nID09IDEgLyogVC5MICovID8gMSAvKiBULkwgKi8gOiA4IC8qIFQuRU4gKi8pIDogMjU2IC8qIFQuTkkgKi87XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPCBlbmQ7IGorKylcbiAgICAgICAgICAgICAgICAgICAgdHlwZXNbal0gPSByZXBsYWNlO1xuICAgICAgICAgICAgICAgIGkgPSBlbmQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSA4IC8qIFQuRU4gKi8gJiYgcHJldlN0cm9uZyA9PSAxIC8qIFQuTCAqLykge1xuICAgICAgICAgICAgICAgIHR5cGVzW2ldID0gMSAvKiBULkwgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2ID0gdHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlICYgNyAvKiBULlN0cm9uZyAqLylcbiAgICAgICAgICAgICAgICBwcmV2U3Ryb25nID0gdHlwZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIFByb2Nlc3MgYnJhY2tldHMgdGhyb3VnaG91dCBhIHJ1biBzZXF1ZW5jZS5cbmZ1bmN0aW9uIHByb2Nlc3NCcmFja2V0UGFpcnMobGluZSwgckZyb20sIHJUbywgaXNvbGF0ZXMsIG91dGVyVHlwZSkge1xuICAgIGxldCBvcHBvc2l0ZVR5cGUgPSBvdXRlclR5cGUgPT0gMSAvKiBULkwgKi8gPyAyIC8qIFQuUiAqLyA6IDEgLyogVC5MICovO1xuICAgIGZvciAobGV0IGlJID0gMCwgc0kgPSAwLCBjb250ZXh0ID0gMDsgaUkgPD0gaXNvbGF0ZXMubGVuZ3RoOyBpSSsrKSB7XG4gICAgICAgIGxldCBmcm9tID0gaUkgPyBpc29sYXRlc1tpSSAtIDFdLnRvIDogckZyb20sIHRvID0gaUkgPCBpc29sYXRlcy5sZW5ndGggPyBpc29sYXRlc1tpSV0uZnJvbSA6IHJUbztcbiAgICAgICAgLy8gTjAuIFByb2Nlc3MgYnJhY2tldCBwYWlycyBpbiBhbiBpc29sYXRpbmcgcnVuIHNlcXVlbmNlXG4gICAgICAgIC8vIHNlcXVlbnRpYWxseSBpbiB0aGUgbG9naWNhbCBvcmRlciBvZiB0aGUgdGV4dCBwb3NpdGlvbnMgb2YgdGhlXG4gICAgICAgIC8vIG9wZW5pbmcgcGFpcmVkIGJyYWNrZXRzIHVzaW5nIHRoZSBsb2dpYyBnaXZlbiBiZWxvdy4gV2l0aGluIHRoaXNcbiAgICAgICAgLy8gc2NvcGUsIGJpZGlyZWN0aW9uYWwgdHlwZXMgRU4gYW5kIEFOIGFyZSB0cmVhdGVkIGFzIFIuXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tLCBjaCwgYnIsIHR5cGU7IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICAvLyBLZWVwcyBbc3RhcnRJbmRleCwgdHlwZSwgc3Ryb25nU2Vlbl0gdHJpcGxlcyBmb3IgZWFjaCBvcGVuXG4gICAgICAgICAgICAvLyBicmFja2V0IG9uIEJyYWNrZXRTdGFjay5cbiAgICAgICAgICAgIGlmIChiciA9IEJyYWNrZXRzW2NoID0gbGluZS5jaGFyQ29kZUF0KGkpXSkge1xuICAgICAgICAgICAgICAgIGlmIChiciA8IDApIHsgLy8gQ2xvc2luZyBicmFja2V0XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNKID0gc0kgLSAzOyBzSiA+PSAwOyBzSiAtPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnJhY2tldFN0YWNrW3NKICsgMV0gPT0gLWJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsYWdzID0gQnJhY2tldFN0YWNrW3NKICsgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGUgPSAoZmxhZ3MgJiAyIC8qIEJyYWNrZXRlZC5FbWJlZEluc2lkZSAqLykgPyBvdXRlclR5cGUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKGZsYWdzICYgNCAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVJbnNpZGUgKi8pID8gMCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmxhZ3MgJiAxIC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUJlZm9yZSAqLykgPyBvcHBvc2l0ZVR5cGUgOiBvdXRlclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldID0gdHlwZXNbQnJhY2tldFN0YWNrW3NKXV0gPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNJID0gc0o7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoQnJhY2tldFN0YWNrLmxlbmd0aCA9PSAxODkgLyogQnJhY2tldGVkLk1heERlcHRoICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQnJhY2tldFN0YWNrW3NJKytdID0gaTtcbiAgICAgICAgICAgICAgICAgICAgQnJhY2tldFN0YWNrW3NJKytdID0gY2g7XG4gICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHR5cGUgPSB0eXBlc1tpXSkgPT0gMiAvKiBULlIgKi8gfHwgdHlwZSA9PSAxIC8qIFQuTCAqLykge1xuICAgICAgICAgICAgICAgIGxldCBlbWJlZCA9IHR5cGUgPT0gb3V0ZXJUeXBlO1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBlbWJlZCA/IDAgOiAxIC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUJlZm9yZSAqLztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzSiA9IHNJIC0gMzsgc0ogPj0gMDsgc0ogLT0gMykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyID0gQnJhY2tldFN0YWNrW3NKICsgMl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXIgJiAyIC8qIEJyYWNrZXRlZC5FbWJlZEluc2lkZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW1iZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSiArIDJdIHw9IDIgLyogQnJhY2tldGVkLkVtYmVkSW5zaWRlICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ciAmIDQgLyogQnJhY2tldGVkLk9wcG9zaXRlSW5zaWRlICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgQnJhY2tldFN0YWNrW3NKICsgMl0gfD0gNCAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVJbnNpZGUgKi87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBwcm9jZXNzTmV1dHJhbHMockZyb20sIHJUbywgaXNvbGF0ZXMsIG91dGVyVHlwZSkge1xuICAgIGZvciAobGV0IGlJID0gMCwgcHJldiA9IG91dGVyVHlwZTsgaUkgPD0gaXNvbGF0ZXMubGVuZ3RoOyBpSSsrKSB7XG4gICAgICAgIGxldCBmcm9tID0gaUkgPyBpc29sYXRlc1tpSSAtIDFdLnRvIDogckZyb20sIHRvID0gaUkgPCBpc29sYXRlcy5sZW5ndGggPyBpc29sYXRlc1tpSV0uZnJvbSA6IHJUbztcbiAgICAgICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVjdGlvbiBvZiB0aGVcbiAgICAgICAgLy8gc3Vycm91bmRpbmcgc3Ryb25nIHRleHQgaWYgdGhlIHRleHQgb24gYm90aCBzaWRlcyBoYXMgdGhlIHNhbWVcbiAgICAgICAgLy8gZGlyZWN0aW9uLiBFdXJvcGVhbiBhbmQgQXJhYmljIG51bWJlcnMgYWN0IGFzIGlmIHRoZXkgd2VyZSBSIGluXG4gICAgICAgIC8vIHRlcm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChzb3IpXG4gICAgICAgIC8vIGFuZCBlbmQtb2YtbGV2ZWwtcnVuIChlb3IpIGFyZSB1c2VkIGF0IGxldmVsIHJ1biBib3VuZGFyaWVzLlxuICAgICAgICAvLyBOMi4gQW55IHJlbWFpbmluZyBuZXV0cmFscyB0YWtlIHRoZSBlbWJlZGRpbmcgZGlyZWN0aW9uLlxuICAgICAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTitBTilcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzspIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgICAgICBpZiAodHlwZSA9PSAyNTYgLyogVC5OSSAqLykge1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBpICsgMTtcbiAgICAgICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpSSA9PSBpc29sYXRlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBpc29sYXRlc1tpSSsrXS50bztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvID0gaUkgPCBpc29sYXRlcy5sZW5ndGggPyBpc29sYXRlc1tpSV0uZnJvbSA6IHJUbztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlc1tlbmRdID09IDI1NiAvKiBULk5JICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBiZWZvcmVMID0gcHJldiA9PSAxIC8qIFQuTCAqLztcbiAgICAgICAgICAgICAgICBsZXQgYWZ0ZXJMID0gKGVuZCA8IHJUbyA/IHR5cGVzW2VuZF0gOiBvdXRlclR5cGUpID09IDEgLyogVC5MICovO1xuICAgICAgICAgICAgICAgIGxldCByZXBsYWNlID0gYmVmb3JlTCA9PSBhZnRlckwgPyAoYmVmb3JlTCA/IDEgLyogVC5MICovIDogMiAvKiBULlIgKi8pIDogb3V0ZXJUeXBlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBlbmQsIGpJID0gaUksIGZyb21KID0gakkgPyBpc29sYXRlc1tqSSAtIDFdLnRvIDogckZyb207IGogPiBpOykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PSBmcm9tSikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGlzb2xhdGVzWy0takldLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tSiA9IGpJID8gaXNvbGF0ZXNbakkgLSAxXS50byA6IHJGcm9tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHR5cGVzWy0tal0gPSByZXBsYWNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpID0gZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gRmluZCB0aGUgY29udGlndW91cyByYW5nZXMgb2YgY2hhcmFjdGVyIHR5cGVzIGluIGEgZ2l2ZW4gcmFuZ2UsIGFuZFxuLy8gZW1pdCBzcGFucyBmb3IgdGhlbS4gRmxpcCB0aGUgb3JkZXIgb2YgdGhlIHNwYW5zIGFzIGFwcHJvcHJpYXRlXG4vLyBiYXNlZCBvbiB0aGUgbGV2ZWwsIGFuZCBjYWxsIHRocm91Z2ggdG8gY29tcHV0ZSB0aGUgc3BhbnMgZm9yXG4vLyBpc29sYXRlcyBhdCB0aGUgcHJvcGVyIHBvaW50LlxuZnVuY3Rpb24gZW1pdFNwYW5zKGxpbmUsIGZyb20sIHRvLCBsZXZlbCwgYmFzZUxldmVsLCBpc29sYXRlcywgb3JkZXIpIHtcbiAgICBsZXQgb3VyVHlwZSA9IGxldmVsICUgMiA/IDIgLyogVC5SICovIDogMSAvKiBULkwgKi87XG4gICAgaWYgKChsZXZlbCAlIDIpID09IChiYXNlTGV2ZWwgJSAyKSkgeyAvLyBTYW1lIGRpciBhcyBiYXNlIGRpcmVjdGlvbiwgZG9uJ3QgZmxpcFxuICAgICAgICBmb3IgKGxldCBpQ2ggPSBmcm9tLCBpSSA9IDA7IGlDaCA8IHRvOykge1xuICAgICAgICAgICAgLy8gU2NhbiBhIHNlY3Rpb24gb2YgY2hhcmFjdGVycyBpbiBkaXJlY3Rpb24gb3VyVHlwZSwgdW5sZXNzXG4gICAgICAgICAgICAvLyB0aGVyZSdzIGFub3RoZXIgdHlwZSBvZiBjaGFyIHJpZ2h0IGFmdGVyIGlDaCwgaW4gd2hpY2ggY2FzZVxuICAgICAgICAgICAgLy8gd2Ugc2NhbiBhIHNlY3Rpb24gb2Ygb3RoZXIgY2hhcmFjdGVycyAod2hpY2gsIGlmIG91clR5cGUgPT1cbiAgICAgICAgICAgIC8vIFQuTCwgbWF5IGNvbnRhaW4gYm90aCBULlIgYW5kIFQuQU4gY2hhcnMpLlxuICAgICAgICAgICAgbGV0IHNhbWVEaXIgPSB0cnVlLCBpc051bSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlJID09IGlzb2xhdGVzLmxlbmd0aCB8fCBpQ2ggPCBpc29sYXRlc1tpSV0uZnJvbSkge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdHlwZXNbaUNoXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAhPSBvdXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhbWVEaXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaXNOdW0gPSBuZXh0ID09IDE2IC8qIFQuQU4gKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSG9sZHMgYW4gYXJyYXkgb2YgaXNvbGF0ZXMgdG8gcGFzcyB0byBhIHJlY3Vyc2l2ZSBjYWxsIGlmIHdlXG4gICAgICAgICAgICAvLyBtdXN0IHJlY3Vyc2UgKHRvIGRpc3Rpbmd1aXNoIFQuQU4gaW5zaWRlIGFuIFJUTCBzZWN0aW9uIGluXG4gICAgICAgICAgICAvLyBMVFIgdGV4dCksIG51bGwgaWYgd2UgY2FuIGVtaXQgZGlyZWN0bHlcbiAgICAgICAgICAgIGxldCByZWN1cnNlID0gIXNhbWVEaXIgJiYgb3VyVHlwZSA9PSAxIC8qIFQuTCAqLyA/IFtdIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBsb2NhbExldmVsID0gc2FtZURpciA/IGxldmVsIDogbGV2ZWwgKyAxO1xuICAgICAgICAgICAgbGV0IGlTY2FuID0gaUNoO1xuICAgICAgICAgICAgcnVuOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlJIDwgaXNvbGF0ZXMubGVuZ3RoICYmIGlTY2FuID09IGlzb2xhdGVzW2lJXS5mcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc051bSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHJ1bjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzbyA9IGlzb2xhdGVzW2lJXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NhbiBhaGVhZCB0byB2ZXJpZnkgdGhhdCB0aGVyZSBpcyBhbm90aGVyIGNoYXIgaW4gdGhpcyBkaXIgYWZ0ZXIgdGhlIGlzb2xhdGUocylcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzYW1lRGlyKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdXB0byA9IGlzby50bywgakkgPSBpSSArIDE7Oykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cHRvID09IHRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpJIDwgaXNvbGF0ZXMubGVuZ3RoICYmIGlzb2xhdGVzW2pJXS5mcm9tID09IHVwdG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwdG8gPSBpc29sYXRlc1tqSSsrXS50bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlc1t1cHRvXSA9PSBvdXJUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaUkrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2UucHVzaChpc28pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzby5mcm9tID4gaUNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKGlDaCwgaXNvLmZyb20sIGxvY2FsTGV2ZWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXJTd2FwID0gKGlzby5kaXJlY3Rpb24gPT0gTFRSKSAhPSAhKGxvY2FsTGV2ZWwgJSAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVTZWN0aW9uT3JkZXIobGluZSwgZGlyU3dhcCA/IGxldmVsICsgMSA6IGxldmVsLCBiYXNlTGV2ZWwsIGlzby5pbm5lciwgaXNvLmZyb20sIGlzby50bywgb3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaUNoID0gaXNvLnRvO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuID0gaXNvLnRvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpU2NhbiA9PSB0byB8fCAoc2FtZURpciA/IHR5cGVzW2lTY2FuXSAhPSBvdXJUeXBlIDogdHlwZXNbaVNjYW5dID09IG91clR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaVNjYW4rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVjdXJzZSlcbiAgICAgICAgICAgICAgICBlbWl0U3BhbnMobGluZSwgaUNoLCBpU2NhbiwgbGV2ZWwgKyAxLCBiYXNlTGV2ZWwsIHJlY3Vyc2UsIG9yZGVyKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlDaCA8IGlTY2FuKVxuICAgICAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKGlDaCwgaVNjYW4sIGxvY2FsTGV2ZWwpKTtcbiAgICAgICAgICAgIGlDaCA9IGlTY2FuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBJdGVyYXRlIGluIHJldmVyc2UgdG8gZmxpcCB0aGUgc3BhbiBvcmRlci4gU2FtZSBjb2RlIGFnYWluLCBidXRcbiAgICAgICAgLy8gZ29pbmcgZnJvbSB0aGUgYmFjayBvZiB0aGUgc2VjdGlvbiB0byB0aGUgZnJvbnRcbiAgICAgICAgZm9yIChsZXQgaUNoID0gdG8sIGlJID0gaXNvbGF0ZXMubGVuZ3RoOyBpQ2ggPiBmcm9tOykge1xuICAgICAgICAgICAgbGV0IHNhbWVEaXIgPSB0cnVlLCBpc051bSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCFpSSB8fCBpQ2ggPiBpc29sYXRlc1tpSSAtIDFdLnRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB0eXBlc1tpQ2ggLSAxXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAhPSBvdXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhbWVEaXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaXNOdW0gPSBuZXh0ID09IDE2IC8qIFQuQU4gKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlY3Vyc2UgPSAhc2FtZURpciAmJiBvdXJUeXBlID09IDEgLyogVC5MICovID8gW10gOiBudWxsO1xuICAgICAgICAgICAgbGV0IGxvY2FsTGV2ZWwgPSBzYW1lRGlyID8gbGV2ZWwgOiBsZXZlbCArIDE7XG4gICAgICAgICAgICBsZXQgaVNjYW4gPSBpQ2g7XG4gICAgICAgICAgICBydW46IGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAoaUkgJiYgaVNjYW4gPT0gaXNvbGF0ZXNbaUkgLSAxXS50bykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgIGxldCBpc28gPSBpc29sYXRlc1stLWlJXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2NhbiBhaGVhZCB0byB2ZXJpZnkgdGhhdCB0aGVyZSBpcyBhbm90aGVyIGNoYXIgaW4gdGhpcyBkaXIgYWZ0ZXIgdGhlIGlzb2xhdGUocylcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzYW1lRGlyKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdXB0byA9IGlzby5mcm9tLCBqSSA9IGlJOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXB0byA9PSBmcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpJICYmIGlzb2xhdGVzW2pJIC0gMV0udG8gPT0gdXB0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0byA9IGlzb2xhdGVzWy0takldLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZXNbdXB0byAtIDFdID09IG91clR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHJ1bjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzZS5wdXNoKGlzbyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNvLnRvIDwgaUNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKGlzby50bywgaUNoLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyU3dhcCA9IChpc28uZGlyZWN0aW9uID09IExUUikgIT0gIShsb2NhbExldmVsICUgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlU2VjdGlvbk9yZGVyKGxpbmUsIGRpclN3YXAgPyBsZXZlbCArIDEgOiBsZXZlbCwgYmFzZUxldmVsLCBpc28uaW5uZXIsIGlzby5mcm9tLCBpc28udG8sIG9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlDaCA9IGlzby5mcm9tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuID0gaXNvLmZyb207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlTY2FuID09IGZyb20gfHwgKHNhbWVEaXIgPyB0eXBlc1tpU2NhbiAtIDFdICE9IG91clR5cGUgOiB0eXBlc1tpU2NhbiAtIDFdID09IG91clR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaVNjYW4tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVjdXJzZSlcbiAgICAgICAgICAgICAgICBlbWl0U3BhbnMobGluZSwgaVNjYW4sIGlDaCwgbGV2ZWwgKyAxLCBiYXNlTGV2ZWwsIHJlY3Vyc2UsIG9yZGVyKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlTY2FuIDwgaUNoKVxuICAgICAgICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKGlTY2FuLCBpQ2gsIGxvY2FsTGV2ZWwpKTtcbiAgICAgICAgICAgIGlDaCA9IGlTY2FuO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcHV0ZVNlY3Rpb25PcmRlcihsaW5lLCBsZXZlbCwgYmFzZUxldmVsLCBpc29sYXRlcywgZnJvbSwgdG8sIG9yZGVyKSB7XG4gICAgbGV0IG91dGVyVHlwZSA9IChsZXZlbCAlIDIgPyAyIC8qIFQuUiAqLyA6IDEgLyogVC5MICovKTtcbiAgICBjb21wdXRlQ2hhclR5cGVzKGxpbmUsIGZyb20sIHRvLCBpc29sYXRlcywgb3V0ZXJUeXBlKTtcbiAgICBwcm9jZXNzQnJhY2tldFBhaXJzKGxpbmUsIGZyb20sIHRvLCBpc29sYXRlcywgb3V0ZXJUeXBlKTtcbiAgICBwcm9jZXNzTmV1dHJhbHMoZnJvbSwgdG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpO1xuICAgIGVtaXRTcGFucyhsaW5lLCBmcm9tLCB0bywgbGV2ZWwsIGJhc2VMZXZlbCwgaXNvbGF0ZXMsIG9yZGVyKTtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVPcmRlcihsaW5lLCBkaXJlY3Rpb24sIGlzb2xhdGVzKSB7XG4gICAgaWYgKCFsaW5lKVxuICAgICAgICByZXR1cm4gW25ldyBCaWRpU3BhbigwLCAwLCBkaXJlY3Rpb24gPT0gUlRMID8gMSA6IDApXTtcbiAgICBpZiAoZGlyZWN0aW9uID09IExUUiAmJiAhaXNvbGF0ZXMubGVuZ3RoICYmICFCaWRpUkUudGVzdChsaW5lKSlcbiAgICAgICAgcmV0dXJuIHRyaXZpYWxPcmRlcihsaW5lLmxlbmd0aCk7XG4gICAgaWYgKGlzb2xhdGVzLmxlbmd0aClcbiAgICAgICAgd2hpbGUgKGxpbmUubGVuZ3RoID4gdHlwZXMubGVuZ3RoKVxuICAgICAgICAgICAgdHlwZXNbdHlwZXMubGVuZ3RoXSA9IDI1NiAvKiBULk5JICovOyAvLyBNYWtlIHN1cmUgdHlwZXMgYXJyYXkgaGFzIG5vIGdhcHNcbiAgICBsZXQgb3JkZXIgPSBbXSwgbGV2ZWwgPSBkaXJlY3Rpb24gPT0gTFRSID8gMCA6IDE7XG4gICAgY29tcHV0ZVNlY3Rpb25PcmRlcihsaW5lLCBsZXZlbCwgbGV2ZWwsIGlzb2xhdGVzLCAwLCBsaW5lLmxlbmd0aCwgb3JkZXIpO1xuICAgIHJldHVybiBvcmRlcjtcbn1cbmZ1bmN0aW9uIHRyaXZpYWxPcmRlcihsZW5ndGgpIHtcbiAgICByZXR1cm4gW25ldyBCaWRpU3BhbigwLCBsZW5ndGgsIDApXTtcbn1cbmxldCBtb3ZlZE92ZXIgPSBcIlwiO1xuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBtb3ZlcyBzdHJpY3RseSB2aXN1YWxseSwgd2l0aG91dCBjb25jZXJuIGZvciBhXG4vLyB0cmF2ZXJzYWwgdmlzaXRpbmcgZXZlcnkgbG9naWNhbCBwb3NpdGlvbiBpbiB0aGUgc3RyaW5nLiBJdCB3aWxsXG4vLyBzdGlsbCBkbyBzbyBmb3Igc2ltcGxlIGlucHV0LCBidXQgc2l0dWF0aW9ucyBsaWtlIG11bHRpcGxlIGlzb2xhdGVzXG4vLyB3aXRoIHRoZSBzYW1lIGxldmVsIG5leHQgdG8gZWFjaCBvdGhlciwgb3IgdGV4dCBnb2luZyBhZ2FpbnN0IHRoZVxuLy8gbWFpbiBkaXIgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSwgd2lsbCBtYWtlIHNvbWUgcG9zaXRpb25zXG4vLyB1bnJlYWNoYWJsZSB3aXRoIHRoaXMgbW90aW9uLiBFYWNoIHZpc2libGUgY3Vyc29yIHBvc2l0aW9uIHdpbGxcbi8vIGNvcnJlc3BvbmQgdG8gdGhlIGxvd2VyLWxldmVsIGJpZGkgc3BhbiB0aGF0IHRvdWNoZXMgaXQuXG4vL1xuLy8gVGhlIGFsdGVybmF0aXZlIHdvdWxkIGJlIHRvIHNvbHZlIGFuIG9yZGVyIGdsb2JhbGx5IGZvciBhIGdpdmVuXG4vLyBsaW5lLCBtYWtpbmcgc3VyZSB0aGF0IGl0IGluY2x1ZGVzIGV2ZXJ5IHBvc2l0aW9uLCBidXQgdGhhdCB3b3VsZFxuLy8gcmVxdWlyZSBhc3NvY2lhdGluZyBub24tY2Fub25pY2FsIChoaWdoZXIgYmlkaSBzcGFuIGxldmVsKVxuLy8gcG9zaXRpb25zIHdpdGggYSBnaXZlbiB2aXN1YWwgcG9zaXRpb24sIHdoaWNoIGlzIGxpa2VseSB0byBjb25mdXNlXG4vLyBwZW9wbGUuIChBbmQgd291bGQgZ2VuZXJhbGx5IGJlIGEgbG90IG1vcmUgY29tcGxpY2F0ZWQuKVxuZnVuY3Rpb24gbW92ZVZpc3VhbGx5KGxpbmUsIG9yZGVyLCBkaXIsIHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBzdGFydEluZGV4ID0gc3RhcnQuaGVhZCAtIGxpbmUuZnJvbTtcbiAgICBsZXQgc3BhbkkgPSBCaWRpU3Bhbi5maW5kKG9yZGVyLCBzdGFydEluZGV4LCAoX2EgPSBzdGFydC5iaWRpTGV2ZWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IC0xLCBzdGFydC5hc3NvYyk7XG4gICAgbGV0IHNwYW4gPSBvcmRlcltzcGFuSV0sIHNwYW5FbmQgPSBzcGFuLnNpZGUoZm9yd2FyZCwgZGlyKTtcbiAgICAvLyBFbmQgb2Ygc3BhblxuICAgIGlmIChzdGFydEluZGV4ID09IHNwYW5FbmQpIHtcbiAgICAgICAgbGV0IG5leHRJID0gc3BhbkkgKz0gZm9yd2FyZCA/IDEgOiAtMTtcbiAgICAgICAgaWYgKG5leHRJIDwgMCB8fCBuZXh0SSA+PSBvcmRlci5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgc3BhbiA9IG9yZGVyW3NwYW5JID0gbmV4dEldO1xuICAgICAgICBzdGFydEluZGV4ID0gc3Bhbi5zaWRlKCFmb3J3YXJkLCBkaXIpO1xuICAgICAgICBzcGFuRW5kID0gc3Bhbi5zaWRlKGZvcndhcmQsIGRpcik7XG4gICAgfVxuICAgIGxldCBuZXh0SW5kZXggPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgc3RhcnRJbmRleCwgc3Bhbi5mb3J3YXJkKGZvcndhcmQsIGRpcikpO1xuICAgIGlmIChuZXh0SW5kZXggPCBzcGFuLmZyb20gfHwgbmV4dEluZGV4ID4gc3Bhbi50bylcbiAgICAgICAgbmV4dEluZGV4ID0gc3BhbkVuZDtcbiAgICBtb3ZlZE92ZXIgPSBsaW5lLnRleHQuc2xpY2UoTWF0aC5taW4oc3RhcnRJbmRleCwgbmV4dEluZGV4KSwgTWF0aC5tYXgoc3RhcnRJbmRleCwgbmV4dEluZGV4KSk7XG4gICAgbGV0IG5leHRTcGFuID0gc3BhbkkgPT0gKGZvcndhcmQgPyBvcmRlci5sZW5ndGggLSAxIDogMCkgPyBudWxsIDogb3JkZXJbc3BhbkkgKyAoZm9yd2FyZCA/IDEgOiAtMSldO1xuICAgIGlmIChuZXh0U3BhbiAmJiBuZXh0SW5kZXggPT0gc3BhbkVuZCAmJiBuZXh0U3Bhbi5sZXZlbCArIChmb3J3YXJkID8gMCA6IDEpIDwgc3Bhbi5sZXZlbClcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV4dFNwYW4uc2lkZSghZm9yd2FyZCwgZGlyKSArIGxpbmUuZnJvbSwgbmV4dFNwYW4uZm9yd2FyZChmb3J3YXJkLCBkaXIpID8gMSA6IC0xLCBuZXh0U3Bhbi5sZXZlbCk7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV4dEluZGV4ICsgbGluZS5mcm9tLCBzcGFuLmZvcndhcmQoZm9yd2FyZCwgZGlyKSA/IC0xIDogMSwgc3Bhbi5sZXZlbCk7XG59XG5mdW5jdGlvbiBhdXRvRGlyZWN0aW9uKHRleHQsIGZyb20sIHRvKSB7XG4gICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgIGxldCB0eXBlID0gY2hhclR5cGUodGV4dC5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgaWYgKHR5cGUgPT0gMSAvKiBULkwgKi8pXG4gICAgICAgICAgICByZXR1cm4gTFRSO1xuICAgICAgICBpZiAodHlwZSA9PSAyIC8qIFQuUiAqLyB8fCB0eXBlID09IDQgLyogVC5BTCAqLylcbiAgICAgICAgICAgIHJldHVybiBSVEw7XG4gICAgfVxuICAgIHJldHVybiBMVFI7XG59XG5cbmNvbnN0IGNsaWNrQWRkc1NlbGVjdGlvblJhbmdlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZHJhZ01vdmVzU2VsZWN0aW9uJDEgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBtb3VzZVNlbGVjdGlvblN0eWxlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZXhjZXB0aW9uU2luayA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHVwZGF0ZUxpc3RlbmVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgaW5wdXRIYW5kbGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZm9jdXNDaGFuZ2VFZmZlY3QgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBjbGlwYm9hcmRJbnB1dEZpbHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGNsaXBib2FyZE91dHB1dEZpbHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IHBlckxpbmVUZXh0RGlyZWN0aW9uID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5zb21lKHggPT4geClcbn0pO1xuY29uc3QgbmF0aXZlU2VsZWN0aW9uSGlkZGVuID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5zb21lKHggPT4geClcbn0pO1xuY29uc3Qgc2Nyb2xsSGFuZGxlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNsYXNzIFNjcm9sbFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IocmFuZ2UsIHkgPSBcIm5lYXJlc3RcIiwgeCA9IFwibmVhcmVzdFwiLCB5TWFyZ2luID0gNSwgeE1hcmdpbiA9IDUsIFxuICAgIC8vIFRoaXMgZGF0YSBzdHJ1Y3R1cmUgaXMgYWJ1c2VkIHRvIGFsc28gc3RvcmUgcHJlY2lzZSBzY3JvbGxcbiAgICAvLyBzbmFwc2hvdHMsIGluc3RlYWQgb2YgYSBgc2Nyb2xsSW50b1ZpZXdgIHJlcXVlc3QuIFdoZW4gdGhpc1xuICAgIC8vIGZsYWcgaXMgYHRydWVgLCBgcmFuZ2VgIHBvaW50cyBhdCBhIHBvc2l0aW9uIGluIHRoZSByZWZlcmVuY2VcbiAgICAvLyBsaW5lLCBgeU1hcmdpbmAgaG9sZHMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgdG9wIG9mIHRoYXRcbiAgICAvLyBsaW5lIGFuZCB0aGUgdG9wIG9mIHRoZSBlZGl0b3IsIGFuZCBgeE1hcmdpbmAgaG9sZHMgdGhlXG4gICAgLy8gZWRpdG9yJ3MgYHNjcm9sbExlZnRgLlxuICAgIGlzU25hcHNob3QgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2U7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueU1hcmdpbiA9IHlNYXJnaW47XG4gICAgICAgIHRoaXMueE1hcmdpbiA9IHhNYXJnaW47XG4gICAgICAgIHRoaXMuaXNTbmFwc2hvdCA9IGlzU25hcHNob3Q7XG4gICAgfVxuICAgIG1hcChjaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmVtcHR5ID8gdGhpcyA6XG4gICAgICAgICAgICBuZXcgU2Nyb2xsVGFyZ2V0KHRoaXMucmFuZ2UubWFwKGNoYW5nZXMpLCB0aGlzLnksIHRoaXMueCwgdGhpcy55TWFyZ2luLCB0aGlzLnhNYXJnaW4sIHRoaXMuaXNTbmFwc2hvdCk7XG4gICAgfVxuICAgIGNsaXAoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2UudG8gPD0gc3RhdGUuZG9jLmxlbmd0aCA/IHRoaXMgOlxuICAgICAgICAgICAgbmV3IFNjcm9sbFRhcmdldChFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHN0YXRlLmRvYy5sZW5ndGgpLCB0aGlzLnksIHRoaXMueCwgdGhpcy55TWFyZ2luLCB0aGlzLnhNYXJnaW4sIHRoaXMuaXNTbmFwc2hvdCk7XG4gICAgfVxufVxuY29uc3Qgc2Nyb2xsSW50b1ZpZXcgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHsgbWFwOiAodCwgY2gpID0+IHQubWFwKGNoKSB9KTtcbmNvbnN0IHNldEVkaXRDb250ZXh0Rm9ybWF0dGluZyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8qKlxuTG9nIG9yIHJlcG9ydCBhbiB1bmhhbmRsZWQgZXhjZXB0aW9uIGluIGNsaWVudCBjb2RlLiBTaG91bGRcbnByb2JhYmx5IG9ubHkgYmUgdXNlZCBieSBleHRlbnNpb24gY29kZSB0aGF0IGFsbG93cyBjbGllbnQgY29kZSB0b1xucHJvdmlkZSBmdW5jdGlvbnMsIGFuZCBjYWxscyB0aG9zZSBmdW5jdGlvbnMgaW4gYSBjb250ZXh0IHdoZXJlIGFuXG5leGNlcHRpb24gY2FuJ3QgYmUgcHJvcGFnYXRlZCB0byBjYWxsaW5nIGNvZGUgaW4gYSByZWFzb25hYmxlIHdheVxuKGZvciBleGFtcGxlIHdoZW4gaW4gYW4gZXZlbnQgaGFuZGxlcikuXG5cbkVpdGhlciBjYWxscyBhIGhhbmRsZXIgcmVnaXN0ZXJlZCB3aXRoXG5bYEVkaXRvclZpZXcuZXhjZXB0aW9uU2lua2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XmV4Y2VwdGlvblNpbmspLFxuYHdpbmRvdy5vbmVycm9yYCwgaWYgZGVmaW5lZCwgb3IgYGNvbnNvbGUuZXJyb3JgIChpbiB3aGljaCBjYXNlXG5pdCdsbCBwYXNzIGBjb250ZXh0YCwgd2hlbiBnaXZlbiwgYXMgZmlyc3QgYXJndW1lbnQpLlxuKi9cbmZ1bmN0aW9uIGxvZ0V4Y2VwdGlvbihzdGF0ZSwgZXhjZXB0aW9uLCBjb250ZXh0KSB7XG4gICAgbGV0IGhhbmRsZXIgPSBzdGF0ZS5mYWNldChleGNlcHRpb25TaW5rKTtcbiAgICBpZiAoaGFuZGxlci5sZW5ndGgpXG4gICAgICAgIGhhbmRsZXJbMF0oZXhjZXB0aW9uKTtcbiAgICBlbHNlIGlmICh3aW5kb3cub25lcnJvciAmJiB3aW5kb3cub25lcnJvcihTdHJpbmcoZXhjZXB0aW9uKSwgY29udGV4dCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4Y2VwdGlvbikpIDtcbiAgICBlbHNlIGlmIChjb250ZXh0KVxuICAgICAgICBjb25zb2xlLmVycm9yKGNvbnRleHQgKyBcIjpcIiwgZXhjZXB0aW9uKTtcbiAgICBlbHNlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXhjZXB0aW9uKTtcbn1cbmNvbnN0IGVkaXRhYmxlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzWzBdIDogdHJ1ZSB9KTtcbmxldCBuZXh0UGx1Z2luSUQgPSAwO1xuY29uc3Qgdmlld1BsdWdpbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUocGx1Z2lucykge1xuICAgICAgICByZXR1cm4gcGx1Z2lucy5maWx0ZXIoKHAsIGkpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKVxuICAgICAgICAgICAgICAgIGlmIChwbHVnaW5zW2pdLnBsdWdpbiA9PSBwLnBsdWdpbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5WaWV3IHBsdWdpbnMgYXNzb2NpYXRlIHN0YXRlZnVsIHZhbHVlcyB3aXRoIGEgdmlldy4gVGhleSBjYW5cbmluZmx1ZW5jZSB0aGUgd2F5IHRoZSBjb250ZW50IGlzIGRyYXduLCBhbmQgYXJlIG5vdGlmaWVkIG9mIHRoaW5nc1xudGhhdCBoYXBwZW4gaW4gdGhlIHZpZXcuIFRoZXkgb3B0aW9uYWxseSB0YWtlIGFuIGFyZ3VtZW50LCBpblxud2hpY2ggY2FzZSB5b3UgbmVlZCB0byBjYWxsIFtgb2ZgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuVmlld1BsdWdpbi5vZikgdG8gY3JlYXRlXG5hbiBleHRlbnNpb24gZm9yIHRoZSBwbHVnaW4uIFdoZW4gdGhlIGFyZ3VtZW50IHR5cGUgaXMgdW5kZWZpbmVkLFxueW91IGNhbiB1c2UgdGhlIHBsdWdpbiBpbnN0YW5jZSBhcyBhbiBleHRlbnNpb24gZGlyZWN0bHkuXG4qL1xuY2xhc3MgVmlld1BsdWdpbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpZCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjcmVhdGUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZG9tRXZlbnRIYW5kbGVycywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBkb21FdmVudE9ic2VydmVycywgYnVpbGRFeHRlbnNpb25zKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5jcmVhdGUgPSBjcmVhdGU7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRIYW5kbGVycyA9IGRvbUV2ZW50SGFuZGxlcnM7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRPYnNlcnZlcnMgPSBkb21FdmVudE9ic2VydmVycztcbiAgICAgICAgdGhpcy5iYXNlRXh0ZW5zaW9ucyA9IGJ1aWxkRXh0ZW5zaW9ucyh0aGlzKTtcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSB0aGlzLmJhc2VFeHRlbnNpb25zLmNvbmNhdCh2aWV3UGx1Z2luLm9mKHsgcGx1Z2luOiB0aGlzLCBhcmc6IHVuZGVmaW5lZCB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gZm9yIHRoaXMgcGx1Z2luIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgICovXG4gICAgb2YoYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VFeHRlbnNpb25zLmNvbmNhdCh2aWV3UGx1Z2luLm9mKHsgcGx1Z2luOiB0aGlzLCBhcmcgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBwbHVnaW4gZnJvbSBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyB0aGVcbiAgICBwbHVnaW4ncyB2YWx1ZSwgZ2l2ZW4gYW4gZWRpdG9yIHZpZXcuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKGNyZWF0ZSwgc3BlYykge1xuICAgICAgICBjb25zdCB7IGV2ZW50SGFuZGxlcnMsIGV2ZW50T2JzZXJ2ZXJzLCBwcm92aWRlLCBkZWNvcmF0aW9uczogZGVjbyB9ID0gc3BlYyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3UGx1Z2luKG5leHRQbHVnaW5JRCsrLCBjcmVhdGUsIGV2ZW50SGFuZGxlcnMsIGV2ZW50T2JzZXJ2ZXJzLCBwbHVnaW4gPT4ge1xuICAgICAgICAgICAgbGV0IGV4dCA9IFtdO1xuICAgICAgICAgICAgaWYgKGRlY28pXG4gICAgICAgICAgICAgICAgZXh0LnB1c2goZGVjb3JhdGlvbnMub2YodmlldyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW5JbnN0ID0gdmlldy5wbHVnaW4ocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3QgPyBkZWNvKHBsdWdpbkluc3QpIDogRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlKVxuICAgICAgICAgICAgICAgIGV4dC5wdXNoKHByb3ZpZGUocGx1Z2luKSk7XG4gICAgICAgICAgICByZXR1cm4gZXh0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcGx1Z2luIGZvciBhIGNsYXNzIHdob3NlIGNvbnN0cnVjdG9yIHRha2VzIGEgc2luZ2xlXG4gICAgZWRpdG9yIHZpZXcgYXMgYXJndW1lbnQuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUNsYXNzKGNscywgc3BlYykge1xuICAgICAgICByZXR1cm4gVmlld1BsdWdpbi5kZWZpbmUoKHZpZXcsIGFyZykgPT4gbmV3IGNscyh2aWV3LCBhcmcpLCBzcGVjKTtcbiAgICB9XG59XG5jbGFzcyBQbHVnaW5JbnN0YW5jZSB7XG4gICAgY29uc3RydWN0b3Ioc3BlYykge1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICAvLyBXaGVuIHN0YXJ0aW5nIGFuIHVwZGF0ZSwgYWxsIHBsdWdpbnMgaGF2ZSB0aGlzIGZpZWxkIHNldCB0byB0aGVcbiAgICAgICAgLy8gdXBkYXRlIG9iamVjdCwgaW5kaWNhdGluZyB0aGV5IG5lZWQgdG8gYmUgdXBkYXRlZC4gV2hlbiBmaW5pc2hlZFxuICAgICAgICAvLyB1cGRhdGluZywgaXQgaXMgc2V0IHRvIGBudWxsYC4gUmV0cmlldmluZyBhIHBsdWdpbiB0aGF0IG5lZWRzIHRvXG4gICAgICAgIC8vIGJlIHVwZGF0ZWQgd2l0aCBgdmlldy5wbHVnaW5gIGZvcmNlcyBhbiBlYWdlciB1cGRhdGUuXG4gICAgICAgIHRoaXMubXVzdFVwZGF0ZSA9IG51bGw7XG4gICAgICAgIC8vIFRoaXMgaXMgbnVsbCB3aGVuIHRoZSBwbHVnaW4gaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIGJ1dFxuICAgICAgICAvLyBpbml0aWFsaXplZCBvbiB0aGUgZmlyc3QgdXBkYXRlLlxuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBsdWdpbigpIHsgcmV0dXJuIHRoaXMuc3BlYyAmJiB0aGlzLnNwZWMucGx1Z2luOyB9XG4gICAgdXBkYXRlKHZpZXcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zcGVjKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3BlYy5wbHVnaW4uY3JlYXRlKHZpZXcsIHRoaXMuc3BlYy5hcmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odmlldy5zdGF0ZSwgZSwgXCJDb2RlTWlycm9yIHBsdWdpbiBjcmFzaGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5tdXN0VXBkYXRlKSB7XG4gICAgICAgICAgICBsZXQgdXBkYXRlID0gdGhpcy5tdXN0VXBkYXRlO1xuICAgICAgICAgICAgdGhpcy5tdXN0VXBkYXRlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLnVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih1cGRhdGUuc3RhdGUsIGUsIFwiQ29kZU1pcnJvciBwbHVnaW4gY3Jhc2hlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuZGVzdHJveSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGVzdHJveSh2aWV3KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKChfYSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXN0cm95KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odmlldy5zdGF0ZSwgZSwgXCJDb2RlTWlycm9yIHBsdWdpbiBjcmFzaGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuc3BlYyA9IHRoaXMudmFsdWUgPSBudWxsO1xuICAgIH1cbn1cbmNvbnN0IGVkaXRvckF0dHJpYnV0ZXMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBjb250ZW50QXR0cmlidXRlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8vIFByb3ZpZGUgZGVjb3JhdGlvbnNcbmNvbnN0IGRlY29yYXRpb25zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3Qgb3V0ZXJEZWNvcmF0aW9ucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGF0b21pY1JhbmdlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGJpZGlJc29sYXRlZFJhbmdlcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmZ1bmN0aW9uIGdldElzb2xhdGVkUmFuZ2VzKHZpZXcsIGxpbmUpIHtcbiAgICBsZXQgaXNvbGF0ZXMgPSB2aWV3LnN0YXRlLmZhY2V0KGJpZGlJc29sYXRlZFJhbmdlcyk7XG4gICAgaWYgKCFpc29sYXRlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBpc29sYXRlcztcbiAgICBsZXQgc2V0cyA9IGlzb2xhdGVzLm1hcChpID0+IGkgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGkodmlldykgOiBpKTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgUmFuZ2VTZXQuc3BhbnMoc2V0cywgbGluZS5mcm9tLCBsaW5lLnRvLCB7XG4gICAgICAgIHBvaW50KCkgeyB9LFxuICAgICAgICBzcGFuKGZyb21Eb2MsIHRvRG9jLCBhY3RpdmUsIG9wZW4pIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gZnJvbURvYyAtIGxpbmUuZnJvbSwgdG8gPSB0b0RvYyAtIGxpbmUuZnJvbTtcbiAgICAgICAgICAgIGxldCBsZXZlbCA9IHJlc3VsdDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBhY3RpdmUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0sIG9wZW4tLSkge1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSBhY3RpdmVbaV0uc3BlYy5iaWRpSXNvbGF0ZSwgdXBkYXRlO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gYXV0b0RpcmVjdGlvbihsaW5lLnRleHQsIGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICBpZiAob3BlbiA+IDAgJiYgbGV2ZWwubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICh1cGRhdGUgPSBsZXZlbFtsZXZlbC5sZW5ndGggLSAxXSkudG8gPT0gZnJvbSAmJiB1cGRhdGUuZGlyZWN0aW9uID09IGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGUudG8gPSB0bztcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPSB1cGRhdGUuaW5uZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWRkID0geyBmcm9tLCB0bywgZGlyZWN0aW9uLCBpbm5lcjogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwucHVzaChhZGQpO1xuICAgICAgICAgICAgICAgICAgICBsZXZlbCA9IGFkZC5pbm5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3Qgc2Nyb2xsTWFyZ2lucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmZ1bmN0aW9uIGdldFNjcm9sbE1hcmdpbnModmlldykge1xuICAgIGxldCBsZWZ0ID0gMCwgcmlnaHQgPSAwLCB0b3AgPSAwLCBib3R0b20gPSAwO1xuICAgIGZvciAobGV0IHNvdXJjZSBvZiB2aWV3LnN0YXRlLmZhY2V0KHNjcm9sbE1hcmdpbnMpKSB7XG4gICAgICAgIGxldCBtID0gc291cmNlKHZpZXcpO1xuICAgICAgICBpZiAobSkge1xuICAgICAgICAgICAgaWYgKG0ubGVmdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLm1heChsZWZ0LCBtLmxlZnQpO1xuICAgICAgICAgICAgaWYgKG0ucmlnaHQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByaWdodCA9IE1hdGgubWF4KHJpZ2h0LCBtLnJpZ2h0KTtcbiAgICAgICAgICAgIGlmIChtLnRvcCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHRvcCA9IE1hdGgubWF4KHRvcCwgbS50b3ApO1xuICAgICAgICAgICAgaWYgKG0uYm90dG9tICE9IG51bGwpXG4gICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5tYXgoYm90dG9tLCBtLmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tIH07XG59XG5jb25zdCBzdHlsZU1vZHVsZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNsYXNzIENoYW5nZWRSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikge1xuICAgICAgICB0aGlzLmZyb21BID0gZnJvbUE7XG4gICAgICAgIHRoaXMudG9BID0gdG9BO1xuICAgICAgICB0aGlzLmZyb21CID0gZnJvbUI7XG4gICAgICAgIHRoaXMudG9CID0gdG9CO1xuICAgIH1cbiAgICBqb2luKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlZFJhbmdlKE1hdGgubWluKHRoaXMuZnJvbUEsIG90aGVyLmZyb21BKSwgTWF0aC5tYXgodGhpcy50b0EsIG90aGVyLnRvQSksIE1hdGgubWluKHRoaXMuZnJvbUIsIG90aGVyLmZyb21CKSwgTWF0aC5tYXgodGhpcy50b0IsIG90aGVyLnRvQikpO1xuICAgIH1cbiAgICBhZGRUb1NldChzZXQpIHtcbiAgICAgICAgbGV0IGkgPSBzZXQubGVuZ3RoLCBtZSA9IHRoaXM7XG4gICAgICAgIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSBzZXRbaSAtIDFdO1xuICAgICAgICAgICAgaWYgKHJhbmdlLmZyb21BID4gbWUudG9BKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHJhbmdlLnRvQSA8IG1lLmZyb21BKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbWUgPSBtZS5qb2luKHJhbmdlKTtcbiAgICAgICAgICAgIHNldC5zcGxpY2UoaSAtIDEsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHNldC5zcGxpY2UoaSwgMCwgbWUpO1xuICAgICAgICByZXR1cm4gc2V0O1xuICAgIH1cbiAgICBzdGF0aWMgZXh0ZW5kV2l0aFJhbmdlcyhkaWZmLCByYW5nZXMpIHtcbiAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBkaWZmO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAobGV0IGRJID0gMCwgckkgPSAwLCBwb3NBID0gMCwgcG9zQiA9IDA7OyBkSSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGRJID09IGRpZmYubGVuZ3RoID8gbnVsbCA6IGRpZmZbZEldLCBvZmYgPSBwb3NBIC0gcG9zQjtcbiAgICAgICAgICAgIGxldCBlbmQgPSBuZXh0ID8gbmV4dC5mcm9tQiA6IDFlOTtcbiAgICAgICAgICAgIHdoaWxlIChySSA8IHJhbmdlcy5sZW5ndGggJiYgcmFuZ2VzW3JJXSA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzW3JJXSwgdG8gPSByYW5nZXNbckkgKyAxXTtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbUIgPSBNYXRoLm1heChwb3NCLCBmcm9tKSwgdG9CID0gTWF0aC5taW4oZW5kLCB0byk7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21CIDw9IHRvQilcbiAgICAgICAgICAgICAgICAgICAgbmV3IENoYW5nZWRSYW5nZShmcm9tQiArIG9mZiwgdG9CICsgb2ZmLCBmcm9tQiwgdG9CKS5hZGRUb1NldChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGlmICh0byA+IGVuZClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBySSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICBuZXcgQ2hhbmdlZFJhbmdlKG5leHQuZnJvbUEsIG5leHQudG9BLCBuZXh0LmZyb21CLCBuZXh0LnRvQikuYWRkVG9TZXQocmVzdWx0KTtcbiAgICAgICAgICAgIHBvc0EgPSBuZXh0LnRvQTtcbiAgICAgICAgICAgIHBvc0IgPSBuZXh0LnRvQjtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuVmlldyBbcGx1Z2luc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4pIGFyZSBnaXZlbiBpbnN0YW5jZXMgb2YgdGhpc1xuY2xhc3MsIHdoaWNoIGRlc2NyaWJlIHdoYXQgaGFwcGVuZWQsIHdoZW5ldmVyIHRoZSB2aWV3IGlzIHVwZGF0ZWQuXG4qL1xuY2xhc3MgVmlld1VwZGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGVkaXRvciB2aWV3IHRoYXQgdGhlIHVwZGF0ZSBpcyBhc3NvY2lhdGVkIHdpdGguXG4gICAgKi9cbiAgICB2aWV3LCBcbiAgICAvKipcbiAgICBUaGUgbmV3IGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgdHJhbnNhY3Rpb25zIGludm9sdmVkIGluIHRoZSB1cGRhdGUuIE1heSBiZSBlbXB0eS5cbiAgICAqL1xuICAgIHRyYW5zYWN0aW9ucykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25zID0gdHJhbnNhY3Rpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuZmxhZ3MgPSAwO1xuICAgICAgICB0aGlzLnN0YXJ0U3RhdGUgPSB2aWV3LnN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZXMgPSBDaGFuZ2VTZXQuZW1wdHkodGhpcy5zdGFydFN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCB0ciBvZiB0cmFuc2FjdGlvbnMpXG4gICAgICAgICAgICB0aGlzLmNoYW5nZXMgPSB0aGlzLmNoYW5nZXMuY29tcG9zZSh0ci5jaGFuZ2VzKTtcbiAgICAgICAgbGV0IGNoYW5nZWRSYW5nZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLml0ZXJDaGFuZ2VkUmFuZ2VzKChmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSA9PiBjaGFuZ2VkUmFuZ2VzLnB1c2gobmV3IENoYW5nZWRSYW5nZShmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSkpO1xuICAgICAgICB0aGlzLmNoYW5nZWRSYW5nZXMgPSBjaGFuZ2VkUmFuZ2VzO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUodmlldywgc3RhdGUsIHRyYW5zYWN0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdVcGRhdGUodmlldywgc3RhdGUsIHRyYW5zYWN0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoZSBbdmlld3BvcnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnZpZXdwb3J0KSBvclxuICAgIFt2aXNpYmxlIHJhbmdlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcudmlzaWJsZVJhbmdlcykgY2hhbmdlZCBpbiB0aGlzXG4gICAgdXBkYXRlLlxuICAgICovXG4gICAgZ2V0IHZpZXdwb3J0Q2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmZsYWdzICYgNCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0ICovKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuXG4gICAgW2B2aWV3cG9ydENoYW5nZWRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuVmlld1VwZGF0ZS52aWV3cG9ydENoYW5nZWQpIGlzIHRydWVcbiAgICBhbmQgdGhlIHZpZXdwb3J0IGNoYW5nZSBpcyBub3QganVzdCB0aGUgcmVzdWx0IG9mIG1hcHBpbmcgaXQgaW5cbiAgICByZXNwb25zZSB0byBkb2N1bWVudCBjaGFuZ2VzLlxuICAgICovXG4gICAgZ2V0IHZpZXdwb3J0TW92ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIDggLyogVXBkYXRlRmxhZy5WaWV3cG9ydE1vdmVkICovKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSBoZWlnaHQgb2YgYSBibG9jayBlbGVtZW50IGluIHRoZSBlZGl0b3JcbiAgICBjaGFuZ2VkIGluIHRoaXMgdXBkYXRlLlxuICAgICovXG4gICAgZ2V0IGhlaWdodENoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0cnVlIHdoZW4gdGhlIGRvY3VtZW50IHdhcyBtb2RpZmllZCBvciB0aGUgc2l6ZSBvZiB0aGVcbiAgICBlZGl0b3IsIG9yIGVsZW1lbnRzIHdpdGhpbiB0aGUgZWRpdG9yLCBjaGFuZ2VkLlxuICAgICovXG4gICAgZ2V0IGdlb21ldHJ5Q2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jQ2hhbmdlZCB8fCAodGhpcy5mbGFncyAmICgxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovIHwgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLykpID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgdXBkYXRlIGluZGljYXRlcyBhIGZvY3VzIGNoYW5nZS5cbiAgICAqL1xuICAgIGdldCBmb2N1c0NoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIDEgLyogVXBkYXRlRmxhZy5Gb2N1cyAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBkb2N1bWVudCBjaGFuZ2VkIGluIHRoaXMgdXBkYXRlLlxuICAgICovXG4gICAgZ2V0IGRvY0NoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jaGFuZ2VzLmVtcHR5O1xuICAgIH1cbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gd2FzIGV4cGxpY2l0bHkgc2V0IGluIHRoaXMgdXBkYXRlLlxuICAgICovXG4gICAgZ2V0IHNlbGVjdGlvblNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuc2VsZWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgZW1wdHkoKSB7IHJldHVybiB0aGlzLmZsYWdzID09IDAgJiYgdGhpcy50cmFuc2FjdGlvbnMubGVuZ3RoID09IDA7IH1cbn1cblxuY2xhc3MgRG9jVmlldyBleHRlbmRzIENvbnRlbnRWaWV3IHtcbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGg7IH1cbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcCA9IFtmYWxzZV07XG4gICAgICAgIHRoaXMuZG9tQ2hhbmdlZCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzQ29tcG9zaXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLm1hcmtlZEZvckNvbXBvc2l0aW9uID0gbmV3IFNldDtcbiAgICAgICAgdGhpcy5lZGl0Q29udGV4dEZvcm1hdHRpbmcgPSBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIHRoaXMubGFzdENvbXBvc2l0aW9uQWZ0ZXJDdXJzb3IgPSBmYWxzZTtcbiAgICAgICAgLy8gVHJhY2sgYSBtaW5pbXVtIHdpZHRoIGZvciB0aGUgZWRpdG9yLiBXaGVuIG1lYXN1cmluZyBzaXplcyBpblxuICAgICAgICAvLyBtZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzLCB0aGlzIGlzIHVwZGF0ZWQgdG8gcG9pbnQgYXQgdGhlIHdpZHRoXG4gICAgICAgIC8vIG9mIGEgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGV4dGVudCBpbiB0aGUgZG9jdW1lbnQuIFdoZW4gYSBjaGFuZ2VcbiAgICAgICAgLy8gaGFwcGVucyBpbiB0aGF0IHJhbmdlLCB0aGVzZSBhcmUgcmVzZXQuIFRoYXQgd2F5LCBvbmNlIHdlJ3ZlIHNlZW5cbiAgICAgICAgLy8gYSBsaW5lL2VsZW1lbnQgb2YgYSBnaXZlbiBsZW5ndGgsIHdlIGtlZXAgdGhlIGVkaXRvciB3aWRlIGVub3VnaFxuICAgICAgICAvLyB0byBmaXQgYXQgbGVhc3QgdGhhdCBlbGVtZW50LCB1bnRpbCBpdCBpcyBjaGFuZ2VkLCBhdCB3aGljaCBwb2ludFxuICAgICAgICAvLyB3ZSBmb3JnZXQgaXQgYWdhaW4uXG4gICAgICAgIHRoaXMubWluV2lkdGggPSAwO1xuICAgICAgICB0aGlzLm1pbldpZHRoRnJvbSA9IDA7XG4gICAgICAgIHRoaXMubWluV2lkdGhUbyA9IDA7XG4gICAgICAgIC8vIFRyYWNrIHdoZXRoZXIgdGhlIERPTSBzZWxlY3Rpb24gd2FzIHNldCBpbiBhIGxvc3N5IHdheSwgc28gdGhhdFxuICAgICAgICAvLyB3ZSBkb24ndCBtZXNzIGl0IHVwIHdoZW4gcmVhZGluZyBpdCBiYWNrIGl0XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlQW5jaG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbXByZWNpc2VIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAvLyBVc2VkIGJ5IHRoZSByZXNpemUgb2JzZXJ2ZXIgdG8gaWdub3JlIHJlc2l6ZXMgdGhhdCB3ZSBjYXVzZWRcbiAgICAgICAgLy8gb3Vyc2VsdmVzXG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuc2V0RE9NKHZpZXcuY29udGVudERPTSk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbbmV3IExpbmVWaWV3XTtcbiAgICAgICAgdGhpcy5jaGlsZHJlblswXS5zZXRQYXJlbnQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlRGVjbygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlubmVyKFtuZXcgQ2hhbmdlZFJhbmdlKDAsIDAsIDAsIHZpZXcuc3RhdGUuZG9jLmxlbmd0aCldLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLy8gVXBkYXRlIHRoZSBkb2N1bWVudCB2aWV3IHRvIGEgZ2l2ZW4gc3RhdGUuXG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gdXBkYXRlLmNoYW5nZWRSYW5nZXM7XG4gICAgICAgIGlmICh0aGlzLm1pbldpZHRoID4gMCAmJiBjaGFuZ2VkUmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkUmFuZ2VzLmV2ZXJ5KCh7IGZyb21BLCB0b0EgfSkgPT4gdG9BIDwgdGhpcy5taW5XaWR0aEZyb20gfHwgZnJvbUEgPiB0aGlzLm1pbldpZHRoVG8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aCA9IHRoaXMubWluV2lkdGhGcm9tID0gdGhpcy5taW5XaWR0aFRvID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhGcm9tID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMubWluV2lkdGhGcm9tLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3ModGhpcy5taW5XaWR0aFRvLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUVkaXRDb250ZXh0Rm9ybWF0dGluZyh1cGRhdGUpO1xuICAgICAgICBsZXQgcmVhZENvbXBvc2l0aW9uQXQgPSAtMTtcbiAgICAgICAgaWYgKHRoaXMudmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwICYmICF0aGlzLnZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICgoX2EgPSB0aGlzLmRvbUNoYW5nZWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uZXdTZWwpXG4gICAgICAgICAgICAgICAgcmVhZENvbXBvc2l0aW9uQXQgPSB0aGlzLmRvbUNoYW5nZWQubmV3U2VsLmhlYWQ7XG4gICAgICAgICAgICBlbHNlIGlmICghdG91Y2hlc0NvbXBvc2l0aW9uKHVwZGF0ZS5jaGFuZ2VzLCB0aGlzLmhhc0NvbXBvc2l0aW9uKSAmJiAhdXBkYXRlLnNlbGVjdGlvblNldClcbiAgICAgICAgICAgICAgICByZWFkQ29tcG9zaXRpb25BdCA9IHVwZGF0ZS5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21wb3NpdGlvbiA9IHJlYWRDb21wb3NpdGlvbkF0ID4gLTEgPyBmaW5kQ29tcG9zaXRpb25SYW5nZSh0aGlzLnZpZXcsIHVwZGF0ZS5jaGFuZ2VzLCByZWFkQ29tcG9zaXRpb25BdCkgOiBudWxsO1xuICAgICAgICB0aGlzLmRvbUNoYW5nZWQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5oYXNDb21wb3NpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5tYXJrZWRGb3JDb21wb3NpdGlvbi5jbGVhcigpO1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHRoaXMuaGFzQ29tcG9zaXRpb247XG4gICAgICAgICAgICBjaGFuZ2VkUmFuZ2VzID0gbmV3IENoYW5nZWRSYW5nZShmcm9tLCB0bywgdXBkYXRlLmNoYW5nZXMubWFwUG9zKGZyb20sIC0xKSwgdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRvLCAxKSlcbiAgICAgICAgICAgICAgICAuYWRkVG9TZXQoY2hhbmdlZFJhbmdlcy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc0NvbXBvc2l0aW9uID0gY29tcG9zaXRpb24gPyB7IGZyb206IGNvbXBvc2l0aW9uLnJhbmdlLmZyb21CLCB0bzogY29tcG9zaXRpb24ucmFuZ2UudG9CIH0gOiBudWxsO1xuICAgICAgICAvLyBXaGVuIHRoZSBET00gbm9kZXMgYXJvdW5kIHRoZSBzZWxlY3Rpb24gYXJlIG1vdmVkIHRvIGFub3RoZXJcbiAgICAgICAgLy8gcGFyZW50LCBDaHJvbWUgc29tZXRpbWVzIHJlcG9ydHMgYSBkaWZmZXJlbnQgc2VsZWN0aW9uIHRocm91Z2hcbiAgICAgICAgLy8gZ2V0U2VsZWN0aW9uIHRoYW4gdGhlIG9uZSB0aGF0IGl0IGFjdHVhbGx5IHNob3dzIHRvIHRoZSB1c2VyLlxuICAgICAgICAvLyBUaGlzIGZvcmNlcyBhIHNlbGVjdGlvbiB1cGRhdGUgd2hlbiBsaW5lcyBhcmUgam9pbmVkIHRvIHdvcmtcbiAgICAgICAgLy8gYXJvdW5kIHRoYXQuIElzc3VlICM1NFxuICAgICAgICBpZiAoKGJyb3dzZXIuaWUgfHwgYnJvd3Nlci5jaHJvbWUpICYmICFjb21wb3NpdGlvbiAmJiB1cGRhdGUgJiZcbiAgICAgICAgICAgIHVwZGF0ZS5zdGF0ZS5kb2MubGluZXMgIT0gdXBkYXRlLnN0YXJ0U3RhdGUuZG9jLmxpbmVzKVxuICAgICAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgIGxldCBwcmV2RGVjbyA9IHRoaXMuZGVjb3JhdGlvbnMsIGRlY28gPSB0aGlzLnVwZGF0ZURlY28oKTtcbiAgICAgICAgbGV0IGRlY29EaWZmID0gZmluZENoYW5nZWREZWNvKHByZXZEZWNvLCBkZWNvLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgIGNoYW5nZWRSYW5nZXMgPSBDaGFuZ2VkUmFuZ2UuZXh0ZW5kV2l0aFJhbmdlcyhjaGFuZ2VkUmFuZ2VzLCBkZWNvRGlmZik7XG4gICAgICAgIGlmICghKHRoaXMuZmxhZ3MgJiA3IC8qIFZpZXdGbGFnLkRpcnR5ICovKSAmJiBjaGFuZ2VkUmFuZ2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlubmVyKGNoYW5nZWRSYW5nZXMsIHVwZGF0ZS5zdGFydFN0YXRlLmRvYy5sZW5ndGgsIGNvbXBvc2l0aW9uKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXNlZCBieSB1cGRhdGUgYW5kIHRoZSBjb25zdHJ1Y3RvciBkbyBwZXJmb3JtIHRoZSBhY3R1YWwgRE9NXG4gICAgLy8gdXBkYXRlXG4gICAgdXBkYXRlSW5uZXIoY2hhbmdlcywgb2xkTGVuZ3RoLCBjb21wb3NpdGlvbikge1xuICAgICAgICB0aGlzLnZpZXcudmlld1N0YXRlLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4oY2hhbmdlcywgb2xkTGVuZ3RoLCBjb21wb3NpdGlvbik7XG4gICAgICAgIGxldCB7IG9ic2VydmVyIH0gPSB0aGlzLnZpZXc7XG4gICAgICAgIG9ic2VydmVyLmlnbm9yZSgoKSA9PiB7XG4gICAgICAgICAgICAvLyBMb2NrIHRoZSBoZWlnaHQgZHVyaW5nIHJlZHJhd2luZywgc2luY2UgQ2hyb21lIHNvbWV0aW1lc1xuICAgICAgICAgICAgLy8gbWVzc2VzIHdpdGggdGhlIHNjcm9sbCBwb3NpdGlvbiBkdXJpbmcgRE9NIG11dGF0aW9uICh0aG91Z2hcbiAgICAgICAgICAgIC8vIG5vIHJlbGF5b3V0IGlzIHRyaWdnZXJlZCBhbmQgSSBjYW5ub3QgaW1hZ2luZSBob3cgaXQgY2FuXG4gICAgICAgICAgICAvLyByZWNvbXB1dGUgdGhlIHNjcm9sbCBwb3NpdGlvbiB3aXRob3V0IGEgbGF5b3V0KVxuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUuaGVpZ2h0ID0gdGhpcy52aWV3LnZpZXdTdGF0ZS5jb250ZW50SGVpZ2h0IC8gdGhpcy52aWV3LnNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLmZsZXhCYXNpcyA9IHRoaXMubWluV2lkdGggPyB0aGlzLm1pbldpZHRoICsgXCJweFwiIDogXCJcIjtcbiAgICAgICAgICAgIC8vIENocm9tZSB3aWxsIHNvbWV0aW1lcywgd2hlbiBET00gbXV0YXRpb25zIG9jY3VyIGRpcmVjdGx5XG4gICAgICAgICAgICAvLyBhcm91bmQgdGhlIHNlbGVjdGlvbiwgZ2V0IGNvbmZ1c2VkIGFuZCByZXBvcnQgYSBkaWZmZXJlbnRcbiAgICAgICAgICAgIC8vIHNlbGVjdGlvbiBmcm9tIHRoZSBvbmUgaXQgZGlzcGxheXMgKGlzc3VlICMyMTgpLiBUaGlzIHRyaWVzXG4gICAgICAgICAgICAvLyB0byBkZXRlY3QgdGhhdCBzaXR1YXRpb24uXG4gICAgICAgICAgICBsZXQgdHJhY2sgPSBicm93c2VyLmNocm9tZSB8fCBicm93c2VyLmlvcyA/IHsgbm9kZTogb2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UuZm9jdXNOb2RlLCB3cml0dGVuOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zeW5jKHRoaXMudmlldywgdHJhY2spO1xuICAgICAgICAgICAgdGhpcy5mbGFncyAmPSB+NyAvKiBWaWV3RmxhZy5EaXJ0eSAqLztcbiAgICAgICAgICAgIGlmICh0cmFjayAmJiAodHJhY2sud3JpdHRlbiB8fCBvYnNlcnZlci5zZWxlY3Rpb25SYW5nZS5mb2N1c05vZGUgIT0gdHJhY2subm9kZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXJrZWRGb3JDb21wb3NpdGlvbi5mb3JFYWNoKGNWaWV3ID0+IGNWaWV3LmZsYWdzICY9IH44IC8qIFZpZXdGbGFnLkNvbXBvc2l0aW9uICovKTtcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMudmlldy52aWV3cG9ydC5mcm9tIHx8IHRoaXMudmlldy52aWV3cG9ydC50byA8IHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBCbG9ja1dpZGdldFZpZXcgJiYgY2hpbGQud2lkZ2V0IGluc3RhbmNlb2YgQmxvY2tHYXBXaWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIGdhcHMucHVzaChjaGlsZC5kb20pO1xuICAgICAgICBvYnNlcnZlci51cGRhdGVHYXBzKGdhcHMpO1xuICAgIH1cbiAgICB1cGRhdGVDaGlsZHJlbihjaGFuZ2VzLCBvbGRMZW5ndGgsIGNvbXBvc2l0aW9uKSB7XG4gICAgICAgIGxldCByYW5nZXMgPSBjb21wb3NpdGlvbiA/IGNvbXBvc2l0aW9uLnJhbmdlLmFkZFRvU2V0KGNoYW5nZXMuc2xpY2UoKSkgOiBjaGFuZ2VzO1xuICAgICAgICBsZXQgY3Vyc29yID0gdGhpcy5jaGlsZEN1cnNvcihvbGRMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gcmFuZ2VzLmxlbmd0aCAtIDE7OyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaSA+PSAwID8gcmFuZ2VzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCB7IGZyb21BLCB0b0EsIGZyb21CLCB0b0IgfSA9IG5leHQsIGNvbnRlbnQsIGJyZWFrQXRTdGFydCwgb3BlblN0YXJ0LCBvcGVuRW5kO1xuICAgICAgICAgICAgaWYgKGNvbXBvc2l0aW9uICYmIGNvbXBvc2l0aW9uLnJhbmdlLmZyb21CIDwgdG9CICYmIGNvbXBvc2l0aW9uLnJhbmdlLnRvQiA+IGZyb21CKSB7XG4gICAgICAgICAgICAgICAgbGV0IGJlZm9yZSA9IENvbnRlbnRCdWlsZGVyLmJ1aWxkKHRoaXMudmlldy5zdGF0ZS5kb2MsIGZyb21CLCBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQiwgdGhpcy5kZWNvcmF0aW9ucywgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcCk7XG4gICAgICAgICAgICAgICAgbGV0IGFmdGVyID0gQ29udGVudEJ1aWxkZXIuYnVpbGQodGhpcy52aWV3LnN0YXRlLmRvYywgY29tcG9zaXRpb24ucmFuZ2UudG9CLCB0b0IsIHRoaXMuZGVjb3JhdGlvbnMsIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXApO1xuICAgICAgICAgICAgICAgIGJyZWFrQXRTdGFydCA9IGJlZm9yZS5icmVha0F0U3RhcnQ7XG4gICAgICAgICAgICAgICAgb3BlblN0YXJ0ID0gYmVmb3JlLm9wZW5TdGFydDtcbiAgICAgICAgICAgICAgICBvcGVuRW5kID0gYWZ0ZXIub3BlbkVuZDtcbiAgICAgICAgICAgICAgICBsZXQgY29tcExpbmUgPSB0aGlzLmNvbXBvc2l0aW9uVmlldyhjb21wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGFmdGVyLmJyZWFrQXRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjb21wTGluZS5icmVha0FmdGVyID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWZ0ZXIuY29udGVudC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgY29tcExpbmUubWVyZ2UoY29tcExpbmUubGVuZ3RoLCBjb21wTGluZS5sZW5ndGgsIGFmdGVyLmNvbnRlbnRbMF0sIGZhbHNlLCBhZnRlci5vcGVuU3RhcnQsIDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBMaW5lLmJyZWFrQWZ0ZXIgPSBhZnRlci5jb250ZW50WzBdLmJyZWFrQWZ0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyLmNvbnRlbnQuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZS5jb250ZW50Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICBjb21wTGluZS5tZXJnZSgwLCAwLCBiZWZvcmUuY29udGVudFtiZWZvcmUuY29udGVudC5sZW5ndGggLSAxXSwgdHJ1ZSwgMCwgYmVmb3JlLm9wZW5FbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZS5jb250ZW50LnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZW50ID0gYmVmb3JlLmNvbnRlbnQuY29uY2F0KGNvbXBMaW5lKS5jb25jYXQoYWZ0ZXIuY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAoeyBjb250ZW50LCBicmVha0F0U3RhcnQsIG9wZW5TdGFydCwgb3BlbkVuZCB9ID1cbiAgICAgICAgICAgICAgICAgICAgQ29udGVudEJ1aWxkZXIuYnVpbGQodGhpcy52aWV3LnN0YXRlLmRvYywgZnJvbUIsIHRvQiwgdGhpcy5kZWNvcmF0aW9ucywgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHsgaTogdG9JLCBvZmY6IHRvT2ZmIH0gPSBjdXJzb3IuZmluZFBvcyh0b0EsIDEpO1xuICAgICAgICAgICAgbGV0IHsgaTogZnJvbUksIG9mZjogZnJvbU9mZiB9ID0gY3Vyc29yLmZpbmRQb3MoZnJvbUEsIC0xKTtcbiAgICAgICAgICAgIHJlcGxhY2VSYW5nZSh0aGlzLCBmcm9tSSwgZnJvbU9mZiwgdG9JLCB0b09mZiwgY29udGVudCwgYnJlYWtBdFN0YXJ0LCBvcGVuU3RhcnQsIG9wZW5FbmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb3NpdGlvbilcbiAgICAgICAgICAgIHRoaXMuZml4Q29tcG9zaXRpb25ET00oY29tcG9zaXRpb24pO1xuICAgIH1cbiAgICB1cGRhdGVFZGl0Q29udGV4dEZvcm1hdHRpbmcodXBkYXRlKSB7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHRGb3JtYXR0aW5nID0gdGhpcy5lZGl0Q29udGV4dEZvcm1hdHRpbmcubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdXBkYXRlLnRyYW5zYWN0aW9ucylcbiAgICAgICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0RWRpdENvbnRleHRGb3JtYXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0Rm9ybWF0dGluZyA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvc2l0aW9uVmlldyhjb21wb3NpdGlvbikge1xuICAgICAgICBsZXQgY3VyID0gbmV3IFRleHRWaWV3KGNvbXBvc2l0aW9uLnRleHQubm9kZVZhbHVlKTtcbiAgICAgICAgY3VyLmZsYWdzIHw9IDggLyogVmlld0ZsYWcuQ29tcG9zaXRpb24gKi87XG4gICAgICAgIGZvciAobGV0IHsgZGVjbyB9IG9mIGNvbXBvc2l0aW9uLm1hcmtzKVxuICAgICAgICAgICAgY3VyID0gbmV3IE1hcmtWaWV3KGRlY28sIFtjdXJdLCBjdXIubGVuZ3RoKTtcbiAgICAgICAgbGV0IGxpbmUgPSBuZXcgTGluZVZpZXc7XG4gICAgICAgIGxpbmUuYXBwZW5kKGN1ciwgMCk7XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICBmaXhDb21wb3NpdGlvbkRPTShjb21wb3NpdGlvbikge1xuICAgICAgICBsZXQgZml4ID0gKGRvbSwgY1ZpZXcpID0+IHtcbiAgICAgICAgICAgIGNWaWV3LmZsYWdzIHw9IDggLyogVmlld0ZsYWcuQ29tcG9zaXRpb24gKi8gfCAoY1ZpZXcuY2hpbGRyZW4uc29tZShjID0+IGMuZmxhZ3MgJiA3IC8qIFZpZXdGbGFnLkRpcnR5ICovKSA/IDEgLyogVmlld0ZsYWcuQ2hpbGREaXJ0eSAqLyA6IDApO1xuICAgICAgICAgICAgdGhpcy5tYXJrZWRGb3JDb21wb3NpdGlvbi5hZGQoY1ZpZXcpO1xuICAgICAgICAgICAgbGV0IHByZXYgPSBDb250ZW50Vmlldy5nZXQoZG9tKTtcbiAgICAgICAgICAgIGlmIChwcmV2ICYmIHByZXYgIT0gY1ZpZXcpXG4gICAgICAgICAgICAgICAgcHJldi5kb20gPSBudWxsO1xuICAgICAgICAgICAgY1ZpZXcuc2V0RE9NKGRvbSk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmNoaWxkUG9zKGNvbXBvc2l0aW9uLnJhbmdlLmZyb21CLCAxKTtcbiAgICAgICAgbGV0IGNWaWV3ID0gdGhpcy5jaGlsZHJlbltwb3MuaV07XG4gICAgICAgIGZpeChjb21wb3NpdGlvbi5saW5lLCBjVmlldyk7XG4gICAgICAgIGZvciAobGV0IGkgPSBjb21wb3NpdGlvbi5tYXJrcy5sZW5ndGggLSAxOyBpID49IC0xOyBpLS0pIHtcbiAgICAgICAgICAgIHBvcyA9IGNWaWV3LmNoaWxkUG9zKHBvcy5vZmYsIDEpO1xuICAgICAgICAgICAgY1ZpZXcgPSBjVmlldy5jaGlsZHJlbltwb3MuaV07XG4gICAgICAgICAgICBmaXgoaSA+PSAwID8gY29tcG9zaXRpb24ubWFya3NbaV0ubm9kZSA6IGNvbXBvc2l0aW9uLnRleHQsIGNWaWV3KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTeW5jIHRoZSBET00gc2VsZWN0aW9uIHRvIHRoaXMuc3RhdGUuc2VsZWN0aW9uXG4gICAgdXBkYXRlU2VsZWN0aW9uKG11c3RSZWFkID0gZmFsc2UsIGZyb21Qb2ludGVyID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKG11c3RSZWFkIHx8ICF0aGlzLnZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2UuZm9jdXNOb2RlKVxuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLnJlYWRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBsZXQgYWN0aXZlRWx0ID0gdGhpcy52aWV3LnJvb3QuYWN0aXZlRWxlbWVudCwgZm9jdXNlZCA9IGFjdGl2ZUVsdCA9PSB0aGlzLmRvbTtcbiAgICAgICAgbGV0IHNlbGVjdGlvbk5vdEZvY3VzID0gIWZvY3VzZWQgJiYgISh0aGlzLnZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpIHx8IHRoaXMuZG9tLnRhYkluZGV4ID4gLTEpICYmXG4gICAgICAgICAgICBoYXNTZWxlY3Rpb24odGhpcy5kb20sIHRoaXMudmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZSkgJiYgIShhY3RpdmVFbHQgJiYgdGhpcy5kb20uY29udGFpbnMoYWN0aXZlRWx0KSk7XG4gICAgICAgIGlmICghKGZvY3VzZWQgfHwgZnJvbVBvaW50ZXIgfHwgc2VsZWN0aW9uTm90Rm9jdXMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZm9yY2UgPSB0aGlzLmZvcmNlU2VsZWN0aW9uO1xuICAgICAgICB0aGlzLmZvcmNlU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIGxldCBtYWluID0gdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICBsZXQgYW5jaG9yID0gdGhpcy5tb3ZlVG9MaW5lKHRoaXMuZG9tQXRQb3MobWFpbi5hbmNob3IpKTtcbiAgICAgICAgbGV0IGhlYWQgPSBtYWluLmVtcHR5ID8gYW5jaG9yIDogdGhpcy5tb3ZlVG9MaW5lKHRoaXMuZG9tQXRQb3MobWFpbi5oZWFkKSk7XG4gICAgICAgIC8vIEFsd2F5cyByZXNldCBvbiBGaXJlZm94IHdoZW4gbmV4dCB0byBhbiB1bmVkaXRhYmxlIG5vZGUgdG9cbiAgICAgICAgLy8gYXZvaWQgaW52aXNpYmxlIGN1cnNvciBidWdzICgjMTExKVxuICAgICAgICBpZiAoYnJvd3Nlci5nZWNrbyAmJiBtYWluLmVtcHR5ICYmICF0aGlzLmhhc0NvbXBvc2l0aW9uICYmIGJldHdlZW5VbmVkaXRhYmxlKGFuY2hvcikpIHtcbiAgICAgICAgICAgIGxldCBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLmlnbm9yZSgoKSA9PiBhbmNob3Iubm9kZS5pbnNlcnRCZWZvcmUoZHVtbXksIGFuY2hvci5ub2RlLmNoaWxkTm9kZXNbYW5jaG9yLm9mZnNldF0gfHwgbnVsbCkpO1xuICAgICAgICAgICAgYW5jaG9yID0gaGVhZCA9IG5ldyBET01Qb3MoZHVtbXksIDApO1xuICAgICAgICAgICAgZm9yY2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb21TZWwgPSB0aGlzLnZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIC8vIElmIHRoZSBzZWxlY3Rpb24gaXMgYWxyZWFkeSBoZXJlLCBvciBpbiBhbiBlcXVpdmFsZW50IHBvc2l0aW9uLCBkb24ndCB0b3VjaCBpdFxuICAgICAgICBpZiAoZm9yY2UgfHwgIWRvbVNlbC5mb2N1c05vZGUgfHwgKCFpc0VxdWl2YWxlbnRQb3NpdGlvbihhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCwgZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpIHx8XG4gICAgICAgICAgICAhaXNFcXVpdmFsZW50UG9zaXRpb24oaGVhZC5ub2RlLCBoZWFkLm9mZnNldCwgZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0KSkgJiYgIXRoaXMuc3VwcHJlc3NXaWRnZXRDdXJzb3JDaGFuZ2UoZG9tU2VsLCBtYWluKSkge1xuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLmlnbm9yZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hyb21lIEFuZHJvaWQgd2lsbCBoaWRlIHRoZSB2aXJ0dWFsIGtleWJvYXJkIHdoZW4gdGFwcGluZ1xuICAgICAgICAgICAgICAgIC8vIGluc2lkZSBhbiB1bmVkaXRhYmxlIG5vZGUsIGFuZCBub3QgYnJpbmcgaXQgYmFjayB3aGVuIHdlXG4gICAgICAgICAgICAgICAgLy8gbW92ZSB0aGUgY3Vyc29yIHRvIGl0cyBwcm9wZXIgcG9zaXRpb24uIFRoaXMgdHJpZXMgdG9cbiAgICAgICAgICAgICAgICAvLyByZXN0b3JlIHRoZSBrZXlib2FyZCBieSBjeWNsaW5nIGZvY3VzLlxuICAgICAgICAgICAgICAgIGlmIChicm93c2VyLmFuZHJvaWQgJiYgYnJvd3Nlci5jaHJvbWUgJiYgdGhpcy5kb20uY29udGFpbnMoZG9tU2VsLmZvY3VzTm9kZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5VbmVkaXRhYmxlKGRvbVNlbC5mb2N1c05vZGUsIHRoaXMuZG9tKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJhd1NlbCA9IGdldFNlbGVjdGlvbih0aGlzLnZpZXcucm9vdCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyYXdTZWwpIDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtYWluLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MTIwNzZcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0VG8gPSBuZXh0VG9VbmVkaXRhYmxlKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0VG8gJiYgbmV4dFRvICE9ICgxIC8qIE5leHRUby5CZWZvcmUgKi8gfCAyIC8qIE5leHRUby5BZnRlciAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IChuZXh0VG8gPT0gMSAvKiBOZXh0VG8uQmVmb3JlICovID8gdGV4dE5vZGVCZWZvcmUgOiB0ZXh0Tm9kZUFmdGVyKShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IG5ldyBET01Qb3ModGV4dC5ub2RlLCB0ZXh0Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmF3U2VsLmNvbGxhcHNlKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haW4uYmlkaUxldmVsICE9IG51bGwgJiYgcmF3U2VsLmNhcmV0QmlkaUxldmVsICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdTZWwuY2FyZXRCaWRpTGV2ZWwgPSBtYWluLmJpZGlMZXZlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3U2VsLmV4dGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3Rpb24uZXh0ZW5kIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBhbiAnaW52ZXJ0ZWQnIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAob25lIHdoZXJlIHRoZSBmb2N1cyBpcyBiZWZvcmUgdGhlIGFuY2hvciksIGJ1dCBub3QgYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb3dzZXJzIHN1cHBvcnQgaXQgeWV0LlxuICAgICAgICAgICAgICAgICAgICByYXdTZWwuY29sbGFwc2UoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgd2lsbCBpZ25vcmUgdGhlIGNhbGwgYWJvdmUgd2hlbiB0aGUgZWRpdG9yIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiwgYW5kIHRoZW4gcmFpc2UgYW4gZXJyb3Igb24gdGhlIGNhbGwgdG8gZXh0ZW5kXG4gICAgICAgICAgICAgICAgICAgIC8vICgjOTQwKS5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd1NlbC5leHRlbmQoaGVhZC5ub2RlLCBoZWFkLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJpbWl0aXZlIChJRSkgd2F5XG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYWluLmFuY2hvciA+IG1haW4uaGVhZClcbiAgICAgICAgICAgICAgICAgICAgICAgIFthbmNob3IsIGhlYWRdID0gW2hlYWQsIGFuY2hvcl07XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICByYXdTZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25Ob3RGb2N1cyAmJiB0aGlzLnZpZXcucm9vdC5hY3RpdmVFbGVtZW50ID09IHRoaXMuZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUVsdClcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsdC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLnNldFNlbGVjdGlvblJhbmdlKGFuY2hvciwgaGVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbXByZWNpc2VBbmNob3IgPSBhbmNob3IucHJlY2lzZSA/IG51bGwgOiBuZXcgRE9NUG9zKGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5pbXByZWNpc2VIZWFkID0gaGVhZC5wcmVjaXNlID8gbnVsbCA6IG5ldyBET01Qb3MoZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0KTtcbiAgICB9XG4gICAgLy8gSWYgYSB6ZXJvLWxlbmd0aCB3aWRnZXQgaXMgaW5zZXJ0ZWQgbmV4dCB0byB0aGUgY3Vyc29yIGR1cmluZ1xuICAgIC8vIGNvbXBvc2l0aW9uLCBhdm9pZCBtb3ZpbmcgaXQgYWNyb3NzIGl0IGFuZCBkaXNydXB0aW5nIHRoZVxuICAgIC8vIGNvbXBvc2l0aW9uLlxuICAgIHN1cHByZXNzV2lkZ2V0Q3Vyc29yQ2hhbmdlKHNlbCwgY3Vyc29yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0NvbXBvc2l0aW9uICYmIGN1cnNvci5lbXB0eSAmJlxuICAgICAgICAgICAgaXNFcXVpdmFsZW50UG9zaXRpb24oc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0LCBzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCkgJiZcbiAgICAgICAgICAgIHRoaXMucG9zRnJvbURPTShzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpID09IGN1cnNvci5oZWFkO1xuICAgIH1cbiAgICBlbmZvcmNlQ3Vyc29yQXNzb2MoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0NvbXBvc2l0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzLCBjdXJzb3IgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICBsZXQgc2VsID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgICAgIGxldCB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCB9ID0gdmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZTtcbiAgICAgICAgaWYgKCFzZWwgfHwgIWN1cnNvci5lbXB0eSB8fCAhY3Vyc29yLmFzc29jIHx8ICFzZWwubW9kaWZ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgbGluZSA9IExpbmVWaWV3LmZpbmQodGhpcywgY3Vyc29yLmhlYWQpO1xuICAgICAgICBpZiAoIWxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBsaW5lU3RhcnQgPSBsaW5lLnBvc0F0U3RhcnQ7XG4gICAgICAgIGlmIChjdXJzb3IuaGVhZCA9PSBsaW5lU3RhcnQgfHwgY3Vyc29yLmhlYWQgPT0gbGluZVN0YXJ0ICsgbGluZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBiZWZvcmUgPSB0aGlzLmNvb3Jkc0F0KGN1cnNvci5oZWFkLCAtMSksIGFmdGVyID0gdGhpcy5jb29yZHNBdChjdXJzb3IuaGVhZCwgMSk7XG4gICAgICAgIGlmICghYmVmb3JlIHx8ICFhZnRlciB8fCBiZWZvcmUuYm90dG9tID4gYWZ0ZXIudG9wKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZG9tID0gdGhpcy5kb21BdFBvcyhjdXJzb3IuaGVhZCArIGN1cnNvci5hc3NvYyk7XG4gICAgICAgIHNlbC5jb2xsYXBzZShkb20ubm9kZSwgZG9tLm9mZnNldCk7XG4gICAgICAgIHNlbC5tb2RpZnkoXCJtb3ZlXCIsIGN1cnNvci5hc3NvYyA8IDAgPyBcImZvcndhcmRcIiA6IFwiYmFja3dhcmRcIiwgXCJsaW5lYm91bmRhcnlcIik7XG4gICAgICAgIC8vIFRoaXMgY2FuIGdvIHdyb25nIGluIGNvcm5lciBjYXNlcyBsaWtlIHNpbmdsZS1jaGFyYWN0ZXIgbGluZXMsXG4gICAgICAgIC8vIHNvIGNoZWNrIGFuZCByZXNldCBpZiBuZWNlc3NhcnkuXG4gICAgICAgIHZpZXcub2JzZXJ2ZXIucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCBuZXdSYW5nZSA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIGlmICh2aWV3LmRvY1ZpZXcucG9zRnJvbURPTShuZXdSYW5nZS5hbmNob3JOb2RlLCBuZXdSYW5nZS5hbmNob3JPZmZzZXQpICE9IGN1cnNvci5mcm9tKVxuICAgICAgICAgICAgc2VsLmNvbGxhcHNlKGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gICAgfVxuICAgIC8vIElmIGEgcG9zaXRpb24gaXMgaW4vbmVhciBhIGJsb2NrIHdpZGdldCwgbW92ZSBpdCB0byBhIG5lYXJieSB0ZXh0XG4gICAgLy8gbGluZSwgc2luY2Ugd2UgZG9uJ3Qgd2FudCB0aGUgY3Vyc29yIGluc2lkZSBhIGJsb2NrIHdpZGdldC5cbiAgICBtb3ZlVG9MaW5lKHBvcykge1xuICAgICAgICAvLyBCbG9jayB3aWRnZXRzIHdpbGwgcmV0dXJuIHBvc2l0aW9ucyBiZWZvcmUvYWZ0ZXIgdGhlbSwgd2hpY2hcbiAgICAgICAgLy8gYXJlIHRodXMgZGlyZWN0bHkgaW4gdGhlIGRvY3VtZW50IERPTSBlbGVtZW50LlxuICAgICAgICBsZXQgZG9tID0gdGhpcy5kb20sIG5ld1BvcztcbiAgICAgICAgaWYgKHBvcy5ub2RlICE9IGRvbSlcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIGZvciAobGV0IGkgPSBwb3Mub2Zmc2V0OyAhbmV3UG9zICYmIGkgPCBkb20uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZpZXcgPSBDb250ZW50Vmlldy5nZXQoZG9tLmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBMaW5lVmlldylcbiAgICAgICAgICAgICAgICBuZXdQb3MgPSB2aWV3LmRvbUF0UG9zKDApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSBwb3Mub2Zmc2V0IC0gMTsgIW5ld1BvcyAmJiBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHZpZXcgPSBDb250ZW50Vmlldy5nZXQoZG9tLmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBMaW5lVmlldylcbiAgICAgICAgICAgICAgICBuZXdQb3MgPSB2aWV3LmRvbUF0UG9zKHZpZXcubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3UG9zID8gbmV3IERPTVBvcyhuZXdQb3Mubm9kZSwgbmV3UG9zLm9mZnNldCwgdHJ1ZSkgOiBwb3M7XG4gICAgfVxuICAgIG5lYXJlc3QoZG9tKSB7XG4gICAgICAgIGZvciAobGV0IGN1ciA9IGRvbTsgY3VyOykge1xuICAgICAgICAgICAgbGV0IGRvbVZpZXcgPSBDb250ZW50Vmlldy5nZXQoY3VyKTtcbiAgICAgICAgICAgIGlmIChkb21WaWV3ICYmIGRvbVZpZXcucm9vdFZpZXcgPT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tVmlldztcbiAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwb3NGcm9tRE9NKG5vZGUsIG9mZnNldCkge1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmVhcmVzdChub2RlKTtcbiAgICAgICAgaWYgKCF2aWV3KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gZmluZCBwb3NpdGlvbiBmb3IgYSBET00gcG9zaXRpb24gb3V0c2lkZSBvZiB0aGUgZG9jdW1lbnRcIik7XG4gICAgICAgIHJldHVybiB2aWV3LmxvY2FsUG9zRnJvbURPTShub2RlLCBvZmZzZXQpICsgdmlldy5wb3NBdFN0YXJ0O1xuICAgIH1cbiAgICBkb21BdFBvcyhwb3MpIHtcbiAgICAgICAgbGV0IHsgaSwgb2ZmIH0gPSB0aGlzLmNoaWxkQ3Vyc29yKCkuZmluZFBvcyhwb3MsIC0xKTtcbiAgICAgICAgZm9yICg7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7KSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKG9mZiA8IGNoaWxkLmxlbmd0aCB8fCBjaGlsZCBpbnN0YW5jZW9mIExpbmVWaWV3KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgb2ZmID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpXS5kb21BdFBvcyhvZmYpO1xuICAgIH1cbiAgICBjb29yZHNBdChwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IGJlc3QgPSBudWxsLCBiZXN0UG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgb2ZmID0gdGhpcy5sZW5ndGgsIGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBvZmYgLSBjaGlsZC5icmVha0FmdGVyLCBzdGFydCA9IGVuZCAtIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPCBwb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPD0gcG9zICYmIChzdGFydCA8IHBvcyB8fCBjaGlsZC5jb3ZlcnMoLTEpKSAmJiAoZW5kID4gcG9zIHx8IGNoaWxkLmNvdmVycygxKSkgJiZcbiAgICAgICAgICAgICAgICAoIWJlc3QgfHwgY2hpbGQgaW5zdGFuY2VvZiBMaW5lVmlldyAmJiAhKGJlc3QgaW5zdGFuY2VvZiBMaW5lVmlldyAmJiBzaWRlID49IDApKSkge1xuICAgICAgICAgICAgICAgIGJlc3QgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICBiZXN0UG9zID0gc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiZXN0ICYmIHN0YXJ0ID09IHBvcyAmJiBlbmQgPT0gcG9zICYmIGNoaWxkIGluc3RhbmNlb2YgQmxvY2tXaWRnZXRWaWV3ICYmIE1hdGguYWJzKHNpZGUpIDwgMikge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5kZWNvLnN0YXJ0U2lkZSA8IDApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkpXG4gICAgICAgICAgICAgICAgICAgIGJlc3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2ZmID0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJlc3QgPyBiZXN0LmNvb3Jkc0F0KHBvcyAtIGJlc3RQb3MsIHNpZGUpIDogbnVsbDtcbiAgICB9XG4gICAgY29vcmRzRm9yQ2hhcihwb3MpIHtcbiAgICAgICAgbGV0IHsgaSwgb2ZmIH0gPSB0aGlzLmNoaWxkUG9zKHBvcywgMSksIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBMaW5lVmlldykpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgd2hpbGUgKGNoaWxkLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgaSwgb2ZmOiBjaGlsZE9mZiB9ID0gY2hpbGQuY2hpbGRQb3Mob2ZmLCAxKTtcbiAgICAgICAgICAgIGZvciAoOzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gY2hpbGQuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoKGNoaWxkID0gY2hpbGQuY2hpbGRyZW5baV0pLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmYgPSBjaGlsZE9mZjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIFRleHRWaWV3KSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgZW5kID0gZmluZENsdXN0ZXJCcmVhayhjaGlsZC50ZXh0LCBvZmYpO1xuICAgICAgICBpZiAoZW5kID09IG9mZilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgcmVjdHMgPSB0ZXh0UmFuZ2UoY2hpbGQuZG9tLCBvZmYsIGVuZCkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgICAgIGlmIChpID09IHJlY3RzLmxlbmd0aCAtIDEgfHwgcmVjdC50b3AgPCByZWN0LmJvdHRvbSAmJiByZWN0LmxlZnQgPCByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzKHZpZXdwb3J0KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgeyBmcm9tLCB0byB9ID0gdmlld3BvcnQ7XG4gICAgICAgIGxldCBjb250ZW50V2lkdGggPSB0aGlzLnZpZXcuY29udGVudERPTS5jbGllbnRXaWR0aDtcbiAgICAgICAgbGV0IGlzV2lkZXIgPSBjb250ZW50V2lkdGggPiBNYXRoLm1heCh0aGlzLnZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoLCB0aGlzLm1pbldpZHRoKSArIDE7XG4gICAgICAgIGxldCB3aWRlc3QgPSAtMSwgbHRyID0gdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZW5kID4gdG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAocG9zID49IGZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRSZWN0ID0gY2hpbGQuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoaWxkUmVjdC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1dpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXN0ID0gY2hpbGQuZG9tLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3RzID0gbGFzdCA/IGNsaWVudFJlY3RzRm9yKGxhc3QpIDogW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWN0ID0gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBsdHIgPyByZWN0LnJpZ2h0IC0gY2hpbGRSZWN0LmxlZnQgOiBjaGlsZFJlY3QucmlnaHQgLSByZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiB3aWRlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRlc3QgPSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoID0gY29udGVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhGcm9tID0gcG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhUbyA9IGVuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGVuZCArIGNoaWxkLmJyZWFrQWZ0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdGV4dERpcmVjdGlvbkF0KHBvcykge1xuICAgICAgICBsZXQgeyBpIH0gPSB0aGlzLmNoaWxkUG9zKHBvcywgMSk7XG4gICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY2hpbGRyZW5baV0uZG9tKS5kaXJlY3Rpb24gPT0gXCJydGxcIiA/IERpcmVjdGlvbi5SVEwgOiBEaXJlY3Rpb24uTFRSO1xuICAgIH1cbiAgICBtZWFzdXJlVGV4dFNpemUoKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIExpbmVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1lYXN1cmUgPSBjaGlsZC5tZWFzdXJlVGV4dFNpemUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVhc3VyZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lYXN1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm8gd29ya2FibGUgbGluZSBleGlzdHMsIGZvcmNlIGEgbGF5b3V0IG9mIGEgbWVhc3VyYWJsZSBlbGVtZW50XG4gICAgICAgIGxldCBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIGxpbmVIZWlnaHQsIGNoYXJXaWR0aCwgdGV4dEhlaWdodDtcbiAgICAgICAgZHVtbXkuY2xhc3NOYW1lID0gXCJjbS1saW5lXCI7XG4gICAgICAgIGR1bW15LnN0eWxlLndpZHRoID0gXCI5OTk5OXB4XCI7XG4gICAgICAgIGR1bW15LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBkdW1teS50ZXh0Q29udGVudCA9IFwiYWJjIGRlZiBnaGkgamtsIG1ubyBwcXIgc3R1XCI7XG4gICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQoZHVtbXkpO1xuICAgICAgICAgICAgbGV0IHJlY3QgPSBjbGllbnRSZWN0c0ZvcihkdW1teS5maXJzdENoaWxkKVswXTtcbiAgICAgICAgICAgIGxpbmVIZWlnaHQgPSBkdW1teS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICBjaGFyV2lkdGggPSByZWN0ID8gcmVjdC53aWR0aCAvIDI3IDogNztcbiAgICAgICAgICAgIHRleHRIZWlnaHQgPSByZWN0ID8gcmVjdC5oZWlnaHQgOiBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgZHVtbXkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIHRleHRIZWlnaHQgfTtcbiAgICB9XG4gICAgY2hpbGRDdXJzb3IocG9zID0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gTW92ZSBiYWNrIHRvIHN0YXJ0IG9mIGxhc3QgZWxlbWVudCB3aGVuIHBvc3NpYmxlLCBzbyB0aGF0XG4gICAgICAgIC8vIGBDaGlsZEN1cnNvci5maW5kUG9zYCBkb2Vzbid0IGhhdmUgdG8gZGVhbCB3aXRoIHRoZSBlZGdlIGNhc2VcbiAgICAgICAgLy8gb2YgYmVpbmcgYWZ0ZXIgdGhlIGxhc3QgZWxlbWVudC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICBwb3MgLT0gdGhpcy5jaGlsZHJlblstLWldLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGlsZEN1cnNvcih0aGlzLmNoaWxkcmVuLCBwb3MsIGkpO1xuICAgIH1cbiAgICBjb21wdXRlQmxvY2tHYXBEZWNvKCkge1xuICAgICAgICBsZXQgZGVjbyA9IFtdLCB2cyA9IHRoaXMudmlldy52aWV3U3RhdGU7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IDAsIGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGkgPT0gdnMudmlld3BvcnRzLmxlbmd0aCA/IG51bGwgOiB2cy52aWV3cG9ydHNbaV07XG4gICAgICAgICAgICBsZXQgZW5kID0gbmV4dCA/IG5leHQuZnJvbSAtIDEgOiB0aGlzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlbmQgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gKHZzLmxpbmVCbG9ja0F0KGVuZCkuYm90dG9tIC0gdnMubGluZUJsb2NrQXQocG9zKS50b3ApIC8gdGhpcy52aWV3LnNjYWxlWTtcbiAgICAgICAgICAgICAgICBkZWNvLnB1c2goRGVjb3JhdGlvbi5yZXBsYWNlKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgQmxvY2tHYXBXaWRnZXQoaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgYmxvY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNCbG9ja0dhcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KS5yYW5nZShwb3MsIGVuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFuZXh0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcG9zID0gbmV4dC50byArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY28pO1xuICAgIH1cbiAgICB1cGRhdGVEZWNvKCkge1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGxldCBhbGxEZWNvID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5tYXAoZCA9PiB7XG4gICAgICAgICAgICBsZXQgZHluYW1pYyA9IHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IHR5cGVvZiBkID09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgICAgIHJldHVybiBkeW5hbWljID8gZCh0aGlzLnZpZXcpIDogZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBkeW5hbWljT3V0ZXIgPSBmYWxzZSwgb3V0ZXJEZWNvID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KG91dGVyRGVjb3JhdGlvbnMpLm1hcCgoZCwgaSkgPT4ge1xuICAgICAgICAgICAgbGV0IGR5bmFtaWMgPSB0eXBlb2YgZCA9PSBcImZ1bmN0aW9uXCI7XG4gICAgICAgICAgICBpZiAoZHluYW1pYylcbiAgICAgICAgICAgICAgICBkeW5hbWljT3V0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWMgPyBkKHRoaXMudmlldykgOiBkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG91dGVyRGVjby5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IGR5bmFtaWNPdXRlcjtcbiAgICAgICAgICAgIGFsbERlY28ucHVzaChSYW5nZVNldC5qb2luKG91dGVyRGVjbykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBbXG4gICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0Rm9ybWF0dGluZyxcbiAgICAgICAgICAgIC4uLmFsbERlY28sXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVCbG9ja0dhcERlY28oKSxcbiAgICAgICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUubGluZUdhcERlY29cbiAgICAgICAgXTtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmRlY29yYXRpb25zLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXBbaSsrXSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvcmF0aW9ucztcbiAgICB9XG4gICAgc2Nyb2xsSW50b1ZpZXcodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQuaXNTbmFwc2hvdCkge1xuICAgICAgICAgICAgbGV0IHJlZiA9IHRoaXMudmlldy52aWV3U3RhdGUubGluZUJsb2NrQXQodGFyZ2V0LnJhbmdlLmhlYWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgPSByZWYudG9wIC0gdGFyZ2V0LnlNYXJnaW47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgPSB0YXJnZXQueE1hcmdpbjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBoYW5kbGVyIG9mIHRoaXMudmlldy5zdGF0ZS5mYWNldChzY3JvbGxIYW5kbGVyKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcih0aGlzLnZpZXcsIHRhcmdldC5yYW5nZSwgdGFyZ2V0KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGUsIFwic2Nyb2xsIGhhbmRsZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgcmFuZ2UgfSA9IHRhcmdldDtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmhlYWQsIHJhbmdlLmVtcHR5ID8gcmFuZ2UuYXNzb2MgOiByYW5nZS5oZWFkID4gcmFuZ2UuYW5jaG9yID8gLTEgOiAxKSwgb3RoZXI7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSAmJiAob3RoZXIgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmFuY2hvciwgcmFuZ2UuYW5jaG9yID4gcmFuZ2UuaGVhZCA/IC0xIDogMSkpKVxuICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogTWF0aC5taW4ocmVjdC5sZWZ0LCBvdGhlci5sZWZ0KSwgdG9wOiBNYXRoLm1pbihyZWN0LnRvcCwgb3RoZXIudG9wKSxcbiAgICAgICAgICAgICAgICByaWdodDogTWF0aC5tYXgocmVjdC5yaWdodCwgb3RoZXIucmlnaHQpLCBib3R0b206IE1hdGgubWF4KHJlY3QuYm90dG9tLCBvdGhlci5ib3R0b20pIH07XG4gICAgICAgIGxldCBtYXJnaW5zID0gZ2V0U2Nyb2xsTWFyZ2lucyh0aGlzLnZpZXcpO1xuICAgICAgICBsZXQgdGFyZ2V0UmVjdCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCAtIG1hcmdpbnMubGVmdCwgdG9wOiByZWN0LnRvcCAtIG1hcmdpbnMudG9wLFxuICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQgKyBtYXJnaW5zLnJpZ2h0LCBib3R0b206IHJlY3QuYm90dG9tICsgbWFyZ2lucy5ib3R0b21cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHsgb2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCB9ID0gdGhpcy52aWV3LnNjcm9sbERPTTtcbiAgICAgICAgc2Nyb2xsUmVjdEludG9WaWV3KHRoaXMudmlldy5zY3JvbGxET00sIHRhcmdldFJlY3QsIHJhbmdlLmhlYWQgPCByYW5nZS5hbmNob3IgPyAtMSA6IDEsIHRhcmdldC54LCB0YXJnZXQueSwgTWF0aC5tYXgoTWF0aC5taW4odGFyZ2V0LnhNYXJnaW4sIG9mZnNldFdpZHRoKSwgLW9mZnNldFdpZHRoKSwgTWF0aC5tYXgoTWF0aC5taW4odGFyZ2V0LnlNYXJnaW4sIG9mZnNldEhlaWdodCksIC1vZmZzZXRIZWlnaHQpLCB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSKTtcbiAgICB9XG59XG5mdW5jdGlvbiBiZXR3ZWVuVW5lZGl0YWJsZShwb3MpIHtcbiAgICByZXR1cm4gcG9zLm5vZGUubm9kZVR5cGUgPT0gMSAmJiBwb3Mubm9kZS5maXJzdENoaWxkICYmXG4gICAgICAgIChwb3Mub2Zmc2V0ID09IDAgfHwgcG9zLm5vZGUuY2hpbGROb2Rlc1twb3Mub2Zmc2V0IC0gMV0uY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIikgJiZcbiAgICAgICAgKHBvcy5vZmZzZXQgPT0gcG9zLm5vZGUuY2hpbGROb2Rlcy5sZW5ndGggfHwgcG9zLm5vZGUuY2hpbGROb2Rlc1twb3Mub2Zmc2V0XS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKTtcbn1cbmZ1bmN0aW9uIGZpbmRDb21wb3NpdGlvbk5vZGUodmlldywgaGVhZFBvcykge1xuICAgIGxldCBzZWwgPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmICghc2VsLmZvY3VzTm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHRleHRCZWZvcmUgPSB0ZXh0Tm9kZUJlZm9yZShzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpO1xuICAgIGxldCB0ZXh0QWZ0ZXIgPSB0ZXh0Tm9kZUFmdGVyKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgbGV0IHRleHROb2RlID0gdGV4dEJlZm9yZSB8fCB0ZXh0QWZ0ZXI7XG4gICAgaWYgKHRleHRBZnRlciAmJiB0ZXh0QmVmb3JlICYmIHRleHRBZnRlci5ub2RlICE9IHRleHRCZWZvcmUubm9kZSkge1xuICAgICAgICBsZXQgZGVzY0FmdGVyID0gQ29udGVudFZpZXcuZ2V0KHRleHRBZnRlci5ub2RlKTtcbiAgICAgICAgaWYgKCFkZXNjQWZ0ZXIgfHwgZGVzY0FmdGVyIGluc3RhbmNlb2YgVGV4dFZpZXcgJiYgZGVzY0FmdGVyLnRleHQgIT0gdGV4dEFmdGVyLm5vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICB0ZXh0Tm9kZSA9IHRleHRBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2aWV3LmRvY1ZpZXcubGFzdENvbXBvc2l0aW9uQWZ0ZXJDdXJzb3IpIHtcbiAgICAgICAgICAgIGxldCBkZXNjQmVmb3JlID0gQ29udGVudFZpZXcuZ2V0KHRleHRCZWZvcmUubm9kZSk7XG4gICAgICAgICAgICBpZiAoISghZGVzY0JlZm9yZSB8fCBkZXNjQmVmb3JlIGluc3RhbmNlb2YgVGV4dFZpZXcgJiYgZGVzY0JlZm9yZS50ZXh0ICE9IHRleHRCZWZvcmUubm9kZS5ub2RlVmFsdWUpKVxuICAgICAgICAgICAgICAgIHRleHROb2RlID0gdGV4dEFmdGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpZXcuZG9jVmlldy5sYXN0Q29tcG9zaXRpb25BZnRlckN1cnNvciA9IHRleHROb2RlICE9IHRleHRCZWZvcmU7XG4gICAgaWYgKCF0ZXh0Tm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZyb20gPSBoZWFkUG9zIC0gdGV4dE5vZGUub2Zmc2V0O1xuICAgIHJldHVybiB7IGZyb20sIHRvOiBmcm9tICsgdGV4dE5vZGUubm9kZS5ub2RlVmFsdWUubGVuZ3RoLCBub2RlOiB0ZXh0Tm9kZS5ub2RlIH07XG59XG5mdW5jdGlvbiBmaW5kQ29tcG9zaXRpb25SYW5nZSh2aWV3LCBjaGFuZ2VzLCBoZWFkUG9zKSB7XG4gICAgbGV0IGZvdW5kID0gZmluZENvbXBvc2l0aW9uTm9kZSh2aWV3LCBoZWFkUG9zKTtcbiAgICBpZiAoIWZvdW5kKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgeyBub2RlOiB0ZXh0Tm9kZSwgZnJvbSwgdG8gfSA9IGZvdW5kLCB0ZXh0ID0gdGV4dE5vZGUubm9kZVZhbHVlO1xuICAgIC8vIERvbid0IHRyeSB0byBwcmVzZXJ2ZSBtdWx0aS1saW5lIGNvbXBvc2l0aW9uc1xuICAgIGlmICgvW1xcblxccl0vLnRlc3QodGV4dCkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICh2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmb3VuZC5mcm9tLCBmb3VuZC50bykgIT0gdGV4dClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGludiA9IGNoYW5nZXMuaW52ZXJ0ZWREZXNjO1xuICAgIGxldCByYW5nZSA9IG5ldyBDaGFuZ2VkUmFuZ2UoaW52Lm1hcFBvcyhmcm9tKSwgaW52Lm1hcFBvcyh0byksIGZyb20sIHRvKTtcbiAgICBsZXQgbWFya3MgPSBbXTtcbiAgICBmb3IgKGxldCBwYXJlbnQgPSB0ZXh0Tm9kZS5wYXJlbnROb2RlOzsgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgbGV0IHBhcmVudFZpZXcgPSBDb250ZW50Vmlldy5nZXQocGFyZW50KTtcbiAgICAgICAgaWYgKHBhcmVudFZpZXcgaW5zdGFuY2VvZiBNYXJrVmlldylcbiAgICAgICAgICAgIG1hcmtzLnB1c2goeyBub2RlOiBwYXJlbnQsIGRlY286IHBhcmVudFZpZXcubWFyayB9KTtcbiAgICAgICAgZWxzZSBpZiAocGFyZW50VmlldyBpbnN0YW5jZW9mIExpbmVWaWV3IHx8IHBhcmVudC5ub2RlTmFtZSA9PSBcIkRJVlwiICYmIHBhcmVudC5wYXJlbnROb2RlID09IHZpZXcuY29udGVudERPTSlcbiAgICAgICAgICAgIHJldHVybiB7IHJhbmdlLCB0ZXh0OiB0ZXh0Tm9kZSwgbWFya3MsIGxpbmU6IHBhcmVudCB9O1xuICAgICAgICBlbHNlIGlmIChwYXJlbnQgIT0gdmlldy5jb250ZW50RE9NKVxuICAgICAgICAgICAgbWFya3MucHVzaCh7IG5vZGU6IHBhcmVudCwgZGVjbzogbmV3IE1hcmtEZWNvcmF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBnZXRBdHRycyhwYXJlbnQpLFxuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lOiBwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgfSkgfSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5leHRUb1VuZWRpdGFibGUobm9kZSwgb2Zmc2V0KSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgcmV0dXJuIChvZmZzZXQgJiYgbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIgPyAxIC8qIE5leHRUby5CZWZvcmUgKi8gOiAwKSB8XG4gICAgICAgIChvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoICYmIG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIgPyAyIC8qIE5leHRUby5BZnRlciAqLyA6IDApO1xufVxubGV0IERlY29yYXRpb25Db21wYXJhdG9yJDEgPSBjbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlUmFuZ2UoZnJvbSwgdG8pIHsgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcyk7IH1cbiAgICBjb21wYXJlUG9pbnQoZnJvbSwgdG8pIHsgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcyk7IH1cbiAgICBib3VuZENoYW5nZShwb3MpIHsgYWRkUmFuZ2UocG9zLCBwb3MsIHRoaXMuY2hhbmdlcyk7IH1cbn07XG5mdW5jdGlvbiBmaW5kQ2hhbmdlZERlY28oYSwgYiwgZGlmZikge1xuICAgIGxldCBjb21wID0gbmV3IERlY29yYXRpb25Db21wYXJhdG9yJDE7XG4gICAgUmFuZ2VTZXQuY29tcGFyZShhLCBiLCBkaWZmLCBjb21wKTtcbiAgICByZXR1cm4gY29tcC5jaGFuZ2VzO1xufVxuZnVuY3Rpb24gaW5VbmVkaXRhYmxlKG5vZGUsIGluc2lkZSkge1xuICAgIGZvciAobGV0IGN1ciA9IG5vZGU7IGN1ciAmJiBjdXIgIT0gaW5zaWRlOyBjdXIgPSBjdXIuYXNzaWduZWRTbG90IHx8IGN1ci5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmIChjdXIubm9kZVR5cGUgPT0gMSAmJiBjdXIuY29udGVudEVkaXRhYmxlID09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRvdWNoZXNDb21wb3NpdGlvbihjaGFuZ2VzLCBjb21wb3NpdGlvbikge1xuICAgIGxldCB0b3VjaGVkID0gZmFsc2U7XG4gICAgaWYgKGNvbXBvc2l0aW9uKVxuICAgICAgICBjaGFuZ2VzLml0ZXJDaGFuZ2VkUmFuZ2VzKChmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgaWYgKGZyb20gPCBjb21wb3NpdGlvbi50byAmJiB0byA+IGNvbXBvc2l0aW9uLmZyb20pXG4gICAgICAgICAgICAgICAgdG91Y2hlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiB0b3VjaGVkO1xufVxuXG5mdW5jdGlvbiBncm91cEF0KHN0YXRlLCBwb3MsIGJpYXMgPSAxKSB7XG4gICAgbGV0IGNhdGVnb3JpemUgPSBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKSwgbGluZVBvcyA9IHBvcyAtIGxpbmUuZnJvbTtcbiAgICBpZiAobGluZS5sZW5ndGggPT0gMClcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zKTtcbiAgICBpZiAobGluZVBvcyA9PSAwKVxuICAgICAgICBiaWFzID0gMTtcbiAgICBlbHNlIGlmIChsaW5lUG9zID09IGxpbmUubGVuZ3RoKVxuICAgICAgICBiaWFzID0gLTE7XG4gICAgbGV0IGZyb20gPSBsaW5lUG9zLCB0byA9IGxpbmVQb3M7XG4gICAgaWYgKGJpYXMgPCAwKVxuICAgICAgICBmcm9tID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIGxpbmVQb3MsIGZhbHNlKTtcbiAgICBlbHNlXG4gICAgICAgIHRvID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIGxpbmVQb3MpO1xuICAgIGxldCBjYXQgPSBjYXRlZ29yaXplKGxpbmUudGV4dC5zbGljZShmcm9tLCB0bykpO1xuICAgIHdoaWxlIChmcm9tID4gMCkge1xuICAgICAgICBsZXQgcHJldiA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBmcm9tLCBmYWxzZSk7XG4gICAgICAgIGlmIChjYXRlZ29yaXplKGxpbmUudGV4dC5zbGljZShwcmV2LCBmcm9tKSkgIT0gY2F0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGZyb20gPSBwcmV2O1xuICAgIH1cbiAgICB3aGlsZSAodG8gPCBsaW5lLmxlbmd0aCkge1xuICAgICAgICBsZXQgbmV4dCA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCB0byk7XG4gICAgICAgIGlmIChjYXRlZ29yaXplKGxpbmUudGV4dC5zbGljZSh0bywgbmV4dCkpICE9IGNhdClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB0byA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSArIGxpbmUuZnJvbSwgdG8gKyBsaW5lLmZyb20pO1xufVxuLy8gU2VhcmNoIHRoZSBET00gZm9yIHRoZSB7bm9kZSwgb2Zmc2V0fSBwb3NpdGlvbiBjbG9zZXN0IHRvIHRoZSBnaXZlblxuLy8gY29vcmRpbmF0ZXMuIFZlcnkgaW5lZmZpY2llbnQgYW5kIGNydWRlLCBidXQgY2FuIHVzdWFsbHkgYmUgYXZvaWRlZFxuLy8gYnkgY2FsbGluZyBjYXJldChQb3NpdGlvbnxSYW5nZSlGcm9tUG9pbnQgaW5zdGVhZC5cbmZ1bmN0aW9uIGdldGR4KHgsIHJlY3QpIHtcbiAgICByZXR1cm4gcmVjdC5sZWZ0ID4geCA/IHJlY3QubGVmdCAtIHggOiBNYXRoLm1heCgwLCB4IC0gcmVjdC5yaWdodCk7XG59XG5mdW5jdGlvbiBnZXRkeSh5LCByZWN0KSB7XG4gICAgcmV0dXJuIHJlY3QudG9wID4geSA/IHJlY3QudG9wIC0geSA6IE1hdGgubWF4KDAsIHkgLSByZWN0LmJvdHRvbSk7XG59XG5mdW5jdGlvbiB5T3ZlcmxhcChhLCBiKSB7XG4gICAgcmV0dXJuIGEudG9wIDwgYi5ib3R0b20gLSAxICYmIGEuYm90dG9tID4gYi50b3AgKyAxO1xufVxuZnVuY3Rpb24gdXBUb3AocmVjdCwgdG9wKSB7XG4gICAgcmV0dXJuIHRvcCA8IHJlY3QudG9wID8geyB0b3AsIGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QucmlnaHQsIGJvdHRvbTogcmVjdC5ib3R0b20gfSA6IHJlY3Q7XG59XG5mdW5jdGlvbiB1cEJvdChyZWN0LCBib3R0b20pIHtcbiAgICByZXR1cm4gYm90dG9tID4gcmVjdC5ib3R0b20gPyB7IHRvcDogcmVjdC50b3AsIGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QucmlnaHQsIGJvdHRvbSB9IDogcmVjdDtcbn1cbmZ1bmN0aW9uIGRvbVBvc0F0Q29vcmRzKHBhcmVudCwgeCwgeSkge1xuICAgIGxldCBjbG9zZXN0LCBjbG9zZXN0UmVjdCwgY2xvc2VzdFgsIGNsb3Nlc3RZLCBjbG9zZXN0T3ZlcmxhcCA9IGZhbHNlO1xuICAgIGxldCBhYm92ZSwgYmVsb3csIGFib3ZlUmVjdCwgYmVsb3dSZWN0O1xuICAgIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGxldCByZWN0cyA9IGNsaWVudFJlY3RzRm9yKGNoaWxkKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgICAgIGlmIChjbG9zZXN0UmVjdCAmJiB5T3ZlcmxhcChjbG9zZXN0UmVjdCwgcmVjdCkpXG4gICAgICAgICAgICAgICAgcmVjdCA9IHVwVG9wKHVwQm90KHJlY3QsIGNsb3Nlc3RSZWN0LmJvdHRvbSksIGNsb3Nlc3RSZWN0LnRvcCk7XG4gICAgICAgICAgICBsZXQgZHggPSBnZXRkeCh4LCByZWN0KSwgZHkgPSBnZXRkeSh5LCByZWN0KTtcbiAgICAgICAgICAgIGlmIChkeCA9PSAwICYmIGR5ID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLm5vZGVUeXBlID09IDMgPyBkb21Qb3NJblRleHQoY2hpbGQsIHgsIHkpIDogZG9tUG9zQXRDb29yZHMoY2hpbGQsIHgsIHkpO1xuICAgICAgICAgICAgaWYgKCFjbG9zZXN0IHx8IGNsb3Nlc3RZID4gZHkgfHwgY2xvc2VzdFkgPT0gZHkgJiYgY2xvc2VzdFggPiBkeCkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3QgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UmVjdCA9IHJlY3Q7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFggPSBkeDtcbiAgICAgICAgICAgICAgICBjbG9zZXN0WSA9IGR5O1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RPdmVybGFwID0gIWR4ID8gdHJ1ZSA6IHggPCByZWN0LmxlZnQgPyBpID4gMCA6IGkgPCByZWN0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGR4ID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoeSA+IHJlY3QuYm90dG9tICYmICghYWJvdmVSZWN0IHx8IGFib3ZlUmVjdC5ib3R0b20gPCByZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvdmUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYWJvdmVSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeSA8IHJlY3QudG9wICYmICghYmVsb3dSZWN0IHx8IGJlbG93UmVjdC50b3AgPiByZWN0LnRvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVsb3cgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYmVsb3dSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhYm92ZVJlY3QgJiYgeU92ZXJsYXAoYWJvdmVSZWN0LCByZWN0KSkge1xuICAgICAgICAgICAgICAgIGFib3ZlUmVjdCA9IHVwQm90KGFib3ZlUmVjdCwgcmVjdC5ib3R0b20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYmVsb3dSZWN0ICYmIHlPdmVybGFwKGJlbG93UmVjdCwgcmVjdCkpIHtcbiAgICAgICAgICAgICAgICBiZWxvd1JlY3QgPSB1cFRvcChiZWxvd1JlY3QsIHJlY3QudG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWJvdmVSZWN0ICYmIGFib3ZlUmVjdC5ib3R0b20gPj0geSkge1xuICAgICAgICBjbG9zZXN0ID0gYWJvdmU7XG4gICAgICAgIGNsb3Nlc3RSZWN0ID0gYWJvdmVSZWN0O1xuICAgIH1cbiAgICBlbHNlIGlmIChiZWxvd1JlY3QgJiYgYmVsb3dSZWN0LnRvcCA8PSB5KSB7XG4gICAgICAgIGNsb3Nlc3QgPSBiZWxvdztcbiAgICAgICAgY2xvc2VzdFJlY3QgPSBiZWxvd1JlY3Q7XG4gICAgfVxuICAgIGlmICghY2xvc2VzdClcbiAgICAgICAgcmV0dXJuIHsgbm9kZTogcGFyZW50LCBvZmZzZXQ6IDAgfTtcbiAgICBsZXQgY2xpcFggPSBNYXRoLm1heChjbG9zZXN0UmVjdC5sZWZ0LCBNYXRoLm1pbihjbG9zZXN0UmVjdC5yaWdodCwgeCkpO1xuICAgIGlmIChjbG9zZXN0Lm5vZGVUeXBlID09IDMpXG4gICAgICAgIHJldHVybiBkb21Qb3NJblRleHQoY2xvc2VzdCwgY2xpcFgsIHkpO1xuICAgIGlmIChjbG9zZXN0T3ZlcmxhcCAmJiBjbG9zZXN0LmNvbnRlbnRFZGl0YWJsZSAhPSBcImZhbHNlXCIpXG4gICAgICAgIHJldHVybiBkb21Qb3NBdENvb3JkcyhjbG9zZXN0LCBjbGlwWCwgeSk7XG4gICAgbGV0IG9mZnNldCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwocGFyZW50LmNoaWxkTm9kZXMsIGNsb3Nlc3QpICtcbiAgICAgICAgKHggPj0gKGNsb3Nlc3RSZWN0LmxlZnQgKyBjbG9zZXN0UmVjdC5yaWdodCkgLyAyID8gMSA6IDApO1xuICAgIHJldHVybiB7IG5vZGU6IHBhcmVudCwgb2Zmc2V0IH07XG59XG5mdW5jdGlvbiBkb21Qb3NJblRleHQobm9kZSwgeCwgeSkge1xuICAgIGxldCBsZW4gPSBub2RlLm5vZGVWYWx1ZS5sZW5ndGg7XG4gICAgbGV0IGNsb3Nlc3RPZmZzZXQgPSAtMSwgY2xvc2VzdERZID0gMWU5LCBnZW5lcmFsU2lkZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBsZXQgcmVjdHMgPSB0ZXh0UmFuZ2Uobm9kZSwgaSwgaSArIDEpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVjdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCByZWN0ID0gcmVjdHNbal07XG4gICAgICAgICAgICBpZiAocmVjdC50b3AgPT0gcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIWdlbmVyYWxTaWRlKVxuICAgICAgICAgICAgICAgIGdlbmVyYWxTaWRlID0geCAtIHJlY3QubGVmdDtcbiAgICAgICAgICAgIGxldCBkeSA9IChyZWN0LnRvcCA+IHkgPyByZWN0LnRvcCAtIHkgOiB5IC0gcmVjdC5ib3R0b20pIC0gMTtcbiAgICAgICAgICAgIGlmIChyZWN0LmxlZnQgLSAxIDw9IHggJiYgcmVjdC5yaWdodCArIDEgPj0geCAmJiBkeSA8IGNsb3Nlc3REWSkge1xuICAgICAgICAgICAgICAgIGxldCByaWdodCA9IHggPj0gKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMiwgYWZ0ZXIgPSByaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlci5jaHJvbWUgfHwgYnJvd3Nlci5nZWNrbykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgUlRMIG9uIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBnZXR0aW5nIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAvLyByZWN0cyBmb3IgZW1wdHkgcmFuZ2VzLlxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdEJlZm9yZSA9IHRleHRSYW5nZShub2RlLCBpKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RCZWZvcmUubGVmdCA9PSByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSAhcmlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkeSA8PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBub2RlLCBvZmZzZXQ6IGkgKyAoYWZ0ZXIgPyAxIDogMCkgfTtcbiAgICAgICAgICAgICAgICBjbG9zZXN0T2Zmc2V0ID0gaSArIChhZnRlciA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICBjbG9zZXN0RFkgPSBkeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBub2RlLCBvZmZzZXQ6IGNsb3Nlc3RPZmZzZXQgPiAtMSA/IGNsb3Nlc3RPZmZzZXQgOiBnZW5lcmFsU2lkZSA+IDAgPyBub2RlLm5vZGVWYWx1ZS5sZW5ndGggOiAwIH07XG59XG5mdW5jdGlvbiBwb3NBdENvb3Jkcyh2aWV3LCBjb29yZHMsIHByZWNpc2UsIGJpYXMgPSAtMSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgbGV0IGNvbnRlbnQgPSB2aWV3LmNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvY1RvcCA9IGNvbnRlbnQudG9wICsgdmlldy52aWV3U3RhdGUucGFkZGluZ1RvcDtcbiAgICBsZXQgYmxvY2ssIHsgZG9jSGVpZ2h0IH0gPSB2aWV3LnZpZXdTdGF0ZTtcbiAgICBsZXQgeyB4LCB5IH0gPSBjb29yZHMsIHlPZmZzZXQgPSB5IC0gZG9jVG9wO1xuICAgIGlmICh5T2Zmc2V0IDwgMClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgaWYgKHlPZmZzZXQgPiBkb2NIZWlnaHQpXG4gICAgICAgIHJldHVybiB2aWV3LnN0YXRlLmRvYy5sZW5ndGg7XG4gICAgLy8gU2NhbiBmb3IgYSB0ZXh0IGJsb2NrIG5lYXIgdGhlIHF1ZXJpZWQgeSBwb3NpdGlvblxuICAgIGZvciAobGV0IGhhbGZMaW5lID0gdmlldy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLnRleHRIZWlnaHQgLyAyLCBib3VuY2VkID0gZmFsc2U7Oykge1xuICAgICAgICBibG9jayA9IHZpZXcuZWxlbWVudEF0SGVpZ2h0KHlPZmZzZXQpO1xuICAgICAgICBpZiAoYmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAvLyBNb3ZlIHRoZSB5IHBvc2l0aW9uIG91dCBvZiB0aGlzIGJsb2NrXG4gICAgICAgICAgICB5T2Zmc2V0ID0gYmlhcyA+IDAgPyBibG9jay5ib3R0b20gKyBoYWxmTGluZSA6IGJsb2NrLnRvcCAtIGhhbGZMaW5lO1xuICAgICAgICAgICAgaWYgKHlPZmZzZXQgPj0gMCAmJiB5T2Zmc2V0IDw9IGRvY0hlaWdodClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIElmIHRoZSBkb2N1bWVudCBjb25zaXN0cyBlbnRpcmVseSBvZiByZXBsYWNlZCB3aWRnZXRzLCB3ZVxuICAgICAgICAgICAgLy8gd29uJ3QgZmluZCBhIHRleHQgYmxvY2ssIHNvIHJldHVybiAwXG4gICAgICAgICAgICBpZiAoYm91bmNlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlY2lzZSA/IG51bGwgOiAwO1xuICAgICAgICAgICAgYm91bmNlZCA9IHRydWU7XG4gICAgICAgICAgICBiaWFzID0gLWJpYXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgeSA9IGRvY1RvcCArIHlPZmZzZXQ7XG4gICAgbGV0IGxpbmVTdGFydCA9IGJsb2NrLmZyb207XG4gICAgLy8gSWYgdGhpcyBpcyBvdXRzaWRlIG9mIHRoZSByZW5kZXJlZCB2aWV3cG9ydCwgd2UgY2FuJ3QgZGV0ZXJtaW5lIGEgcG9zaXRpb25cbiAgICBpZiAobGluZVN0YXJ0IDwgdmlldy52aWV3cG9ydC5mcm9tKVxuICAgICAgICByZXR1cm4gdmlldy52aWV3cG9ydC5mcm9tID09IDAgPyAwIDogcHJlY2lzZSA/IG51bGwgOiBwb3NBdENvb3Jkc0ltcHJlY2lzZSh2aWV3LCBjb250ZW50LCBibG9jaywgeCwgeSk7XG4gICAgaWYgKGxpbmVTdGFydCA+IHZpZXcudmlld3BvcnQudG8pXG4gICAgICAgIHJldHVybiB2aWV3LnZpZXdwb3J0LnRvID09IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCA/IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCA6XG4gICAgICAgICAgICBwcmVjaXNlID8gbnVsbCA6IHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnQsIGJsb2NrLCB4LCB5KTtcbiAgICAvLyBQcmVmZXIgU2hhZG93Um9vdE9yRG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCBpZiBwcmVzZW50LCBmYWxsIGJhY2sgdG8gZG9jdW1lbnQgaWYgbm90XG4gICAgbGV0IGRvYyA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQ7XG4gICAgbGV0IHJvb3QgPSB2aWV3LnJvb3QuZWxlbWVudEZyb21Qb2ludCA/IHZpZXcucm9vdCA6IGRvYztcbiAgICBsZXQgZWxlbWVudCA9IHJvb3QuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgICBpZiAoZWxlbWVudCAmJiAhdmlldy5jb250ZW50RE9NLmNvbnRhaW5zKGVsZW1lbnQpKVxuICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyB1bmV4cGVjdGVkLCBjbGlwIHggYXQgdGhlIHNpZGVzIG9mIHRoZSBjb250ZW50IGFyZWEgYW5kIHRyeSBhZ2FpblxuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICB4ID0gTWF0aC5tYXgoY29udGVudC5sZWZ0ICsgMSwgTWF0aC5taW4oY29udGVudC5yaWdodCAtIDEsIHgpKTtcbiAgICAgICAgZWxlbWVudCA9IHJvb3QuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIXZpZXcuY29udGVudERPTS5jb250YWlucyhlbGVtZW50KSlcbiAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICAvLyBUaGVyZSdzIHZpc2libGUgZWRpdG9yIGNvbnRlbnQgdW5kZXIgdGhlIHBvaW50LCBzbyB3ZSBjYW4gdHJ5XG4gICAgLy8gdXNpbmcgY2FyZXQoUG9zaXRpb258UmFuZ2UpRnJvbVBvaW50IGFzIGEgc2hvcnRjdXRcbiAgICBsZXQgbm9kZSwgb2Zmc2V0ID0gLTE7XG4gICAgaWYgKGVsZW1lbnQgJiYgKChfYSA9IHZpZXcuZG9jVmlldy5uZWFyZXN0KGVsZW1lbnQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNFZGl0YWJsZSkgIT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRvYy5jYXJldFBvc2l0aW9uRnJvbVBvaW50KSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gZG9jLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoeCwgeSk7XG4gICAgICAgICAgICBpZiAocG9zKVxuICAgICAgICAgICAgICAgICh7IG9mZnNldE5vZGU6IG5vZGUsIG9mZnNldCB9ID0gcG9zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb2MuY2FyZXRSYW5nZUZyb21Qb2ludCkge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gZG9jLmNhcmV0UmFuZ2VGcm9tUG9pbnQoeCwgeSk7XG4gICAgICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAoeyBzdGFydENvbnRhaW5lcjogbm9kZSwgc3RhcnRPZmZzZXQ6IG9mZnNldCB9ID0gcmFuZ2UpO1xuICAgICAgICAgICAgICAgIGlmICghdmlldy5jb250ZW50RE9NLmNvbnRhaW5zKG5vZGUpIHx8XG4gICAgICAgICAgICAgICAgICAgIGJyb3dzZXIuc2FmYXJpICYmIGlzU3VzcGljaW91c1NhZmFyaUNhcmV0UmVzdWx0KG5vZGUsIG9mZnNldCwgeCkgfHxcbiAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5jaHJvbWUgJiYgaXNTdXNwaWNpb3VzQ2hyb21lQ2FyZXRSZXN1bHQobm9kZSwgb2Zmc2V0LCB4KSlcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDaHJvbWUgd2lsbCByZXR1cm4gb2Zmc2V0cyBpbnRvIDxpbnB1dD4gZWxlbWVudHMgd2l0aG91dCBjaGlsZFxuICAgICAgICAvLyBub2Rlcywgd2hpY2ggd2lsbCBsZWFkIHRvIGEgbnVsbCBkZXJlZiBiZWxvdywgc28gY2xpcCB0aGVcbiAgICAgICAgLy8gb2Zmc2V0IHRvIHRoZSBub2RlIHNpemUuXG4gICAgICAgIGlmIChub2RlKVxuICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5taW4obWF4T2Zmc2V0KG5vZGUpLCBvZmZzZXQpO1xuICAgIH1cbiAgICAvLyBObyBsdWNrLCBkbyBvdXIgb3duIChwb3RlbnRpYWxseSBleHBlbnNpdmUpIHNlYXJjaFxuICAgIGlmICghbm9kZSB8fCAhdmlldy5kb2NWaWV3LmRvbS5jb250YWlucyhub2RlKSkge1xuICAgICAgICBsZXQgbGluZSA9IExpbmVWaWV3LmZpbmQodmlldy5kb2NWaWV3LCBsaW5lU3RhcnQpO1xuICAgICAgICBpZiAoIWxpbmUpXG4gICAgICAgICAgICByZXR1cm4geU9mZnNldCA+IGJsb2NrLnRvcCArIGJsb2NrLmhlaWdodCAvIDIgPyBibG9jay50byA6IGJsb2NrLmZyb207XG4gICAgICAgICh7IG5vZGUsIG9mZnNldCB9ID0gZG9tUG9zQXRDb29yZHMobGluZS5kb20sIHgsIHkpKTtcbiAgICB9XG4gICAgbGV0IG5lYXJlc3QgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdChub2RlKTtcbiAgICBpZiAoIW5lYXJlc3QpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmIChuZWFyZXN0LmlzV2lkZ2V0ICYmICgoX2IgPSBuZWFyZXN0LmRvbSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm5vZGVUeXBlKSA9PSAxKSB7XG4gICAgICAgIGxldCByZWN0ID0gbmVhcmVzdC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiBjb29yZHMueSA8IHJlY3QudG9wIHx8IGNvb3Jkcy55IDw9IHJlY3QuYm90dG9tICYmIGNvb3Jkcy54IDw9IChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDJcbiAgICAgICAgICAgID8gbmVhcmVzdC5wb3NBdFN0YXJ0IDogbmVhcmVzdC5wb3NBdEVuZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZWFyZXN0LmxvY2FsUG9zRnJvbURPTShub2RlLCBvZmZzZXQpICsgbmVhcmVzdC5wb3NBdFN0YXJ0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnRSZWN0LCBibG9jaywgeCwgeSkge1xuICAgIGxldCBpbnRvID0gTWF0aC5yb3VuZCgoeCAtIGNvbnRlbnRSZWN0LmxlZnQpICogdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpO1xuICAgIGlmICh2aWV3LmxpbmVXcmFwcGluZyAmJiBibG9jay5oZWlnaHQgPiB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0ICogMS41KSB7XG4gICAgICAgIGxldCB0ZXh0SGVpZ2h0ID0gdmlldy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLnRleHRIZWlnaHQ7XG4gICAgICAgIGxldCBsaW5lID0gTWF0aC5mbG9vcigoeSAtIGJsb2NrLnRvcCAtICh2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0IC0gdGV4dEhlaWdodCkgKiAwLjUpIC8gdGV4dEhlaWdodCk7XG4gICAgICAgIGludG8gKz0gbGluZSAqIHZpZXcudmlld1N0YXRlLmhlaWdodE9yYWNsZS5saW5lTGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgY29udGVudCA9IHZpZXcuc3RhdGUuc2xpY2VEb2MoYmxvY2suZnJvbSwgYmxvY2sudG8pO1xuICAgIHJldHVybiBibG9jay5mcm9tICsgZmluZENvbHVtbihjb250ZW50LCBpbnRvLCB2aWV3LnN0YXRlLnRhYlNpemUpO1xufVxuLy8gSW4gY2FzZSBvZiBhIGhpZ2ggbGluZSBoZWlnaHQsIFNhZmFyaSdzIGNhcmV0UmFuZ2VGcm9tUG9pbnQgdHJlYXRzXG4vLyB0aGUgc3BhY2UgYmV0d2VlbiBsaW5lcyBhcyBiZWxvbmdpbmcgdG8gdGhlIGxhc3QgY2hhcmFjdGVyIG9mIHRoZVxuLy8gbGluZSBiZWZvcmUuIFRoaXMgaXMgdXNlZCB0byBkZXRlY3Qgc3VjaCBhIHJlc3VsdCBzbyB0aGF0IGl0IGNhbiBiZVxuLy8gaWdub3JlZCAoaXNzdWUgIzQwMSkuXG5mdW5jdGlvbiBpc1N1c3BpY2lvdXNTYWZhcmlDYXJldFJlc3VsdChub2RlLCBvZmZzZXQsIHgpIHtcbiAgICBsZXQgbGVuLCBzY2FuID0gbm9kZTtcbiAgICBpZiAobm9kZS5ub2RlVHlwZSAhPSAzIHx8IG9mZnNldCAhPSAobGVuID0gbm9kZS5ub2RlVmFsdWUubGVuZ3RoKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoOzspIHsgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBjb250ZW50IGFmdGVyIHRoaXMgbm9kZVxuICAgICAgICBsZXQgbmV4dCA9IHNjYW4ubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICBpZiAobmV4dC5ub2RlTmFtZSA9PSBcIkJSXCIpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gc2Nhbi5wYXJlbnROb2RlO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnQgfHwgcGFyZW50Lm5vZGVOYW1lID09IFwiRElWXCIpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzY2FuID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZXh0UmFuZ2Uobm9kZSwgbGVuIC0gMSwgbGVuKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA+IHg7XG59XG4vLyBDaHJvbWUgd2lsbCBtb3ZlIHBvc2l0aW9ucyBiZXR3ZWVuIGxpbmVzIHRvIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBsaW5lXG5mdW5jdGlvbiBpc1N1c3BpY2lvdXNDaHJvbWVDYXJldFJlc3VsdChub2RlLCBvZmZzZXQsIHgpIHtcbiAgICBpZiAob2Zmc2V0ICE9IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOzspIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IGN1ci5wYXJlbnROb2RlO1xuICAgICAgICBpZiAoIXBhcmVudCB8fCBwYXJlbnQubm9kZVR5cGUgIT0gMSB8fCBwYXJlbnQuZmlyc3RDaGlsZCAhPSBjdXIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY20tbGluZVwiKSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjdXIgPSBwYXJlbnQ7XG4gICAgfVxuICAgIGxldCByZWN0ID0gbm9kZS5ub2RlVHlwZSA9PSAxID8gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICA6IHRleHRSYW5nZShub2RlLCAwLCBNYXRoLm1heChub2RlLm5vZGVWYWx1ZS5sZW5ndGgsIDEpKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4geCAtIHJlY3QubGVmdCA+IDU7XG59XG5mdW5jdGlvbiBibG9ja0F0KHZpZXcsIHBvcywgc2lkZSkge1xuICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChwb3MpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmUudHlwZSkpIHtcbiAgICAgICAgbGV0IGJlc3Q7XG4gICAgICAgIGZvciAobGV0IGwgb2YgbGluZS50eXBlKSB7XG4gICAgICAgICAgICBpZiAobC5mcm9tID4gcG9zKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKGwudG8gPCBwb3MpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobC5mcm9tIDwgcG9zICYmIGwudG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgICBpZiAoIWJlc3QgfHwgKGwudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCAmJiAoYmVzdC50eXBlICE9IGwudHlwZSB8fCAoc2lkZSA8IDAgPyBsLmZyb20gPCBwb3MgOiBsLnRvID4gcG9zKSkpKVxuICAgICAgICAgICAgICAgIGJlc3QgPSBsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0IHx8IGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBsaW5lO1xufVxuZnVuY3Rpb24gbW92ZVRvTGluZUJvdW5kYXJ5KHZpZXcsIHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCkge1xuICAgIGxldCBsaW5lID0gYmxvY2tBdCh2aWV3LCBzdGFydC5oZWFkLCBzdGFydC5hc3NvYyB8fCAtMSk7XG4gICAgbGV0IGNvb3JkcyA9ICFpbmNsdWRlV3JhcCB8fCBsaW5lLnR5cGUgIT0gQmxvY2tUeXBlLlRleHQgfHwgISh2aWV3LmxpbmVXcmFwcGluZyB8fCBsaW5lLndpZGdldExpbmVCcmVha3MpID8gbnVsbFxuICAgICAgICA6IHZpZXcuY29vcmRzQXRQb3Moc3RhcnQuYXNzb2MgPCAwICYmIHN0YXJ0LmhlYWQgPiBsaW5lLmZyb20gPyBzdGFydC5oZWFkIC0gMSA6IHN0YXJ0LmhlYWQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgICAgbGV0IGVkaXRvclJlY3QgPSB2aWV3LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHZpZXcudGV4dERpcmVjdGlvbkF0KGxpbmUuZnJvbSk7XG4gICAgICAgIGxldCBwb3MgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZm9yd2FyZCA9PSAoZGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFIpID8gZWRpdG9yUmVjdC5yaWdodCAtIDEgOiBlZGl0b3JSZWN0LmxlZnQgKyAxLFxuICAgICAgICAgICAgeTogKGNvb3Jkcy50b3AgKyBjb29yZHMuYm90dG9tKSAvIDIgfSk7XG4gICAgICAgIGlmIChwb3MgIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgZm9yd2FyZCA/IC0xIDogMSk7XG4gICAgfVxuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZvcndhcmQgPyBsaW5lLnRvIDogbGluZS5mcm9tLCBmb3J3YXJkID8gLTEgOiAxKTtcbn1cbmZ1bmN0aW9uIG1vdmVCeUNoYXIodmlldywgc3RhcnQsIGZvcndhcmQsIGJ5KSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQoc3RhcnQuaGVhZCksIHNwYW5zID0gdmlldy5iaWRpU3BhbnMobGluZSk7XG4gICAgbGV0IGRpcmVjdGlvbiA9IHZpZXcudGV4dERpcmVjdGlvbkF0KGxpbmUuZnJvbSk7XG4gICAgZm9yIChsZXQgY3VyID0gc3RhcnQsIGNoZWNrID0gbnVsbDs7KSB7XG4gICAgICAgIGxldCBuZXh0ID0gbW92ZVZpc3VhbGx5KGxpbmUsIHNwYW5zLCBkaXJlY3Rpb24sIGN1ciwgZm9yd2FyZCksIGNoYXIgPSBtb3ZlZE92ZXI7XG4gICAgICAgIGlmICghbmV4dCkge1xuICAgICAgICAgICAgaWYgKGxpbmUubnVtYmVyID09IChmb3J3YXJkID8gdmlldy5zdGF0ZS5kb2MubGluZXMgOiAxKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgICAgICAgICAgY2hhciA9IFwiXFxuXCI7XG4gICAgICAgICAgICBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZShsaW5lLm51bWJlciArIChmb3J3YXJkID8gMSA6IC0xKSk7XG4gICAgICAgICAgICBzcGFucyA9IHZpZXcuYmlkaVNwYW5zKGxpbmUpO1xuICAgICAgICAgICAgbmV4dCA9IHZpZXcudmlzdWFsTGluZVNpZGUobGluZSwgIWZvcndhcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2hlY2spIHtcbiAgICAgICAgICAgIGlmICghYnkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICBjaGVjayA9IGJ5KGNoYXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFjaGVjayhjaGFyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cjtcbiAgICAgICAgfVxuICAgICAgICBjdXIgPSBuZXh0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJ5R3JvdXAodmlldywgcG9zLCBzdGFydCkge1xuICAgIGxldCBjYXRlZ29yaXplID0gdmlldy5zdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICBsZXQgY2F0ID0gY2F0ZWdvcml6ZShzdGFydCk7XG4gICAgcmV0dXJuIChuZXh0KSA9PiB7XG4gICAgICAgIGxldCBuZXh0Q2F0ID0gY2F0ZWdvcml6ZShuZXh0KTtcbiAgICAgICAgaWYgKGNhdCA9PSBDaGFyQ2F0ZWdvcnkuU3BhY2UpXG4gICAgICAgICAgICBjYXQgPSBuZXh0Q2F0O1xuICAgICAgICByZXR1cm4gY2F0ID09IG5leHRDYXQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1vdmVWZXJ0aWNhbGx5KHZpZXcsIHN0YXJ0LCBmb3J3YXJkLCBkaXN0YW5jZSkge1xuICAgIGxldCBzdGFydFBvcyA9IHN0YXJ0LmhlYWQsIGRpciA9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgaWYgKHN0YXJ0UG9zID09IChmb3J3YXJkID8gdmlldy5zdGF0ZS5kb2MubGVuZ3RoIDogMCkpXG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHN0YXJ0UG9zLCBzdGFydC5hc3NvYyk7XG4gICAgbGV0IGdvYWwgPSBzdGFydC5nb2FsQ29sdW1uLCBzdGFydFk7XG4gICAgbGV0IHJlY3QgPSB2aWV3LmNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHN0YXJ0Q29vcmRzID0gdmlldy5jb29yZHNBdFBvcyhzdGFydFBvcywgc3RhcnQuYXNzb2MgfHwgLTEpLCBkb2NUb3AgPSB2aWV3LmRvY3VtZW50VG9wO1xuICAgIGlmIChzdGFydENvb3Jkcykge1xuICAgICAgICBpZiAoZ29hbCA9PSBudWxsKVxuICAgICAgICAgICAgZ29hbCA9IHN0YXJ0Q29vcmRzLmxlZnQgLSByZWN0LmxlZnQ7XG4gICAgICAgIHN0YXJ0WSA9IGRpciA8IDAgPyBzdGFydENvb3Jkcy50b3AgOiBzdGFydENvb3Jkcy5ib3R0b207XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcudmlld1N0YXRlLmxpbmVCbG9ja0F0KHN0YXJ0UG9zKTtcbiAgICAgICAgaWYgKGdvYWwgPT0gbnVsbClcbiAgICAgICAgICAgIGdvYWwgPSBNYXRoLm1pbihyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LCB2aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aCAqIChzdGFydFBvcyAtIGxpbmUuZnJvbSkpO1xuICAgICAgICBzdGFydFkgPSAoZGlyIDwgMCA/IGxpbmUudG9wIDogbGluZS5ib3R0b20pICsgZG9jVG9wO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZWRHb2FsID0gcmVjdC5sZWZ0ICsgZ29hbDtcbiAgICBsZXQgZGlzdCA9IGRpc3RhbmNlICE9PSBudWxsICYmIGRpc3RhbmNlICE9PSB2b2lkIDAgPyBkaXN0YW5jZSA6ICh2aWV3LnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUudGV4dEhlaWdodCA+PiAxKTtcbiAgICBmb3IgKGxldCBleHRyYSA9IDA7OyBleHRyYSArPSAxMCkge1xuICAgICAgICBsZXQgY3VyWSA9IHN0YXJ0WSArIChkaXN0ICsgZXh0cmEpICogZGlyO1xuICAgICAgICBsZXQgcG9zID0gcG9zQXRDb29yZHModmlldywgeyB4OiByZXNvbHZlZEdvYWwsIHk6IGN1clkgfSwgZmFsc2UsIGRpcik7XG4gICAgICAgIGlmIChjdXJZIDwgcmVjdC50b3AgfHwgY3VyWSA+IHJlY3QuYm90dG9tIHx8IChkaXIgPCAwID8gcG9zIDwgc3RhcnRQb3MgOiBwb3MgPiBzdGFydFBvcykpIHtcbiAgICAgICAgICAgIGxldCBjaGFyUmVjdCA9IHZpZXcuZG9jVmlldy5jb29yZHNGb3JDaGFyKHBvcyk7XG4gICAgICAgICAgICBsZXQgYXNzb2MgPSAhY2hhclJlY3QgfHwgY3VyWSA8IGNoYXJSZWN0LnRvcCA/IC0xIDogMTtcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgYXNzb2MsIHVuZGVmaW5lZCwgZ29hbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBza2lwQXRvbWljUmFuZ2VzKGF0b21zLCBwb3MsIGJpYXMpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGxldCBtb3ZlZCA9IDA7XG4gICAgICAgIGZvciAobGV0IHNldCBvZiBhdG9tcykge1xuICAgICAgICAgICAgc2V0LmJldHdlZW4ocG9zIC0gMSwgcG9zICsgMSwgKGZyb20sIHRvLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tICYmIHBvcyA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaWRlID0gbW92ZWQgfHwgYmlhcyB8fCAocG9zIC0gZnJvbSA8IHRvIC0gcG9zID8gLTEgOiAxKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gc2lkZSA8IDAgPyBmcm9tIDogdG87XG4gICAgICAgICAgICAgICAgICAgIG1vdmVkID0gc2lkZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vdmVkKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG59XG5mdW5jdGlvbiBza2lwQXRvbXModmlldywgb2xkUG9zLCBwb3MpIHtcbiAgICBsZXQgbmV3UG9zID0gc2tpcEF0b21pY1Jhbmdlcyh2aWV3LnN0YXRlLmZhY2V0KGF0b21pY1JhbmdlcykubWFwKGYgPT4gZih2aWV3KSksIHBvcy5mcm9tLCBvbGRQb3MuaGVhZCA+IHBvcy5mcm9tID8gLTEgOiAxKTtcbiAgICByZXR1cm4gbmV3UG9zID09IHBvcy5mcm9tID8gcG9zIDogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihuZXdQb3MsIG5ld1BvcyA8IHBvcy5mcm9tID8gMSA6IC0xKTtcbn1cblxuY29uc3QgTGluZUJyZWFrUGxhY2Vob2xkZXIgPSBcIlxcdWZmZmZcIjtcbmNsYXNzIERPTVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IocG9pbnRzLCBzdGF0ZSkge1xuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5saW5lU2VwYXJhdG9yID0gc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGFwcGVuZCh0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSB0ZXh0O1xuICAgIH1cbiAgICBsaW5lQnJlYWsoKSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBMaW5lQnJlYWtQbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgcmVhZFJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKCFzdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgcGFyZW50ID0gc3RhcnQucGFyZW50Tm9kZTtcbiAgICAgICAgZm9yIChsZXQgY3VyID0gc3RhcnQ7Oykge1xuICAgICAgICAgICAgdGhpcy5maW5kUG9pbnRCZWZvcmUocGFyZW50LCBjdXIpO1xuICAgICAgICAgICAgbGV0IG9sZExlbiA9IHRoaXMudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnJlYWROb2RlKGN1cik7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGN1ci5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmIChuZXh0ID09IGVuZClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCB2aWV3ID0gQ29udGVudFZpZXcuZ2V0KGN1ciksIG5leHRWaWV3ID0gQ29udGVudFZpZXcuZ2V0KG5leHQpO1xuICAgICAgICAgICAgaWYgKHZpZXcgJiYgbmV4dFZpZXcgPyB2aWV3LmJyZWFrQWZ0ZXIgOlxuICAgICAgICAgICAgICAgICh2aWV3ID8gdmlldy5icmVha0FmdGVyIDogaXNCbG9ja0VsZW1lbnQoY3VyKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzQmxvY2tFbGVtZW50KG5leHQpICYmIChjdXIubm9kZU5hbWUgIT0gXCJCUlwiIHx8IGN1ci5jbUlnbm9yZSkgJiYgdGhpcy50ZXh0Lmxlbmd0aCA+IG9sZExlbikpXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsoKTtcbiAgICAgICAgICAgIGN1ciA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maW5kUG9pbnRCZWZvcmUocGFyZW50LCBlbmQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVhZFRleHROb2RlKG5vZGUpIHtcbiAgICAgICAgbGV0IHRleHQgPSBub2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpXG4gICAgICAgICAgICBpZiAocG9pbnQubm9kZSA9PSBub2RlKVxuICAgICAgICAgICAgICAgIHBvaW50LnBvcyA9IHRoaXMudGV4dC5sZW5ndGggKyBNYXRoLm1pbihwb2ludC5vZmZzZXQsIHRleHQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgb2ZmID0gMCwgcmUgPSB0aGlzLmxpbmVTZXBhcmF0b3IgPyBudWxsIDogL1xcclxcbj98XFxuL2c7Oykge1xuICAgICAgICAgICAgbGV0IG5leHRCcmVhayA9IC0xLCBicmVha1NpemUgPSAxLCBtO1xuICAgICAgICAgICAgaWYgKHRoaXMubGluZVNlcGFyYXRvcikge1xuICAgICAgICAgICAgICAgIG5leHRCcmVhayA9IHRleHQuaW5kZXhPZih0aGlzLmxpbmVTZXBhcmF0b3IsIG9mZik7XG4gICAgICAgICAgICAgICAgYnJlYWtTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG0gPSByZS5leGVjKHRleHQpKSB7XG4gICAgICAgICAgICAgICAgbmV4dEJyZWFrID0gbS5pbmRleDtcbiAgICAgICAgICAgICAgICBicmVha1NpemUgPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXBwZW5kKHRleHQuc2xpY2Uob2ZmLCBuZXh0QnJlYWsgPCAwID8gdGV4dC5sZW5ndGggOiBuZXh0QnJlYWspKTtcbiAgICAgICAgICAgIGlmIChuZXh0QnJlYWsgPCAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdGhpcy5saW5lQnJlYWsoKTtcbiAgICAgICAgICAgIGlmIChicmVha1NpemUgPiAxKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnQubm9kZSA9PSBub2RlICYmIHBvaW50LnBvcyA+IHRoaXMudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5wb3MgLT0gYnJlYWtTaXplIC0gMTtcbiAgICAgICAgICAgIG9mZiA9IG5leHRCcmVhayArIGJyZWFrU2l6ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkTm9kZShub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmNtSWdub3JlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgdmlldyA9IENvbnRlbnRWaWV3LmdldChub2RlKTtcbiAgICAgICAgbGV0IGZyb21WaWV3ID0gdmlldyAmJiB2aWV3Lm92ZXJyaWRlRE9NVGV4dDtcbiAgICAgICAgaWYgKGZyb21WaWV3ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZFBvaW50SW5zaWRlKG5vZGUsIGZyb21WaWV3Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZnJvbVZpZXcuaXRlcigpOyAhaS5uZXh0KCkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICBpZiAoaS5saW5lQnJlYWspXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZChpLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZFRleHROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZU5hbWUgPT0gXCJCUlwiKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZylcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkUmFuZ2Uobm9kZS5maXJzdENoaWxkLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kUG9pbnRCZWZvcmUobm9kZSwgbmV4dCkge1xuICAgICAgICBmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cylcbiAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUgJiYgbm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldF0gPT0gbmV4dClcbiAgICAgICAgICAgICAgICBwb2ludC5wb3MgPSB0aGlzLnRleHQubGVuZ3RoO1xuICAgIH1cbiAgICBmaW5kUG9pbnRJbnNpZGUobm9kZSwgbGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMyA/IHBvaW50Lm5vZGUgPT0gbm9kZSA6IG5vZGUuY29udGFpbnMocG9pbnQubm9kZSkpXG4gICAgICAgICAgICAgICAgcG9pbnQucG9zID0gdGhpcy50ZXh0Lmxlbmd0aCArIChpc0F0RW5kKG5vZGUsIHBvaW50Lm5vZGUsIHBvaW50Lm9mZnNldCkgPyBsZW5ndGggOiAwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc0F0RW5kKHBhcmVudCwgbm9kZSwgb2Zmc2V0KSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAoIW5vZGUgfHwgb2Zmc2V0IDwgbWF4T2Zmc2V0KG5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSkgKyAxO1xuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbn1cbmNsYXNzIERPTVBvaW50IHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucG9zID0gLTE7XG4gICAgfVxufVxuXG5jbGFzcyBET01DaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXJ0LCBlbmQsIHR5cGVPdmVyKSB7XG4gICAgICAgIHRoaXMudHlwZU92ZXIgPSB0eXBlT3ZlcjtcbiAgICAgICAgdGhpcy5ib3VuZHMgPSBudWxsO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbUNoYW5nZWQgPSBzdGFydCA+IC0xO1xuICAgICAgICBsZXQgeyBpbXByZWNpc2VIZWFkOiBpSGVhZCwgaW1wcmVjaXNlQW5jaG9yOiBpQW5jaG9yIH0gPSB2aWV3LmRvY1ZpZXc7XG4gICAgICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5ICYmIHN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBjaGFuZ2VzIHdoZW4gdGhlIGVkaXRvciBpcyByZWFkLW9ubHlcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydCA+IC0xICYmICh0aGlzLmJvdW5kcyA9IHZpZXcuZG9jVmlldy5kb21Cb3VuZHNBcm91bmQoc3RhcnQsIGVuZCwgMCkpKSB7XG4gICAgICAgICAgICBsZXQgc2VsUG9pbnRzID0gaUhlYWQgfHwgaUFuY2hvciA/IFtdIDogc2VsZWN0aW9uUG9pbnRzKHZpZXcpO1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBET01SZWFkZXIoc2VsUG9pbnRzLCB2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkUmFuZ2UodGhpcy5ib3VuZHMuc3RhcnRET00sIHRoaXMuYm91bmRzLmVuZERPTSk7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSByZWFkZXIudGV4dDtcbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gc2VsZWN0aW9uRnJvbVBvaW50cyhzZWxQb2ludHMsIHRoaXMuYm91bmRzLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRvbVNlbCA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgICAgICBsZXQgaGVhZCA9IGlIZWFkICYmIGlIZWFkLm5vZGUgPT0gZG9tU2VsLmZvY3VzTm9kZSAmJiBpSGVhZC5vZmZzZXQgPT0gZG9tU2VsLmZvY3VzT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmZvY3VzTm9kZSlcbiAgICAgICAgICAgICAgICA/IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZFxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgICAgIGxldCBhbmNob3IgPSBpQW5jaG9yICYmIGlBbmNob3Iubm9kZSA9PSBkb21TZWwuYW5jaG9yTm9kZSAmJiBpQW5jaG9yLm9mZnNldCA9PSBkb21TZWwuYW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgICAgICAgICAgIWNvbnRhaW5zKHZpZXcuY29udGVudERPTSwgZG9tU2VsLmFuY2hvck5vZGUpXG4gICAgICAgICAgICAgICAgPyB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvclxuICAgICAgICAgICAgICAgIDogdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgICAgICAgLy8gaU9TIHdpbGwgcmVmdXNlIHRvIHNlbGVjdCB0aGUgYmxvY2sgZ2FwcyB3aGVuIGRvaW5nXG4gICAgICAgICAgICAvLyBzZWxlY3QtYWxsLlxuICAgICAgICAgICAgLy8gQ2hyb21lIHdpbGwgcHV0IHRoZSBzZWxlY3Rpb24gKmluc2lkZSogdGhlbSwgY29uZnVzaW5nXG4gICAgICAgICAgICAvLyBwb3NGcm9tRE9NXG4gICAgICAgICAgICBsZXQgdnAgPSB2aWV3LnZpZXdwb3J0O1xuICAgICAgICAgICAgaWYgKChicm93c2VyLmlvcyB8fCBicm93c2VyLmNocm9tZSkgJiYgdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5lbXB0eSAmJiBoZWFkICE9IGFuY2hvciAmJlxuICAgICAgICAgICAgICAgICh2cC5mcm9tID4gMCB8fCB2cC50byA8IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKGhlYWQsIGFuY2hvciksIHRvID0gTWF0aC5tYXgoaGVhZCwgYW5jaG9yKTtcbiAgICAgICAgICAgICAgICBsZXQgb2ZmRnJvbSA9IHZwLmZyb20gLSBmcm9tLCBvZmZUbyA9IHZwLnRvIC0gdG87XG4gICAgICAgICAgICAgICAgaWYgKChvZmZGcm9tID09IDAgfHwgb2ZmRnJvbSA9PSAxIHx8IGZyb20gPT0gMCkgJiYgKG9mZlRvID09IDAgfHwgb2ZmVG8gPT0gLTEgfHwgdG8gPT0gdmlldy5zdGF0ZS5kb2MubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gdmlldy5zdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShhbmNob3IsIGhlYWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwbHlET01DaGFuZ2UodmlldywgZG9tQ2hhbmdlKSB7XG4gICAgbGV0IGNoYW5nZTtcbiAgICBsZXQgeyBuZXdTZWwgfSA9IGRvbUNoYW5nZSwgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICBsZXQgbGFzdEtleSA9IHZpZXcuaW5wdXRTdGF0ZS5sYXN0S2V5VGltZSA+IERhdGUubm93KCkgLSAxMDAgPyB2aWV3LmlucHV0U3RhdGUubGFzdEtleUNvZGUgOiAtMTtcbiAgICBpZiAoZG9tQ2hhbmdlLmJvdW5kcykge1xuICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gZG9tQ2hhbmdlLmJvdW5kcztcbiAgICAgICAgbGV0IHByZWZlcnJlZFBvcyA9IHNlbC5mcm9tLCBwcmVmZXJyZWRTaWRlID0gbnVsbDtcbiAgICAgICAgLy8gUHJlZmVyIGFuY2hvcmluZyB0byBlbmQgd2hlbiBCYWNrc3BhY2UgaXMgcHJlc3NlZCAob3IsIG9uXG4gICAgICAgIC8vIEFuZHJvaWQsIHdoZW4gc29tZXRoaW5nIHdhcyBkZWxldGVkKVxuICAgICAgICBpZiAobGFzdEtleSA9PT0gOCB8fCBicm93c2VyLmFuZHJvaWQgJiYgZG9tQ2hhbmdlLnRleHQubGVuZ3RoIDwgdG8gLSBmcm9tKSB7XG4gICAgICAgICAgICBwcmVmZXJyZWRQb3MgPSBzZWwudG87XG4gICAgICAgICAgICBwcmVmZXJyZWRTaWRlID0gXCJlbmRcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlmZiA9IGZpbmREaWZmKHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvLCBMaW5lQnJlYWtQbGFjZWhvbGRlciksIGRvbUNoYW5nZS50ZXh0LCBwcmVmZXJyZWRQb3MgLSBmcm9tLCBwcmVmZXJyZWRTaWRlKTtcbiAgICAgICAgaWYgKGRpZmYpIHtcbiAgICAgICAgICAgIC8vIENocm9tZSBpbnNlcnRzIHR3byBuZXdsaW5lcyB3aGVuIHByZXNzaW5nIHNoaWZ0LWVudGVyIGF0IHRoZVxuICAgICAgICAgICAgLy8gZW5kIG9mIGEgbGluZS4gRG9tQ2hhbmdlIGRyb3BzIG9uZSBvZiB0aG9zZS5cbiAgICAgICAgICAgIGlmIChicm93c2VyLmNocm9tZSAmJiBsYXN0S2V5ID09IDEzICYmXG4gICAgICAgICAgICAgICAgZGlmZi50b0IgPT0gZGlmZi5mcm9tICsgMiAmJiBkb21DaGFuZ2UudGV4dC5zbGljZShkaWZmLmZyb20sIGRpZmYudG9CKSA9PSBMaW5lQnJlYWtQbGFjZWhvbGRlciArIExpbmVCcmVha1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgIGRpZmYudG9CLS07XG4gICAgICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGZyb20gKyBkaWZmLmZyb20sIHRvOiBmcm9tICsgZGlmZi50b0EsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiBUZXh0Lm9mKGRvbUNoYW5nZS50ZXh0LnNsaWNlKGRpZmYuZnJvbSwgZGlmZi50b0IpLnNwbGl0KExpbmVCcmVha1BsYWNlaG9sZGVyKSkgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChuZXdTZWwgJiYgKCF2aWV3Lmhhc0ZvY3VzICYmIHZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpIHx8IG5ld1NlbC5tYWluLmVxKHNlbCkpKSB7XG4gICAgICAgIG5ld1NlbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICghY2hhbmdlICYmICFuZXdTZWwpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIWNoYW5nZSAmJiBkb21DaGFuZ2UudHlwZU92ZXIgJiYgIXNlbC5lbXB0eSAmJiBuZXdTZWwgJiYgbmV3U2VsLm1haW4uZW1wdHkpIHtcbiAgICAgICAgLy8gSGV1cmlzdGljIHRvIG5vdGljZSB0eXBpbmcgb3ZlciBhIHNlbGVjdGVkIGNoYXJhY3RlclxuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLCBpbnNlcnQ6IHZpZXcuc3RhdGUuZG9jLnNsaWNlKHNlbC5mcm9tLCBzZWwudG8pIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKChicm93c2VyLm1hYyB8fCBicm93c2VyLmFuZHJvaWQpICYmIGNoYW5nZSAmJiBjaGFuZ2UuZnJvbSA9PSBjaGFuZ2UudG8gJiYgY2hhbmdlLmZyb20gPT0gc2VsLmhlYWQgLSAxICYmXG4gICAgICAgIC9eXFwuID8kLy50ZXN0KGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKSkgJiYgdmlldy5jb250ZW50RE9NLmdldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIpID09IFwib2ZmXCIpIHtcbiAgICAgICAgLy8gRGV0ZWN0IGluc2VydC1wZXJpb2Qtb24tZG91YmxlLXNwYWNlIE1hYyBhbmQgQW5kcm9pZCBiZWhhdmlvcixcbiAgICAgICAgLy8gYW5kIHRyYW5zZm9ybSBpdCBpbnRvIGEgcmVndWxhciBzcGFjZSBpbnNlcnQuXG4gICAgICAgIGlmIChuZXdTZWwgJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMilcbiAgICAgICAgICAgIG5ld1NlbCA9IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUobmV3U2VsLm1haW4uYW5jaG9yIC0gMSwgbmV3U2VsLm1haW4uaGVhZCAtIDEpO1xuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGNoYW5nZS5mcm9tLCB0bzogY2hhbmdlLnRvLCBpbnNlcnQ6IFRleHQub2YoW2NoYW5nZS5pbnNlcnQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIiBcIildKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPj0gc2VsLmZyb20gJiYgY2hhbmdlLnRvIDw9IHNlbC50byAmJlxuICAgICAgICAoY2hhbmdlLmZyb20gIT0gc2VsLmZyb20gfHwgY2hhbmdlLnRvICE9IHNlbC50bykgJiZcbiAgICAgICAgKHNlbC50byAtIHNlbC5mcm9tKSAtIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSkgPD0gNCkge1xuICAgICAgICAvLyBJZiB0aGUgY2hhbmdlIGlzIGluc2lkZSB0aGUgc2VsZWN0aW9uIGFuZCBjb3ZlcnMgbW9zdCBvZiBpdCxcbiAgICAgICAgLy8gYXNzdW1lIGl0IGlzIGEgc2VsZWN0aW9uIHJlcGxhY2UgKHdpdGggaWRlbnRpY2FsIGNoYXJhY3RlcnMgYXRcbiAgICAgICAgLy8gdGhlIHN0YXJ0L2VuZCBub3QgaW5jbHVkZWQgaW4gdGhlIGRpZmYpXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLmRvYy5zbGljZShzZWwuZnJvbSwgY2hhbmdlLmZyb20pLmFwcGVuZChjaGFuZ2UuaW5zZXJ0KS5hcHBlbmQodmlldy5zdGF0ZS5kb2Muc2xpY2UoY2hhbmdlLnRvLCBzZWwudG8pKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChicm93c2VyLmNocm9tZSAmJiBjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPT0gY2hhbmdlLnRvICYmIGNoYW5nZS5mcm9tID09IHNlbC5oZWFkICYmXG4gICAgICAgIGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKSA9PSBcIlxcbiBcIiAmJiB2aWV3LmxpbmVXcmFwcGluZykge1xuICAgICAgICAvLyBJbiBDaHJvbWUsIGlmIHlvdSBpbnNlcnQgYSBzcGFjZSBhdCB0aGUgc3RhcnQgb2YgYSB3cmFwcGVkXG4gICAgICAgIC8vIGxpbmUsIGl0IHdpbGwgYWN0dWFsbHkgaW5zZXJ0IGEgbmV3bGluZSBhbmQgYSBzcGFjZSwgY2F1c2luZyBhXG4gICAgICAgIC8vIGJvZ3VzIG5ldyBsaW5lIHRvIGJlIGNyZWF0ZWQgaW4gQ29kZU1pcnJvciAoIzk2OClcbiAgICAgICAgaWYgKG5ld1NlbClcbiAgICAgICAgICAgIG5ld1NlbCA9IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUobmV3U2VsLm1haW4uYW5jaG9yIC0gMSwgbmV3U2VsLm1haW4uaGVhZCAtIDEpO1xuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLCBpbnNlcnQ6IFRleHQub2YoW1wiIFwiXSkgfTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZSkge1xuICAgICAgICByZXR1cm4gYXBwbHlET01DaGFuZ2VJbm5lcih2aWV3LCBjaGFuZ2UsIG5ld1NlbCwgbGFzdEtleSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5ld1NlbCAmJiAhbmV3U2VsLm1haW4uZXEoc2VsKSkge1xuICAgICAgICBsZXQgc2Nyb2xsSW50b1ZpZXcgPSBmYWxzZSwgdXNlckV2ZW50ID0gXCJzZWxlY3RcIjtcbiAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2VsZWN0aW9uVGltZSA+IERhdGUubm93KCkgLSA1MCkge1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2VsZWN0aW9uT3JpZ2luID09IFwic2VsZWN0XCIpXG4gICAgICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgdXNlckV2ZW50ID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTZWxlY3Rpb25PcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogbmV3U2VsLCBzY3JvbGxJbnRvVmlldywgdXNlckV2ZW50IH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseURPTUNoYW5nZUlubmVyKHZpZXcsIGNoYW5nZSwgbmV3U2VsLCBsYXN0S2V5ID0gLTEpIHtcbiAgICBpZiAoYnJvd3Nlci5pb3MgJiYgdmlldy5pbnB1dFN0YXRlLmZsdXNoSU9TS2V5KGNoYW5nZSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIC8vIEFuZHJvaWQgYnJvd3NlcnMgZG9uJ3QgZmlyZSByZWFzb25hYmxlIGtleSBldmVudHMgZm9yIGVudGVyLFxuICAgIC8vIGJhY2tzcGFjZSwgb3IgZGVsZXRlLiBTbyB0aGlzIGRldGVjdHMgY2hhbmdlcyB0aGF0IGxvb2sgbGlrZVxuICAgIC8vIHRoZXkncmUgY2F1c2VkIGJ5IHRob3NlIGtleXMsIGFuZCByZWludGVycHJldHMgdGhlbSBhcyBrZXlcbiAgICAvLyBldmVudHMuIChTb21lIG9mIHRoZXNlIGtleXMgYXJlIGFsc28gaGFuZGxlZCBieSBiZWZvcmVpbnB1dFxuICAgIC8vIGV2ZW50cyBhbmQgdGhlIHBlbmRpbmdBbmRyb2lkS2V5IG1lY2hhbmlzbSwgYnV0IHRoYXQncyBub3RcbiAgICAvLyByZWxpYWJsZSBpbiBhbGwgc2l0dWF0aW9ucy4pXG4gICAgaWYgKGJyb3dzZXIuYW5kcm9pZCAmJlxuICAgICAgICAoKGNoYW5nZS50byA9PSBzZWwudG8gJiZcbiAgICAgICAgICAgIC8vIEdCb2FyZCB3aWxsIHNvbWV0aW1lcyByZW1vdmUgYSBzcGFjZSBpdCBqdXN0IGluc2VydGVkXG4gICAgICAgICAgICAvLyBhZnRlciBhIGNvbXBsZXRpb24gd2hlbiB5b3UgcHJlc3MgZW50ZXJcbiAgICAgICAgICAgIChjaGFuZ2UuZnJvbSA9PSBzZWwuZnJvbSB8fCBjaGFuZ2UuZnJvbSA9PSBzZWwuZnJvbSAtIDEgJiYgdmlldy5zdGF0ZS5zbGljZURvYyhjaGFuZ2UuZnJvbSwgc2VsLmZyb20pID09IFwiIFwiKSAmJlxuICAgICAgICAgICAgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMSAmJiBjaGFuZ2UuaW5zZXJ0LmxpbmVzID09IDIgJiZcbiAgICAgICAgICAgIGRpc3BhdGNoS2V5KHZpZXcuY29udGVudERPTSwgXCJFbnRlclwiLCAxMykpIHx8XG4gICAgICAgICAgICAoKGNoYW5nZS5mcm9tID09IHNlbC5mcm9tIC0gMSAmJiBjaGFuZ2UudG8gPT0gc2VsLnRvICYmIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDAgfHxcbiAgICAgICAgICAgICAgICBsYXN0S2V5ID09IDggJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPCBjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSAmJiBjaGFuZ2UudG8gPiBzZWwuaGVhZCkgJiZcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIFwiQmFja3NwYWNlXCIsIDgpKSB8fFxuICAgICAgICAgICAgKGNoYW5nZS5mcm9tID09IHNlbC5mcm9tICYmIGNoYW5nZS50byA9PSBzZWwudG8gKyAxICYmIGNoYW5nZS5pbnNlcnQubGVuZ3RoID09IDAgJiZcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh2aWV3LmNvbnRlbnRET00sIFwiRGVsZXRlXCIsIDQ2KSkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgdGV4dCA9IGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKTtcbiAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwKVxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nKys7XG4gICAgbGV0IGRlZmF1bHRUcjtcbiAgICBsZXQgZGVmYXVsdEluc2VydCA9ICgpID0+IGRlZmF1bHRUciB8fCAoZGVmYXVsdFRyID0gYXBwbHlEZWZhdWx0SW5zZXJ0KHZpZXcsIGNoYW5nZSwgbmV3U2VsKSk7XG4gICAgaWYgKCF2aWV3LnN0YXRlLmZhY2V0KGlucHV0SGFuZGxlcikuc29tZShoID0+IGgodmlldywgY2hhbmdlLmZyb20sIGNoYW5nZS50bywgdGV4dCwgZGVmYXVsdEluc2VydCkpKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKGRlZmF1bHRJbnNlcnQoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBhcHBseURlZmF1bHRJbnNlcnQodmlldywgY2hhbmdlLCBuZXdTZWwpIHtcbiAgICBsZXQgdHIsIHN0YXJ0U3RhdGUgPSB2aWV3LnN0YXRlLCBzZWwgPSBzdGFydFN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGlmIChjaGFuZ2UuZnJvbSA+PSBzZWwuZnJvbSAmJiBjaGFuZ2UudG8gPD0gc2VsLnRvICYmIGNoYW5nZS50byAtIGNoYW5nZS5mcm9tID49IChzZWwudG8gLSBzZWwuZnJvbSkgLyAzICYmXG4gICAgICAgICghbmV3U2VsIHx8IG5ld1NlbC5tYWluLmVtcHR5ICYmIG5ld1NlbC5tYWluLmZyb20gPT0gY2hhbmdlLmZyb20gKyBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCkgJiZcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDApIHtcbiAgICAgICAgbGV0IGJlZm9yZSA9IHNlbC5mcm9tIDwgY2hhbmdlLmZyb20gPyBzdGFydFN0YXRlLnNsaWNlRG9jKHNlbC5mcm9tLCBjaGFuZ2UuZnJvbSkgOiBcIlwiO1xuICAgICAgICBsZXQgYWZ0ZXIgPSBzZWwudG8gPiBjaGFuZ2UudG8gPyBzdGFydFN0YXRlLnNsaWNlRG9jKGNoYW5nZS50bywgc2VsLnRvKSA6IFwiXCI7XG4gICAgICAgIHRyID0gc3RhcnRTdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKHZpZXcuc3RhdGUudG9UZXh0KGJlZm9yZSArIGNoYW5nZS5pbnNlcnQuc2xpY2VTdHJpbmcoMCwgdW5kZWZpbmVkLCB2aWV3LnN0YXRlLmxpbmVCcmVhaykgKyBhZnRlcikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBzdGFydFN0YXRlLmNoYW5nZXMoY2hhbmdlKTtcbiAgICAgICAgbGV0IG1haW5TZWwgPSBuZXdTZWwgJiYgbmV3U2VsLm1haW4udG8gPD0gY2hhbmdlcy5uZXdMZW5ndGggPyBuZXdTZWwubWFpbiA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVHJ5IHRvIGFwcGx5IGEgY29tcG9zaXRpb24gY2hhbmdlIHRvIGFsbCBjdXJzb3JzXG4gICAgICAgIGlmIChzdGFydFN0YXRlLnNlbGVjdGlvbi5yYW5nZXMubGVuZ3RoID4gMSAmJiB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDAgJiZcbiAgICAgICAgICAgIGNoYW5nZS50byA8PSBzZWwudG8gJiYgY2hhbmdlLnRvID49IHNlbC50byAtIDEwKSB7XG4gICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgICAgICAgICAgbGV0IGNvbXBvc2l0aW9uUmFuZ2UsIGNvbXBvc2l0aW9uID0gbmV3U2VsICYmIGZpbmRDb21wb3NpdGlvbk5vZGUodmlldywgbmV3U2VsLm1haW4uaGVhZCk7XG4gICAgICAgICAgICBpZiAoY29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBsZXQgZExlbiA9IGNoYW5nZS5pbnNlcnQubGVuZ3RoIC0gKGNoYW5nZS50byAtIGNoYW5nZS5mcm9tKTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGlvblJhbmdlID0geyBmcm9tOiBjb21wb3NpdGlvbi5mcm9tLCB0bzogY29tcG9zaXRpb24udG8gLSBkTGVuIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGlvblJhbmdlID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHNlbC5oZWFkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSBzZWwudG8gLSBjaGFuZ2UudG8sIHNpemUgPSBzZWwudG8gLSBzZWwuZnJvbTtcbiAgICAgICAgICAgIHRyID0gc3RhcnRTdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZnJvbSA9PSBzZWwuZnJvbSAmJiByYW5nZS50byA9PSBzZWwudG8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXMsIHJhbmdlOiBtYWluU2VsIHx8IHJhbmdlLm1hcChjaGFuZ2VzKSB9O1xuICAgICAgICAgICAgICAgIGxldCB0byA9IHJhbmdlLnRvIC0gb2Zmc2V0LCBmcm9tID0gdG8gLSByZXBsYWNlZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLnRvIC0gcmFuZ2UuZnJvbSAhPSBzaXplIHx8IHZpZXcuc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pICE9IHJlcGxhY2VkIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlJ3Mgbm8gd2F5IHRvIG1ha2UgbXVsdGlwbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlcyBpbiB0aGUgc2FtZSBub2RlIHdvcmsgd2l0aG91dCBhYm9ydGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBjb21wb3NpdGlvbiwgc28gY3Vyc29ycyBpbiB0aGUgY29tcG9zaXRpb24gcmFuZ2UgYXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZWQuXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnRvID49IGNvbXBvc2l0aW9uUmFuZ2UuZnJvbSAmJiByYW5nZS5mcm9tIDw9IGNvbXBvc2l0aW9uUmFuZ2UudG8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlIH07XG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlQ2hhbmdlcyA9IHN0YXJ0U3RhdGUuY2hhbmdlcyh7IGZyb20sIHRvLCBpbnNlcnQ6IGNoYW5nZS5pbnNlcnQgfSksIHNlbE9mZiA9IHJhbmdlLnRvIC0gc2VsLnRvO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXM6IHJhbmdlQ2hhbmdlcyxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6ICFtYWluU2VsID8gcmFuZ2UubWFwKHJhbmdlQ2hhbmdlcykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yU2VsZWN0aW9uLnJhbmdlKE1hdGgubWF4KDAsIG1haW5TZWwuYW5jaG9yICsgc2VsT2ZmKSwgTWF0aC5tYXgoMCwgbWFpblNlbC5oZWFkICsgc2VsT2ZmKSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ciA9IHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogbWFpblNlbCAmJiBzdGFydFN0YXRlLnNlbGVjdGlvbi5yZXBsYWNlUmFuZ2UobWFpblNlbClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHVzZXJFdmVudCA9IFwiaW5wdXQudHlwZVwiO1xuICAgIGlmICh2aWV3LmNvbXBvc2luZyB8fFxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlICYmIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkVuZGVkQXQgPiBEYXRlLm5vdygpIC0gNTApIHtcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB1c2VyRXZlbnQgKz0gXCIuY29tcG9zZVwiO1xuICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UpIHtcbiAgICAgICAgICAgIHVzZXJFdmVudCArPSBcIi5zdGFydFwiO1xuICAgICAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RhcnRTdGF0ZS51cGRhdGUodHIsIHsgdXNlckV2ZW50LCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbn1cbmZ1bmN0aW9uIGZpbmREaWZmKGEsIGIsIHByZWZlcnJlZFBvcywgcHJlZmVycmVkU2lkZSkge1xuICAgIGxldCBtaW5MZW4gPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpO1xuICAgIGxldCBmcm9tID0gMDtcbiAgICB3aGlsZSAoZnJvbSA8IG1pbkxlbiAmJiBhLmNoYXJDb2RlQXQoZnJvbSkgPT0gYi5jaGFyQ29kZUF0KGZyb20pKVxuICAgICAgICBmcm9tKys7XG4gICAgaWYgKGZyb20gPT0gbWluTGVuICYmIGEubGVuZ3RoID09IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgdG9BID0gYS5sZW5ndGgsIHRvQiA9IGIubGVuZ3RoO1xuICAgIHdoaWxlICh0b0EgPiAwICYmIHRvQiA+IDAgJiYgYS5jaGFyQ29kZUF0KHRvQSAtIDEpID09IGIuY2hhckNvZGVBdCh0b0IgLSAxKSkge1xuICAgICAgICB0b0EtLTtcbiAgICAgICAgdG9CLS07XG4gICAgfVxuICAgIGlmIChwcmVmZXJyZWRTaWRlID09IFwiZW5kXCIpIHtcbiAgICAgICAgbGV0IGFkanVzdCA9IE1hdGgubWF4KDAsIGZyb20gLSBNYXRoLm1pbih0b0EsIHRvQikpO1xuICAgICAgICBwcmVmZXJyZWRQb3MgLT0gdG9BICsgYWRqdXN0IC0gZnJvbTtcbiAgICB9XG4gICAgaWYgKHRvQSA8IGZyb20gJiYgYS5sZW5ndGggPCBiLmxlbmd0aCkge1xuICAgICAgICBsZXQgbW92ZSA9IHByZWZlcnJlZFBvcyA8PSBmcm9tICYmIHByZWZlcnJlZFBvcyA+PSB0b0EgPyBmcm9tIC0gcHJlZmVycmVkUG9zIDogMDtcbiAgICAgICAgZnJvbSAtPSBtb3ZlO1xuICAgICAgICB0b0IgPSBmcm9tICsgKHRvQiAtIHRvQSk7XG4gICAgICAgIHRvQSA9IGZyb207XG4gICAgfVxuICAgIGVsc2UgaWYgKHRvQiA8IGZyb20pIHtcbiAgICAgICAgbGV0IG1vdmUgPSBwcmVmZXJyZWRQb3MgPD0gZnJvbSAmJiBwcmVmZXJyZWRQb3MgPj0gdG9CID8gZnJvbSAtIHByZWZlcnJlZFBvcyA6IDA7XG4gICAgICAgIGZyb20gLT0gbW92ZTtcbiAgICAgICAgdG9BID0gZnJvbSArICh0b0EgLSB0b0IpO1xuICAgICAgICB0b0IgPSBmcm9tO1xuICAgIH1cbiAgICByZXR1cm4geyBmcm9tLCB0b0EsIHRvQiB9O1xufVxuZnVuY3Rpb24gc2VsZWN0aW9uUG9pbnRzKHZpZXcpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgaWYgKHZpZXcucm9vdC5hY3RpdmVFbGVtZW50ICE9IHZpZXcuY29udGVudERPTSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBsZXQgeyBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQgfSA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgaWYgKGFuY2hvck5vZGUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobmV3IERPTVBvaW50KGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCkpO1xuICAgICAgICBpZiAoZm9jdXNOb2RlICE9IGFuY2hvck5vZGUgfHwgZm9jdXNPZmZzZXQgIT0gYW5jaG9yT2Zmc2V0KVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IERPTVBvaW50KGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvbkZyb21Qb2ludHMocG9pbnRzLCBiYXNlKSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT0gMClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGFuY2hvciA9IHBvaW50c1swXS5wb3MsIGhlYWQgPSBwb2ludHMubGVuZ3RoID09IDIgPyBwb2ludHNbMV0ucG9zIDogYW5jaG9yO1xuICAgIHJldHVybiBhbmNob3IgPiAtMSAmJiBoZWFkID4gLTEgPyBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKGFuY2hvciArIGJhc2UsIGhlYWQgKyBiYXNlKSA6IG51bGw7XG59XG5cbmNsYXNzIElucHV0U3RhdGUge1xuICAgIHNldFNlbGVjdGlvbk9yaWdpbihvcmlnaW4pIHtcbiAgICAgICAgdGhpcy5sYXN0U2VsZWN0aW9uT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3Rpb25UaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmxhc3RLZXlDb2RlID0gMDtcbiAgICAgICAgdGhpcy5sYXN0S2V5VGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdFRvdWNoVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdEZvY3VzVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IDA7XG4gICAgICAgIHRoaXMubGFzdFNjcm9sbExlZnQgPSAwO1xuICAgICAgICAvLyBPbiBpT1MsIHNvbWUga2V5cyBuZWVkIHRvIGhhdmUgdGhlaXIgZGVmYXVsdCBiZWhhdmlvciBoYXBwZW5cbiAgICAgICAgLy8gKGFmdGVyIHdoaWNoIHdlIHJldHJvYWN0aXZlbHkgaGFuZGxlIHRoZW0gYW5kIHJlc2V0IHRoZSBET00pIHRvXG4gICAgICAgIC8vIGF2b2lkIG1lc3NpbmcgdXAgdGhlIHZpcnR1YWwga2V5Ym9hcmQgc3RhdGUuXG4gICAgICAgIHRoaXMucGVuZGluZ0lPU0tleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgIFdoZW4gZW5hYmxlZCAoPi0xKSwgdGFiIHByZXNzZXMgYXJlIG5vdCBnaXZlbiB0byBrZXkgaGFuZGxlcnMsXG4gICAgICAgIGxlYXZpbmcgdGhlIGJyb3dzZXIncyBkZWZhdWx0IGJlaGF2aW9yLiBJZiA+MCwgdGhlIG1vZGUgZXhwaXJlc1xuICAgICAgICBhdCB0aGF0IHRpbWVzdGFtcCwgYW5kIGFueSBvdGhlciBrZXlwcmVzcyBjbGVhcnMgaXQuXG4gICAgICAgIEVzYyBlbmFibGVzIHRlbXBvcmFyeSB0YWIgZm9jdXMgbW9kZSBmb3IgdHdvIHNlY29uZHMgd2hlbiBub3RcbiAgICAgICAgb3RoZXJ3aXNlIGhhbmRsZWQuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudGFiRm9jdXNNb2RlID0gLTE7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvbk9yaWdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RDb250ZXh0TWVudSA9IDA7XG4gICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIC8vIC0xIG1lYW5zIG5vdCBpbiBhIGNvbXBvc2l0aW9uLiBPdGhlcndpc2UsIHRoaXMgY291bnRzIHRoZSBudW1iZXJcbiAgICAgICAgLy8gb2YgY2hhbmdlcyBtYWRlIGR1cmluZyB0aGUgY29tcG9zaXRpb24uIFRoZSBjb3VudCBpcyB1c2VkIHRvXG4gICAgICAgIC8vIGF2b2lkIHRyZWF0aW5nIHRoZSBzdGFydCBzdGF0ZSBvZiB0aGUgY29tcG9zaXRpb24sIGJlZm9yZSBhbnlcbiAgICAgICAgLy8gY2hhbmdlcyBoYXZlIGJlZW4gbWFkZSwgYXMgcGFydCBvZiB0aGUgY29tcG9zaXRpb24uXG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gLTE7XG4gICAgICAgIC8vIFRyYWNrcyB3aGV0aGVyIHRoZSBuZXh0IGNoYW5nZSBzaG91bGQgYmUgbWFya2VkIGFzIHN0YXJ0aW5nIHRoZVxuICAgICAgICAvLyBjb21wb3NpdGlvbiAobnVsbCBtZWFucyBubyBjb21wb3NpdGlvbiwgdHJ1ZSBtZWFucyBuZXh0IGlzIHRoZVxuICAgICAgICAvLyBmaXJzdCwgZmFsc2UgbWVhbnMgZmlyc3QgaGFzIGFscmVhZHkgYmVlbiBtYXJrZWQgZm9yIHRoaXNcbiAgICAgICAgLy8gY29tcG9zaXRpb24pXG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IG51bGw7XG4gICAgICAgIC8vIEVuZCB0aW1lIG9mIHRoZSBwcmV2aW91cyBjb21wb3NpdGlvblxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRW5kZWRBdCA9IDA7XG4gICAgICAgIC8vIFVzZWQgaW4gYSBrbHVkZ2UgdG8gZGV0ZWN0IHdoZW4gYW4gRW50ZXIga2V5cHJlc3Mgc2hvdWxkIGJlXG4gICAgICAgIC8vIGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgY29tcG9zaXRpb24gb24gU2FmYXJpLCB3aGljaCBmaXJlcyBldmVudHNcbiAgICAgICAgLy8gaW4gdGhlIHdyb25nIG9yZGVyXG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25QZW5kaW5nS2V5ID0gZmFsc2U7XG4gICAgICAgIC8vIFVzZWQgdG8gY2F0ZWdvcml6ZSBjaGFuZ2VzIGFzIHBhcnQgb2YgYSBjb21wb3NpdGlvbiwgZXZlbiB3aGVuXG4gICAgICAgIC8vIHRoZSBtdXRhdGlvbiBldmVudHMgZmlyZSBzaG9ydGx5IGFmdGVyIHRoZSBjb21wb3NpdGlvbmVuZCBldmVudFxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1vdXNlU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgLy8gV2hlbiBhIGRyYWcgZnJvbSB0aGUgZWRpdG9yIGlzIGFjdGl2ZSwgdGhpcyBwb2ludHMgYXQgdGhlIHJhbmdlXG4gICAgICAgIC8vIGJlaW5nIGRyYWdnZWQuXG4gICAgICAgIHRoaXMuZHJhZ2dlZENvbnRlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gdGhpcy5oYW5kbGVFdmVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm5vdGlmaWVkRm9jdXNlZCA9IHZpZXcuaGFzRm9jdXM7XG4gICAgICAgIC8vIE9uIFNhZmFyaSBhZGRpbmcgYW4gaW5wdXQgZXZlbnQgaGFuZGxlciBzb21laG93IHByZXZlbnRzIGFuXG4gICAgICAgIC8vIGlzc3VlIHdoZXJlIHRoZSBjb21wb3NpdGlvbiB2YW5pc2hlcyB3aGVuIHlvdSBwcmVzcyBlbnRlci5cbiAgICAgICAgaWYgKGJyb3dzZXIuc2FmYXJpKVxuICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiBudWxsKTtcbiAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28pXG4gICAgICAgICAgICBmaXJlZm94Q29weUN1dEhhY2sodmlldy5jb250ZW50RE9NLm93bmVyRG9jdW1lbnQpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIWV2ZW50QmVsb25nc1RvRWRpdG9yKHRoaXMudmlldywgZXZlbnQpIHx8IHRoaXMuaWdub3JlRHVyaW5nQ29tcG9zaXRpb24oZXZlbnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PSBcImtleWRvd25cIiAmJiB0aGlzLmtleWRvd24oZXZlbnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy52aWV3LnVwZGF0ZVN0YXRlICE9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLylcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gdGhpcy5ydW5IYW5kbGVycyhldmVudC50eXBlLCBldmVudCkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnJ1bkhhbmRsZXJzKGV2ZW50LnR5cGUsIGV2ZW50KTtcbiAgICB9XG4gICAgcnVuSGFuZGxlcnModHlwZSwgZXZlbnQpIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1t0eXBlXTtcbiAgICAgICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBvYnNlcnZlciBvZiBoYW5kbGVycy5vYnNlcnZlcnMpXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIodGhpcy52aWV3LCBldmVudCk7XG4gICAgICAgICAgICBmb3IgKGxldCBoYW5kbGVyIG9mIGhhbmRsZXJzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyKHRoaXMudmlldywgZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnN1cmVIYW5kbGVycyhwbHVnaW5zKSB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IGNvbXB1dGVIYW5kbGVycyhwbHVnaW5zKSwgcHJldiA9IHRoaXMuaGFuZGxlcnMsIGRvbSA9IHRoaXMudmlldy5jb250ZW50RE9NO1xuICAgICAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKVxuICAgICAgICAgICAgaWYgKHR5cGUgIT0gXCJzY3JvbGxcIikge1xuICAgICAgICAgICAgICAgIGxldCBwYXNzaXZlID0gIWhhbmRsZXJzW3R5cGVdLmhhbmRsZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgZXhpc3RzID0gcHJldlt0eXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RzICYmIHBhc3NpdmUgIT0gIWV4aXN0cy5oYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgdGhpcy5oYW5kbGVFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0cyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RzKVxuICAgICAgICAgICAgICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCB0aGlzLmhhbmRsZUV2ZW50LCB7IHBhc3NpdmUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHR5cGUgaW4gcHJldilcbiAgICAgICAgICAgIGlmICh0eXBlICE9IFwic2Nyb2xsXCIgJiYgIWhhbmRsZXJzW3R5cGVdKVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgfVxuICAgIGtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgLy8gTXVzdCBhbHdheXMgcnVuLCBldmVuIGlmIGEgY3VzdG9tIGhhbmRsZXIgaGFuZGxlZCB0aGUgZXZlbnRcbiAgICAgICAgdGhpcy5sYXN0S2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgICAgIHRoaXMubGFzdEtleVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSA5ICYmIHRoaXMudGFiRm9jdXNNb2RlID4gLTEgJiYgKCF0aGlzLnRhYkZvY3VzTW9kZSB8fCBEYXRlLm5vdygpIDw9IHRoaXMudGFiRm9jdXNNb2RlKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy50YWJGb2N1c01vZGUgPiAwICYmIGV2ZW50LmtleUNvZGUgIT0gMjcgJiYgbW9kaWZpZXJDb2Rlcy5pbmRleE9mKGV2ZW50LmtleUNvZGUpIDwgMClcbiAgICAgICAgICAgIHRoaXMudGFiRm9jdXNNb2RlID0gLTE7XG4gICAgICAgIC8vIENocm9tZSBmb3IgQW5kcm9pZCB1c3VhbGx5IGRvZXNuJ3QgZmlyZSBwcm9wZXIga2V5IGV2ZW50cywgYnV0XG4gICAgICAgIC8vIG9jY2FzaW9uYWxseSBkb2VzLCB1c3VhbGx5IHN1cnJvdW5kZWQgYnkgYSBidW5jaCBvZiBjb21wbGljYXRlZFxuICAgICAgICAvLyBjb21wb3NpdGlvbiBjaGFuZ2VzLiBXaGVuIGFuIGVudGVyIG9yIGJhY2tzcGFjZSBrZXkgZXZlbnQgaXNcbiAgICAgICAgLy8gc2VlbiwgaG9sZCBvZmYgb24gaGFuZGxpbmcgRE9NIGV2ZW50cyBmb3IgYSBiaXQsIGFuZCB0aGVuXG4gICAgICAgIC8vIGRpc3BhdGNoIGl0LlxuICAgICAgICBpZiAoYnJvd3Nlci5hbmRyb2lkICYmIGJyb3dzZXIuY2hyb21lICYmICFldmVudC5zeW50aGV0aWMgJiZcbiAgICAgICAgICAgIChldmVudC5rZXlDb2RlID09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT0gOCkpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5kZWxheUFuZHJvaWRLZXkoZXZlbnQua2V5LCBldmVudC5rZXlDb2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgRW50ZXIgb24gaU9TIG1ha2VzIHRoZVxuICAgICAgICAvLyB2aXJ0dWFsIGtleWJvYXJkIGdldCBzdHVjayBpbiB0aGUgd3JvbmcgKGxvd2VyY2FzZSlcbiAgICAgICAgLy8gc3RhdGUuIFNvIHdlIGxldCBpdCBnbyB0aHJvdWdoLCBhbmQgdGhlbiwgaW5cbiAgICAgICAgLy8gYXBwbHlET01DaGFuZ2UsIG5vdGlmeSBrZXkgaGFuZGxlcnMgb2YgaXQgYW5kIHJlc2V0IHRvXG4gICAgICAgIC8vIHRoZSBzdGF0ZSB0aGV5IHByb2R1Y2UuXG4gICAgICAgIGxldCBwZW5kaW5nO1xuICAgICAgICBpZiAoYnJvd3Nlci5pb3MgJiYgIWV2ZW50LnN5bnRoZXRpYyAmJiAhZXZlbnQuYWx0S2V5ICYmICFldmVudC5tZXRhS2V5ICYmXG4gICAgICAgICAgICAoKHBlbmRpbmcgPSBQZW5kaW5nS2V5cy5maW5kKGtleSA9PiBrZXkua2V5Q29kZSA9PSBldmVudC5rZXlDb2RlKSkgJiYgIWV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgICAgICBFbWFjc3lQZW5kaW5nS2V5cy5pbmRleE9mKGV2ZW50LmtleSkgPiAtMSAmJiBldmVudC5jdHJsS2V5ICYmICFldmVudC5zaGlmdEtleSkpIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0lPU0tleSA9IHBlbmRpbmcgfHwgZXZlbnQ7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZmx1c2hJT1NLZXkoKSwgMjUwKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlICE9IDIyOSlcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmx1c2hJT1NLZXkoY2hhbmdlKSB7XG4gICAgICAgIGxldCBrZXkgPSB0aGlzLnBlbmRpbmdJT1NLZXk7XG4gICAgICAgIGlmICgha2V5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBUaGlzIGxvb2tzIGxpa2UgYW4gYXV0b2NvcnJlY3Rpb24gYmVmb3JlIEVudGVyXG4gICAgICAgIGlmIChrZXkua2V5ID09IFwiRW50ZXJcIiAmJiBjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPCBjaGFuZ2UudG8gJiYgL15cXFMrJC8udGVzdChjaGFuZ2UuaW5zZXJ0LnRvU3RyaW5nKCkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaEtleSh0aGlzLnZpZXcuY29udGVudERPTSwga2V5LmtleSwga2V5LmtleUNvZGUsIGtleSBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQgPyBrZXkgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpZ25vcmVEdXJpbmdDb21wb3NpdGlvbihldmVudCkge1xuICAgICAgICBpZiAoIS9ea2V5Ly50ZXN0KGV2ZW50LnR5cGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcgPiAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIFNlZSBodHRwczovL3d3dy5zdHVtLmRlLzIwMTYvMDYvMjQvaGFuZGxpbmctaW1lLWV2ZW50cy1pbi1qYXZhc2NyaXB0Ly5cbiAgICAgICAgLy8gT24gc29tZSBpbnB1dCBtZXRob2QgZWRpdG9ycyAoSU1FcyksIHRoZSBFbnRlciBrZXkgaXMgdXNlZCB0b1xuICAgICAgICAvLyBjb25maXJtIGNoYXJhY3RlciBzZWxlY3Rpb24uIE9uIFNhZmFyaSwgd2hlbiBFbnRlciBpcyBwcmVzc2VkLFxuICAgICAgICAvLyBjb21wb3NpdGlvbmVuZCBhbmQga2V5ZG93biBldmVudHMgYXJlIHNvbWV0aW1lcyBlbWl0dGVkIGluIHRoZVxuICAgICAgICAvLyB3cm9uZyBvcmRlci4gVGhlIGtleSBldmVudCBzaG91bGQgc3RpbGwgYmUgaWdub3JlZCwgZXZlbiB3aGVuXG4gICAgICAgIC8vIGl0IGhhcHBlbnMgYWZ0ZXIgdGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50LlxuICAgICAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgIWJyb3dzZXIuaW9zICYmIHRoaXMuY29tcG9zaXRpb25QZW5kaW5nS2V5ICYmIERhdGUubm93KCkgLSB0aGlzLmNvbXBvc2l0aW9uRW5kZWRBdCA8IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpdGlvblBlbmRpbmdLZXkgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3RhcnRNb3VzZVNlbGVjdGlvbihtb3VzZVNlbGVjdGlvbikge1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1vdXNlU2VsZWN0aW9uID0gbW91c2VTZWxlY3Rpb247XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdGhpcy52aWV3Lm9ic2VydmVyLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24udXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWRDb250ZW50ICYmIHVwZGF0ZS5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkQ29udGVudCA9IHRoaXMuZHJhZ2dlZENvbnRlbnQubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5sYXN0S2V5Q29kZSA9IHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24uZGVzdHJveSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJpbmRIYW5kbGVyKHBsdWdpbiwgaGFuZGxlcikge1xuICAgIHJldHVybiAodmlldywgZXZlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwocGx1Z2luLCBldmVudCwgdmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih2aWV3LnN0YXRlLCBlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjb21wdXRlSGFuZGxlcnMocGx1Z2lucykge1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZ1bmN0aW9uIHJlY29yZCh0eXBlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbdHlwZV0gfHwgKHJlc3VsdFt0eXBlXSA9IHsgb2JzZXJ2ZXJzOiBbXSwgaGFuZGxlcnM6IFtdIH0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBwbHVnaW4gb2YgcGx1Z2lucykge1xuICAgICAgICBsZXQgc3BlYyA9IHBsdWdpbi5zcGVjLCBoYW5kbGVycyA9IHNwZWMgJiYgc3BlYy5wbHVnaW4uZG9tRXZlbnRIYW5kbGVycywgb2JzZXJ2ZXJzID0gc3BlYyAmJiBzcGVjLnBsdWdpbi5kb21FdmVudE9ic2VydmVycztcbiAgICAgICAgaWYgKGhhbmRsZXJzKVxuICAgICAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBoYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGxldCBmID0gaGFuZGxlcnNbdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZCh0eXBlKS5oYW5kbGVycy5wdXNoKGJpbmRIYW5kbGVyKHBsdWdpbi52YWx1ZSwgZikpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXJzKVxuICAgICAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBvYnNlcnZlcnMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZiA9IG9ic2VydmVyc1t0eXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZilcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkKHR5cGUpLm9ic2VydmVycy5wdXNoKGJpbmRIYW5kbGVyKHBsdWdpbi52YWx1ZSwgZikpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKVxuICAgICAgICByZWNvcmQodHlwZSkuaGFuZGxlcnMucHVzaChoYW5kbGVyc1t0eXBlXSk7XG4gICAgZm9yIChsZXQgdHlwZSBpbiBvYnNlcnZlcnMpXG4gICAgICAgIHJlY29yZCh0eXBlKS5vYnNlcnZlcnMucHVzaChvYnNlcnZlcnNbdHlwZV0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBQZW5kaW5nS2V5cyA9IFtcbiAgICB7IGtleTogXCJCYWNrc3BhY2VcIiwga2V5Q29kZTogOCwgaW5wdXRUeXBlOiBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiIH0sXG4gICAgeyBrZXk6IFwiRW50ZXJcIiwga2V5Q29kZTogMTMsIGlucHV0VHlwZTogXCJpbnNlcnRQYXJhZ3JhcGhcIiB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIGtleUNvZGU6IDEzLCBpbnB1dFR5cGU6IFwiaW5zZXJ0TGluZUJyZWFrXCIgfSxcbiAgICB7IGtleTogXCJEZWxldGVcIiwga2V5Q29kZTogNDYsIGlucHV0VHlwZTogXCJkZWxldGVDb250ZW50Rm9yd2FyZFwiIH1cbl07XG5jb25zdCBFbWFjc3lQZW5kaW5nS2V5cyA9IFwiZHRoa29cIjtcbi8vIEtleSBjb2RlcyBmb3IgbW9kaWZpZXIga2V5c1xuY29uc3QgbW9kaWZpZXJDb2RlcyA9IFsxNiwgMTcsIDE4LCAyMCwgOTEsIDkyLCAyMjQsIDIyNV07XG5jb25zdCBkcmFnU2Nyb2xsTWFyZ2luID0gNjtcbmZ1bmN0aW9uIGRyYWdTY3JvbGxTcGVlZChkaXN0KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIGRpc3QpICogMC43ICsgODtcbn1cbmZ1bmN0aW9uIGRpc3QoYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLmFicyhhLmNsaWVudFggLSBiLmNsaWVudFgpLCBNYXRoLmFicyhhLmNsaWVudFkgLSBiLmNsaWVudFkpKTtcbn1cbmNsYXNzIE1vdXNlU2VsZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBzdGFydEV2ZW50LCBzdHlsZSwgbXVzdFNlbGVjdCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnN0YXJ0RXZlbnQgPSBzdGFydEV2ZW50O1xuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgICAgIHRoaXMubXVzdFNlbGVjdCA9IG11c3RTZWxlY3Q7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3BlZWQgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy5zY3JvbGxpbmcgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0RXZlbnQgPSBzdGFydEV2ZW50O1xuICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMgPSBzY3JvbGxhYmxlUGFyZW50cyh2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICB0aGlzLmF0b21zID0gdmlldy5zdGF0ZS5mYWNldChhdG9taWNSYW5nZXMpLm1hcChmID0+IGYodmlldykpO1xuICAgICAgICBsZXQgZG9jID0gdmlldy5jb250ZW50RE9NLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW92ZSA9IHRoaXMubW92ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXAgPSB0aGlzLnVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV4dGVuZCA9IHN0YXJ0RXZlbnQuc2hpZnRLZXk7XG4gICAgICAgIHRoaXMubXVsdGlwbGUgPSB2aWV3LnN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSAmJiBhZGRzU2VsZWN0aW9uUmFuZ2Uodmlldywgc3RhcnRFdmVudCk7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBpc0luUHJpbWFyeVNlbGVjdGlvbih2aWV3LCBzdGFydEV2ZW50KSAmJiBnZXRDbGlja1R5cGUoc3RhcnRFdmVudCkgPT0gMSA/IG51bGwgOiBmYWxzZTtcbiAgICB9XG4gICAgc3RhcnQoZXZlbnQpIHtcbiAgICAgICAgLy8gV2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb24sIGltbWVkaWF0ZWx5IGFwcGx5IHRoZVxuICAgICAgICAvLyBlZmZlY3Qgb2Ygc3RhcnRpbmcgdGhlIHNlbGVjdGlvblxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdChldmVudCk7XG4gICAgfVxuICAgIG1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgPT0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgfHwgdGhpcy5kcmFnZ2luZyA9PSBudWxsICYmIGRpc3QodGhpcy5zdGFydEV2ZW50LCBldmVudCkgPCAxMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5sYXN0RXZlbnQgPSBldmVudCk7XG4gICAgICAgIGxldCBzeCA9IDAsIHN5ID0gMDtcbiAgICAgICAgbGV0IGxlZnQgPSAwLCB0b3AgPSAwLCByaWdodCA9IHRoaXMudmlldy53aW4uaW5uZXJXaWR0aCwgYm90dG9tID0gdGhpcy52aWV3Lndpbi5pbm5lckhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsUGFyZW50cy54KVxuICAgICAgICAgICAgKHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMuc2Nyb2xsUGFyZW50cy54LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsUGFyZW50cy55KVxuICAgICAgICAgICAgKHsgdG9wLCBib3R0b20gfSA9IHRoaXMuc2Nyb2xsUGFyZW50cy55LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgbGV0IG1hcmdpbnMgPSBnZXRTY3JvbGxNYXJnaW5zKHRoaXMudmlldyk7XG4gICAgICAgIGlmIChldmVudC5jbGllbnRYIC0gbWFyZ2lucy5sZWZ0IDw9IGxlZnQgKyBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3ggPSAtZHJhZ1Njcm9sbFNwZWVkKGxlZnQgLSBldmVudC5jbGllbnRYKTtcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuY2xpZW50WCArIG1hcmdpbnMucmlnaHQgPj0gcmlnaHQgLSBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3ggPSBkcmFnU2Nyb2xsU3BlZWQoZXZlbnQuY2xpZW50WCAtIHJpZ2h0KTtcbiAgICAgICAgaWYgKGV2ZW50LmNsaWVudFkgLSBtYXJnaW5zLnRvcCA8PSB0b3AgKyBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3kgPSAtZHJhZ1Njcm9sbFNwZWVkKHRvcCAtIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICBlbHNlIGlmIChldmVudC5jbGllbnRZICsgbWFyZ2lucy5ib3R0b20gPj0gYm90dG9tIC0gZHJhZ1Njcm9sbE1hcmdpbilcbiAgICAgICAgICAgIHN5ID0gZHJhZ1Njcm9sbFNwZWVkKGV2ZW50LmNsaWVudFkgLSBib3R0b20pO1xuICAgICAgICB0aGlzLnNldFNjcm9sbFNwZWVkKHN4LCBzeSk7XG4gICAgfVxuICAgIHVwKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCk7XG4gICAgICAgIGlmICghdGhpcy5kcmFnZ2luZylcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnNldFNjcm9sbFNwZWVkKDAsIDApO1xuICAgICAgICBsZXQgZG9jID0gdGhpcy52aWV3LmNvbnRlbnRET00ub3duZXJEb2N1bWVudDtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3ZlKTtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXApO1xuICAgICAgICB0aGlzLnZpZXcuaW5wdXRTdGF0ZS5tb3VzZVNlbGVjdGlvbiA9IHRoaXMudmlldy5pbnB1dFN0YXRlLmRyYWdnZWRDb250ZW50ID0gbnVsbDtcbiAgICB9XG4gICAgc2V0U2Nyb2xsU3BlZWQoc3gsIHN5KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3BlZWQgPSB7IHg6IHN4LCB5OiBzeSB9O1xuICAgICAgICBpZiAoc3ggfHwgc3kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGluZyA8IDApXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxpbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnNjcm9sbCgpLCA1MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zY3JvbGxpbmcgPiAtMSkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNjcm9sbGluZyk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbCgpIHtcbiAgICAgICAgbGV0IHsgeCwgeSB9ID0gdGhpcy5zY3JvbGxTcGVlZDtcbiAgICAgICAgaWYgKHggJiYgdGhpcy5zY3JvbGxQYXJlbnRzLngpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy54LnNjcm9sbExlZnQgKz0geDtcbiAgICAgICAgICAgIHggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh5ICYmIHRoaXMuc2Nyb2xsUGFyZW50cy55KSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFBhcmVudHMueS5zY3JvbGxUb3AgKz0geTtcbiAgICAgICAgICAgIHkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4IHx8IHkpXG4gICAgICAgICAgICB0aGlzLnZpZXcud2luLnNjcm9sbEJ5KHgsIHkpO1xuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyA9PT0gZmFsc2UpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCk7XG4gICAgfVxuICAgIHNraXBBdG9tcyhzZWwpIHtcbiAgICAgICAgbGV0IHJhbmdlcyA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gc2VsLnJhbmdlc1tpXSwgdXBkYXRlZCA9IG51bGw7XG4gICAgICAgICAgICBpZiAocmFuZ2UuZW1wdHkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zID0gc2tpcEF0b21pY1Jhbmdlcyh0aGlzLmF0b21zLCByYW5nZS5mcm9tLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zICE9IHJhbmdlLmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBza2lwQXRvbWljUmFuZ2VzKHRoaXMuYXRvbXMsIHJhbmdlLmZyb20sIC0xKTtcbiAgICAgICAgICAgICAgICBsZXQgdG8gPSBza2lwQXRvbWljUmFuZ2VzKHRoaXMuYXRvbXMsIHJhbmdlLnRvLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSAhPSByYW5nZS5mcm9tIHx8IHRvICE9IHJhbmdlLnRvKVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkID0gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHJhbmdlLmZyb20gPT0gcmFuZ2UuYW5jaG9yID8gZnJvbSA6IHRvLCByYW5nZS5mcm9tID09IHJhbmdlLmhlYWQgPyBmcm9tIDogdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzID0gc2VsLnJhbmdlcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHJhbmdlc1tpXSA9IHVwZGF0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlcyA/IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLCBzZWwubWFpbkluZGV4KSA6IHNlbDtcbiAgICB9XG4gICAgc2VsZWN0KGV2ZW50KSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXMsIHNlbGVjdGlvbiA9IHRoaXMuc2tpcEF0b21zKHRoaXMuc3R5bGUuZ2V0KGV2ZW50LCB0aGlzLmV4dGVuZCwgdGhpcy5tdWx0aXBsZSkpO1xuICAgICAgICBpZiAodGhpcy5tdXN0U2VsZWN0IHx8ICFzZWxlY3Rpb24uZXEodmlldy5zdGF0ZS5zZWxlY3Rpb24sIHRoaXMuZHJhZ2dpbmcgPT09IGZhbHNlKSlcbiAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJFdmVudDogXCJzZWxlY3QucG9pbnRlclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tdXN0U2VsZWN0ID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikpKVxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3R5bGUudXBkYXRlKHVwZGF0ZSkpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VsZWN0KHRoaXMubGFzdEV2ZW50KSwgMjApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZHNTZWxlY3Rpb25SYW5nZSh2aWV3LCBldmVudCkge1xuICAgIGxldCBmYWNldCA9IHZpZXcuc3RhdGUuZmFjZXQoY2xpY2tBZGRzU2VsZWN0aW9uUmFuZ2UpO1xuICAgIHJldHVybiBmYWNldC5sZW5ndGggPyBmYWNldFswXShldmVudCkgOiBicm93c2VyLm1hYyA/IGV2ZW50Lm1ldGFLZXkgOiBldmVudC5jdHJsS2V5O1xufVxuZnVuY3Rpb24gZHJhZ01vdmVzU2VsZWN0aW9uKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IGZhY2V0ID0gdmlldy5zdGF0ZS5mYWNldChkcmFnTW92ZXNTZWxlY3Rpb24kMSk7XG4gICAgcmV0dXJuIGZhY2V0Lmxlbmd0aCA/IGZhY2V0WzBdKGV2ZW50KSA6IGJyb3dzZXIubWFjID8gIWV2ZW50LmFsdEtleSA6ICFldmVudC5jdHJsS2V5O1xufVxuZnVuY3Rpb24gaXNJblByaW1hcnlTZWxlY3Rpb24odmlldywgZXZlbnQpIHtcbiAgICBsZXQgeyBtYWluIH0gPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAobWFpbi5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIE9uIGJvdW5kYXJ5IGNsaWNrcywgY2hlY2sgd2hldGhlciB0aGUgY29vcmRpbmF0ZXMgYXJlIGluc2lkZSB0aGVcbiAgICAvLyBzZWxlY3Rpb24ncyBjbGllbnQgcmVjdGFuZ2xlc1xuICAgIGxldCBzZWwgPSBnZXRTZWxlY3Rpb24odmlldy5yb290KTtcbiAgICBpZiAoIXNlbCB8fCBzZWwucmFuZ2VDb3VudCA9PSAwKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgcmVjdHMgPSBzZWwuZ2V0UmFuZ2VBdCgwKS5nZXRDbGllbnRSZWN0cygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tpXTtcbiAgICAgICAgaWYgKHJlY3QubGVmdCA8PSBldmVudC5jbGllbnRYICYmIHJlY3QucmlnaHQgPj0gZXZlbnQuY2xpZW50WCAmJlxuICAgICAgICAgICAgcmVjdC50b3AgPD0gZXZlbnQuY2xpZW50WSAmJiByZWN0LmJvdHRvbSA+PSBldmVudC5jbGllbnRZKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGV2ZW50QmVsb25nc1RvRWRpdG9yKHZpZXcsIGV2ZW50KSB7XG4gICAgaWYgKCFldmVudC5idWJibGVzKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IG5vZGUgPSBldmVudC50YXJnZXQsIGNWaWV3OyBub2RlICE9IHZpZXcuY29udGVudERPTTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZVR5cGUgPT0gMTEgfHwgKChjVmlldyA9IENvbnRlbnRWaWV3LmdldChub2RlKSkgJiYgY1ZpZXcuaWdub3JlRXZlbnQoZXZlbnQpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IGhhbmRsZXJzID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCBvYnNlcnZlcnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8vIFRoaXMgaXMgdmVyeSBjcnVkZSwgYnV0IHVuZm9ydHVuYXRlbHkgYm90aCB0aGVzZSBicm93c2VycyBfcHJldGVuZF9cbi8vIHRoYXQgdGhleSBoYXZlIGEgY2xpcGJvYXJkIEFQSeKAlGFsbCB0aGUgb2JqZWN0cyBhbmQgbWV0aG9kcyBhcmVcbi8vIHRoZXJlLCB0aGV5IGp1c3QgZG9uJ3Qgd29yaywgYW5kIHRoZXkgYXJlIGhhcmQgdG8gdGVzdC5cbmNvbnN0IGJyb2tlbkNsaXBib2FyZEFQSSA9IChicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8IDE1KSB8fFxuICAgIChicm93c2VyLmlvcyAmJiBicm93c2VyLndlYmtpdF92ZXJzaW9uIDwgNjA0KTtcbmZ1bmN0aW9uIGNhcHR1cmVQYXN0ZSh2aWV3KSB7XG4gICAgbGV0IHBhcmVudCA9IHZpZXcuZG9tLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgdGFyZ2V0ID0gcGFyZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSk7XG4gICAgdGFyZ2V0LnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweFwiO1xuICAgIHRhcmdldC5mb2N1cygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICAgICAgZG9QYXN0ZSh2aWV3LCB0YXJnZXQudmFsdWUpO1xuICAgIH0sIDUwKTtcbn1cbmZ1bmN0aW9uIHRleHRGaWx0ZXIoc3RhdGUsIGZhY2V0LCB0ZXh0KSB7XG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHN0YXRlLmZhY2V0KGZhY2V0KSlcbiAgICAgICAgdGV4dCA9IGZpbHRlcih0ZXh0LCBzdGF0ZSk7XG4gICAgcmV0dXJuIHRleHQ7XG59XG5mdW5jdGlvbiBkb1Bhc3RlKHZpZXcsIGlucHV0KSB7XG4gICAgaW5wdXQgPSB0ZXh0RmlsdGVyKHZpZXcuc3RhdGUsIGNsaXBib2FyZElucHV0RmlsdGVyLCBpbnB1dCk7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNoYW5nZXMsIGkgPSAxLCB0ZXh0ID0gc3RhdGUudG9UZXh0KGlucHV0KTtcbiAgICBsZXQgYnlMaW5lID0gdGV4dC5saW5lcyA9PSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aDtcbiAgICBsZXQgbGluZXdpc2UgPSBsYXN0TGluZXdpc2VDb3B5ICE9IG51bGwgJiYgc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5ldmVyeShyID0+IHIuZW1wdHkpICYmIGxhc3RMaW5ld2lzZUNvcHkgPT0gdGV4dC50b1N0cmluZygpO1xuICAgIGlmIChsaW5ld2lzZSkge1xuICAgICAgICBsZXQgbGFzdExpbmUgPSAtMTtcbiAgICAgICAgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA9PSBsYXN0TGluZSlcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICAgICAgbGFzdExpbmUgPSBsaW5lLmZyb207XG4gICAgICAgICAgICBsZXQgaW5zZXJ0ID0gc3RhdGUudG9UZXh0KChieUxpbmUgPyB0ZXh0LmxpbmUoaSsrKS50ZXh0IDogaW5wdXQpICsgc3RhdGUubGluZUJyZWFrKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogbGluZS5mcm9tLCBpbnNlcnQgfSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgaW5zZXJ0Lmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ5TGluZSkge1xuICAgICAgICBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHRleHQubGluZShpKyspO1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogbGluZS50ZXh0IH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIGxpbmUubGVuZ3RoKSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoYW5nZXMgPSBzdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKHRleHQpO1xuICAgIH1cbiAgICB2aWV3LmRpc3BhdGNoKGNoYW5nZXMsIHtcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnBhc3RlXCIsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgfSk7XG59XG5vYnNlcnZlcnMuc2Nyb2xsID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxUb3AgPSB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3A7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxMZWZ0ID0gdmlldy5zY3JvbGxET00uc2Nyb2xsTGVmdDtcbn07XG5oYW5kbGVycy5rZXlkb3duID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLnNldFNlbGVjdGlvbk9yaWdpbihcInNlbGVjdFwiKTtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNyAmJiB2aWV3LmlucHV0U3RhdGUudGFiRm9jdXNNb2RlICE9IDApXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPSBEYXRlLm5vdygpICsgMjAwMDtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xub2JzZXJ2ZXJzLnRvdWNoc3RhcnQgPSAodmlldywgZSkgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB2aWV3LmlucHV0U3RhdGUuc2V0U2VsZWN0aW9uT3JpZ2luKFwic2VsZWN0LnBvaW50ZXJcIik7XG59O1xub2JzZXJ2ZXJzLnRvdWNobW92ZSA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5zZXRTZWxlY3Rpb25PcmlnaW4oXCJzZWxlY3QucG9pbnRlclwiKTtcbn07XG5oYW5kbGVycy5tb3VzZWRvd24gPSAodmlldywgZXZlbnQpID0+IHtcbiAgICB2aWV3Lm9ic2VydmVyLmZsdXNoKCk7XG4gICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lID4gRGF0ZS5ub3coKSAtIDIwMDApXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gSWdub3JlIHRvdWNoIGludGVyYWN0aW9uXG4gICAgbGV0IHN0eWxlID0gbnVsbDtcbiAgICBmb3IgKGxldCBtYWtlU3R5bGUgb2Ygdmlldy5zdGF0ZS5mYWNldChtb3VzZVNlbGVjdGlvblN0eWxlKSkge1xuICAgICAgICBzdHlsZSA9IG1ha2VTdHlsZSh2aWV3LCBldmVudCk7XG4gICAgICAgIGlmIChzdHlsZSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoIXN0eWxlICYmIGV2ZW50LmJ1dHRvbiA9PSAwKVxuICAgICAgICBzdHlsZSA9IGJhc2ljTW91c2VTZWxlY3Rpb24odmlldywgZXZlbnQpO1xuICAgIGlmIChzdHlsZSkge1xuICAgICAgICBsZXQgbXVzdEZvY3VzID0gIXZpZXcuaGFzRm9jdXM7XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5zdGFydE1vdXNlU2VsZWN0aW9uKG5ldyBNb3VzZVNlbGVjdGlvbih2aWV3LCBldmVudCwgc3R5bGUsIG11c3RGb2N1cykpO1xuICAgICAgICBpZiAobXVzdEZvY3VzKVxuICAgICAgICAgICAgdmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvY3VzUHJldmVudFNjcm9sbCh2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICAgICAgICAgIGxldCBhY3RpdmUgPSB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlICYmICFhY3RpdmUuY29udGFpbnModmlldy5jb250ZW50RE9NKSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBsZXQgbW91c2VTZWwgPSB2aWV3LmlucHV0U3RhdGUubW91c2VTZWxlY3Rpb247XG4gICAgICAgIGlmIChtb3VzZVNlbCkge1xuICAgICAgICAgICAgbW91c2VTZWwuc3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIG1vdXNlU2VsLmRyYWdnaW5nID09PSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZnVuY3Rpb24gcmFuZ2VGb3JDbGljayh2aWV3LCBwb3MsIGJpYXMsIHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PSAxKSB7IC8vIFNpbmdsZSBjbGlja1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MsIGJpYXMpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09IDIpIHsgLy8gRG91YmxlIGNsaWNrXG4gICAgICAgIHJldHVybiBncm91cEF0KHZpZXcuc3RhdGUsIHBvcywgYmlhcyk7XG4gICAgfVxuICAgIGVsc2UgeyAvLyBUcmlwbGUgY2xpY2tcbiAgICAgICAgbGV0IHZpc3VhbCA9IExpbmVWaWV3LmZpbmQodmlldy5kb2NWaWV3LCBwb3MpLCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHZpc3VhbCA/IHZpc3VhbC5wb3NBdEVuZCA6IHBvcyk7XG4gICAgICAgIGxldCBmcm9tID0gdmlzdWFsID8gdmlzdWFsLnBvc0F0U3RhcnQgOiBsaW5lLmZyb20sIHRvID0gdmlzdWFsID8gdmlzdWFsLnBvc0F0RW5kIDogbGluZS50bztcbiAgICAgICAgaWYgKHRvIDwgdmlldy5zdGF0ZS5kb2MubGVuZ3RoICYmIHRvID09IGxpbmUudG8pXG4gICAgICAgICAgICB0bysrO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIHRvKTtcbiAgICB9XG59XG5sZXQgaW5zaWRlID0gKHgsIHksIHJlY3QpID0+IHkgPj0gcmVjdC50b3AgJiYgeSA8PSByZWN0LmJvdHRvbSAmJiB4ID49IHJlY3QubGVmdCAmJiB4IDw9IHJlY3QucmlnaHQ7XG4vLyBUcnkgdG8gZGV0ZXJtaW5lLCBmb3IgdGhlIGdpdmVuIGNvb3JkaW5hdGVzLCBhc3NvY2lhdGVkIHdpdGggdGhlXG4vLyBnaXZlbiBwb3NpdGlvbiwgd2hldGhlciB0aGV5IGFyZSByZWxhdGVkIHRvIHRoZSBlbGVtZW50IGJlZm9yZSBvclxuLy8gdGhlIGVsZW1lbnQgYWZ0ZXIgdGhlIHBvc2l0aW9uLlxuZnVuY3Rpb24gZmluZFBvc2l0aW9uU2lkZSh2aWV3LCBwb3MsIHgsIHkpIHtcbiAgICBsZXQgbGluZSA9IExpbmVWaWV3LmZpbmQodmlldy5kb2NWaWV3LCBwb3MpO1xuICAgIGlmICghbGluZSlcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgbGV0IG9mZiA9IHBvcyAtIGxpbmUucG9zQXRTdGFydDtcbiAgICAvLyBMaW5lIGJvdW5kYXJpZXMgcG9pbnQgaW50byB0aGUgbGluZVxuICAgIGlmIChvZmYgPT0gMClcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgaWYgKG9mZiA9PSBsaW5lLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIC8vIFBvc2l0aW9ucyBvbiB0b3Agb2YgYW4gZWxlbWVudCBwb2ludCBhdCB0aGF0IGVsZW1lbnRcbiAgICBsZXQgYmVmb3JlID0gbGluZS5jb29yZHNBdChvZmYsIC0xKTtcbiAgICBpZiAoYmVmb3JlICYmIGluc2lkZSh4LCB5LCBiZWZvcmUpKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgbGV0IGFmdGVyID0gbGluZS5jb29yZHNBdChvZmYsIDEpO1xuICAgIGlmIChhZnRlciAmJiBpbnNpZGUoeCwgeSwgYWZ0ZXIpKVxuICAgICAgICByZXR1cm4gMTtcbiAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgbGluZSB3cmFwIHBvaW50LiBQaWNrIGJlZm9yZSBpZiB0aGUgcG9pbnQgaXNcbiAgICAvLyBhYm92ZSBpdHMgYm90dG9tLlxuICAgIHJldHVybiBiZWZvcmUgJiYgYmVmb3JlLmJvdHRvbSA+PSB5ID8gLTEgOiAxO1xufVxuZnVuY3Rpb24gcXVlcnlQb3ModmlldywgZXZlbnQpIHtcbiAgICBsZXQgcG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSwgZmFsc2UpO1xuICAgIHJldHVybiB7IHBvcywgYmlhczogZmluZFBvc2l0aW9uU2lkZSh2aWV3LCBwb3MsIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpIH07XG59XG5jb25zdCBCYWRNb3VzZURldGFpbCA9IGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExO1xubGV0IGxhc3RNb3VzZURvd24gPSBudWxsLCBsYXN0TW91c2VEb3duQ291bnQgPSAwLCBsYXN0TW91c2VEb3duVGltZSA9IDA7XG5mdW5jdGlvbiBnZXRDbGlja1R5cGUoZXZlbnQpIHtcbiAgICBpZiAoIUJhZE1vdXNlRGV0YWlsKVxuICAgICAgICByZXR1cm4gZXZlbnQuZGV0YWlsO1xuICAgIGxldCBsYXN0ID0gbGFzdE1vdXNlRG93biwgbGFzdFRpbWUgPSBsYXN0TW91c2VEb3duVGltZTtcbiAgICBsYXN0TW91c2VEb3duID0gZXZlbnQ7XG4gICAgbGFzdE1vdXNlRG93blRpbWUgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBsYXN0TW91c2VEb3duQ291bnQgPSAhbGFzdCB8fCAobGFzdFRpbWUgPiBEYXRlLm5vdygpIC0gNDAwICYmIE1hdGguYWJzKGxhc3QuY2xpZW50WCAtIGV2ZW50LmNsaWVudFgpIDwgMiAmJlxuICAgICAgICBNYXRoLmFicyhsYXN0LmNsaWVudFkgLSBldmVudC5jbGllbnRZKSA8IDIpID8gKGxhc3RNb3VzZURvd25Db3VudCArIDEpICUgMyA6IDE7XG59XG5mdW5jdGlvbiBiYXNpY01vdXNlU2VsZWN0aW9uKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IHN0YXJ0ID0gcXVlcnlQb3ModmlldywgZXZlbnQpLCB0eXBlID0gZ2V0Q2xpY2tUeXBlKGV2ZW50KTtcbiAgICBsZXQgc3RhcnRTZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBzdGFydC5wb3MgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3Moc3RhcnQucG9zKTtcbiAgICAgICAgICAgICAgICBzdGFydFNlbCA9IHN0YXJ0U2VsLm1hcCh1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldChldmVudCwgZXh0ZW5kLCBtdWx0aXBsZSkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHF1ZXJ5UG9zKHZpZXcsIGV2ZW50KSwgcmVtb3ZlZDtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlRm9yQ2xpY2sodmlldywgY3VyLnBvcywgY3VyLmJpYXMsIHR5cGUpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0LnBvcyAhPSBjdXIucG9zICYmICFleHRlbmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRSYW5nZSA9IHJhbmdlRm9yQ2xpY2sodmlldywgc3RhcnQucG9zLCBzdGFydC5iaWFzLCB0eXBlKTtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKHN0YXJ0UmFuZ2UuZnJvbSwgcmFuZ2UuZnJvbSksIHRvID0gTWF0aC5tYXgoc3RhcnRSYW5nZS50bywgcmFuZ2UudG8pO1xuICAgICAgICAgICAgICAgIHJhbmdlID0gZnJvbSA8IHJhbmdlLmZyb20gPyBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgdG8pIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHRvLCBmcm9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHRlbmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsLnJlcGxhY2VSYW5nZShzdGFydFNlbC5tYWluLmV4dGVuZChyYW5nZS5mcm9tLCByYW5nZS50bykpO1xuICAgICAgICAgICAgZWxzZSBpZiAobXVsdGlwbGUgJiYgdHlwZSA9PSAxICYmIHN0YXJ0U2VsLnJhbmdlcy5sZW5ndGggPiAxICYmIChyZW1vdmVkID0gcmVtb3ZlUmFuZ2VBcm91bmQoc3RhcnRTZWwsIGN1ci5wb3MpKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlZDtcbiAgICAgICAgICAgIGVsc2UgaWYgKG11bHRpcGxlKVxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFydFNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoW3JhbmdlXSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2VBcm91bmQoc2VsLCBwb3MpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICAgIGlmIChmcm9tIDw9IHBvcyAmJiB0byA+PSBwb3MpXG4gICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShzZWwucmFuZ2VzLnNsaWNlKDAsIGkpLmNvbmNhdChzZWwucmFuZ2VzLnNsaWNlKGkgKyAxKSksIHNlbC5tYWluSW5kZXggPT0gaSA/IDAgOiBzZWwubWFpbkluZGV4IC0gKHNlbC5tYWluSW5kZXggPiBpID8gMSA6IDApKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5oYW5kbGVycy5kcmFnc3RhcnQgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBsZXQgeyBzZWxlY3Rpb246IHsgbWFpbjogcmFuZ2UgfSB9ID0gdmlldy5zdGF0ZTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmRyYWdnYWJsZSkge1xuICAgICAgICBsZXQgY1ZpZXcgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdChldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAoY1ZpZXcgJiYgY1ZpZXcuaXNXaWRnZXQpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gY1ZpZXcucG9zQXRTdGFydCwgdG8gPSBmcm9tICsgY1ZpZXcubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZyb20gPj0gcmFuZ2UudG8gfHwgdG8gPD0gcmFuZ2UuZnJvbSlcbiAgICAgICAgICAgICAgICByYW5nZSA9IEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0byk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHsgaW5wdXRTdGF0ZSB9ID0gdmlldztcbiAgICBpZiAoaW5wdXRTdGF0ZS5tb3VzZVNlbGVjdGlvbilcbiAgICAgICAgaW5wdXRTdGF0ZS5tb3VzZVNlbGVjdGlvbi5kcmFnZ2luZyA9IHRydWU7XG4gICAgaW5wdXRTdGF0ZS5kcmFnZ2VkQ29udGVudCA9IHJhbmdlO1xuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsIHRleHRGaWx0ZXIodmlldy5zdGF0ZSwgY2xpcGJvYXJkT3V0cHV0RmlsdGVyLCB2aWV3LnN0YXRlLnNsaWNlRG9jKHJhbmdlLmZyb20sIHJhbmdlLnRvKSkpO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwiY29weU1vdmVcIjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbmhhbmRsZXJzLmRyYWdlbmQgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUuZHJhZ2dlZENvbnRlbnQgPSBudWxsO1xuICAgIHJldHVybiBmYWxzZTtcbn07XG5mdW5jdGlvbiBkcm9wVGV4dCh2aWV3LCBldmVudCwgdGV4dCwgZGlyZWN0KSB7XG4gICAgdGV4dCA9IHRleHRGaWx0ZXIodmlldy5zdGF0ZSwgY2xpcGJvYXJkSW5wdXRGaWx0ZXIsIHRleHQpO1xuICAgIGlmICghdGV4dClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBkcm9wUG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSwgZmFsc2UpO1xuICAgIGxldCB7IGRyYWdnZWRDb250ZW50IH0gPSB2aWV3LmlucHV0U3RhdGU7XG4gICAgbGV0IGRlbCA9IGRpcmVjdCAmJiBkcmFnZ2VkQ29udGVudCAmJiBkcmFnTW92ZXNTZWxlY3Rpb24odmlldywgZXZlbnQpXG4gICAgICAgID8geyBmcm9tOiBkcmFnZ2VkQ29udGVudC5mcm9tLCB0bzogZHJhZ2dlZENvbnRlbnQudG8gfSA6IG51bGw7XG4gICAgbGV0IGlucyA9IHsgZnJvbTogZHJvcFBvcywgaW5zZXJ0OiB0ZXh0IH07XG4gICAgbGV0IGNoYW5nZXMgPSB2aWV3LnN0YXRlLmNoYW5nZXMoZGVsID8gW2RlbCwgaW5zXSA6IGlucyk7XG4gICAgdmlldy5mb2N1cygpO1xuICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzLFxuICAgICAgICBzZWxlY3Rpb246IHsgYW5jaG9yOiBjaGFuZ2VzLm1hcFBvcyhkcm9wUG9zLCAtMSksIGhlYWQ6IGNoYW5nZXMubWFwUG9zKGRyb3BQb3MsIDEpIH0sXG4gICAgICAgIHVzZXJFdmVudDogZGVsID8gXCJtb3ZlLmRyb3BcIiA6IFwiaW5wdXQuZHJvcFwiXG4gICAgfSk7XG4gICAgdmlldy5pbnB1dFN0YXRlLmRyYWdnZWRDb250ZW50ID0gbnVsbDtcbn1cbmhhbmRsZXJzLmRyb3AgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBpZiAoIWV2ZW50LmRhdGFUcmFuc2ZlcilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgZmlsZXMgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCkgeyAvLyBGb3IgYSBmaWxlIGRyb3AsIHJlYWQgdGhlIGZpbGUncyB0ZXh0LlxuICAgICAgICBsZXQgdGV4dCA9IEFycmF5KGZpbGVzLmxlbmd0aCksIHJlYWQgPSAwO1xuICAgICAgICBsZXQgZmluaXNoRmlsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgrK3JlYWQgPT0gZmlsZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGRyb3BUZXh0KHZpZXcsIGV2ZW50LCB0ZXh0LmZpbHRlcihzID0+IHMgIT0gbnVsbCkuam9pbih2aWV3LnN0YXRlLmxpbmVCcmVhayksIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyO1xuICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmaW5pc2hGaWxlO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIS9bXFx4MDAtXFx4MDhcXHgwZS1cXHgxZl17Mn0vLnRlc3QocmVhZGVyLnJlc3VsdCkpXG4gICAgICAgICAgICAgICAgICAgIHRleHRbaV0gPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAgICAgICAgIGZpbmlzaEZpbGUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgdGV4dCA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiVGV4dFwiKTtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgIGRyb3BUZXh0KHZpZXcsIGV2ZW50LCB0ZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5oYW5kbGVycy5wYXN0ZSA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB2aWV3Lm9ic2VydmVyLmZsdXNoKCk7XG4gICAgbGV0IGRhdGEgPSBicm9rZW5DbGlwYm9hcmRBUEkgPyBudWxsIDogZXZlbnQuY2xpcGJvYXJkRGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBkb1Bhc3RlKHZpZXcsIGRhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIikgfHwgZGF0YS5nZXREYXRhKFwidGV4dC91cmktbGlzdFwiKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FwdHVyZVBhc3RlKHZpZXcpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGNhcHR1cmVDb3B5KHZpZXcsIHRleHQpIHtcbiAgICAvLyBUaGUgZXh0cmEgd3JhcHBlciBpcyBzb21laG93IG5lY2Vzc2FyeSBvbiBJRS9FZGdlIHRvIHByZXZlbnQgdGhlXG4gICAgLy8gY29udGVudCBmcm9tIGJlaW5nIG1hbmdsZWQgd2hlbiBpdCBpcyBwdXQgb250byB0aGUgY2xpcGJvYXJkXG4gICAgbGV0IHBhcmVudCA9IHZpZXcuZG9tLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgdGFyZ2V0ID0gcGFyZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSk7XG4gICAgdGFyZ2V0LnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweFwiO1xuICAgIHRhcmdldC52YWx1ZSA9IHRleHQ7XG4gICAgdGFyZ2V0LmZvY3VzKCk7XG4gICAgdGFyZ2V0LnNlbGVjdGlvbkVuZCA9IHRleHQubGVuZ3RoO1xuICAgIHRhcmdldC5zZWxlY3Rpb25TdGFydCA9IDA7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIH0sIDUwKTtcbn1cbmZ1bmN0aW9uIGNvcGllZFJhbmdlKHN0YXRlKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBbXSwgcmFuZ2VzID0gW10sIGxpbmV3aXNlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcylcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHN0YXRlLnNsaWNlRG9jKHJhbmdlLmZyb20sIHJhbmdlLnRvKSk7XG4gICAgICAgICAgICByYW5nZXMucHVzaChyYW5nZSk7XG4gICAgICAgIH1cbiAgICBpZiAoIWNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgc2VsZWN0ZWQsIGRvIGEgbGluZS13aXNlIGNvcHlcbiAgICAgICAgbGV0IHVwdG8gPSAtMTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tIH0gb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGZyb20pO1xuICAgICAgICAgICAgaWYgKGxpbmUubnVtYmVyID4gdXB0bykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaChsaW5lLnRleHQpO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCB0bzogTWF0aC5taW4oc3RhdGUuZG9jLmxlbmd0aCwgbGluZS50byArIDEpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXB0byA9IGxpbmUubnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIGxpbmV3aXNlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdGV4dDogdGV4dEZpbHRlcihzdGF0ZSwgY2xpcGJvYXJkT3V0cHV0RmlsdGVyLCBjb250ZW50LmpvaW4oc3RhdGUubGluZUJyZWFrKSksIHJhbmdlcywgbGluZXdpc2UgfTtcbn1cbmxldCBsYXN0TGluZXdpc2VDb3B5ID0gbnVsbDtcbmhhbmRsZXJzLmNvcHkgPSBoYW5kbGVycy5jdXQgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBsZXQgeyB0ZXh0LCByYW5nZXMsIGxpbmV3aXNlIH0gPSBjb3BpZWRSYW5nZSh2aWV3LnN0YXRlKTtcbiAgICBpZiAoIXRleHQgJiYgIWxpbmV3aXNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGFzdExpbmV3aXNlQ29weSA9IGxpbmV3aXNlID8gdGV4dCA6IG51bGw7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJjdXRcIiAmJiAhdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBjaGFuZ2VzOiByYW5nZXMsXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgICAgIHVzZXJFdmVudDogXCJkZWxldGUuY3V0XCJcbiAgICAgICAgfSk7XG4gICAgbGV0IGRhdGEgPSBicm9rZW5DbGlwYm9hcmRBUEkgPyBudWxsIDogZXZlbnQuY2xpcGJvYXJkRGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmNsZWFyRGF0YSgpO1xuICAgICAgICBkYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsIHRleHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhcHR1cmVDb3B5KHZpZXcsIHRleHQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmNvbnN0IGlzRm9jdXNDaGFuZ2UgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbmZ1bmN0aW9uIGZvY3VzQ2hhbmdlVHJhbnNhY3Rpb24oc3RhdGUsIGZvY3VzKSB7XG4gICAgbGV0IGVmZmVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBnZXRFZmZlY3Qgb2Ygc3RhdGUuZmFjZXQoZm9jdXNDaGFuZ2VFZmZlY3QpKSB7XG4gICAgICAgIGxldCBlZmZlY3QgPSBnZXRFZmZlY3Qoc3RhdGUsIGZvY3VzKTtcbiAgICAgICAgaWYgKGVmZmVjdClcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaChlZmZlY3QpO1xuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0cy5sZW5ndGggPyBzdGF0ZS51cGRhdGUoeyBlZmZlY3RzLCBhbm5vdGF0aW9uczogaXNGb2N1c0NoYW5nZS5vZih0cnVlKSB9KSA6IG51bGw7XG59XG5mdW5jdGlvbiB1cGRhdGVGb3JGb2N1c0NoYW5nZSh2aWV3KSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGxldCBmb2N1cyA9IHZpZXcuaGFzRm9jdXM7XG4gICAgICAgIGlmIChmb2N1cyAhPSB2aWV3LmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkKSB7XG4gICAgICAgICAgICBsZXQgdHIgPSBmb2N1c0NoYW5nZVRyYW5zYWN0aW9uKHZpZXcuc3RhdGUsIGZvY3VzKTtcbiAgICAgICAgICAgIGlmICh0cilcbiAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB2aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgIH1cbiAgICB9LCAxMCk7XG59XG5vYnNlcnZlcnMuZm9jdXMgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0U3RhdGUubGFzdEZvY3VzVGltZSA9IERhdGUubm93KCk7XG4gICAgLy8gV2hlbiBmb2N1c2luZyByZXNldCB0aGUgc2Nyb2xsIHBvc2l0aW9uLCBtb3ZlIGl0IGJhY2sgdG8gd2hlcmUgaXQgd2FzXG4gICAgaWYgKCF2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgJiYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsVG9wIHx8IHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsTGVmdCkpIHtcbiAgICAgICAgdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxUb3A7XG4gICAgICAgIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgPSB2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbExlZnQ7XG4gICAgfVxuICAgIHVwZGF0ZUZvckZvY3VzQ2hhbmdlKHZpZXcpO1xufTtcbm9ic2VydmVycy5ibHVyID0gdmlldyA9PiB7XG4gICAgdmlldy5vYnNlcnZlci5jbGVhclNlbGVjdGlvblJhbmdlKCk7XG4gICAgdXBkYXRlRm9yRm9jdXNDaGFuZ2Uodmlldyk7XG59O1xub2JzZXJ2ZXJzLmNvbXBvc2l0aW9uc3RhcnQgPSBvYnNlcnZlcnMuY29tcG9zaXRpb251cGRhdGUgPSB2aWV3ID0+IHtcbiAgICBpZiAodmlldy5vYnNlcnZlci5lZGl0Q29udGV4dClcbiAgICAgICAgcmV0dXJuOyAvLyBDb21wb3NpdGlvbiBoYW5kbGVkIGJ5IGVkaXQgY29udGV4dFxuICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9PSBudWxsKVxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IHRydWU7XG4gICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwKSB7XG4gICAgICAgIC8vIEZJWE1FIHBvc3NpYmx5IHNldCBhIHRpbWVvdXQgdG8gY2xlYXIgaXQgYWdhaW4gb24gQW5kcm9pZFxuICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gMDtcbiAgICB9XG59O1xub2JzZXJ2ZXJzLmNvbXBvc2l0aW9uZW5kID0gdmlldyA9PiB7XG4gICAgaWYgKHZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpXG4gICAgICAgIHJldHVybjsgLy8gQ29tcG9zaXRpb24gaGFuZGxlZCBieSBlZGl0IGNvbnRleHRcbiAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gLTE7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRW5kZWRBdCA9IERhdGUubm93KCk7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0tleSA9IHRydWU7XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSA9IHZpZXcub2JzZXJ2ZXIucGVuZGluZ1JlY29yZHMoKS5sZW5ndGggPiAwO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gbnVsbDtcbiAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5hbmRyb2lkKSB7XG4gICAgICAgIC8vIERlbGF5IGZsdXNoaW5nIGZvciBhIGJpdCBvbiBBbmRyb2lkIGJlY2F1c2UgaXQnbGwgb2Z0ZW4gZmlyZSBhXG4gICAgICAgIC8vIGJ1bmNoIG9mIGNvbnRyYWRpY3RvcnkgY2hhbmdlcyBpbiBhIHJvdyBhdCBlbmQgb2YgY29tcG9zaXRvblxuICAgICAgICB2aWV3Lm9ic2VydmVyLmZsdXNoU29vbigpO1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25QZW5kaW5nQ2hhbmdlKSB7XG4gICAgICAgIC8vIElmIHdlIGZvdW5kIHBlbmRpbmcgcmVjb3Jkcywgc2NoZWR1bGUgYSBmbHVzaC5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB2aWV3Lm9ic2VydmVyLmZsdXNoKCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBtYWtlIHN1cmUgdGhhdCwgaWYgbm8gY2hhbmdlcyBjb21lIGluIHNvb24sIHRoZVxuICAgICAgICAvLyBjb21wb3NpdGlvbiB2aWV3IGlzIGNsZWFyZWQuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPCAwICYmIHZpZXcuZG9jVmlldy5oYXNDb21wb3NpdGlvbilcbiAgICAgICAgICAgICAgICB2aWV3LnVwZGF0ZShbXSk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9XG59O1xub2JzZXJ2ZXJzLmNvbnRleHRtZW51ID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RDb250ZXh0TWVudSA9IERhdGUubm93KCk7XG59O1xuaGFuZGxlcnMuYmVmb3JlaW5wdXQgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIC8vIEluIEVkaXRDb250ZXh0IG1vZGUsIHdlIG11c3QgaGFuZGxlIGluc2VydFJlcGxhY2VtZW50VGV4dCBldmVudHNcbiAgICAvLyBkaXJlY3RseSwgdG8gbWFrZSBzcGVsbCBjaGVja2luZyBjb3JyZWN0aW9ucyB3b3JrXG4gICAgaWYgKGV2ZW50LmlucHV0VHlwZSA9PSBcImluc2VydFJlcGxhY2VtZW50VGV4dFwiICYmIHZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpIHtcbiAgICAgICAgbGV0IHRleHQgPSAoX2EgPSBldmVudC5kYXRhVHJhbnNmZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSwgcmFuZ2VzID0gZXZlbnQuZ2V0VGFyZ2V0UmFuZ2VzKCk7XG4gICAgICAgIGlmICh0ZXh0ICYmIHJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByID0gcmFuZ2VzWzBdO1xuICAgICAgICAgICAgbGV0IGZyb20gPSB2aWV3LnBvc0F0RE9NKHIuc3RhcnRDb250YWluZXIsIHIuc3RhcnRPZmZzZXQpLCB0byA9IHZpZXcucG9zQXRET00oci5lbmRDb250YWluZXIsIHIuZW5kT2Zmc2V0KTtcbiAgICAgICAgICAgIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgeyBmcm9tLCB0bywgaW5zZXJ0OiB2aWV3LnN0YXRlLnRvVGV4dCh0ZXh0KSB9LCBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJlY2F1c2UgQ2hyb21lIEFuZHJvaWQgZG9lc24ndCBmaXJlIHVzZWZ1bCBrZXkgZXZlbnRzLCB1c2VcbiAgICAvLyBiZWZvcmVpbnB1dCB0byBkZXRlY3QgYmFja3NwYWNlIChhbmQgcG9zc2libHkgZW50ZXIgYW5kIGRlbGV0ZSxcbiAgICAvLyBidXQgdGhvc2UgdXN1YWxseSBkb24ndCBldmVuIHNlZW0gdG8gZmlyZSBiZWZvcmVpbnB1dCBldmVudHMgYXRcbiAgICAvLyB0aGUgbW9tZW50KSBhbmQgZmFrZSBhIGtleSBldmVudCBmb3IgaXQuXG4gICAgLy9cbiAgICAvLyAocHJldmVudERlZmF1bHQgb24gYmVmb3JlaW5wdXQsIHRob3VnaCBzdXBwb3J0ZWQgaW4gdGhlIHNwZWMsXG4gICAgLy8gc2VlbXMgdG8gZG8gbm90aGluZyBhdCBhbGwgb24gQ2hyb21lKS5cbiAgICBsZXQgcGVuZGluZztcbiAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5hbmRyb2lkICYmIChwZW5kaW5nID0gUGVuZGluZ0tleXMuZmluZChrZXkgPT4ga2V5LmlucHV0VHlwZSA9PSBldmVudC5pbnB1dFR5cGUpKSkge1xuICAgICAgICB2aWV3Lm9ic2VydmVyLmRlbGF5QW5kcm9pZEtleShwZW5kaW5nLmtleSwgcGVuZGluZy5rZXlDb2RlKTtcbiAgICAgICAgaWYgKHBlbmRpbmcua2V5ID09IFwiQmFja3NwYWNlXCIgfHwgcGVuZGluZy5rZXkgPT0gXCJEZWxldGVcIikge1xuICAgICAgICAgICAgbGV0IHN0YXJ0Vmlld0hlaWdodCA9ICgoX2IgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oZWlnaHQpIHx8IDA7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gQmFja3NwYWNpbmcgbmVhciB1bmVkaXRhYmxlIG5vZGVzIG9uIENocm9tZSBBbmRyb2lkIHNvbWV0aW1lc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NlcyB0aGUgdmlydHVhbCBrZXlib2FyZC4gVGhpcyB0cmllcyB0byBjcnVkZWx5IGRldGVjdFxuICAgICAgICAgICAgICAgIC8vIHRoYXQgYW5kIHJlZm9jdXMgdG8gZ2V0IGl0IGJhY2suXG4gICAgICAgICAgICAgICAgaWYgKCgoKF9hID0gd2luZG93LnZpc3VhbFZpZXdwb3J0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVpZ2h0KSB8fCAwKSA+IHN0YXJ0Vmlld0hlaWdodCArIDEwICYmIHZpZXcuaGFzRm9jdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJyb3dzZXIuaW9zICYmIGV2ZW50LmlucHV0VHlwZSA9PSBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCIpIHtcbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uLCBET00gY2hhbmdlcyAoYW5kIGJlZm9yZWlucHV0KSBoYXBwZW4gX2JlZm9yZV9cbiAgICAgICAgLy8gdGhlIGtleSBldmVudCBmb3IgY3RybC1kIG9uIGlPUyB3aGVuIHVzaW5nIGFuIGV4dGVybmFsXG4gICAgICAgIC8vIGtleWJvYXJkLlxuICAgICAgICB2aWV3Lm9ic2VydmVyLmZsdXNoU29vbigpO1xuICAgIH1cbiAgICAvLyBTYWZhcmkgd2lsbCBvY2Nhc2lvbmFsbHkgZm9yZ2V0IHRvIGZpcmUgY29tcG9zaXRpb25lbmQgYXQgdGhlIGVuZCBvZiBhIGRlYWQta2V5IGNvbXBvc2l0aW9uXG4gICAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGV2ZW50LmlucHV0VHlwZSA9PSBcImluc2VydFRleHRcIiAmJiB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDApIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvYnNlcnZlcnMuY29tcG9zaXRpb25lbmQodmlldywgZXZlbnQpLCAyMCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5jb25zdCBhcHBsaWVkRmlyZWZveEhhY2sgPSAvKkBfX1BVUkVfXyovbmV3IFNldDtcbi8vIEluIEZpcmVmb3gsIHdoZW4gY3V0L2NvcHkgaGFuZGxlcnMgYXJlIGFkZGVkIHRvIHRoZSBkb2N1bWVudCwgdGhhdFxuLy8gc29tZWhvdyBhdm9pZHMgYSBidWcgd2hlcmUgdGhvc2UgZXZlbnRzIGFyZW4ndCBmaXJlZCB3aGVuIHRoZVxuLy8gc2VsZWN0aW9uIGlzIGVtcHR5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvZGV2L2lzc3Vlcy8xMDgyXG4vLyBhbmQgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9OTk1OTYxXG5mdW5jdGlvbiBmaXJlZm94Q29weUN1dEhhY2soZG9jKSB7XG4gICAgaWYgKCFhcHBsaWVkRmlyZWZveEhhY2suaGFzKGRvYykpIHtcbiAgICAgICAgYXBwbGllZEZpcmVmb3hIYWNrLmFkZChkb2MpO1xuICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgKCkgPT4geyB9KTtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJjdXRcIiwgKCkgPT4geyB9KTtcbiAgICB9XG59XG5cbmNvbnN0IHdyYXBwaW5nV2hpdGVTcGFjZSA9IFtcInByZS13cmFwXCIsIFwibm9ybWFsXCIsIFwicHJlLWxpbmVcIiwgXCJicmVhay1zcGFjZXNcIl07XG4vLyBVc2VkIHRvIHRyYWNrLCBkdXJpbmcgdXBkYXRlSGVpZ2h0LCBpZiBhbnkgYWN0dWFsIGhlaWdodHMgY2hhbmdlZFxubGV0IGhlaWdodENoYW5nZUZsYWcgPSBmYWxzZTtcbmZ1bmN0aW9uIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZygpIHsgaGVpZ2h0Q2hhbmdlRmxhZyA9IGZhbHNlOyB9XG5jbGFzcyBIZWlnaHRPcmFjbGUge1xuICAgIGNvbnN0cnVjdG9yKGxpbmVXcmFwcGluZykge1xuICAgICAgICB0aGlzLmxpbmVXcmFwcGluZyA9IGxpbmVXcmFwcGluZztcbiAgICAgICAgdGhpcy5kb2MgPSBUZXh0LmVtcHR5O1xuICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXMgPSB7fTtcbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gMTQ7IC8vIFRoZSBoZWlnaHQgb2YgYW4gZW50aXJlIGxpbmUgKGxpbmUtaGVpZ2h0KVxuICAgICAgICB0aGlzLmNoYXJXaWR0aCA9IDc7XG4gICAgICAgIHRoaXMudGV4dEhlaWdodCA9IDE0OyAvLyBUaGUgaGVpZ2h0IG9mIHRoZSBhY3R1YWwgZm9udCAoZm9udC1zaXplKVxuICAgICAgICB0aGlzLmxpbmVMZW5ndGggPSAzMDtcbiAgICB9XG4gICAgaGVpZ2h0Rm9yR2FwKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHRoaXMuZG9jLmxpbmVBdCh0bykubnVtYmVyIC0gdGhpcy5kb2MubGluZUF0KGZyb20pLm51bWJlciArIDE7XG4gICAgICAgIGlmICh0aGlzLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgIGxpbmVzICs9IE1hdGgubWF4KDAsIE1hdGguY2VpbCgoKHRvIC0gZnJvbSkgLSAobGluZXMgKiB0aGlzLmxpbmVMZW5ndGggKiAwLjUpKSAvIHRoaXMubGluZUxlbmd0aCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lSGVpZ2h0ICogbGluZXM7XG4gICAgfVxuICAgIGhlaWdodEZvckxpbmUobGVuZ3RoKSB7XG4gICAgICAgIGlmICghdGhpcy5saW5lV3JhcHBpbmcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICBsZXQgbGluZXMgPSAxICsgTWF0aC5tYXgoMCwgTWF0aC5jZWlsKChsZW5ndGggLSB0aGlzLmxpbmVMZW5ndGgpIC8gTWF0aC5tYXgoMSwgdGhpcy5saW5lTGVuZ3RoIC0gNSkpKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzICogdGhpcy5saW5lSGVpZ2h0O1xuICAgIH1cbiAgICBzZXREb2MoZG9jKSB7IHRoaXMuZG9jID0gZG9jOyByZXR1cm4gdGhpczsgfVxuICAgIG11c3RSZWZyZXNoRm9yV3JhcHBpbmcod2hpdGVTcGFjZSkge1xuICAgICAgICByZXR1cm4gKHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTEpICE9IHRoaXMubGluZVdyYXBwaW5nO1xuICAgIH1cbiAgICBtdXN0UmVmcmVzaEZvckhlaWdodHMobGluZUhlaWdodHMpIHtcbiAgICAgICAgbGV0IG5ld0hlaWdodCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVIZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaCA9IGxpbmVIZWlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGggPCAwKSB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaGVpZ2h0U2FtcGxlc1tNYXRoLmZsb29yKGggKiAxMCldKSB7IC8vIFJvdW5kIHRvIC4xIHBpeGVsc1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzW01hdGguZmxvb3IoaCAqIDEwKV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdIZWlnaHQ7XG4gICAgfVxuICAgIHJlZnJlc2god2hpdGVTcGFjZSwgbGluZUhlaWdodCwgY2hhcldpZHRoLCB0ZXh0SGVpZ2h0LCBsaW5lTGVuZ3RoLCBrbm93bkhlaWdodHMpIHtcbiAgICAgICAgbGV0IGxpbmVXcmFwcGluZyA9IHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTE7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gTWF0aC5yb3VuZChsaW5lSGVpZ2h0KSAhPSBNYXRoLnJvdW5kKHRoaXMubGluZUhlaWdodCkgfHwgdGhpcy5saW5lV3JhcHBpbmcgIT0gbGluZVdyYXBwaW5nO1xuICAgICAgICB0aGlzLmxpbmVXcmFwcGluZyA9IGxpbmVXcmFwcGluZztcbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcbiAgICAgICAgdGhpcy5jaGFyV2lkdGggPSBjaGFyV2lkdGg7XG4gICAgICAgIHRoaXMudGV4dEhlaWdodCA9IHRleHRIZWlnaHQ7XG4gICAgICAgIHRoaXMubGluZUxlbmd0aCA9IGxpbmVMZW5ndGg7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga25vd25IZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGggPSBrbm93bkhlaWdodHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGggPCAwKVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXNbTWF0aC5mbG9vcihoICogMTApXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxufVxuLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBieSBgdXBkYXRlSGVpZ2h0YCB0byBtYWtlIERPTSBtZWFzdXJlbWVudHNcbi8vIGFycml2ZSBhdCB0aGUgcmlnaHQgbmlkZXMuIFRoZSBgaGVpZ2h0c2AgYXJyYXkgaXMgYSBzZXF1ZW5jZSBvZlxuLy8gYmxvY2sgaGVpZ2h0cywgc3RhcnRpbmcgZnJvbSBwb3NpdGlvbiBgZnJvbWAuXG5jbGFzcyBNZWFzdXJlZEhlaWdodHMge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIGhlaWdodHMpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5oZWlnaHRzID0gaGVpZ2h0cztcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIGdldCBtb3JlKCkgeyByZXR1cm4gdGhpcy5pbmRleCA8IHRoaXMuaGVpZ2h0cy5sZW5ndGg7IH1cbn1cbi8qKlxuUmVjb3JkIHVzZWQgdG8gcmVwcmVzZW50IGluZm9ybWF0aW9uIGFib3V0IGEgYmxvY2stbGV2ZWwgZWxlbWVudFxuaW4gdGhlIGVkaXRvciB2aWV3LlxuKi9cbmNsYXNzIEJsb2NrSW5mbyB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGxlbmd0aCwgXG4gICAgLyoqXG4gICAgVGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudCAocmVsYXRpdmUgdG8gdGhlIHRvcCBvZiB0aGVcbiAgICBkb2N1bWVudCkuXG4gICAgKi9cbiAgICB0b3AsIFxuICAgIC8qKlxuICAgIEl0cyBoZWlnaHQuXG4gICAgKi9cbiAgICBoZWlnaHQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbCBXZWlyZCBwYWNrZWQgZmllbGQgdGhhdCBob2xkcyBhbiBhcnJheSBvZiBjaGlsZHJlblxuICAgIGZvciBjb21wb3NpdGUgYmxvY2tzLCBhIGRlY29yYXRpb24gZm9yIGJsb2NrIHdpZGdldHMsIGFuZCBhXG4gICAgbnVtYmVyIGluZGljYXRpbmcgdGhlIGFtb3VudCBvZiB3aWRnZXQtY3JlYXRlIGxpbmUgYnJlYWtzIGZvclxuICAgIHRleHQgYmxvY2tzLlxuICAgICovXG4gICAgX2NvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fY29udGVudCA9IF9jb250ZW50O1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgdHlwZSBvZiBlbGVtZW50IHRoaXMgaXMuIFdoZW4gcXVlcnlpbmcgbGluZXMsIHRoaXMgbWF5IGJlXG4gICAgYW4gYXJyYXkgb2YgYWxsIHRoZSBibG9ja3MgdGhhdCBtYWtlIHVwIHRoZSBsaW5lLlxuICAgICovXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fY29udGVudCA9PSBcIm51bWJlclwiID8gQmxvY2tUeXBlLlRleHQgOlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLl9jb250ZW50KSA/IHRoaXMuX2NvbnRlbnQgOiB0aGlzLl9jb250ZW50LnR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIGVsZW1lbnQgYXMgYSBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMubGVuZ3RoOyB9XG4gICAgLyoqXG4gICAgVGhlIGJvdHRvbSBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGdldCBib3R0b20oKSB7IHJldHVybiB0aGlzLnRvcCArIHRoaXMuaGVpZ2h0OyB9XG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBhIHdpZGdldCBibG9jaywgdGhpcyB3aWxsIHJldHVybiB0aGUgd2lkZ2V0XG4gICAgYXNzb2NpYXRlZCB3aXRoIGl0LlxuICAgICovXG4gICAgZ2V0IHdpZGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnQgaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24gPyB0aGlzLl9jb250ZW50LndpZGdldCA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIElmIHRoaXMgaXMgYSB0ZXh0YmxvY2ssIHRoaXMgaG9sZHMgdGhlIG51bWJlciBvZiBsaW5lIGJyZWFrc1xuICAgIHRoYXQgYXBwZWFyIGluIHdpZGdldHMgaW5zaWRlIHRoZSBibG9jay5cbiAgICAqL1xuICAgIGdldCB3aWRnZXRMaW5lQnJlYWtzKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX2NvbnRlbnQgPT0gXCJudW1iZXJcIiA/IHRoaXMuX2NvbnRlbnQgOiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGpvaW4ob3RoZXIpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAoQXJyYXkuaXNBcnJheSh0aGlzLl9jb250ZW50KSA/IHRoaXMuX2NvbnRlbnQgOiBbdGhpc10pXG4gICAgICAgICAgICAuY29uY2F0KEFycmF5LmlzQXJyYXkob3RoZXIuX2NvbnRlbnQpID8gb3RoZXIuX2NvbnRlbnQgOiBbb3RoZXJdKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8odGhpcy5mcm9tLCB0aGlzLmxlbmd0aCArIG90aGVyLmxlbmd0aCwgdGhpcy50b3AsIHRoaXMuaGVpZ2h0ICsgb3RoZXIuaGVpZ2h0LCBjb250ZW50KTtcbiAgICB9XG59XG52YXIgUXVlcnlUeXBlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUXVlcnlUeXBlKSB7XG4gICAgUXVlcnlUeXBlW1F1ZXJ5VHlwZVtcIkJ5UG9zXCJdID0gMF0gPSBcIkJ5UG9zXCI7XG4gICAgUXVlcnlUeXBlW1F1ZXJ5VHlwZVtcIkJ5SGVpZ2h0XCJdID0gMV0gPSBcIkJ5SGVpZ2h0XCI7XG4gICAgUXVlcnlUeXBlW1F1ZXJ5VHlwZVtcIkJ5UG9zTm9IZWlnaHRcIl0gPSAyXSA9IFwiQnlQb3NOb0hlaWdodFwiO1xucmV0dXJuIFF1ZXJ5VHlwZX0pKFF1ZXJ5VHlwZSB8fCAoUXVlcnlUeXBlID0ge30pKTtcbmNvbnN0IEVwc2lsb24gPSAxZS0zO1xuY2xhc3MgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIC8vIFRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBjb3ZlcmVkXG4gICAgaGVpZ2h0LCAvLyBIZWlnaHQgb2YgdGhpcyBwYXJ0IG9mIHRoZSBkb2N1bWVudFxuICAgIGZsYWdzID0gMiAvKiBGbGFnLk91dGRhdGVkICovKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICBnZXQgb3V0ZGF0ZWQoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDIgLyogRmxhZy5PdXRkYXRlZCAqLykgPiAwOyB9XG4gICAgc2V0IG91dGRhdGVkKHZhbHVlKSB7IHRoaXMuZmxhZ3MgPSAodmFsdWUgPyAyIC8qIEZsYWcuT3V0ZGF0ZWQgKi8gOiAwKSB8ICh0aGlzLmZsYWdzICYgfjIgLyogRmxhZy5PdXRkYXRlZCAqLyk7IH1cbiAgICBzZXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmhlaWdodCAtIGhlaWdodCkgPiBFcHNpbG9uKVxuICAgICAgICAgICAgICAgIGhlaWdodENoYW5nZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQmFzZSBjYXNlIGlzIHRvIHJlcGxhY2UgYSBsZWFmIG5vZGUsIHdoaWNoIHNpbXBseSBidWlsZHMgYSB0cmVlXG4gICAgLy8gZnJvbSB0aGUgbmV3IG5vZGVzIGFuZCByZXR1cm5zIHRoYXQgKEhlaWdodE1hcEJyYW5jaCBhbmRcbiAgICAvLyBIZWlnaHRNYXBHYXAgb3ZlcnJpZGUgdGhpcyB0byBhY3R1YWxseSB1c2UgZnJvbS90bylcbiAgICByZXBsYWNlKF9mcm9tLCBfdG8sIG5vZGVzKSB7XG4gICAgICAgIHJldHVybiBIZWlnaHRNYXAub2Yobm9kZXMpO1xuICAgIH1cbiAgICAvLyBBZ2FpbiwgdGhlc2UgYXJlIGJhc2UgY2FzZXMsIGFuZCBhcmUgb3ZlcnJpZGRlbiBmb3IgYnJhbmNoIGFuZCBnYXAgbm9kZXMuXG4gICAgZGVjb21wb3NlTGVmdChfdG8sIHJlc3VsdCkgeyByZXN1bHQucHVzaCh0aGlzKTsgfVxuICAgIGRlY29tcG9zZVJpZ2h0KF9mcm9tLCByZXN1bHQpIHsgcmVzdWx0LnB1c2godGhpcyk7IH1cbiAgICBhcHBseUNoYW5nZXMoZGVjb3JhdGlvbnMsIG9sZERvYywgb3JhY2xlLCBjaGFuZ2VzKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXMsIGRvYyA9IG9yYWNsZS5kb2M7XG4gICAgICAgIGZvciAobGV0IGkgPSBjaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgeyBmcm9tQSwgdG9BLCBmcm9tQiwgdG9CIH0gPSBjaGFuZ2VzW2ldO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gbWUubGluZUF0KGZyb21BLCBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCwgb3JhY2xlLnNldERvYyhvbGREb2MpLCAwLCAwKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBzdGFydC50byA+PSB0b0EgPyBzdGFydCA6IG1lLmxpbmVBdCh0b0EsIFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0LCBvcmFjbGUsIDAsIDApO1xuICAgICAgICAgICAgdG9CICs9IGVuZC50byAtIHRvQTtcbiAgICAgICAgICAgIHRvQSA9IGVuZC50bztcbiAgICAgICAgICAgIHdoaWxlIChpID4gMCAmJiBzdGFydC5mcm9tIDw9IGNoYW5nZXNbaSAtIDFdLnRvQSkge1xuICAgICAgICAgICAgICAgIGZyb21BID0gY2hhbmdlc1tpIC0gMV0uZnJvbUE7XG4gICAgICAgICAgICAgICAgZnJvbUIgPSBjaGFuZ2VzW2kgLSAxXS5mcm9tQjtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgaWYgKGZyb21BIDwgc3RhcnQuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBtZS5saW5lQXQoZnJvbUEsIFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0LCBvcmFjbGUsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJvbUIgKz0gc3RhcnQuZnJvbSAtIGZyb21BO1xuICAgICAgICAgICAgZnJvbUEgPSBzdGFydC5mcm9tO1xuICAgICAgICAgICAgbGV0IG5vZGVzID0gTm9kZUJ1aWxkZXIuYnVpbGQob3JhY2xlLnNldERvYyhkb2MpLCBkZWNvcmF0aW9ucywgZnJvbUIsIHRvQik7XG4gICAgICAgICAgICBtZSA9IHJlcGxhY2UobWUsIG1lLnJlcGxhY2UoZnJvbUEsIHRvQSwgbm9kZXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWUudXBkYXRlSGVpZ2h0KG9yYWNsZSwgMCk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHsgcmV0dXJuIG5ldyBIZWlnaHRNYXBUZXh0KDAsIDApOyB9XG4gICAgLy8gbm9kZXMgdXNlcyBudWxsIHZhbHVlcyB0byBpbmRpY2F0ZSB0aGUgcG9zaXRpb24gb2YgbGluZSBicmVha3MuXG4gICAgLy8gVGhlcmUgYXJlIG5ldmVyIGxpbmUgYnJlYWtzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgdGhlIGFycmF5LCBvclxuICAgIC8vIHR3byBsaW5lIGJyZWFrcyBuZXh0IHRvIGVhY2ggb3RoZXIsIGFuZCB0aGUgYXJyYXkgaXNuJ3QgYWxsb3dlZFxuICAgIC8vIHRvIGJlIGVtcHR5IChzYW1lIHJlc3RyaWN0aW9ucyBhcyByZXR1cm4gdmFsdWUgZnJvbSB0aGUgYnVpbGRlcikuXG4gICAgc3RhdGljIG9mKG5vZGVzKSB7XG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSlcbiAgICAgICAgICAgIHJldHVybiBub2Rlc1swXTtcbiAgICAgICAgbGV0IGkgPSAwLCBqID0gbm9kZXMubGVuZ3RoLCBiZWZvcmUgPSAwLCBhZnRlciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmIChpID09IGopIHtcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlID4gYWZ0ZXIgKiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxpdCA9IG5vZGVzW2kgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0LmJyZWFrKVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKC0taSwgMSwgc3BsaXQubGVmdCwgbnVsbCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoLS1pLCAxLCBzcGxpdC5sZWZ0LCBzcGxpdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGogKz0gMSArIHNwbGl0LmJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgLT0gc3BsaXQuc2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWZ0ZXIgPiBiZWZvcmUgKiAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxpdCA9IG5vZGVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXQuYnJlYWspXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaiwgMSwgc3BsaXQubGVmdCwgbnVsbCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaiwgMSwgc3BsaXQubGVmdCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBqICs9IDIgKyBzcGxpdC5icmVhaztcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgLT0gc3BsaXQuc2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJlZm9yZSA8IGFmdGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2Rlc1tpKytdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0KVxuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgKz0gbmV4dC5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2Rlc1stLWpdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0KVxuICAgICAgICAgICAgICAgICAgICBhZnRlciArPSBuZXh0LnNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJyayA9IDA7XG4gICAgICAgIGlmIChub2Rlc1tpIC0gMV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgYnJrID0gMTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2Rlc1tpXSA9PSBudWxsKSB7XG4gICAgICAgICAgICBicmsgPSAxO1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGVpZ2h0TWFwQnJhbmNoKEhlaWdodE1hcC5vZihub2Rlcy5zbGljZSgwLCBpKSksIGJyaywgSGVpZ2h0TWFwLm9mKG5vZGVzLnNsaWNlKGopKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVwbGFjZShvbGQsIHZhbCkge1xuICAgIGlmIChvbGQgPT0gdmFsKVxuICAgICAgICByZXR1cm4gb2xkO1xuICAgIGlmIChvbGQuY29uc3RydWN0b3IgIT0gdmFsLmNvbnN0cnVjdG9yKVxuICAgICAgICBoZWlnaHRDaGFuZ2VGbGFnID0gdHJ1ZTtcbiAgICByZXR1cm4gdmFsO1xufVxuSGVpZ2h0TWFwLnByb3RvdHlwZS5zaXplID0gMTtcbmNsYXNzIEhlaWdodE1hcEJsb2NrIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGhlaWdodCwgZGVjbykge1xuICAgICAgICBzdXBlcihsZW5ndGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuZGVjbyA9IGRlY287XG4gICAgfVxuICAgIGJsb2NrQXQoX2hlaWdodCwgX29yYWNsZSwgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8ob2Zmc2V0LCB0aGlzLmxlbmd0aCwgdG9wLCB0aGlzLmhlaWdodCwgdGhpcy5kZWNvIHx8IDApO1xuICAgIH1cbiAgICBsaW5lQXQoX3ZhbHVlLCBfdHlwZSwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9ja0F0KDAsIG9yYWNsZSwgdG9wLCBvZmZzZXQpO1xuICAgIH1cbiAgICBmb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCB0b3AsIG9mZnNldCwgZikge1xuICAgICAgICBpZiAoZnJvbSA8PSBvZmZzZXQgKyB0aGlzLmxlbmd0aCAmJiB0byA+PSBvZmZzZXQpXG4gICAgICAgICAgICBmKHRoaXMuYmxvY2tBdCgwLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSk7XG4gICAgfVxuICAgIHVwZGF0ZUhlaWdodChvcmFjbGUsIG9mZnNldCA9IDAsIF9mb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK10pO1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIGBibG9jaygke3RoaXMubGVuZ3RofSlgOyB9XG59XG5jbGFzcyBIZWlnaHRNYXBUZXh0IGV4dGVuZHMgSGVpZ2h0TWFwQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKGxlbmd0aCwgaGVpZ2h0LCBudWxsKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWQgPSAwOyAvLyBBbW91bnQgb2YgY29sbGFwc2VkIGNvbnRlbnQgaW4gdGhlIGxpbmVcbiAgICAgICAgdGhpcy53aWRnZXRIZWlnaHQgPSAwOyAvLyBNYXhpbXVtIGlubGluZSB3aWRnZXQgaGVpZ2h0XG4gICAgICAgIHRoaXMuYnJlYWtzID0gMDsgLy8gTnVtYmVyIG9mIHdpZGdldC1pbnRyb2R1Y2VkIGxpbmUgYnJlYWtzIG9uIHRoZSBsaW5lXG4gICAgfVxuICAgIGJsb2NrQXQoX2hlaWdodCwgX29yYWNsZSwgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8ob2Zmc2V0LCB0aGlzLmxlbmd0aCwgdG9wLCB0aGlzLmhlaWdodCwgdGhpcy5icmVha3MpO1xuICAgIH1cbiAgICByZXBsYWNlKF9mcm9tLCBfdG8sIG5vZGVzKSB7XG4gICAgICAgIGxldCBub2RlID0gbm9kZXNbMF07XG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT0gMSAmJiAobm9kZSBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQgfHwgbm9kZSBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcCAmJiAobm9kZS5mbGFncyAmIDQgLyogRmxhZy5TaW5nbGVMaW5lICovKSkgJiZcbiAgICAgICAgICAgIE1hdGguYWJzKHRoaXMubGVuZ3RoIC0gbm9kZS5sZW5ndGgpIDwgMTApIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgSGVpZ2h0TWFwVGV4dChub2RlLmxlbmd0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3V0ZGF0ZWQpXG4gICAgICAgICAgICAgICAgbm9kZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBmb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK10pO1xuICAgICAgICBlbHNlIGlmIChmb3JjZSB8fCB0aGlzLm91dGRhdGVkKVxuICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQoTWF0aC5tYXgodGhpcy53aWRnZXRIZWlnaHQsIG9yYWNsZS5oZWlnaHRGb3JMaW5lKHRoaXMubGVuZ3RoIC0gdGhpcy5jb2xsYXBzZWQpKSArXG4gICAgICAgICAgICAgICAgdGhpcy5icmVha3MgKiBvcmFjbGUubGluZUhlaWdodCk7XG4gICAgICAgIHRoaXMub3V0ZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYGxpbmUoJHt0aGlzLmxlbmd0aH0ke3RoaXMuY29sbGFwc2VkID8gLXRoaXMuY29sbGFwc2VkIDogXCJcIn0ke3RoaXMud2lkZ2V0SGVpZ2h0ID8gXCI6XCIgKyB0aGlzLndpZGdldEhlaWdodCA6IFwiXCJ9KWA7XG4gICAgfVxufVxuY2xhc3MgSGVpZ2h0TWFwR2FwIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgpIHsgc3VwZXIobGVuZ3RoLCAwKTsgfVxuICAgIGhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IGZpcnN0TGluZSA9IG9yYWNsZS5kb2MubGluZUF0KG9mZnNldCkubnVtYmVyLCBsYXN0TGluZSA9IG9yYWNsZS5kb2MubGluZUF0KG9mZnNldCArIHRoaXMubGVuZ3RoKS5udW1iZXI7XG4gICAgICAgIGxldCBsaW5lcyA9IGxhc3RMaW5lIC0gZmlyc3RMaW5lICsgMTtcbiAgICAgICAgbGV0IHBlckxpbmUsIHBlckNoYXIgPSAwO1xuICAgICAgICBpZiAob3JhY2xlLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgbGV0IHRvdGFsUGVyTGluZSA9IE1hdGgubWluKHRoaXMuaGVpZ2h0LCBvcmFjbGUubGluZUhlaWdodCAqIGxpbmVzKTtcbiAgICAgICAgICAgIHBlckxpbmUgPSB0b3RhbFBlckxpbmUgLyBsaW5lcztcbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IGxpbmVzICsgMSlcbiAgICAgICAgICAgICAgICBwZXJDaGFyID0gKHRoaXMuaGVpZ2h0IC0gdG90YWxQZXJMaW5lKSAvICh0aGlzLmxlbmd0aCAtIGxpbmVzIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZXJMaW5lID0gdGhpcy5oZWlnaHQgLyBsaW5lcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmaXJzdExpbmUsIGxhc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH07XG4gICAgfVxuICAgIGJsb2NrQXQoaGVpZ2h0LCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCB7IGZpcnN0TGluZSwgbGFzdExpbmUsIHBlckxpbmUsIHBlckNoYXIgfSA9IHRoaXMuaGVpZ2h0TWV0cmljcyhvcmFjbGUsIG9mZnNldCk7XG4gICAgICAgIGlmIChvcmFjbGUubGluZVdyYXBwaW5nKSB7XG4gICAgICAgICAgICBsZXQgZ3Vlc3MgPSBvZmZzZXQgKyAoaGVpZ2h0IDwgb3JhY2xlLmxpbmVIZWlnaHQgPyAwXG4gICAgICAgICAgICAgICAgOiBNYXRoLnJvdW5kKE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChoZWlnaHQgLSB0b3ApIC8gdGhpcy5oZWlnaHQpKSAqIHRoaXMubGVuZ3RoKSk7XG4gICAgICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KGd1ZXNzKSwgbGluZUhlaWdodCA9IHBlckxpbmUgKyBsaW5lLmxlbmd0aCAqIHBlckNoYXI7XG4gICAgICAgICAgICBsZXQgbGluZVRvcCA9IE1hdGgubWF4KHRvcCwgaGVpZ2h0IC0gbGluZUhlaWdodCAvIDIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8obGluZS5mcm9tLCBsaW5lLmxlbmd0aCwgbGluZVRvcCwgbGluZUhlaWdodCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKGxhc3RMaW5lIC0gZmlyc3RMaW5lLCBNYXRoLmZsb29yKChoZWlnaHQgLSB0b3ApIC8gcGVyTGluZSkpKTtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIGxlbmd0aCB9ID0gb3JhY2xlLmRvYy5saW5lKGZpcnN0TGluZSArIGxpbmUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8oZnJvbSwgbGVuZ3RoLCB0b3AgKyBwZXJMaW5lICogbGluZSwgcGVyTGluZSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGluZUF0KHZhbHVlLCB0eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGlmICh0eXBlID09IFF1ZXJ5VHlwZS5CeUhlaWdodClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2NrQXQodmFsdWUsIG9yYWNsZSwgdG9wLCBvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZSA9PSBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCkge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IG9yYWNsZS5kb2MubGluZUF0KHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGZyb20sIHRvIC0gZnJvbSwgMCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH0gPSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpO1xuICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KHZhbHVlKSwgbGluZUhlaWdodCA9IHBlckxpbmUgKyBsaW5lLmxlbmd0aCAqIHBlckNoYXI7XG4gICAgICAgIGxldCBsaW5lc0Fib3ZlID0gbGluZS5udW1iZXIgLSBmaXJzdExpbmU7XG4gICAgICAgIGxldCBsaW5lVG9wID0gdG9wICsgcGVyTGluZSAqIGxpbmVzQWJvdmUgKyBwZXJDaGFyICogKGxpbmUuZnJvbSAtIG9mZnNldCAtIGxpbmVzQWJvdmUpO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhsaW5lLmZyb20sIGxpbmUubGVuZ3RoLCBNYXRoLm1heCh0b3AsIE1hdGgubWluKGxpbmVUb3AsIHRvcCArIHRoaXMuaGVpZ2h0IC0gbGluZUhlaWdodCkpLCBsaW5lSGVpZ2h0LCAwKTtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIG9yYWNsZSwgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgZnJvbSA9IE1hdGgubWF4KGZyb20sIG9mZnNldCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odG8sIG9mZnNldCArIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH0gPSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBmcm9tLCBsaW5lVG9wID0gdG9wOyBwb3MgPD0gdG87KSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAocG9zID09IGZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgbGluZXNBYm92ZSA9IGxpbmUubnVtYmVyIC0gZmlyc3RMaW5lO1xuICAgICAgICAgICAgICAgIGxpbmVUb3AgKz0gcGVyTGluZSAqIGxpbmVzQWJvdmUgKyBwZXJDaGFyICogKGZyb20gLSBvZmZzZXQgLSBsaW5lc0Fib3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gcGVyTGluZSArIHBlckNoYXIgKiBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgIGYobmV3IEJsb2NrSW5mbyhsaW5lLmZyb20sIGxpbmUubGVuZ3RoLCBsaW5lVG9wLCBsaW5lSGVpZ2h0LCAwKSk7XG4gICAgICAgICAgICBsaW5lVG9wICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBwb3MgPSBsaW5lLnRvICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGZyb20sIHRvLCBub2Rlcykge1xuICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLmxlbmd0aCAtIHRvO1xuICAgICAgICBpZiAoYWZ0ZXIgPiAwKSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXApXG4gICAgICAgICAgICAgICAgbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV0gPSBuZXcgSGVpZ2h0TWFwR2FwKGxhc3QubGVuZ3RoICsgYWZ0ZXIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCwgbmV3IEhlaWdodE1hcEdhcChhZnRlciAtIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJvbSA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgaWYgKGZpcnN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICAgICAgICAgIG5vZGVzWzBdID0gbmV3IEhlaWdodE1hcEdhcChmcm9tICsgZmlyc3QubGVuZ3RoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBub2Rlcy51bnNoaWZ0KG5ldyBIZWlnaHRNYXBHYXAoZnJvbSAtIDEpLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICB9XG4gICAgZGVjb21wb3NlTGVmdCh0bywgcmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5ldyBIZWlnaHRNYXBHYXAodG8gLSAxKSwgbnVsbCk7XG4gICAgfVxuICAgIGRlY29tcG9zZVJpZ2h0KGZyb20sIHJlc3VsdCkge1xuICAgICAgICByZXN1bHQucHVzaChudWxsLCBuZXcgSGVpZ2h0TWFwR2FwKHRoaXMubGVuZ3RoIC0gZnJvbSAtIDEpKTtcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IGVuZCA9IG9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgKyB0aGlzLmxlbmd0aCAmJiBtZWFzdXJlZC5tb3JlKSB7XG4gICAgICAgICAgICAvLyBGaWxsIGluIHBhcnQgb2YgdGhpcyBnYXAgd2l0aCBtZWFzdXJlZCBsaW5lcy4gV2Uga25vdyB0aGVyZVxuICAgICAgICAgICAgLy8gY2FuJ3QgYmUgd2lkZ2V0cyBvciBjb2xsYXBzZWQgcmFuZ2VzIGluIHRob3NlIGxpbmVzLCBiZWNhdXNlXG4gICAgICAgICAgICAvLyB0aGV5IHdvdWxkIGFscmVhZHkgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBoZWlnaHRtYXAgKGdhcHNcbiAgICAgICAgICAgIC8vIG9ubHkgY29udGFpbiBwbGFpbiB0ZXh0KS5cbiAgICAgICAgICAgIGxldCBub2RlcyA9IFtdLCBwb3MgPSBNYXRoLm1heChvZmZzZXQsIG1lYXN1cmVkLmZyb20pLCBzaW5nbGVIZWlnaHQgPSAtMTtcbiAgICAgICAgICAgIGlmIChtZWFzdXJlZC5mcm9tID4gb2Zmc2V0KVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobmV3IEhlaWdodE1hcEdhcChtZWFzdXJlZC5mcm9tIC0gb2Zmc2V0IC0gMSkudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0KSk7XG4gICAgICAgICAgICB3aGlsZSAocG9zIDw9IGVuZCAmJiBtZWFzdXJlZC5tb3JlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IG9yYWNsZS5kb2MubGluZUF0KHBvcykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCk7XG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK107XG4gICAgICAgICAgICAgICAgaWYgKHNpbmdsZUhlaWdodCA9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguYWJzKGhlaWdodCAtIHNpbmdsZUhlaWdodCkgPj0gRXBzaWxvbilcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlSGVpZ2h0ID0gLTI7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBuZXcgSGVpZ2h0TWFwVGV4dChsZW4sIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgbGluZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgcG9zICs9IGxlbiArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZClcbiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG51bGwsIG5ldyBIZWlnaHRNYXBHYXAoZW5kIC0gcG9zKS51cGRhdGVIZWlnaHQob3JhY2xlLCBwb3MpKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBIZWlnaHRNYXAub2Yobm9kZXMpO1xuICAgICAgICAgICAgaWYgKHNpbmdsZUhlaWdodCA8IDAgfHwgTWF0aC5hYnMocmVzdWx0LmhlaWdodCAtIHRoaXMuaGVpZ2h0KSA+PSBFcHNpbG9uIHx8XG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2luZ2xlSGVpZ2h0IC0gdGhpcy5oZWlnaHRNZXRyaWNzKG9yYWNsZSwgb2Zmc2V0KS5wZXJMaW5lKSA+PSBFcHNpbG9uKVxuICAgICAgICAgICAgICAgIGhlaWdodENoYW5nZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2UodGhpcywgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmb3JjZSB8fCB0aGlzLm91dGRhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEhlaWdodChvcmFjbGUuaGVpZ2h0Rm9yR2FwKG9mZnNldCwgb2Zmc2V0ICsgdGhpcy5sZW5ndGgpKTtcbiAgICAgICAgICAgIHRoaXMub3V0ZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiBgZ2FwKCR7dGhpcy5sZW5ndGh9KWA7IH1cbn1cbmNsYXNzIEhlaWdodE1hcEJyYW5jaCBleHRlbmRzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVmdCwgYnJrLCByaWdodCkge1xuICAgICAgICBzdXBlcihsZWZ0Lmxlbmd0aCArIGJyayArIHJpZ2h0Lmxlbmd0aCwgbGVmdC5oZWlnaHQgKyByaWdodC5oZWlnaHQsIGJyayB8IChsZWZ0Lm91dGRhdGVkIHx8IHJpZ2h0Lm91dGRhdGVkID8gMiAvKiBGbGFnLk91dGRhdGVkICovIDogMCkpO1xuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxlZnQuc2l6ZSArIHJpZ2h0LnNpemU7XG4gICAgfVxuICAgIGdldCBicmVhaygpIHsgcmV0dXJuIHRoaXMuZmxhZ3MgJiAxIC8qIEZsYWcuQnJlYWsgKi87IH1cbiAgICBibG9ja0F0KGhlaWdodCwgb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICBsZXQgbWlkID0gdG9wICsgdGhpcy5sZWZ0LmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGhlaWdodCA8IG1pZCA/IHRoaXMubGVmdC5ibG9ja0F0KGhlaWdodCwgb3JhY2xlLCB0b3AsIG9mZnNldClcbiAgICAgICAgICAgIDogdGhpcy5yaWdodC5ibG9ja0F0KGhlaWdodCwgb3JhY2xlLCBtaWQsIG9mZnNldCArIHRoaXMubGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrKTtcbiAgICB9XG4gICAgbGluZUF0KHZhbHVlLCB0eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCByaWdodFRvcCA9IHRvcCArIHRoaXMubGVmdC5oZWlnaHQsIHJpZ2h0T2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGxldCBsZWZ0ID0gdHlwZSA9PSBRdWVyeVR5cGUuQnlIZWlnaHQgPyB2YWx1ZSA8IHJpZ2h0VG9wIDogdmFsdWUgPCByaWdodE9mZnNldDtcbiAgICAgICAgbGV0IGJhc2UgPSBsZWZ0ID8gdGhpcy5sZWZ0LmxpbmVBdCh2YWx1ZSwgdHlwZSwgb3JhY2xlLCB0b3AsIG9mZnNldClcbiAgICAgICAgICAgIDogdGhpcy5yaWdodC5saW5lQXQodmFsdWUsIHR5cGUsIG9yYWNsZSwgcmlnaHRUb3AsIHJpZ2h0T2Zmc2V0KTtcbiAgICAgICAgaWYgKHRoaXMuYnJlYWsgfHwgKGxlZnQgPyBiYXNlLnRvIDwgcmlnaHRPZmZzZXQgOiBiYXNlLmZyb20gPiByaWdodE9mZnNldCkpXG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgbGV0IHN1YlF1ZXJ5ID0gdHlwZSA9PSBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCA/IFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0IDogUXVlcnlUeXBlLkJ5UG9zO1xuICAgICAgICBpZiAobGVmdClcbiAgICAgICAgICAgIHJldHVybiBiYXNlLmpvaW4odGhpcy5yaWdodC5saW5lQXQocmlnaHRPZmZzZXQsIHN1YlF1ZXJ5LCBvcmFjbGUsIHJpZ2h0VG9wLCByaWdodE9mZnNldCkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmxpbmVBdChyaWdodE9mZnNldCwgc3ViUXVlcnksIG9yYWNsZSwgdG9wLCBvZmZzZXQpLmpvaW4oYmFzZSk7XG4gICAgfVxuICAgIGZvckVhY2hMaW5lKGZyb20sIHRvLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKSB7XG4gICAgICAgIGxldCByaWdodFRvcCA9IHRvcCArIHRoaXMubGVmdC5oZWlnaHQsIHJpZ2h0T2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrKSB7XG4gICAgICAgICAgICBpZiAoZnJvbSA8IHJpZ2h0T2Zmc2V0KVxuICAgICAgICAgICAgICAgIHRoaXMubGVmdC5mb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCB0b3AsIG9mZnNldCwgZik7XG4gICAgICAgICAgICBpZiAodG8gPj0gcmlnaHRPZmZzZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodC5mb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCByaWdodFRvcCwgcmlnaHRPZmZzZXQsIGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1pZCA9IHRoaXMubGluZUF0KHJpZ2h0T2Zmc2V0LCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgdG9wLCBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKGZyb20gPCBtaWQuZnJvbSlcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnQuZm9yRWFjaExpbmUoZnJvbSwgbWlkLmZyb20gLSAxLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKTtcbiAgICAgICAgICAgIGlmIChtaWQudG8gPj0gZnJvbSAmJiBtaWQuZnJvbSA8PSB0bylcbiAgICAgICAgICAgICAgICBmKG1pZCk7XG4gICAgICAgICAgICBpZiAodG8gPiBtaWQudG8pXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodC5mb3JFYWNoTGluZShtaWQudG8gKyAxLCB0bywgb3JhY2xlLCByaWdodFRvcCwgcmlnaHRPZmZzZXQsIGYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIG5vZGVzKSB7XG4gICAgICAgIGxldCByaWdodFN0YXJ0ID0gdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWs7XG4gICAgICAgIGlmICh0byA8IHJpZ2h0U3RhcnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlZCh0aGlzLmxlZnQucmVwbGFjZShmcm9tLCB0bywgbm9kZXMpLCB0aGlzLnJpZ2h0KTtcbiAgICAgICAgaWYgKGZyb20gPiB0aGlzLmxlZnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQodGhpcy5sZWZ0LCB0aGlzLnJpZ2h0LnJlcGxhY2UoZnJvbSAtIHJpZ2h0U3RhcnQsIHRvIC0gcmlnaHRTdGFydCwgbm9kZXMpKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAoZnJvbSA+IDApXG4gICAgICAgICAgICB0aGlzLmRlY29tcG9zZUxlZnQoZnJvbSwgcmVzdWx0KTtcbiAgICAgICAgbGV0IGxlZnQgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIG5vZGVzKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIG1lcmdlR2FwcyhyZXN1bHQsIGxlZnQgLSAxKTtcbiAgICAgICAgaWYgKHRvIDwgdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByaWdodCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmRlY29tcG9zZVJpZ2h0KHRvLCByZXN1bHQpO1xuICAgICAgICAgICAgbWVyZ2VHYXBzKHJlc3VsdCwgcmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIZWlnaHRNYXAub2YocmVzdWx0KTtcbiAgICB9XG4gICAgZGVjb21wb3NlTGVmdCh0bywgcmVzdWx0KSB7XG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0Lmxlbmd0aDtcbiAgICAgICAgaWYgKHRvIDw9IGxlZnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmRlY29tcG9zZUxlZnQodG8sIHJlc3VsdCk7XG4gICAgICAgIHJlc3VsdC5wdXNoKHRoaXMubGVmdCk7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrKSB7XG4gICAgICAgICAgICBsZWZ0Kys7XG4gICAgICAgICAgICBpZiAodG8gPj0gbGVmdClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPiBsZWZ0KVxuICAgICAgICAgICAgdGhpcy5yaWdodC5kZWNvbXBvc2VMZWZ0KHRvIC0gbGVmdCwgcmVzdWx0KTtcbiAgICB9XG4gICAgZGVjb21wb3NlUmlnaHQoZnJvbSwgcmVzdWx0KSB7XG4gICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0Lmxlbmd0aCwgcmlnaHQgPSBsZWZ0ICsgdGhpcy5icmVhaztcbiAgICAgICAgaWYgKGZyb20gPj0gcmlnaHQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5kZWNvbXBvc2VSaWdodChmcm9tIC0gcmlnaHQsIHJlc3VsdCk7XG4gICAgICAgIGlmIChmcm9tIDwgbGVmdClcbiAgICAgICAgICAgIHRoaXMubGVmdC5kZWNvbXBvc2VSaWdodChmcm9tLCByZXN1bHQpO1xuICAgICAgICBpZiAodGhpcy5icmVhayAmJiBmcm9tIDwgcmlnaHQpXG4gICAgICAgICAgICByZXN1bHQucHVzaChudWxsKTtcbiAgICAgICAgcmVzdWx0LnB1c2godGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGJhbGFuY2VkKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIGlmIChsZWZ0LnNpemUgPiAyICogcmlnaHQuc2l6ZSB8fCByaWdodC5zaXplID4gMiAqIGxlZnQuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiBIZWlnaHRNYXAub2YodGhpcy5icmVhayA/IFtsZWZ0LCBudWxsLCByaWdodF0gOiBbbGVmdCwgcmlnaHRdKTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gcmVwbGFjZSh0aGlzLmxlZnQsIGxlZnQpO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gcmVwbGFjZSh0aGlzLnJpZ2h0LCByaWdodCk7XG4gICAgICAgIHRoaXMuc2V0SGVpZ2h0KGxlZnQuaGVpZ2h0ICsgcmlnaHQuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGxlZnQub3V0ZGF0ZWQgfHwgcmlnaHQub3V0ZGF0ZWQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IGxlZnQuc2l6ZSArIHJpZ2h0LnNpemU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVmdC5sZW5ndGggKyB0aGlzLmJyZWFrICsgcmlnaHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IHsgbGVmdCwgcmlnaHQgfSA9IHRoaXMsIHJpZ2h0U3RhcnQgPSBvZmZzZXQgKyBsZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWssIHJlYmFsYW5jZSA9IG51bGw7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IG9mZnNldCArIGxlZnQubGVuZ3RoICYmIG1lYXN1cmVkLm1vcmUpXG4gICAgICAgICAgICByZWJhbGFuY2UgPSBsZWZ0ID0gbGVmdC51cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQsIGZvcmNlLCBtZWFzdXJlZCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxlZnQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0LCBmb3JjZSk7XG4gICAgICAgIGlmIChtZWFzdXJlZCAmJiBtZWFzdXJlZC5mcm9tIDw9IHJpZ2h0U3RhcnQgKyByaWdodC5sZW5ndGggJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHJlYmFsYW5jZSA9IHJpZ2h0ID0gcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UsIG1lYXN1cmVkKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmlnaHQudXBkYXRlSGVpZ2h0KG9yYWNsZSwgcmlnaHRTdGFydCwgZm9yY2UpO1xuICAgICAgICBpZiAocmViYWxhbmNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZWQobGVmdCwgcmlnaHQpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMubGVmdC5oZWlnaHQgKyB0aGlzLnJpZ2h0LmhlaWdodDtcbiAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLmxlZnQgKyAodGhpcy5icmVhayA/IFwiIFwiIDogXCItXCIpICsgdGhpcy5yaWdodDsgfVxufVxuZnVuY3Rpb24gbWVyZ2VHYXBzKG5vZGVzLCBhcm91bmQpIHtcbiAgICBsZXQgYmVmb3JlLCBhZnRlcjtcbiAgICBpZiAobm9kZXNbYXJvdW5kXSA9PSBudWxsICYmXG4gICAgICAgIChiZWZvcmUgPSBub2Rlc1thcm91bmQgLSAxXSkgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXAgJiZcbiAgICAgICAgKGFmdGVyID0gbm9kZXNbYXJvdW5kICsgMV0pIGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICBub2Rlcy5zcGxpY2UoYXJvdW5kIC0gMSwgMywgbmV3IEhlaWdodE1hcEdhcChiZWZvcmUubGVuZ3RoICsgMSArIGFmdGVyLmxlbmd0aCkpO1xufVxuY29uc3QgcmVsZXZhbnRXaWRnZXRIZWlnaHQgPSA1O1xuY2xhc3MgTm9kZUJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKHBvcywgb3JhY2xlKSB7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLm9yYWNsZSA9IG9yYWNsZTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICB0aGlzLmxpbmVTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSAtMTtcbiAgICAgICAgdGhpcy5jb3ZlcmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMud3JpdHRlblRvID0gcG9zO1xuICAgIH1cbiAgICBnZXQgaXNDb3ZlcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3ZlcmluZyAmJiB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gPT0gdGhpcy5jb3ZlcmluZztcbiAgICB9XG4gICAgc3BhbihfZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbih0bywgdGhpcy5saW5lRW5kKSwgbGFzdCA9IHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBsYXN0Lmxlbmd0aCArPSBlbmQgLSB0aGlzLnBvcztcbiAgICAgICAgICAgIGVsc2UgaWYgKGVuZCA+IHRoaXMucG9zIHx8ICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoZW5kIC0gdGhpcy5wb3MsIC0xKSk7XG4gICAgICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IGVuZDtcbiAgICAgICAgICAgIGlmICh0byA+IGVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXR0ZW5UbysrO1xuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgPSB0bztcbiAgICB9XG4gICAgcG9pbnQoZnJvbSwgdG8sIGRlY28pIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBkZWNvLmhlaWdodFJlbGV2YW50KSB7XG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZGVjby53aWRnZXQgPyBkZWNvLndpZGdldC5lc3RpbWF0ZWRIZWlnaHQgOiAwO1xuICAgICAgICAgICAgbGV0IGJyZWFrcyA9IGRlY28ud2lkZ2V0ID8gZGVjby53aWRnZXQubGluZUJyZWFrcyA6IDA7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMClcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSB0aGlzLm9yYWNsZS5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRvIC0gZnJvbTtcbiAgICAgICAgICAgIGlmIChkZWNvLmJsb2NrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRCbG9jayhuZXcgSGVpZ2h0TWFwQmxvY2sobGVuLCBoZWlnaHQsIGRlY28pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxlbiB8fCBicmVha3MgfHwgaGVpZ2h0ID49IHJlbGV2YW50V2lkZ2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaW5lRGVjbyhoZWlnaHQsIGJyZWFrcywgbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0byA+IGZyb20pIHtcbiAgICAgICAgICAgIHRoaXMuc3Bhbihmcm9tLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGluZUVuZCA+IC0xICYmIHRoaXMubGluZUVuZCA8IHRoaXMucG9zKVxuICAgICAgICAgICAgdGhpcy5saW5lRW5kID0gdGhpcy5vcmFjbGUuZG9jLmxpbmVBdCh0aGlzLnBvcykudG87XG4gICAgfVxuICAgIGVudGVyTGluZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVN0YXJ0ID4gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLm9yYWNsZS5kb2MubGluZUF0KHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLmxpbmVFbmQgPSB0bztcbiAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMud3JpdHRlblRvIDwgZnJvbSAtIDEgfHwgdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdID09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKHRoaXMuYmxhbmtDb250ZW50KHRoaXMud3JpdHRlblRvLCBmcm9tIC0gMSkpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcyA+IGZyb20pXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQodGhpcy5wb3MgLSBmcm9tLCAtMSkpO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zO1xuICAgIH1cbiAgICBibGFua0NvbnRlbnQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IGdhcCA9IG5ldyBIZWlnaHRNYXBHYXAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKHRoaXMub3JhY2xlLmRvYy5saW5lQXQoZnJvbSkudG8gPT0gdG8pXG4gICAgICAgICAgICBnYXAuZmxhZ3MgfD0gNCAvKiBGbGFnLlNpbmdsZUxpbmUgKi87XG4gICAgICAgIHJldHVybiBnYXA7XG4gICAgfVxuICAgIGVuc3VyZUxpbmUoKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggPyB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQpXG4gICAgICAgICAgICByZXR1cm4gbGFzdDtcbiAgICAgICAgbGV0IGxpbmUgPSBuZXcgSGVpZ2h0TWFwVGV4dCgwLCAtMSk7XG4gICAgICAgIHRoaXMubm9kZXMucHVzaChsaW5lKTtcbiAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIGFkZEJsb2NrKGJsb2NrKSB7XG4gICAgICAgIHRoaXMuZW50ZXJMaW5lKCk7XG4gICAgICAgIGxldCBkZWNvID0gYmxvY2suZGVjbztcbiAgICAgICAgaWYgKGRlY28gJiYgZGVjby5zdGFydFNpZGUgPiAwICYmICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlTGluZSgpO1xuICAgICAgICB0aGlzLm5vZGVzLnB1c2goYmxvY2spO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zID0gdGhpcy5wb3MgKyBibG9jay5sZW5ndGg7XG4gICAgICAgIGlmIChkZWNvICYmIGRlY28uZW5kU2lkZSA+IDApXG4gICAgICAgICAgICB0aGlzLmNvdmVyaW5nID0gYmxvY2s7XG4gICAgfVxuICAgIGFkZExpbmVEZWNvKGhlaWdodCwgYnJlYWtzLCBsZW5ndGgpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLmVuc3VyZUxpbmUoKTtcbiAgICAgICAgbGluZS5sZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgICBsaW5lLmNvbGxhcHNlZCArPSBsZW5ndGg7XG4gICAgICAgIGxpbmUud2lkZ2V0SGVpZ2h0ID0gTWF0aC5tYXgobGluZS53aWRnZXRIZWlnaHQsIGhlaWdodCk7XG4gICAgICAgIGxpbmUuYnJlYWtzICs9IGJyZWFrcztcbiAgICAgICAgdGhpcy53cml0dGVuVG8gPSB0aGlzLnBvcyA9IHRoaXMucG9zICsgbGVuZ3RoO1xuICAgIH1cbiAgICBmaW5pc2goZnJvbSkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMubm9kZXMubGVuZ3RoID09IDAgPyBudWxsIDogdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5saW5lU3RhcnQgPiAtMSAmJiAhKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0KSAmJiAhdGhpcy5pc0NvdmVyZWQpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IEhlaWdodE1hcFRleHQoMCwgLTEpKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy53cml0dGVuVG8gPCB0aGlzLnBvcyB8fCBsYXN0ID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2godGhpcy5ibGFua0NvbnRlbnQodGhpcy53cml0dGVuVG8sIHRoaXMucG9zKSk7XG4gICAgICAgIGxldCBwb3MgPSBmcm9tO1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIHRoaXMubm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgICAgICBub2RlLnVwZGF0ZUhlaWdodCh0aGlzLm9yYWNsZSwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBub2RlID8gbm9kZS5sZW5ndGggOiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVzO1xuICAgIH1cbiAgICAvLyBBbHdheXMgY2FsbGVkIHdpdGggYSByZWdpb24gdGhhdCBvbiBib3RoIHNpZGVzIGVpdGhlciBzdHJldGNoZXNcbiAgICAvLyB0byBhIGxpbmUgYnJlYWsgb3IgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgLy8gVGhlIHJldHVybmVkIGFycmF5IHVzZXMgbnVsbCB0byBpbmRpY2F0ZSBsaW5lIGJyZWFrcywgYnV0IG5ldmVyXG4gICAgLy8gc3RhcnRzIG9yIGVuZHMgaW4gYSBsaW5lIGJyZWFrLCBvciBoYXMgbXVsdGlwbGUgbGluZSBicmVha3MgbmV4dFxuICAgIC8vIHRvIGVhY2ggb3RoZXIuXG4gICAgc3RhdGljIGJ1aWxkKG9yYWNsZSwgZGVjb3JhdGlvbnMsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBidWlsZGVyID0gbmV3IE5vZGVCdWlsZGVyKGZyb20sIG9yYWNsZSk7XG4gICAgICAgIFJhbmdlU2V0LnNwYW5zKGRlY29yYXRpb25zLCBmcm9tLCB0bywgYnVpbGRlciwgMCk7XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaChmcm9tKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoZWlnaHRSZWxldmFudERlY29DaGFuZ2VzKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBEZWNvcmF0aW9uQ29tcGFyYXRvcjtcbiAgICBSYW5nZVNldC5jb21wYXJlKGEsIGIsIGRpZmYsIGNvbXAsIDApO1xuICAgIHJldHVybiBjb21wLmNoYW5nZXM7XG59XG5jbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlUmFuZ2UoKSB7IH1cbiAgICBjb21wYXJlUG9pbnQoZnJvbSwgdG8sIGEsIGIpIHtcbiAgICAgICAgaWYgKGZyb20gPCB0byB8fCBhICYmIGEuaGVpZ2h0UmVsZXZhbnQgfHwgYiAmJiBiLmhlaWdodFJlbGV2YW50KVxuICAgICAgICAgICAgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcywgNSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB2aXNpYmxlUGl4ZWxSYW5nZShkb20sIHBhZGRpbmdUb3ApIHtcbiAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQpLCByaWdodCA9IE1hdGgubWluKHdpbi5pbm5lcldpZHRoLCByZWN0LnJpZ2h0KTtcbiAgICBsZXQgdG9wID0gTWF0aC5tYXgoMCwgcmVjdC50b3ApLCBib3R0b20gPSBNYXRoLm1pbih3aW4uaW5uZXJIZWlnaHQsIHJlY3QuYm90dG9tKTtcbiAgICBmb3IgKGxldCBwYXJlbnQgPSBkb20ucGFyZW50Tm9kZTsgcGFyZW50ICYmIHBhcmVudCAhPSBkb2MuYm9keTspIHtcbiAgICAgICAgaWYgKHBhcmVudC5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gcGFyZW50O1xuICAgICAgICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWx0KTtcbiAgICAgICAgICAgIGlmICgoZWx0LnNjcm9sbEhlaWdodCA+IGVsdC5jbGllbnRIZWlnaHQgfHwgZWx0LnNjcm9sbFdpZHRoID4gZWx0LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgIHN0eWxlLm92ZXJmbG93ICE9IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudFJlY3QgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIHBhcmVudFJlY3QubGVmdCk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLm1pbihyaWdodCwgcGFyZW50UmVjdC5yaWdodCk7XG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCBwYXJlbnRSZWN0LnRvcCk7XG4gICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5taW4ocGFyZW50ID09IGRvbS5wYXJlbnROb2RlID8gd2luLmlubmVySGVpZ2h0IDogYm90dG9tLCBwYXJlbnRSZWN0LmJvdHRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBzdHlsZS5wb3NpdGlvbiA9PSBcImFic29sdXRlXCIgfHwgc3R5bGUucG9zaXRpb24gPT0gXCJmaXhlZFwiID8gZWx0Lm9mZnNldFBhcmVudCA6IGVsdC5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmVudC5ub2RlVHlwZSA9PSAxMSkgeyAvLyBTaGFkb3cgcm9vdFxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Lmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBsZWZ0OiBsZWZ0IC0gcmVjdC5sZWZ0LCByaWdodDogTWF0aC5tYXgobGVmdCwgcmlnaHQpIC0gcmVjdC5sZWZ0LFxuICAgICAgICB0b3A6IHRvcCAtIChyZWN0LnRvcCArIHBhZGRpbmdUb3ApLCBib3R0b206IE1hdGgubWF4KHRvcCwgYm90dG9tKSAtIChyZWN0LnRvcCArIHBhZGRpbmdUb3ApIH07XG59XG5mdW5jdGlvbiBpbldpbmRvdyhlbHQpIHtcbiAgICBsZXQgcmVjdCA9IGVsdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgd2luID0gZWx0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93O1xuICAgIHJldHVybiByZWN0LmxlZnQgPCB3aW4uaW5uZXJXaWR0aCAmJiByZWN0LnJpZ2h0ID4gMCAmJlxuICAgICAgICByZWN0LnRvcCA8IHdpbi5pbm5lckhlaWdodCAmJiByZWN0LmJvdHRvbSA+IDA7XG59XG5mdW5jdGlvbiBmdWxsUGl4ZWxSYW5nZShkb20sIHBhZGRpbmdUb3ApIHtcbiAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4geyBsZWZ0OiAwLCByaWdodDogcmVjdC5yaWdodCAtIHJlY3QubGVmdCxcbiAgICAgICAgdG9wOiBwYWRkaW5nVG9wLCBib3R0b206IHJlY3QuYm90dG9tIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCkgfTtcbn1cbi8vIExpbmUgZ2FwcyBhcmUgcGxhY2Vob2xkZXIgd2lkZ2V0cyB1c2VkIHRvIGhpZGUgcGllY2VzIG9mIG92ZXJsb25nXG4vLyBsaW5lcyB3aXRoaW4gdGhlIHZpZXdwb3J0LCBhcyBhIGtsdWRnZSB0byBrZWVwIHRoZSBlZGl0b3Jcbi8vIHJlc3BvbnNpdmUgd2hlbiBhIHJpZGljdWxvdXNseSBsb25nIGxpbmUgaXMgbG9hZGVkIGludG8gaXQuXG5jbGFzcyBMaW5lR2FwIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgc2l6ZSwgZGlzcGxheVNpemUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmRpc3BsYXlTaXplID0gZGlzcGxheVNpemU7XG4gICAgfVxuICAgIHN0YXRpYyBzYW1lKGEsIGIpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBnQSA9IGFbaV0sIGdCID0gYltpXTtcbiAgICAgICAgICAgIGlmIChnQS5mcm9tICE9IGdCLmZyb20gfHwgZ0EudG8gIT0gZ0IudG8gfHwgZ0Euc2l6ZSAhPSBnQi5zaXplKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZHJhdyh2aWV3U3RhdGUsIHdyYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgd2lkZ2V0OiBuZXcgTGluZUdhcFdpZGdldCh0aGlzLmRpc3BsYXlTaXplICogKHdyYXBwaW5nID8gdmlld1N0YXRlLnNjYWxlWSA6IHZpZXdTdGF0ZS5zY2FsZVgpLCB3cmFwcGluZylcbiAgICAgICAgfSkucmFuZ2UodGhpcy5mcm9tLCB0aGlzLnRvKTtcbiAgICB9XG59XG5jbGFzcyBMaW5lR2FwV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Ioc2l6ZSwgdmVydGljYWwpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbCA9IHZlcnRpY2FsO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuc2l6ZSA9PSB0aGlzLnNpemUgJiYgb3RoZXIudmVydGljYWwgPT0gdGhpcy52ZXJ0aWNhbDsgfVxuICAgIHRvRE9NKCkge1xuICAgICAgICBsZXQgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaWYgKHRoaXMudmVydGljYWwpIHtcbiAgICAgICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSB0aGlzLnNpemUgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbHQuc3R5bGUud2lkdGggPSB0aGlzLnNpemUgKyBcInB4XCI7XG4gICAgICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gXCIycHhcIjtcbiAgICAgICAgICAgIGVsdC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICBnZXQgZXN0aW1hdGVkSGVpZ2h0KCkgeyByZXR1cm4gdGhpcy52ZXJ0aWNhbCA/IHRoaXMuc2l6ZSA6IC0xOyB9XG59XG5jbGFzcyBWaWV3U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLy8gVGhlc2UgYXJlIGNvbnRlbnRET00tbG9jYWwgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5waXhlbFZpZXdwb3J0ID0geyBsZWZ0OiAwLCByaWdodDogd2luZG93LmlubmVyV2lkdGgsIHRvcDogMCwgYm90dG9tOiAwIH07XG4gICAgICAgIHRoaXMuaW5WaWV3ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wYWRkaW5nVG9wID0gMDsgLy8gUGFkZGluZyBhYm92ZSB0aGUgZG9jdW1lbnQsIHNjYWxlZFxuICAgICAgICB0aGlzLnBhZGRpbmdCb3R0b20gPSAwOyAvLyBQYWRkaW5nIGJlbG93IHRoZSBkb2N1bWVudCwgc2NhbGVkXG4gICAgICAgIHRoaXMuY29udGVudERPTVdpZHRoID0gMDsgLy8gY29udGVudERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxuICAgICAgICB0aGlzLmNvbnRlbnRET01IZWlnaHQgPSAwOyAvLyBjb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuICAgICAgICB0aGlzLmVkaXRvckhlaWdodCA9IDA7IC8vIHNjcm9sbERPTS5jbGllbnRIZWlnaHQsIHVuc2NhbGVkXG4gICAgICAgIHRoaXMuZWRpdG9yV2lkdGggPSAwOyAvLyBzY3JvbGxET00uY2xpZW50V2lkdGgsIHVuc2NhbGVkXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDsgLy8gTGFzdCBzZWVuIHNjcm9sbERPTS5zY3JvbGxUb3AsIHNjYWxlZFxuICAgICAgICB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPSBmYWxzZTtcbiAgICAgICAgLy8gVGhlIENTUy10cmFuc2Zvcm1hdGlvbiBzY2FsZSBvZiB0aGUgZWRpdG9yICh0cmFuc2Zvcm1lZCBzaXplIC9cbiAgICAgICAgLy8gY29uY3JldGUgc2l6ZSlcbiAgICAgICAgdGhpcy5zY2FsZVggPSAxO1xuICAgICAgICB0aGlzLnNjYWxlWSA9IDE7XG4gICAgICAgIC8vIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiAoZG9jdW1lbnQtcmVsYXRpdmUpIHRvIHdoaWNoIHRvIGFuY2hvciB0aGVcbiAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uLiAtMSBtZWFucyBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9yUG9zID0gMDtcbiAgICAgICAgLy8gVGhlIGhlaWdodCBhdCB0aGUgYW5jaG9yIHBvc2l0aW9uLiBTZXQgYnkgdGhlIERPTSB1cGRhdGUgcGhhc2UuXG4gICAgICAgIC8vIC0xIG1lYW5zIG5vIGhlaWdodCBhdmFpbGFibGUuXG4gICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgIC8vIFNlZSBWUC5NYXhET01IZWlnaHRcbiAgICAgICAgdGhpcy5zY2FsZXIgPSBJZFNjYWxlcjtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQgPSBudWxsO1xuICAgICAgICAvLyBCcmllZmx5IHNldCB0byB0cnVlIHdoZW4gcHJpbnRpbmcsIHRvIGRpc2FibGUgdmlld3BvcnQgbGltaXRpbmdcbiAgICAgICAgdGhpcy5wcmludGluZyA9IGZhbHNlO1xuICAgICAgICAvLyBGbGFnIHNldCB3aGVuIGVkaXRvciBjb250ZW50IHdhcyByZWRyYXduLCBzbyB0aGF0IHRoZSBuZXh0XG4gICAgICAgIC8vIG1lYXN1cmUgc3RhZ2Uga25vd3MgaXQgbXVzdCByZWFkIERPTSBsYXlvdXRcbiAgICAgICAgdGhpcy5tdXN0TWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLmRlZmF1bHRUZXh0RGlyZWN0aW9uID0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgdGhpcy52aXNpYmxlUmFuZ2VzID0gW107XG4gICAgICAgIC8vIEN1cnNvciAnYXNzb2MnIGlzIG9ubHkgc2lnbmlmaWNhbnQgd2hlbiB0aGUgY3Vyc29yIGlzIG9uIGEgbGluZVxuICAgICAgICAvLyB3cmFwIHBvaW50LCB3aGVyZSBpdCBtdXN0IHN0aWNrIHRvIHRoZSBjaGFyYWN0ZXIgdGhhdCBpdCBpc1xuICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGguIFNpbmNlIGJyb3dzZXJzIGRvbid0IHByb3ZpZGUgYSByZWFzb25hYmxlXG4gICAgICAgIC8vIGludGVyZmFjZSB0byBzZXQgb3IgcXVlcnkgdGhpcywgd2hlbiBhIHNlbGVjdGlvbiBpcyBzZXQgdGhhdFxuICAgICAgICAvLyBtaWdodCBjYXVzZSB0aGlzIHRvIGJlIHNpZ25pZmljYW50LCB0aGlzIGZsYWcgaXMgc2V0LiBUaGUgbmV4dFxuICAgICAgICAvLyBtZWFzdXJlIHBoYXNlIHdpbGwgY2hlY2sgd2hldGhlciB0aGUgY3Vyc29yIGlzIG9uIGEgbGluZS13cmFwcGluZ1xuICAgICAgICAvLyBib3VuZGFyeSBhbmQsIGlmIHNvLCByZXNldCBpdCB0byBtYWtlIHN1cmUgaXQgaXMgcG9zaXRpb25lZCBpblxuICAgICAgICAvLyB0aGUgcmlnaHQgcGxhY2UuXG4gICAgICAgIHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyA9IGZhbHNlO1xuICAgICAgICBsZXQgZ3Vlc3NXcmFwcGluZyA9IHN0YXRlLmZhY2V0KGNvbnRlbnRBdHRyaWJ1dGVzKS5zb21lKHYgPT4gdHlwZW9mIHYgIT0gXCJmdW5jdGlvblwiICYmIHYuY2xhc3MgPT0gXCJjbS1saW5lV3JhcHBpbmdcIik7XG4gICAgICAgIHRoaXMuaGVpZ2h0T3JhY2xlID0gbmV3IEhlaWdodE9yYWNsZShndWVzc1dyYXBwaW5nKTtcbiAgICAgICAgdGhpcy5zdGF0ZURlY28gPSBzdGF0ZS5mYWNldChkZWNvcmF0aW9ucykuZmlsdGVyKGQgPT4gdHlwZW9mIGQgIT0gXCJmdW5jdGlvblwiKTtcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAgPSBIZWlnaHRNYXAuZW1wdHkoKS5hcHBseUNoYW5nZXModGhpcy5zdGF0ZURlY28sIFRleHQuZW1wdHksIHRoaXMuaGVpZ2h0T3JhY2xlLnNldERvYyhzdGF0ZS5kb2MpLCBbbmV3IENoYW5nZWRSYW5nZSgwLCAwLCAwLCBzdGF0ZS5kb2MubGVuZ3RoKV0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnQoMCwgbnVsbCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudXBkYXRlRm9yVmlld3BvcnQoKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgdGhpcy5saW5lR2FwcyA9IHRoaXMuZW5zdXJlTGluZUdhcHMoW10pO1xuICAgICAgICB0aGlzLmxpbmVHYXBEZWNvID0gRGVjb3JhdGlvbi5zZXQodGhpcy5saW5lR2Fwcy5tYXAoZ2FwID0+IGdhcC5kcmF3KHRoaXMsIGZhbHNlKSkpO1xuICAgICAgICB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKCk7XG4gICAgfVxuICAgIHVwZGF0ZUZvclZpZXdwb3J0KCkge1xuICAgICAgICBsZXQgdmlld3BvcnRzID0gW3RoaXMudmlld3BvcnRdLCB7IG1haW4gfSA9IHRoaXMuc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAxOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSBpID8gbWFpbi5oZWFkIDogbWFpbi5hbmNob3I7XG4gICAgICAgICAgICBpZiAoIXZpZXdwb3J0cy5zb21lKCh7IGZyb20sIHRvIH0pID0+IHBvcyA+PSBmcm9tICYmIHBvcyA8PSB0bykpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gdGhpcy5saW5lQmxvY2tBdChwb3MpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0cy5wdXNoKG5ldyBWaWV3cG9ydChmcm9tLCB0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld3BvcnRzID0gdmlld3BvcnRzLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVNjYWxlcigpO1xuICAgIH1cbiAgICB1cGRhdGVTY2FsZXIoKSB7XG4gICAgICAgIGxldCBzY2FsZXIgPSB0aGlzLnNjYWxlcjtcbiAgICAgICAgdGhpcy5zY2FsZXIgPSB0aGlzLmhlaWdodE1hcC5oZWlnaHQgPD0gNzAwMDAwMCAvKiBWUC5NYXhET01IZWlnaHQgKi8gPyBJZFNjYWxlciA6XG4gICAgICAgICAgICBuZXcgQmlnU2NhbGVyKHRoaXMuaGVpZ2h0T3JhY2xlLCB0aGlzLmhlaWdodE1hcCwgdGhpcy52aWV3cG9ydHMpO1xuICAgICAgICByZXR1cm4gc2NhbGVyLmVxKHRoaXMuc2NhbGVyKSA/IDAgOiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgIH1cbiAgICB1cGRhdGVWaWV3cG9ydExpbmVzKCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5oZWlnaHRNYXAuZm9yRWFjaExpbmUodGhpcy52aWV3cG9ydC5mcm9tLCB0aGlzLnZpZXdwb3J0LnRvLCB0aGlzLmhlaWdodE9yYWNsZS5zZXREb2ModGhpcy5zdGF0ZS5kb2MpLCAwLCAwLCBibG9jayA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMucHVzaChzY2FsZUJsb2NrKGJsb2NrLCB0aGlzLnNjYWxlcikpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSwgc2Nyb2xsVGFyZ2V0ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdXBkYXRlLnN0YXRlO1xuICAgICAgICBsZXQgcHJldkRlY28gPSB0aGlzLnN0YXRlRGVjbztcbiAgICAgICAgdGhpcy5zdGF0ZURlY28gPSB0aGlzLnN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5maWx0ZXIoZCA9PiB0eXBlb2YgZCAhPSBcImZ1bmN0aW9uXCIpO1xuICAgICAgICBsZXQgY29udGVudENoYW5nZXMgPSB1cGRhdGUuY2hhbmdlZFJhbmdlcztcbiAgICAgICAgbGV0IGhlaWdodENoYW5nZXMgPSBDaGFuZ2VkUmFuZ2UuZXh0ZW5kV2l0aFJhbmdlcyhjb250ZW50Q2hhbmdlcywgaGVpZ2h0UmVsZXZhbnREZWNvQ2hhbmdlcyhwcmV2RGVjbywgdGhpcy5zdGF0ZURlY28sIHVwZGF0ZSA/IHVwZGF0ZS5jaGFuZ2VzIDogQ2hhbmdlU2V0LmVtcHR5KHRoaXMuc3RhdGUuZG9jLmxlbmd0aCkpKTtcbiAgICAgICAgbGV0IHByZXZIZWlnaHQgPSB0aGlzLmhlaWdodE1hcC5oZWlnaHQ7XG4gICAgICAgIGxldCBzY3JvbGxBbmNob3IgPSB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPyBudWxsIDogdGhpcy5zY3JvbGxBbmNob3JBdCh0aGlzLnNjcm9sbFRvcCk7XG4gICAgICAgIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZygpO1xuICAgICAgICB0aGlzLmhlaWdodE1hcCA9IHRoaXMuaGVpZ2h0TWFwLmFwcGx5Q2hhbmdlcyh0aGlzLnN0YXRlRGVjbywgdXBkYXRlLnN0YXJ0U3RhdGUuZG9jLCB0aGlzLmhlaWdodE9yYWNsZS5zZXREb2ModGhpcy5zdGF0ZS5kb2MpLCBoZWlnaHRDaGFuZ2VzKTtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0TWFwLmhlaWdodCAhPSBwcmV2SGVpZ2h0IHx8IGhlaWdodENoYW5nZUZsYWcpXG4gICAgICAgICAgICB1cGRhdGUuZmxhZ3MgfD0gMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLztcbiAgICAgICAgaWYgKHNjcm9sbEFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JQb3MgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3Moc2Nyb2xsQW5jaG9yLmZyb20sIC0xKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gc2Nyb2xsQW5jaG9yLnRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9yUG9zID0gLTE7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEFuY2hvckhlaWdodCA9IHByZXZIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZpZXdwb3J0ID0gaGVpZ2h0Q2hhbmdlcy5sZW5ndGggPyB0aGlzLm1hcFZpZXdwb3J0KHRoaXMudmlld3BvcnQsIHVwZGF0ZS5jaGFuZ2VzKSA6IHRoaXMudmlld3BvcnQ7XG4gICAgICAgIGlmIChzY3JvbGxUYXJnZXQgJiYgKHNjcm9sbFRhcmdldC5yYW5nZS5oZWFkIDwgdmlld3BvcnQuZnJvbSB8fCBzY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA+IHZpZXdwb3J0LnRvKSB8fFxuICAgICAgICAgICAgIXRoaXMudmlld3BvcnRJc0FwcHJvcHJpYXRlKHZpZXdwb3J0KSlcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydCgwLCBzY3JvbGxUYXJnZXQpO1xuICAgICAgICBsZXQgdmlld3BvcnRDaGFuZ2UgPSB2aWV3cG9ydC5mcm9tICE9IHRoaXMudmlld3BvcnQuZnJvbSB8fCB2aWV3cG9ydC50byAhPSB0aGlzLnZpZXdwb3J0LnRvO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIHVwZGF0ZS5mbGFncyB8PSB0aGlzLnVwZGF0ZUZvclZpZXdwb3J0KCk7XG4gICAgICAgIGlmICh2aWV3cG9ydENoYW5nZSB8fCAhdXBkYXRlLmNoYW5nZXMuZW1wdHkgfHwgKHVwZGF0ZS5mbGFncyAmIDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydExpbmVzKCk7XG4gICAgICAgIGlmICh0aGlzLmxpbmVHYXBzLmxlbmd0aCB8fCB0aGlzLnZpZXdwb3J0LnRvIC0gdGhpcy52aWV3cG9ydC5mcm9tID4gKDIwMDAgLyogTEcuTWFyZ2luICovIDw8IDEpKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5lR2Fwcyh0aGlzLmVuc3VyZUxpbmVHYXBzKHRoaXMubWFwTGluZUdhcHModGhpcy5saW5lR2FwcywgdXBkYXRlLmNoYW5nZXMpKSk7XG4gICAgICAgIHVwZGF0ZS5mbGFncyB8PSB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldClcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0ID0gc2Nyb2xsVGFyZ2V0O1xuICAgICAgICBpZiAoIXRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyAmJiB1cGRhdGUuc2VsZWN0aW9uU2V0ICYmIHVwZGF0ZS52aWV3LmxpbmVXcmFwcGluZyAmJlxuICAgICAgICAgICAgdXBkYXRlLnN0YXRlLnNlbGVjdGlvbi5tYWluLmVtcHR5ICYmIHVwZGF0ZS5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5hc3NvYyAmJlxuICAgICAgICAgICAgIXVwZGF0ZS5zdGF0ZS5mYWNldChuYXRpdmVTZWxlY3Rpb25IaWRkZW4pKVxuICAgICAgICAgICAgdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jID0gdHJ1ZTtcbiAgICB9XG4gICAgbWVhc3VyZSh2aWV3KSB7XG4gICAgICAgIGxldCBkb20gPSB2aWV3LmNvbnRlbnRET00sIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tKTtcbiAgICAgICAgbGV0IG9yYWNsZSA9IHRoaXMuaGVpZ2h0T3JhY2xlO1xuICAgICAgICBsZXQgd2hpdGVTcGFjZSA9IHN0eWxlLndoaXRlU3BhY2U7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gPSBzdHlsZS5kaXJlY3Rpb24gPT0gXCJydGxcIiA/IERpcmVjdGlvbi5SVEwgOiBEaXJlY3Rpb24uTFRSO1xuICAgICAgICBsZXQgcmVmcmVzaCA9IHRoaXMuaGVpZ2h0T3JhY2xlLm11c3RSZWZyZXNoRm9yV3JhcHBpbmcod2hpdGVTcGFjZSk7XG4gICAgICAgIGxldCBkb21SZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgbWVhc3VyZUNvbnRlbnQgPSByZWZyZXNoIHx8IHRoaXMubXVzdE1lYXN1cmVDb250ZW50IHx8IHRoaXMuY29udGVudERPTUhlaWdodCAhPSBkb21SZWN0LmhlaWdodDtcbiAgICAgICAgdGhpcy5jb250ZW50RE9NSGVpZ2h0ID0gZG9tUmVjdC5oZWlnaHQ7XG4gICAgICAgIHRoaXMubXVzdE1lYXN1cmVDb250ZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCByZXN1bHQgPSAwLCBiaWFzID0gMDtcbiAgICAgICAgaWYgKGRvbVJlY3Qud2lkdGggJiYgZG9tUmVjdC5oZWlnaHQpIHtcbiAgICAgICAgICAgIGxldCB7IHNjYWxlWCwgc2NhbGVZIH0gPSBnZXRTY2FsZShkb20sIGRvbVJlY3QpO1xuICAgICAgICAgICAgaWYgKHNjYWxlWCA+IC4wMDUgJiYgTWF0aC5hYnModGhpcy5zY2FsZVggLSBzY2FsZVgpID4gLjAwNSB8fFxuICAgICAgICAgICAgICAgIHNjYWxlWSA+IC4wMDUgJiYgTWF0aC5hYnModGhpcy5zY2FsZVkgLSBzY2FsZVkpID4gLjAwNSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVYID0gc2NhbGVYO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVZID0gc2NhbGVZO1xuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSAxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovO1xuICAgICAgICAgICAgICAgIHJlZnJlc2ggPSBtZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmVydGljYWwgcGFkZGluZ1xuICAgICAgICBsZXQgcGFkZGluZ1RvcCA9IChwYXJzZUludChzdHlsZS5wYWRkaW5nVG9wKSB8fCAwKSAqIHRoaXMuc2NhbGVZO1xuICAgICAgICBsZXQgcGFkZGluZ0JvdHRvbSA9IChwYXJzZUludChzdHlsZS5wYWRkaW5nQm90dG9tKSB8fCAwKSAqIHRoaXMuc2NhbGVZO1xuICAgICAgICBpZiAodGhpcy5wYWRkaW5nVG9wICE9IHBhZGRpbmdUb3AgfHwgdGhpcy5wYWRkaW5nQm90dG9tICE9IHBhZGRpbmdCb3R0b20pIHtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ1RvcCA9IHBhZGRpbmdUb3A7XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdCb3R0b20gPSBwYWRkaW5nQm90dG9tO1xuICAgICAgICAgICAgcmVzdWx0IHw9IDE2IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi8gfCAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVkaXRvcldpZHRoICE9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICBpZiAob3JhY2xlLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgICAgICBtZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVkaXRvcldpZHRoID0gdmlldy5zY3JvbGxET00uY2xpZW50V2lkdGg7XG4gICAgICAgICAgICByZXN1bHQgfD0gMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2Nyb2xsVG9wID0gdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wICogdGhpcy5zY2FsZVk7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbFRvcCAhPSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjcm9sbGVkVG9Cb3R0b20gPSBpc1Njcm9sbGVkVG9Cb3R0b20odmlldy5zY3JvbGxET00pO1xuICAgICAgICAvLyBQaXhlbCB2aWV3cG9ydFxuICAgICAgICBsZXQgcGl4ZWxWaWV3cG9ydCA9ICh0aGlzLnByaW50aW5nID8gZnVsbFBpeGVsUmFuZ2UgOiB2aXNpYmxlUGl4ZWxSYW5nZSkoZG9tLCB0aGlzLnBhZGRpbmdUb3ApO1xuICAgICAgICBsZXQgZFRvcCA9IHBpeGVsVmlld3BvcnQudG9wIC0gdGhpcy5waXhlbFZpZXdwb3J0LnRvcCwgZEJvdHRvbSA9IHBpeGVsVmlld3BvcnQuYm90dG9tIC0gdGhpcy5waXhlbFZpZXdwb3J0LmJvdHRvbTtcbiAgICAgICAgdGhpcy5waXhlbFZpZXdwb3J0ID0gcGl4ZWxWaWV3cG9ydDtcbiAgICAgICAgbGV0IGluVmlldyA9IHRoaXMucGl4ZWxWaWV3cG9ydC5ib3R0b20gPiB0aGlzLnBpeGVsVmlld3BvcnQudG9wICYmIHRoaXMucGl4ZWxWaWV3cG9ydC5yaWdodCA+IHRoaXMucGl4ZWxWaWV3cG9ydC5sZWZ0O1xuICAgICAgICBpZiAoaW5WaWV3ICE9IHRoaXMuaW5WaWV3KSB7XG4gICAgICAgICAgICB0aGlzLmluVmlldyA9IGluVmlldztcbiAgICAgICAgICAgIGlmIChpblZpZXcpXG4gICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pblZpZXcgJiYgIXRoaXMuc2Nyb2xsVGFyZ2V0ICYmICFpbldpbmRvdyh2aWV3LmRvbSkpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IGNvbnRlbnRXaWR0aCA9IGRvbVJlY3Qud2lkdGg7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRET01XaWR0aCAhPSBjb250ZW50V2lkdGggfHwgdGhpcy5lZGl0b3JIZWlnaHQgIT0gdmlldy5zY3JvbGxET00uY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRET01XaWR0aCA9IGRvbVJlY3Qud2lkdGg7XG4gICAgICAgICAgICB0aGlzLmVkaXRvckhlaWdodCA9IHZpZXcuc2Nyb2xsRE9NLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHJlc3VsdCB8PSAxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZWFzdXJlQ29udGVudCkge1xuICAgICAgICAgICAgbGV0IGxpbmVIZWlnaHRzID0gdmlldy5kb2NWaWV3Lm1lYXN1cmVWaXNpYmxlTGluZUhlaWdodHModGhpcy52aWV3cG9ydCk7XG4gICAgICAgICAgICBpZiAob3JhY2xlLm11c3RSZWZyZXNoRm9ySGVpZ2h0cyhsaW5lSGVpZ2h0cykpXG4gICAgICAgICAgICAgICAgcmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICBpZiAocmVmcmVzaCB8fCBvcmFjbGUubGluZVdyYXBwaW5nICYmIE1hdGguYWJzKGNvbnRlbnRXaWR0aCAtIHRoaXMuY29udGVudERPTVdpZHRoKSA+IG9yYWNsZS5jaGFyV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIHRleHRIZWlnaHQgfSA9IHZpZXcuZG9jVmlldy5tZWFzdXJlVGV4dFNpemUoKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoID0gbGluZUhlaWdodCA+IDAgJiYgb3JhY2xlLnJlZnJlc2god2hpdGVTcGFjZSwgbGluZUhlaWdodCwgY2hhcldpZHRoLCB0ZXh0SGVpZ2h0LCBNYXRoLm1heCg1LCBjb250ZW50V2lkdGggLyBjaGFyV2lkdGgpLCBsaW5lSGVpZ2h0cyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kb2NWaWV3Lm1pbldpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0IHw9IDE2IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRUb3AgPiAwICYmIGRCb3R0b20gPiAwKVxuICAgICAgICAgICAgICAgIGJpYXMgPSBNYXRoLm1heChkVG9wLCBkQm90dG9tKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGRUb3AgPCAwICYmIGRCb3R0b20gPCAwKVxuICAgICAgICAgICAgICAgIGJpYXMgPSBNYXRoLm1pbihkVG9wLCBkQm90dG9tKTtcbiAgICAgICAgICAgIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZygpO1xuICAgICAgICAgICAgZm9yIChsZXQgdnAgb2YgdGhpcy52aWV3cG9ydHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0cyA9IHZwLmZyb20gPT0gdGhpcy52aWV3cG9ydC5mcm9tID8gbGluZUhlaWdodHMgOiB2aWV3LmRvY1ZpZXcubWVhc3VyZVZpc2libGVMaW5lSGVpZ2h0cyh2cCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRNYXAgPSAocmVmcmVzaCA/IEhlaWdodE1hcC5lbXB0eSgpLmFwcGx5Q2hhbmdlcyh0aGlzLnN0YXRlRGVjbywgVGV4dC5lbXB0eSwgdGhpcy5oZWlnaHRPcmFjbGUsIFtuZXcgQ2hhbmdlZFJhbmdlKDAsIDAsIDAsIHZpZXcuc3RhdGUuZG9jLmxlbmd0aCldKSA6IHRoaXMuaGVpZ2h0TWFwKS51cGRhdGVIZWlnaHQob3JhY2xlLCAwLCByZWZyZXNoLCBuZXcgTWVhc3VyZWRIZWlnaHRzKHZwLmZyb20sIGhlaWdodHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoZWlnaHRDaGFuZ2VGbGFnKVxuICAgICAgICAgICAgICAgIHJlc3VsdCB8PSAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2aWV3cG9ydENoYW5nZSA9ICF0aGlzLnZpZXdwb3J0SXNBcHByb3ByaWF0ZSh0aGlzLnZpZXdwb3J0LCBiaWFzKSB8fFxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQgJiYgKHRoaXMuc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgPCB0aGlzLnZpZXdwb3J0LmZyb20gfHxcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhcmdldC5yYW5nZS5oZWFkID4gdGhpcy52aWV3cG9ydC50byk7XG4gICAgICAgIGlmICh2aWV3cG9ydENoYW5nZSkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAmIDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IHRoaXMudXBkYXRlU2NhbGVyKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydChiaWFzLCB0aGlzLnNjcm9sbFRhcmdldCk7XG4gICAgICAgICAgICByZXN1bHQgfD0gdGhpcy51cGRhdGVGb3JWaWV3cG9ydCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocmVzdWx0ICYgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLykgfHwgdmlld3BvcnRDaGFuZ2UpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgaWYgKHRoaXMubGluZUdhcHMubGVuZ3RoIHx8IHRoaXMudmlld3BvcnQudG8gLSB0aGlzLnZpZXdwb3J0LmZyb20gPiAoMjAwMCAvKiBMRy5NYXJnaW4gKi8gPDwgMSkpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVHYXBzKHRoaXMuZW5zdXJlTGluZUdhcHMocmVmcmVzaCA/IFtdIDogdGhpcy5saW5lR2FwcywgdmlldykpO1xuICAgICAgICByZXN1bHQgfD0gdGhpcy5jb21wdXRlVmlzaWJsZVJhbmdlcygpO1xuICAgICAgICBpZiAodGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jKSB7XG4gICAgICAgICAgICB0aGlzLm11c3RFbmZvcmNlQ3Vyc29yQXNzb2MgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgZG9uZSBpbiB0aGUgcmVhZCBzdGFnZSwgYmVjYXVzZSBtb3ZpbmcgdGhlIHNlbGVjdGlvblxuICAgICAgICAgICAgLy8gdG8gYSBsaW5lIGVuZCBpcyBnb2luZyB0byB0cmlnZ2VyIGEgbGF5b3V0IGFueXdheSwgc28gaXRcbiAgICAgICAgICAgIC8vIGNhbid0IGJlIGEgcHVyZSB3cml0ZS4gSXQgc2hvdWxkIGJlIHJhcmUgdGhhdCBpdCBkb2VzIGFueVxuICAgICAgICAgICAgLy8gd3JpdGluZy5cbiAgICAgICAgICAgIHZpZXcuZG9jVmlldy5lbmZvcmNlQ3Vyc29yQXNzb2MoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXQgdmlzaWJsZVRvcCgpIHsgcmV0dXJuIHRoaXMuc2NhbGVyLmZyb21ET00odGhpcy5waXhlbFZpZXdwb3J0LnRvcCk7IH1cbiAgICBnZXQgdmlzaWJsZUJvdHRvbSgpIHsgcmV0dXJuIHRoaXMuc2NhbGVyLmZyb21ET00odGhpcy5waXhlbFZpZXdwb3J0LmJvdHRvbSk7IH1cbiAgICBnZXRWaWV3cG9ydChiaWFzLCBzY3JvbGxUYXJnZXQpIHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGRpdmlkZSBWUC5NYXJnaW4gYmV0d2VlbiB0aGUgdG9wIGFuZCB0aGVcbiAgICAgICAgLy8gYm90dG9tLCBkZXBlbmRpbmcgb24gdGhlIGJpYXMgKHRoZSBjaGFuZ2UgaW4gdmlld3BvcnQgcG9zaXRpb25cbiAgICAgICAgLy8gc2luY2UgdGhlIGxhc3QgdXBkYXRlKS4gSXQnbGwgaG9sZCBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDFcbiAgICAgICAgbGV0IG1hcmdpblRvcCA9IDAuNSAtIE1hdGgubWF4KC0wLjUsIE1hdGgubWluKDAuNSwgYmlhcyAvIDEwMDAgLyogVlAuTWFyZ2luICovIC8gMikpO1xuICAgICAgICBsZXQgbWFwID0gdGhpcy5oZWlnaHRNYXAsIG9yYWNsZSA9IHRoaXMuaGVpZ2h0T3JhY2xlO1xuICAgICAgICBsZXQgeyB2aXNpYmxlVG9wLCB2aXNpYmxlQm90dG9tIH0gPSB0aGlzO1xuICAgICAgICBsZXQgdmlld3BvcnQgPSBuZXcgVmlld3BvcnQobWFwLmxpbmVBdCh2aXNpYmxlVG9wIC0gbWFyZ2luVG9wICogMTAwMCAvKiBWUC5NYXJnaW4gKi8sIFF1ZXJ5VHlwZS5CeUhlaWdodCwgb3JhY2xlLCAwLCAwKS5mcm9tLCBtYXAubGluZUF0KHZpc2libGVCb3R0b20gKyAoMSAtIG1hcmdpblRvcCkgKiAxMDAwIC8qIFZQLk1hcmdpbiAqLywgUXVlcnlUeXBlLkJ5SGVpZ2h0LCBvcmFjbGUsIDAsIDApLnRvKTtcbiAgICAgICAgLy8gSWYgc2Nyb2xsVGFyZ2V0IGlzIGdpdmVuLCBtYWtlIHN1cmUgdGhlIHZpZXdwb3J0IGluY2x1ZGVzIHRoYXQgcG9zaXRpb25cbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldCkge1xuICAgICAgICAgICAgbGV0IHsgaGVhZCB9ID0gc2Nyb2xsVGFyZ2V0LnJhbmdlO1xuICAgICAgICAgICAgaWYgKGhlYWQgPCB2aWV3cG9ydC5mcm9tIHx8IGhlYWQgPiB2aWV3cG9ydC50bykge1xuICAgICAgICAgICAgICAgIGxldCB2aWV3SGVpZ2h0ID0gTWF0aC5taW4odGhpcy5lZGl0b3JIZWlnaHQsIHRoaXMucGl4ZWxWaWV3cG9ydC5ib3R0b20gLSB0aGlzLnBpeGVsVmlld3BvcnQudG9wKTtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2sgPSBtYXAubGluZUF0KGhlYWQsIFF1ZXJ5VHlwZS5CeVBvcywgb3JhY2xlLCAwLCAwKSwgdG9wUG9zO1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUYXJnZXQueSA9PSBcImNlbnRlclwiKVxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSAoYmxvY2sudG9wICsgYmxvY2suYm90dG9tKSAvIDIgLSB2aWV3SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzY3JvbGxUYXJnZXQueSA9PSBcInN0YXJ0XCIgfHwgc2Nyb2xsVGFyZ2V0LnkgPT0gXCJuZWFyZXN0XCIgJiYgaGVhZCA8IHZpZXdwb3J0LmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IGJsb2NrLnRvcDtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IGJsb2NrLmJvdHRvbSAtIHZpZXdIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdmlld3BvcnQgPSBuZXcgVmlld3BvcnQobWFwLmxpbmVBdCh0b3BQb3MgLSAxMDAwIC8qIFZQLk1hcmdpbiAqLyAvIDIsIFF1ZXJ5VHlwZS5CeUhlaWdodCwgb3JhY2xlLCAwLCAwKS5mcm9tLCBtYXAubGluZUF0KHRvcFBvcyArIHZpZXdIZWlnaHQgKyAxMDAwIC8qIFZQLk1hcmdpbiAqLyAvIDIsIFF1ZXJ5VHlwZS5CeUhlaWdodCwgb3JhY2xlLCAwLCAwKS50byk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXdwb3J0O1xuICAgIH1cbiAgICBtYXBWaWV3cG9ydCh2aWV3cG9ydCwgY2hhbmdlcykge1xuICAgICAgICBsZXQgZnJvbSA9IGNoYW5nZXMubWFwUG9zKHZpZXdwb3J0LmZyb20sIC0xKSwgdG8gPSBjaGFuZ2VzLm1hcFBvcyh2aWV3cG9ydC50bywgMSk7XG4gICAgICAgIHJldHVybiBuZXcgVmlld3BvcnQodGhpcy5oZWlnaHRNYXAubGluZUF0KGZyb20sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApLmZyb20sIHRoaXMuaGVpZ2h0TWFwLmxpbmVBdCh0bywgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCkudG8pO1xuICAgIH1cbiAgICAvLyBDaGVja3MgaWYgYSBnaXZlbiB2aWV3cG9ydCBjb3ZlcnMgdGhlIHZpc2libGUgcGFydCBvZiB0aGVcbiAgICAvLyBkb2N1bWVudCBhbmQgbm90IHRvbyBtdWNoIGJleW9uZCB0aGF0LlxuICAgIHZpZXdwb3J0SXNBcHByb3ByaWF0ZSh7IGZyb20sIHRvIH0sIGJpYXMgPSAwKSB7XG4gICAgICAgIGlmICghdGhpcy5pblZpZXcpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IHsgdG9wIH0gPSB0aGlzLmhlaWdodE1hcC5saW5lQXQoZnJvbSwgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCk7XG4gICAgICAgIGxldCB7IGJvdHRvbSB9ID0gdGhpcy5oZWlnaHRNYXAubGluZUF0KHRvLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKTtcbiAgICAgICAgbGV0IHsgdmlzaWJsZVRvcCwgdmlzaWJsZUJvdHRvbSB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChmcm9tID09IDAgfHwgdG9wIDw9IHZpc2libGVUb3AgLSBNYXRoLm1heCgxMCAvKiBWUC5NaW5Db3Zlck1hcmdpbiAqLywgTWF0aC5taW4oLWJpYXMsIDI1MCAvKiBWUC5NYXhDb3Zlck1hcmdpbiAqLykpKSAmJlxuICAgICAgICAgICAgKHRvID09IHRoaXMuc3RhdGUuZG9jLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIGJvdHRvbSA+PSB2aXNpYmxlQm90dG9tICsgTWF0aC5tYXgoMTAgLyogVlAuTWluQ292ZXJNYXJnaW4gKi8sIE1hdGgubWluKGJpYXMsIDI1MCAvKiBWUC5NYXhDb3Zlck1hcmdpbiAqLykpKSAmJlxuICAgICAgICAgICAgKHRvcCA+IHZpc2libGVUb3AgLSAyICogMTAwMCAvKiBWUC5NYXJnaW4gKi8gJiYgYm90dG9tIDwgdmlzaWJsZUJvdHRvbSArIDIgKiAxMDAwIC8qIFZQLk1hcmdpbiAqLyk7XG4gICAgfVxuICAgIG1hcExpbmVHYXBzKGdhcHMsIGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKCFnYXBzLmxlbmd0aCB8fCBjaGFuZ2VzLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIGdhcHM7XG4gICAgICAgIGxldCBtYXBwZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZ2FwIG9mIGdhcHMpXG4gICAgICAgICAgICBpZiAoIWNoYW5nZXMudG91Y2hlc1JhbmdlKGdhcC5mcm9tLCBnYXAudG8pKVxuICAgICAgICAgICAgICAgIG1hcHBlZC5wdXNoKG5ldyBMaW5lR2FwKGNoYW5nZXMubWFwUG9zKGdhcC5mcm9tKSwgY2hhbmdlcy5tYXBQb3MoZ2FwLnRvKSwgZ2FwLnNpemUsIGdhcC5kaXNwbGF5U2l6ZSkpO1xuICAgICAgICByZXR1cm4gbWFwcGVkO1xuICAgIH1cbiAgICAvLyBDb21wdXRlcyBwb3NpdGlvbnMgaW4gdGhlIHZpZXdwb3J0IHdoZXJlIHRoZSBzdGFydCBvciBlbmQgb2YgYVxuICAgIC8vIGxpbmUgc2hvdWxkIGJlIGhpZGRlbiwgdHJ5aW5nIHRvIHJldXNlIGV4aXN0aW5nIGxpbmUgZ2FwcyB3aGVuXG4gICAgLy8gYXBwcm9wcmlhdGUgdG8gYXZvaWQgdW5uZWNjZXNhcnkgcmVkcmF3cy5cbiAgICAvLyBVc2VzIGNydWRlIGNoYXJhY3Rlci1jb3VudGluZyBmb3IgdGhlIHBvc2l0aW9uaW5nIGFuZCBzaXppbmcsXG4gICAgLy8gc2luY2UgYWN0dWFsIERPTSBjb29yZGluYXRlcyBhcmVuJ3QgYWx3YXlzIGF2YWlsYWJsZSBhbmRcbiAgICAvLyBwcmVkaWN0YWJsZS4gUmVsaWVzIG9uIGdlbmVyb3VzIG1hcmdpbnMgKHNlZSBMRy5NYXJnaW4pIHRvIGhpZGVcbiAgICAvLyB0aGUgYXJ0aWZhY3RzIHRoaXMgbWlnaHQgcHJvZHVjZSBmcm9tIHRoZSB1c2VyLlxuICAgIGVuc3VyZUxpbmVHYXBzKGN1cnJlbnQsIG1heU1lYXN1cmUpIHtcbiAgICAgICAgbGV0IHdyYXBwaW5nID0gdGhpcy5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nO1xuICAgICAgICBsZXQgbWFyZ2luID0gd3JhcHBpbmcgPyAxMDAwMCAvKiBMRy5NYXJnaW5XcmFwICovIDogMjAwMCAvKiBMRy5NYXJnaW4gKi8sIGhhbGZNYXJnaW4gPSBtYXJnaW4gPj4gMSwgZG91YmxlTWFyZ2luID0gbWFyZ2luIDw8IDE7XG4gICAgICAgIC8vIFRoZSBub24td3JhcHBpbmcgbG9naWMgd29uJ3Qgd29yayBhdCBhbGwgaW4gcHJlZG9taW5hbnRseSByaWdodC10by1sZWZ0IHRleHQuXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRUZXh0RGlyZWN0aW9uICE9IERpcmVjdGlvbi5MVFIgJiYgIXdyYXBwaW5nKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgZ2FwcyA9IFtdO1xuICAgICAgICBsZXQgYWRkR2FwID0gKGZyb20sIHRvLCBsaW5lLCBzdHJ1Y3R1cmUpID0+IHtcbiAgICAgICAgICAgIGlmICh0byAtIGZyb20gPCBoYWxmTWFyZ2luKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBzZWwgPSB0aGlzLnN0YXRlLnNlbGVjdGlvbi5tYWluLCBhdm9pZCA9IFtzZWwuZnJvbV07XG4gICAgICAgICAgICBpZiAoIXNlbC5lbXB0eSlcbiAgICAgICAgICAgICAgICBhdm9pZC5wdXNoKHNlbC50byk7XG4gICAgICAgICAgICBmb3IgKGxldCBwb3Mgb2YgYXZvaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9zID4gZnJvbSAmJiBwb3MgPCB0bykge1xuICAgICAgICAgICAgICAgICAgICBhZGRHYXAoZnJvbSwgcG9zIC0gMTAgLyogTEcuU2VsZWN0aW9uTWFyZ2luICovLCBsaW5lLCBzdHJ1Y3R1cmUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRHYXAocG9zICsgMTAgLyogTEcuU2VsZWN0aW9uTWFyZ2luICovLCB0bywgbGluZSwgc3RydWN0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBnYXAgPSBmaW5kKGN1cnJlbnQsIGdhcCA9PiBnYXAuZnJvbSA+PSBsaW5lLmZyb20gJiYgZ2FwLnRvIDw9IGxpbmUudG8gJiZcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhnYXAuZnJvbSAtIGZyb20pIDwgaGFsZk1hcmdpbiAmJiBNYXRoLmFicyhnYXAudG8gLSB0bykgPCBoYWxmTWFyZ2luICYmXG4gICAgICAgICAgICAgICAgIWF2b2lkLnNvbWUocG9zID0+IGdhcC5mcm9tIDwgcG9zICYmIGdhcC50byA+IHBvcykpO1xuICAgICAgICAgICAgaWYgKCFnYXApIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNjcm9sbGluZyBkb3duLCBzbmFwIGdhcCBlbmRzIHRvIGxpbmUgc3RhcnRzIHRvIGF2b2lkIHNoaWZ0cyBpbiB3cmFwcGluZ1xuICAgICAgICAgICAgICAgIGlmICh0byA8IGxpbmUudG8gJiYgbWF5TWVhc3VyZSAmJiB3cmFwcGluZyAmJlxuICAgICAgICAgICAgICAgICAgICBtYXlNZWFzdXJlLnZpc2libGVSYW5nZXMuc29tZShyID0+IHIuZnJvbSA8PSB0byAmJiByLnRvID49IHRvKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZVN0YXJ0ID0gbWF5TWVhc3VyZS5tb3ZlVG9MaW5lQm91bmRhcnkoRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih0byksIGZhbHNlLCB0cnVlKS5oZWFkO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZVN0YXJ0ID4gZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvID0gbGluZVN0YXJ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHRoaXMuZ2FwU2l6ZShsaW5lLCBmcm9tLCB0bywgc3RydWN0dXJlKTtcbiAgICAgICAgICAgICAgICBsZXQgZGlzcGxheVNpemUgPSB3cmFwcGluZyB8fCBzaXplIDwgMjAwMDAwMCAvKiBWUC5NYXhIb3JpekdhcCAqLyA/IHNpemUgOiAyMDAwMDAwIC8qIFZQLk1heEhvcml6R2FwICovO1xuICAgICAgICAgICAgICAgIGdhcCA9IG5ldyBMaW5lR2FwKGZyb20sIHRvLCBzaXplLCBkaXNwbGF5U2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYXBzLnB1c2goZ2FwKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGNoZWNrTGluZSA9IChsaW5lKSA9PiB7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPCBkb3VibGVNYXJnaW4gfHwgbGluZS50eXBlICE9IEJsb2NrVHlwZS5UZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBzdHJ1Y3R1cmUgPSBsaW5lU3RydWN0dXJlKGxpbmUuZnJvbSwgbGluZS50bywgdGhpcy5zdGF0ZURlY28pO1xuICAgICAgICAgICAgaWYgKHN0cnVjdHVyZS50b3RhbCA8IGRvdWJsZU1hcmdpbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zY3JvbGxUYXJnZXQgPyB0aGlzLnNjcm9sbFRhcmdldC5yYW5nZS5oZWFkIDogbnVsbDtcbiAgICAgICAgICAgIGxldCB2aWV3RnJvbSwgdmlld1RvO1xuICAgICAgICAgICAgaWYgKHdyYXBwaW5nKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmdpbkhlaWdodCA9IChtYXJnaW4gLyB0aGlzLmhlaWdodE9yYWNsZS5saW5lTGVuZ3RoKSAqIHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgbGV0IHRvcCwgYm90O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RnJhYyA9IGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZUZyYWMgPSAoKHRoaXMudmlzaWJsZUJvdHRvbSAtIHRoaXMudmlzaWJsZVRvcCkgLyAyICsgbWFyZ2luSGVpZ2h0KSAvIGxpbmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0b3AgPSB0YXJnZXRGcmFjIC0gc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgICAgICBib3QgPSB0YXJnZXRGcmFjICsgc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gKHRoaXMudmlzaWJsZVRvcCAtIGxpbmUudG9wIC0gbWFyZ2luSGVpZ2h0KSAvIGxpbmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBib3QgPSAodGhpcy52aXNpYmxlQm90dG9tIC0gbGluZS50b3AgKyBtYXJnaW5IZWlnaHQpIC8gbGluZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXdGcm9tID0gZmluZFBvc2l0aW9uKHN0cnVjdHVyZSwgdG9wKTtcbiAgICAgICAgICAgICAgICB2aWV3VG8gPSBmaW5kUG9zaXRpb24oc3RydWN0dXJlLCBib3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsV2lkdGggPSBzdHJ1Y3R1cmUudG90YWwgKiB0aGlzLmhlaWdodE9yYWNsZS5jaGFyV2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmdpbldpZHRoID0gbWFyZ2luICogdGhpcy5oZWlnaHRPcmFjbGUuY2hhcldpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBob3Jpek9mZnNldCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsV2lkdGggPiAyMDAwMDAwIC8qIFZQLk1heEhvcml6R2FwICovKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBvbGQgb2YgY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZC5mcm9tID49IGxpbmUuZnJvbSAmJiBvbGQuZnJvbSA8IGxpbmUudG8gJiYgb2xkLnNpemUgIT0gb2xkLmRpc3BsYXlTaXplICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkLmZyb20gKiB0aGlzLmhlaWdodE9yYWNsZS5jaGFyV2lkdGggKyBob3Jpek9mZnNldCA8IHRoaXMucGl4ZWxWaWV3cG9ydC5sZWZ0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6T2Zmc2V0ID0gb2xkLnNpemUgLSBvbGQuZGlzcGxheVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcHhMZWZ0ID0gdGhpcy5waXhlbFZpZXdwb3J0LmxlZnQgKyBob3Jpek9mZnNldCwgcHhSaWdodCA9IHRoaXMucGl4ZWxWaWV3cG9ydC5yaWdodCArIGhvcml6T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGxldCBsZWZ0LCByaWdodDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldEZyYWMgPSBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2VGcmFjID0gKChweFJpZ2h0IC0gcHhMZWZ0KSAvIDIgKyBtYXJnaW5XaWR0aCkgLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gdGFyZ2V0RnJhYyAtIHNwYWNlRnJhYztcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSB0YXJnZXRGcmFjICsgc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IChweExlZnQgLSBtYXJnaW5XaWR0aCkgLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICByaWdodCA9IChweFJpZ2h0ICsgbWFyZ2luV2lkdGgpIC8gdG90YWxXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlld0Zyb20gPSBmaW5kUG9zaXRpb24oc3RydWN0dXJlLCBsZWZ0KTtcbiAgICAgICAgICAgICAgICB2aWV3VG8gPSBmaW5kUG9zaXRpb24oc3RydWN0dXJlLCByaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlld0Zyb20gPiBsaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgYWRkR2FwKGxpbmUuZnJvbSwgdmlld0Zyb20sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICBpZiAodmlld1RvIDwgbGluZS50bylcbiAgICAgICAgICAgICAgICBhZGRHYXAodmlld1RvLCBsaW5lLnRvLCBsaW5lLCBzdHJ1Y3R1cmUpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMudmlld3BvcnRMaW5lcykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGluZS50eXBlKSlcbiAgICAgICAgICAgICAgICBsaW5lLnR5cGUuZm9yRWFjaChjaGVja0xpbmUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNoZWNrTGluZShsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FwcztcbiAgICB9XG4gICAgZ2FwU2l6ZShsaW5lLCBmcm9tLCB0bywgc3RydWN0dXJlKSB7XG4gICAgICAgIGxldCBmcmFjdGlvbiA9IGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIHRvKSAtIGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIGZyb20pO1xuICAgICAgICBpZiAodGhpcy5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbGluZS5oZWlnaHQgKiBmcmFjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJ1Y3R1cmUudG90YWwgKiB0aGlzLmhlaWdodE9yYWNsZS5jaGFyV2lkdGggKiBmcmFjdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVMaW5lR2FwcyhnYXBzKSB7XG4gICAgICAgIGlmICghTGluZUdhcC5zYW1lKGdhcHMsIHRoaXMubGluZUdhcHMpKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVHYXBzID0gZ2FwcztcbiAgICAgICAgICAgIHRoaXMubGluZUdhcERlY28gPSBEZWNvcmF0aW9uLnNldChnYXBzLm1hcChnYXAgPT4gZ2FwLmRyYXcodGhpcywgdGhpcy5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGVWaXNpYmxlUmFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGRlY28gPSB0aGlzLnN0YXRlRGVjbztcbiAgICAgICAgaWYgKHRoaXMubGluZUdhcHMubGVuZ3RoKVxuICAgICAgICAgICAgZGVjbyA9IGRlY28uY29uY2F0KHRoaXMubGluZUdhcERlY28pO1xuICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgIFJhbmdlU2V0LnNwYW5zKGRlY28sIHRoaXMudmlld3BvcnQuZnJvbSwgdGhpcy52aWV3cG9ydC50bywge1xuICAgICAgICAgICAgc3Bhbihmcm9tLCB0bykgeyByYW5nZXMucHVzaCh7IGZyb20sIHRvIH0pOyB9LFxuICAgICAgICAgICAgcG9pbnQoKSB7IH1cbiAgICAgICAgfSwgMjApO1xuICAgICAgICBsZXQgY2hhbmdlZCA9IDA7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoICE9IHRoaXMudmlzaWJsZVJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSA4IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnRNb3ZlZCAqLyB8IDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aCAmJiAhKGNoYW5nZWQgJiA4IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnRNb3ZlZCAqLyk7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBvbGQgPSB0aGlzLnZpc2libGVSYW5nZXNbaV0sIG53ID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChvbGQuZnJvbSAhPSBudy5mcm9tIHx8IG9sZC50byAhPSBudy50bykge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkIHw9IDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY2hhbmdlcyAmJiBjaGFuZ2VzLm1hcFBvcyhvbGQuZnJvbSwgLTEpID09IG53LmZyb20gJiYgY2hhbmdlcy5tYXBQb3Mob2xkLnRvLCAxKSA9PSBudy50bykpXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkIHw9IDggLyogVXBkYXRlRmxhZy5WaWV3cG9ydE1vdmVkICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpc2libGVSYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cbiAgICBsaW5lQmxvY2tBdChwb3MpIHtcbiAgICAgICAgcmV0dXJuIChwb3MgPj0gdGhpcy52aWV3cG9ydC5mcm9tICYmIHBvcyA8PSB0aGlzLnZpZXdwb3J0LnRvICYmXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0TGluZXMuZmluZChiID0+IGIuZnJvbSA8PSBwb3MgJiYgYi50byA+PSBwb3MpKSB8fFxuICAgICAgICAgICAgc2NhbGVCbG9jayh0aGlzLmhlaWdodE1hcC5saW5lQXQocG9zLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKSwgdGhpcy5zY2FsZXIpO1xuICAgIH1cbiAgICBsaW5lQmxvY2tBdEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIChoZWlnaHQgPj0gdGhpcy52aWV3cG9ydExpbmVzWzBdLnRvcCAmJiBoZWlnaHQgPD0gdGhpcy52aWV3cG9ydExpbmVzW3RoaXMudmlld3BvcnRMaW5lcy5sZW5ndGggLSAxXS5ib3R0b20gJiZcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRMaW5lcy5maW5kKGwgPT4gbC50b3AgPD0gaGVpZ2h0ICYmIGwuYm90dG9tID49IGhlaWdodCkpIHx8XG4gICAgICAgICAgICBzY2FsZUJsb2NrKHRoaXMuaGVpZ2h0TWFwLmxpbmVBdCh0aGlzLnNjYWxlci5mcm9tRE9NKGhlaWdodCksIFF1ZXJ5VHlwZS5CeUhlaWdodCwgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApLCB0aGlzLnNjYWxlcik7XG4gICAgfVxuICAgIHNjcm9sbEFuY2hvckF0KHNjcm9sbFRvcCkge1xuICAgICAgICBsZXQgYmxvY2sgPSB0aGlzLmxpbmVCbG9ja0F0SGVpZ2h0KHNjcm9sbFRvcCArIDgpO1xuICAgICAgICByZXR1cm4gYmxvY2suZnJvbSA+PSB0aGlzLnZpZXdwb3J0LmZyb20gfHwgdGhpcy52aWV3cG9ydExpbmVzWzBdLnRvcCAtIHNjcm9sbFRvcCA+IDIwMCA/IGJsb2NrIDogdGhpcy52aWV3cG9ydExpbmVzWzBdO1xuICAgIH1cbiAgICBlbGVtZW50QXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBzY2FsZUJsb2NrKHRoaXMuaGVpZ2h0TWFwLmJsb2NrQXQodGhpcy5zY2FsZXIuZnJvbURPTShoZWlnaHQpLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCksIHRoaXMuc2NhbGVyKTtcbiAgICB9XG4gICAgZ2V0IGRvY0hlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGVyLnRvRE9NKHRoaXMuaGVpZ2h0TWFwLmhlaWdodCk7XG4gICAgfVxuICAgIGdldCBjb250ZW50SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NIZWlnaHQgKyB0aGlzLnBhZGRpbmdUb3AgKyB0aGlzLnBhZGRpbmdCb3R0b207XG4gICAgfVxufVxuY2xhc3MgVmlld3BvcnQge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG59XG5mdW5jdGlvbiBsaW5lU3RydWN0dXJlKGZyb20sIHRvLCBzdGF0ZURlY28pIHtcbiAgICBsZXQgcmFuZ2VzID0gW10sIHBvcyA9IGZyb20sIHRvdGFsID0gMDtcbiAgICBSYW5nZVNldC5zcGFucyhzdGF0ZURlY28sIGZyb20sIHRvLCB7XG4gICAgICAgIHNwYW4oKSB7IH0sXG4gICAgICAgIHBvaW50KGZyb20sIHRvKSB7XG4gICAgICAgICAgICBpZiAoZnJvbSA+IHBvcykge1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogcG9zLCB0bzogZnJvbSB9KTtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBmcm9tIC0gcG9zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gdG87XG4gICAgICAgIH1cbiAgICB9LCAyMCk7IC8vIFdlJ3JlIG9ubHkgaW50ZXJlc3RlZCBpbiBjb2xsYXBzZWQgcmFuZ2VzIG9mIGEgc2lnbmlmaWNhbnQgc2l6ZVxuICAgIGlmIChwb3MgPCB0bykge1xuICAgICAgICByYW5nZXMucHVzaCh7IGZyb206IHBvcywgdG8gfSk7XG4gICAgICAgIHRvdGFsICs9IHRvIC0gcG9zO1xuICAgIH1cbiAgICByZXR1cm4geyB0b3RhbCwgcmFuZ2VzIH07XG59XG5mdW5jdGlvbiBmaW5kUG9zaXRpb24oeyB0b3RhbCwgcmFuZ2VzIH0sIHJhdGlvKSB7XG4gICAgaWYgKHJhdGlvIDw9IDApXG4gICAgICAgIHJldHVybiByYW5nZXNbMF0uZnJvbTtcbiAgICBpZiAocmF0aW8gPj0gMSlcbiAgICAgICAgcmV0dXJuIHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgbGV0IGRpc3QgPSBNYXRoLmZsb29yKHRvdGFsICogcmF0aW8pO1xuICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSByYW5nZXNbaV0sIHNpemUgPSB0byAtIGZyb207XG4gICAgICAgIGlmIChkaXN0IDw9IHNpemUpXG4gICAgICAgICAgICByZXR1cm4gZnJvbSArIGRpc3Q7XG4gICAgICAgIGRpc3QgLT0gc2l6ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kRnJhY3Rpb24oc3RydWN0dXJlLCBwb3MpIHtcbiAgICBsZXQgY291bnRlZCA9IDA7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHN0cnVjdHVyZS5yYW5nZXMpIHtcbiAgICAgICAgaWYgKHBvcyA8PSB0bykge1xuICAgICAgICAgICAgY291bnRlZCArPSBwb3MgLSBmcm9tO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY291bnRlZCArPSB0byAtIGZyb207XG4gICAgfVxuICAgIHJldHVybiBjb3VudGVkIC8gc3RydWN0dXJlLnRvdGFsO1xufVxuZnVuY3Rpb24gZmluZChhcnJheSwgZikge1xuICAgIGZvciAobGV0IHZhbCBvZiBhcnJheSlcbiAgICAgICAgaWYgKGYodmFsKSlcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIERvbid0IHNjYWxlIHdoZW4gdGhlIGRvY3VtZW50IGhlaWdodCBpcyB3aXRoaW4gdGhlIHJhbmdlIG9mIHdoYXRcbi8vIHRoZSBET00gY2FuIGhhbmRsZS5cbmNvbnN0IElkU2NhbGVyID0ge1xuICAgIHRvRE9NKG4pIHsgcmV0dXJuIG47IH0sXG4gICAgZnJvbURPTShuKSB7IHJldHVybiBuOyB9LFxuICAgIHNjYWxlOiAxLFxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlciA9PSB0aGlzOyB9XG59O1xuLy8gV2hlbiB0aGUgaGVpZ2h0IGlzIHRvbyBiaWcgKD4gVlAuTWF4RE9NSGVpZ2h0KSwgc2NhbGUgZG93biB0aGVcbi8vIHJlZ2lvbnMgb3V0c2lkZSB0aGUgdmlld3BvcnRzIHNvIHRoYXQgdGhlIHRvdGFsIGhlaWdodCBpc1xuLy8gVlAuTWF4RE9NSGVpZ2h0LlxuY2xhc3MgQmlnU2NhbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcmFjbGUsIGhlaWdodE1hcCwgdmlld3BvcnRzKSB7XG4gICAgICAgIGxldCB2cEhlaWdodCA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDtcbiAgICAgICAgdGhpcy52aWV3cG9ydHMgPSB2aWV3cG9ydHMubWFwKCh7IGZyb20sIHRvIH0pID0+IHtcbiAgICAgICAgICAgIGxldCB0b3AgPSBoZWlnaHRNYXAubGluZUF0KGZyb20sIFF1ZXJ5VHlwZS5CeVBvcywgb3JhY2xlLCAwLCAwKS50b3A7XG4gICAgICAgICAgICBsZXQgYm90dG9tID0gaGVpZ2h0TWFwLmxpbmVBdCh0bywgUXVlcnlUeXBlLkJ5UG9zLCBvcmFjbGUsIDAsIDApLmJvdHRvbTtcbiAgICAgICAgICAgIHZwSGVpZ2h0ICs9IGJvdHRvbSAtIHRvcDtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb20sIHRvLCB0b3AsIGJvdHRvbSwgZG9tVG9wOiAwLCBkb21Cb3R0b206IDAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2NhbGUgPSAoNzAwMDAwMCAvKiBWUC5NYXhET01IZWlnaHQgKi8gLSB2cEhlaWdodCkgLyAoaGVpZ2h0TWFwLmhlaWdodCAtIHZwSGVpZ2h0KTtcbiAgICAgICAgZm9yIChsZXQgb2JqIG9mIHRoaXMudmlld3BvcnRzKSB7XG4gICAgICAgICAgICBvYmouZG9tVG9wID0gZG9tQmFzZSArIChvYmoudG9wIC0gYmFzZSkgKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgZG9tQmFzZSA9IG9iai5kb21Cb3R0b20gPSBvYmouZG9tVG9wICsgKG9iai5ib3R0b20gLSBvYmoudG9wKTtcbiAgICAgICAgICAgIGJhc2UgPSBvYmouYm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvRE9NKG4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZwID0gaSA8IHRoaXMudmlld3BvcnRzLmxlbmd0aCA/IHRoaXMudmlld3BvcnRzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghdnAgfHwgbiA8IHZwLnRvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tQmFzZSArIChuIC0gYmFzZSkgKiB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgaWYgKG4gPD0gdnAuYm90dG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiB2cC5kb21Ub3AgKyAobiAtIHZwLnRvcCk7XG4gICAgICAgICAgICBiYXNlID0gdnAuYm90dG9tO1xuICAgICAgICAgICAgZG9tQmFzZSA9IHZwLmRvbUJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmcm9tRE9NKG4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGJhc2UgPSAwLCBkb21CYXNlID0gMDs7IGkrKykge1xuICAgICAgICAgICAgbGV0IHZwID0gaSA8IHRoaXMudmlld3BvcnRzLmxlbmd0aCA/IHRoaXMudmlld3BvcnRzW2ldIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghdnAgfHwgbiA8IHZwLmRvbVRvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSArIChuIC0gZG9tQmFzZSkgLyB0aGlzLnNjYWxlO1xuICAgICAgICAgICAgaWYgKG4gPD0gdnAuZG9tQm90dG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiB2cC50b3AgKyAobiAtIHZwLmRvbVRvcCk7XG4gICAgICAgICAgICBiYXNlID0gdnAuYm90dG9tO1xuICAgICAgICAgICAgZG9tQmFzZSA9IHZwLmRvbUJvdHRvbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEJpZ1NjYWxlcikpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlID09IG90aGVyLnNjYWxlICYmIHRoaXMudmlld3BvcnRzLmxlbmd0aCA9PSBvdGhlci52aWV3cG9ydHMubGVuZ3RoICYmXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0cy5ldmVyeSgodnAsIGkpID0+IHZwLmZyb20gPT0gb3RoZXIudmlld3BvcnRzW2ldLmZyb20gJiYgdnAudG8gPT0gb3RoZXIudmlld3BvcnRzW2ldLnRvKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzY2FsZUJsb2NrKGJsb2NrLCBzY2FsZXIpIHtcbiAgICBpZiAoc2NhbGVyLnNjYWxlID09IDEpXG4gICAgICAgIHJldHVybiBibG9jaztcbiAgICBsZXQgYlRvcCA9IHNjYWxlci50b0RPTShibG9jay50b3ApLCBiQm90dG9tID0gc2NhbGVyLnRvRE9NKGJsb2NrLmJvdHRvbSk7XG4gICAgcmV0dXJuIG5ldyBCbG9ja0luZm8oYmxvY2suZnJvbSwgYmxvY2subGVuZ3RoLCBiVG9wLCBiQm90dG9tIC0gYlRvcCwgQXJyYXkuaXNBcnJheShibG9jay5fY29udGVudCkgPyBibG9jay5fY29udGVudC5tYXAoYiA9PiBzY2FsZUJsb2NrKGIsIHNjYWxlcikpIDogYmxvY2suX2NvbnRlbnQpO1xufVxuXG5jb25zdCB0aGVtZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiBzdHJzID0+IHN0cnMuam9pbihcIiBcIikgfSk7XG5jb25zdCBkYXJrVGhlbWUgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5pbmRleE9mKHRydWUpID4gLTEgfSk7XG5jb25zdCBiYXNlVGhlbWVJRCA9IC8qQF9fUFVSRV9fKi9TdHlsZU1vZHVsZS5uZXdOYW1lKCksIGJhc2VMaWdodElEID0gLypAX19QVVJFX18qL1N0eWxlTW9kdWxlLm5ld05hbWUoKSwgYmFzZURhcmtJRCA9IC8qQF9fUFVSRV9fKi9TdHlsZU1vZHVsZS5uZXdOYW1lKCk7XG5jb25zdCBsaWdodERhcmtJRHMgPSB7IFwiJmxpZ2h0XCI6IFwiLlwiICsgYmFzZUxpZ2h0SUQsIFwiJmRhcmtcIjogXCIuXCIgKyBiYXNlRGFya0lEIH07XG5mdW5jdGlvbiBidWlsZFRoZW1lKG1haW4sIHNwZWMsIHNjb3Blcykge1xuICAgIHJldHVybiBuZXcgU3R5bGVNb2R1bGUoc3BlYywge1xuICAgICAgICBmaW5pc2goc2VsKSB7XG4gICAgICAgICAgICByZXR1cm4gLyYvLnRlc3Qoc2VsKSA/IHNlbC5yZXBsYWNlKC8mXFx3Ki8sIG0gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChtID09IFwiJlwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFpbjtcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlcyB8fCAhc2NvcGVzW21dKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVW5zdXBwb3J0ZWQgc2VsZWN0b3I6ICR7bX1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGVzW21dO1xuICAgICAgICAgICAgfSkgOiBtYWluICsgXCIgXCIgKyBzZWw7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmNvbnN0IGJhc2VUaGVtZSQxID0gLypAX19QVVJFX18qL2J1aWxkVGhlbWUoXCIuXCIgKyBiYXNlVGhlbWVJRCwge1xuICAgIFwiJlwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlICFpbXBvcnRhbnRcIixcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgXCImLmNtLWZvY3VzZWRcIjoge1xuICAgICAgICAgICAgLy8gUHJvdmlkZSBhIHNpbXBsZSBkZWZhdWx0IG91dGxpbmUgdG8gbWFrZSBzdXJlIGEgZm9jdXNlZFxuICAgICAgICAgICAgLy8gZWRpdG9yIGlzIHZpc3VhbGx5IGRpc3RpbmN0LiBDYW4ndCBsZWF2ZSB0aGUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGF0IHdpbGwgYXBwbHkgdG8gdGhlIGNvbnRlbnQgZWxlbWVudCwgd2hpY2ggaXNcbiAgICAgICAgICAgIC8vIGluc2lkZSB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYW5kIGRvZXNuJ3QgaW5jbHVkZSB0aGVcbiAgICAgICAgICAgIC8vIGd1dHRlcnMuIFdlIGFsc28gY2FuJ3QgdXNlIGFuICdhdXRvJyBvdXRsaW5lLCBzaW5jZSB0aG9zZVxuICAgICAgICAgICAgLy8gYXJlLCBmb3Igc29tZSByZWFzb24sIGRyYXduIGJlaGluZCB0aGUgZWxlbWVudCBjb250ZW50LCB3aGljaFxuICAgICAgICAgICAgLy8gd2lsbCBjYXVzZSB0aGluZ3MgbGlrZSB0aGUgYWN0aXZlIGxpbmUgYmFja2dyb3VuZCB0byBjb3ZlclxuICAgICAgICAgICAgLy8gdGhlIG91dGxpbmUgKCMyOTcpLlxuICAgICAgICAgICAgb3V0bGluZTogXCIxcHggZG90dGVkICMyMTIxMjFcIlxuICAgICAgICB9LFxuICAgICAgICBkaXNwbGF5OiBcImZsZXggIWltcG9ydGFudFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiXG4gICAgfSxcbiAgICBcIi5jbS1zY3JvbGxlclwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiZmxleCAhaW1wb3J0YW50XCIsXG4gICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydCAhaW1wb3J0YW50XCIsXG4gICAgICAgIGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlXCIsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDEuNCxcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgb3ZlcmZsb3dYOiBcImF1dG9cIixcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgekluZGV4OiAwLFxuICAgICAgICBvdmVyZmxvd0FuY2hvcjogXCJub25lXCIsXG4gICAgfSxcbiAgICBcIi5jbS1jb250ZW50XCI6IHtcbiAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICBmbGV4R3JvdzogMixcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcInByZVwiLFxuICAgICAgICB3b3JkV3JhcDogXCJub3JtYWxcIiwgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvZGV2L2lzc3Vlcy80NTZcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgbWluSGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgcGFkZGluZzogXCI0cHggMFwiLFxuICAgICAgICBvdXRsaW5lOiBcIm5vbmVcIixcbiAgICAgICAgXCImW2NvbnRlbnRlZGl0YWJsZT10cnVlXVwiOiB7XG4gICAgICAgICAgICBXZWJraXRVc2VyTW9kaWZ5OiBcInJlYWQtd3JpdGUtcGxhaW50ZXh0LW9ubHlcIixcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCIuY20tbGluZVdyYXBwaW5nXCI6IHtcbiAgICAgICAgd2hpdGVTcGFjZV9mYWxsYmFjazogXCJwcmUtd3JhcFwiLCAvLyBGb3IgSUVcbiAgICAgICAgd2hpdGVTcGFjZTogXCJicmVhay1zcGFjZXNcIixcbiAgICAgICAgd29yZEJyZWFrOiBcImJyZWFrLXdvcmRcIiwgLy8gRm9yIFNhZmFyaSwgd2hpY2ggZG9lc24ndCBzdXBwb3J0IG92ZXJmbG93LXdyYXA6IGFueXdoZXJlXG4gICAgICAgIG92ZXJmbG93V3JhcDogXCJhbnl3aGVyZVwiLFxuICAgICAgICBmbGV4U2hyaW5rOiAxXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tY29udGVudFwiOiB7IGNhcmV0Q29sb3I6IFwiYmxhY2tcIiB9LFxuICAgIFwiJmRhcmsgLmNtLWNvbnRlbnRcIjogeyBjYXJldENvbG9yOiBcIndoaXRlXCIgfSxcbiAgICBcIi5jbS1saW5lXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICBwYWRkaW5nOiBcIjAgMnB4IDAgNnB4XCJcbiAgICB9LFxuICAgIFwiLmNtLWxheWVyXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBjb250YWluOiBcInNpemUgc3R5bGVcIixcbiAgICAgICAgXCImID4gKlwiOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZDlkOWQ5XCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMyMjJcIlxuICAgIH0sXG4gICAgXCImbGlnaHQuY20tZm9jdXNlZCA+IC5jbS1zY3JvbGxlciA+IC5jbS1zZWxlY3Rpb25MYXllciAuY20tc2VsZWN0aW9uQmFja2dyb3VuZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiI2Q3ZDRmMFwiXG4gICAgfSxcbiAgICBcIiZkYXJrLmNtLWZvY3VzZWQgPiAuY20tc2Nyb2xsZXIgPiAuY20tc2VsZWN0aW9uTGF5ZXIgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMyMzNcIlxuICAgIH0sXG4gICAgXCIuY20tY3Vyc29yTGF5ZXJcIjoge1xuICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIlxuICAgIH0sXG4gICAgXCImLmNtLWZvY3VzZWQgPiAuY20tc2Nyb2xsZXIgPiAuY20tY3Vyc29yTGF5ZXJcIjoge1xuICAgICAgICBhbmltYXRpb246IFwic3RlcHMoMSkgY20tYmxpbmsgMS4ycyBpbmZpbml0ZVwiXG4gICAgfSxcbiAgICAvLyBUd28gYW5pbWF0aW9ucyBkZWZpbmVkIHNvIHRoYXQgd2UgY2FuIHN3aXRjaCBiZXR3ZWVuIHRoZW0gdG9cbiAgICAvLyByZXN0YXJ0IHRoZSBhbmltYXRpb24gd2l0aG91dCBmb3JjaW5nIGFub3RoZXIgc3R5bGVcbiAgICAvLyByZWNvbXB1dGF0aW9uLlxuICAgIFwiQGtleWZyYW1lcyBjbS1ibGlua1wiOiB7IFwiMCVcIjoge30sIFwiNTAlXCI6IHsgb3BhY2l0eTogMCB9LCBcIjEwMCVcIjoge30gfSxcbiAgICBcIkBrZXlmcmFtZXMgY20tYmxpbmsyXCI6IHsgXCIwJVwiOiB7fSwgXCI1MCVcIjogeyBvcGFjaXR5OiAwIH0sIFwiMTAwJVwiOiB7fSB9LFxuICAgIFwiLmNtLWN1cnNvciwgLmNtLWRyb3BDdXJzb3JcIjoge1xuICAgICAgICBib3JkZXJMZWZ0OiBcIjEuMnB4IHNvbGlkIGJsYWNrXCIsXG4gICAgICAgIG1hcmdpbkxlZnQ6IFwiLTAuNnB4XCIsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgIH0sXG4gICAgXCIuY20tY3Vyc29yXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJub25lXCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWN1cnNvclwiOiB7XG4gICAgICAgIGJvcmRlckxlZnRDb2xvcjogXCIjZGRkXCJcbiAgICB9LFxuICAgIFwiLmNtLWRyb3BDdXJzb3JcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG4gICAgfSxcbiAgICBcIiYuY20tZm9jdXNlZCA+IC5jbS1zY3JvbGxlciA+IC5jbS1jdXJzb3JMYXllciAuY20tY3Vyc29yXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiXG4gICAgfSxcbiAgICBcIi5jbS1pc29cIjoge1xuICAgICAgICB1bmljb2RlQmlkaTogXCJpc29sYXRlXCJcbiAgICB9LFxuICAgIFwiLmNtLWFubm91bmNlZFwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgIHRvcDogXCItMTAwMDBweFwiXG4gICAgfSxcbiAgICBcIkBtZWRpYSBwcmludFwiOiB7XG4gICAgICAgIFwiLmNtLWFubm91bmNlZFwiOiB7IGRpc3BsYXk6IFwibm9uZVwiIH1cbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1hY3RpdmVMaW5lXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNjY2VlZmY0NFwiIH0sXG4gICAgXCImZGFyayAuY20tYWN0aXZlTGluZVwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjOTllZWZmMzNcIiB9LFxuICAgIFwiJmxpZ2h0IC5jbS1zcGVjaWFsQ2hhclwiOiB7IGNvbG9yOiBcInJlZFwiIH0sXG4gICAgXCImZGFyayAuY20tc3BlY2lhbENoYXJcIjogeyBjb2xvcjogXCIjZjc4XCIgfSxcbiAgICBcIi5jbS1ndXR0ZXJzXCI6IHtcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIHpJbmRleDogMjAwLFxuICAgIH0sXG4gICAgXCIuY20tZ3V0dGVycy1iZWZvcmVcIjogeyBpbnNldElubGluZVN0YXJ0OiAwIH0sXG4gICAgXCIuY20tZ3V0dGVycy1hZnRlclwiOiB7IGluc2V0SW5saW5lRW5kOiAwIH0sXG4gICAgXCImbGlnaHQgLmNtLWd1dHRlcnNcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2Y1ZjVmNVwiLFxuICAgICAgICBjb2xvcjogXCIjNmM2YzZjXCIsXG4gICAgICAgIGJvcmRlcjogXCIwcHggc29saWQgI2RkZFwiLFxuICAgICAgICBcIiYuY20tZ3V0dGVycy1iZWZvcmVcIjogeyBib3JkZXJSaWdodFdpZHRoOiBcIjFweFwiIH0sXG4gICAgICAgIFwiJi5jbS1ndXR0ZXJzLWFmdGVyXCI6IHsgYm9yZGVyTGVmdFdpZHRoOiBcIjFweFwiIH0sXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1ndXR0ZXJzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgY29sb3I6IFwiI2NjY1wiXG4gICAgfSxcbiAgICBcIi5jbS1ndXR0ZXJcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImZsZXggIWltcG9ydGFudFwiLCAvLyBOZWNlc3NhcnkgLS0gcHJldmVudHMgbWFyZ2luIGNvbGxhcHNpbmdcbiAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgZmxleFNocmluazogMCxcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgbWluSGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCJcbiAgICB9LFxuICAgIFwiLmNtLWd1dHRlckVsZW1lbnRcIjoge1xuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiXG4gICAgfSxcbiAgICBcIi5jbS1saW5lTnVtYmVycyAuY20tZ3V0dGVyRWxlbWVudFwiOiB7XG4gICAgICAgIHBhZGRpbmc6IFwiMCAzcHggMCA1cHhcIixcbiAgICAgICAgbWluV2lkdGg6IFwiMjBweFwiLFxuICAgICAgICB0ZXh0QWxpZ246IFwicmlnaHRcIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWFjdGl2ZUxpbmVHdXR0ZXJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2UyZjJmZlwiXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1hY3RpdmVMaW5lR3V0dGVyXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMyMjIyMjdcIlxuICAgIH0sXG4gICAgXCIuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgcG9zaXRpb246IFwic3RpY2t5XCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICB6SW5kZXg6IDMwMFxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXBhbmVsc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZjVmNWY1XCIsXG4gICAgICAgIGNvbG9yOiBcImJsYWNrXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1wYW5lbHMtdG9wXCI6IHtcbiAgICAgICAgYm9yZGVyQm90dG9tOiBcIjFweCBzb2xpZCAjZGRkXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1wYW5lbHMtYm90dG9tXCI6IHtcbiAgICAgICAgYm9yZGVyVG9wOiBcIjFweCBzb2xpZCAjZGRkXCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXBhbmVsc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMzMzMzM4XCIsXG4gICAgICAgIGNvbG9yOiBcIndoaXRlXCJcbiAgICB9LFxuICAgIFwiLmNtLWRpYWxvZ1wiOiB7XG4gICAgICAgIHBhZGRpbmc6IFwiMnB4IDE5cHggNHB4IDZweFwiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICBcIiYgbGFiZWxcIjogeyBmb250U2l6ZTogXCI4MCVcIiB9LFxuICAgIH0sXG4gICAgXCIuY20tZGlhbG9nLWNsb3NlXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdG9wOiBcIjNweFwiLFxuICAgICAgICByaWdodDogXCI0cHhcIixcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcImluaGVyaXRcIixcbiAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgZm9udDogXCJpbmhlcml0XCIsXG4gICAgICAgIGZvbnRTaXplOiBcIjE0cHhcIixcbiAgICAgICAgcGFkZGluZzogXCIwXCJcbiAgICB9LFxuICAgIFwiLmNtLXRhYlwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcImJvdHRvbVwiXG4gICAgfSxcbiAgICBcIi5jbS13aWRnZXRCdWZmZXJcIjoge1xuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRleHQtdG9wXCIsXG4gICAgICAgIGhlaWdodDogXCIxZW1cIixcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lXCJcbiAgICB9LFxuICAgIFwiLmNtLXBsYWNlaG9sZGVyXCI6IHtcbiAgICAgICAgY29sb3I6IFwiIzg4OFwiLFxuICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICB1c2VyU2VsZWN0OiBcIm5vbmVcIlxuICAgIH0sXG4gICAgXCIuY20taGlnaGxpZ2h0U3BhY2VcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwicmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCA1MCUgNTUlLCAjYWFhIDIwJSwgdHJhbnNwYXJlbnQgNSUpXCIsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogXCJjZW50ZXJcIixcbiAgICB9LFxuICAgIFwiLmNtLWhpZ2hsaWdodFRhYlwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjBcIj48cGF0aCBzdHJva2U9XCIlMjM4ODhcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBkPVwiTTEgMTBIMTk2TDE5MCA1TTE5MCAxNUwxOTYgMTBNMTk3IDRMMTk3IDE2XCIvPjwvc3ZnPicpYCxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6IFwiYXV0byAxMDAlXCIsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogXCJyaWdodCA5MCVcIixcbiAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogXCJuby1yZXBlYXRcIlxuICAgIH0sXG4gICAgXCIuY20tdHJhaWxpbmdTcGFjZVwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmYzMzIyNTVcIlxuICAgIH0sXG4gICAgXCIuY20tYnV0dG9uXCI6IHtcbiAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICAgICAgY29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICBmb250U2l6ZTogXCI3MCVcIixcbiAgICAgICAgcGFkZGluZzogXCIuMmVtIDFlbVwiLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiMXB4XCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1idXR0b25cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwibGluZWFyLWdyYWRpZW50KCNlZmYxZjUsICNkOWQ5ZGYpXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzg4OFwiLFxuICAgICAgICBcIiY6YWN0aXZlXCI6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoI2I0YjRiNCwgI2QwZDNkNilcIlxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS1idXR0b25cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwibGluZWFyLWdyYWRpZW50KCMzOTM5MzksICMxMTEpXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzg4OFwiLFxuICAgICAgICBcIiY6YWN0aXZlXCI6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoIzExMSwgIzMzMylcIlxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIi5jbS10ZXh0ZmllbGRcIjoge1xuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgICAgICBjb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgIGZvbnRTaXplOiBcIjcwJVwiLFxuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkIHNpbHZlclwiLFxuICAgICAgICBwYWRkaW5nOiBcIi4yZW0gLjVlbVwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdGV4dGZpZWxkXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIndoaXRlXCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXRleHRmaWVsZFwiOiB7XG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzU1NVwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiaW5oZXJpdFwiXG4gICAgfVxufSwgbGlnaHREYXJrSURzKTtcblxuY29uc3Qgb2JzZXJ2ZU9wdGlvbnMgPSB7XG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgc3VidHJlZTogdHJ1ZSxcbiAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGFPbGRWYWx1ZTogdHJ1ZVxufTtcbi8vIElFMTEgaGFzIHZlcnkgYnJva2VuIG11dGF0aW9uIG9ic2VydmVycywgc28gd2UgYWxzbyBsaXN0ZW4gdG9cbi8vIERPTUNoYXJhY3RlckRhdGFNb2RpZmllZCB0aGVyZVxuY29uc3QgdXNlQ2hhckRhdGEgPSBicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMTtcbmNsYXNzIERPTU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHQgPSBudWxsO1xuICAgICAgICAvLyBUaGUga25vd24gc2VsZWN0aW9uLiBLZXB0IGluIG91ciBvd24gb2JqZWN0LCBhcyBvcHBvc2VkIHRvIGp1c3RcbiAgICAgICAgLy8gZGlyZWN0bHkgYWNjZXNzaW5nIHRoZSBzZWxlY3Rpb24gYmVjYXVzZTpcbiAgICAgICAgLy8gIC0gU2FmYXJpIGRvZXNuJ3QgcmVwb3J0IHRoZSByaWdodCBzZWxlY3Rpb24gaW4gc2hhZG93IERPTVxuICAgICAgICAvLyAgLSBSZWFkaW5nIGZyb20gdGhlIHNlbGVjdGlvbiBmb3JjZXMgYSBET00gbGF5b3V0XG4gICAgICAgIC8vICAtIFRoaXMgd2F5LCB3ZSBjYW4gaWdub3JlIHNlbGVjdGlvbmNoYW5nZSBldmVudHMgaWYgd2UgaGF2ZVxuICAgICAgICAvLyAgICBhbHJlYWR5IHNlZW4gdGhlICduZXcnIHNlbGVjdGlvblxuICAgICAgICB0aGlzLnNlbGVjdGlvblJhbmdlID0gbmV3IERPTVNlbGVjdGlvblN0YXRlO1xuICAgICAgICAvLyBTZXQgd2hlbiBhIHNlbGVjdGlvbiBjaGFuZ2UgaXMgZGV0ZWN0ZWQsIGNsZWFyZWQgb24gZmx1c2hcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVsYXllZEZsdXNoID0gLTE7XG4gICAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMuZGVsYXllZEFuZHJvaWRLZXkgPSBudWxsO1xuICAgICAgICB0aGlzLmZsdXNoaW5nQW5kcm9pZEtleSA9IC0xO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAwO1xuICAgICAgICB0aGlzLnNjcm9sbFRhcmdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2l6ZVNjcm9sbCA9IG51bGw7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ2FwSW50ZXJzZWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5nYXBzID0gW107XG4gICAgICAgIHRoaXMucHJpbnRRdWVyeSA9IG51bGw7XG4gICAgICAgIC8vIFRpbWVvdXQgZm9yIHNjaGVkdWxpbmcgY2hlY2sgb2YgdGhlIHBhcmVudHMgdGhhdCBuZWVkIHNjcm9sbCBoYW5kbGVyc1xuICAgICAgICB0aGlzLnBhcmVudENoZWNrID0gLTE7XG4gICAgICAgIHRoaXMuZG9tID0gdmlldy5jb250ZW50RE9NO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IG11dCBvZiBtdXRhdGlvbnMpXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG11dCk7XG4gICAgICAgICAgICAvLyBJRTExIHdpbGwgc29tZXRpbWVzIChvbiB0eXBpbmcgb3ZlciBhIHNlbGVjdGlvbiBvclxuICAgICAgICAgICAgLy8gYmFja3NwYWNpbmcgb3V0IGEgc2luZ2xlIGNoYXJhY3RlciB0ZXh0IG5vZGUpIGNhbGwgdGhlXG4gICAgICAgICAgICAvLyBvYnNlcnZlciBjYWxsYmFjayBiZWZvcmUgYWN0dWFsbHkgdXBkYXRpbmcgdGhlIERPTS5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBVbnJlbGF0ZWRseSwgaU9TIFNhZmFyaSB3aWxsLCB3aGVuIGVuZGluZyBhIGNvbXBvc2l0aW9uLFxuICAgICAgICAgICAgLy8gc29tZXRpbWVzIGZpcnN0IGNsZWFyIGl0LCBkZWxpdmVyIHRoZSBtdXRhdGlvbnMsIGFuZCB0aGVuXG4gICAgICAgICAgICAvLyByZWluc2VydCB0aGUgZmluaXNoZWQgdGV4dC4gQ29kZU1pcnJvcidzIGhhbmRsaW5nIG9mIHRoZVxuICAgICAgICAgICAgLy8gZGVsZXRpb24gd2lsbCBwcmV2ZW50IHRoZSByZWluc2VydGlvbiBmcm9tIGhhcHBlbmluZyxcbiAgICAgICAgICAgIC8vIGJyZWFraW5nIGNvbXBvc2l0aW9uLlxuICAgICAgICAgICAgaWYgKChicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMSB8fCBicm93c2VyLmlvcyAmJiB2aWV3LmNvbXBvc2luZykgJiZcbiAgICAgICAgICAgICAgICBtdXRhdGlvbnMuc29tZShtID0+IG0udHlwZSA9PSBcImNoaWxkTGlzdFwiICYmIG0ucmVtb3ZlZE5vZGVzLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgICAgICBtLnR5cGUgPT0gXCJjaGFyYWN0ZXJEYXRhXCIgJiYgbS5vbGRWYWx1ZS5sZW5ndGggPiBtLnRhcmdldC5ub2RlVmFsdWUubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoU29vbigpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh3aW5kb3cuRWRpdENvbnRleHQgJiYgYnJvd3Nlci5hbmRyb2lkICYmIHZpZXcuY29uc3RydWN0b3IuRURJVF9DT05URVhUICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgLy8gQ2hyb21lIDwxMjYgZG9lc24ndCBzdXBwb3J0IGludmVydGVkIHNlbGVjdGlvbnMgaW4gZWRpdCBjb250ZXh0ICgjMTM5MilcbiAgICAgICAgICAgICEoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5jaHJvbWVfdmVyc2lvbiA8IDEyNikpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdENvbnRleHQgPSBuZXcgRWRpdENvbnRleHRNYW5hZ2VyKHZpZXcpO1xuICAgICAgICAgICAgaWYgKHZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpKVxuICAgICAgICAgICAgICAgIHZpZXcuY29udGVudERPTS5lZGl0Q29udGV4dCA9IHRoaXMuZWRpdENvbnRleHQuZWRpdENvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZUNoYXJEYXRhKVxuICAgICAgICAgICAgdGhpcy5vbkNoYXJEYXRhID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHsgdGFyZ2V0OiBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hhcmFjdGVyRGF0YVwiLFxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogZXZlbnQucHJldlZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hTb29uKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUHJpbnQgPSB0aGlzLm9uUHJpbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNjcm9sbCA9IHRoaXMub25TY3JvbGwuYmluZCh0aGlzKTtcbiAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKVxuICAgICAgICAgICAgdGhpcy5wcmludFF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoXCJwcmludFwiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU2Nyb2xsID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaWYgKCgoX2EgPSB0aGlzLnZpZXcuZG9jVmlldykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhc3RVcGRhdGUpIDwgRGF0ZS5ub3coKSAtIDc1KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU2Nyb2xsLm9ic2VydmUodmlldy5zY3JvbGxET00pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkV2luZG93TGlzdGVuZXJzKHRoaXMud2luID0gdmlldy53aW4pO1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIGlmICh0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmludGVyc2VjdGlvbiA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRDaGVjayA8IDApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Q2hlY2sgPSBzZXRUaW1lb3V0KHRoaXMubGlzdGVuRm9yU2Nyb2xsLmJpbmQodGhpcyksIDEwMDApO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IDAgJiYgKGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApICE9IHRoaXMuaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW5nID0gIXRoaXMuaW50ZXJzZWN0aW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3RpbmcgIT0gdGhpcy52aWV3LmluVmlldylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGxDaGFuZ2VkKGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHsgdGhyZXNob2xkOiBbMCwgLjAwMV0gfSk7XG4gICAgICAgICAgICB0aGlzLmludGVyc2VjdGlvbi5vYnNlcnZlKHRoaXMuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuZ2FwSW50ZXJzZWN0aW9uID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IDAgJiYgZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdLmludGVyc2VjdGlvblJhdGlvID4gMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbENoYW5nZWQoZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSk7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5Gb3JTY3JvbGwoKTtcbiAgICAgICAgdGhpcy5yZWFkU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICB9XG4gICAgb25TY3JvbGxDaGFuZ2VkKGUpIHtcbiAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUucnVuSGFuZGxlcnMoXCJzY3JvbGxcIiwgZSk7XG4gICAgICAgIGlmICh0aGlzLmludGVyc2VjdGluZylcbiAgICAgICAgICAgIHRoaXMudmlldy5tZWFzdXJlKCk7XG4gICAgfVxuICAgIG9uU2Nyb2xsKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW5nKVxuICAgICAgICAgICAgdGhpcy5mbHVzaChmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLmVkaXRDb250ZXh0KVxuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMuZWRpdENvbnRleHQubWVhc3VyZVJlcSk7XG4gICAgICAgIHRoaXMub25TY3JvbGxDaGFuZ2VkKGUpO1xuICAgIH1cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzaXplVGltZW91dCA8IDApXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSAtMTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgb25QcmludChldmVudCkge1xuICAgICAgICBpZiAoKGV2ZW50LnR5cGUgPT0gXCJjaGFuZ2VcIiB8fCAhZXZlbnQudHlwZSkgJiYgIWV2ZW50Lm1hdGNoZXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUucHJpbnRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZXcubWVhc3VyZSgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUucHJpbnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICB9LCA1MDApO1xuICAgIH1cbiAgICB1cGRhdGVHYXBzKGdhcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FwSW50ZXJzZWN0aW9uICYmIChnYXBzLmxlbmd0aCAhPSB0aGlzLmdhcHMubGVuZ3RoIHx8IHRoaXMuZ2Fwcy5zb21lKChnLCBpKSA9PiBnICE9IGdhcHNbaV0pKSkge1xuICAgICAgICAgICAgdGhpcy5nYXBJbnRlcnNlY3Rpb24uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgZ2FwIG9mIGdhcHMpXG4gICAgICAgICAgICAgICAgdGhpcy5nYXBJbnRlcnNlY3Rpb24ub2JzZXJ2ZShnYXApO1xuICAgICAgICAgICAgdGhpcy5nYXBzID0gZ2FwcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNlbGVjdGlvbkNoYW5nZShldmVudCkge1xuICAgICAgICBsZXQgd2FzQ2hhbmdlZCA9IHRoaXMuc2VsZWN0aW9uQ2hhbmdlZDtcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRTZWxlY3Rpb25SYW5nZSgpIHx8IHRoaXMuZGVsYXllZEFuZHJvaWRLZXkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXMsIHNlbCA9IHRoaXMuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIGlmICh2aWV3LnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IHZpZXcucm9vdC5hY3RpdmVFbGVtZW50ICE9IHRoaXMuZG9tIDogIWhhc1NlbGVjdGlvbih0aGlzLmRvbSwgc2VsKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBzZWwuYW5jaG9yTm9kZSAmJiB2aWV3LmRvY1ZpZXcubmVhcmVzdChzZWwuYW5jaG9yTm9kZSk7XG4gICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuaWdub3JlRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIXdhc0NoYW5nZWQpXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVsZXRpb25zIG9uIElFMTEgZmlyZSB0aGVpciBldmVudHMgaW4gdGhlIHdyb25nIG9yZGVyLCBnaXZpbmdcbiAgICAgICAgLy8gdXMgYSBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50IGJlZm9yZSB0aGUgRE9NIGNoYW5nZXMgYXJlXG4gICAgICAgIC8vIHJlcG9ydGVkLlxuICAgICAgICAvLyBDaHJvbWUgQW5kcm9pZCBoYXMgYSBzaW1pbGFyIGlzc3VlIHdoZW4gYmFja3NwYWNpbmcgb3V0IGFcbiAgICAgICAgLy8gc2VsZWN0aW9uICgjNjQ1KS5cbiAgICAgICAgaWYgKChicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMSB8fCBicm93c2VyLmFuZHJvaWQgJiYgYnJvd3Nlci5jaHJvbWUpICYmICF2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmVtcHR5ICYmXG4gICAgICAgICAgICAvLyAoU2VsZWN0aW9uLmlzQ29sbGFwc2VkIGlzbid0IHJlbGlhYmxlIG9uIElFKVxuICAgICAgICAgICAgc2VsLmZvY3VzTm9kZSAmJiBpc0VxdWl2YWxlbnRQb3NpdGlvbihzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQsIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KSlcbiAgICAgICAgICAgIHRoaXMuZmx1c2hTb29uKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuZmx1c2goZmFsc2UpO1xuICAgIH1cbiAgICByZWFkU2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXM7XG4gICAgICAgIC8vIFRoZSBTZWxlY3Rpb24gb2JqZWN0IGlzIGJyb2tlbiBpbiBzaGFkb3cgcm9vdHMgaW4gU2FmYXJpLiBTZWVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvZGV2L2lzc3Vlcy80MTRcbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHJhbmdlID0gYnJvd3Nlci5zYWZhcmkgJiYgdmlldy5yb290Lm5vZGVUeXBlID09IDExICYmXG4gICAgICAgICAgICB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmRvbSAmJlxuICAgICAgICAgICAgc2FmYXJpU2VsZWN0aW9uUmFuZ2VIYWNrKHRoaXMudmlldywgc2VsZWN0aW9uKSB8fCBzZWxlY3Rpb247XG4gICAgICAgIGlmICghcmFuZ2UgfHwgdGhpcy5zZWxlY3Rpb25SYW5nZS5lcShyYW5nZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBsb2NhbCA9IGhhc1NlbGVjdGlvbih0aGlzLmRvbSwgcmFuZ2UpO1xuICAgICAgICAvLyBEZXRlY3QgdGhlIHNpdHVhdGlvbiB3aGVyZSB0aGUgYnJvd3NlciBoYXMsIG9uIGZvY3VzLCBtb3ZlZCB0aGVcbiAgICAgICAgLy8gc2VsZWN0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgY29udGVudCBlbGVtZW50LiBSZXNldCBpdCB0byB0aGVcbiAgICAgICAgLy8gcG9zaXRpb24gZnJvbSB0aGUgZWRpdG9yIHN0YXRlLlxuICAgICAgICBpZiAobG9jYWwgJiYgIXRoaXMuc2VsZWN0aW9uQ2hhbmdlZCAmJlxuICAgICAgICAgICAgdmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPiBEYXRlLm5vdygpIC0gMjAwICYmXG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUubGFzdFRvdWNoVGltZSA8IERhdGUubm93KCkgLSAzMDAgJiZcbiAgICAgICAgICAgIGF0RWxlbWVudFN0YXJ0KHRoaXMuZG9tLCByYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICAgICAgdmlldy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0UmFuZ2UocmFuZ2UpO1xuICAgICAgICBpZiAobG9jYWwpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uUmFuZ2UoYW5jaG9yLCBoZWFkKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0KGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0LCBoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGNsZWFyU2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0KG51bGwsIDAsIG51bGwsIDApO1xuICAgIH1cbiAgICBsaXN0ZW5Gb3JTY3JvbGwoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Q2hlY2sgPSAtMTtcbiAgICAgICAgbGV0IGkgPSAwLCBjaGFuZ2VkID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgZG9tID0gdGhpcy5kb207IGRvbTspIHtcbiAgICAgICAgICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlZCAmJiBpIDwgdGhpcy5zY3JvbGxUYXJnZXRzLmxlbmd0aCAmJiB0aGlzLnNjcm9sbFRhcmdldHNbaV0gPT0gZG9tKVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0aGlzLnNjcm9sbFRhcmdldHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQucHVzaChkb20pO1xuICAgICAgICAgICAgICAgIGRvbSA9IGRvbS5hc3NpZ25lZFNsb3QgfHwgZG9tLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb20ubm9kZVR5cGUgPT0gMTEpIHsgLy8gU2hhZG93IHJvb3RcbiAgICAgICAgICAgICAgICBkb20gPSBkb20uaG9zdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpIDwgdGhpcy5zY3JvbGxUYXJnZXRzLmxlbmd0aCAmJiAhY2hhbmdlZClcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0aGlzLnNjcm9sbFRhcmdldHMuc2xpY2UoMCwgaSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkb20gb2YgdGhpcy5zY3JvbGxUYXJnZXRzKVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICAgICAgZm9yIChsZXQgZG9tIG9mIHRoaXMuc2Nyb2xsVGFyZ2V0cyA9IGNoYW5nZWQpXG4gICAgICAgICAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWdub3JlKGYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZG9tLCBvYnNlcnZlT3B0aW9ucyk7XG4gICAgICAgIGlmICh1c2VDaGFyRGF0YSlcbiAgICAgICAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIiwgdGhpcy5vbkNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaWYgKHVzZUNoYXJEYXRhKVxuICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLCB0aGlzLm9uQ2hhckRhdGEpO1xuICAgIH1cbiAgICAvLyBUaHJvdyBhd2F5IGFueSBwZW5kaW5nIGNoYW5nZXNcbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkcygpO1xuICAgICAgICB0aGlzLnF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBDaHJvbWUgQW5kcm9pZCwgZXNwZWNpYWxseSBpbiBjb21iaW5hdGlvbiB3aXRoIEdCb2FyZCwgbm90IG9ubHlcbiAgICAvLyBkb2Vzbid0IHJlbGlhYmx5IGZpcmUgcmVndWxhciBrZXkgZXZlbnRzLCBidXQgYWxzbyBvZnRlblxuICAgIC8vIHN1cnJvdW5kcyB0aGUgZWZmZWN0IG9mIGVudGVyIG9yIGJhY2tzcGFjZSB3aXRoIGEgYnVuY2ggb2ZcbiAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgdGhhdCwgd2hlbiBpbnRlcnJ1cHRlZCwgY2F1c2UgdGV4dCBkdXBsaWNhdGlvblxuICAgIC8vIG9yIG90aGVyIGtpbmRzIG9mIGNvcnJ1cHRpb24uIFRoaXMgaGFjayBtYWtlcyB0aGUgZWRpdG9yIGJhY2sgb2ZmXG4gICAgLy8gZnJvbSBoYW5kbGluZyBET00gY2hhbmdlcyBmb3IgYSBtb21lbnQgd2hlbiBzdWNoIGEga2V5IGlzXG4gICAgLy8gZGV0ZWN0ZWQgKHZpYSBiZWZvcmVpbnB1dCBvciBrZXlkb3duKSwgYW5kIHRoZW4gdHJpZXMgdG8gZmx1c2hcbiAgICAvLyB0aGVtIG9yLCBpZiB0aGF0IGhhcyBubyBlZmZlY3QsIGRpc3BhdGNoZXMgdGhlIGdpdmVuIGtleS5cbiAgICBkZWxheUFuZHJvaWRLZXkoa2V5LCBrZXlDb2RlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KSB7XG4gICAgICAgICAgICBsZXQgZmx1c2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHRoaXMuZGVsYXllZEFuZHJvaWRLZXk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEtleUNvZGUgPSBrZXkua2V5Q29kZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEtleVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmx1c2hlZCA9IHRoaXMuZmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbHVzaGVkICYmIGtleS5mb3JjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHRoaXMuZG9tLCBrZXkua2V5LCBrZXkua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5ID0gdGhpcy52aWV3Lndpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmx1c2gpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIGJhY2tzcGFjZSBiZWZvcmVpbnB1dCBpcyBzb21ldGltZXMgc2lnbmFsbGVkIHNwdXJpb3VzbHksXG4gICAgICAgIC8vIEVudGVyIGFsd2F5cyB0YWtlcyBwcmVjZWRlbmNlLlxuICAgICAgICBpZiAoIXRoaXMuZGVsYXllZEFuZHJvaWRLZXkgfHwga2V5ID09IFwiRW50ZXJcIilcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEFuZHJvaWRLZXkgPSB7XG4gICAgICAgICAgICAgICAga2V5LCBrZXlDb2RlLFxuICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIHRoZSBrZXkgaGFuZGxlciB3aGVuIG5vIGNoYW5nZXMgYXJlIGRldGVjdGVkIGlmXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpc24ndCBjb21pbmcgcmlnaHQgYWZ0ZXIgYW5vdGhlciBjaGFuZ2UsIGluIHdoaWNoIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpdCBpcyBwcm9iYWJseSBwYXJ0IG9mIGEgd2VpcmQgY2hhaW4gb2YgdXBkYXRlcywgYW5kIHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIGJlIGlnbm9yZWQgaWYgaXQgcmV0dXJucyB0aGUgRE9NIHRvIGl0cyBwcmV2aW91cyBzdGF0ZS5cbiAgICAgICAgICAgICAgICBmb3JjZTogdGhpcy5sYXN0Q2hhbmdlIDwgRGF0ZS5ub3coKSAtIDUwIHx8ICEhKChfYSA9IHRoaXMuZGVsYXllZEFuZHJvaWRLZXkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZSlcbiAgICAgICAgICAgIH07XG4gICAgfVxuICAgIGNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKSB7XG4gICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5KTtcbiAgICAgICAgdGhpcy5kZWxheWVkQW5kcm9pZEtleSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5ID0gLTE7XG4gICAgfVxuICAgIGZsdXNoU29vbigpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZEZsdXNoIDwgMClcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEZsdXNoID0gdGhpcy52aWV3Lndpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4geyB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xOyB0aGlzLmZsdXNoKCk7IH0pO1xuICAgIH1cbiAgICBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy5kZWxheWVkRmx1c2ggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy52aWV3Lndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmRlbGF5ZWRGbHVzaCk7XG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9XG4gICAgcGVuZGluZ1JlY29yZHMoKSB7XG4gICAgICAgIGZvciAobGV0IG11dCBvZiB0aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCkpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2gobXV0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWU7XG4gICAgfVxuICAgIHByb2Nlc3NSZWNvcmRzKCkge1xuICAgICAgICBsZXQgcmVjb3JkcyA9IHRoaXMucGVuZGluZ1JlY29yZHMoKTtcbiAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICBsZXQgZnJvbSA9IC0xLCB0byA9IC0xLCB0eXBlT3ZlciA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCByZWNvcmQgb2YgcmVjb3Jkcykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yZWFkTXV0YXRpb24ocmVjb3JkKTtcbiAgICAgICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZU92ZXIpXG4gICAgICAgICAgICAgICAgdHlwZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGZyb20gPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAoeyBmcm9tLCB0byB9ID0gcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJvbSA9IE1hdGgubWluKHJhbmdlLmZyb20sIGZyb20pO1xuICAgICAgICAgICAgICAgIHRvID0gTWF0aC5tYXgocmFuZ2UudG8sIHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmcm9tLCB0bywgdHlwZU92ZXIgfTtcbiAgICB9XG4gICAgcmVhZENoYW5nZSgpIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8sIHR5cGVPdmVyIH0gPSB0aGlzLnByb2Nlc3NSZWNvcmRzKCk7XG4gICAgICAgIGxldCBuZXdTZWwgPSB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgJiYgaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCB0aGlzLnNlbGVjdGlvblJhbmdlKTtcbiAgICAgICAgaWYgKGZyb20gPCAwICYmICFuZXdTZWwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGZyb20gPiAtMSlcbiAgICAgICAgICAgIHRoaXMubGFzdENoYW5nZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGNoYW5nZSA9IG5ldyBET01DaGFuZ2UodGhpcy52aWV3LCBmcm9tLCB0bywgdHlwZU92ZXIpO1xuICAgICAgICB0aGlzLnZpZXcuZG9jVmlldy5kb21DaGFuZ2VkID0geyBuZXdTZWw6IGNoYW5nZS5uZXdTZWwgPyBjaGFuZ2UubmV3U2VsLm1haW4gOiBudWxsIH07XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIC8vIEFwcGx5IHBlbmRpbmcgY2hhbmdlcywgaWYgYW55XG4gICAgZmx1c2gocmVhZFNlbGVjdGlvbiA9IHRydWUpIHtcbiAgICAgICAgLy8gQ29tcGxldGVseSBob2xkIG9mZiBmbHVzaGluZyB3aGVuIHBlbmRpbmcga2V5cyBhcmUgc2V04oCUdGhlIGNvZGVcbiAgICAgICAgLy8gbWFuYWdpbmcgdGhvc2Ugd2lsbCBtYWtlIHN1cmUgcHJvY2Vzc1JlY29yZHMgaXMgY2FsbGVkIGFuZCB0aGVcbiAgICAgICAgLy8gdmlldyBpcyByZXN5bmNocm9uaXplZCBhZnRlclxuICAgICAgICBpZiAodGhpcy5kZWxheWVkRmx1c2ggPj0gMCB8fCB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAocmVhZFNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCBkb21DaGFuZ2UgPSB0aGlzLnJlYWRDaGFuZ2UoKTtcbiAgICAgICAgaWYgKCFkb21DaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydFN0YXRlID0gdGhpcy52aWV3LnN0YXRlO1xuICAgICAgICBsZXQgaGFuZGxlZCA9IGFwcGx5RE9NQ2hhbmdlKHRoaXMudmlldywgZG9tQ2hhbmdlKTtcbiAgICAgICAgLy8gVGhlIHZpZXcgd2Fzbid0IHVwZGF0ZWQgYnV0IERPTS9zZWxlY3Rpb24gY2hhbmdlcyB3ZXJlIHNlZW4uIFJlc2V0IHRoZSB2aWV3LlxuICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlID09IHN0YXJ0U3RhdGUgJiZcbiAgICAgICAgICAgIChkb21DaGFuZ2UuZG9tQ2hhbmdlZCB8fCBkb21DaGFuZ2UubmV3U2VsICYmICFkb21DaGFuZ2UubmV3U2VsLm1haW4uZXEodGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluKSkpXG4gICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlKFtdKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgfVxuICAgIHJlYWRNdXRhdGlvbihyZWMpIHtcbiAgICAgICAgbGV0IGNWaWV3ID0gdGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdChyZWMudGFyZ2V0KTtcbiAgICAgICAgaWYgKCFjVmlldyB8fCBjVmlldy5pZ25vcmVNdXRhdGlvbihyZWMpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNWaWV3Lm1hcmtEaXJ0eShyZWMudHlwZSA9PSBcImF0dHJpYnV0ZXNcIik7XG4gICAgICAgIGlmIChyZWMudHlwZSA9PSBcImF0dHJpYnV0ZXNcIilcbiAgICAgICAgICAgIGNWaWV3LmZsYWdzIHw9IDQgLyogVmlld0ZsYWcuQXR0cnNEaXJ0eSAqLztcbiAgICAgICAgaWYgKHJlYy50eXBlID09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZEJlZm9yZSA9IGZpbmRDaGlsZChjVmlldywgcmVjLnByZXZpb3VzU2libGluZyB8fCByZWMudGFyZ2V0LnByZXZpb3VzU2libGluZywgLTEpO1xuICAgICAgICAgICAgbGV0IGNoaWxkQWZ0ZXIgPSBmaW5kQ2hpbGQoY1ZpZXcsIHJlYy5uZXh0U2libGluZyB8fCByZWMudGFyZ2V0Lm5leHRTaWJsaW5nLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGNoaWxkQmVmb3JlID8gY1ZpZXcucG9zQWZ0ZXIoY2hpbGRCZWZvcmUpIDogY1ZpZXcucG9zQXRTdGFydCxcbiAgICAgICAgICAgICAgICB0bzogY2hpbGRBZnRlciA/IGNWaWV3LnBvc0JlZm9yZShjaGlsZEFmdGVyKSA6IGNWaWV3LnBvc0F0RW5kLCB0eXBlT3ZlcjogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWMudHlwZSA9PSBcImNoYXJhY3RlckRhdGFcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogY1ZpZXcucG9zQXRTdGFydCwgdG86IGNWaWV3LnBvc0F0RW5kLCB0eXBlT3ZlcjogcmVjLnRhcmdldC5ub2RlVmFsdWUgPT0gcmVjLm9sZFZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRXaW5kb3cod2luKSB7XG4gICAgICAgIGlmICh3aW4gIT0gdGhpcy53aW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXJzKHRoaXMud2luKTtcbiAgICAgICAgICAgIHRoaXMud2luID0gd2luO1xuICAgICAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFdpbmRvd0xpc3RlbmVycyh3aW4pIHtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5hZGRMaXN0ZW5lcih0aGlzLm9uUHJpbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHdpbi5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlcHJpbnRcIiwgdGhpcy5vblByaW50KTtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIHdpbi5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgIH1cbiAgICByZW1vdmVXaW5kb3dMaXN0ZW5lcnMod2luKSB7XG4gICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplKTtcbiAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMub25QcmludCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludFF1ZXJ5LnJlbW92ZUxpc3RlbmVyKHRoaXMub25QcmludCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmVwcmludFwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICB3aW4uZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChlZGl0YWJsZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSlcbiAgICAgICAgICAgICAgICB1cGRhdGUudmlldy5jb250ZW50RE9NLmVkaXRDb250ZXh0ID0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IHRoaXMuZWRpdENvbnRleHQuZWRpdENvbnRleHQgOiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgKF9hID0gdGhpcy5pbnRlcnNlY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCk7XG4gICAgICAgIChfYiA9IHRoaXMuZ2FwSW50ZXJzZWN0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAoX2MgPSB0aGlzLnJlc2l6ZVNjcm9sbCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgZm9yIChsZXQgZG9tIG9mIHRoaXMuc2Nyb2xsVGFyZ2V0cylcbiAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB0aGlzLnJlbW92ZVdpbmRvd0xpc3RlbmVycyh0aGlzLndpbik7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBhcmVudENoZWNrKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XG4gICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZGVsYXllZEZsdXNoKTtcbiAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkpO1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmNvbnRlbnRET00uZWRpdENvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kQ2hpbGQoY1ZpZXcsIGRvbSwgZGlyKSB7XG4gICAgd2hpbGUgKGRvbSkge1xuICAgICAgICBsZXQgY3VyVmlldyA9IENvbnRlbnRWaWV3LmdldChkb20pO1xuICAgICAgICBpZiAoY3VyVmlldyAmJiBjdXJWaWV3LnBhcmVudCA9PSBjVmlldylcbiAgICAgICAgICAgIHJldHVybiBjdXJWaWV3O1xuICAgICAgICBsZXQgcGFyZW50ID0gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgIGRvbSA9IHBhcmVudCAhPSBjVmlldy5kb20gPyBwYXJlbnQgOiBkaXIgPiAwID8gZG9tLm5leHRTaWJsaW5nIDogZG9tLnByZXZpb3VzU2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBidWlsZFNlbGVjdGlvblJhbmdlRnJvbVJhbmdlKHZpZXcsIHJhbmdlKSB7XG4gICAgbGV0IGFuY2hvck5vZGUgPSByYW5nZS5zdGFydENvbnRhaW5lciwgYW5jaG9yT2Zmc2V0ID0gcmFuZ2Uuc3RhcnRPZmZzZXQ7XG4gICAgbGV0IGZvY3VzTm9kZSA9IHJhbmdlLmVuZENvbnRhaW5lciwgZm9jdXNPZmZzZXQgPSByYW5nZS5lbmRPZmZzZXQ7XG4gICAgbGV0IGN1ckFuY2hvciA9IHZpZXcuZG9jVmlldy5kb21BdFBvcyh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvcik7XG4gICAgLy8gU2luY2Ugc3VjaCBhIHJhbmdlIGRvZXNuJ3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiBhbmNob3IgYW5kIGhlYWQsXG4gICAgLy8gdXNlIGEgaGV1cmlzdGljIHRoYXQgZmxpcHMgaXQgYXJvdW5kIGlmIGl0cyBlbmQgbWF0Y2hlcyB0aGVcbiAgICAvLyBjdXJyZW50IGFuY2hvci5cbiAgICBpZiAoaXNFcXVpdmFsZW50UG9zaXRpb24oY3VyQW5jaG9yLm5vZGUsIGN1ckFuY2hvci5vZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpKVxuICAgICAgICBbYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0XSA9IFtmb2N1c05vZGUsIGZvY3VzT2Zmc2V0LCBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXRdO1xuICAgIHJldHVybiB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCB9O1xufVxuLy8gVXNlZCB0byB3b3JrIGFyb3VuZCBhIFNhZmFyaSBTZWxlY3Rpb24vc2hhZG93IERPTSBidWcgKCM0MTQpXG5mdW5jdGlvbiBzYWZhcmlTZWxlY3Rpb25SYW5nZUhhY2sodmlldywgc2VsZWN0aW9uKSB7XG4gICAgaWYgKHNlbGVjdGlvbi5nZXRDb21wb3NlZFJhbmdlcykge1xuICAgICAgICBsZXQgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0Q29tcG9zZWRSYW5nZXModmlldy5yb290KVswXTtcbiAgICAgICAgaWYgKHJhbmdlKVxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU2VsZWN0aW9uUmFuZ2VGcm9tUmFuZ2UodmlldywgcmFuZ2UpO1xuICAgIH1cbiAgICBsZXQgZm91bmQgPSBudWxsO1xuICAgIC8vIEJlY2F1c2UgU2FmYXJpIChhdCBsZWFzdCBpbiAyMDE4LTIwMjEpIGRvZXNuJ3QgcHJvdmlkZSByZWd1bGFyXG4gICAgLy8gYWNjZXNzIHRvIHRoZSBzZWxlY3Rpb24gaW5zaWRlIGEgc2hhZG93cm9vdCwgd2UgaGF2ZSB0byBwZXJmb3JtIGFcbiAgICAvLyByaWRpY3Vsb3VzIGhhY2sgdG8gZ2V0IGF0IGl04oCUdXNpbmcgYGV4ZWNDb21tYW5kYCB0byB0cmlnZ2VyIGFcbiAgICAvLyBgYmVmb3JlSW5wdXRgIGV2ZW50IHNvIHRoYXQgd2UgY2FuIHJlYWQgdGhlIHRhcmdldCByYW5nZSBmcm9tIHRoZVxuICAgIC8vIGV2ZW50LlxuICAgIGZ1bmN0aW9uIHJlYWQoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGZvdW5kID0gZXZlbnQuZ2V0VGFyZ2V0UmFuZ2VzKClbMF07XG4gICAgfVxuICAgIHZpZXcuY29udGVudERPTS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgcmVhZCwgdHJ1ZSk7XG4gICAgdmlldy5kb20ub3duZXJEb2N1bWVudC5leGVjQ29tbWFuZChcImluZGVudFwiKTtcbiAgICB2aWV3LmNvbnRlbnRET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlZm9yZWlucHV0XCIsIHJlYWQsIHRydWUpO1xuICAgIHJldHVybiBmb3VuZCA/IGJ1aWxkU2VsZWN0aW9uUmFuZ2VGcm9tUmFuZ2UodmlldywgZm91bmQpIDogbnVsbDtcbn1cbmNsYXNzIEVkaXRDb250ZXh0TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAvLyBUaGUgZG9jdW1lbnQgd2luZG93IGZvciB3aGljaCB0aGUgdGV4dCBpbiB0aGUgY29udGV4dCBpc1xuICAgICAgICAvLyBtYWludGFpbmVkLiBGb3IgbGFyZ2UgZG9jdW1lbnRzLCB0aGlzIG1heSBiZSBzbWFsbGVyIHRoYW4gdGhlXG4gICAgICAgIC8vIGVkaXRvciBkb2N1bWVudC4gVGhpcyB3aW5kb3cgYWx3YXlzIGluY2x1ZGVzIHRoZSBzZWxlY3Rpb24gaGVhZC5cbiAgICAgICAgdGhpcy5mcm9tID0gMDtcbiAgICAgICAgdGhpcy50byA9IDA7XG4gICAgICAgIC8vIFdoZW4gYXBwbHlpbmcgYSB0cmFuc2FjdGlvbiwgdGhpcyBpcyB1c2VkIHRvIGNvbXBhcmUgdGhlIGNoYW5nZVxuICAgICAgICAvLyBtYWRlIHRvIHRoZSBjb250ZXh0IGNvbnRlbnQgdG8gdGhlIGNoYW5nZSBpbiB0aGUgdHJhbnNhY3Rpb24gaW5cbiAgICAgICAgLy8gb3JkZXIgdG8gbWFrZSB0aGUgbWluaW1hbCBjaGFuZ2VzIHRvIHRoZSBjb250ZXh0IChzaW5jZSB0b3VjaGluZ1xuICAgICAgICAvLyB0aGF0IHNvbWV0aW1lcyBicmVha3Mgc2VyaWVzIG9mIG11bHRpcGxlIGVkaXRzIG1hZGUgZm9yIGEgc2luZ2xlXG4gICAgICAgIC8vIHVzZXIgYWN0aW9uIG9uIHNvbWUgQW5kcm9pZCBrZXlib2FyZHMpXG4gICAgICAgIHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgLy8gS2x1ZGdlIHRvIHdvcmsgYXJvdW5kIHRoZSBmYWN0IHRoYXQgRWRpdENvbnRleHQgZG9lcyBub3QgcmVzcG9uZFxuICAgICAgICAvLyB3ZWxsIHRvIGhhdmluZyBpdHMgY29udGVudCB1cGRhdGVkIGR1cmluZyBhIGNvbXBvc2l0aW9uIChzZWUgIzE0NzIpXG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNldFJhbmdlKHZpZXcuc3RhdGUpO1xuICAgICAgICBsZXQgY29udGV4dCA9IHRoaXMuZWRpdENvbnRleHQgPSBuZXcgd2luZG93LkVkaXRDb250ZXh0KHtcbiAgICAgICAgICAgIHRleHQ6IHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKHRoaXMuZnJvbSwgdGhpcy50byksXG4gICAgICAgICAgICBzZWxlY3Rpb25TdGFydDogdGhpcy50b0NvbnRleHRQb3MoTWF0aC5tYXgodGhpcy5mcm9tLCBNYXRoLm1pbih0aGlzLnRvLCB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvcikpKSxcbiAgICAgICAgICAgIHNlbGVjdGlvbkVuZDogdGhpcy50b0NvbnRleHRQb3Modmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy50ZXh0dXBkYXRlID0gZSA9PiB7XG4gICAgICAgICAgICBsZXQgbWFpbiA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4sIHsgYW5jaG9yLCBoZWFkIH0gPSBtYWluO1xuICAgICAgICAgICAgbGV0IGZyb20gPSB0aGlzLnRvRWRpdG9yUG9zKGUudXBkYXRlUmFuZ2VTdGFydCksIHRvID0gdGhpcy50b0VkaXRvclBvcyhlLnVwZGF0ZVJhbmdlRW5kKTtcbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDAgJiYgIXRoaXMuY29tcG9zaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0geyBjb250ZXh0QmFzZTogZS51cGRhdGVSYW5nZVN0YXJ0LCBlZGl0b3JCYXNlOiBmcm9tLCBkcmlmdGVkOiBmYWxzZSB9O1xuICAgICAgICAgICAgbGV0IGNoYW5nZSA9IHsgZnJvbSwgdG8sIGluc2VydDogVGV4dC5vZihlLnRleHQuc3BsaXQoXCJcXG5cIikpIH07XG4gICAgICAgICAgICAvLyBJZiB0aGUgd2luZG93IGRvZXNuJ3QgaW5jbHVkZSB0aGUgYW5jaG9yLCBhc3N1bWUgY2hhbmdlc1xuICAgICAgICAgICAgLy8gYWRqYWNlbnQgdG8gYSBzaWRlIGdvIHVwIHRvIHRoZSBhbmNob3IuXG4gICAgICAgICAgICBpZiAoY2hhbmdlLmZyb20gPT0gdGhpcy5mcm9tICYmIGFuY2hvciA8IHRoaXMuZnJvbSlcbiAgICAgICAgICAgICAgICBjaGFuZ2UuZnJvbSA9IGFuY2hvcjtcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYW5nZS50byA9PSB0aGlzLnRvICYmIGFuY2hvciA+IHRoaXMudG8pXG4gICAgICAgICAgICAgICAgY2hhbmdlLnRvID0gYW5jaG9yO1xuICAgICAgICAgICAgLy8gRWRpdCBjb250ZXh0cyBzb21ldGltZXMgZmlyZSBlbXB0eSBjaGFuZ2VzXG4gICAgICAgICAgICBpZiAoY2hhbmdlLmZyb20gPT0gY2hhbmdlLnRvICYmICFjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdTZWwgPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKHRoaXMudG9FZGl0b3JQb3MoZS5zZWxlY3Rpb25TdGFydCksIHRoaXMudG9FZGl0b3JQb3MoZS5zZWxlY3Rpb25FbmQpKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld1NlbC5tYWluLmVxKG1haW4pKVxuICAgICAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgc2VsZWN0aW9uOiBuZXdTZWwsIHVzZXJFdmVudDogXCJzZWxlY3RcIiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGJyb3dzZXIubWFjIHx8IGJyb3dzZXIuYW5kcm9pZCkgJiYgY2hhbmdlLmZyb20gPT0gaGVhZCAtIDEgJiZcbiAgICAgICAgICAgICAgICAvXlxcLiA/JC8udGVzdChlLnRleHQpICYmIHZpZXcuY29udGVudERPTS5nZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiKSA9PSBcIm9mZlwiKVxuICAgICAgICAgICAgICAgIGNoYW5nZSA9IHsgZnJvbSwgdG8sIGluc2VydDogVGV4dC5vZihbZS50ZXh0LnJlcGxhY2UoXCIuXCIsIFwiIFwiKV0pIH07XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdDb250ZXh0Q2hhbmdlID0gY2hhbmdlO1xuICAgICAgICAgICAgaWYgKCF2aWV3LnN0YXRlLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0xlbiA9IHRoaXMudG8gLSB0aGlzLmZyb20gKyAoY2hhbmdlLnRvIC0gY2hhbmdlLmZyb20gKyBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYXBwbHlET01DaGFuZ2VJbm5lcih2aWV3LCBjaGFuZ2UsIEVkaXRvclNlbGVjdGlvbi5zaW5nbGUodGhpcy50b0VkaXRvclBvcyhlLnNlbGVjdGlvblN0YXJ0LCBuZXdMZW4pLCB0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uRW5kLCBuZXdMZW4pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgdHJhbnNhY3Rpb24gZGlkbid0IGZsdXNoIG91ciBjaGFuZ2UsIHJldmVydCBpdCBzb1xuICAgICAgICAgICAgLy8gdGhhdCB0aGUgY29udGV4dCBpcyBpbiBzeW5jIHdpdGggdGhlIGVkaXRvciBzdGF0ZSBhZ2Fpbi5cbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdDb250ZXh0Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXZlcnRQZW5kaW5nKHZpZXcuc3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHZpZXcuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLmNoYXJhY3RlcmJvdW5kc3VwZGF0ZSA9IGUgPT4ge1xuICAgICAgICAgICAgbGV0IHJlY3RzID0gW10sIHByZXYgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMudG9FZGl0b3JQb3MoZS5yYW5nZVN0YXJ0KSwgZW5kID0gdGhpcy50b0VkaXRvclBvcyhlLnJhbmdlRW5kKTsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSB2aWV3LmNvb3Jkc0ZvckNoYXIoaSk7XG4gICAgICAgICAgICAgICAgcHJldiA9IChyZWN0ICYmIG5ldyBET01SZWN0KHJlY3QubGVmdCwgcmVjdC50b3AsIHJlY3QucmlnaHQgLSByZWN0LmxlZnQsIHJlY3QuYm90dG9tIC0gcmVjdC50b3ApKVxuICAgICAgICAgICAgICAgICAgICB8fCBwcmV2IHx8IG5ldyBET01SZWN0O1xuICAgICAgICAgICAgICAgIHJlY3RzLnB1c2gocHJldik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LnVwZGF0ZUNoYXJhY3RlckJvdW5kcyhlLnJhbmdlU3RhcnQsIHJlY3RzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy50ZXh0Zm9ybWF0dXBkYXRlID0gZSA9PiB7XG4gICAgICAgICAgICBsZXQgZGVjbyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgZm9ybWF0IG9mIGUuZ2V0VGV4dEZvcm1hdHMoKSkge1xuICAgICAgICAgICAgICAgIGxldCBsaW5lU3R5bGUgPSBmb3JtYXQudW5kZXJsaW5lU3R5bGUsIHRoaWNrbmVzcyA9IGZvcm1hdC51bmRlcmxpbmVUaGlja25lc3M7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVTdHlsZSAhPSBcIk5vbmVcIiAmJiB0aGlja25lc3MgIT0gXCJOb25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSB0aGlzLnRvRWRpdG9yUG9zKGZvcm1hdC5yYW5nZVN0YXJ0KSwgdG8gPSB0aGlzLnRvRWRpdG9yUG9zKGZvcm1hdC5yYW5nZUVuZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tIDwgdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZSA9IGB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSAke2xpbmVTdHlsZSA9PSBcIkRhc2hlZFwiID8gXCJkYXNoZWQgXCIgOiBsaW5lU3R5bGUgPT0gXCJTcXVpZ2dsZVwiID8gXCJ3YXZ5IFwiIDogXCJcIn0ke3RoaWNrbmVzcyA9PSBcIlRoaW5cIiA/IDEgOiAyfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChEZWNvcmF0aW9uLm1hcmsoeyBhdHRyaWJ1dGVzOiB7IHN0eWxlIH0gfSkucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRFZGl0Q29udGV4dEZvcm1hdHRpbmcub2YoRGVjb3JhdGlvbi5zZXQoZGVjbykpIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLmNvbXBvc2l0aW9uc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gMDtcbiAgICAgICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcG9zaXRpb25lbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID0gLTE7XG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBkcmlmdGVkIH0gPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGRyaWZ0ZWQpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQodmlldy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGV2ZW50IGluIHRoaXMuaGFuZGxlcnMpXG4gICAgICAgICAgICBjb250ZXh0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuaGFuZGxlcnNbZXZlbnRdKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZUNvbnRyb2xCb3VuZHModmlldy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbCAmJiBzZWwucmFuZ2VDb3VudClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVTZWxlY3Rpb25Cb3VuZHMoc2VsLmdldFJhbmdlQXQoMCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICAgICAgfSB9O1xuICAgIH1cbiAgICBhcHBseUVkaXRzKHVwZGF0ZSkge1xuICAgICAgICBsZXQgb2ZmID0gMCwgYWJvcnQgPSBmYWxzZSwgcGVuZGluZyA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2U7XG4gICAgICAgIHVwZGF0ZS5jaGFuZ2VzLml0ZXJDaGFuZ2VzKChmcm9tQSwgdG9BLCBfZnJvbUIsIF90b0IsIGluc2VydCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFib3J0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBkTGVuID0gaW5zZXJ0Lmxlbmd0aCAtICh0b0EgLSBmcm9tQSk7XG4gICAgICAgICAgICBpZiAocGVuZGluZyAmJiB0b0EgPj0gcGVuZGluZy50bykge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nLmZyb20gPT0gZnJvbUEgJiYgcGVuZGluZy50byA9PSB0b0EgJiYgcGVuZGluZy5pbnNlcnQuZXEoaW5zZXJ0KSkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nID0gdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7IC8vIE1hdGNoXG4gICAgICAgICAgICAgICAgICAgIG9mZiArPSBkTGVuO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvICs9IGRMZW47XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIE1pc21hdGNoLCByZXZlcnRcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJ0UGVuZGluZyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21BICs9IG9mZjtcbiAgICAgICAgICAgIHRvQSArPSBvZmY7XG4gICAgICAgICAgICBpZiAodG9BIDw9IHRoaXMuZnJvbSkgeyAvLyBCZWZvcmUgdGhlIHdpbmRvd1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbSArPSBkTGVuO1xuICAgICAgICAgICAgICAgIHRoaXMudG8gKz0gZExlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZyb21BIDwgdGhpcy50bykgeyAvLyBPdmVybGFwcyB3aXRoIHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQSA8IHRoaXMuZnJvbSB8fCB0b0EgPiB0aGlzLnRvIHx8ICh0aGlzLnRvIC0gdGhpcy5mcm9tKSArIGluc2VydC5sZW5ndGggPiAzMDAwMCAvKiBDeFZwLk1heFNpemUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlVGV4dCh0aGlzLnRvQ29udGV4dFBvcyhmcm9tQSksIHRoaXMudG9Db250ZXh0UG9zKHRvQSksIGluc2VydC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvICs9IGRMZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmYgKz0gZExlbjtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChwZW5kaW5nICYmICFhYm9ydClcbiAgICAgICAgICAgIHRoaXMucmV2ZXJ0UGVuZGluZyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICByZXR1cm4gIWFib3J0O1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCByZXZlcnRlZCA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UsIHN0YXJ0U2VsID0gdXBkYXRlLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyAmJlxuICAgICAgICAgICAgKHRoaXMuY29tcG9zaW5nLmRyaWZ0ZWQgfHxcbiAgICAgICAgICAgICAgICAoIXVwZGF0ZS5jaGFuZ2VzLnRvdWNoZXNSYW5nZShzdGFydFNlbC5mcm9tLCBzdGFydFNlbC50bykgJiZcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+ICF0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikgJiYgdHIuY2hhbmdlcy50b3VjaGVzUmFuZ2UodGhpcy5mcm9tLCB0aGlzLnRvKSkpKSkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcuZHJpZnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZy5lZGl0b3JCYXNlID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMuY29tcG9zaW5nLmVkaXRvckJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmFwcGx5RWRpdHModXBkYXRlKSB8fCAhdGhpcy5yYW5nZUlzVmFsaWQodXBkYXRlLnN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCB8fCByZXZlcnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24odXBkYXRlLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlLmdlb21ldHJ5Q2hhbmdlZCB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0KVxuICAgICAgICAgICAgdXBkYXRlLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICB9XG4gICAgcmVzZXRSYW5nZShzdGF0ZSkge1xuICAgICAgICBsZXQgeyBoZWFkIH0gPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgdGhpcy5mcm9tID0gTWF0aC5tYXgoMCwgaGVhZCAtIDEwMDAwIC8qIEN4VnAuTWFyZ2luICovKTtcbiAgICAgICAgdGhpcy50byA9IE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIGhlYWQgKyAxMDAwMCAvKiBDeFZwLk1hcmdpbiAqLyk7XG4gICAgfVxuICAgIHJlc2V0KHN0YXRlKSB7XG4gICAgICAgIHRoaXMucmVzZXRSYW5nZShzdGF0ZSk7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlVGV4dCgwLCB0aGlzLmVkaXRDb250ZXh0LnRleHQubGVuZ3RoLCBzdGF0ZS5kb2Muc2xpY2VTdHJpbmcodGhpcy5mcm9tLCB0aGlzLnRvKSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHN0YXRlKTtcbiAgICB9XG4gICAgcmV2ZXJ0UGVuZGluZyhzdGF0ZSkge1xuICAgICAgICBsZXQgcGVuZGluZyA9IHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2U7XG4gICAgICAgIHRoaXMucGVuZGluZ0NvbnRleHRDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZVRleHQodGhpcy50b0NvbnRleHRQb3MocGVuZGluZy5mcm9tKSwgdGhpcy50b0NvbnRleHRQb3MocGVuZGluZy5mcm9tICsgcGVuZGluZy5pbnNlcnQubGVuZ3RoKSwgc3RhdGUuZG9jLnNsaWNlU3RyaW5nKHBlbmRpbmcuZnJvbSwgcGVuZGluZy50bykpO1xuICAgIH1cbiAgICBzZXRTZWxlY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgbGV0IHsgbWFpbiB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnRvQ29udGV4dFBvcyhNYXRoLm1heCh0aGlzLmZyb20sIE1hdGgubWluKHRoaXMudG8sIG1haW4uYW5jaG9yKSkpO1xuICAgICAgICBsZXQgZW5kID0gdGhpcy50b0NvbnRleHRQb3MobWFpbi5oZWFkKTtcbiAgICAgICAgaWYgKHRoaXMuZWRpdENvbnRleHQuc2VsZWN0aW9uU3RhcnQgIT0gc3RhcnQgfHwgdGhpcy5lZGl0Q29udGV4dC5zZWxlY3Rpb25FbmQgIT0gZW5kKVxuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVTZWxlY3Rpb24oc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIHJhbmdlSXNWYWxpZChzdGF0ZSkge1xuICAgICAgICBsZXQgeyBoZWFkIH0gPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgcmV0dXJuICEodGhpcy5mcm9tID4gMCAmJiBoZWFkIC0gdGhpcy5mcm9tIDwgNTAwIC8qIEN4VnAuTWluTWFyZ2luICovIHx8XG4gICAgICAgICAgICB0aGlzLnRvIDwgc3RhdGUuZG9jLmxlbmd0aCAmJiB0aGlzLnRvIC0gaGVhZCA8IDUwMCAvKiBDeFZwLk1pbk1hcmdpbiAqLyB8fFxuICAgICAgICAgICAgdGhpcy50byAtIHRoaXMuZnJvbSA+IDEwMDAwIC8qIEN4VnAuTWFyZ2luICovICogMyk7XG4gICAgfVxuICAgIHRvRWRpdG9yUG9zKGNvbnRleHRQb3MsIGNsaXBMZW4gPSB0aGlzLnRvIC0gdGhpcy5mcm9tKSB7XG4gICAgICAgIGNvbnRleHRQb3MgPSBNYXRoLm1pbihjb250ZXh0UG9zLCBjbGlwTGVuKTtcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgcmV0dXJuIGMgJiYgYy5kcmlmdGVkID8gYy5lZGl0b3JCYXNlICsgKGNvbnRleHRQb3MgLSBjLmNvbnRleHRCYXNlKSA6IGNvbnRleHRQb3MgKyB0aGlzLmZyb207XG4gICAgfVxuICAgIHRvQ29udGV4dFBvcyhlZGl0b3JQb3MpIHtcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNvbXBvc2luZztcbiAgICAgICAgcmV0dXJuIGMgJiYgYy5kcmlmdGVkID8gYy5jb250ZXh0QmFzZSArIChlZGl0b3JQb3MgLSBjLmVkaXRvckJhc2UpIDogZWRpdG9yUG9zIC0gdGhpcy5mcm9tO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGxldCBldmVudCBpbiB0aGlzLmhhbmRsZXJzKVxuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmhhbmRsZXJzW2V2ZW50XSk7XG4gICAgfVxufVxuXG4vLyBUaGUgZWRpdG9yJ3MgdXBkYXRlIHN0YXRlIG1hY2hpbmUgbG9va3Mgc29tZXRoaW5nIGxpa2UgdGhpczpcbi8vXG4vLyAgICAgSWRsZSDihpIgVXBkYXRpbmcg4oeGIElkbGUgKHVuY2hlY2tlZCkg4oaSIE1lYXN1cmluZyDihpIgSWRsZVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKGkSAgICAgIOKGk1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0aW5nIChtZWFzdXJlKVxuLy9cbi8vIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gJ0lkbGUnIGFuZCAnSWRsZSAodW5jaGVja2VkKScgbGllcyBpblxuLy8gd2hldGhlciBhIGxheW91dCBjaGVjayBoYXMgYmVlbiBzY2hlZHVsZWQuIEEgcmVndWxhciB1cGRhdGUgdGhyb3VnaFxuLy8gdGhlIGB1cGRhdGVgIG1ldGhvZCB1cGRhdGVzIHRoZSBET00gaW4gYSB3cml0ZS1vbmx5IGZhc2hpb24sIGFuZFxuLy8gcmVsaWVzIG9uIGEgY2hlY2sgKHNjaGVkdWxlZCB3aXRoIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgKSB0byBtYWtlXG4vLyBzdXJlIGV2ZXJ5dGhpbmcgaXMgd2hlcmUgaXQgc2hvdWxkIGJlIGFuZCB0aGUgdmlld3BvcnQgY292ZXJzIHRoZVxuLy8gdmlzaWJsZSBjb2RlLiBUaGF0IGNoZWNrIGNvbnRpbnVlcyB0byBtZWFzdXJlIGFuZCB0aGVuIG9wdGlvbmFsbHlcbi8vIHVwZGF0ZSB1bnRpbCBpdCByZWFjaGVzIGEgY29oZXJlbnQgc3RhdGUuXG4vKipcbkFuIGVkaXRvciB2aWV3IHJlcHJlc2VudHMgdGhlIGVkaXRvcidzIHVzZXIgaW50ZXJmYWNlLiBJdCBob2xkc1xudGhlIGVkaXRhYmxlIERPTSBzdXJmYWNlLCBhbmQgcG9zc2libHkgb3RoZXIgZWxlbWVudHMgc3VjaCBhcyB0aGVcbmxpbmUgbnVtYmVyIGd1dHRlci4gSXQgaGFuZGxlcyBldmVudHMgYW5kIGRpc3BhdGNoZXMgc3RhdGVcbnRyYW5zYWN0aW9ucyBmb3IgZWRpdGluZyBhY3Rpb25zLlxuKi9cbmNsYXNzIEVkaXRvclZpZXcge1xuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBzdGF0ZSgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnN0YXRlOyB9XG4gICAgLyoqXG4gICAgVG8gYmUgYWJsZSB0byBkaXNwbGF5IGxhcmdlIGRvY3VtZW50cyB3aXRob3V0IGNvbnN1bWluZyB0b28gbXVjaFxuICAgIG1lbW9yeSBvciBvdmVybG9hZGluZyB0aGUgYnJvd3NlciwgQ29kZU1pcnJvciBvbmx5IGRyYXdzIHRoZVxuICAgIGNvZGUgdGhhdCBpcyB2aXNpYmxlIChwbHVzIGEgbWFyZ2luIGFyb3VuZCBpdCkgdG8gdGhlIERPTS4gVGhpc1xuICAgIHByb3BlcnR5IHRlbGxzIHlvdSB0aGUgZXh0ZW50IG9mIHRoZSBjdXJyZW50IGRyYXduIHZpZXdwb3J0LCBpblxuICAgIGRvY3VtZW50IHBvc2l0aW9ucy5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnZpZXdwb3J0OyB9XG4gICAgLyoqXG4gICAgV2hlbiB0aGVyZSBhcmUsIGZvciBleGFtcGxlLCBsYXJnZSBjb2xsYXBzZWQgcmFuZ2VzIGluIHRoZVxuICAgIHZpZXdwb3J0LCBpdHMgc2l6ZSBjYW4gYmUgYSBsb3QgYmlnZ2VyIHRoYW4gdGhlIGFjdHVhbCB2aXNpYmxlXG4gICAgY29udGVudC4gVGh1cywgaWYgeW91IGFyZSBkb2luZyBzb21ldGhpbmcgbGlrZSBzdHlsaW5nIHRoZVxuICAgIGNvbnRlbnQgaW4gdGhlIHZpZXdwb3J0LCBpdCBpcyBwcmVmZXJhYmxlIHRvIG9ubHkgZG8gc28gZm9yXG4gICAgdGhlc2UgcmFuZ2VzLCB3aGljaCBhcmUgdGhlIHN1YnNldCBvZiB0aGUgdmlld3BvcnQgdGhhdCBpc1xuICAgIGFjdHVhbGx5IGRyYXduLlxuICAgICovXG4gICAgZ2V0IHZpc2libGVSYW5nZXMoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS52aXNpYmxlUmFuZ2VzOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBmYWxzZSB3aGVuIHRoZSBlZGl0b3IgaXMgZW50aXJlbHkgc2Nyb2xsZWQgb3V0IG9mIHZpZXdcbiAgICBvciBvdGhlcndpc2UgaGlkZGVuLlxuICAgICovXG4gICAgZ2V0IGluVmlldygpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmluVmlldzsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBjb21wb3NpbmcgdGV4dCB2aWFcbiAgICBbSU1FXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnB1dF9tZXRob2QpLCBhbmQgYXQgbGVhc3RcbiAgICBvbmUgY2hhbmdlIGhhcyBiZWVuIG1hZGUgaW4gdGhlIGN1cnJlbnQgY29tcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgY29tcG9zaW5nKCkgeyByZXR1cm4gISF0aGlzLmlucHV0U3RhdGUgJiYgdGhpcy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+IDA7IH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgdXNlciBpcyBjdXJyZW50bHkgaW4gY29tcG9zaW5nIHN0YXRlLiBOb3RlXG4gICAgdGhhdCBvbiBzb21lIHBsYXRmb3JtcywgbGlrZSBBbmRyb2lkLCB0aGlzIHdpbGwgYmUgdGhlIGNhc2UgYVxuICAgIGxvdCwgc2luY2UganVzdCBwdXR0aW5nIHRoZSBjdXJzb3Igb24gYSB3b3JkIHN0YXJ0cyBhXG4gICAgY29tcG9zaXRpb24gdGhlcmUuXG4gICAgKi9cbiAgICBnZXQgY29tcG9zaXRpb25TdGFydGVkKCkgeyByZXR1cm4gISF0aGlzLmlucHV0U3RhdGUgJiYgdGhpcy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwOyB9XG4gICAgLyoqXG4gICAgVGhlIGRvY3VtZW50IG9yIHNoYWRvdyByb290IHRoYXQgdGhlIHZpZXcgbGl2ZXMgaW4uXG4gICAgKi9cbiAgICBnZXQgcm9vdCgpIHsgcmV0dXJuIHRoaXMuX3Jvb3Q7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCB3aW4oKSB7IHJldHVybiB0aGlzLmRvbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdzsgfVxuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIG5ldyB2aWV3LiBZb3UnbGwgd2FudCB0byBlaXRoZXIgcHJvdmlkZSBhIGBwYXJlbnRgXG4gICAgb3B0aW9uLCBvciBwdXQgYHZpZXcuZG9tYCBpbnRvIHlvdXIgZG9jdW1lbnQgYWZ0ZXIgY3JlYXRpbmcgYVxuICAgIHZpZXcsIHNvIHRoYXQgdGhlIHVzZXIgY2FuIHNlZSB0aGUgZWRpdG9yLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcbiAgICAgICAgdGhpcy5wbHVnaW5NYXAgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmVkaXRvckF0dHJzID0ge307XG4gICAgICAgIHRoaXMuY29udGVudEF0dHJzID0ge307XG4gICAgICAgIHRoaXMuYmlkaUNhY2hlID0gW107XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxdWVzdHMgPSBbXTtcbiAgICAgICAgdGhpcy5jb250ZW50RE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNjcm9sbERPTS50YWJJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLnNjcm9sbERPTS5jbGFzc05hbWUgPSBcImNtLXNjcm9sbGVyXCI7XG4gICAgICAgIHRoaXMuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKHRoaXMuY29udGVudERPTSk7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmFubm91bmNlRE9NLmNsYXNzTmFtZSA9IFwiY20tYW5ub3VuY2VkXCI7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VET00uc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIpO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuYW5ub3VuY2VET00pO1xuICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnNjcm9sbERPTSk7XG4gICAgICAgIGlmIChjb25maWcucGFyZW50KVxuICAgICAgICAgICAgY29uZmlnLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk7XG4gICAgICAgIGxldCB7IGRpc3BhdGNoIH0gPSBjb25maWc7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmFuc2FjdGlvbnMgPSBjb25maWcuZGlzcGF0Y2hUcmFuc2FjdGlvbnMgfHxcbiAgICAgICAgICAgIChkaXNwYXRjaCAmJiAoKHRycykgPT4gdHJzLmZvckVhY2godHIgPT4gZGlzcGF0Y2godHIsIHRoaXMpKSkpIHx8XG4gICAgICAgICAgICAoKHRycykgPT4gdGhpcy51cGRhdGUodHJzKSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2ggPSB0aGlzLmRpc3BhdGNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSAoY29uZmlnLnJvb3QgfHwgZ2V0Um9vdChjb25maWcucGFyZW50KSB8fCBkb2N1bWVudCk7XG4gICAgICAgIHRoaXMudmlld1N0YXRlID0gbmV3IFZpZXdTdGF0ZShjb25maWcuc3RhdGUgfHwgRWRpdG9yU3RhdGUuY3JlYXRlKGNvbmZpZykpO1xuICAgICAgICBpZiAoY29uZmlnLnNjcm9sbFRvICYmIGNvbmZpZy5zY3JvbGxUby5pcyhzY3JvbGxJbnRvVmlldykpXG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQgPSBjb25maWcuc2Nyb2xsVG8udmFsdWUuY2xpcCh0aGlzLnZpZXdTdGF0ZS5zdGF0ZSk7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IHRoaXMuc3RhdGUuZmFjZXQodmlld1BsdWdpbikubWFwKHNwZWMgPT4gbmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgIHBsdWdpbi51cGRhdGUodGhpcyk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgRE9NT2JzZXJ2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMuaW5wdXRTdGF0ZSA9IG5ldyBJbnB1dFN0YXRlKHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0U3RhdGUuZW5zdXJlSGFuZGxlcnModGhpcy5wbHVnaW5zKTtcbiAgICAgICAgdGhpcy5kb2NWaWV3ID0gbmV3IERvY1ZpZXcodGhpcyk7XG4gICAgICAgIHRoaXMubW91bnRTdHlsZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIGlmICgoX2EgPSBkb2N1bWVudC5mb250cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlYWR5KVxuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMucmVhZHkudGhlbigoKSA9PiB0aGlzLnJlcXVlc3RNZWFzdXJlKCkpO1xuICAgIH1cbiAgICBkaXNwYXRjaCguLi5pbnB1dCkge1xuICAgICAgICBsZXQgdHJzID0gaW5wdXQubGVuZ3RoID09IDEgJiYgaW5wdXRbMF0gaW5zdGFuY2VvZiBUcmFuc2FjdGlvbiA/IGlucHV0XG4gICAgICAgICAgICA6IGlucHV0Lmxlbmd0aCA9PSAxICYmIEFycmF5LmlzQXJyYXkoaW5wdXRbMF0pID8gaW5wdXRbMF1cbiAgICAgICAgICAgICAgICA6IFt0aGlzLnN0YXRlLnVwZGF0ZSguLi5pbnB1dCldO1xuICAgICAgICB0aGlzLmRpc3BhdGNoVHJhbnNhY3Rpb25zKHRycywgdGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSB0aGUgdmlldyBmb3IgdGhlIGdpdmVuIGFycmF5IG9mIHRyYW5zYWN0aW9ucy4gVGhpcyB3aWxsXG4gICAgdXBkYXRlIHRoZSB2aXNpYmxlIGRvY3VtZW50IGFuZCBzZWxlY3Rpb24gdG8gbWF0Y2ggdGhlIHN0YXRlXG4gICAgcHJvZHVjZWQgYnkgdGhlIHRyYW5zYWN0aW9ucywgYW5kIG5vdGlmeSB2aWV3IHBsdWdpbnMgb2YgdGhlXG4gICAgY2hhbmdlLiBZb3Ugc2hvdWxkIHVzdWFsbHkgY2FsbFxuICAgIFtgZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkgaW5zdGVhZCwgd2hpY2ggdXNlcyB0aGlzXG4gICAgYXMgYSBwcmltaXRpdmUuXG4gICAgKi9cbiAgICB1cGRhdGUodHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlICE9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbGxzIHRvIEVkaXRvclZpZXcudXBkYXRlIGFyZSBub3QgYWxsb3dlZCB3aGlsZSBhbiB1cGRhdGUgaXMgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIGxldCByZWRyYXduID0gZmFsc2UsIGF0dHJzQ2hhbmdlZCA9IGZhbHNlLCB1cGRhdGU7XG4gICAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGZvciAobGV0IHRyIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHRyLnN0YXJ0U3RhdGUgIT0gc3RhdGUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gdXBkYXRlIHN0YXRlIHdpdGggYSB0cmFuc2FjdGlvbiB0aGF0IGRvZXNuJ3Qgc3RhcnQgZnJvbSB0aGUgcHJldmlvdXMgc3RhdGUuXCIpO1xuICAgICAgICAgICAgc3RhdGUgPSB0ci5zdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvY3VzID0gdGhpcy5oYXNGb2N1cywgZm9jdXNGbGFnID0gMCwgZGlzcGF0Y2hGb2N1cyA9IG51bGw7XG4gICAgICAgIGlmICh0cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5hbm5vdGF0aW9uKGlzRm9jdXNDaGFuZ2UpKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLm5vdGlmaWVkRm9jdXNlZCA9IGZvY3VzO1xuICAgICAgICAgICAgLy8gSWYgYSBmb2N1cy1jaGFuZ2UgdHJhbnNhY3Rpb24gaXMgYmVpbmcgZGlzcGF0Y2hlZCwgc2V0IHRoaXMgdXBkYXRlIGZsYWcuXG4gICAgICAgICAgICBmb2N1c0ZsYWcgPSAxIC8qIFVwZGF0ZUZsYWcuRm9jdXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZm9jdXMgIT0gdGhpcy5pbnB1dFN0YXRlLm5vdGlmaWVkRm9jdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLm5vdGlmaWVkRm9jdXNlZCA9IGZvY3VzO1xuICAgICAgICAgICAgLy8gU2NoZWR1bGUgYSBzZXBhcmF0ZSBmb2N1cyB0cmFuc2FjdGlvbiBpZiBuZWNlc3NhcnksIG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gYWRkIGEgZmxhZyB0byB0aGlzIHVwZGF0ZVxuICAgICAgICAgICAgZGlzcGF0Y2hGb2N1cyA9IGZvY3VzQ2hhbmdlVHJhbnNhY3Rpb24oc3RhdGUsIGZvY3VzKTtcbiAgICAgICAgICAgIGlmICghZGlzcGF0Y2hGb2N1cylcbiAgICAgICAgICAgICAgICBmb2N1c0ZsYWcgPSAxIC8qIFVwZGF0ZUZsYWcuRm9jdXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBET00gY2hhbmdlLCBlYWdlcmx5IHJlYWQgaXQgYW5kIHRyeSB0b1xuICAgICAgICAvLyBhcHBseSBpdCBhZnRlciB0aGUgZ2l2ZW4gdHJhbnNhY3Rpb25zLlxuICAgICAgICBsZXQgcGVuZGluZ0tleSA9IHRoaXMub2JzZXJ2ZXIuZGVsYXllZEFuZHJvaWRLZXksIGRvbUNoYW5nZSA9IG51bGw7XG4gICAgICAgIGlmIChwZW5kaW5nS2V5KSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLmNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKTtcbiAgICAgICAgICAgIGRvbUNoYW5nZSA9IHRoaXMub2JzZXJ2ZXIucmVhZENoYW5nZSgpO1xuICAgICAgICAgICAgLy8gT25seSB0cnkgdG8gYXBwbHkgRE9NIGNoYW5nZXMgaWYgdGhlIHRyYW5zYWN0aW9ucyBkaWRuJ3RcbiAgICAgICAgICAgIC8vIGNoYW5nZSB0aGUgZG9jIG9yIHNlbGVjdGlvbi5cbiAgICAgICAgICAgIGlmIChkb21DaGFuZ2UgJiYgIXRoaXMuc3RhdGUuZG9jLmVxKHN0YXRlLmRvYykgfHwgIXRoaXMuc3RhdGUuc2VsZWN0aW9uLmVxKHN0YXRlLnNlbGVjdGlvbikpXG4gICAgICAgICAgICAgICAgZG9tQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHRoZSBwaHJhc2VzIGNoYW5nZSwgcmVkcmF3IHRoZSBlZGl0b3JcbiAgICAgICAgaWYgKHN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLnBocmFzZXMpICE9IHRoaXMuc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUucGhyYXNlcykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIHVwZGF0ZSA9IFZpZXdVcGRhdGUuY3JlYXRlKHRoaXMsIHN0YXRlLCB0cmFuc2FjdGlvbnMpO1xuICAgICAgICB1cGRhdGUuZmxhZ3MgfD0gZm9jdXNGbGFnO1xuICAgICAgICBsZXQgc2Nyb2xsVGFyZ2V0ID0gdGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgICAgICBmb3IgKGxldCB0ciBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBzY3JvbGxUYXJnZXQubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0ci5zY3JvbGxJbnRvVmlldykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyBtYWluIH0gPSB0ci5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRhcmdldCA9IG5ldyBTY3JvbGxUYXJnZXQobWFpbi5lbXB0eSA/IG1haW4gOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG1haW4uaGVhZCwgbWFpbi5oZWFkID4gbWFpbi5hbmNob3IgPyAtMSA6IDEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5pcyhzY3JvbGxJbnRvVmlldykpXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBlLnZhbHVlLmNsaXAodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS51cGRhdGUodXBkYXRlLCBzY3JvbGxUYXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5iaWRpQ2FjaGUgPSBDYWNoZWRPcmRlci51cGRhdGUodGhpcy5iaWRpQ2FjaGUsIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIGlmICghdXBkYXRlLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQbHVnaW5zKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVkcmF3biA9IHRoaXMuZG9jVmlldy51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZhY2V0KHN0eWxlTW9kdWxlKSAhPSB0aGlzLnN0eWxlTW9kdWxlcylcbiAgICAgICAgICAgICAgICB0aGlzLm1vdW50U3R5bGVzKCk7XG4gICAgICAgICAgICBhdHRyc0NoYW5nZWQgPSB0aGlzLnVwZGF0ZUF0dHJzKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dBbm5vdW5jZW1lbnRzKHRyYW5zYWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKHJlZHJhd24sIHRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLmlzVXNlckV2ZW50KFwic2VsZWN0LnBvaW50ZXJcIikpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHRoZW1lKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQodGhlbWUpKVxuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUubXVzdE1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJlZHJhd24gfHwgYXR0cnNDaGFuZ2VkIHx8IHNjcm9sbFRhcmdldCB8fCB0aGlzLnZpZXdTdGF0ZS5tdXN0RW5mb3JjZUN1cnNvckFzc29jIHx8IHRoaXMudmlld1N0YXRlLm11c3RNZWFzdXJlQ29udGVudClcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgaWYgKHJlZHJhd24pXG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXdVcGRhdGUoKTtcbiAgICAgICAgaWYgKCF1cGRhdGUuZW1wdHkpXG4gICAgICAgICAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiB0aGlzLnN0YXRlLmZhY2V0KHVwZGF0ZUxpc3RlbmVyKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnN0YXRlLCBlLCBcInVwZGF0ZSBsaXN0ZW5lclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChkaXNwYXRjaEZvY3VzIHx8IGRvbUNoYW5nZSlcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkaXNwYXRjaEZvY3VzICYmIHRoaXMuc3RhdGUgPT0gZGlzcGF0Y2hGb2N1cy5zdGFydFN0YXRlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoKGRpc3BhdGNoRm9jdXMpO1xuICAgICAgICAgICAgICAgIGlmIChkb21DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcHBseURPTUNoYW5nZSh0aGlzLCBkb21DaGFuZ2UpICYmIHBlbmRpbmdLZXkuZm9yY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEtleSh0aGlzLmNvbnRlbnRET00sIHBlbmRpbmdLZXkua2V5LCBwZW5kaW5nS2V5LmtleUNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXNldCB0aGUgdmlldyB0byB0aGUgZ2l2ZW4gc3RhdGUuIChUaGlzIHdpbGwgY2F1c2UgdGhlIGVudGlyZVxuICAgIGRvY3VtZW50IHRvIGJlIHJlZHJhd24gYW5kIGFsbCB2aWV3IHBsdWdpbnMgdG8gYmUgcmVpbml0aWFsaXplZCxcbiAgICBzbyB5b3Ugc2hvdWxkIHByb2JhYmx5IG9ubHkgdXNlIGl0IHdoZW4gdGhlIG5ldyBzdGF0ZSBpc24ndFxuICAgIGRlcml2ZWQgZnJvbSB0aGUgb2xkIHN0YXRlLiBPdGhlcndpc2UsIHVzZVxuICAgIFtgZGlzcGF0Y2hgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kaXNwYXRjaCkgaW5zdGVhZC4pXG4gICAgKi9cbiAgICBzZXRTdGF0ZShuZXdTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSAhPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi8pXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxscyB0byBFZGl0b3JWaWV3LnNldFN0YXRlIGFyZSBub3QgYWxsb3dlZCB3aGlsZSBhbiB1cGRhdGUgaXMgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUuc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLztcbiAgICAgICAgbGV0IGhhZEZvY3VzID0gdGhpcy5oYXNGb2N1cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICAgICAgcGx1Z2luLmRlc3Ryb3kodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZSA9IG5ldyBWaWV3U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5zID0gbmV3U3RhdGUuZmFjZXQodmlld1BsdWdpbikubWFwKHNwZWMgPT4gbmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwLmNsZWFyKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgICAgIHBsdWdpbi51cGRhdGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3ID0gbmV3IERvY1ZpZXcodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUuZW5zdXJlSGFuZGxlcnModGhpcy5wbHVnaW5zKTtcbiAgICAgICAgICAgIHRoaXMubW91bnRTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXR0cnMoKTtcbiAgICAgICAgICAgIHRoaXMuYmlkaUNhY2hlID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYWRGb2N1cylcbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgIH1cbiAgICB1cGRhdGVQbHVnaW5zKHVwZGF0ZSkge1xuICAgICAgICBsZXQgcHJldlNwZWNzID0gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQodmlld1BsdWdpbiksIHNwZWNzID0gdXBkYXRlLnN0YXRlLmZhY2V0KHZpZXdQbHVnaW4pO1xuICAgICAgICBpZiAocHJldlNwZWNzICE9IHNwZWNzKSB7XG4gICAgICAgICAgICBsZXQgbmV3UGx1Z2lucyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgc3BlYyBvZiBzcGVjcykge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IHByZXZTcGVjcy5pbmRleE9mKHNwZWMpO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGx1Z2lucy5wdXNoKG5ldyBQbHVnaW5JbnN0YW5jZShzcGVjKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gdGhpcy5wbHVnaW5zW2ZvdW5kXTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLm11c3RVcGRhdGUgPSB1cGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5tdXN0VXBkYXRlICE9IHVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmRlc3Ryb3kodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSBuZXdQbHVnaW5zO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5NYXAuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHAgb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgICAgIHAubXVzdFVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGx1Z2lucy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHRoaXMucGx1Z2luc1tpXS51cGRhdGUodGhpcyk7XG4gICAgICAgIGlmIChwcmV2U3BlY3MgIT0gc3BlY3MpXG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUuZW5zdXJlSGFuZGxlcnModGhpcy5wbHVnaW5zKTtcbiAgICB9XG4gICAgZG9jVmlld1VwZGF0ZSgpIHtcbiAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucykge1xuICAgICAgICAgICAgbGV0IHZhbCA9IHBsdWdpbi52YWx1ZTtcbiAgICAgICAgICAgIGlmICh2YWwgJiYgdmFsLmRvY1ZpZXdVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YWwuZG9jVmlld1VwZGF0ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUsIFwiZG9jIHZpZXcgdXBkYXRlIGxpc3RlbmVyXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1lYXN1cmUoZmx1c2ggPSB0cnVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMubWVhc3VyZVNjaGVkdWxlZCA+IC0xKVxuICAgICAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5tZWFzdXJlU2NoZWR1bGVkKTtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIuZGVsYXllZEFuZHJvaWRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA9IDA7IC8vIFByZXZlbnQgcmVxdWVzdE1lYXN1cmUgY2FsbHMgZnJvbSBzY2hlZHVsaW5nIGFub3RoZXIgYW5pbWF0aW9uIGZyYW1lXG4gICAgICAgIGlmIChmbHVzaClcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuZm9yY2VGbHVzaCgpO1xuICAgICAgICBsZXQgdXBkYXRlZCA9IG51bGw7XG4gICAgICAgIGxldCBzRE9NID0gdGhpcy5zY3JvbGxET00sIHNjcm9sbFRvcCA9IHNET00uc2Nyb2xsVG9wICogdGhpcy5zY2FsZVk7XG4gICAgICAgIGxldCB7IHNjcm9sbEFuY2hvclBvcywgc2Nyb2xsQW5jaG9ySGVpZ2h0IH0gPSB0aGlzLnZpZXdTdGF0ZTtcbiAgICAgICAgaWYgKE1hdGguYWJzKHNjcm9sbFRvcCAtIHRoaXMudmlld1N0YXRlLnNjcm9sbFRvcCkgPiAxKVxuICAgICAgICAgICAgc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgIHRoaXMudmlld1N0YXRlLnNjcm9sbEFuY2hvckhlaWdodCA9IC0xO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsQW5jaG9ySGVpZ2h0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxlZFRvQm90dG9tKHNET00pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JQb3MgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvckhlaWdodCA9IHRoaXMudmlld1N0YXRlLmhlaWdodE1hcC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2sgPSB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxBbmNob3JBdChzY3JvbGxUb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9yUG9zID0gYmxvY2suZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvckhlaWdodCA9IGJsb2NrLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMSAvKiBVcGRhdGVTdGF0ZS5NZWFzdXJpbmcgKi87XG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZWQgPSB0aGlzLnZpZXdTdGF0ZS5tZWFzdXJlKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlZCAmJiAhdGhpcy5tZWFzdXJlUmVxdWVzdHMubGVuZ3RoICYmIHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoaSA+IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKHRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIk1lYXN1cmUgbG9vcCByZXN0YXJ0ZWQgbW9yZSB0aGFuIDUgdGltZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlZpZXdwb3J0IGZhaWxlZCB0byBzdGFiaWxpemVcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbWVhc3VyaW5nID0gW107XG4gICAgICAgICAgICAgICAgLy8gT25seSBydW4gbWVhc3VyZSByZXF1ZXN0cyBpbiB0aGlzIGN5Y2xlIHdoZW4gdGhlIHZpZXdwb3J0IGRpZG4ndCBjaGFuZ2VcbiAgICAgICAgICAgICAgICBpZiAoIShjaGFuZ2VkICYgNCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0ICovKSlcbiAgICAgICAgICAgICAgICAgICAgW3RoaXMubWVhc3VyZVJlcXVlc3RzLCBtZWFzdXJpbmddID0gW21lYXN1cmluZywgdGhpcy5tZWFzdXJlUmVxdWVzdHNdO1xuICAgICAgICAgICAgICAgIGxldCBtZWFzdXJlZCA9IG1lYXN1cmluZy5tYXAobSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5yZWFkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy5zdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQmFkTWVhc3VyZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCB1cGRhdGUgPSBWaWV3VXBkYXRlLmNyZWF0ZSh0aGlzLCB0aGlzLnN0YXRlLCBbXSksIHJlZHJhd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB1cGRhdGUuZmxhZ3MgfD0gY2hhbmdlZDtcbiAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZWQpXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSB1cGRhdGU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLmZsYWdzIHw9IGNoYW5nZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi87XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGUuZW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQbHVnaW5zKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICAgICAgICAgICAgICByZWRyYXduID0gdGhpcy5kb2NWaWV3LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVkcmF3bilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jVmlld1VwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lYXN1cmluZy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lYXN1cmVkW2ldICE9IEJhZE1lYXN1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSBtZWFzdXJpbmdbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0ud3JpdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ud3JpdGUobWVhc3VyZWRbaV0sIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy5zdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVkcmF3bilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZS52aWV3cG9ydENoYW5nZWQgJiYgdGhpcy5tZWFzdXJlUmVxdWVzdHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlLmVkaXRvckhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jVmlldy5zY3JvbGxJbnRvVmlldyh0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3QW5jaG9ySGVpZ2h0ID0gc2Nyb2xsQW5jaG9yUG9zIDwgMCA/IHRoaXMudmlld1N0YXRlLmhlaWdodE1hcC5oZWlnaHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdChzY3JvbGxBbmNob3JQb3MpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlmZiA9IG5ld0FuY2hvckhlaWdodCAtIHNjcm9sbEFuY2hvckhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZiA+IDEgfHwgZGlmZiA8IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IHNjcm9sbFRvcCArIGRpZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNET00uc2Nyb2xsVG9wID0gc2Nyb2xsVG9wIC8gdGhpcy5zY2FsZVk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvckhlaWdodCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLztcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGVkICYmICF1cGRhdGVkLmVtcHR5KVxuICAgICAgICAgICAgZm9yIChsZXQgbGlzdGVuZXIgb2YgdGhpcy5zdGF0ZS5mYWNldCh1cGRhdGVMaXN0ZW5lcikpXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIodXBkYXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgQ1NTIGNsYXNzZXMgZm9yIHRoZSBjdXJyZW50bHkgYWN0aXZlIGVkaXRvciB0aGVtZXMuXG4gICAgKi9cbiAgICBnZXQgdGhlbWVDbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gYmFzZVRoZW1lSUQgKyBcIiBcIiArXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5mYWNldChkYXJrVGhlbWUpID8gYmFzZURhcmtJRCA6IGJhc2VMaWdodElEKSArIFwiIFwiICtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmFjZXQodGhlbWUpO1xuICAgIH1cbiAgICB1cGRhdGVBdHRycygpIHtcbiAgICAgICAgbGV0IGVkaXRvckF0dHJzID0gYXR0cnNGcm9tRmFjZXQodGhpcywgZWRpdG9yQXR0cmlidXRlcywge1xuICAgICAgICAgICAgY2xhc3M6IFwiY20tZWRpdG9yXCIgKyAodGhpcy5oYXNGb2N1cyA/IFwiIGNtLWZvY3VzZWQgXCIgOiBcIiBcIikgKyB0aGlzLnRoZW1lQ2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGNvbnRlbnRBdHRycyA9IHtcbiAgICAgICAgICAgIHNwZWxsY2hlY2s6IFwiZmFsc2VcIixcbiAgICAgICAgICAgIGF1dG9jb3JyZWN0OiBcIm9mZlwiLFxuICAgICAgICAgICAgYXV0b2NhcGl0YWxpemU6IFwib2ZmXCIsXG4gICAgICAgICAgICB3cml0aW5nc3VnZ2VzdGlvbnM6IFwiZmFsc2VcIixcbiAgICAgICAgICAgIHRyYW5zbGF0ZTogXCJub1wiLFxuICAgICAgICAgICAgY29udGVudGVkaXRhYmxlOiAhdGhpcy5zdGF0ZS5mYWNldChlZGl0YWJsZSkgPyBcImZhbHNlXCIgOiBcInRydWVcIixcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLWNvbnRlbnRcIixcbiAgICAgICAgICAgIHN0eWxlOiBgJHticm93c2VyLnRhYlNpemV9OiAke3RoaXMuc3RhdGUudGFiU2l6ZX1gLFxuICAgICAgICAgICAgcm9sZTogXCJ0ZXh0Ym94XCIsXG4gICAgICAgICAgICBcImFyaWEtbXVsdGlsaW5lXCI6IFwidHJ1ZVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICAgICAgY29udGVudEF0dHJzW1wiYXJpYS1yZWFkb25seVwiXSA9IFwidHJ1ZVwiO1xuICAgICAgICBhdHRyc0Zyb21GYWNldCh0aGlzLCBjb250ZW50QXR0cmlidXRlcywgY29udGVudEF0dHJzKTtcbiAgICAgICAgbGV0IGNoYW5nZWQgPSB0aGlzLm9ic2VydmVyLmlnbm9yZSgoKSA9PiB7XG4gICAgICAgICAgICBsZXQgY2hhbmdlZENvbnRlbnQgPSB1cGRhdGVBdHRycyh0aGlzLmNvbnRlbnRET00sIHRoaXMuY29udGVudEF0dHJzLCBjb250ZW50QXR0cnMpO1xuICAgICAgICAgICAgbGV0IGNoYW5nZWRFZGl0b3IgPSB1cGRhdGVBdHRycyh0aGlzLmRvbSwgdGhpcy5lZGl0b3JBdHRycywgZWRpdG9yQXR0cnMpO1xuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWRDb250ZW50IHx8IGNoYW5nZWRFZGl0b3I7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVkaXRvckF0dHJzID0gZWRpdG9yQXR0cnM7XG4gICAgICAgIHRoaXMuY29udGVudEF0dHJzID0gY29udGVudEF0dHJzO1xuICAgICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gICAgc2hvd0Fubm91bmNlbWVudHModHJzKSB7XG4gICAgICAgIGxldCBmaXJzdCA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IHRyIG9mIHRycylcbiAgICAgICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoRWRpdG9yVmlldy5hbm5vdW5jZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbm5vdW5jZURPTS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXYgPSB0aGlzLmFubm91bmNlRE9NLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgICAgICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgIH1cbiAgICBtb3VudFN0eWxlcygpIHtcbiAgICAgICAgdGhpcy5zdHlsZU1vZHVsZXMgPSB0aGlzLnN0YXRlLmZhY2V0KHN0eWxlTW9kdWxlKTtcbiAgICAgICAgbGV0IG5vbmNlID0gdGhpcy5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LmNzcE5vbmNlKTtcbiAgICAgICAgU3R5bGVNb2R1bGUubW91bnQodGhpcy5yb290LCB0aGlzLnN0eWxlTW9kdWxlcy5jb25jYXQoYmFzZVRoZW1lJDEpLnJldmVyc2UoKSwgbm9uY2UgPyB7IG5vbmNlIH0gOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZWFkTWVhc3VyZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlID09IDIgLyogVXBkYXRlU3RhdGUuVXBkYXRpbmcgKi8pXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWFkaW5nIHRoZSBlZGl0b3IgbGF5b3V0IGlzbid0IGFsbG93ZWQgZHVyaW5nIGFuIHVwZGF0ZVwiKTtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlU3RhdGUgPT0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovICYmIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA+IC0xKVxuICAgICAgICAgICAgdGhpcy5tZWFzdXJlKGZhbHNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2NoZWR1bGUgYSBsYXlvdXQgbWVhc3VyZW1lbnQsIG9wdGlvbmFsbHkgcHJvdmlkaW5nIGNhbGxiYWNrcyB0b1xuICAgIGRvIGN1c3RvbSBET00gbWVhc3VyaW5nIGZvbGxvd2VkIGJ5IGEgRE9NIHdyaXRlIHBoYXNlLiBVc2luZ1xuICAgIHRoaXMgaXMgcHJlZmVyYWJsZSByZWFkaW5nIERPTSBsYXlvdXQgZGlyZWN0bHkgZnJvbSwgZm9yXG4gICAgZXhhbXBsZSwgYW4gZXZlbnQgaGFuZGxlciwgYmVjYXVzZSBpdCdsbCBtYWtlIHN1cmUgbWVhc3VyaW5nIGFuZFxuICAgIGRyYXdpbmcgZG9uZSBieSBvdGhlciBjb21wb25lbnRzIGlzIHN5bmNocm9uaXplZCwgYXZvaWRpbmdcbiAgICB1bm5lY2Vzc2FyeSBET00gbGF5b3V0IGNvbXB1dGF0aW9ucy5cbiAgICAqL1xuICAgIHJlcXVlc3RNZWFzdXJlKHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKHRoaXMubWVhc3VyZVNjaGVkdWxlZCA8IDApXG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSB0aGlzLndpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5tZWFzdXJlKCkpO1xuICAgICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVhc3VyZVJlcXVlc3RzLmluZGV4T2YocmVxdWVzdCkgPiAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5rZXkgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVhc3VyZVJlcXVlc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lYXN1cmVSZXF1ZXN0c1tpXS5rZXkgPT09IHJlcXVlc3Qua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVSZXF1ZXN0c1tpXSA9IHJlcXVlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVSZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpYyBwbHVnaW4sIGlmIHByZXNlbnQuIE5vdGUgdGhhdFxuICAgIHBsdWdpbnMgdGhhdCBjcmFzaCBjYW4gYmUgZHJvcHBlZCBmcm9tIGEgdmlldywgc28gZXZlbiB3aGVuIHlvdVxuICAgIGtub3cgeW91IHJlZ2lzdGVyZWQgYSBnaXZlbiBwbHVnaW4sIGl0IGlzIHJlY29tbWVuZGVkIHRvIGNoZWNrXG4gICAgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGlzIG1ldGhvZC5cbiAgICAqL1xuICAgIHBsdWdpbihwbHVnaW4pIHtcbiAgICAgICAgbGV0IGtub3duID0gdGhpcy5wbHVnaW5NYXAuZ2V0KHBsdWdpbik7XG4gICAgICAgIGlmIChrbm93biA9PT0gdW5kZWZpbmVkIHx8IGtub3duICYmIGtub3duLnBsdWdpbiAhPSBwbHVnaW4pXG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcC5zZXQocGx1Z2luLCBrbm93biA9IHRoaXMucGx1Z2lucy5maW5kKHAgPT4gcC5wbHVnaW4gPT0gcGx1Z2luKSB8fCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGtub3duICYmIGtub3duLnVwZGF0ZSh0aGlzKS52YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgZG9jdW1lbnQsIGluIHNjcmVlbiBjb29yZGluYXRlcy4gVGhpc1xuICAgIG1heSBiZSBuZWdhdGl2ZSB3aGVuIHRoZSBlZGl0b3IgaXMgc2Nyb2xsZWQgZG93bi4gUG9pbnRzXG4gICAgZGlyZWN0bHkgdG8gdGhlIHRvcCBvZiB0aGUgZmlyc3QgbGluZSwgbm90IGFib3ZlIHRoZSBwYWRkaW5nLlxuICAgICovXG4gICAgZ2V0IGRvY3VtZW50VG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRoaXMudmlld1N0YXRlLnBhZGRpbmdUb3A7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcG9ydHMgdGhlIHBhZGRpbmcgYWJvdmUgYW5kIGJlbG93IHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBkb2N1bWVudFBhZGRpbmcoKSB7XG4gICAgICAgIHJldHVybiB7IHRvcDogdGhpcy52aWV3U3RhdGUucGFkZGluZ1RvcCwgYm90dG9tOiB0aGlzLnZpZXdTdGF0ZS5wYWRkaW5nQm90dG9tIH07XG4gICAgfVxuICAgIC8qKlxuICAgIElmIHRoZSBlZGl0b3IgaXMgdHJhbnNmb3JtZWQgd2l0aCBDU1MsIHRoaXMgcHJvdmlkZXMgdGhlIHNjYWxlXG4gICAgYWxvbmcgdGhlIFggYXhpcy4gT3RoZXJ3aXNlLCBpdCB3aWxsIGp1c3QgYmUgMS4gTm90ZSB0aGF0XG4gICAgdHJhbnNmb3JtcyBvdGhlciB0aGFuIHRyYW5zbGF0aW9uIGFuZCBzY2FsaW5nIGFyZSBub3Qgc3VwcG9ydGVkLlxuICAgICovXG4gICAgZ2V0IHNjYWxlWCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnNjYWxlWDsgfVxuICAgIC8qKlxuICAgIFByb3ZpZGUgdGhlIENTUyB0cmFuc2Zvcm1lZCBzY2FsZSBhbG9uZyB0aGUgWSBheGlzLlxuICAgICovXG4gICAgZ2V0IHNjYWxlWSgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnNjYWxlWTsgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIHRleHQgbGluZSBvciBibG9jayB3aWRnZXQgYXQgdGhlIGdpdmVuIHZlcnRpY2FsXG4gICAgcG9zaXRpb24gKHdoaWNoIGlzIGludGVycHJldGVkIGFzIHJlbGF0aXZlIHRvIHRoZSBbdG9wIG9mIHRoZVxuICAgIGRvY3VtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5kb2N1bWVudFRvcCkpLlxuICAgICovXG4gICAgZWxlbWVudEF0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLnJlYWRNZWFzdXJlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3U3RhdGUuZWxlbWVudEF0SGVpZ2h0KGhlaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGxpbmUgYmxvY2sgKHNlZVxuICAgIFtgbGluZUJsb2NrQXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5saW5lQmxvY2tBdCkgYXQgdGhlIGdpdmVuXG4gICAgaGVpZ2h0LCBhZ2FpbiBpbnRlcnByZXRlZCByZWxhdGl2ZSB0byB0aGUgW3RvcCBvZiB0aGVcbiAgICBkb2N1bWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9jdW1lbnRUb3ApLlxuICAgICovXG4gICAgbGluZUJsb2NrQXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdEhlaWdodChoZWlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGV4dGVudCBhbmQgdmVydGljYWwgcG9zaXRpb24gb2YgYWxsIFtsaW5lXG4gICAgYmxvY2tzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5saW5lQmxvY2tBdCkgaW4gdGhlIHZpZXdwb3J0LiBQb3NpdGlvbnNcbiAgICBhcmUgcmVsYXRpdmUgdG8gdGhlIFt0b3Agb2YgdGhlXG4gICAgZG9jdW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRvY3VtZW50VG9wKTtcbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydExpbmVCbG9ja3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS52aWV3cG9ydExpbmVzO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBsaW5lIGJsb2NrIGFyb3VuZCB0aGUgZ2l2ZW4gZG9jdW1lbnQgcG9zaXRpb24uIEEgbGluZVxuICAgIGJsb2NrIGlzIGEgcmFuZ2UgZGVsaW1pdGVkIG9uIGJvdGggc2lkZXMgYnkgZWl0aGVyIGFcbiAgICBub24tW2hpZGRlbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25ecmVwbGFjZSkgbGluZSBicmVhaywgb3IgdGhlXG4gICAgc3RhcnQvZW5kIG9mIHRoZSBkb2N1bWVudC4gSXQgd2lsbCB1c3VhbGx5IGp1c3QgaG9sZCBhIGxpbmUgb2ZcbiAgICB0ZXh0LCBidXQgbWF5IGJlIGJyb2tlbiBpbnRvIG11bHRpcGxlIHRleHRibG9ja3MgYnkgYmxvY2tcbiAgICB3aWRnZXRzLlxuICAgICovXG4gICAgbGluZUJsb2NrQXQocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdChwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZWRpdG9yJ3MgdG90YWwgY29udGVudCBoZWlnaHQuXG4gICAgKi9cbiAgICBnZXQgY29udGVudEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmNvbnRlbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgYSBjdXJzb3IgcG9zaXRpb24gYnkgW2dyYXBoZW1lXG4gICAgY2x1c3Rlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5maW5kQ2x1c3RlckJyZWFrKS4gYGZvcndhcmRgIGRldGVybWluZXMgd2hldGhlclxuICAgIHRoZSBtb3Rpb24gaXMgYXdheSBmcm9tIHRoZSBsaW5lIHN0YXJ0LCBvciB0b3dhcmRzIGl0LiBJblxuICAgIGJpZGlyZWN0aW9uYWwgdGV4dCwgdGhlIGxpbmUgaXMgdHJhdmVyc2VkIGluIHZpc3VhbCBvcmRlciwgdXNpbmdcbiAgICB0aGUgZWRpdG9yJ3MgW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKS5cbiAgICBXaGVuIHRoZSBzdGFydCBwb3NpdGlvbiB3YXMgdGhlIGxhc3Qgb25lIG9uIHRoZSBsaW5lLCB0aGVcbiAgICByZXR1cm5lZCBwb3NpdGlvbiB3aWxsIGJlIGFjcm9zcyB0aGUgbGluZSBicmVhay4gSWYgdGhlcmUgaXMgbm9cbiAgICBmdXJ0aGVyIGxpbmUsIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBpcyByZXR1cm5lZC5cbiAgICBcbiAgICBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBtb3ZlcyBvdmVyIGEgc2luZ2xlIGNsdXN0ZXIuIFRoZVxuICAgIG9wdGlvbmFsIGBieWAgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG8gbW92ZSBhY3Jvc3MgbW9yZS4gSXQgd2lsbFxuICAgIGJlIGNhbGxlZCB3aXRoIHRoZSBmaXJzdCBjbHVzdGVyIGFzIGFyZ3VtZW50LCBhbmQgc2hvdWxkIHJldHVyblxuICAgIGEgcHJlZGljYXRlIHRoYXQgZGV0ZXJtaW5lcywgZm9yIGVhY2ggc3Vic2VxdWVudCBjbHVzdGVyLFxuICAgIHdoZXRoZXIgaXQgc2hvdWxkIGFsc28gYmUgbW92ZWQgb3Zlci5cbiAgICAqL1xuICAgIG1vdmVCeUNoYXIoc3RhcnQsIGZvcndhcmQsIGJ5KSB7XG4gICAgICAgIHJldHVybiBza2lwQXRvbXModGhpcywgc3RhcnQsIG1vdmVCeUNoYXIodGhpcywgc3RhcnQsIGZvcndhcmQsIGJ5KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgYSBjdXJzb3IgcG9zaXRpb24gYWNyb3NzIHRoZSBuZXh0IGdyb3VwIG9mIGVpdGhlclxuICAgIFtsZXR0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYXJDYXRlZ29yaXplcikgb3Igbm9uLWxldHRlclxuICAgIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBtb3ZlQnlHcm91cChzdGFydCwgZm9yd2FyZCkge1xuICAgICAgICByZXR1cm4gc2tpcEF0b21zKHRoaXMsIHN0YXJ0LCBtb3ZlQnlDaGFyKHRoaXMsIHN0YXJ0LCBmb3J3YXJkLCBpbml0aWFsID0+IGJ5R3JvdXAodGhpcywgc3RhcnQuaGVhZCwgaW5pdGlhbCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjdXJzb3IgcG9zaXRpb24gdmlzdWFsbHkgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhIGxpbmUuXG4gICAgTm90ZSB0aGF0IHRoaXMgbWF5IGRpZmZlciBmcm9tIHRoZSBfbG9naWNhbF8gcG9zaXRpb24gYXQgaXRzXG4gICAgc3RhcnQgb3IgZW5kICh3aGljaCBpcyBzaW1wbHkgYXQgYGxpbmUuZnJvbWAvYGxpbmUudG9gKSBpZiB0ZXh0XG4gICAgYXQgdGhlIHN0YXJ0IG9yIGVuZCBnb2VzIGFnYWluc3QgdGhlIGxpbmUncyBiYXNlIHRleHQgZGlyZWN0aW9uLlxuICAgICovXG4gICAgdmlzdWFsTGluZVNpZGUobGluZSwgZW5kKSB7XG4gICAgICAgIGxldCBvcmRlciA9IHRoaXMuYmlkaVNwYW5zKGxpbmUpLCBkaXIgPSB0aGlzLnRleHREaXJlY3Rpb25BdChsaW5lLmZyb20pO1xuICAgICAgICBsZXQgc3BhbiA9IG9yZGVyW2VuZCA/IG9yZGVyLmxlbmd0aCAtIDEgOiAwXTtcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3Ioc3Bhbi5zaWRlKGVuZCwgZGlyKSArIGxpbmUuZnJvbSwgc3Bhbi5mb3J3YXJkKCFlbmQsIGRpcikgPyAxIDogLTEpO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBuZXh0IGxpbmUgYm91bmRhcnkgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbi4gSWZcbiAgICBgaW5jbHVkZVdyYXBgIGlzIHRydWUsIGxpbmUgd3JhcHBpbmcgaXMgb24sIGFuZCB0aGVyZSBpcyBhXG4gICAgZnVydGhlciB3cmFwIHBvaW50IG9uIHRoZSBjdXJyZW50IGxpbmUsIHRoZSB3cmFwIHBvaW50IHdpbGwgYmVcbiAgICByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHN0YXJ0IG9yIGVuZFxuICAgIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgbW92ZVRvTGluZUJvdW5kYXJ5KHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIG1vdmVUb0xpbmVCb3VuZGFyeSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgaW5jbHVkZVdyYXApO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIGEgY3Vyc29yIHBvc2l0aW9uIHZlcnRpY2FsbHkuIFdoZW4gYGRpc3RhbmNlYCBpc24ndCBnaXZlbixcbiAgICBpdCBkZWZhdWx0cyB0byBtb3ZpbmcgdG8gdGhlIG5leHQgbGluZSAoaW5jbHVkaW5nIHdyYXBwZWRcbiAgICBsaW5lcykuIE90aGVyd2lzZSwgYGRpc3RhbmNlYCBzaG91bGQgcHJvdmlkZSBhIHBvc2l0aXZlIGRpc3RhbmNlXG4gICAgaW4gcGl4ZWxzLlxuICAgIFxuICAgIFdoZW4gYHN0YXJ0YCBoYXMgYVxuICAgIFtgZ29hbENvbHVtbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UuZ29hbENvbHVtbiksIHRoZSB2ZXJ0aWNhbFxuICAgIG1vdGlvbiB3aWxsIHVzZSB0aGF0IGFzIGEgdGFyZ2V0IGhvcml6b250YWwgcG9zaXRpb24uIE90aGVyd2lzZSxcbiAgICB0aGUgY3Vyc29yJ3Mgb3duIGhvcml6b250YWwgcG9zaXRpb24gaXMgdXNlZC4gVGhlIHJldHVybmVkXG4gICAgY3Vyc29yIHdpbGwgaGF2ZSBpdHMgZ29hbCBjb2x1bW4gc2V0IHRvIHdoaWNoZXZlciBjb2x1bW4gd2FzXG4gICAgdXNlZC5cbiAgICAqL1xuICAgIG1vdmVWZXJ0aWNhbGx5KHN0YXJ0LCBmb3J3YXJkLCBkaXN0YW5jZSkge1xuICAgICAgICByZXR1cm4gc2tpcEF0b21zKHRoaXMsIHN0YXJ0LCBtb3ZlVmVydGljYWxseSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgZGlzdGFuY2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgRE9NIHBhcmVudCBub2RlIGFuZCBvZmZzZXQgKGNoaWxkIG9mZnNldCBpZiBgbm9kZWAgaXNcbiAgICBhbiBlbGVtZW50LCBjaGFyYWN0ZXIgb2Zmc2V0IHdoZW4gaXQgaXMgYSB0ZXh0IG5vZGUpIGF0IHRoZVxuICAgIGdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLlxuICAgIFxuICAgIE5vdGUgdGhhdCBmb3IgcG9zaXRpb25zIHRoYXQgYXJlbid0IGN1cnJlbnRseSBpblxuICAgIGB2aXNpYmxlUmFuZ2VzYCwgdGhlIHJlc3VsdGluZyBET00gcG9zaXRpb24gaXNuJ3QgbmVjZXNzYXJpbHlcbiAgICBtZWFuaW5nZnVsIChpdCBtYXkganVzdCBwb2ludCBiZWZvcmUgb3IgYWZ0ZXIgYSBwbGFjZWhvbGRlclxuICAgIGVsZW1lbnQpLlxuICAgICovXG4gICAgZG9tQXRQb3MocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcuZG9tQXRQb3MocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgZG9jdW1lbnQgcG9zaXRpb24gYXQgdGhlIGdpdmVuIERPTSBub2RlLiBDYW4gYmUgdXNlZnVsXG4gICAgZm9yIGFzc29jaWF0aW5nIHBvc2l0aW9ucyB3aXRoIERPTSBldmVudHMuIFdpbGwgcmFpc2UgYW4gZXJyb3JcbiAgICB3aGVuIGBub2RlYCBpc24ndCBwYXJ0IG9mIHRoZSBlZGl0b3IgY29udGVudC5cbiAgICAqL1xuICAgIHBvc0F0RE9NKG5vZGUsIG9mZnNldCA9IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICAgIHBvc0F0Q29vcmRzKGNvb3JkcywgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHBvc0F0Q29vcmRzKHRoaXMsIGNvb3JkcywgcHJlY2lzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgc2NyZWVuIGNvb3JkaW5hdGVzIGF0IHRoZSBnaXZlbiBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICBgc2lkZWAgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb29yZGluYXRlcyBhcmUgYmFzZWQgb24gdGhlXG4gICAgZWxlbWVudCBiZWZvcmUgKC0xKSBvciBhZnRlciAoMSkgdGhlIHBvc2l0aW9uIChpZiBubyBlbGVtZW50IGlzXG4gICAgYXZhaWxhYmxlIG9uIHRoZSBnaXZlbiBzaWRlLCB0aGUgbWV0aG9kIHdpbGwgdHJhbnNwYXJlbnRseSB1c2VcbiAgICBhbm90aGVyIHN0cmF0ZWd5IHRvIGdldCByZWFzb25hYmxlIGNvb3JkaW5hdGVzKS5cbiAgICAqL1xuICAgIGNvb3Jkc0F0UG9zKHBvcywgc2lkZSA9IDEpIHtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmRvY1ZpZXcuY29vcmRzQXQocG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKCFyZWN0IHx8IHJlY3QubGVmdCA9PSByZWN0LnJpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHBvcyksIG9yZGVyID0gdGhpcy5iaWRpU3BhbnMobGluZSk7XG4gICAgICAgIGxldCBzcGFuID0gb3JkZXJbQmlkaVNwYW4uZmluZChvcmRlciwgcG9zIC0gbGluZS5mcm9tLCAtMSwgc2lkZSldO1xuICAgICAgICByZXR1cm4gZmxhdHRlblJlY3QocmVjdCwgKHNwYW4uZGlyID09IERpcmVjdGlvbi5MVFIpID09IChzaWRlID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIHJlY3RhbmdsZSBhcm91bmQgYSBnaXZlbiBjaGFyYWN0ZXIuIElmIGBwb3NgIGRvZXMgbm90XG4gICAgcG9pbnQgaW4gZnJvbnQgb2YgYSBjaGFyYWN0ZXIgdGhhdCBpcyBpbiB0aGUgdmlld3BvcnQgYW5kXG4gICAgcmVuZGVyZWQgKGkuZS4gbm90IHJlcGxhY2VkLCBub3QgYSBsaW5lIGJyZWFrKSwgdGhpcyB3aWxsIHJldHVyblxuICAgIG51bGwuIEZvciBzcGFjZSBjaGFyYWN0ZXJzIHRoYXQgYXJlIGEgbGluZSB3cmFwIHBvaW50LCB0aGlzIHdpbGxcbiAgICByZXR1cm4gdGhlIHBvc2l0aW9uIGJlZm9yZSB0aGUgbGluZSBicmVhay5cbiAgICAqL1xuICAgIGNvb3Jkc0ZvckNoYXIocG9zKSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcuY29vcmRzRm9yQ2hhcihwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGVmYXVsdCB3aWR0aCBvZiBhIGNoYXJhY3RlciBpbiB0aGUgZWRpdG9yLiBNYXkgbm90XG4gICAgYWNjdXJhdGVseSByZWZsZWN0IHRoZSB3aWR0aCBvZiBhbGwgY2hhcmFjdGVycyAoZ2l2ZW4gdmFyaWFibGVcbiAgICB3aWR0aCBmb250cyBvciBzdHlsaW5nIG9mIGludmlkaWR1YWwgcmFuZ2VzKS5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0Q2hhcmFjdGVyV2lkdGgoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUuY2hhcldpZHRoOyB9XG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgbGluZSBpbiB0aGUgZWRpdG9yLiBNYXkgbm90IGJlIGFjY3VyYXRlXG4gICAgZm9yIGFsbCBsaW5lcy5cbiAgICAqL1xuICAgIGdldCBkZWZhdWx0TGluZUhlaWdodCgpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmhlaWdodE9yYWNsZS5saW5lSGVpZ2h0OyB9XG4gICAgLyoqXG4gICAgVGhlIHRleHQgZGlyZWN0aW9uXG4gICAgKFtgZGlyZWN0aW9uYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2RpcmVjdGlvbilcbiAgICBDU1MgcHJvcGVydHkpIG9mIHRoZSBlZGl0b3IncyBjb250ZW50IGVsZW1lbnQuXG4gICAgKi9cbiAgICBnZXQgdGV4dERpcmVjdGlvbigpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLmRlZmF1bHRUZXh0RGlyZWN0aW9uOyB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgdGV4dCBkaXJlY3Rpb24gb2YgdGhlIGJsb2NrIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgYXNcbiAgICBhc3NpZ25lZCBieSBDU1MuIElmXG4gICAgW2BwZXJMaW5lVGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnBlckxpbmVUZXh0RGlyZWN0aW9uKVxuICAgIGlzbid0IGVuYWJsZWQsIG9yIHRoZSBnaXZlbiBwb3NpdGlvbiBpcyBvdXRzaWRlIG9mIHRoZSB2aWV3cG9ydCxcbiAgICB0aGlzIHdpbGwgYWx3YXlzIHJldHVybiB0aGUgc2FtZSBhc1xuICAgIFtgdGV4dERpcmVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24pLiBOb3RlIHRoYXRcbiAgICB0aGlzIG1heSB0cmlnZ2VyIGEgRE9NIGxheW91dC5cbiAgICAqL1xuICAgIHRleHREaXJlY3Rpb25BdChwb3MpIHtcbiAgICAgICAgbGV0IHBlckxpbmUgPSB0aGlzLnN0YXRlLmZhY2V0KHBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKCFwZXJMaW5lIHx8IHBvcyA8IHRoaXMudmlld3BvcnQuZnJvbSB8fCBwb3MgPiB0aGlzLnZpZXdwb3J0LnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dERpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5yZWFkTWVhc3VyZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldy50ZXh0RGlyZWN0aW9uQXQocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGlzIGVkaXRvciBbd3JhcHMgbGluZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmxpbmVXcmFwcGluZylcbiAgICAoYXMgZGV0ZXJtaW5lZCBieSB0aGVcbiAgICBbYHdoaXRlLXNwYWNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3doaXRlLXNwYWNlKVxuICAgIENTUyBwcm9wZXJ0eSBvZiBpdHMgY29udGVudCBlbGVtZW50KS5cbiAgICAqL1xuICAgIGdldCBsaW5lV3JhcHBpbmcoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUubGluZVdyYXBwaW5nOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGUgYmlkaXJlY3Rpb25hbCB0ZXh0IHN0cnVjdHVyZSBvZiB0aGUgZ2l2ZW4gbGluZVxuICAgICh3aGljaCBzaG91bGQgYmUgaW4gdGhlIGN1cnJlbnQgZG9jdW1lbnQpIGFzIGFuIGFycmF5IG9mIHNwYW5cbiAgICBvYmplY3RzLiBUaGUgb3JkZXIgb2YgdGhlc2Ugc3BhbnMgbWF0Y2hlcyB0aGUgW3RleHRcbiAgICBkaXJlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnRleHREaXJlY3Rpb24p4oCUaWYgdGhhdCBpc1xuICAgIGxlZnQtdG8tcmlnaHQsIHRoZSBsZWZ0bW9zdCBzcGFucyBjb21lIGZpcnN0LCBvdGhlcndpc2UgdGhlXG4gICAgcmlnaHRtb3N0IHNwYW5zIGNvbWUgZmlyc3QuXG4gICAgKi9cbiAgICBiaWRpU3BhbnMobGluZSkge1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiBNYXhCaWRpTGluZSlcbiAgICAgICAgICAgIHJldHVybiB0cml2aWFsT3JkZXIobGluZS5sZW5ndGgpO1xuICAgICAgICBsZXQgZGlyID0gdGhpcy50ZXh0RGlyZWN0aW9uQXQobGluZS5mcm9tKSwgaXNvbGF0ZXM7XG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHRoaXMuYmlkaUNhY2hlKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkuZnJvbSA9PSBsaW5lLmZyb20gJiYgZW50cnkuZGlyID09IGRpciAmJlxuICAgICAgICAgICAgICAgIChlbnRyeS5mcmVzaCB8fCBpc29sYXRlc0VxKGVudHJ5Lmlzb2xhdGVzLCBpc29sYXRlcyA9IGdldElzb2xhdGVkUmFuZ2VzKHRoaXMsIGxpbmUpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5Lm9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNvbGF0ZXMpXG4gICAgICAgICAgICBpc29sYXRlcyA9IGdldElzb2xhdGVkUmFuZ2VzKHRoaXMsIGxpbmUpO1xuICAgICAgICBsZXQgb3JkZXIgPSBjb21wdXRlT3JkZXIobGluZS50ZXh0LCBkaXIsIGlzb2xhdGVzKTtcbiAgICAgICAgdGhpcy5iaWRpQ2FjaGUucHVzaChuZXcgQ2FjaGVkT3JkZXIobGluZS5mcm9tLCBsaW5lLnRvLCBkaXIsIGlzb2xhdGVzLCB0cnVlLCBvcmRlcikpO1xuICAgICAgICByZXR1cm4gb3JkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIENoZWNrIHdoZXRoZXIgdGhlIGVkaXRvciBoYXMgZm9jdXMuXG4gICAgKi9cbiAgICBnZXQgaGFzRm9jdXMoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gU2FmYXJpIHJldHVybiBmYWxzZSBmb3IgaGFzRm9jdXMgd2hlbiB0aGUgY29udGV4dCBtZW51IGlzIG9wZW5cbiAgICAgICAgLy8gb3IgY2xvc2luZywgd2hpY2ggbGVhZHMgdXMgdG8gaWdub3JlIHNlbGVjdGlvbiBjaGFuZ2VzIGZyb20gdGhlXG4gICAgICAgIC8vIGNvbnRleHQgbWVudSBiZWNhdXNlIGl0IGxvb2tzIGxpa2UgdGhlIGVkaXRvciBpc24ndCBmb2N1c2VkLlxuICAgICAgICAvLyBUaGlzIGtsdWRnZXMgYXJvdW5kIHRoYXQuXG4gICAgICAgIHJldHVybiAodGhpcy5kb20ub3duZXJEb2N1bWVudC5oYXNGb2N1cygpIHx8IGJyb3dzZXIuc2FmYXJpICYmICgoX2EgPSB0aGlzLmlucHV0U3RhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYXN0Q29udGV4dE1lbnUpID4gRGF0ZS5ub3coKSAtIDNlNCkgJiZcbiAgICAgICAgICAgIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50ID09IHRoaXMuY29udGVudERPTTtcbiAgICB9XG4gICAgLyoqXG4gICAgUHV0IGZvY3VzIG9uIHRoZSBlZGl0b3IuXG4gICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgZm9jdXNQcmV2ZW50U2Nyb2xsKHRoaXMuY29udGVudERPTSk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIFtyb290XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvIyN2aWV3LkVkaXRvclZpZXdDb25maWcucm9vdCkgaW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy4gVGhpcyBpcyBvbmx5XG4gICAgbmVjZXNzYXJ5IHdoZW4gbW92aW5nIHRoZSBlZGl0b3IncyBleGlzdGluZyBET00gdG8gYSBuZXcgd2luZG93IG9yIHNoYWRvdyByb290LlxuICAgICovXG4gICAgc2V0Um9vdChyb290KSB7XG4gICAgICAgIGlmICh0aGlzLl9yb290ICE9IHJvb3QpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5zZXRXaW5kb3coKHJvb3Qubm9kZVR5cGUgPT0gOSA/IHJvb3QgOiByb290Lm93bmVyRG9jdW1lbnQpLmRlZmF1bHRWaWV3IHx8IHdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50U3R5bGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2xlYW4gdXAgdGhpcyBlZGl0b3IgdmlldywgcmVtb3ZpbmcgaXRzIGVsZW1lbnQgZnJvbSB0aGVcbiAgICBkb2N1bWVudCwgdW5yZWdpc3RlcmluZyBldmVudCBoYW5kbGVycywgYW5kIG5vdGlmeWluZ1xuICAgIHBsdWdpbnMuIFRoZSB2aWV3IGluc3RhbmNlIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlclxuICAgIGNhbGxpbmcgdGhpcy5cbiAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmNvbnRlbnRET00pXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRET00uYmx1cigpO1xuICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgcGx1Z2luLmRlc3Ryb3kodGhpcyk7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xuICAgICAgICB0aGlzLmlucHV0U3RhdGUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRvY1ZpZXcuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPiAtMSlcbiAgICAgICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubWVhc3VyZVNjaGVkdWxlZCk7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhbiBlZmZlY3QgdGhhdCBjYW4gYmVcbiAgICBbYWRkZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmVmZmVjdHMpIHRvIGEgdHJhbnNhY3Rpb24gdG9cbiAgICBjYXVzZSBpdCB0byBzY3JvbGwgdGhlIGdpdmVuIHBvc2l0aW9uIG9yIHJhbmdlIGludG8gdmlldy5cbiAgICAqL1xuICAgIHN0YXRpYyBzY3JvbGxJbnRvVmlldyhwb3MsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gc2Nyb2xsSW50b1ZpZXcub2YobmV3IFNjcm9sbFRhcmdldCh0eXBlb2YgcG9zID09IFwibnVtYmVyXCIgPyBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcykgOiBwb3MsIG9wdGlvbnMueSwgb3B0aW9ucy54LCBvcHRpb25zLnlNYXJnaW4sIG9wdGlvbnMueE1hcmdpbikpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYW4gZWZmZWN0IHRoYXQgcmVzZXRzIHRoZSBlZGl0b3IgdG8gaXRzIGN1cnJlbnQgKGF0IHRoZVxuICAgIHRpbWUgdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCkgc2Nyb2xsIHBvc2l0aW9uLiBOb3RlIHRoYXQgdGhpc1xuICAgIG9ubHkgYWZmZWN0cyB0aGUgZWRpdG9yJ3Mgb3duIHNjcm9sbGFibGUgZWxlbWVudCwgbm90IHBhcmVudHMuXG4gICAgU2VlIGFsc29cbiAgICBbYEVkaXRvclZpZXdDb25maWcuc2Nyb2xsVG9gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld0NvbmZpZy5zY3JvbGxUbykuXG4gICAgXG4gICAgVGhlIGVmZmVjdCBzaG91bGQgYmUgdXNlZCB3aXRoIGEgZG9jdW1lbnQgaWRlbnRpY2FsIHRvIHRoZSBvbmVcbiAgICBpdCB3YXMgY3JlYXRlZCBmb3IuIEZhaWxpbmcgdG8gZG8gc28gaXMgbm90IGFuIGVycm9yLCBidXQgbWF5XG4gICAgbm90IHNjcm9sbCB0byB0aGUgZXhwZWN0ZWQgcG9zaXRpb24uIFlvdSBjYW5cbiAgICBbbWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0Lm1hcCkgdGhlIGVmZmVjdCB0byBhY2NvdW50IGZvciBjaGFuZ2VzLlxuICAgICovXG4gICAgc2Nyb2xsU25hcHNob3QoKSB7XG4gICAgICAgIGxldCB7IHNjcm9sbFRvcCwgc2Nyb2xsTGVmdCB9ID0gdGhpcy5zY3JvbGxET007XG4gICAgICAgIGxldCByZWYgPSB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxBbmNob3JBdChzY3JvbGxUb3ApO1xuICAgICAgICByZXR1cm4gc2Nyb2xsSW50b1ZpZXcub2YobmV3IFNjcm9sbFRhcmdldChFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJlZi5mcm9tKSwgXCJzdGFydFwiLCBcInN0YXJ0XCIsIHJlZi50b3AgLSBzY3JvbGxUb3AsIHNjcm9sbExlZnQsIHRydWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRW5hYmxlIG9yIGRpc2FibGUgdGFiLWZvY3VzIG1vZGUsIHdoaWNoIGRpc2FibGVzIGtleSBiaW5kaW5nc1xuICAgIGZvciBUYWIgYW5kIFNoaWZ0LVRhYiwgbGV0dGluZyB0aGUgYnJvd3NlcidzIGRlZmF1bHRcbiAgICBmb2N1cy1jaGFuZ2luZyBiZWhhdmlvciBnbyB0aHJvdWdoIGluc3RlYWQuIFRoaXMgaXMgdXNlZnVsIHRvXG4gICAgcHJldmVudCB0cmFwcGluZyBrZXlib2FyZCB1c2VycyBpbiB5b3VyIGVkaXRvci5cbiAgICBcbiAgICBXaXRob3V0IGFyZ3VtZW50LCB0aGlzIHRvZ2dsZXMgdGhlIG1vZGUuIFdpdGggYSBib29sZWFuLCBpdFxuICAgIGVuYWJsZXMgKHRydWUpIG9yIGRpc2FibGVzIGl0IChmYWxzZSkuIEdpdmVuIGEgbnVtYmVyLCBpdFxuICAgIHRlbXBvcmFyaWx5IGVuYWJsZXMgdGhlIG1vZGUgdW50aWwgdGhhdCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzXG4gICAgaGF2ZSBwYXNzZWQgb3IgYW5vdGhlciBub24tVGFiIGtleSBpcyBwcmVzc2VkLlxuICAgICovXG4gICAgc2V0VGFiRm9jdXNNb2RlKHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLnRhYkZvY3VzTW9kZSA9IHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPCAwID8gMCA6IC0xO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdG8gPT0gXCJib29sZWFuXCIpXG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudGFiRm9jdXNNb2RlID0gdG8gPyAwIDogLTE7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgIT0gMClcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPSBEYXRlLm5vdygpICsgdG87XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIERPTSBldmVudCBoYW5kbGVycy5cbiAgICBUaGUgdmFsdWUgc2hvdWxkIGJlIGFuIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGhhbmRsZXJcbiAgICBmdW5jdGlvbnMuIEZvciBhbnkgZ2l2ZW4gZXZlbnQsIHN1Y2ggZnVuY3Rpb25zIGFyZSBvcmRlcmVkIGJ5XG4gICAgZXh0ZW5zaW9uIHByZWNlZGVuY2UsIGFuZCB0aGUgZmlyc3QgaGFuZGxlciB0byByZXR1cm4gdHJ1ZSB3aWxsXG4gICAgYmUgYXNzdW1lZCB0byBoYXZlIGhhbmRsZWQgdGhhdCBldmVudCwgYW5kIG5vIG90aGVyIGhhbmRsZXJzIG9yXG4gICAgYnVpbHQtaW4gYmVoYXZpb3Igd2lsbCBiZSBhY3RpdmF0ZWQgZm9yIGl0LiBUaGVzZSBhcmUgcmVnaXN0ZXJlZFxuICAgIG9uIHRoZSBbY29udGVudCBlbGVtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5jb250ZW50RE9NKSwgZXhjZXB0XG4gICAgZm9yIGBzY3JvbGxgIGhhbmRsZXJzLCB3aGljaCB3aWxsIGJlIGNhbGxlZCBhbnkgdGltZSB0aGVcbiAgICBlZGl0b3IncyBbc2Nyb2xsIGVsZW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnNjcm9sbERPTSkgb3Igb25lIG9mXG4gICAgaXRzIHBhcmVudCBub2RlcyBpcyBzY3JvbGxlZC5cbiAgICAqL1xuICAgIHN0YXRpYyBkb21FdmVudEhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIHJldHVybiBWaWV3UGx1Z2luLmRlZmluZSgoKSA9PiAoe30pLCB7IGV2ZW50SGFuZGxlcnM6IGhhbmRsZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgcmVnaXN0ZXJzIERPTSBldmVudCBvYnNlcnZlcnMuIENvbnRyYXJ5XG4gICAgdG8gZXZlbnQgW2hhbmRsZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15kb21FdmVudEhhbmRsZXJzKSxcbiAgICBvYnNlcnZlcnMgY2FuJ3QgYmUgcHJldmVudGVkIGZyb20gcnVubmluZyBieSBhIGhpZ2hlci1wcmVjZWRlbmNlXG4gICAgaGFuZGxlciByZXR1cm5pbmcgdHJ1ZS4gVGhleSBhbHNvIGRvbid0IHByZXZlbnQgb3RoZXIgaGFuZGxlcnNcbiAgICBhbmQgb2JzZXJ2ZXJzIGZyb20gcnVubmluZyB3aGVuIHRoZXkgcmV0dXJuIHRydWUsIGFuZCBzaG91bGQgbm90XG4gICAgY2FsbCBgcHJldmVudERlZmF1bHRgLlxuICAgICovXG4gICAgc3RhdGljIGRvbUV2ZW50T2JzZXJ2ZXJzKG9ic2VydmVycykge1xuICAgICAgICByZXR1cm4gVmlld1BsdWdpbi5kZWZpbmUoKCkgPT4gKHt9KSwgeyBldmVudE9ic2VydmVyczogb2JzZXJ2ZXJzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSB0aGVtZSBleHRlbnNpb24uIFRoZSBmaXJzdCBhcmd1bWVudCBjYW4gYmUgYVxuICAgIFtgc3R5bGUtbW9kYF0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pXG4gICAgc3R5bGUgc3BlYyBwcm92aWRpbmcgdGhlIHN0eWxlcyBmb3IgdGhlIHRoZW1lLiBUaGVzZSB3aWxsIGJlXG4gICAgcHJlZml4ZWQgd2l0aCBhIGdlbmVyYXRlZCBjbGFzcyBmb3IgdGhlIHN0eWxlLlxuICAgIFxuICAgIEJlY2F1c2UgdGhlIHNlbGVjdG9ycyB3aWxsIGJlIHByZWZpeGVkIHdpdGggYSBzY29wZSBjbGFzcywgcnVsZVxuICAgIHRoYXQgZGlyZWN0bHkgbWF0Y2ggdGhlIGVkaXRvcidzIFt3cmFwcGVyXG4gICAgZWxlbWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9tKeKAlHRvIHdoaWNoIHRoZSBzY29wZSBjbGFzcyB3aWxsIGJlXG4gICAgYWRkZWTigJRuZWVkIHRvIGJlIGV4cGxpY2l0bHkgZGlmZmVyZW50aWF0ZWQgYnkgYWRkaW5nIGFuIGAmYCB0b1xuICAgIHRoZSBzZWxlY3RvciBmb3IgdGhhdCBlbGVtZW504oCUZm9yIGV4YW1wbGVcbiAgICBgJi5jbS1mb2N1c2VkYC5cbiAgICBcbiAgICBXaGVuIGBkYXJrYCBpcyBzZXQgdG8gdHJ1ZSwgdGhlIHRoZW1lIHdpbGwgYmUgbWFya2VkIGFzIGRhcmssXG4gICAgd2hpY2ggd2lsbCBjYXVzZSB0aGUgYCZkYXJrYCBydWxlcyBmcm9tIFtiYXNlXG4gICAgdGhlbWVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15iYXNlVGhlbWUpIHRvIGJlIHVzZWQgKGFzIG9wcG9zZWQgdG9cbiAgICBgJmxpZ2h0YCB3aGVuIGEgbGlnaHQgdGhlbWUgaXMgYWN0aXZlKS5cbiAgICAqL1xuICAgIHN0YXRpYyB0aGVtZShzcGVjLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBwcmVmaXggPSBTdHlsZU1vZHVsZS5uZXdOYW1lKCk7XG4gICAgICAgIGxldCByZXN1bHQgPSBbdGhlbWUub2YocHJlZml4KSwgc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShgLiR7cHJlZml4fWAsIHNwZWMpKV07XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGFyaylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRhcmtUaGVtZS5vZih0cnVlKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBhZGRzIHN0eWxlcyB0byB0aGUgYmFzZSB0aGVtZS4gTGlrZVxuICAgIHdpdGggW2B0aGVtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnRoZW1lKSwgdXNlIGAmYCB0byBpbmRpY2F0ZSB0aGVcbiAgICBwbGFjZSBvZiB0aGUgZWRpdG9yIHdyYXBwZXIgZWxlbWVudCB3aGVuIGRpcmVjdGx5IHRhcmdldGluZ1xuICAgIHRoYXQuIFlvdSBjYW4gYWxzbyB1c2UgYCZkYXJrYCBvciBgJmxpZ2h0YCBpbnN0ZWFkIHRvIG9ubHlcbiAgICB0YXJnZXQgZWRpdG9ycyB3aXRoIGEgZGFyayBvciBsaWdodCB0aGVtZS5cbiAgICAqL1xuICAgIHN0YXRpYyBiYXNlVGhlbWUoc3BlYykge1xuICAgICAgICByZXR1cm4gUHJlYy5sb3dlc3Qoc3R5bGVNb2R1bGUub2YoYnVpbGRUaGVtZShcIi5cIiArIGJhc2VUaGVtZUlELCBzcGVjLCBsaWdodERhcmtJRHMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlIGFuIGVkaXRvciB2aWV3IGluc3RhbmNlIGZyb20gdGhlIHZpZXcncyBET01cbiAgICByZXByZXNlbnRhdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kRnJvbURPTShkb20pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY29udGVudCA9IGRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLWNvbnRlbnRcIik7XG4gICAgICAgIGxldCBjVmlldyA9IGNvbnRlbnQgJiYgQ29udGVudFZpZXcuZ2V0KGNvbnRlbnQpIHx8IENvbnRlbnRWaWV3LmdldChkb20pO1xuICAgICAgICByZXR1cm4gKChfYSA9IGNWaWV3ID09PSBudWxsIHx8IGNWaWV3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjVmlldy5yb290VmlldykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZpZXcpIHx8IG51bGw7XG4gICAgfVxufVxuLyoqXG5GYWNldCB0byBhZGQgYSBbc3R5bGVcbm1vZHVsZV0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pIHRvXG5hbiBlZGl0b3Igdmlldy4gVGhlIHZpZXcgd2lsbCBlbnN1cmUgdGhhdCB0aGUgbW9kdWxlIGlzXG5tb3VudGVkIGluIGl0cyBbZG9jdW1lbnRcbnJvb3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmNvbnN0cnVjdG9yXmNvbmZpZy5yb290KS5cbiovXG5FZGl0b3JWaWV3LnN0eWxlTW9kdWxlID0gc3R5bGVNb2R1bGU7XG4vKipcbkFuIGlucHV0IGhhbmRsZXIgY2FuIG92ZXJyaWRlIHRoZSB3YXkgY2hhbmdlcyB0byB0aGUgZWRpdGFibGVcbkRPTSBjb250ZW50IGFyZSBoYW5kbGVkLiBIYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBkb2N1bWVudFxucG9zaXRpb25zIGJldHdlZW4gd2hpY2ggdGhlIGNoYW5nZSB3YXMgZm91bmQsIGFuZCB0aGUgbmV3XG5jb250ZW50LiBXaGVuIG9uZSByZXR1cm5zIHRydWUsIG5vIGZ1cnRoZXIgaW5wdXQgaGFuZGxlcnMgYXJlXG5jYWxsZWQgYW5kIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZC5cblxuVGhlIGBpbnNlcnRgIGFyZ3VtZW50IGNhbiBiZSB1c2VkIHRvIGdldCB0aGUgZGVmYXVsdCB0cmFuc2FjdGlvblxudGhhdCB3b3VsZCBiZSBhcHBsaWVkIGZvciB0aGlzIGlucHV0LiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlblxuZGlzcGF0Y2hpbmcgdGhlIGN1c3RvbSBiZWhhdmlvciBhcyBhIHNlcGFyYXRlIHRyYW5zYWN0aW9uLlxuKi9cbkVkaXRvclZpZXcuaW5wdXRIYW5kbGVyID0gaW5wdXRIYW5kbGVyO1xuLyoqXG5GdW5jdGlvbnMgcHJvdmlkZWQgaW4gdGhpcyBmYWNldCB3aWxsIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRleHRcbnBhc3RlZCBvciBkcm9wcGVkIGludG8gdGhlIGVkaXRvci5cbiovXG5FZGl0b3JWaWV3LmNsaXBib2FyZElucHV0RmlsdGVyID0gY2xpcGJvYXJkSW5wdXRGaWx0ZXI7XG4vKipcblRyYW5zZm9ybSB0ZXh0IGNvcGllZCBvciBkcmFnZ2VkIGZyb20gdGhlIGVkaXRvci5cbiovXG5FZGl0b3JWaWV3LmNsaXBib2FyZE91dHB1dEZpbHRlciA9IGNsaXBib2FyZE91dHB1dEZpbHRlcjtcbi8qKlxuU2Nyb2xsIGhhbmRsZXJzIGNhbiBvdmVycmlkZSBob3cgdGhpbmdzIGFyZSBzY3JvbGxlZCBpbnRvIHZpZXcuXG5JZiB0aGV5IHJldHVybiBgdHJ1ZWAsIG5vIGZ1cnRoZXIgaGFuZGxpbmcgaGFwcGVucyBmb3IgdGhlXG5zY3JvbGxpbmcuIElmIHRoZXkgcmV0dXJuIGZhbHNlLCB0aGUgZGVmYXVsdCBzY3JvbGwgYmVoYXZpb3IgaXNcbmFwcGxpZWQuIFNjcm9sbCBoYW5kbGVycyBzaG91bGQgbmV2ZXIgaW5pdGlhdGUgZWRpdG9yIHVwZGF0ZXMuXG4qL1xuRWRpdG9yVmlldy5zY3JvbGxIYW5kbGVyID0gc2Nyb2xsSGFuZGxlcjtcbi8qKlxuVGhpcyBmYWNldCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGZ1bmN0aW9ucyB0aGF0IGNyZWF0ZSBlZmZlY3RzXG50byBiZSBkaXNwYXRjaGVkIHdoZW4gdGhlIGVkaXRvcidzIGZvY3VzIHN0YXRlIGNoYW5nZXMuXG4qL1xuRWRpdG9yVmlldy5mb2N1c0NoYW5nZUVmZmVjdCA9IGZvY3VzQ2hhbmdlRWZmZWN0O1xuLyoqXG5CeSBkZWZhdWx0LCB0aGUgZWRpdG9yIGFzc3VtZXMgYWxsIGl0cyBjb250ZW50IGhhcyB0aGUgc2FtZVxuW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRGlyZWN0aW9uKS4gQ29uZmlndXJlIHRoaXMgd2l0aCBhIGB0cnVlYFxudmFsdWUgdG8gbWFrZSBpdCByZWFkIHRoZSB0ZXh0IGRpcmVjdGlvbiBvZiBldmVyeSAocmVuZGVyZWQpXG5saW5lIHNlcGFyYXRlbHkuXG4qL1xuRWRpdG9yVmlldy5wZXJMaW5lVGV4dERpcmVjdGlvbiA9IHBlckxpbmVUZXh0RGlyZWN0aW9uO1xuLyoqXG5BbGxvd3MgeW91IHRvIHByb3ZpZGUgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgd2hlbiB0aGVcbmxpYnJhcnkgY2F0Y2hlcyBhbiBleGNlcHRpb24gZnJvbSBhbiBleHRlbnNpb24gKG1vc3RseSBmcm9tIHZpZXdcbnBsdWdpbnMsIGJ1dCBtYXkgYmUgdXNlZCBieSBvdGhlciBleHRlbnNpb25zIHRvIHJvdXRlIGV4Y2VwdGlvbnNcbmZyb20gdXNlci1jb2RlLXByb3ZpZGVkIGNhbGxiYWNrcykuIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBmb3JcbmRlYnVnZ2luZyBhbmQgbG9nZ2luZy4gU2VlIFtgbG9nRXhjZXB0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmxvZ0V4Y2VwdGlvbikuXG4qL1xuRWRpdG9yVmlldy5leGNlcHRpb25TaW5rID0gZXhjZXB0aW9uU2luaztcbi8qKlxuQSBmYWNldCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG5ldmVyeSB0aW1lIHRoZSB2aWV3IHVwZGF0ZXMuXG4qL1xuRWRpdG9yVmlldy51cGRhdGVMaXN0ZW5lciA9IHVwZGF0ZUxpc3RlbmVyO1xuLyoqXG5GYWNldCB0aGF0IGNvbnRyb2xzIHdoZXRoZXIgdGhlIGVkaXRvciBjb250ZW50IERPTSBpcyBlZGl0YWJsZS5cbldoZW4gaXRzIGhpZ2hlc3QtcHJlY2VkZW5jZSB2YWx1ZSBpcyBgZmFsc2VgLCB0aGUgZWxlbWVudCB3aWxsXG5ub3QgaGF2ZSBpdHMgYGNvbnRlbnRlZGl0YWJsZWAgYXR0cmlidXRlIHNldC4gKE5vdGUgdGhhdCB0aGlzXG5kb2Vzbid0IGFmZmVjdCBBUEkgY2FsbHMgdGhhdCBjaGFuZ2UgdGhlIGVkaXRvciBjb250ZW50LCBldmVuXG53aGVuIHRob3NlIGFyZSBib3VuZCB0byBrZXlzIG9yIGJ1dHRvbnMuIFNlZSB0aGVcbltgcmVhZE9ubHlgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnJlYWRPbmx5KSBmYWNldCBmb3IgdGhhdC4pXG4qL1xuRWRpdG9yVmlldy5lZGl0YWJsZSA9IGVkaXRhYmxlO1xuLyoqXG5BbGxvd3MgeW91IHRvIGluZmx1ZW5jZSB0aGUgd2F5IG1vdXNlIHNlbGVjdGlvbiBoYXBwZW5zLiBUaGVcbmZ1bmN0aW9ucyBpbiB0aGlzIGZhY2V0IHdpbGwgYmUgY2FsbGVkIGZvciBhIGBtb3VzZWRvd25gIGV2ZW50XG5vbiB0aGUgZWRpdG9yLCBhbmQgY2FuIHJldHVybiBhbiBvYmplY3QgdGhhdCBvdmVycmlkZXMgdGhlIHdheSBhXG5zZWxlY3Rpb24gaXMgY29tcHV0ZWQgZnJvbSB0aGF0IG1vdXNlIGNsaWNrIG9yIGRyYWcuXG4qL1xuRWRpdG9yVmlldy5tb3VzZVNlbGVjdGlvblN0eWxlID0gbW91c2VTZWxlY3Rpb25TdHlsZTtcbi8qKlxuRmFjZXQgdXNlZCB0byBjb25maWd1cmUgd2hldGhlciBhIGdpdmVuIHNlbGVjdGlvbiBkcmFnIGV2ZW50XG5zaG91bGQgbW92ZSBvciBjb3B5IHRoZSBzZWxlY3Rpb24uIFRoZSBnaXZlbiBwcmVkaWNhdGUgd2lsbCBiZVxuY2FsbGVkIHdpdGggdGhlIGBtb3VzZWRvd25gIGV2ZW50LCBhbmQgY2FuIHJldHVybiBgdHJ1ZWAgd2hlblxudGhlIGRyYWcgc2hvdWxkIG1vdmUgdGhlIGNvbnRlbnQuXG4qL1xuRWRpdG9yVmlldy5kcmFnTW92ZXNTZWxlY3Rpb24gPSBkcmFnTW92ZXNTZWxlY3Rpb24kMTtcbi8qKlxuRmFjZXQgdXNlZCB0byBjb25maWd1cmUgd2hldGhlciBhIGdpdmVuIHNlbGVjdGluZyBjbGljayBhZGRzIGFcbm5ldyByYW5nZSB0byB0aGUgZXhpc3Rpbmcgc2VsZWN0aW9uIG9yIHJlcGxhY2VzIGl0IGVudGlyZWx5LiBUaGVcbmRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gY2hlY2sgYGV2ZW50Lm1ldGFLZXlgIG9uIG1hY09TLCBhbmRcbmBldmVudC5jdHJsS2V5YCBlbHNld2hlcmUuXG4qL1xuRWRpdG9yVmlldy5jbGlja0FkZHNTZWxlY3Rpb25SYW5nZSA9IGNsaWNrQWRkc1NlbGVjdGlvblJhbmdlO1xuLyoqXG5BIGZhY2V0IHRoYXQgZGV0ZXJtaW5lcyB3aGljaCBbZGVjb3JhdGlvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uKVxuYXJlIHNob3duIGluIHRoZSB2aWV3LiBEZWNvcmF0aW9ucyBjYW4gYmUgcHJvdmlkZWQgaW4gdHdvXG53YXlz4oCUZGlyZWN0bHksIG9yIHZpYSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gZWRpdG9yIHZpZXcuXG5cbk9ubHkgZGVjb3JhdGlvbiBzZXRzIHByb3ZpZGVkIGRpcmVjdGx5IGFyZSBhbGxvd2VkIHRvIGluZmx1ZW5jZVxudGhlIGVkaXRvcidzIHZlcnRpY2FsIGxheW91dCBzdHJ1Y3R1cmUuIFRoZSBvbmVzIHByb3ZpZGVkIGFzXG5mdW5jdGlvbnMgYXJlIGNhbGxlZCBfYWZ0ZXJfIHRoZSBuZXcgdmlld3BvcnQgaGFzIGJlZW4gY29tcHV0ZWQsXG5hbmQgdGh1cyAqKm11c3Qgbm90KiogaW50cm9kdWNlIGJsb2NrIHdpZGdldHMgb3IgcmVwbGFjaW5nXG5kZWNvcmF0aW9ucyB0aGF0IGNvdmVyIGxpbmUgYnJlYWtzLlxuXG5JZiB5b3Ugd2FudCBkZWNvcmF0ZWQgcmFuZ2VzIHRvIGJlaGF2ZSBsaWtlIGF0b21pYyB1bml0cyBmb3JcbmN1cnNvciBtb3Rpb24gYW5kIGRlbGV0aW9uIHB1cnBvc2VzLCBhbHNvIHByb3ZpZGUgdGhlIHJhbmdlIHNldFxuY29udGFpbmluZyB0aGUgZGVjb3JhdGlvbnMgdG9cbltgRWRpdG9yVmlldy5hdG9taWNSYW5nZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15hdG9taWNSYW5nZXMpLlxuKi9cbkVkaXRvclZpZXcuZGVjb3JhdGlvbnMgPSBkZWNvcmF0aW9ucztcbi8qKlxuRmFjZXQgdGhhdCB3b3JrcyBtdWNoIGxpa2VcbltgZGVjb3JhdGlvbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15kZWNvcmF0aW9ucyksIGJ1dCBwdXRzIGl0c1xuaW5wdXRzIGF0IHRoZSB2ZXJ5IGJvdHRvbSBvZiB0aGUgcHJlY2VkZW5jZSBzdGFjaywgbWVhbmluZyBtYXJrXG5kZWNvcmF0aW9ucyBwcm92aWRlZCBoZXJlIHdpbGwgb25seSBiZSBzcGxpdCBieSBvdGhlciwgcGFydGlhbGx5XG5vdmVybGFwcGluZyBcXGBvdXRlckRlY29yYXRpb25zXFxgIHJhbmdlcywgYW5kIHdyYXAgYXJvdW5kIGFsbFxucmVndWxhciBkZWNvcmF0aW9ucy4gVXNlIHRoaXMgZm9yIG1hcmsgZWxlbWVudHMgdGhhdCBzaG91bGQsIGFzXG5tdWNoIGFzIHBvc3NpYmxlLCByZW1haW4gaW4gb25lIHBpZWNlLlxuKi9cbkVkaXRvclZpZXcub3V0ZXJEZWNvcmF0aW9ucyA9IG91dGVyRGVjb3JhdGlvbnM7XG4vKipcblVzZWQgdG8gcHJvdmlkZSByYW5nZXMgdGhhdCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhdG9tcyBhcyBmYXIgYXNcbmN1cnNvciBtb3Rpb24gaXMgY29uY2VybmVkLiBUaGlzIGNhdXNlcyBtZXRob2RzIGxpa2VcbltgbW92ZUJ5Q2hhcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVCeUNoYXIpIGFuZFxuW2Btb3ZlVmVydGljYWxseWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVWZXJ0aWNhbGx5KSAoYW5kIHRoZVxuY29tbWFuZHMgYnVpbHQgb24gdG9wIG9mIHRoZW0pIHRvIHNraXAgYWNyb3NzIHN1Y2ggcmVnaW9ucyB3aGVuXG5hIHNlbGVjdGlvbiBlbmRwb2ludCB3b3VsZCBlbnRlciB0aGVtLiBUaGlzIGRvZXMgX25vdF8gcHJldmVudFxuZGlyZWN0IHByb2dyYW1tYXRpYyBbc2VsZWN0aW9uXG51cGRhdGVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pIGZyb20gbW92aW5nIGludG8gc3VjaFxucmVnaW9ucy5cbiovXG5FZGl0b3JWaWV3LmF0b21pY1JhbmdlcyA9IGF0b21pY1Jhbmdlcztcbi8qKlxuV2hlbiByYW5nZSBkZWNvcmF0aW9ucyBhZGQgYSBgdW5pY29kZS1iaWRpOiBpc29sYXRlYCBzdHlsZSwgdGhleVxuc2hvdWxkIGFsc28gaW5jbHVkZSBhXG5bYGJpZGlJc29sYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3Lk1hcmtEZWNvcmF0aW9uU3BlYy5iaWRpSXNvbGF0ZSkgcHJvcGVydHlcbmluIHRoZWlyIGRlY29yYXRpb24gc3BlYywgYW5kIGJlIGV4cG9zZWQgdGhyb3VnaCB0aGlzIGZhY2V0LCBzb1xudGhhdCB0aGUgZWRpdG9yIGNhbiBjb21wdXRlIHRoZSBwcm9wZXIgdGV4dCBvcmRlci4gKE90aGVyIHZhbHVlc1xuZm9yIGB1bmljb2RlLWJpZGlgLCBleGNlcHQgb2YgY291cnNlIGBub3JtYWxgLCBhcmUgbm90XG5zdXBwb3J0ZWQuKVxuKi9cbkVkaXRvclZpZXcuYmlkaUlzb2xhdGVkUmFuZ2VzID0gYmlkaUlzb2xhdGVkUmFuZ2VzO1xuLyoqXG5GYWNldCB0aGF0IGFsbG93cyBleHRlbnNpb25zIHRvIHByb3ZpZGUgYWRkaXRpb25hbCBzY3JvbGxcbm1hcmdpbnMgKHNwYWNlIGFyb3VuZCB0aGUgc2lkZXMgb2YgdGhlIHNjcm9sbGluZyBlbGVtZW50IHRoYXRcbnNob3VsZCBiZSBjb25zaWRlcmVkIGludmlzaWJsZSkuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHRoZVxucGx1Z2luIGludHJvZHVjZXMgZWxlbWVudHMgdGhhdCBjb3ZlciBwYXJ0IG9mIHRoYXQgZWxlbWVudCAoZm9yXG5leGFtcGxlIGEgaG9yaXpvbnRhbGx5IGZpeGVkIGd1dHRlcikuXG4qL1xuRWRpdG9yVmlldy5zY3JvbGxNYXJnaW5zID0gc2Nyb2xsTWFyZ2lucztcbi8qKlxuVGhpcyBmYWNldCByZWNvcmRzIHdoZXRoZXIgYSBkYXJrIHRoZW1lIGlzIGFjdGl2ZS4gVGhlIGV4dGVuc2lvblxucmV0dXJuZWQgYnkgW2B0aGVtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnRoZW1lKSBhdXRvbWF0aWNhbGx5XG5pbmNsdWRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIHdoZW4gdGhlIGBkYXJrYCBvcHRpb24gaXMgc2V0IHRvXG50cnVlLlxuKi9cbkVkaXRvclZpZXcuZGFya1RoZW1lID0gZGFya1RoZW1lO1xuLyoqXG5Qcm92aWRlcyBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IG5vbmNlIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG50aGUgc3R5bGUgc2hlZXRzIGZvciB0aGUgZWRpdG9yLiBIb2xkcyB0aGUgZW1wdHkgc3RyaW5nIHdoZW4gbm9cbm5vbmNlIGhhcyBiZWVuIHByb3ZpZGVkLlxuKi9cbkVkaXRvclZpZXcuY3NwTm9uY2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiBcIlwiIH0pO1xuLyoqXG5GYWNldCB0aGF0IHByb3ZpZGVzIGFkZGl0aW9uYWwgRE9NIGF0dHJpYnV0ZXMgZm9yIHRoZSBlZGl0b3Inc1xuZWRpdGFibGUgRE9NIGVsZW1lbnQuXG4qL1xuRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcyA9IGNvbnRlbnRBdHRyaWJ1dGVzO1xuLyoqXG5GYWNldCB0aGF0IHByb3ZpZGVzIERPTSBhdHRyaWJ1dGVzIGZvciB0aGUgZWRpdG9yJ3Mgb3V0ZXJcbmVsZW1lbnQuXG4qL1xuRWRpdG9yVmlldy5lZGl0b3JBdHRyaWJ1dGVzID0gZWRpdG9yQXR0cmlidXRlcztcbi8qKlxuQW4gZXh0ZW5zaW9uIHRoYXQgZW5hYmxlcyBsaW5lIHdyYXBwaW5nIGluIHRoZSBlZGl0b3IgKGJ5XG5zZXR0aW5nIENTUyBgd2hpdGUtc3BhY2VgIHRvIGBwcmUtd3JhcGAgaW4gdGhlIGNvbnRlbnQpLlxuKi9cbkVkaXRvclZpZXcubGluZVdyYXBwaW5nID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YoeyBcImNsYXNzXCI6IFwiY20tbGluZVdyYXBwaW5nXCIgfSk7XG4vKipcblN0YXRlIGVmZmVjdCB1c2VkIHRvIGluY2x1ZGUgc2NyZWVuIHJlYWRlciBhbm5vdW5jZW1lbnRzIGluIGFcbnRyYW5zYWN0aW9uLiBUaGVzZSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBET00gaW4gYSB2aXN1YWxseSBoaWRkZW5cbmVsZW1lbnQgd2l0aCBgYXJpYS1saXZlPVwicG9saXRlXCJgIHNldCwgYW5kIHNob3VsZCBiZSB1c2VkIHRvXG5kZXNjcmliZSBlZmZlY3RzIHRoYXQgYXJlIHZpc3VhbGx5IG9idmlvdXMgYnV0IG1heSBub3QgYmVcbm5vdGljZWQgYnkgc2NyZWVuIHJlYWRlciB1c2VycyAoc3VjaCBhcyBtb3ZpbmcgdG8gdGhlIG5leHRcbnNlYXJjaCBtYXRjaCkuXG4qL1xuRWRpdG9yVmlldy5hbm5vdW5jZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8vIE1heGltdW0gbGluZSBsZW5ndGggZm9yIHdoaWNoIHdlIGNvbXB1dGUgYWNjdXJhdGUgYmlkaSBpbmZvXG5jb25zdCBNYXhCaWRpTGluZSA9IDQwOTY7XG5jb25zdCBCYWRNZWFzdXJlID0ge307XG5jbGFzcyBDYWNoZWRPcmRlciB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8sIGRpciwgaXNvbGF0ZXMsIGZyZXNoLCBvcmRlcikge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICB0aGlzLmlzb2xhdGVzID0gaXNvbGF0ZXM7XG4gICAgICAgIHRoaXMuZnJlc2ggPSBmcmVzaDtcbiAgICAgICAgdGhpcy5vcmRlciA9IG9yZGVyO1xuICAgIH1cbiAgICBzdGF0aWMgdXBkYXRlKGNhY2hlLCBjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmVtcHR5ICYmICFjYWNoZS5zb21lKGMgPT4gYy5mcmVzaCkpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgbGFzdERpciA9IGNhY2hlLmxlbmd0aCA/IGNhY2hlW2NhY2hlLmxlbmd0aCAtIDFdLmRpciA6IERpcmVjdGlvbi5MVFI7XG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBjYWNoZS5sZW5ndGggLSAxMCk7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gY2FjaGVbaV07XG4gICAgICAgICAgICBpZiAoZW50cnkuZGlyID09IGxhc3REaXIgJiYgIWNoYW5nZXMudG91Y2hlc1JhbmdlKGVudHJ5LmZyb20sIGVudHJ5LnRvKSlcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgQ2FjaGVkT3JkZXIoY2hhbmdlcy5tYXBQb3MoZW50cnkuZnJvbSwgMSksIGNoYW5nZXMubWFwUG9zKGVudHJ5LnRvLCAtMSksIGVudHJ5LmRpciwgZW50cnkuaXNvbGF0ZXMsIGZhbHNlLCBlbnRyeS5vcmRlcikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cnNGcm9tRmFjZXQodmlldywgZmFjZXQsIGJhc2UpIHtcbiAgICBmb3IgKGxldCBzb3VyY2VzID0gdmlldy5zdGF0ZS5mYWNldChmYWNldCksIGkgPSBzb3VyY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzW2ldLCB2YWx1ZSA9IHR5cGVvZiBzb3VyY2UgPT0gXCJmdW5jdGlvblwiID8gc291cmNlKHZpZXcpIDogc291cmNlO1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICBjb21iaW5lQXR0cnModmFsdWUsIGJhc2UpO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZTtcbn1cblxuY29uc3QgY3VycmVudFBsYXRmb3JtID0gYnJvd3Nlci5tYWMgPyBcIm1hY1wiIDogYnJvd3Nlci53aW5kb3dzID8gXCJ3aW5cIiA6IGJyb3dzZXIubGludXggPyBcImxpbnV4XCIgOiBcImtleVwiO1xuZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lLCBwbGF0Zm9ybSkge1xuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyk7XG4gICAgbGV0IHJlc3VsdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChyZXN1bHQgPT0gXCJTcGFjZVwiKVxuICAgICAgICByZXN1bHQgPSBcIiBcIjtcbiAgICBsZXQgYWx0LCBjdHJsLCBzaGlmdCwgbWV0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICBjb25zdCBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBhbHQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgc2hpZnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXm1vZCQvaS50ZXN0KG1vZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF0Zm9ybSA9PSBcIm1hY1wiKVxuICAgICAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGN0cmwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpXG4gICAgICAgIHJlc3VsdCA9IFwiQWx0LVwiICsgcmVzdWx0O1xuICAgIGlmIChjdHJsKVxuICAgICAgICByZXN1bHQgPSBcIkN0cmwtXCIgKyByZXN1bHQ7XG4gICAgaWYgKG1ldGEpXG4gICAgICAgIHJlc3VsdCA9IFwiTWV0YS1cIiArIHJlc3VsdDtcbiAgICBpZiAoc2hpZnQpXG4gICAgICAgIHJlc3VsdCA9IFwiU2hpZnQtXCIgKyByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVycyhuYW1lLCBldmVudCwgc2hpZnQpIHtcbiAgICBpZiAoZXZlbnQuYWx0S2V5KVxuICAgICAgICBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5jdHJsS2V5KVxuICAgICAgICBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTtcbiAgICBpZiAoZXZlbnQubWV0YUtleSlcbiAgICAgICAgbmFtZSA9IFwiTWV0YS1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0ICE9PSBmYWxzZSAmJiBldmVudC5zaGlmdEtleSlcbiAgICAgICAgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xufVxuY29uc3QgaGFuZGxlS2V5RXZlbnRzID0gLypAX19QVVJFX18qL1ByZWMuZGVmYXVsdCgvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICBrZXlkb3duKGV2ZW50LCB2aWV3KSB7XG4gICAgICAgIHJldHVybiBydW5IYW5kbGVycyhnZXRLZXltYXAodmlldy5zdGF0ZSksIGV2ZW50LCB2aWV3LCBcImVkaXRvclwiKTtcbiAgICB9XG59KSk7XG4vKipcbkZhY2V0IHVzZWQgZm9yIHJlZ2lzdGVyaW5nIGtleW1hcHMuXG5cbllvdSBjYW4gYWRkIG11bHRpcGxlIGtleW1hcHMgdG8gYW4gZWRpdG9yLiBUaGVpciBwcmlvcml0aWVzXG5kZXRlcm1pbmUgdGhlaXIgcHJlY2VkZW5jZSAodGhlIG9uZXMgc3BlY2lmaWVkIGVhcmx5IG9yIHdpdGggaGlnaFxucHJpb3JpdHkgZ2V0IGNoZWNrZWQgZmlyc3QpLiBXaGVuIGEgaGFuZGxlciBoYXMgcmV0dXJuZWQgYHRydWVgXG5mb3IgYSBnaXZlbiBrZXksIG5vIGZ1cnRoZXIgaGFuZGxlcnMgYXJlIGNhbGxlZC5cbiovXG5jb25zdCBrZXltYXAgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgZW5hYmxlczogaGFuZGxlS2V5RXZlbnRzIH0pO1xuY29uc3QgS2V5bWFwcyA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLy8gVGhpcyBpcyBoaWRkZW4gYmVoaW5kIGFuIGluZGlyZWN0aW9uLCByYXRoZXIgdGhhbiBkaXJlY3RseSBjb21wdXRlZFxuLy8gYnkgdGhlIGZhY2V0LCB0byBrZWVwIGludGVybmFsIHR5cGVzIG91dCBvZiB0aGUgZmFjZXQncyB0eXBlLlxuZnVuY3Rpb24gZ2V0S2V5bWFwKHN0YXRlKSB7XG4gICAgbGV0IGJpbmRpbmdzID0gc3RhdGUuZmFjZXQoa2V5bWFwKTtcbiAgICBsZXQgbWFwID0gS2V5bWFwcy5nZXQoYmluZGluZ3MpO1xuICAgIGlmICghbWFwKVxuICAgICAgICBLZXltYXBzLnNldChiaW5kaW5ncywgbWFwID0gYnVpbGRLZXltYXAoYmluZGluZ3MucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pKSk7XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuUnVuIHRoZSBrZXkgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBzY29wZS4gVGhlIGV2ZW50XG5vYmplY3Qgc2hvdWxkIGJlIGEgYFwia2V5ZG93blwiYCBldmVudC4gUmV0dXJucyB0cnVlIGlmIGFueSBvZiB0aGVcbmhhbmRsZXJzIGhhbmRsZWQgaXQuXG4qL1xuZnVuY3Rpb24gcnVuU2NvcGVIYW5kbGVycyh2aWV3LCBldmVudCwgc2NvcGUpIHtcbiAgICByZXR1cm4gcnVuSGFuZGxlcnMoZ2V0S2V5bWFwKHZpZXcuc3RhdGUpLCBldmVudCwgdmlldywgc2NvcGUpO1xufVxubGV0IHN0b3JlZFByZWZpeCA9IG51bGw7XG5jb25zdCBQcmVmaXhUaW1lb3V0ID0gNDAwMDtcbmZ1bmN0aW9uIGJ1aWxkS2V5bWFwKGJpbmRpbmdzLCBwbGF0Zm9ybSA9IGN1cnJlbnRQbGF0Zm9ybSkge1xuICAgIGxldCBib3VuZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGlzUHJlZml4ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgY2hlY2tQcmVmaXggPSAobmFtZSwgaXMpID0+IHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBpc1ByZWZpeFtuYW1lXTtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIGlzUHJlZml4W25hbWVdID0gaXM7XG4gICAgICAgIGVsc2UgaWYgKGN1cnJlbnQgIT0gaXMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXkgYmluZGluZyBcIiArIG5hbWUgKyBcIiBpcyB1c2VkIGJvdGggYXMgYSByZWd1bGFyIGJpbmRpbmcgYW5kIGFzIGEgbXVsdGktc3Ryb2tlIHByZWZpeFwiKTtcbiAgICB9O1xuICAgIGxldCBhZGQgPSAoc2NvcGUsIGtleSwgY29tbWFuZCwgcHJldmVudERlZmF1bHQsIHN0b3BQcm9wYWdhdGlvbikgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBsZXQgc2NvcGVPYmogPSBib3VuZFtzY29wZV0gfHwgKGJvdW5kW3Njb3BlXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICBsZXQgcGFydHMgPSBrZXkuc3BsaXQoLyAoPyEkKS8pLm1hcChrID0+IG5vcm1hbGl6ZUtleU5hbWUoaywgcGxhdGZvcm0pKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHByZWZpeCA9IHBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgY2hlY2tQcmVmaXgocHJlZml4LCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghc2NvcGVPYmpbcHJlZml4XSlcbiAgICAgICAgICAgICAgICBzY29wZU9ialtwcmVmaXhdID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcnVuOiBbKHZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3VyT2JqID0gc3RvcmVkUHJlZml4ID0geyB2aWV3LCBwcmVmaXgsIHNjb3BlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlmIChzdG9yZWRQcmVmaXggPT0gb3VyT2JqKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZWRQcmVmaXggPSBudWxsOyB9LCBQcmVmaXhUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnVsbCA9IHBhcnRzLmpvaW4oXCIgXCIpO1xuICAgICAgICBjaGVja1ByZWZpeChmdWxsLCBmYWxzZSk7XG4gICAgICAgIGxldCBiaW5kaW5nID0gc2NvcGVPYmpbZnVsbF0gfHwgKHNjb3BlT2JqW2Z1bGxdID0ge1xuICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJ1bjogKChfYiA9IChfYSA9IHNjb3BlT2JqLl9hbnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ydW4pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zbGljZSgpKSB8fCBbXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbW1hbmQpXG4gICAgICAgICAgICBiaW5kaW5nLnJ1bi5wdXNoKGNvbW1hbmQpO1xuICAgICAgICBpZiAocHJldmVudERlZmF1bHQpXG4gICAgICAgICAgICBiaW5kaW5nLnByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgIGJpbmRpbmcuc3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcbiAgICB9O1xuICAgIGZvciAobGV0IGIgb2YgYmluZGluZ3MpIHtcbiAgICAgICAgbGV0IHNjb3BlcyA9IGIuc2NvcGUgPyBiLnNjb3BlLnNwbGl0KFwiIFwiKSA6IFtcImVkaXRvclwiXTtcbiAgICAgICAgaWYgKGIuYW55KVxuICAgICAgICAgICAgZm9yIChsZXQgc2NvcGUgb2Ygc2NvcGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNjb3BlT2JqID0gYm91bmRbc2NvcGVdIHx8IChib3VuZFtzY29wZV0gPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlT2JqLl9hbnkpXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlT2JqLl9hbnkgPSB7IHByZXZlbnREZWZhdWx0OiBmYWxzZSwgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSwgcnVuOiBbXSB9O1xuICAgICAgICAgICAgICAgIGxldCB7IGFueSB9ID0gYjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gc2NvcGVPYmopXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlT2JqW2tleV0ucnVuLnB1c2godmlldyA9PiBhbnkodmlldywgY3VycmVudEtleUV2ZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGxldCBuYW1lID0gYltwbGF0Zm9ybV0gfHwgYi5rZXk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBmb3IgKGxldCBzY29wZSBvZiBzY29wZXMpIHtcbiAgICAgICAgICAgIGFkZChzY29wZSwgbmFtZSwgYi5ydW4sIGIucHJldmVudERlZmF1bHQsIGIuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgICAgIGlmIChiLnNoaWZ0KVxuICAgICAgICAgICAgICAgIGFkZChzY29wZSwgXCJTaGlmdC1cIiArIG5hbWUsIGIuc2hpZnQsIGIucHJldmVudERlZmF1bHQsIGIuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYm91bmQ7XG59XG5sZXQgY3VycmVudEtleUV2ZW50ID0gbnVsbDtcbmZ1bmN0aW9uIHJ1bkhhbmRsZXJzKG1hcCwgZXZlbnQsIHZpZXcsIHNjb3BlKSB7XG4gICAgY3VycmVudEtleUV2ZW50ID0gZXZlbnQ7XG4gICAgbGV0IG5hbWUgPSBrZXlOYW1lKGV2ZW50KTtcbiAgICBsZXQgY2hhckNvZGUgPSBjb2RlUG9pbnRBdChuYW1lLCAwKSwgaXNDaGFyID0gY29kZVBvaW50U2l6ZShjaGFyQ29kZSkgPT0gbmFtZS5sZW5ndGggJiYgbmFtZSAhPSBcIiBcIjtcbiAgICBsZXQgcHJlZml4ID0gXCJcIiwgaGFuZGxlZCA9IGZhbHNlLCBwcmV2ZW50ZWQgPSBmYWxzZSwgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2U7XG4gICAgaWYgKHN0b3JlZFByZWZpeCAmJiBzdG9yZWRQcmVmaXgudmlldyA9PSB2aWV3ICYmIHN0b3JlZFByZWZpeC5zY29wZSA9PSBzY29wZSkge1xuICAgICAgICBwcmVmaXggPSBzdG9yZWRQcmVmaXgucHJlZml4ICsgXCIgXCI7XG4gICAgICAgIGlmIChtb2RpZmllckNvZGVzLmluZGV4T2YoZXZlbnQua2V5Q29kZSkgPCAwKSB7XG4gICAgICAgICAgICBwcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RvcmVkUHJlZml4ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmFuID0gbmV3IFNldDtcbiAgICBsZXQgcnVuRm9yID0gKGJpbmRpbmcpID0+IHtcbiAgICAgICAgaWYgKGJpbmRpbmcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNtZCBvZiBiaW5kaW5nLnJ1bilcbiAgICAgICAgICAgICAgICBpZiAoIXJhbi5oYXMoY21kKSkge1xuICAgICAgICAgICAgICAgICAgICByYW4uYWRkKGNtZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWQodmlldykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZGluZy5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGxldCBzY29wZU9iaiA9IG1hcFtzY29wZV0sIGJhc2VOYW1lLCBzaGlmdE5hbWU7XG4gICAgaWYgKHNjb3BlT2JqKSB7XG4gICAgICAgIGlmIChydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKG5hbWUsIGV2ZW50LCAhaXNDaGFyKV0pKSB7XG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0NoYXIgJiYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICAgICAvLyBDdHJsLUFsdCBtYXkgYmUgdXNlZCBmb3IgQWx0R3Igb24gV2luZG93c1xuICAgICAgICAgICAgIShicm93c2VyLndpbmRvd3MgJiYgZXZlbnQuY3RybEtleSAmJiBldmVudC5hbHRLZXkpICYmXG4gICAgICAgICAgICAvLyBBbHQtY29tYmluYXRpb25zIG9uIG1hY09TIHRlbmQgdG8gYmUgdHlwZWQgY2hhcmFjdGVyc1xuICAgICAgICAgICAgIShicm93c2VyLm1hYyAmJiBldmVudC5hbHRLZXkgJiYgIWV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICAgICAoYmFzZU5hbWUgPSBiYXNlW2V2ZW50LmtleUNvZGVdKSAmJiBiYXNlTmFtZSAhPSBuYW1lKSB7XG4gICAgICAgICAgICBpZiAocnVuRm9yKHNjb3BlT2JqW3ByZWZpeCArIG1vZGlmaWVycyhiYXNlTmFtZSwgZXZlbnQsIHRydWUpXSkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIChzaGlmdE5hbWUgPSBzaGlmdFtldmVudC5rZXlDb2RlXSkgIT0gbmFtZSAmJiBzaGlmdE5hbWUgIT0gYmFzZU5hbWUgJiZcbiAgICAgICAgICAgICAgICBydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKHNoaWZ0TmFtZSwgZXZlbnQsIGZhbHNlKV0pKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDaGFyICYmIGV2ZW50LnNoaWZ0S2V5ICYmXG4gICAgICAgICAgICBydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKG5hbWUsIGV2ZW50LCB0cnVlKV0pKSB7XG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhbmRsZWQgJiYgcnVuRm9yKHNjb3BlT2JqLl9hbnkpKVxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChwcmV2ZW50ZWQpXG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIGlmIChoYW5kbGVkICYmIHN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY3VycmVudEtleUV2ZW50ID0gbnVsbDtcbiAgICByZXR1cm4gaGFuZGxlZDtcbn1cblxuLyoqXG5JbXBsZW1lbnRhdGlvbiBvZiBbYExheWVyTWFya2VyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkxheWVyTWFya2VyKSB0aGF0IGNyZWF0ZXNcbmEgcmVjdGFuZ2xlIGF0IGEgZ2l2ZW4gc2V0IG9mIGNvb3JkaW5hdGVzLlxuKi9cbmNsYXNzIFJlY3RhbmdsZU1hcmtlciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWFya2VyIHdpdGggdGhlIGdpdmVuIGNsYXNzIGFuZCBkaW1lbnNpb25zLiBJZiBgd2lkdGhgXG4gICAgaXMgbnVsbCwgdGhlIERPTSBlbGVtZW50IHdpbGwgZ2V0IG5vIHdpZHRoIHN0eWxlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY2xhc3NOYW1lLCBcbiAgICAvKipcbiAgICBUaGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyIChpbiBwaXhlbHMsIGRvY3VtZW50LXJlbGF0aXZlKS5cbiAgICAqL1xuICAgIGxlZnQsIFxuICAgIC8qKlxuICAgIFRoZSB0b3AgcG9zaXRpb24gb2YgdGhlIG1hcmtlci5cbiAgICAqL1xuICAgIHRvcCwgXG4gICAgLyoqXG4gICAgVGhlIHdpZHRoIG9mIHRoZSBtYXJrZXIsIG9yIG51bGwgaWYgaXQgc2hvdWxkbid0IGdldCBhIHdpZHRoIGFzc2lnbmVkLlxuICAgICovXG4gICAgd2lkdGgsIFxuICAgIC8qKlxuICAgIFRoZSBoZWlnaHQgb2YgdGhlIG1hcmtlci5cbiAgICAqL1xuICAgIGhlaWdodCkge1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIGRyYXcoKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWU7XG4gICAgICAgIHRoaXMuYWRqdXN0KGVsdCk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuICAgIHVwZGF0ZShlbHQsIHByZXYpIHtcbiAgICAgICAgaWYgKHByZXYuY2xhc3NOYW1lICE9IHRoaXMuY2xhc3NOYW1lKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLmFkanVzdChlbHQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYWRqdXN0KGVsdCkge1xuICAgICAgICBlbHQuc3R5bGUubGVmdCA9IHRoaXMubGVmdCArIFwicHhcIjtcbiAgICAgICAgZWx0LnN0eWxlLnRvcCA9IHRoaXMudG9wICsgXCJweFwiO1xuICAgICAgICBpZiAodGhpcy53aWR0aCAhPSBudWxsKVxuICAgICAgICAgICAgZWx0LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwicHhcIjtcbiAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICBlcShwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQgPT0gcC5sZWZ0ICYmIHRoaXMudG9wID09IHAudG9wICYmIHRoaXMud2lkdGggPT0gcC53aWR0aCAmJiB0aGlzLmhlaWdodCA9PSBwLmhlaWdodCAmJlxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPT0gcC5jbGFzc05hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCBvZiByZWN0YW5nbGVzIGZvciB0aGUgZ2l2ZW4gc2VsZWN0aW9uIHJhbmdlLFxuICAgIGFzc2lnbmluZyB0aGVtIHRoZWNsYXNzYGNsYXNzTmFtZWAuIFdpbGwgY3JlYXRlIGEgc2luZ2xlXG4gICAgcmVjdGFuZ2xlIGZvciBlbXB0eSByYW5nZXMsIGFuZCBhIHNldCBvZiBzZWxlY3Rpb24tc3R5bGVcbiAgICByZWN0YW5nbGVzIGNvdmVyaW5nIHRoZSByYW5nZSdzIGNvbnRlbnQgKGluIGEgYmlkaS1hd2FyZVxuICAgIHdheSkgZm9yIG5vbi1lbXB0eSBvbmVzLlxuICAgICovXG4gICAgc3RhdGljIGZvclJhbmdlKHZpZXcsIGNsYXNzTmFtZSwgcmFuZ2UpIHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gdmlldy5jb29yZHNBdFBvcyhyYW5nZS5oZWFkLCByYW5nZS5hc3NvYyB8fCAxKTtcbiAgICAgICAgICAgIGlmICghcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGxldCBiYXNlID0gZ2V0QmFzZSh2aWV3KTtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IFJlY3RhbmdsZU1hcmtlcihjbGFzc05hbWUsIHBvcy5sZWZ0IC0gYmFzZS5sZWZ0LCBwb3MudG9wIC0gYmFzZS50b3AsIG51bGwsIHBvcy5ib3R0b20gLSBwb3MudG9wKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjdGFuZ2xlc0ZvclJhbmdlKHZpZXcsIGNsYXNzTmFtZSwgcmFuZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0QmFzZSh2aWV3KSB7XG4gICAgbGV0IHJlY3QgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgbGVmdCA9IHZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCAtIHZpZXcuc2Nyb2xsRE9NLmNsaWVudFdpZHRoICogdmlldy5zY2FsZVg7XG4gICAgcmV0dXJuIHsgbGVmdDogbGVmdCAtIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgKiB2aWV3LnNjYWxlWCwgdG9wOiByZWN0LnRvcCAtIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCAqIHZpZXcuc2NhbGVZIH07XG59XG5mdW5jdGlvbiB3cmFwcGVkTGluZSh2aWV3LCBwb3MsIHNpZGUsIGluc2lkZSkge1xuICAgIGxldCBjb29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKHBvcywgc2lkZSAqIDIpO1xuICAgIGlmICghY29vcmRzKVxuICAgICAgICByZXR1cm4gaW5zaWRlO1xuICAgIGxldCBlZGl0b3JSZWN0ID0gdmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHkgPSAoY29vcmRzLnRvcCArIGNvb3Jkcy5ib3R0b20pIC8gMjtcbiAgICBsZXQgbGVmdCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBlZGl0b3JSZWN0LmxlZnQgKyAxLCB5IH0pO1xuICAgIGxldCByaWdodCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBlZGl0b3JSZWN0LnJpZ2h0IC0gMSwgeSB9KTtcbiAgICBpZiAobGVmdCA9PSBudWxsIHx8IHJpZ2h0ID09IG51bGwpXG4gICAgICAgIHJldHVybiBpbnNpZGU7XG4gICAgcmV0dXJuIHsgZnJvbTogTWF0aC5tYXgoaW5zaWRlLmZyb20sIE1hdGgubWluKGxlZnQsIHJpZ2h0KSksIHRvOiBNYXRoLm1pbihpbnNpZGUudG8sIE1hdGgubWF4KGxlZnQsIHJpZ2h0KSkgfTtcbn1cbmZ1bmN0aW9uIHJlY3RhbmdsZXNGb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIHJhbmdlKSB7XG4gICAgaWYgKHJhbmdlLnRvIDw9IHZpZXcudmlld3BvcnQuZnJvbSB8fCByYW5nZS5mcm9tID49IHZpZXcudmlld3BvcnQudG8pXG4gICAgICAgIHJldHVybiBbXTtcbiAgICBsZXQgZnJvbSA9IE1hdGgubWF4KHJhbmdlLmZyb20sIHZpZXcudmlld3BvcnQuZnJvbSksIHRvID0gTWF0aC5taW4ocmFuZ2UudG8sIHZpZXcudmlld3BvcnQudG8pO1xuICAgIGxldCBsdHIgPSB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICBsZXQgY29udGVudCA9IHZpZXcuY29udGVudERPTSwgY29udGVudFJlY3QgPSBjb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBiYXNlID0gZ2V0QmFzZSh2aWV3KTtcbiAgICBsZXQgbGluZUVsdCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jbS1saW5lXCIpLCBsaW5lU3R5bGUgPSBsaW5lRWx0ICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGxpbmVFbHQpO1xuICAgIGxldCBsZWZ0U2lkZSA9IGNvbnRlbnRSZWN0LmxlZnQgK1xuICAgICAgICAobGluZVN0eWxlID8gcGFyc2VJbnQobGluZVN0eWxlLnBhZGRpbmdMZWZ0KSArIE1hdGgubWluKDAsIHBhcnNlSW50KGxpbmVTdHlsZS50ZXh0SW5kZW50KSkgOiAwKTtcbiAgICBsZXQgcmlnaHRTaWRlID0gY29udGVudFJlY3QucmlnaHQgLSAobGluZVN0eWxlID8gcGFyc2VJbnQobGluZVN0eWxlLnBhZGRpbmdSaWdodCkgOiAwKTtcbiAgICBsZXQgc3RhcnRCbG9jayA9IGJsb2NrQXQodmlldywgZnJvbSwgMSksIGVuZEJsb2NrID0gYmxvY2tBdCh2aWV3LCB0bywgLTEpO1xuICAgIGxldCB2aXN1YWxTdGFydCA9IHN0YXJ0QmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCA/IHN0YXJ0QmxvY2sgOiBudWxsO1xuICAgIGxldCB2aXN1YWxFbmQgPSBlbmRCbG9jay50eXBlID09IEJsb2NrVHlwZS5UZXh0ID8gZW5kQmxvY2sgOiBudWxsO1xuICAgIGlmICh2aXN1YWxTdGFydCAmJiAodmlldy5saW5lV3JhcHBpbmcgfHwgc3RhcnRCbG9jay53aWRnZXRMaW5lQnJlYWtzKSlcbiAgICAgICAgdmlzdWFsU3RhcnQgPSB3cmFwcGVkTGluZSh2aWV3LCBmcm9tLCAxLCB2aXN1YWxTdGFydCk7XG4gICAgaWYgKHZpc3VhbEVuZCAmJiAodmlldy5saW5lV3JhcHBpbmcgfHwgZW5kQmxvY2sud2lkZ2V0TGluZUJyZWFrcykpXG4gICAgICAgIHZpc3VhbEVuZCA9IHdyYXBwZWRMaW5lKHZpZXcsIHRvLCAtMSwgdmlzdWFsRW5kKTtcbiAgICBpZiAodmlzdWFsU3RhcnQgJiYgdmlzdWFsRW5kICYmIHZpc3VhbFN0YXJ0LmZyb20gPT0gdmlzdWFsRW5kLmZyb20gJiYgdmlzdWFsU3RhcnQudG8gPT0gdmlzdWFsRW5kLnRvKSB7XG4gICAgICAgIHJldHVybiBwaWVjZXMoZHJhd0ZvckxpbmUocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHZpc3VhbFN0YXJ0KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgdG9wID0gdmlzdWFsU3RhcnQgPyBkcmF3Rm9yTGluZShyYW5nZS5mcm9tLCBudWxsLCB2aXN1YWxTdGFydCkgOiBkcmF3Rm9yV2lkZ2V0KHN0YXJ0QmxvY2ssIGZhbHNlKTtcbiAgICAgICAgbGV0IGJvdHRvbSA9IHZpc3VhbEVuZCA/IGRyYXdGb3JMaW5lKG51bGwsIHJhbmdlLnRvLCB2aXN1YWxFbmQpIDogZHJhd0ZvcldpZGdldChlbmRCbG9jaywgdHJ1ZSk7XG4gICAgICAgIGxldCBiZXR3ZWVuID0gW107XG4gICAgICAgIGlmICgodmlzdWFsU3RhcnQgfHwgc3RhcnRCbG9jaykudG8gPCAodmlzdWFsRW5kIHx8IGVuZEJsb2NrKS5mcm9tIC0gKHZpc3VhbFN0YXJ0ICYmIHZpc3VhbEVuZCA/IDEgOiAwKSB8fFxuICAgICAgICAgICAgc3RhcnRCbG9jay53aWRnZXRMaW5lQnJlYWtzID4gMSAmJiB0b3AuYm90dG9tICsgdmlldy5kZWZhdWx0TGluZUhlaWdodCAvIDIgPCBib3R0b20udG9wKVxuICAgICAgICAgICAgYmV0d2Vlbi5wdXNoKHBpZWNlKGxlZnRTaWRlLCB0b3AuYm90dG9tLCByaWdodFNpZGUsIGJvdHRvbS50b3ApKTtcbiAgICAgICAgZWxzZSBpZiAodG9wLmJvdHRvbSA8IGJvdHRvbS50b3AgJiYgdmlldy5lbGVtZW50QXRIZWlnaHQoKHRvcC5ib3R0b20gKyBib3R0b20udG9wKSAvIDIpLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQpXG4gICAgICAgICAgICB0b3AuYm90dG9tID0gYm90dG9tLnRvcCA9ICh0b3AuYm90dG9tICsgYm90dG9tLnRvcCkgLyAyO1xuICAgICAgICByZXR1cm4gcGllY2VzKHRvcCkuY29uY2F0KGJldHdlZW4pLmNvbmNhdChwaWVjZXMoYm90dG9tKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBpZWNlKGxlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlY3RhbmdsZU1hcmtlcihjbGFzc05hbWUsIGxlZnQgLSBiYXNlLmxlZnQsIHRvcCAtIGJhc2UudG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBpZWNlcyh7IHRvcCwgYm90dG9tLCBob3Jpem9udGFsIH0pIHtcbiAgICAgICAgbGV0IHBpZWNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvcml6b250YWwubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICBwaWVjZXMucHVzaChwaWVjZShob3Jpem9udGFsW2ldLCB0b3AsIGhvcml6b250YWxbaSArIDFdLCBib3R0b20pKTtcbiAgICAgICAgcmV0dXJuIHBpZWNlcztcbiAgICB9XG4gICAgLy8gR2V0cyBwYXNzZWQgZnJvbS90byBpbiBsaW5lLWxvY2FsIHBvc2l0aW9uc1xuICAgIGZ1bmN0aW9uIGRyYXdGb3JMaW5lKGZyb20sIHRvLCBsaW5lKSB7XG4gICAgICAgIGxldCB0b3AgPSAxZTksIGJvdHRvbSA9IC0xZTksIGhvcml6b250YWwgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkU3Bhbihmcm9tLCBmcm9tT3BlbiwgdG8sIHRvT3BlbiwgZGlyKSB7XG4gICAgICAgICAgICAvLyBQYXNzaW5nIDIvLTIgaXMgYSBrbHVkZ2UgdG8gZm9yY2UgdGhlIHZpZXcgdG8gcmV0dXJuXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBvbiB0aGUgcHJvcGVyIHNpZGUgb2YgYmxvY2sgd2lkZ2V0cywgc2luY2VcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6aW5nIHRoZSBzaWRlIHRoZXJlLCB0aG91Z2ggYXBwcm9wcmlhdGUgZm9yIG1vc3RcbiAgICAgICAgICAgIC8vIGNvb3Jkc0F0UG9zIHF1ZXJpZXMsIHdvdWxkIGJyZWFrIHNlbGVjdGlvbiBkcmF3aW5nLlxuICAgICAgICAgICAgbGV0IGZyb21Db29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKGZyb20sIChmcm9tID09IGxpbmUudG8gPyAtMiA6IDIpKTtcbiAgICAgICAgICAgIGxldCB0b0Nvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3ModG8sICh0byA9PSBsaW5lLmZyb20gPyAyIDogLTIpKTtcbiAgICAgICAgICAgIGlmICghZnJvbUNvb3JkcyB8fCAhdG9Db29yZHMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdG9wID0gTWF0aC5taW4oZnJvbUNvb3Jkcy50b3AsIHRvQ29vcmRzLnRvcCwgdG9wKTtcbiAgICAgICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KGZyb21Db29yZHMuYm90dG9tLCB0b0Nvb3Jkcy5ib3R0b20sIGJvdHRvbSk7XG4gICAgICAgICAgICBpZiAoZGlyID09IERpcmVjdGlvbi5MVFIpXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbC5wdXNoKGx0ciAmJiBmcm9tT3BlbiA/IGxlZnRTaWRlIDogZnJvbUNvb3Jkcy5sZWZ0LCBsdHIgJiYgdG9PcGVuID8gcmlnaHRTaWRlIDogdG9Db29yZHMucmlnaHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGhvcml6b250YWwucHVzaCghbHRyICYmIHRvT3BlbiA/IGxlZnRTaWRlIDogdG9Db29yZHMubGVmdCwgIWx0ciAmJiBmcm9tT3BlbiA/IHJpZ2h0U2lkZSA6IGZyb21Db29yZHMucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydCA9IGZyb20gIT09IG51bGwgJiYgZnJvbSAhPT0gdm9pZCAwID8gZnJvbSA6IGxpbmUuZnJvbSwgZW5kID0gdG8gIT09IG51bGwgJiYgdG8gIT09IHZvaWQgMCA/IHRvIDogbGluZS50bztcbiAgICAgICAgLy8gU3BsaXQgdGhlIHJhbmdlIGJ5IHZpc2libGUgcmFuZ2UgYW5kIGRvY3VtZW50IGxpbmVcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnZpc2libGVSYW5nZXMpXG4gICAgICAgICAgICBpZiAoci50byA+IHN0YXJ0ICYmIHIuZnJvbSA8IGVuZCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IE1hdGgubWF4KHIuZnJvbSwgc3RhcnQpLCBlbmRQb3MgPSBNYXRoLm1pbihyLnRvLCBlbmQpOzspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvY0xpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3BhbiBvZiB2aWV3LmJpZGlTcGFucyhkb2NMaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwYW5Gcm9tID0gc3Bhbi5mcm9tICsgZG9jTGluZS5mcm9tLCBzcGFuVG8gPSBzcGFuLnRvICsgZG9jTGluZS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW5Gcm9tID49IGVuZFBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGFuVG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3BhbihNYXRoLm1heChzcGFuRnJvbSwgcG9zKSwgZnJvbSA9PSBudWxsICYmIHNwYW5Gcm9tIDw9IHN0YXJ0LCBNYXRoLm1pbihzcGFuVG8sIGVuZFBvcyksIHRvID09IG51bGwgJiYgc3BhblRvID49IGVuZCwgc3Bhbi5kaXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGRvY0xpbmUudG8gKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID49IGVuZFBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGhvcml6b250YWwubGVuZ3RoID09IDApXG4gICAgICAgICAgICBhZGRTcGFuKHN0YXJ0LCBmcm9tID09IG51bGwsIGVuZCwgdG8gPT0gbnVsbCwgdmlldy50ZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHsgdG9wLCBib3R0b20sIGhvcml6b250YWwgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZHJhd0ZvcldpZGdldChibG9jaywgdG9wKSB7XG4gICAgICAgIGxldCB5ID0gY29udGVudFJlY3QudG9wICsgKHRvcCA/IGJsb2NrLnRvcCA6IGJsb2NrLmJvdHRvbSk7XG4gICAgICAgIHJldHVybiB7IHRvcDogeSwgYm90dG9tOiB5LCBob3Jpem9udGFsOiBbXSB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVNYXJrZXIoYSwgYikge1xuICAgIHJldHVybiBhLmNvbnN0cnVjdG9yID09IGIuY29uc3RydWN0b3IgJiYgYS5lcShiKTtcbn1cbmNsYXNzIExheWVyVmlldyB7XG4gICAgY29uc3RydWN0b3IodmlldywgbGF5ZXIpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLmRyYXduID0gW107XG4gICAgICAgIHRoaXMuc2NhbGVYID0gMTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSAxO1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXEgPSB7IHJlYWQ6IHRoaXMubWVhc3VyZS5iaW5kKHRoaXMpLCB3cml0ZTogdGhpcy5kcmF3LmJpbmQodGhpcykgfTtcbiAgICAgICAgdGhpcy5kb20gPSB2aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LmFkZChcImNtLWxheWVyXCIpO1xuICAgICAgICBpZiAobGF5ZXIuYWJvdmUpXG4gICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tbGF5ZXItYWJvdmVcIik7XG4gICAgICAgIGlmIChsYXllci5jbGFzcylcbiAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQobGF5ZXIuY2xhc3MpO1xuICAgICAgICB0aGlzLnNjYWxlKCk7XG4gICAgICAgIHRoaXMuZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdGhpcy5zZXRPcmRlcih2aWV3LnN0YXRlKTtcbiAgICAgICAgdmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICBpZiAobGF5ZXIubW91bnQpXG4gICAgICAgICAgICBsYXllci5tb3VudCh0aGlzLmRvbSwgdmlldyk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxheWVyT3JkZXIpICE9IHVwZGF0ZS5zdGF0ZS5mYWNldChsYXllck9yZGVyKSlcbiAgICAgICAgICAgIHRoaXMuc2V0T3JkZXIodXBkYXRlLnN0YXRlKTtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXIudXBkYXRlKHVwZGF0ZSwgdGhpcy5kb20pIHx8IHVwZGF0ZS5nZW9tZXRyeUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUoKTtcbiAgICAgICAgICAgIHVwZGF0ZS52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9jVmlld1VwZGF0ZSh2aWV3KSB7XG4gICAgICAgIGlmICh0aGlzLmxheWVyLnVwZGF0ZU9uRG9jVmlld1VwZGF0ZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICB2aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMubWVhc3VyZVJlcSk7XG4gICAgfVxuICAgIHNldE9yZGVyKHN0YXRlKSB7XG4gICAgICAgIGxldCBwb3MgPSAwLCBvcmRlciA9IHN0YXRlLmZhY2V0KGxheWVyT3JkZXIpO1xuICAgICAgICB3aGlsZSAocG9zIDwgb3JkZXIubGVuZ3RoICYmIG9yZGVyW3Bvc10gIT0gdGhpcy5sYXllcilcbiAgICAgICAgICAgIHBvcysrO1xuICAgICAgICB0aGlzLmRvbS5zdHlsZS56SW5kZXggPSBTdHJpbmcoKHRoaXMubGF5ZXIuYWJvdmUgPyAxNTAgOiAtMSkgLSBwb3MpO1xuICAgIH1cbiAgICBtZWFzdXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllci5tYXJrZXJzKHRoaXMudmlldyk7XG4gICAgfVxuICAgIHNjYWxlKCkge1xuICAgICAgICBsZXQgeyBzY2FsZVgsIHNjYWxlWSB9ID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoc2NhbGVYICE9IHRoaXMuc2NhbGVYIHx8IHNjYWxlWSAhPSB0aGlzLnNjYWxlWSkge1xuICAgICAgICAgICAgdGhpcy5zY2FsZVggPSBzY2FsZVg7XG4gICAgICAgICAgICB0aGlzLnNjYWxlWSA9IHNjYWxlWTtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZSgkezEgLyBzY2FsZVh9LCAkezEgLyBzY2FsZVl9KWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhdyhtYXJrZXJzKSB7XG4gICAgICAgIGlmIChtYXJrZXJzLmxlbmd0aCAhPSB0aGlzLmRyYXduLmxlbmd0aCB8fCBtYXJrZXJzLnNvbWUoKHAsIGkpID0+ICFzYW1lTWFya2VyKHAsIHRoaXMuZHJhd25baV0pKSkge1xuICAgICAgICAgICAgbGV0IG9sZCA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQsIG9sZEkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgbWFya2VyIG9mIG1hcmtlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAobWFya2VyLnVwZGF0ZSAmJiBvbGQgJiYgbWFya2VyLmNvbnN0cnVjdG9yICYmIHRoaXMuZHJhd25bb2xkSV0uY29uc3RydWN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLnVwZGF0ZShvbGQsIHRoaXMuZHJhd25bb2xkSV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZCA9IG9sZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgb2xkSSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uaW5zZXJ0QmVmb3JlKG1hcmtlci5kcmF3KCksIG9sZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKG9sZCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gb2xkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIG9sZC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBvbGQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3biA9IG1hcmtlcnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXIuZGVzdHJveSlcbiAgICAgICAgICAgIHRoaXMubGF5ZXIuZGVzdHJveSh0aGlzLmRvbSwgdGhpcy52aWV3KTtcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgfVxufVxuY29uc3QgbGF5ZXJPcmRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRGVmaW5lIGEgbGF5ZXIuXG4qL1xuZnVuY3Rpb24gbGF5ZXIoY29uZmlnKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgVmlld1BsdWdpbi5kZWZpbmUodiA9PiBuZXcgTGF5ZXJWaWV3KHYsIGNvbmZpZykpLFxuICAgICAgICBsYXllck9yZGVyLm9mKGNvbmZpZylcbiAgICBdO1xufVxuXG5jb25zdCBzZWxlY3Rpb25Db25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgY3Vyc29yQmxpbmtSYXRlOiAxMjAwLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiB0cnVlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGN1cnNvckJsaW5rUmF0ZTogKGEsIGIpID0+IE1hdGgubWluKGEsIGIpLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiAoYSwgYikgPT4gYSB8fCBiXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGhpZGVzIHRoZSBicm93c2VyJ3MgbmF0aXZlIHNlbGVjdGlvbiBhbmRcbmN1cnNvciwgcmVwbGFjaW5nIHRoZSBzZWxlY3Rpb24gd2l0aCBhIGJhY2tncm91bmQgYmVoaW5kIHRoZSB0ZXh0XG4od2l0aCB0aGUgYGNtLXNlbGVjdGlvbkJhY2tncm91bmRgIGNsYXNzKSwgYW5kIHRoZVxuY3Vyc29ycyB3aXRoIGVsZW1lbnRzIG92ZXJsYWlkIG92ZXIgdGhlIGNvZGUgKHVzaW5nXG5gY20tY3Vyc29yLXByaW1hcnlgIGFuZCBgY20tY3Vyc29yLXNlY29uZGFyeWApLlxuXG5UaGlzIGFsbG93cyB0aGUgZWRpdG9yIHRvIGRpc3BsYXkgc2Vjb25kYXJ5IHNlbGVjdGlvbiByYW5nZXMsIGFuZFxudGVuZHMgdG8gcHJvZHVjZSBhIHR5cGUgb2Ygc2VsZWN0aW9uIG1vcmUgaW4gbGluZSB3aXRoIHRoYXQgdXNlcnNcbmV4cGVjdCBpbiBhIHRleHQgZWRpdG9yICh0aGUgbmF0aXZlIHNlbGVjdGlvbiBzdHlsaW5nIHdpbGwgb2Z0ZW5cbmxlYXZlIGdhcHMgYmV0d2VlbiBsaW5lcyBhbmQgd29uJ3QgZmlsbCB0aGUgaG9yaXpvbnRhbCBzcGFjZSBhZnRlclxuYSBsaW5lIHdoZW4gdGhlIHNlbGVjdGlvbiBjb250aW51ZXMgcGFzdCBpdCkuXG5cbkl0IGRvZXMgaGF2ZSBhIHBlcmZvcm1hbmNlIGNvc3QsIGluIHRoYXQgaXQgcmVxdWlyZXMgYW4gZXh0cmEgRE9NXG5sYXlvdXQgY3ljbGUgZm9yIG1hbnkgdXBkYXRlcyAodGhlIHNlbGVjdGlvbiBpcyBkcmF3biBiYXNlZCBvbiBET01cbmxheW91dCBpbmZvcm1hdGlvbiB0aGF0J3Mgb25seSBhdmFpbGFibGUgYWZ0ZXIgbGF5aW5nIG91dCB0aGVcbmNvbnRlbnQpLlxuKi9cbmZ1bmN0aW9uIGRyYXdTZWxlY3Rpb24oY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBzZWxlY3Rpb25Db25maWcub2YoY29uZmlnKSxcbiAgICAgICAgY3Vyc29yTGF5ZXIsXG4gICAgICAgIHNlbGVjdGlvbkxheWVyLFxuICAgICAgICBoaWRlTmF0aXZlU2VsZWN0aW9uLFxuICAgICAgICBuYXRpdmVTZWxlY3Rpb25IaWRkZW4ub2YodHJ1ZSlcbiAgICBdO1xufVxuLyoqXG5SZXRyaWV2ZSB0aGUgW2BkcmF3U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pIGNvbmZpZ3VyYXRpb25cbmZvciB0aGlzIHN0YXRlLiAoTm90ZSB0aGF0IHRoaXMgd2lsbCByZXR1cm4gYSBzZXQgb2YgZGVmYXVsdHMgZXZlblxuaWYgYGRyYXdTZWxlY3Rpb25gIGlzbid0IGVuYWJsZWQuKVxuKi9cbmZ1bmN0aW9uIGdldERyYXdTZWxlY3Rpb25Db25maWcoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbn1cbmZ1bmN0aW9uIGNvbmZpZ0NoYW5nZWQodXBkYXRlKSB7XG4gICAgcmV0dXJuIHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZykgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZyk7XG59XG5jb25zdCBjdXJzb3JMYXllciA9IC8qQF9fUFVSRV9fKi9sYXllcih7XG4gICAgYWJvdmU6IHRydWUsXG4gICAgbWFya2Vycyh2aWV3KSB7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjb25mID0gc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbiAgICAgICAgbGV0IGN1cnNvcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgcHJpbSA9IHIgPT0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgICAgICBpZiAoci5lbXB0eSB8fCBjb25mLmRyYXdSYW5nZUN1cnNvcikge1xuICAgICAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBwcmltID8gXCJjbS1jdXJzb3IgY20tY3Vyc29yLXByaW1hcnlcIiA6IFwiY20tY3Vyc29yIGNtLWN1cnNvci1zZWNvbmRhcnlcIjtcbiAgICAgICAgICAgICAgICBsZXQgY3Vyc29yID0gci5lbXB0eSA/IHIgOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHIuaGVhZCwgci5oZWFkID4gci5hbmNob3IgPyAtMSA6IDEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHBpZWNlIG9mIFJlY3RhbmdsZU1hcmtlci5mb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIGN1cnNvcikpXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcnMucHVzaChwaWVjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnNvcnM7XG4gICAgfSxcbiAgICB1cGRhdGUodXBkYXRlLCBkb20pIHtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgZG9tLnN0eWxlLmFuaW1hdGlvbk5hbWUgPSBkb20uc3R5bGUuYW5pbWF0aW9uTmFtZSA9PSBcImNtLWJsaW5rXCIgPyBcImNtLWJsaW5rMlwiIDogXCJjbS1ibGlua1wiO1xuICAgICAgICBsZXQgY29uZkNoYW5nZSA9IGNvbmZpZ0NoYW5nZWQodXBkYXRlKTtcbiAgICAgICAgaWYgKGNvbmZDaGFuZ2UpXG4gICAgICAgICAgICBzZXRCbGlua1JhdGUodXBkYXRlLnN0YXRlLCBkb20pO1xuICAgICAgICByZXR1cm4gdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCB8fCBjb25mQ2hhbmdlO1xuICAgIH0sXG4gICAgbW91bnQoZG9tLCB2aWV3KSB7XG4gICAgICAgIHNldEJsaW5rUmF0ZSh2aWV3LnN0YXRlLCBkb20pO1xuICAgIH0sXG4gICAgY2xhc3M6IFwiY20tY3Vyc29yTGF5ZXJcIlxufSk7XG5mdW5jdGlvbiBzZXRCbGlua1JhdGUoc3RhdGUsIGRvbSkge1xuICAgIGRvbS5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IHN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZykuY3Vyc29yQmxpbmtSYXRlICsgXCJtc1wiO1xufVxuY29uc3Qgc2VsZWN0aW9uTGF5ZXIgPSAvKkBfX1BVUkVfXyovbGF5ZXIoe1xuICAgIGFib3ZlOiBmYWxzZSxcbiAgICBtYXJrZXJzKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5tYXAociA9PiByLmVtcHR5ID8gW10gOiBSZWN0YW5nbGVNYXJrZXIuZm9yUmFuZ2UodmlldywgXCJjbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCIsIHIpKVxuICAgICAgICAgICAgLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpO1xuICAgIH0sXG4gICAgdXBkYXRlKHVwZGF0ZSwgZG9tKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHwgY29uZmlnQ2hhbmdlZCh1cGRhdGUpO1xuICAgIH0sXG4gICAgY2xhc3M6IFwiY20tc2VsZWN0aW9uTGF5ZXJcIlxufSk7XG5jb25zdCBoaWRlTmF0aXZlU2VsZWN0aW9uID0gLypAX19QVVJFX18qL1ByZWMuaGlnaGVzdCgvKkBfX1BVUkVfXyovRWRpdG9yVmlldy50aGVtZSh7XG4gICAgXCIuY20tbGluZVwiOiB7XG4gICAgICAgIFwiJiA6OnNlbGVjdGlvbiwgJjo6c2VsZWN0aW9uXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50ICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBjYXJldENvbG9yOiBcInRyYW5zcGFyZW50ICFpbXBvcnRhbnRcIlxuICAgIH0sXG4gICAgXCIuY20tY29udGVudFwiOiB7XG4gICAgICAgIGNhcmV0Q29sb3I6IFwidHJhbnNwYXJlbnQgIWltcG9ydGFudFwiLFxuICAgICAgICBcIiYgOmZvY3VzXCI6IHtcbiAgICAgICAgICAgIGNhcmV0Q29sb3I6IFwiaW5pdGlhbCAhaW1wb3J0YW50XCIsXG4gICAgICAgICAgICBcIiY6OnNlbGVjdGlvbiwgJiA6OnNlbGVjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIkhpZ2hsaWdodCAhaW1wb3J0YW50XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKTtcblxuY29uc3Qgc2V0RHJvcEN1cnNvclBvcyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoe1xuICAgIG1hcChwb3MsIG1hcHBpbmcpIHsgcmV0dXJuIHBvcyA9PSBudWxsID8gbnVsbCA6IG1hcHBpbmcubWFwUG9zKHBvcyk7IH1cbn0pO1xuY29uc3QgZHJvcEN1cnNvclBvcyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICB1cGRhdGUocG9zLCB0cikge1xuICAgICAgICBpZiAocG9zICE9IG51bGwpXG4gICAgICAgICAgICBwb3MgPSB0ci5jaGFuZ2VzLm1hcFBvcyhwb3MpO1xuICAgICAgICByZXR1cm4gdHIuZWZmZWN0cy5yZWR1Y2UoKHBvcywgZSkgPT4gZS5pcyhzZXREcm9wQ3Vyc29yUG9zKSA/IGUudmFsdWUgOiBwb3MsIHBvcyk7XG4gICAgfVxufSk7XG5jb25zdCBkcmF3RHJvcEN1cnNvciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmN1cnNvciA9IG51bGw7XG4gICAgICAgIHRoaXMubWVhc3VyZVJlcSA9IHsgcmVhZDogdGhpcy5yZWFkUG9zLmJpbmQodGhpcyksIHdyaXRlOiB0aGlzLmRyYXdDdXJzb3IuYmluZCh0aGlzKSB9O1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGN1cnNvclBvcyA9IHVwZGF0ZS5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKTtcbiAgICAgICAgaWYgKGN1cnNvclBvcyA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuY3Vyc29yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnNvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy52aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5jbGFzc05hbWUgPSBcImNtLWRyb3BDdXJzb3JcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKSAhPSBjdXJzb3JQb3MgfHwgdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZClcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkUG9zKCkge1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzO1xuICAgICAgICBsZXQgcG9zID0gdmlldy5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKTtcbiAgICAgICAgbGV0IHJlY3QgPSBwb3MgIT0gbnVsbCAmJiB2aWV3LmNvb3Jkc0F0UG9zKHBvcyk7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgb3V0ZXIgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCAtIG91dGVyLmxlZnQgKyB2aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ICogdmlldy5zY2FsZVgsXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wIC0gb3V0ZXIudG9wICsgdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wICogdmlldy5zY2FsZVksXG4gICAgICAgICAgICBoZWlnaHQ6IHJlY3QuYm90dG9tIC0gcmVjdC50b3BcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHJhd0N1cnNvcihwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yKSB7XG4gICAgICAgICAgICBsZXQgeyBzY2FsZVgsIHNjYWxlWSB9ID0gdGhpcy52aWV3O1xuICAgICAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLmxlZnQgPSBwb3MubGVmdCAvIHNjYWxlWCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS50b3AgPSBwb3MudG9wIC8gc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLmhlaWdodCA9IHBvcy5oZWlnaHQgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS5sZWZ0ID0gXCItMTAwMDAwcHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3IpXG4gICAgICAgICAgICB0aGlzLmN1cnNvci5yZW1vdmUoKTtcbiAgICB9XG4gICAgc2V0RHJvcFBvcyhwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMudmlldy5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKSAhPSBwb3MpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXREcm9wQ3Vyc29yUG9zLm9mKHBvcykgfSk7XG4gICAgfVxufSwge1xuICAgIGV2ZW50T2JzZXJ2ZXJzOiB7XG4gICAgICAgIGRyYWdvdmVyKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldERyb3BQb3ModGhpcy52aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWdsZWF2ZShldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSB0aGlzLnZpZXcuY29udGVudERPTSB8fCAhdGhpcy52aWV3LmNvbnRlbnRET00uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcmFnZW5kKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcm9wKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vKipcbkRyYXdzIGEgY3Vyc29yIGF0IHRoZSBjdXJyZW50IGRyb3AgcG9zaXRpb24gd2hlbiBzb21ldGhpbmcgaXNcbmRyYWdnZWQgb3ZlciB0aGUgZWRpdG9yLlxuKi9cbmZ1bmN0aW9uIGRyb3BDdXJzb3IoKSB7XG4gICAgcmV0dXJuIFtkcm9wQ3Vyc29yUG9zLCBkcmF3RHJvcEN1cnNvcl07XG59XG5cbmZ1bmN0aW9uIGl0ZXJNYXRjaGVzKGRvYywgcmUsIGZyb20sIHRvLCBmKSB7XG4gICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBjdXJzb3IgPSBkb2MuaXRlclJhbmdlKGZyb20sIHRvKSwgcG9zID0gZnJvbSwgbTsgIWN1cnNvci5uZXh0KCkuZG9uZTsgcG9zICs9IGN1cnNvci52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFjdXJzb3IubGluZUJyZWFrKVxuICAgICAgICAgICAgd2hpbGUgKG0gPSByZS5leGVjKGN1cnNvci52YWx1ZSkpXG4gICAgICAgICAgICAgICAgZihwb3MgKyBtLmluZGV4LCBtKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaFJhbmdlcyh2aWV3LCBtYXhMZW5ndGgpIHtcbiAgICBsZXQgdmlzaWJsZSA9IHZpZXcudmlzaWJsZVJhbmdlcztcbiAgICBpZiAodmlzaWJsZS5sZW5ndGggPT0gMSAmJiB2aXNpYmxlWzBdLmZyb20gPT0gdmlldy52aWV3cG9ydC5mcm9tICYmXG4gICAgICAgIHZpc2libGVbMF0udG8gPT0gdmlldy52aWV3cG9ydC50bylcbiAgICAgICAgcmV0dXJuIHZpc2libGU7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiB2aXNpYmxlKSB7XG4gICAgICAgIGZyb20gPSBNYXRoLm1heCh2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSkuZnJvbSwgZnJvbSAtIG1heExlbmd0aCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odmlldy5zdGF0ZS5kb2MubGluZUF0KHRvKS50bywgdG8gKyBtYXhMZW5ndGgpO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID49IGZyb20pXG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID0gdG87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkhlbHBlciBjbGFzcyB1c2VkIHRvIG1ha2UgaXQgZWFzaWVyIHRvIG1haW50YWluIGRlY29yYXRpb25zIG9uXG52aXNpYmxlIGNvZGUgdGhhdCBtYXRjaGVzIGEgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9uLiBUbyBiZSB1c2VkXG5pbiBhIFt2aWV3IHBsdWdpbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4pLiBJbnN0YW5jZXMgb2YgdGhpcyBvYmplY3RcbnJlcHJlc2VudCBhIG1hdGNoaW5nIGNvbmZpZ3VyYXRpb24uXG4qL1xuY2xhc3MgTWF0Y2hEZWNvcmF0b3Ige1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGRlY29yYXRvci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBjb25zdCB7IHJlZ2V4cCwgZGVjb3JhdGlvbiwgZGVjb3JhdGUsIGJvdW5kYXJ5LCBtYXhMZW5ndGggPSAxMDAwIH0gPSBjb25maWc7XG4gICAgICAgIGlmICghcmVnZXhwLmdsb2JhbClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiB0byBNYXRjaERlY29yYXRvciBzaG91bGQgaGF2ZSBpdHMgJ2cnIGZsYWcgc2V0XCIpO1xuICAgICAgICB0aGlzLnJlZ2V4cCA9IHJlZ2V4cDtcbiAgICAgICAgaWYgKGRlY29yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCB2aWV3LCBmcm9tLCBhZGQpID0+IGRlY29yYXRlKGFkZCwgZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgbWF0Y2gsIHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkZWNvcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5hZGRNYXRjaCA9IChtYXRjaCwgdmlldywgZnJvbSwgYWRkKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlY28gPSBkZWNvcmF0aW9uKG1hdGNoLCB2aWV3LCBmcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjbylcbiAgICAgICAgICAgICAgICAgICAgYWRkKGZyb20sIGZyb20gKyBtYXRjaFswXS5sZW5ndGgsIGRlY28pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWNvcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCBfdmlldywgZnJvbSwgYWRkKSA9PiBhZGQoZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgZGVjb3JhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkVpdGhlciAnZGVjb3JhdGUnIG9yICdkZWNvcmF0aW9uJyBzaG91bGQgYmUgcHJvdmlkZWQgdG8gTWF0Y2hEZWNvcmF0b3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ib3VuZGFyeSA9IGJvdW5kYXJ5O1xuICAgICAgICB0aGlzLm1heExlbmd0aCA9IG1heExlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcHV0ZSB0aGUgZnVsbCBzZXQgb2YgZGVjb3JhdGlvbnMgZm9yIG1hdGNoZXMgaW4gdGhlIGdpdmVuXG4gICAgdmlldydzIHZpZXdwb3J0LiBZb3UnbGwgd2FudCB0byBjYWxsIHRoaXMgd2hlbiBpbml0aWFsaXppbmcgeW91clxuICAgIHBsdWdpbi5cbiAgICAqL1xuICAgIGNyZWF0ZURlY28odmlldykge1xuICAgICAgICBsZXQgYnVpbGQgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCksIGFkZCA9IGJ1aWxkLmFkZC5iaW5kKGJ1aWxkKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIG1hdGNoUmFuZ2VzKHZpZXcsIHRoaXMubWF4TGVuZ3RoKSlcbiAgICAgICAgICAgIGl0ZXJNYXRjaGVzKHZpZXcuc3RhdGUuZG9jLCB0aGlzLnJlZ2V4cCwgZnJvbSwgdG8sIChmcm9tLCBtKSA9PiB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIGZyb20sIGFkZCkpO1xuICAgICAgICByZXR1cm4gYnVpbGQuZmluaXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSBhIHNldCBvZiBkZWNvcmF0aW9ucyBmb3IgYSB2aWV3IHVwZGF0ZS4gYGRlY29gIF9tdXN0XyBiZVxuICAgIHRoZSBzZXQgb2YgZGVjb3JhdGlvbnMgcHJvZHVjZWQgYnkgX3RoaXNfIGBNYXRjaERlY29yYXRvcmAgZm9yXG4gICAgdGhlIHZpZXcgc3RhdGUgYmVmb3JlIHRoZSB1cGRhdGUuXG4gICAgKi9cbiAgICB1cGRhdGVEZWNvKHVwZGF0ZSwgZGVjbykge1xuICAgICAgICBsZXQgY2hhbmdlRnJvbSA9IDFlOSwgY2hhbmdlVG8gPSAtMTtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdXBkYXRlLmNoYW5nZXMuaXRlckNoYW5nZXMoKF9mLCBfdCwgZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG8gPj0gdXBkYXRlLnZpZXcudmlld3BvcnQuZnJvbSAmJiBmcm9tIDw9IHVwZGF0ZS52aWV3LnZpZXdwb3J0LnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUZyb20gPSBNYXRoLm1pbihmcm9tLCBjaGFuZ2VGcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlVG8gPSBNYXRoLm1heCh0bywgY2hhbmdlVG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAodXBkYXRlLnZpZXdwb3J0TW92ZWQgfHwgY2hhbmdlVG8gLSBjaGFuZ2VGcm9tID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURlY28odXBkYXRlLnZpZXcpO1xuICAgICAgICBpZiAoY2hhbmdlVG8gPiAtMSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVJhbmdlKHVwZGF0ZS52aWV3LCBkZWNvLm1hcCh1cGRhdGUuY2hhbmdlcyksIGNoYW5nZUZyb20sIGNoYW5nZVRvKTtcbiAgICAgICAgcmV0dXJuIGRlY287XG4gICAgfVxuICAgIHVwZGF0ZVJhbmdlKHZpZXcsIGRlY28sIHVwZGF0ZUZyb20sIHVwZGF0ZVRvKSB7XG4gICAgICAgIGZvciAobGV0IHIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KHIuZnJvbSwgdXBkYXRlRnJvbSksIHRvID0gTWF0aC5taW4oci50bywgdXBkYXRlVG8pO1xuICAgICAgICAgICAgaWYgKHRvID49IGZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbUxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSksIHRvTGluZSA9IGZyb21MaW5lLnRvIDwgdG8gPyB2aWV3LnN0YXRlLmRvYy5saW5lQXQodG8pIDogZnJvbUxpbmU7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgoci5mcm9tLCBmcm9tTGluZS5mcm9tKSwgZW5kID0gTWF0aC5taW4oci50bywgdG9MaW5lLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZGFyeSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZnJvbSA+IGZyb21MaW5lLmZyb207IGZyb20tLSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kYXJ5LnRlc3QoZnJvbUxpbmUudGV4dFtmcm9tIC0gMSAtIGZyb21MaW5lLmZyb21dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHRvIDwgdG9MaW5lLnRvOyB0bysrKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRhcnkudGVzdCh0b0xpbmUudGV4dFt0byAtIHRvTGluZS5mcm9tXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IFtdLCBtO1xuICAgICAgICAgICAgICAgIGxldCBhZGQgPSAoZnJvbSwgdG8sIGRlY28pID0+IHJhbmdlcy5wdXNoKGRlY28ucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUxpbmUgPT0gdG9MaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IHN0YXJ0IC0gZnJvbUxpbmUuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChtID0gdGhpcy5yZWdleHAuZXhlYyhmcm9tTGluZS50ZXh0KSkgJiYgbS5pbmRleCA8IGVuZCAtIGZyb21MaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIG0uaW5kZXggKyBmcm9tTGluZS5mcm9tLCBhZGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlck1hdGNoZXModmlldy5zdGF0ZS5kb2MsIHRoaXMucmVnZXhwLCBzdGFydCwgZW5kLCAoZnJvbSwgbSkgPT4gdGhpcy5hZGRNYXRjaChtLCB2aWV3LCBmcm9tLCBhZGQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVjbyA9IGRlY28udXBkYXRlKHsgZmlsdGVyRnJvbTogc3RhcnQsIGZpbHRlclRvOiBlbmQsIGZpbHRlcjogKGZyb20sIHRvKSA9PiBmcm9tIDwgc3RhcnQgfHwgdG8gPiBlbmQsIGFkZDogcmFuZ2VzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWNvO1xuICAgIH1cbn1cblxuY29uc3QgVW5pY29kZVJlZ2V4cFN1cHBvcnQgPSAveC8udW5pY29kZSAhPSBudWxsID8gXCJndVwiIDogXCJnXCI7XG5jb25zdCBTcGVjaWFscyA9IC8qQF9fUFVSRV9fKi9uZXcgUmVnRXhwKFwiW1xcdTAwMDAtXFx1MDAwOFxcdTAwMGEtXFx1MDAxZlxcdTAwN2YtXFx1MDA5ZlxcdTAwYWRcXHUwNjFjXFx1MjAwYlxcdTIwMGVcXHUyMDBmXFx1MjAyOFxcdTIwMjlcXHUyMDJkXFx1MjAyZVxcdTIwNjZcXHUyMDY3XFx1MjA2OVxcdWZlZmZcXHVmZmY5LVxcdWZmZmNdXCIsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbmNvbnN0IE5hbWVzID0ge1xuICAgIDA6IFwibnVsbFwiLFxuICAgIDc6IFwiYmVsbFwiLFxuICAgIDg6IFwiYmFja3NwYWNlXCIsXG4gICAgMTA6IFwibmV3bGluZVwiLFxuICAgIDExOiBcInZlcnRpY2FsIHRhYlwiLFxuICAgIDEzOiBcImNhcnJpYWdlIHJldHVyblwiLFxuICAgIDI3OiBcImVzY2FwZVwiLFxuICAgIDgyMDM6IFwiemVybyB3aWR0aCBzcGFjZVwiLFxuICAgIDgyMDQ6IFwiemVybyB3aWR0aCBub24tam9pbmVyXCIsXG4gICAgODIwNTogXCJ6ZXJvIHdpZHRoIGpvaW5lclwiLFxuICAgIDgyMDY6IFwibGVmdC10by1yaWdodCBtYXJrXCIsXG4gICAgODIwNzogXCJyaWdodC10by1sZWZ0IG1hcmtcIixcbiAgICA4MjMyOiBcImxpbmUgc2VwYXJhdG9yXCIsXG4gICAgODIzNzogXCJsZWZ0LXRvLXJpZ2h0IG92ZXJyaWRlXCIsXG4gICAgODIzODogXCJyaWdodC10by1sZWZ0IG92ZXJyaWRlXCIsXG4gICAgODI5NDogXCJsZWZ0LXRvLXJpZ2h0IGlzb2xhdGVcIixcbiAgICA4Mjk1OiBcInJpZ2h0LXRvLWxlZnQgaXNvbGF0ZVwiLFxuICAgIDgyOTc6IFwicG9wIGRpcmVjdGlvbmFsIGlzb2xhdGVcIixcbiAgICA4MjMzOiBcInBhcmFncmFwaCBzZXBhcmF0b3JcIixcbiAgICA2NTI3OTogXCJ6ZXJvIHdpZHRoIG5vLWJyZWFrIHNwYWNlXCIsXG4gICAgNjU1MzI6IFwib2JqZWN0IHJlcGxhY2VtZW50XCJcbn07XG5sZXQgX3N1cHBvcnRzVGFiU2l6ZSA9IG51bGw7XG5mdW5jdGlvbiBzdXBwb3J0c1RhYlNpemUoKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChfc3VwcG9ydHNUYWJTaXplID09IG51bGwgJiYgdHlwZW9mIGRvY3VtZW50ICE9IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBsZXQgc3R5bGVzID0gZG9jdW1lbnQuYm9keS5zdHlsZTtcbiAgICAgICAgX3N1cHBvcnRzVGFiU2l6ZSA9ICgoX2EgPSBzdHlsZXMudGFiU2l6ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc3R5bGVzLk1velRhYlNpemUpICE9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBfc3VwcG9ydHNUYWJTaXplIHx8IGZhbHNlO1xufVxuY29uc3Qgc3BlY2lhbENoYXJDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgcmVuZGVyOiBudWxsLFxuICAgICAgICAgICAgc3BlY2lhbENoYXJzOiBTcGVjaWFscyxcbiAgICAgICAgICAgIGFkZFNwZWNpYWxDaGFyczogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbmZpZy5yZXBsYWNlVGFicyA9ICFzdXBwb3J0c1RhYlNpemUoKSlcbiAgICAgICAgICAgIGNvbmZpZy5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKFwiXFx0fFwiICsgY29uZmlnLnNwZWNpYWxDaGFycy5zb3VyY2UsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbiAgICAgICAgaWYgKGNvbmZpZy5hZGRTcGVjaWFsQ2hhcnMpXG4gICAgICAgICAgICBjb25maWcuc3BlY2lhbENoYXJzID0gbmV3IFJlZ0V4cChjb25maWcuc3BlY2lhbENoYXJzLnNvdXJjZSArIFwifFwiICsgY29uZmlnLmFkZFNwZWNpYWxDaGFycy5zb3VyY2UsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG59KTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBpbnN0YWxscyBoaWdobGlnaHRpbmcgb2Ygc3BlY2lhbFxuY2hhcmFjdGVycy5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRTcGVjaWFsQ2hhcnMoXG4vKipcbkNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiovXG5jb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbc3BlY2lhbENoYXJDb25maWcub2YoY29uZmlnKSwgc3BlY2lhbENoYXJQbHVnaW4oKV07XG59XG5sZXQgX3BsdWdpbiA9IG51bGw7XG5mdW5jdGlvbiBzcGVjaWFsQ2hhclBsdWdpbigpIHtcbiAgICByZXR1cm4gX3BsdWdpbiB8fCAoX3BsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRvciA9IHRoaXMubWFrZURlY29yYXRvcih2aWV3LnN0YXRlLmZhY2V0KHNwZWNpYWxDaGFyQ29uZmlnKSk7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0b3IuY3JlYXRlRGVjbyh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlRGVjb3JhdG9yKGNvbmYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0Y2hEZWNvcmF0b3Ioe1xuICAgICAgICAgICAgICAgIHJlZ2V4cDogY29uZi5zcGVjaWFsQ2hhcnMsXG4gICAgICAgICAgICAgICAgZGVjb3JhdGlvbjogKG0sIHZpZXcsIHBvcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyBkb2MgfSA9IHZpZXcuc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2RlID0gY29kZVBvaW50QXQobVswXSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemUgPSB2aWV3LnN0YXRlLnRhYlNpemUsIGNvbCA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgc2l6ZSwgcG9zIC0gbGluZS5mcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IFRhYldpZGdldCgoc2l6ZSAtIChjb2wgJSBzaXplKSkgKiB0aGlzLnZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoIC8gdGhpcy52aWV3LnNjYWxlWClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29yYXRpb25DYWNoZVtjb2RlXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGVjb3JhdGlvbkNhY2hlW2NvZGVdID0gRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiBuZXcgU3BlY2lhbENoYXJXaWRnZXQoY29uZiwgY29kZSkgfSkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm91bmRhcnk6IGNvbmYucmVwbGFjZVRhYnMgPyB1bmRlZmluZWQgOiAvW15dL1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgbGV0IGNvbmYgPSB1cGRhdGUuc3RhdGUuZmFjZXQoc3BlY2lhbENoYXJDb25maWcpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHNwZWNpYWxDaGFyQ29uZmlnKSAhPSBjb25mKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0b3IgPSB0aGlzLm1ha2VEZWNvcmF0b3IoY29uZik7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdG9yLmNyZWF0ZURlY28odXBkYXRlLnZpZXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdG9yLnVwZGF0ZURlY28odXBkYXRlLCB0aGlzLmRlY29yYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xuICAgIH0pKTtcbn1cbmNvbnN0IERlZmF1bHRQbGFjZWhvbGRlciA9IFwiXFx1MjAyMlwiO1xuLy8gQXNzaWducyBwbGFjZWhvbGRlciBjaGFyYWN0ZXJzIGZyb20gdGhlIENvbnRyb2wgUGljdHVyZXMgYmxvY2sgdG9cbi8vIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVyc1xuZnVuY3Rpb24gcGxhY2Vob2xkZXIkMShjb2RlKSB7XG4gICAgaWYgKGNvZGUgPj0gMzIpXG4gICAgICAgIHJldHVybiBEZWZhdWx0UGxhY2Vob2xkZXI7XG4gICAgaWYgKGNvZGUgPT0gMTApXG4gICAgICAgIHJldHVybiBcIlxcdTI0MjRcIjtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg5MjE2ICsgY29kZSk7XG59XG5jbGFzcyBTcGVjaWFsQ2hhcldpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvZGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLmNvZGUgPT0gdGhpcy5jb2RlOyB9XG4gICAgdG9ET00odmlldykge1xuICAgICAgICBsZXQgcGggPSBwbGFjZWhvbGRlciQxKHRoaXMuY29kZSk7XG4gICAgICAgIGxldCBkZXNjID0gdmlldy5zdGF0ZS5waHJhc2UoXCJDb250cm9sIGNoYXJhY3RlclwiKSArIFwiIFwiICsgKE5hbWVzW3RoaXMuY29kZV0gfHwgXCIweFwiICsgdGhpcy5jb2RlLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIGxldCBjdXN0b20gPSB0aGlzLm9wdGlvbnMucmVuZGVyICYmIHRoaXMub3B0aW9ucy5yZW5kZXIodGhpcy5jb2RlLCBkZXNjLCBwaCk7XG4gICAgICAgIGlmIChjdXN0b20pXG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tO1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gcGg7XG4gICAgICAgIHNwYW4udGl0bGUgPSBkZXNjO1xuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgZGVzYyk7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS1zcGVjaWFsQ2hhclwiO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuY2xhc3MgVGFiV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Iod2lkdGgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIud2lkdGggPT0gdGhpcy53aWR0aDsgfVxuICAgIHRvRE9NKCkge1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gXCJcXHRcIjtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImNtLXRhYlwiO1xuICAgICAgICBzcGFuLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwicHhcIjtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIGlnbm9yZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cblxuY29uc3QgcGx1Z2luID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxMDAwO1xuICAgICAgICB0aGlzLmF0dHJzID0geyBzdHlsZTogXCJwYWRkaW5nLWJvdHRvbTogMTAwMHB4XCIgfTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB1cGRhdGU7XG4gICAgICAgIGxldCBoZWlnaHQgPSB2aWV3LnZpZXdTdGF0ZS5lZGl0b3JIZWlnaHQgLVxuICAgICAgICAgICAgdmlldy5kZWZhdWx0TGluZUhlaWdodCAtIHZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCAtIDAuNTtcbiAgICAgICAgaWYgKGhlaWdodCA+PSAwICYmIGhlaWdodCAhPSB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJzID0geyBzdHlsZTogYHBhZGRpbmctYm90dG9tOiAke2hlaWdodH1weGAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IG1ha2VzIHN1cmUgdGhlIGNvbnRlbnQgaGFzIGEgYm90dG9tXG5tYXJnaW4gZXF1aXZhbGVudCB0byB0aGUgaGVpZ2h0IG9mIHRoZSBlZGl0b3IsIG1pbnVzIG9uZSBsaW5lXG5oZWlnaHQsIHNvIHRoYXQgZXZlcnkgbGluZSBpbiB0aGUgZG9jdW1lbnQgY2FuIGJlIHNjcm9sbGVkIHRvIHRoZVxudG9wIG9mIHRoZSBlZGl0b3IuXG5cblRoaXMgaXMgb25seSBtZWFuaW5nZnVsIHdoZW4gdGhlIGVkaXRvciBpcyBzY3JvbGxhYmxlLCBhbmQgc2hvdWxkXG5ub3QgYmUgZW5hYmxlZCBpbiBlZGl0b3JzIHRoYXQgdGFrZSB0aGUgc2l6ZSBvZiB0aGVpciBjb250ZW50LlxuKi9cbmZ1bmN0aW9uIHNjcm9sbFBhc3RFbmQoKSB7XG4gICAgcmV0dXJuIFtwbHVnaW4sIGNvbnRlbnRBdHRyaWJ1dGVzLm9mKHZpZXcgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmF0dHJzKSB8fCBudWxsOyB9KV07XG59XG5cbi8qKlxuTWFyayBsaW5lcyB0aGF0IGhhdmUgYSBjdXJzb3Igb24gdGhlbSB3aXRoIHRoZSBgXCJjbS1hY3RpdmVMaW5lXCJgXG5ET00gY2xhc3MuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0QWN0aXZlTGluZSgpIHtcbiAgICByZXR1cm4gYWN0aXZlTGluZUhpZ2hsaWdodGVyO1xufVxuY29uc3QgbGluZURlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5saW5lKHsgY2xhc3M6IFwiY20tYWN0aXZlTGluZVwiIH0pO1xuY29uc3QgYWN0aXZlTGluZUhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmdldERlY28odmlldyk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHVwZGF0ZS52aWV3KTtcbiAgICB9XG4gICAgZ2V0RGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBsYXN0TGluZVN0YXJ0ID0gLTEsIGRlY28gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChyLmhlYWQpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA+IGxhc3RMaW5lU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBkZWNvLnB1c2gobGluZURlY28ucmFuZ2UobGluZS5mcm9tKSk7XG4gICAgICAgICAgICAgICAgbGFzdExpbmVTdGFydCA9IGxpbmUuZnJvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjbyk7XG4gICAgfVxufSwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pO1xuXG5jbGFzcyBQbGFjZWhvbGRlciBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gICAgdG9ET00odmlldykge1xuICAgICAgICBsZXQgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB3cmFwLmNsYXNzTmFtZSA9IFwiY20tcGxhY2Vob2xkZXJcIjtcbiAgICAgICAgd3JhcC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQodHlwZW9mIHRoaXMuY29udGVudCA9PSBcInN0cmluZ1wiID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5jb250ZW50KSA6XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5jb250ZW50ID09IFwiZnVuY3Rpb25cIiA/IHRoaXMuY29udGVudCh2aWV3KSA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgIHdyYXAuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICByZXR1cm4gd3JhcDtcbiAgICB9XG4gICAgY29vcmRzQXQoZG9tKSB7XG4gICAgICAgIGxldCByZWN0cyA9IGRvbS5maXJzdENoaWxkID8gY2xpZW50UmVjdHNGb3IoZG9tLmZpcnN0Q2hpbGQpIDogW107XG4gICAgICAgIGlmICghcmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbS5wYXJlbnROb2RlKTtcbiAgICAgICAgbGV0IHJlY3QgPSBmbGF0dGVuUmVjdChyZWN0c1swXSwgc3R5bGUuZGlyZWN0aW9uICE9IFwicnRsXCIpO1xuICAgICAgICBsZXQgbGluZUhlaWdodCA9IHBhcnNlSW50KHN0eWxlLmxpbmVIZWlnaHQpO1xuICAgICAgICBpZiAocmVjdC5ib3R0b20gLSByZWN0LnRvcCA+IGxpbmVIZWlnaHQgKiAxLjUpXG4gICAgICAgICAgICByZXR1cm4geyBsZWZ0OiByZWN0LmxlZnQsIHJpZ2h0OiByZWN0LnJpZ2h0LCB0b3A6IHJlY3QudG9wLCBib3R0b206IHJlY3QudG9wICsgbGluZUhlaWdodCB9O1xuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuLyoqXG5FeHRlbnNpb24gdGhhdCBlbmFibGVzIGEgcGxhY2Vob2xkZXLigJRhIHBpZWNlIG9mIGV4YW1wbGUgY29udGVudFxudG8gc2hvdyB3aGVuIHRoZSBlZGl0b3IgaXMgZW1wdHkuXG4qL1xuZnVuY3Rpb24gcGxhY2Vob2xkZXIoY29udGVudCkge1xuICAgIGxldCBwbHVnaW4gPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gY29udGVudFxuICAgICAgICAgICAgICAgID8gRGVjb3JhdGlvbi5zZXQoW0RlY29yYXRpb24ud2lkZ2V0KHsgd2lkZ2V0OiBuZXcgUGxhY2Vob2xkZXIoY29udGVudCksIHNpZGU6IDEgfSkucmFuZ2UoMCldKVxuICAgICAgICAgICAgICAgIDogRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICB9XG4gICAgICAgIGdldCBkZWNvcmF0aW9ucygpIHsgcmV0dXJuIHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoID8gRGVjb3JhdGlvbi5ub25lIDogdGhpcy5wbGFjZWhvbGRlcjsgfVxuICAgIH0sIHsgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9ucyB9KTtcbiAgICByZXR1cm4gdHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIiA/IFtcbiAgICAgICAgcGx1Z2luLCBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLm9mKHsgXCJhcmlhLXBsYWNlaG9sZGVyXCI6IGNvbnRlbnQgfSlcbiAgICBdIDogcGx1Z2luO1xufVxuXG4vLyBEb24ndCBjb21wdXRlIHByZWNpc2UgY29sdW1uIHBvc2l0aW9ucyBmb3IgbGluZSBvZmZzZXRzIGFib3ZlIHRoaXNcbi8vIChzaW5jZSBpdCBjb3VsZCBnZXQgZXhwZW5zaXZlKS4gQXNzdW1lIG9mZnNldD09Y29sdW1uIGZvciB0aGVtLlxuY29uc3QgTWF4T2ZmID0gMjAwMDtcbmZ1bmN0aW9uIHJlY3RhbmdsZUZvcihzdGF0ZSwgYSwgYikge1xuICAgIGxldCBzdGFydExpbmUgPSBNYXRoLm1pbihhLmxpbmUsIGIubGluZSksIGVuZExpbmUgPSBNYXRoLm1heChhLmxpbmUsIGIubGluZSk7XG4gICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgIGlmIChhLm9mZiA+IE1heE9mZiB8fCBiLm9mZiA+IE1heE9mZiB8fCBhLmNvbCA8IDAgfHwgYi5jb2wgPCAwKSB7XG4gICAgICAgIGxldCBzdGFydE9mZiA9IE1hdGgubWluKGEub2ZmLCBiLm9mZiksIGVuZE9mZiA9IE1hdGgubWF4KGEub2ZmLCBiLm9mZik7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydExpbmU7IGkgPD0gZW5kTGluZTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lKGkpO1xuICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoIDw9IGVuZE9mZilcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24ucmFuZ2UobGluZS5mcm9tICsgc3RhcnRPZmYsIGxpbmUudG8gKyBlbmRPZmYpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHN0YXJ0Q29sID0gTWF0aC5taW4oYS5jb2wsIGIuY29sKSwgZW5kQ29sID0gTWF0aC5tYXgoYS5jb2wsIGIuY29sKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8PSBlbmRMaW5lOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmUoaSk7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBmaW5kQ29sdW1uKGxpbmUudGV4dCwgc3RhcnRDb2wsIHN0YXRlLnRhYlNpemUsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobGluZS50bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGZpbmRDb2x1bW4obGluZS50ZXh0LCBlbmRDb2wsIHN0YXRlLnRhYlNpemUpO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5yYW5nZShsaW5lLmZyb20gKyBzdGFydCwgbGluZS5mcm9tICsgZW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cbmZ1bmN0aW9uIGFic29sdXRlQ29sdW1uKHZpZXcsIHgpIHtcbiAgICBsZXQgcmVmID0gdmlldy5jb29yZHNBdFBvcyh2aWV3LnZpZXdwb3J0LmZyb20pO1xuICAgIHJldHVybiByZWYgPyBNYXRoLnJvdW5kKE1hdGguYWJzKChyZWYubGVmdCAtIHgpIC8gdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpKSA6IC0xO1xufVxuZnVuY3Rpb24gZ2V0UG9zKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IG9mZnNldCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGZhbHNlKTtcbiAgICBsZXQgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChvZmZzZXQpLCBvZmYgPSBvZmZzZXQgLSBsaW5lLmZyb207XG4gICAgbGV0IGNvbCA9IG9mZiA+IE1heE9mZiA/IC0xXG4gICAgICAgIDogb2ZmID09IGxpbmUubGVuZ3RoID8gYWJzb2x1dGVDb2x1bW4odmlldywgZXZlbnQuY2xpZW50WClcbiAgICAgICAgICAgIDogY291bnRDb2x1bW4obGluZS50ZXh0LCB2aWV3LnN0YXRlLnRhYlNpemUsIG9mZnNldCAtIGxpbmUuZnJvbSk7XG4gICAgcmV0dXJuIHsgbGluZTogbGluZS5udW1iZXIsIGNvbCwgb2ZmIH07XG59XG5mdW5jdGlvbiByZWN0YW5nbGVTZWxlY3Rpb25TdHlsZSh2aWV3LCBldmVudCkge1xuICAgIGxldCBzdGFydCA9IGdldFBvcyh2aWV3LCBldmVudCksIHN0YXJ0U2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKCFzdGFydClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1N0YXJ0ID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHVwZGF0ZS5zdGFydFN0YXRlLmRvYy5saW5lKHN0YXJ0LmxpbmUpLmZyb20pO1xuICAgICAgICAgICAgICAgIGxldCBuZXdMaW5lID0gdXBkYXRlLnN0YXRlLmRvYy5saW5lQXQobmV3U3RhcnQpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0geyBsaW5lOiBuZXdMaW5lLm51bWJlciwgY29sOiBzdGFydC5jb2wsIG9mZjogTWF0aC5taW4oc3RhcnQub2ZmLCBuZXdMaW5lLmxlbmd0aCkgfTtcbiAgICAgICAgICAgICAgICBzdGFydFNlbCA9IHN0YXJ0U2VsLm1hcCh1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldChldmVudCwgX2V4dGVuZCwgbXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSBnZXRQb3ModmlldywgZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFjdXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsO1xuICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHJlY3RhbmdsZUZvcih2aWV3LnN0YXRlLCBzdGFydCwgY3VyKTtcbiAgICAgICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRTZWw7XG4gICAgICAgICAgICBpZiAobXVsdGlwbGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLmNvbmNhdChzdGFydFNlbC5yYW5nZXMpKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgcmVjdGFuZ3VsYXIgc2VsZWN0aW9ucy4gQnlcbmRlZmF1bHQsIGl0IHdpbGwgcmVhY3QgdG8gbGVmdCBtb3VzZSBkcmFnIHdpdGggdGhlIEFsdCBrZXkgaGVsZFxuZG93bi4gV2hlbiBzdWNoIGEgc2VsZWN0aW9uIG9jY3VycywgdGhlIHRleHQgd2l0aGluIHRoZSByZWN0YW5nbGVcbnRoYXQgd2FzIGRyYWdnZWQgb3ZlciB3aWxsIGJlIHNlbGVjdGVkLCBhcyBvbmUgc2VsZWN0aW9uXG5bcmFuZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UpIHBlciBsaW5lLlxuKi9cbmZ1bmN0aW9uIHJlY3Rhbmd1bGFyU2VsZWN0aW9uKG9wdGlvbnMpIHtcbiAgICBsZXQgZmlsdGVyID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ldmVudEZpbHRlcikgfHwgKGUgPT4gZS5hbHRLZXkgJiYgZS5idXR0b24gPT0gMCk7XG4gICAgcmV0dXJuIEVkaXRvclZpZXcubW91c2VTZWxlY3Rpb25TdHlsZS5vZigodmlldywgZXZlbnQpID0+IGZpbHRlcihldmVudCkgPyByZWN0YW5nbGVTZWxlY3Rpb25TdHlsZSh2aWV3LCBldmVudCkgOiBudWxsKTtcbn1cbmNvbnN0IGtleXMgPSB7XG4gICAgQWx0OiBbMTgsIGUgPT4gISFlLmFsdEtleV0sXG4gICAgQ29udHJvbDogWzE3LCBlID0+ICEhZS5jdHJsS2V5XSxcbiAgICBTaGlmdDogWzE2LCBlID0+ICEhZS5zaGlmdEtleV0sXG4gICAgTWV0YTogWzkxLCBlID0+ICEhZS5tZXRhS2V5XVxufTtcbmNvbnN0IHNob3dDcm9zc2hhaXIgPSB7IHN0eWxlOiBcImN1cnNvcjogY3Jvc3NoYWlyXCIgfTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCB0dXJucyB0aGUgcG9pbnRlciBjdXJzb3IgaW50byBhXG5jcm9zc2hhaXIgd2hlbiBhIGdpdmVuIG1vZGlmaWVyIGtleSwgZGVmYXVsdGluZyB0byBBbHQsIGlzIGhlbGRcbmRvd24uIENhbiBzZXJ2ZSBhcyBhIHZpc3VhbCBoaW50IHRoYXQgcmVjdGFuZ3VsYXIgc2VsZWN0aW9uIGlzXG5nb2luZyB0byBoYXBwZW4gd2hlbiBwYWlyZWQgd2l0aFxuW2ByZWN0YW5ndWxhclNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5yZWN0YW5ndWxhclNlbGVjdGlvbikuXG4qL1xuZnVuY3Rpb24gY3Jvc3NoYWlyQ3Vyc29yKG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBbY29kZSwgZ2V0dGVyXSA9IGtleXNbb3B0aW9ucy5rZXkgfHwgXCJBbHRcIl07XG4gICAgbGV0IHBsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMuaXNEb3duID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGlzRG93bikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3duICE9IGlzRG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEb3duID0gaXNEb3duO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy51cGRhdGUoW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBldmVudE9ic2VydmVyczoge1xuICAgICAgICAgICAga2V5ZG93bihlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoZS5rZXlDb2RlID09IGNvZGUgfHwgZ2V0dGVyKGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBrZXl1cChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSBjb2RlIHx8ICFnZXR0ZXIoZSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VzZW1vdmUoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGdldHRlcihlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gW1xuICAgICAgICBwbHVnaW4sXG4gICAgICAgIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YodmlldyA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB2aWV3LnBsdWdpbihwbHVnaW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNEb3duKSA/IHNob3dDcm9zc2hhaXIgOiBudWxsOyB9KVxuICAgIF07XG59XG5cbmNvbnN0IE91dHNpZGUgPSBcIi0xMDAwMHB4XCI7XG5jbGFzcyBUb29sdGlwVmlld01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGZhY2V0LCBjcmVhdGVUb29sdGlwVmlldywgcmVtb3ZlVG9vbHRpcFZpZXcpIHtcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xuICAgICAgICB0aGlzLmNyZWF0ZVRvb2x0aXBWaWV3ID0gY3JlYXRlVG9vbHRpcFZpZXc7XG4gICAgICAgIHRoaXMucmVtb3ZlVG9vbHRpcFZpZXcgPSByZW1vdmVUb29sdGlwVmlldztcbiAgICAgICAgdGhpcy5pbnB1dCA9IHZpZXcuc3RhdGUuZmFjZXQoZmFjZXQpO1xuICAgICAgICB0aGlzLnRvb2x0aXBzID0gdGhpcy5pbnB1dC5maWx0ZXIodCA9PiB0KTtcbiAgICAgICAgbGV0IHByZXYgPSBudWxsO1xuICAgICAgICB0aGlzLnRvb2x0aXBWaWV3cyA9IHRoaXMudG9vbHRpcHMubWFwKHQgPT4gcHJldiA9IGNyZWF0ZVRvb2x0aXBWaWV3KHQsIHByZXYpKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSwgYWJvdmUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgaW5wdXQgPSB1cGRhdGUuc3RhdGUuZmFjZXQodGhpcy5mYWNldCk7XG4gICAgICAgIGxldCB0b29sdGlwcyA9IGlucHV0LmZpbHRlcih4ID0+IHgpO1xuICAgICAgICBpZiAoaW5wdXQgPT09IHRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAgICAgaWYgKHQudXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICB0LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0b29sdGlwVmlld3MgPSBbXSwgbmV3QWJvdmUgPSBhYm92ZSA/IFtdIDogbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b29sdGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRpcCA9IHRvb2x0aXBzW2ldLCBrbm93biA9IC0xO1xuICAgICAgICAgICAgaWYgKCF0aXApXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG9vbHRpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgb3RoZXIgPSB0aGlzLnRvb2x0aXBzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChvdGhlciAmJiBvdGhlci5jcmVhdGUgPT0gdGlwLmNyZWF0ZSlcbiAgICAgICAgICAgICAgICAgICAga25vd24gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtub3duIDwgMCkge1xuICAgICAgICAgICAgICAgIHRvb2x0aXBWaWV3c1tpXSA9IHRoaXMuY3JlYXRlVG9vbHRpcFZpZXcodGlwLCBpID8gdG9vbHRpcFZpZXdzW2kgLSAxXSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBYm92ZSlcbiAgICAgICAgICAgICAgICAgICAgbmV3QWJvdmVbaV0gPSAhIXRpcC5hYm92ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0b29sdGlwVmlldyA9IHRvb2x0aXBWaWV3c1tpXSA9IHRoaXMudG9vbHRpcFZpZXdzW2tub3duXTtcbiAgICAgICAgICAgICAgICBpZiAobmV3QWJvdmUpXG4gICAgICAgICAgICAgICAgICAgIG5ld0Fib3ZlW2ldID0gYWJvdmVba25vd25dO1xuICAgICAgICAgICAgICAgIGlmICh0b29sdGlwVmlldy51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBWaWV3LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy50b29sdGlwVmlld3MpXG4gICAgICAgICAgICBpZiAodG9vbHRpcFZpZXdzLmluZGV4T2YodCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwVmlldyh0KTtcbiAgICAgICAgICAgICAgICAoX2EgPSB0LmRlc3Ryb3kpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoYWJvdmUpIHtcbiAgICAgICAgICAgIG5ld0Fib3ZlLmZvckVhY2goKHZhbCwgaSkgPT4gYWJvdmVbaV0gPSB2YWwpO1xuICAgICAgICAgICAgYWJvdmUubGVuZ3RoID0gbmV3QWJvdmUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy50b29sdGlwcyA9IHRvb2x0aXBzO1xuICAgICAgICB0aGlzLnRvb2x0aXBWaWV3cyA9IHRvb2x0aXBWaWV3cztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuLyoqXG5DcmVhdGVzIGFuIGV4dGVuc2lvbiB0aGF0IGNvbmZpZ3VyZXMgdG9vbHRpcCBiZWhhdmlvci5cbiovXG5mdW5jdGlvbiB0b29sdGlwcyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiB0b29sdGlwQ29uZmlnLm9mKGNvbmZpZyk7XG59XG5mdW5jdGlvbiB3aW5kb3dTcGFjZSh2aWV3KSB7XG4gICAgbGV0IGRvY0VsdCA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHJldHVybiB7IHRvcDogMCwgbGVmdDogMCwgYm90dG9tOiBkb2NFbHQuY2xpZW50SGVpZ2h0LCByaWdodDogZG9jRWx0LmNsaWVudFdpZHRoIH07XG59XG5jb25zdCB0b29sdGlwQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiAoe1xuICAgICAgICAgICAgcG9zaXRpb246IGJyb3dzZXIuaW9zID8gXCJhYnNvbHV0ZVwiIDogKChfYSA9IHZhbHVlcy5maW5kKGNvbmYgPT4gY29uZi5wb3NpdGlvbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3NpdGlvbikgfHwgXCJmaXhlZFwiLFxuICAgICAgICAgICAgcGFyZW50OiAoKF9iID0gdmFsdWVzLmZpbmQoY29uZiA9PiBjb25mLnBhcmVudCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJlbnQpIHx8IG51bGwsXG4gICAgICAgICAgICB0b29sdGlwU3BhY2U6ICgoX2MgPSB2YWx1ZXMuZmluZChjb25mID0+IGNvbmYudG9vbHRpcFNwYWNlKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnRvb2x0aXBTcGFjZSkgfHwgd2luZG93U3BhY2UsXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY29uc3Qga25vd25IZWlnaHQgPSAvKkBfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRvb2x0aXBQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5hYm92ZSA9IFtdO1xuICAgICAgICB0aGlzLmluVmlldyA9IHRydWU7XG4gICAgICAgIHRoaXMubWFkZUFic29sdXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tZWFzdXJlVGltZW91dCA9IC0xO1xuICAgICAgICBsZXQgY29uZmlnID0gdmlldy5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IGNvbmZpZy5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBjb25maWcucGFyZW50O1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSB2aWV3LnRoZW1lQ2xhc3NlcztcbiAgICAgICAgdGhpcy5jcmVhdGVDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLnJlYWRNZWFzdXJlLmJpbmQodGhpcyksIHdyaXRlOiB0aGlzLndyaXRlTWVhc3VyZS5iaW5kKHRoaXMpLCBrZXk6IHRoaXMgfTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIgPyBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gdGhpcy5tZWFzdXJlU29vbigpKSA6IG51bGw7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBUb29sdGlwVmlld01hbmFnZXIodmlldywgc2hvd1Rvb2x0aXAsICh0LCBwKSA9PiB0aGlzLmNyZWF0ZVRvb2x0aXAodCwgcCksIHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci51bm9ic2VydmUodC5kb20pO1xuICAgICAgICAgICAgdC5kb20ucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFib3ZlID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBzLm1hcCh0ID0+ICEhdC5hYm92ZSk7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSB0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiID8gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgPiB0aGlzLmxhc3RUcmFuc2FjdGlvbiAtIDUwICYmXG4gICAgICAgICAgICAgICAgZW50cmllcy5sZW5ndGggPiAwICYmIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA8IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlU29vbigpO1xuICAgICAgICB9LCB7IHRocmVzaG9sZDogWzFdIH0pIDogbnVsbDtcbiAgICAgICAgdGhpcy5vYnNlcnZlSW50ZXJzZWN0aW9uKCk7XG4gICAgICAgIHZpZXcud2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5tZWFzdXJlU29vbiA9IHRoaXMubWVhc3VyZVNvb24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubWF5YmVNZWFzdXJlKCk7XG4gICAgfVxuICAgIGNyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IHRoaXMudmlldy50aGVtZUNsYXNzZXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMudmlldy5kb207XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JzZXJ2ZUludGVyc2VjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdG9vbHRpcCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0b29sdGlwLmRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWVhc3VyZVNvb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVUaW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVUaW1lb3V0ID0gLTE7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbiA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCB1cGRhdGVkID0gdGhpcy5tYW5hZ2VyLnVwZGF0ZSh1cGRhdGUsIHRoaXMuYWJvdmUpO1xuICAgICAgICBpZiAodXBkYXRlZClcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZUludGVyc2VjdGlvbigpO1xuICAgICAgICBsZXQgc2hvdWxkTWVhc3VyZSA9IHVwZGF0ZWQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZDtcbiAgICAgICAgbGV0IG5ld0NvbmZpZyA9IHVwZGF0ZS5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wb3NpdGlvbiAhPSB0aGlzLnBvc2l0aW9uICYmICF0aGlzLm1hZGVBYnNvbHV0ZSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ld0NvbmZpZy5wb3NpdGlvbjtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICB0LmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgICAgICBzaG91bGRNZWFzdXJlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q29uZmlnLnBhcmVudCAhPSB0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBuZXdDb25maWcucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb250YWluZXIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0LmRvbSk7XG4gICAgICAgICAgICBzaG91bGRNZWFzdXJlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnZpZXcudGhlbWVDbGFzc2VzICE9IHRoaXMuY2xhc3Nlcykge1xuICAgICAgICAgICAgdGhpcy5jbGFzc2VzID0gdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkTWVhc3VyZSlcbiAgICAgICAgICAgIHRoaXMubWF5YmVNZWFzdXJlKCk7XG4gICAgfVxuICAgIGNyZWF0ZVRvb2x0aXAodG9vbHRpcCwgcHJldikge1xuICAgICAgICBsZXQgdG9vbHRpcFZpZXcgPSB0b29sdGlwLmNyZWF0ZSh0aGlzLnZpZXcpO1xuICAgICAgICBsZXQgYmVmb3JlID0gcHJldiA/IHByZXYuZG9tIDogbnVsbDtcbiAgICAgICAgdG9vbHRpcFZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS10b29sdGlwXCIpO1xuICAgICAgICBpZiAodG9vbHRpcC5hcnJvdyAmJiAhdG9vbHRpcFZpZXcuZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcCA+IC5jbS10b29sdGlwLWFycm93XCIpKSB7XG4gICAgICAgICAgICBsZXQgYXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgYXJyb3cuY2xhc3NOYW1lID0gXCJjbS10b29sdGlwLWFycm93XCI7XG4gICAgICAgICAgICB0b29sdGlwVmlldy5kb20uYXBwZW5kQ2hpbGQoYXJyb3cpO1xuICAgICAgICB9XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5zdHlsZS50b3AgPSBPdXRzaWRlO1xuICAgICAgICB0b29sdGlwVmlldy5kb20uc3R5bGUubGVmdCA9IFwiMHB4XCI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc2VydEJlZm9yZSh0b29sdGlwVmlldy5kb20sIGJlZm9yZSk7XG4gICAgICAgIGlmICh0b29sdGlwVmlldy5tb3VudClcbiAgICAgICAgICAgIHRvb2x0aXBWaWV3Lm1vdW50KHRoaXMudmlldyk7XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKVxuICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRvb2x0aXBWaWV3LmRvbSk7XG4gICAgICAgIHJldHVybiB0b29sdGlwVmlldztcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMudmlldy53aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm1lYXN1cmVTb29uKTtcbiAgICAgICAgZm9yIChsZXQgdG9vbHRpcFZpZXcgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cykge1xuICAgICAgICAgICAgdG9vbHRpcFZpZXcuZG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgKF9hID0gdG9vbHRpcFZpZXcuZGVzdHJveSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodG9vbHRpcFZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhcmVudClcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAoX2IgPSB0aGlzLnJlc2l6ZU9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAoX2MgPSB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGlzY29ubmVjdCgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZWFzdXJlVGltZW91dCk7XG4gICAgfVxuICAgIHJlYWRNZWFzdXJlKCkge1xuICAgICAgICBsZXQgc2NhbGVYID0gMSwgc2NhbGVZID0gMSwgbWFrZUFic29sdXRlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09IFwiZml4ZWRcIiAmJiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgZG9tIH0gPSB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzWzBdO1xuICAgICAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28pIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IHNldHMgdGhlIGVsZW1lbnQncyBgb2Zmc2V0UGFyZW50YCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm1lZCBlbGVtZW50IHdoZW4gYSB0cmFuc2Zvcm0gaW50ZXJmZXJlcyB3aXRoIGZpeGVkXG4gICAgICAgICAgICAgICAgLy8gcG9zaXRpb25pbmcuXG4gICAgICAgICAgICAgICAgbWFrZUFic29sdXRlID0gZG9tLm9mZnNldFBhcmVudCAhPSB0aGlzLmNvbnRhaW5lci5vd25lckRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb20uc3R5bGUudG9wID09IE91dHNpZGUgJiYgZG9tLnN0eWxlLmxlZnQgPT0gXCIwcHhcIikge1xuICAgICAgICAgICAgICAgIC8vIE9uIG90aGVyIGJyb3dzZXJzLCB3ZSBoYXZlIHRvIGF3a3dhcmRseSB0cnkgYW5kIHVzZSBvdGhlclxuICAgICAgICAgICAgICAgIC8vIGluZm9ybWF0aW9uIHRvIGRldGVjdCBhIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBtYWtlQWJzb2x1dGUgPSBNYXRoLmFicyhyZWN0LnRvcCArIDEwMDAwKSA+IDEgfHwgTWF0aC5hYnMocmVjdC5sZWZ0KSA+IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ha2VBYnNvbHV0ZSB8fCB0aGlzLnBvc2l0aW9uID09IFwiYWJzb2x1dGVcIikge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSB0aGlzLnBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVjdC53aWR0aCAmJiByZWN0LmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZVggPSByZWN0LndpZHRoIC8gdGhpcy5wYXJlbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWSA9IHJlY3QuaGVpZ2h0IC8gdGhpcy5wYXJlbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICh7IHNjYWxlWCwgc2NhbGVZIH0gPSB0aGlzLnZpZXcudmlld1N0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgdmlzaWJsZSA9IHRoaXMudmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIG1hcmdpbnMgPSBnZXRTY3JvbGxNYXJnaW5zKHRoaXMudmlldyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aXNpYmxlOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogdmlzaWJsZS5sZWZ0ICsgbWFyZ2lucy5sZWZ0LCB0b3A6IHZpc2libGUudG9wICsgbWFyZ2lucy50b3AsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHZpc2libGUucmlnaHQgLSBtYXJnaW5zLnJpZ2h0LCBib3R0b206IHZpc2libGUuYm90dG9tIC0gbWFyZ2lucy5ib3R0b21cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJlbnQ6IHRoaXMucGFyZW50ID8gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiB0aGlzLnZpZXcuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgcG9zOiB0aGlzLm1hbmFnZXIudG9vbHRpcHMubWFwKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHR2ID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tpXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHYuZ2V0Q29vcmRzID8gdHYuZ2V0Q29vcmRzKHQucG9zKSA6IHRoaXMudmlldy5jb29yZHNBdFBvcyh0LnBvcyk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHNpemU6IHRoaXMubWFuYWdlci50b29sdGlwVmlld3MubWFwKCh7IGRvbSB9KSA9PiBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLFxuICAgICAgICAgICAgc3BhY2U6IHRoaXMudmlldy5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKS50b29sdGlwU3BhY2UodGhpcy52aWV3KSxcbiAgICAgICAgICAgIHNjYWxlWCwgc2NhbGVZLCBtYWtlQWJzb2x1dGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgd3JpdGVNZWFzdXJlKG1lYXN1cmVkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKG1lYXN1cmVkLm1ha2VBYnNvbHV0ZSkge1xuICAgICAgICAgICAgdGhpcy5tYWRlQWJzb2x1dGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICB0LmRvbS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyB2aXNpYmxlLCBzcGFjZSwgc2NhbGVYLCBzY2FsZVkgfSA9IG1lYXN1cmVkO1xuICAgICAgICBsZXQgb3RoZXJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYW5hZ2VyLnRvb2x0aXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdG9vbHRpcCA9IHRoaXMubWFuYWdlci50b29sdGlwc1tpXSwgdFZpZXcgPSB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzW2ldLCB7IGRvbSB9ID0gdFZpZXc7XG4gICAgICAgICAgICBsZXQgcG9zID0gbWVhc3VyZWQucG9zW2ldLCBzaXplID0gbWVhc3VyZWQuc2l6ZVtpXTtcbiAgICAgICAgICAgIC8vIEhpZGUgdG9vbHRpcHMgdGhhdCBhcmUgb3V0c2lkZSBvZiB0aGUgZWRpdG9yLlxuICAgICAgICAgICAgaWYgKCFwb3MgfHwgdG9vbHRpcC5jbGlwICE9PSBmYWxzZSAmJiAocG9zLmJvdHRvbSA8PSBNYXRoLm1heCh2aXNpYmxlLnRvcCwgc3BhY2UudG9wKSB8fFxuICAgICAgICAgICAgICAgIHBvcy50b3AgPj0gTWF0aC5taW4odmlzaWJsZS5ib3R0b20sIHNwYWNlLmJvdHRvbSkgfHxcbiAgICAgICAgICAgICAgICBwb3MucmlnaHQgPCBNYXRoLm1heCh2aXNpYmxlLmxlZnQsIHNwYWNlLmxlZnQpIC0gLjEgfHxcbiAgICAgICAgICAgICAgICBwb3MubGVmdCA+IE1hdGgubWluKHZpc2libGUucmlnaHQsIHNwYWNlLnJpZ2h0KSArIC4xKSkge1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS50b3AgPSBPdXRzaWRlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGFycm93ID0gdG9vbHRpcC5hcnJvdyA/IHRWaWV3LmRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLXRvb2x0aXAtYXJyb3dcIikgOiBudWxsO1xuICAgICAgICAgICAgbGV0IGFycm93SGVpZ2h0ID0gYXJyb3cgPyA3IC8qIEFycm93LlNpemUgKi8gOiAwO1xuICAgICAgICAgICAgbGV0IHdpZHRoID0gc2l6ZS5yaWdodCAtIHNpemUubGVmdCwgaGVpZ2h0ID0gKF9hID0ga25vd25IZWlnaHQuZ2V0KHRWaWV3KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc2l6ZS5ib3R0b20gLSBzaXplLnRvcDtcbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSB0Vmlldy5vZmZzZXQgfHwgbm9PZmZzZXQsIGx0ciA9IHRoaXMudmlldy50ZXh0RGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFI7XG4gICAgICAgICAgICBsZXQgbGVmdCA9IHNpemUud2lkdGggPiBzcGFjZS5yaWdodCAtIHNwYWNlLmxlZnRcbiAgICAgICAgICAgICAgICA/IChsdHIgPyBzcGFjZS5sZWZ0IDogc3BhY2UucmlnaHQgLSBzaXplLndpZHRoKVxuICAgICAgICAgICAgICAgIDogbHRyID8gTWF0aC5tYXgoc3BhY2UubGVmdCwgTWF0aC5taW4ocG9zLmxlZnQgLSAoYXJyb3cgPyAxNCAvKiBBcnJvdy5PZmZzZXQgKi8gOiAwKSArIG9mZnNldC54LCBzcGFjZS5yaWdodCAtIHdpZHRoKSlcbiAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbihNYXRoLm1heChzcGFjZS5sZWZ0LCBwb3MubGVmdCAtIHdpZHRoICsgKGFycm93ID8gMTQgLyogQXJyb3cuT2Zmc2V0ICovIDogMCkgLSBvZmZzZXQueCksIHNwYWNlLnJpZ2h0IC0gd2lkdGgpO1xuICAgICAgICAgICAgbGV0IGFib3ZlID0gdGhpcy5hYm92ZVtpXTtcbiAgICAgICAgICAgIGlmICghdG9vbHRpcC5zdHJpY3RTaWRlICYmIChhYm92ZVxuICAgICAgICAgICAgICAgID8gcG9zLnRvcCAtIGhlaWdodCAtIGFycm93SGVpZ2h0IC0gb2Zmc2V0LnkgPCBzcGFjZS50b3BcbiAgICAgICAgICAgICAgICA6IHBvcy5ib3R0b20gKyBoZWlnaHQgKyBhcnJvd0hlaWdodCArIG9mZnNldC55ID4gc3BhY2UuYm90dG9tKSAmJlxuICAgICAgICAgICAgICAgIGFib3ZlID09IChzcGFjZS5ib3R0b20gLSBwb3MuYm90dG9tID4gcG9zLnRvcCAtIHNwYWNlLnRvcCkpXG4gICAgICAgICAgICAgICAgYWJvdmUgPSB0aGlzLmFib3ZlW2ldID0gIWFib3ZlO1xuICAgICAgICAgICAgbGV0IHNwYWNlVmVydCA9IChhYm92ZSA/IHBvcy50b3AgLSBzcGFjZS50b3AgOiBzcGFjZS5ib3R0b20gLSBwb3MuYm90dG9tKSAtIGFycm93SGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHNwYWNlVmVydCA8IGhlaWdodCAmJiB0Vmlldy5yZXNpemUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwYWNlVmVydCA8IHRoaXMudmlldy5kZWZhdWx0TGluZUhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUudG9wID0gT3V0c2lkZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGtub3duSGVpZ2h0LnNldCh0VmlldywgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUuaGVpZ2h0ID0gKGhlaWdodCA9IHNwYWNlVmVydCkgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb20uc3R5bGUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLmhlaWdodCA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9wID0gYWJvdmUgPyBwb3MudG9wIC0gaGVpZ2h0IC0gYXJyb3dIZWlnaHQgLSBvZmZzZXQueSA6IHBvcy5ib3R0b20gKyBhcnJvd0hlaWdodCArIG9mZnNldC55O1xuICAgICAgICAgICAgbGV0IHJpZ2h0ID0gbGVmdCArIHdpZHRoO1xuICAgICAgICAgICAgaWYgKHRWaWV3Lm92ZXJsYXAgIT09IHRydWUpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiBvdGhlcnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmxlZnQgPCByaWdodCAmJiByLnJpZ2h0ID4gbGVmdCAmJiByLnRvcCA8IHRvcCArIGhlaWdodCAmJiByLmJvdHRvbSA+IHRvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IGFib3ZlID8gci50b3AgLSBoZWlnaHQgLSAyIC0gYXJyb3dIZWlnaHQgOiByLmJvdHRvbSArIGFycm93SGVpZ2h0ICsgMjtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09IFwiYWJzb2x1dGVcIikge1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS50b3AgPSAodG9wIC0gbWVhc3VyZWQucGFyZW50LnRvcCkgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc2V0TGVmdFN0eWxlKGRvbSwgKGxlZnQgLSBtZWFzdXJlZC5wYXJlbnQubGVmdCkgLyBzY2FsZVgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IHRvcCAvIHNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBzZXRMZWZ0U3R5bGUoZG9tLCBsZWZ0IC8gc2NhbGVYKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcnJvdykge1xuICAgICAgICAgICAgICAgIGxldCBhcnJvd0xlZnQgPSBwb3MubGVmdCArIChsdHIgPyBvZmZzZXQueCA6IC1vZmZzZXQueCkgLSAobGVmdCArIDE0IC8qIEFycm93Lk9mZnNldCAqLyAtIDcgLyogQXJyb3cuU2l6ZSAqLyk7XG4gICAgICAgICAgICAgICAgYXJyb3cuc3R5bGUubGVmdCA9IGFycm93TGVmdCAvIHNjYWxlWCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0Vmlldy5vdmVybGFwICE9PSB0cnVlKVxuICAgICAgICAgICAgICAgIG90aGVycy5wdXNoKHsgbGVmdCwgdG9wLCByaWdodCwgYm90dG9tOiB0b3AgKyBoZWlnaHQgfSk7XG4gICAgICAgICAgICBkb20uY2xhc3NMaXN0LnRvZ2dsZShcImNtLXRvb2x0aXAtYWJvdmVcIiwgYWJvdmUpO1xuICAgICAgICAgICAgZG9tLmNsYXNzTGlzdC50b2dnbGUoXCJjbS10b29sdGlwLWJlbG93XCIsICFhYm92ZSk7XG4gICAgICAgICAgICBpZiAodFZpZXcucG9zaXRpb25lZClcbiAgICAgICAgICAgICAgICB0Vmlldy5wb3NpdGlvbmVkKG1lYXN1cmVkLnNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXliZU1lYXN1cmUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIudG9vbHRpcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aWV3LmluVmlldylcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmluVmlldyAhPSB0aGlzLnZpZXcuaW5WaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pblZpZXcgPSB0aGlzLnZpZXcuaW5WaWV3O1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pblZpZXcpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHR2IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAgICAgICAgICAgICB0di5kb20uc3R5bGUudG9wID0gT3V0c2lkZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0sIHtcbiAgICBldmVudE9ic2VydmVyczoge1xuICAgICAgICBzY3JvbGwoKSB7IHRoaXMubWF5YmVNZWFzdXJlKCk7IH1cbiAgICB9XG59KTtcbmZ1bmN0aW9uIHNldExlZnRTdHlsZShlbHQsIHZhbHVlKSB7XG4gICAgbGV0IGN1cnJlbnQgPSBwYXJzZUludChlbHQuc3R5bGUubGVmdCwgMTApO1xuICAgIGlmIChpc05hTihjdXJyZW50KSB8fCBNYXRoLmFicyh2YWx1ZSAtIGN1cnJlbnQpID4gMSlcbiAgICAgICAgZWx0LnN0eWxlLmxlZnQgPSB2YWx1ZSArIFwicHhcIjtcbn1cbmNvbnN0IGJhc2VUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tdG9vbHRpcFwiOiB7XG4gICAgICAgIHpJbmRleDogNTAwLFxuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcFwiOiB7XG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgI2JiYlwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2Y1ZjVmNVwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcC1zZWN0aW9uOm5vdCg6Zmlyc3QtY2hpbGQpXCI6IHtcbiAgICAgICAgYm9yZGVyVG9wOiBcIjFweCBzb2xpZCAjYmJiXCIsXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS10b29sdGlwXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCIuY20tdG9vbHRpcC1hcnJvd1wiOiB7XG4gICAgICAgIGhlaWdodDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4YCxcbiAgICAgICAgd2lkdGg6IGAkezcgLyogQXJyb3cuU2l6ZSAqLyAqIDJ9cHhgLFxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICB6SW5kZXg6IC0xLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgXCImOmJlZm9yZSwgJjphZnRlclwiOiB7XG4gICAgICAgICAgICBjb250ZW50OiBcIicnXCIsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBib3JkZXJMZWZ0OiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgICAgICAgYm9yZGVyUmlnaHQ6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCB0cmFuc3BhcmVudGAsXG4gICAgICAgIH0sXG4gICAgICAgIFwiLmNtLXRvb2x0aXAtYWJvdmUgJlwiOiB7XG4gICAgICAgICAgICBib3R0b206IGAtJHs3IC8qIEFycm93LlNpemUgKi99cHhgLFxuICAgICAgICAgICAgXCImOmJlZm9yZVwiOiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgI2JiYmAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJUb3A6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjZjVmNWY1YCxcbiAgICAgICAgICAgICAgICBib3R0b206IFwiMXB4XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tdG9vbHRpcC1iZWxvdyAmXCI6IHtcbiAgICAgICAgICAgIHRvcDogYC0kezcgLyogQXJyb3cuU2l6ZSAqL31weGAsXG4gICAgICAgICAgICBcIiY6YmVmb3JlXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjYmJiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiY6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkICNmNWY1ZjVgLFxuICAgICAgICAgICAgICAgIHRvcDogXCIxcHhcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcCAuY20tdG9vbHRpcC1hcnJvd1wiOiB7XG4gICAgICAgIFwiJjpiZWZvcmVcIjoge1xuICAgICAgICAgICAgYm9yZGVyVG9wQ29sb3I6IFwiIzMzMzMzOFwiLFxuICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IFwiIzMzMzMzOFwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiJjphZnRlclwiOiB7XG4gICAgICAgICAgICBib3JkZXJUb3BDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IFwidHJhbnNwYXJlbnRcIlxuICAgICAgICB9XG4gICAgfVxufSk7XG5jb25zdCBub09mZnNldCA9IHsgeDogMCwgeTogMCB9O1xuLyoqXG5GYWNldCB0byB3aGljaCBhbiBleHRlbnNpb24gY2FuIGFkZCBhIHZhbHVlIHRvIHNob3cgYSB0b29sdGlwLlxuKi9cbmNvbnN0IHNob3dUb29sdGlwID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgZW5hYmxlczogW3Rvb2x0aXBQbHVnaW4sIGJhc2VUaGVtZV1cbn0pO1xuY29uc3Qgc2hvd0hvdmVyVG9vbHRpcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IGlucHV0cyA9PiBpbnB1dHMucmVkdWNlKChhLCBpKSA9PiBhLmNvbmNhdChpKSwgW10pXG59KTtcbmNsYXNzIEhvdmVyVG9vbHRpcEhvc3Qge1xuICAgIC8vIE5lZWRzIHRvIGJlIHN0YXRpYyBzbyB0aGF0IGhvc3QgdG9vbHRpcCBpbnN0YW5jZXMgYWx3YXlzIG1hdGNoXG4gICAgc3RhdGljIGNyZWF0ZSh2aWV3KSB7XG4gICAgICAgIHJldHVybiBuZXcgSG92ZXJUb29sdGlwSG9zdCh2aWV3KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tdG9vbHRpcC1ob3ZlclwiKTtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFRvb2x0aXBWaWV3TWFuYWdlcih2aWV3LCBzaG93SG92ZXJUb29sdGlwLCAodCwgcCkgPT4gdGhpcy5jcmVhdGVIb3N0ZWRWaWV3KHQsIHApLCB0ID0+IHQuZG9tLnJlbW92ZSgpKTtcbiAgICB9XG4gICAgY3JlYXRlSG9zdGVkVmlldyh0b29sdGlwLCBwcmV2KSB7XG4gICAgICAgIGxldCBob3N0ZWRWaWV3ID0gdG9vbHRpcC5jcmVhdGUodGhpcy52aWV3KTtcbiAgICAgICAgaG9zdGVkVmlldy5kb20uY2xhc3NMaXN0LmFkZChcImNtLXRvb2x0aXAtc2VjdGlvblwiKTtcbiAgICAgICAgdGhpcy5kb20uaW5zZXJ0QmVmb3JlKGhvc3RlZFZpZXcuZG9tLCBwcmV2ID8gcHJldi5kb20ubmV4dFNpYmxpbmcgOiB0aGlzLmRvbS5maXJzdENoaWxkKTtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiBob3N0ZWRWaWV3Lm1vdW50KVxuICAgICAgICAgICAgaG9zdGVkVmlldy5tb3VudCh0aGlzLnZpZXcpO1xuICAgICAgICByZXR1cm4gaG9zdGVkVmlldztcbiAgICB9XG4gICAgbW91bnQodmlldykge1xuICAgICAgICBmb3IgKGxldCBob3N0ZWRWaWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIGlmIChob3N0ZWRWaWV3Lm1vdW50KVxuICAgICAgICAgICAgICAgIGhvc3RlZFZpZXcubW91bnQodmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcG9zaXRpb25lZChzcGFjZSkge1xuICAgICAgICBmb3IgKGxldCBob3N0ZWRWaWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIGlmIChob3N0ZWRWaWV3LnBvc2l0aW9uZWQpXG4gICAgICAgICAgICAgICAgaG9zdGVkVmlldy5wb3NpdGlvbmVkKHNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIHRoaXMubWFuYWdlci51cGRhdGUodXBkYXRlKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAoX2EgPSB0LmRlc3Ryb3kpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHQpO1xuICAgIH1cbiAgICBwYXNzUHJvcChuYW1lKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChsZXQgdmlldyBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKSB7XG4gICAgICAgICAgICBsZXQgZ2l2ZW4gPSB2aWV3W25hbWVdO1xuICAgICAgICAgICAgaWYgKGdpdmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnaXZlbjtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPT0gZ2l2ZW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXQgb2Zmc2V0KCkgeyByZXR1cm4gdGhpcy5wYXNzUHJvcChcIm9mZnNldFwiKTsgfVxuICAgIGdldCBnZXRDb29yZHMoKSB7IHJldHVybiB0aGlzLnBhc3NQcm9wKFwiZ2V0Q29vcmRzXCIpOyB9XG4gICAgZ2V0IG92ZXJsYXAoKSB7IHJldHVybiB0aGlzLnBhc3NQcm9wKFwib3ZlcmxhcFwiKTsgfVxuICAgIGdldCByZXNpemUoKSB7IHJldHVybiB0aGlzLnBhc3NQcm9wKFwicmVzaXplXCIpOyB9XG59XG5jb25zdCBzaG93SG92ZXJUb29sdGlwSG9zdCA9IC8qQF9fUFVSRV9fKi9zaG93VG9vbHRpcC5jb21wdXRlKFtzaG93SG92ZXJUb29sdGlwXSwgc3RhdGUgPT4ge1xuICAgIGxldCB0b29sdGlwcyA9IHN0YXRlLmZhY2V0KHNob3dIb3ZlclRvb2x0aXApO1xuICAgIGlmICh0b29sdGlwcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvczogTWF0aC5taW4oLi4udG9vbHRpcHMubWFwKHQgPT4gdC5wb3MpKSxcbiAgICAgICAgZW5kOiBNYXRoLm1heCguLi50b29sdGlwcy5tYXAodCA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IHQuZW5kKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0LnBvczsgfSkpLFxuICAgICAgICBjcmVhdGU6IEhvdmVyVG9vbHRpcEhvc3QuY3JlYXRlLFxuICAgICAgICBhYm92ZTogdG9vbHRpcHNbMF0uYWJvdmUsXG4gICAgICAgIGFycm93OiB0b29sdGlwcy5zb21lKHQgPT4gdC5hcnJvdyksXG4gICAgfTtcbn0pO1xuY2xhc3MgSG92ZXJQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHNvdXJjZSwgZmllbGQsIHNldEhvdmVyLCBob3ZlclRpbWUpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5zZXRIb3ZlciA9IHNldEhvdmVyO1xuICAgICAgICB0aGlzLmhvdmVyVGltZSA9IGhvdmVyVGltZTtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RNb3ZlID0geyB4OiAwLCB5OiAwLCB0YXJnZXQ6IHZpZXcuZG9tLCB0aW1lOiAwIH07XG4gICAgICAgIHRoaXMuY2hlY2tIb3ZlciA9IHRoaXMuY2hlY2tIb3Zlci5iaW5kKHRoaXMpO1xuICAgICAgICB2aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLm1vdXNlbGVhdmUgPSB0aGlzLm1vdXNlbGVhdmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3VzZW1vdmUgPSB0aGlzLm1vdXNlbW92ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzdGFydFRpbWVvdXQpO1xuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zdGFydEhvdmVyKCksIDIwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgIH1cbiAgICBjaGVja0hvdmVyKCkge1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IC0xO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgaG92ZXJlZCA9IERhdGUubm93KCkgLSB0aGlzLmxhc3RNb3ZlLnRpbWU7XG4gICAgICAgIGlmIChob3ZlcmVkIDwgdGhpcy5ob3ZlclRpbWUpXG4gICAgICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5jaGVja0hvdmVyLCB0aGlzLmhvdmVyVGltZSAtIGhvdmVyZWQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnN0YXJ0SG92ZXIoKTtcbiAgICB9XG4gICAgc3RhcnRIb3ZlcigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzdGFydFRpbWVvdXQpO1xuICAgICAgICBsZXQgeyB2aWV3LCBsYXN0TW92ZSB9ID0gdGhpcztcbiAgICAgICAgbGV0IGRlc2MgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdChsYXN0TW92ZS50YXJnZXQpO1xuICAgICAgICBpZiAoIWRlc2MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBwb3MsIHNpZGUgPSAxO1xuICAgICAgICBpZiAoZGVzYyBpbnN0YW5jZW9mIFdpZGdldFZpZXcpIHtcbiAgICAgICAgICAgIHBvcyA9IGRlc2MucG9zQXRTdGFydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcyA9IHZpZXcucG9zQXRDb29yZHMobGFzdE1vdmUpO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBwb3NDb29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKHBvcyk7XG4gICAgICAgICAgICBpZiAoIXBvc0Nvb3JkcyB8fFxuICAgICAgICAgICAgICAgIGxhc3RNb3ZlLnkgPCBwb3NDb29yZHMudG9wIHx8IGxhc3RNb3ZlLnkgPiBwb3NDb29yZHMuYm90dG9tIHx8XG4gICAgICAgICAgICAgICAgbGFzdE1vdmUueCA8IHBvc0Nvb3Jkcy5sZWZ0IC0gdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGggfHxcbiAgICAgICAgICAgICAgICBsYXN0TW92ZS54ID4gcG9zQ29vcmRzLnJpZ2h0ICsgdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGJpZGkgPSB2aWV3LmJpZGlTcGFucyh2aWV3LnN0YXRlLmRvYy5saW5lQXQocG9zKSkuZmluZChzID0+IHMuZnJvbSA8PSBwb3MgJiYgcy50byA+PSBwb3MpO1xuICAgICAgICAgICAgbGV0IHJ0bCA9IGJpZGkgJiYgYmlkaS5kaXIgPT0gRGlyZWN0aW9uLlJUTCA/IC0xIDogMTtcbiAgICAgICAgICAgIHNpZGUgPSAobGFzdE1vdmUueCA8IHBvc0Nvb3Jkcy5sZWZ0ID8gLXJ0bCA6IHJ0bCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wZW4gPSB0aGlzLnNvdXJjZSh2aWV3LCBwb3MsIHNpZGUpO1xuICAgICAgICBpZiAob3BlbiA9PT0gbnVsbCB8fCBvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcGVuLnRoZW4pIHtcbiAgICAgICAgICAgIGxldCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nID0geyBwb3MgfTtcbiAgICAgICAgICAgIG9wZW4udGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmcgPT0gcGVuZGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmICEoQXJyYXkuaXNBcnJheShyZXN1bHQpICYmICFyZXN1bHQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdCA6IFtyZXN1bHRdKSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlID0+IGxvZ0V4Y2VwdGlvbih2aWV3LnN0YXRlLCBlLCBcImhvdmVyIHRvb2x0aXBcIikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZW4gJiYgIShBcnJheS5pc0FycmF5KG9wZW4pICYmICFvcGVuLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKEFycmF5LmlzQXJyYXkob3BlbikgPyBvcGVuIDogW29wZW5dKSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdG9vbHRpcCgpIHtcbiAgICAgICAgbGV0IHBsdWdpbiA9IHRoaXMudmlldy5wbHVnaW4odG9vbHRpcFBsdWdpbik7XG4gICAgICAgIGxldCBpbmRleCA9IHBsdWdpbiA/IHBsdWdpbi5tYW5hZ2VyLnRvb2x0aXBzLmZpbmRJbmRleCh0ID0+IHQuY3JlYXRlID09IEhvdmVyVG9vbHRpcEhvc3QuY3JlYXRlKSA6IC0xO1xuICAgICAgICByZXR1cm4gaW5kZXggPiAtMSA/IHBsdWdpbi5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tpbmRleF0gOiBudWxsO1xuICAgIH1cbiAgICBtb3VzZW1vdmUoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5sYXN0TW92ZSA9IHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSwgdGFyZ2V0OiBldmVudC50YXJnZXQsIHRpbWU6IERhdGUubm93KCkgfTtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJUaW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNoZWNrSG92ZXIsIHRoaXMuaG92ZXJUaW1lKTtcbiAgICAgICAgbGV0IHsgYWN0aXZlLCB0b29sdGlwIH0gPSB0aGlzO1xuICAgICAgICBpZiAoYWN0aXZlLmxlbmd0aCAmJiB0b29sdGlwICYmICFpc0luVG9vbHRpcCh0b29sdGlwLmRvbSwgZXZlbnQpIHx8IHRoaXMucGVuZGluZykge1xuICAgICAgICAgICAgbGV0IHsgcG9zIH0gPSBhY3RpdmVbMF0gfHwgdGhpcy5wZW5kaW5nLCBlbmQgPSAoX2IgPSAoX2EgPSBhY3RpdmVbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbmQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHBvcztcbiAgICAgICAgICAgIGlmICgocG9zID09IGVuZCA/IHRoaXMudmlldy5wb3NBdENvb3Jkcyh0aGlzLmxhc3RNb3ZlKSAhPSBwb3NcbiAgICAgICAgICAgICAgICA6ICFpc092ZXJSYW5nZSh0aGlzLnZpZXcsIHBvcywgZW5kLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKFtdKSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG1vdXNlbGVhdmUoZXZlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSAtMTtcbiAgICAgICAgbGV0IHsgYWN0aXZlIH0gPSB0aGlzO1xuICAgICAgICBpZiAoYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgdG9vbHRpcCB9ID0gdGhpcztcbiAgICAgICAgICAgIGxldCBpblRvb2x0aXAgPSB0b29sdGlwICYmIHRvb2x0aXAuZG9tLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICAgICAgaWYgKCFpblRvb2x0aXApXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdGhpcy5zZXRIb3Zlci5vZihbXSkgfSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy53YXRjaFRvb2x0aXBMZWF2ZSh0b29sdGlwLmRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2F0Y2hUb29sdGlwTGVhdmUodG9vbHRpcCkge1xuICAgICAgICBsZXQgd2F0Y2ggPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRvb2x0aXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgd2F0Y2gpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhdGhpcy52aWV3LmRvbS5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KSlcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKFtdKSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdG9vbHRpcC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB3YXRjaCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhvdmVyVGltZW91dCk7XG4gICAgICAgIHRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGhpcy5tb3VzZWxlYXZlKTtcbiAgICAgICAgdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW91c2Vtb3ZlKTtcbiAgICB9XG59XG5jb25zdCB0b29sdGlwTWFyZ2luID0gNDtcbmZ1bmN0aW9uIGlzSW5Ub29sdGlwKHRvb2x0aXAsIGV2ZW50KSB7XG4gICAgbGV0IHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tIH0gPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBhcnJvdztcbiAgICBpZiAoYXJyb3cgPSB0b29sdGlwLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcC1hcnJvd1wiKSkge1xuICAgICAgICBsZXQgYXJyb3dSZWN0ID0gYXJyb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRvcCA9IE1hdGgubWluKGFycm93UmVjdC50b3AsIHRvcCk7XG4gICAgICAgIGJvdHRvbSA9IE1hdGgubWF4KGFycm93UmVjdC5ib3R0b20sIGJvdHRvbSk7XG4gICAgfVxuICAgIHJldHVybiBldmVudC5jbGllbnRYID49IGxlZnQgLSB0b29sdGlwTWFyZ2luICYmIGV2ZW50LmNsaWVudFggPD0gcmlnaHQgKyB0b29sdGlwTWFyZ2luICYmXG4gICAgICAgIGV2ZW50LmNsaWVudFkgPj0gdG9wIC0gdG9vbHRpcE1hcmdpbiAmJiBldmVudC5jbGllbnRZIDw9IGJvdHRvbSArIHRvb2x0aXBNYXJnaW47XG59XG5mdW5jdGlvbiBpc092ZXJSYW5nZSh2aWV3LCBmcm9tLCB0bywgeCwgeSwgbWFyZ2luKSB7XG4gICAgbGV0IHJlY3QgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgZG9jQm90dG9tID0gdmlldy5kb2N1bWVudFRvcCArIHZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCArIHZpZXcuY29udGVudEhlaWdodDtcbiAgICBpZiAocmVjdC5sZWZ0ID4geCB8fCByZWN0LnJpZ2h0IDwgeCB8fCByZWN0LnRvcCA+IHkgfHwgTWF0aC5taW4ocmVjdC5ib3R0b20sIGRvY0JvdHRvbSkgPCB5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4LCB5IH0sIGZhbHNlKTtcbiAgICByZXR1cm4gcG9zID49IGZyb20gJiYgcG9zIDw9IHRvO1xufVxuLyoqXG5TZXQgdXAgYSBob3ZlciB0b29sdGlwLCB3aGljaCBzaG93cyB1cCB3aGVuIHRoZSBwb2ludGVyIGhvdmVyc1xub3ZlciByYW5nZXMgb2YgdGV4dC4gVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBtb3VzZSBob3ZlcnNcbm92ZXIgdGhlIGRvY3VtZW50IHRleHQuIEl0IHNob3VsZCwgaWYgdGhlcmUgaXMgYSB0b29sdGlwXG5hc3NvY2lhdGVkIHdpdGggcG9zaXRpb24gYHBvc2AsIHJldHVybiB0aGUgdG9vbHRpcCBkZXNjcmlwdGlvblxuKGVpdGhlciBkaXJlY3RseSBvciBpbiBhIHByb21pc2UpLiBUaGUgYHNpZGVgIGFyZ3VtZW50IGluZGljYXRlc1xub24gd2hpY2ggc2lkZSBvZiB0aGUgcG9zaXRpb24gdGhlIHBvaW50ZXIgaXPigJRpdCB3aWxsIGJlIC0xIGlmIHRoZVxucG9pbnRlciBpcyBiZWZvcmUgdGhlIHBvc2l0aW9uLCAxIGlmIGFmdGVyIHRoZSBwb3NpdGlvbi5cblxuTm90ZSB0aGF0IGFsbCBob3ZlciB0b29sdGlwcyBhcmUgaG9zdGVkIHdpdGhpbiBhIHNpbmdsZSB0b29sdGlwXG5jb250YWluZXIgZWxlbWVudC4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgdG9vbHRpcHMgb3ZlciB0aGUgc2FtZVxucmFuZ2UgdG8gYmUgXCJtZXJnZWRcIiB0b2dldGhlciB3aXRob3V0IG92ZXJsYXBwaW5nLlxuXG5UaGUgcmV0dXJuIHZhbHVlIGlzIGEgdmFsaWQgW2VkaXRvciBleHRlbnNpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRXh0ZW5zaW9uKVxuYnV0IGFsc28gcHJvdmlkZXMgYW4gYGFjdGl2ZWAgcHJvcGVydHkgaG9sZGluZyBhIHN0YXRlIGZpZWxkIHRoYXRcbmNhbiBiZSB1c2VkIHRvIHJlYWQgdGhlIGN1cnJlbnRseSBhY3RpdmUgdG9vbHRpcHMgcHJvZHVjZWQgYnkgdGhpc1xuZXh0ZW5zaW9uLlxuKi9cbmZ1bmN0aW9uIGhvdmVyVG9vbHRpcChzb3VyY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBzZXRIb3ZlciA9IFN0YXRlRWZmZWN0LmRlZmluZSgpO1xuICAgIGxldCBob3ZlclN0YXRlID0gU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgICAgICBjcmVhdGUoKSB7IHJldHVybiBbXTsgfSxcbiAgICAgICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhpZGVPbkNoYW5nZSAmJiAodHIuZG9jQ2hhbmdlZCB8fCB0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaGlkZU9uKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmZpbHRlcih2ID0+ICFvcHRpb25zLmhpZGVPbih0ciwgdikpO1xuICAgICAgICAgICAgICAgIGlmICh0ci5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXBwZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdG9vbHRpcCBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BvcyA9IHRyLmNoYW5nZXMubWFwUG9zKHRvb2x0aXAucG9zLCAtMSwgTWFwTW9kZS5UcmFja0RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UG9zICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29weSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgdG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weS5wb3MgPSBuZXdQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcHkuZW5kICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuZW5kID0gdHIuY2hhbmdlcy5tYXBQb3MoY29weS5lbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZC5wdXNoKGNvcHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWFwcGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhzZXRIb3ZlcikpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoY2xvc2VIb3ZlclRvb2x0aXBFZmZlY3QpKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBwcm92aWRlOiBmID0+IHNob3dIb3ZlclRvb2x0aXAuZnJvbShmKVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2ZTogaG92ZXJTdGF0ZSxcbiAgICAgICAgZXh0ZW5zaW9uOiBbXG4gICAgICAgICAgICBob3ZlclN0YXRlLFxuICAgICAgICAgICAgVmlld1BsdWdpbi5kZWZpbmUodmlldyA9PiBuZXcgSG92ZXJQbHVnaW4odmlldywgc291cmNlLCBob3ZlclN0YXRlLCBzZXRIb3Zlciwgb3B0aW9ucy5ob3ZlclRpbWUgfHwgMzAwIC8qIEhvdmVyLlRpbWUgKi8pKSxcbiAgICAgICAgICAgIHNob3dIb3ZlclRvb2x0aXBIb3N0XG4gICAgICAgIF1cbiAgICB9O1xufVxuLyoqXG5HZXQgdGhlIGFjdGl2ZSB0b29sdGlwIHZpZXcgZm9yIGEgZ2l2ZW4gdG9vbHRpcCwgaWYgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIGdldFRvb2x0aXAodmlldywgdG9vbHRpcCkge1xuICAgIGxldCBwbHVnaW4gPSB2aWV3LnBsdWdpbih0b29sdGlwUGx1Z2luKTtcbiAgICBpZiAoIXBsdWdpbilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGZvdW5kID0gcGx1Z2luLm1hbmFnZXIudG9vbHRpcHMuaW5kZXhPZih0b29sdGlwKTtcbiAgICByZXR1cm4gZm91bmQgPCAwID8gbnVsbCA6IHBsdWdpbi5tYW5hZ2VyLnRvb2x0aXBWaWV3c1tmb3VuZF07XG59XG4vKipcblJldHVybnMgdHJ1ZSBpZiBhbnkgaG92ZXIgdG9vbHRpcHMgYXJlIGN1cnJlbnRseSBhY3RpdmUuXG4qL1xuZnVuY3Rpb24gaGFzSG92ZXJUb29sdGlwcyhzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5mYWNldChzaG93SG92ZXJUb29sdGlwKS5zb21lKHggPT4geCk7XG59XG5jb25zdCBjbG9zZUhvdmVyVG9vbHRpcEVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8qKlxuVHJhbnNhY3Rpb24gZWZmZWN0IHRoYXQgY2xvc2VzIGFsbCBob3ZlciB0b29sdGlwcy5cbiovXG5jb25zdCBjbG9zZUhvdmVyVG9vbHRpcHMgPSAvKkBfX1BVUkVfXyovY2xvc2VIb3ZlclRvb2x0aXBFZmZlY3Qub2YobnVsbCk7XG4vKipcblRlbGwgdGhlIHRvb2x0aXAgZXh0ZW5zaW9uIHRvIHJlY29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGFjdGl2ZVxudG9vbHRpcHMuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHNvbWV0aGluZyBoYXBwZW5zIChzdWNoIGFzIGFcbnJlLXBvc2l0aW9uaW5nIG9yIENTUyBjaGFuZ2UgYWZmZWN0aW5nIHRoZSBlZGl0b3IpIHRoYXQgY291bGRcbmludmFsaWRhdGUgdGhlIGV4aXN0aW5nIHRvb2x0aXAgcG9zaXRpb25zLlxuKi9cbmZ1bmN0aW9uIHJlcG9zaXRpb25Ub29sdGlwcyh2aWV3KSB7XG4gICAgbGV0IHBsdWdpbiA9IHZpZXcucGx1Z2luKHRvb2x0aXBQbHVnaW4pO1xuICAgIGlmIChwbHVnaW4pXG4gICAgICAgIHBsdWdpbi5tYXliZU1lYXN1cmUoKTtcbn1cblxuY29uc3QgcGFuZWxDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgbGV0IHRvcENvbnRhaW5lciwgYm90dG9tQ29udGFpbmVyO1xuICAgICAgICBmb3IgKGxldCBjIG9mIGNvbmZpZ3MpIHtcbiAgICAgICAgICAgIHRvcENvbnRhaW5lciA9IHRvcENvbnRhaW5lciB8fCBjLnRvcENvbnRhaW5lcjtcbiAgICAgICAgICAgIGJvdHRvbUNvbnRhaW5lciA9IGJvdHRvbUNvbnRhaW5lciB8fCBjLmJvdHRvbUNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0b3BDb250YWluZXIsIGJvdHRvbUNvbnRhaW5lciB9O1xuICAgIH1cbn0pO1xuLyoqXG5Db25maWd1cmVzIHRoZSBwYW5lbC1tYW5hZ2luZyBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gcGFuZWxzKGNvbmZpZykge1xuICAgIHJldHVybiBjb25maWcgPyBbcGFuZWxDb25maWcub2YoY29uZmlnKV0gOiBbXTtcbn1cbi8qKlxuR2V0IHRoZSBhY3RpdmUgcGFuZWwgY3JlYXRlZCBieSB0aGUgZ2l2ZW4gY29uc3RydWN0b3IsIGlmIGFueS5cblRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHlvdSBuZWVkIGFjY2VzcyB0byB5b3VyIHBhbmVscycgRE9NXG5zdHJ1Y3R1cmUuXG4qL1xuZnVuY3Rpb24gZ2V0UGFuZWwodmlldywgcGFuZWwpIHtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW4ocGFuZWxQbHVnaW4pO1xuICAgIGxldCBpbmRleCA9IHBsdWdpbiA/IHBsdWdpbi5zcGVjcy5pbmRleE9mKHBhbmVsKSA6IC0xO1xuICAgIHJldHVybiBpbmRleCA+IC0xID8gcGx1Z2luLnBhbmVsc1tpbmRleF0gOiBudWxsO1xufVxuY29uc3QgcGFuZWxQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHZpZXcuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgdGhpcy5zcGVjcyA9IHRoaXMuaW5wdXQuZmlsdGVyKHMgPT4gcyk7XG4gICAgICAgIHRoaXMucGFuZWxzID0gdGhpcy5zcGVjcy5tYXAoc3BlYyA9PiBzcGVjKHZpZXcpKTtcbiAgICAgICAgbGV0IGNvbmYgPSB2aWV3LnN0YXRlLmZhY2V0KHBhbmVsQ29uZmlnKTtcbiAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh2aWV3LCB0cnVlLCBjb25mLnRvcENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuYm90dG9tID0gbmV3IFBhbmVsR3JvdXAodmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy50b3Auc3luYyh0aGlzLnBhbmVscy5maWx0ZXIocCA9PiBwLnRvcCkpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKHRoaXMucGFuZWxzLmZpbHRlcihwID0+ICFwLnRvcCkpO1xuICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBwLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tcGFuZWxcIik7XG4gICAgICAgICAgICBpZiAocC5tb3VudClcbiAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY29uZiA9IHVwZGF0ZS5zdGF0ZS5mYWNldChwYW5lbENvbmZpZyk7XG4gICAgICAgIGlmICh0aGlzLnRvcC5jb250YWluZXIgIT0gY29uZi50b3BDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9wLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy50b3AgPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgdHJ1ZSwgY29uZi50b3BDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJvdHRvbS5jb250YWluZXIgIT0gY29uZi5ib3R0b21Db250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tLnN5bmMoW10pO1xuICAgICAgICAgICAgdGhpcy5ib3R0b20gPSBuZXcgUGFuZWxHcm91cCh1cGRhdGUudmlldywgZmFsc2UsIGNvbmYuYm90dG9tQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcC5zeW5jQ2xhc3NlcygpO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jQ2xhc3NlcygpO1xuICAgICAgICBsZXQgaW5wdXQgPSB1cGRhdGUuc3RhdGUuZmFjZXQoc2hvd1BhbmVsKTtcbiAgICAgICAgaWYgKGlucHV0ICE9IHRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCBzcGVjcyA9IGlucHV0LmZpbHRlcih4ID0+IHgpO1xuICAgICAgICAgICAgbGV0IHBhbmVscyA9IFtdLCB0b3AgPSBbXSwgYm90dG9tID0gW10sIG1vdW50ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzcGVjIG9mIHNwZWNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtub3duID0gdGhpcy5zcGVjcy5pbmRleE9mKHNwZWMpLCBwYW5lbDtcbiAgICAgICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsID0gc3BlYyh1cGRhdGUudmlldyk7XG4gICAgICAgICAgICAgICAgICAgIG1vdW50LnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWwgPSB0aGlzLnBhbmVsc1trbm93bl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYW5lbC51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFuZWxzLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgICAgIChwYW5lbC50b3AgPyB0b3AgOiBib3R0b20pLnB1c2gocGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zcGVjcyA9IHNwZWNzO1xuICAgICAgICAgICAgdGhpcy5wYW5lbHMgPSBwYW5lbHM7XG4gICAgICAgICAgICB0aGlzLnRvcC5zeW5jKHRvcCk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKGJvdHRvbSk7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIG1vdW50KSB7XG4gICAgICAgICAgICAgICAgcC5kb20uY2xhc3NMaXN0LmFkZChcImNtLXBhbmVsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwLm1vdW50KVxuICAgICAgICAgICAgICAgICAgICBwLm1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKVxuICAgICAgICAgICAgICAgIGlmIChwLnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvcC5zeW5jKFtdKTtcbiAgICAgICAgdGhpcy5ib3R0b20uc3luYyhbXSk7XG4gICAgfVxufSwge1xuICAgIHByb3ZpZGU6IHBsdWdpbiA9PiBFZGl0b3JWaWV3LnNjcm9sbE1hcmdpbnMub2YodmlldyA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgIHJldHVybiB2YWx1ZSAmJiB7IHRvcDogdmFsdWUudG9wLnNjcm9sbE1hcmdpbigpLCBib3R0b206IHZhbHVlLmJvdHRvbS5zY3JvbGxNYXJnaW4oKSB9O1xuICAgIH0pXG59KTtcbmNsYXNzIFBhbmVsR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHRvcCwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IFwiXCI7XG4gICAgICAgIHRoaXMucGFuZWxzID0gW107XG4gICAgICAgIHRoaXMuc3luY0NsYXNzZXMoKTtcbiAgICB9XG4gICAgc3luYyhwYW5lbHMpIHtcbiAgICAgICAgZm9yIChsZXQgcCBvZiB0aGlzLnBhbmVscylcbiAgICAgICAgICAgIGlmIChwLmRlc3Ryb3kgJiYgcGFuZWxzLmluZGV4T2YocCkgPCAwKVxuICAgICAgICAgICAgICAgIHAuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBhbmVscyA9IHBhbmVscztcbiAgICAgICAgdGhpcy5zeW5jRE9NKCk7XG4gICAgfVxuICAgIHN5bmNET00oKSB7XG4gICAgICAgIGlmICh0aGlzLnBhbmVscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmRvbSkge1xuICAgICAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gdGhpcy50b3AgPyBcImNtLXBhbmVscyBjbS1wYW5lbHMtdG9wXCIgOiBcImNtLXBhbmVscyBjbS1wYW5lbHMtYm90dG9tXCI7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZVt0aGlzLnRvcCA/IFwidG9wXCIgOiBcImJvdHRvbVwiXSA9IFwiMFwiO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuY29udGFpbmVyIHx8IHRoaXMudmlldy5kb207XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCB0aGlzLnRvcCA/IHBhcmVudC5maXJzdENoaWxkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1ckRPTSA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IHBhbmVsIG9mIHRoaXMucGFuZWxzKSB7XG4gICAgICAgICAgICBpZiAocGFuZWwuZG9tLnBhcmVudE5vZGUgPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VyRE9NICE9IHBhbmVsLmRvbSlcbiAgICAgICAgICAgICAgICAgICAgY3VyRE9NID0gcm0oY3VyRE9NKTtcbiAgICAgICAgICAgICAgICBjdXJET00gPSBjdXJET00ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5pbnNlcnRCZWZvcmUocGFuZWwuZG9tLCBjdXJET00pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChjdXJET00pXG4gICAgICAgICAgICBjdXJET00gPSBybShjdXJET00pO1xuICAgIH1cbiAgICBzY3JvbGxNYXJnaW4oKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kb20gfHwgdGhpcy5jb250YWluZXIgPyAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KDAsIHRoaXMudG9wID9cbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSBNYXRoLm1heCgwLCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkgOlxuICAgICAgICAgICAgICAgIE1hdGgubWluKGlubmVySGVpZ2h0LCB0aGlzLnZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSkgLSB0aGlzLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xuICAgIH1cbiAgICBzeW5jQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lciB8fCB0aGlzLmNsYXNzZXMgPT0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mIHRoaXMuY2xhc3Nlcy5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mICh0aGlzLmNsYXNzZXMgPSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzKS5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBybShub2RlKSB7XG4gICAgbGV0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgcmV0dXJuIG5leHQ7XG59XG4vKipcbk9wZW5pbmcgYSBwYW5lbCBpcyBkb25lIGJ5IHByb3ZpZGluZyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvclxudGhlIHBhbmVsIHRocm91Z2ggdGhpcyBmYWNldC4gKFRoZSBwYW5lbCBpcyBjbG9zZWQgYWdhaW4gd2hlbiBpdHNcbmNvbnN0cnVjdG9yIGlzIG5vIGxvbmdlciBwcm92aWRlZC4pIFZhbHVlcyBvZiBgbnVsbGAgYXJlIGlnbm9yZWQuXG4qL1xuY29uc3Qgc2hvd1BhbmVsID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgZW5hYmxlczogcGFuZWxQbHVnaW5cbn0pO1xuXG4vKipcblNob3cgYSBwYW5lbCBhYm92ZSBvciBiZWxvdyB0aGUgZWRpdG9yIHRvIHNob3cgdGhlIHVzZXIgYSBtZXNzYWdlXG5vciBwcm9tcHQgdGhlbSBmb3IgaW5wdXQuIFJldHVybnMgYW4gZWZmZWN0IHRoYXQgY2FuIGJlIGRpc3BhdGNoZWRcbnRvIGNsb3NlIHRoZSBkaWFsb2csIGFuZCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBkaWFsb2dcbmlzIGNsb3NlZCBvciBhIGZvcm0gaW5zaWRlIG9mIGl0IGlzIHN1Ym1pdHRlZC5cblxuWW91IGFyZSBlbmNvdXJhZ2VkLCBpZiB5b3VyIGhhbmRsaW5nIG9mIHRoZSByZXN1bHQgb2YgdGhlIHByb21pc2VcbmRpc3BhdGNoZXMgYSB0cmFuc2FjdGlvbiwgdG8gaW5jbHVkZSB0aGUgYGNsb3NlYCBlZmZlY3QgaW4gaXQuIElmXG55b3UgZG9uJ3QsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGRpc3BhdGNoIGEgc2VwYXJhdGVcbnRyYW5zYWN0aW9uIHJpZ2h0IGFmdGVyLlxuKi9cbmZ1bmN0aW9uIHNob3dEaWFsb2codmlldywgY29uZmlnKSB7XG4gICAgbGV0IHJlc29sdmU7XG4gICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyID0+IHJlc29sdmUgPSByKTtcbiAgICBsZXQgcGFuZWxDdG9yID0gKHZpZXcpID0+IGNyZWF0ZURpYWxvZyh2aWV3LCBjb25maWcsIHJlc29sdmUpO1xuICAgIGlmICh2aWV3LnN0YXRlLmZpZWxkKGRpYWxvZ0ZpZWxkLCBmYWxzZSkpIHtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IG9wZW5EaWFsb2dFZmZlY3Qub2YocGFuZWxDdG9yKSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2YoZGlhbG9nRmllbGQuaW5pdCgoKSA9PiBbcGFuZWxDdG9yXSkpIH0pO1xuICAgIH1cbiAgICBsZXQgY2xvc2UgPSBjbG9zZURpYWxvZ0VmZmVjdC5vZihwYW5lbEN0b3IpO1xuICAgIHJldHVybiB7IGNsb3NlLCByZXN1bHQ6IHByb21pc2UudGhlbihmb3JtID0+IHtcbiAgICAgICAgICAgIGxldCBxdWV1ZSA9IHZpZXcud2luLnF1ZXVlTWljcm90YXNrIHx8ICgoZikgPT4gdmlldy53aW4uc2V0VGltZW91dChmLCAxMCkpO1xuICAgICAgICAgICAgcXVldWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LnN0YXRlLmZpZWxkKGRpYWxvZ0ZpZWxkKS5pbmRleE9mKHBhbmVsQ3RvcikgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgfSkgfTtcbn1cbi8qKlxuRmluZCB0aGUgW2BQYW5lbGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5QYW5lbCkgZm9yIGFuIG9wZW4gZGlhbG9nLCB1c2luZyBhIGNsYXNzXG5uYW1lIGFzIGlkZW50aWZpZXIuXG4qL1xuZnVuY3Rpb24gZ2V0RGlhbG9nKHZpZXcsIGNsYXNzTmFtZSkge1xuICAgIGxldCBkaWFsb2dzID0gdmlldy5zdGF0ZS5maWVsZChkaWFsb2dGaWVsZCwgZmFsc2UpIHx8IFtdO1xuICAgIGZvciAobGV0IG9wZW4gb2YgZGlhbG9ncykge1xuICAgICAgICBsZXQgcGFuZWwgPSBnZXRQYW5lbCh2aWV3LCBvcGVuKTtcbiAgICAgICAgaWYgKHBhbmVsICYmIHBhbmVsLmRvbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSlcbiAgICAgICAgICAgIHJldHVybiBwYW5lbDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBkaWFsb2dGaWVsZCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gW107IH0sXG4gICAgdXBkYXRlKGRpYWxvZ3MsIHRyKSB7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGUuaXMob3BlbkRpYWxvZ0VmZmVjdCkpXG4gICAgICAgICAgICAgICAgZGlhbG9ncyA9IFtlLnZhbHVlXS5jb25jYXQoZGlhbG9ncyk7XG4gICAgICAgICAgICBlbHNlIGlmIChlLmlzKGNsb3NlRGlhbG9nRWZmZWN0KSlcbiAgICAgICAgICAgICAgICBkaWFsb2dzID0gZGlhbG9ncy5maWx0ZXIoZCA9PiBkICE9IGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWFsb2dzO1xuICAgIH0sXG4gICAgcHJvdmlkZTogZiA9PiBzaG93UGFuZWwuY29tcHV0ZU4oW2ZdLCBzdGF0ZSA9PiBzdGF0ZS5maWVsZChmKSlcbn0pO1xuY29uc3Qgb3BlbkRpYWxvZ0VmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGNsb3NlRGlhbG9nRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuZnVuY3Rpb24gY3JlYXRlRGlhbG9nKHZpZXcsIGNvbmZpZywgcmVzdWx0KSB7XG4gICAgbGV0IGNvbnRlbnQgPSBjb25maWcuY29udGVudCA/IGNvbmZpZy5jb250ZW50KHZpZXcsICgpID0+IGRvbmUobnVsbCkpIDogbnVsbDtcbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgY29udGVudCA9IGVsdChcImZvcm1cIik7XG4gICAgICAgIGlmIChjb25maWcuaW5wdXQpIHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGVsdChcImlucHV0XCIsIGNvbmZpZy5pbnB1dCk7XG4gICAgICAgICAgICBpZiAoL14odGV4dHxwYXNzd29yZHxudW1iZXJ8ZW1haWx8dGVsfHVybCkkLy50ZXN0KGlucHV0LnR5cGUpKVxuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJjbS10ZXh0ZmllbGRcIik7XG4gICAgICAgICAgICBpZiAoIWlucHV0Lm5hbWUpXG4gICAgICAgICAgICAgICAgaW5wdXQubmFtZSA9IFwiaW5wdXRcIjtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwibGFiZWxcIiwgKGNvbmZpZy5sYWJlbCB8fCBcIlwiKSArIFwiOiBcIiwgaW5wdXQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29uZmlnLmxhYmVsIHx8IFwiXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiIFwiKSk7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIgfSwgY29uZmlnLnN1Ym1pdExhYmVsIHx8IFwiT0tcIikpO1xuICAgIH1cbiAgICBsZXQgZm9ybXMgPSBjb250ZW50Lm5vZGVOYW1lID09IFwiRk9STVwiID8gW2NvbnRlbnRdIDogY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZm9ybVwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBmb3JtID0gZm9ybXNbaV07XG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGRvbmUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7IC8vIEVudGVyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBkb25lKGZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRvbmUoZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgcGFuZWwgPSBlbHQoXCJkaXZcIiwgY29udGVudCwgZWx0KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgb25jbGljazogKCkgPT4gZG9uZShudWxsKSxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHZpZXcuc3RhdGUucGhyYXNlKFwiY2xvc2VcIiksXG4gICAgICAgIGNsYXNzOiBcImNtLWRpYWxvZy1jbG9zZVwiLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgfSwgW1wiw5dcIl0pKTtcbiAgICBpZiAoY29uZmlnLmNsYXNzKVxuICAgICAgICBwYW5lbC5jbGFzc05hbWUgPSBjb25maWcuY2xhc3M7XG4gICAgcGFuZWwuY2xhc3NMaXN0LmFkZChcImNtLWRpYWxvZ1wiKTtcbiAgICBmdW5jdGlvbiBkb25lKGZvcm0pIHtcbiAgICAgICAgaWYgKHBhbmVsLmNvbnRhaW5zKHBhbmVsLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpXG4gICAgICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgIHJlc3VsdChmb3JtKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9tOiBwYW5lbCxcbiAgICAgICAgdG9wOiBjb25maWcudG9wLFxuICAgICAgICBtb3VudDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5mb2N1cykge1xuICAgICAgICAgICAgICAgIGxldCBmb2N1cztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5mb2N1cyA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICBmb2N1cyA9IGNvbnRlbnQucXVlcnlTZWxlY3Rvcihjb25maWcuZm9jdXMpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm9jdXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSB8fCBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgICAgICAgICAgICAgaWYgKGZvY3VzICYmIFwic2VsZWN0XCIgaW4gZm9jdXMpXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzLnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvY3VzICYmIFwiZm9jdXNcIiBpbiBmb2N1cylcbiAgICAgICAgICAgICAgICAgICAgZm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuQSBndXR0ZXIgbWFya2VyIHJlcHJlc2VudHMgYSBiaXQgb2YgaW5mb3JtYXRpb24gYXR0YWNoZWQgdG8gYSBsaW5lXG5pbiBhIHNwZWNpZmljIGd1dHRlci4gWW91ciBvd24gY3VzdG9tIG1hcmtlcnMgaGF2ZSB0byBleHRlbmQgdGhpc1xuY2xhc3MuXG4qL1xuY2xhc3MgR3V0dGVyTWFya2VyIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21wYXJlKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzID09IG90aGVyIHx8IHRoaXMuY29uc3RydWN0b3IgPT0gb3RoZXIuY29uc3RydWN0b3IgJiYgdGhpcy5lcShvdGhlcik7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBtYXJrZXIgdG8gYW5vdGhlciBtYXJrZXIgb2YgdGhlIHNhbWUgdHlwZS5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIENhbGxlZCBpZiB0aGUgbWFya2VyIGhhcyBhIGB0b0RPTWAgbWV0aG9kIGFuZCBpdHMgcmVwcmVzZW50YXRpb25cbiAgICB3YXMgcmVtb3ZlZCBmcm9tIGEgZ3V0dGVyLlxuICAgICovXG4gICAgZGVzdHJveShkb20pIHsgfVxufVxuR3V0dGVyTWFya2VyLnByb3RvdHlwZS5lbGVtZW50Q2xhc3MgPSBcIlwiO1xuR3V0dGVyTWFya2VyLnByb3RvdHlwZS50b0RPTSA9IHVuZGVmaW5lZDtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUubWFwTW9kZSA9IE1hcE1vZGUuVHJhY2tCZWZvcmU7XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLnN0YXJ0U2lkZSA9IEd1dHRlck1hcmtlci5wcm90b3R5cGUuZW5kU2lkZSA9IC0xO1xuR3V0dGVyTWFya2VyLnByb3RvdHlwZS5wb2ludCA9IHRydWU7XG4vKipcbkZhY2V0IHVzZWQgdG8gYWRkIGEgY2xhc3MgdG8gYWxsIGd1dHRlciBlbGVtZW50cyBmb3IgYSBnaXZlbiBsaW5lLlxuTWFya2VycyBnaXZlbiB0byB0aGlzIGZhY2V0IHNob3VsZCBfb25seV8gZGVmaW5lIGFuXG5bYGVsZW1lbnRjbGFzc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5HdXR0ZXJNYXJrZXIuZWxlbWVudENsYXNzKSwgbm90IGFcbltgdG9ET01gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuR3V0dGVyTWFya2VyLnRvRE9NKSAob3IgdGhlIG1hcmtlciB3aWxsIGFwcGVhclxuaW4gYWxsIGd1dHRlcnMgZm9yIHRoZSBsaW5lKS5cbiovXG5jb25zdCBndXR0ZXJMaW5lQ2xhc3MgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkZhY2V0IHVzZWQgdG8gYWRkIGEgY2xhc3MgdG8gYWxsIGd1dHRlciBlbGVtZW50cyBuZXh0IHRvIGEgd2lkZ2V0LlxuU2hvdWxkIG5vdCBwcm92aWRlIHdpZGdldHMgd2l0aCBhIGB0b0RPTWAgbWV0aG9kLlxuKi9cbmNvbnN0IGd1dHRlcldpZGdldENsYXNzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgY2xhc3M6IFwiXCIsXG4gICAgcmVuZGVyRW1wdHlFbGVtZW50czogZmFsc2UsXG4gICAgZWxlbWVudFN0eWxlOiBcIlwiLFxuICAgIG1hcmtlcnM6ICgpID0+IFJhbmdlU2V0LmVtcHR5LFxuICAgIGxpbmVNYXJrZXI6ICgpID0+IG51bGwsXG4gICAgd2lkZ2V0TWFya2VyOiAoKSA9PiBudWxsLFxuICAgIGxpbmVNYXJrZXJDaGFuZ2U6IG51bGwsXG4gICAgaW5pdGlhbFNwYWNlcjogbnVsbCxcbiAgICB1cGRhdGVTcGFjZXI6IG51bGwsXG4gICAgZG9tRXZlbnRIYW5kbGVyczoge30sXG4gICAgc2lkZTogXCJiZWZvcmVcIlxufTtcbmNvbnN0IGFjdGl2ZUd1dHRlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkRlZmluZSBhbiBlZGl0b3IgZ3V0dGVyLiBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIGd1dHRlcnMgYXBwZWFyIGlzXG5kZXRlcm1pbmVkIGJ5IHRoZWlyIGV4dGVuc2lvbiBwcmlvcml0eS5cbiovXG5mdW5jdGlvbiBndXR0ZXIoY29uZmlnKSB7XG4gICAgcmV0dXJuIFtndXR0ZXJzKCksIGFjdGl2ZUd1dHRlcnMub2YoeyAuLi5kZWZhdWx0cywgLi4uY29uZmlnIH0pXTtcbn1cbmNvbnN0IHVuZml4R3V0dGVycyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbi8qKlxuVGhlIGd1dHRlci1kcmF3aW5nIHBsdWdpbiBpcyBhdXRvbWF0aWNhbGx5IGVuYWJsZWQgd2hlbiB5b3UgYWRkIGFcbmd1dHRlciwgYnV0IHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24gdG8gZXhwbGljaXRseSBjb25maWd1cmUgaXQuXG5cblVubGVzcyBgZml4ZWRgIGlzIGV4cGxpY2l0bHkgc2V0IHRvIGBmYWxzZWAsIHRoZSBndXR0ZXJzIGFyZVxuZml4ZWQsIG1lYW5pbmcgdGhleSBkb24ndCBzY3JvbGwgYWxvbmcgd2l0aCB0aGUgY29udGVudFxuaG9yaXpvbnRhbGx5IChleGNlcHQgb24gSW50ZXJuZXQgRXhwbG9yZXIsIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydFxuQ1NTIFtgcG9zaXRpb246XG5zdGlja3lgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvcG9zaXRpb24jc3RpY2t5KSkuXG4qL1xuZnVuY3Rpb24gZ3V0dGVycyhjb25maWcpIHtcbiAgICBsZXQgcmVzdWx0ID0gW1xuICAgICAgICBndXR0ZXJWaWV3LFxuICAgIF07XG4gICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZml4ZWQgPT09IGZhbHNlKVxuICAgICAgICByZXN1bHQucHVzaCh1bmZpeEd1dHRlcnMub2YodHJ1ZSkpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBndXR0ZXJWaWV3ID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZG9tQWZ0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnByZXZWaWV3cG9ydCA9IHZpZXcudmlld3BvcnQ7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gXCJjbS1ndXR0ZXJzIGNtLWd1dHRlcnMtYmVmb3JlXCI7XG4gICAgICAgIHRoaXMuZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdGhpcy5kb20uc3R5bGUubWluSGVpZ2h0ID0gKHRoaXMudmlldy5jb250ZW50SGVpZ2h0IC8gdGhpcy52aWV3LnNjYWxlWSkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMuZ3V0dGVycyA9IHZpZXcuc3RhdGUuZmFjZXQoYWN0aXZlR3V0dGVycykubWFwKGNvbmYgPT4gbmV3IFNpbmdsZUd1dHRlclZpZXcodmlldywgY29uZikpO1xuICAgICAgICB0aGlzLmZpeGVkID0gIXZpZXcuc3RhdGUuZmFjZXQodW5maXhHdXR0ZXJzKTtcbiAgICAgICAgZm9yIChsZXQgZ3V0dGVyIG9mIHRoaXMuZ3V0dGVycykge1xuICAgICAgICAgICAgaWYgKGd1dHRlci5jb25maWcuc2lkZSA9PSBcImFmdGVyXCIpXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRET01BZnRlcigpLmFwcGVuZENoaWxkKGd1dHRlci5kb20pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGd1dHRlci5kb20pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZpeGVkKSB7XG4gICAgICAgICAgICAvLyBGSVhNRSBJRTExIGZhbGxiYWNrLCB3aGljaCBkb2Vzbid0IHN1cHBvcnQgcG9zaXRpb246IHN0aWNreSxcbiAgICAgICAgICAgIC8vIGJ5IHVzaW5nIHBvc2l0aW9uOiByZWxhdGl2ZSArIGV2ZW50IGhhbmRsZXJzIHRoYXQgcmVhbGlnbiB0aGVcbiAgICAgICAgICAgIC8vIGd1dHRlciAob3IganVzdCBmb3JjZSBmaXhlZD1mYWxzZSBvbiBJRTExPylcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLnBvc2l0aW9uID0gXCJzdGlja3lcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmNHdXR0ZXJzKGZhbHNlKTtcbiAgICAgICAgdmlldy5zY3JvbGxET00uaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLCB2aWV3LmNvbnRlbnRET00pO1xuICAgIH1cbiAgICBnZXRET01BZnRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvbUFmdGVyKSB7XG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuY2xhc3NOYW1lID0gXCJjbS1ndXR0ZXJzIGNtLWd1dHRlcnMtYWZ0ZXJcIjtcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgdGhpcy5kb21BZnRlci5zdHlsZS5taW5IZWlnaHQgPSAodGhpcy52aWV3LmNvbnRlbnRIZWlnaHQgLyB0aGlzLnZpZXcuc2NhbGVZKSArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuc3R5bGUucG9zaXRpb24gPSB0aGlzLmZpeGVkID8gXCJzdGlja3lcIiA6IFwiXCI7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsRE9NLmFwcGVuZENoaWxkKHRoaXMuZG9tQWZ0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRvbUFmdGVyO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUd1dHRlcnModXBkYXRlKSkge1xuICAgICAgICAgICAgLy8gRGV0YWNoIGR1cmluZyBzeW5jIHdoZW4gdGhlIHZpZXdwb3J0IGNoYW5nZWQgc2lnbmlmaWNhbnRseVxuICAgICAgICAgICAgLy8gKHN1Y2ggYXMgZHVyaW5nIHNjcm9sbGluZyksIHNpbmNlIGZvciBsYXJnZSB1cGRhdGVzIHRoYXQgaXNcbiAgICAgICAgICAgIC8vIGZhc3Rlci5cbiAgICAgICAgICAgIGxldCB2cEEgPSB0aGlzLnByZXZWaWV3cG9ydCwgdnBCID0gdXBkYXRlLnZpZXcudmlld3BvcnQ7XG4gICAgICAgICAgICBsZXQgdnBPdmVybGFwID0gTWF0aC5taW4odnBBLnRvLCB2cEIudG8pIC0gTWF0aC5tYXgodnBBLmZyb20sIHZwQi5mcm9tKTtcbiAgICAgICAgICAgIHRoaXMuc3luY0d1dHRlcnModnBPdmVybGFwIDwgKHZwQi50byAtIHZwQi5mcm9tKSAqIDAuOCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZS5nZW9tZXRyeUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGxldCBtaW4gPSAodGhpcy52aWV3LmNvbnRlbnRIZWlnaHQgLyB0aGlzLnZpZXcuc2NhbGVZKSArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlLm1pbkhlaWdodCA9IG1pbjtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbUFmdGVyKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuc3R5bGUubWluSGVpZ2h0ID0gbWluO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpZXcuc3RhdGUuZmFjZXQodW5maXhHdXR0ZXJzKSAhPSAhdGhpcy5maXhlZCkge1xuICAgICAgICAgICAgdGhpcy5maXhlZCA9ICF0aGlzLmZpeGVkO1xuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUucG9zaXRpb24gPSB0aGlzLmZpeGVkID8gXCJzdGlja3lcIiA6IFwiXCI7XG4gICAgICAgICAgICBpZiAodGhpcy5kb21BZnRlcilcbiAgICAgICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5maXhlZCA/IFwic3RpY2t5XCIgOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJldlZpZXdwb3J0ID0gdXBkYXRlLnZpZXcudmlld3BvcnQ7XG4gICAgfVxuICAgIHN5bmNHdXR0ZXJzKGRldGFjaCkge1xuICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLmRvbS5uZXh0U2libGluZztcbiAgICAgICAgaWYgKGRldGFjaCkge1xuICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5kb21BZnRlcilcbiAgICAgICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5lQ2xhc3NlcyA9IFJhbmdlU2V0Lml0ZXIodGhpcy52aWV3LnN0YXRlLmZhY2V0KGd1dHRlckxpbmVDbGFzcyksIHRoaXMudmlldy52aWV3cG9ydC5mcm9tKTtcbiAgICAgICAgbGV0IGNsYXNzU2V0ID0gW107XG4gICAgICAgIGxldCBjb250ZXh0cyA9IHRoaXMuZ3V0dGVycy5tYXAoZ3V0dGVyID0+IG5ldyBVcGRhdGVDb250ZXh0KGd1dHRlciwgdGhpcy52aWV3LnZpZXdwb3J0LCAtdGhpcy52aWV3LmRvY3VtZW50UGFkZGluZy50b3ApKTtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0aGlzLnZpZXcudmlld3BvcnRMaW5lQmxvY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2xhc3NTZXQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNsYXNzU2V0ID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5lLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBiIG9mIGxpbmUudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYi50eXBlID09IEJsb2NrVHlwZS5UZXh0ICYmIGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlQ3Vyc29yKGxpbmVDbGFzc2VzLCBjbGFzc1NldCwgYi5mcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGN4IG9mIGNvbnRleHRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4LmxpbmUodGhpcy52aWV3LCBiLCBjbGFzc1NldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGIud2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeC53aWRnZXQodGhpcy52aWV3LCBiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpbmUudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgIGFkdmFuY2VDdXJzb3IobGluZUNsYXNzZXMsIGNsYXNzU2V0LCBsaW5lLmZyb20pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGN4IG9mIGNvbnRleHRzKVxuICAgICAgICAgICAgICAgICAgICBjeC5saW5lKHRoaXMudmlldywgbGluZSwgY2xhc3NTZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGluZS53aWRnZXQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgICAgICAgICAgY3gud2lkZ2V0KHRoaXMudmlldywgbGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICBjeC5maW5pc2goKTtcbiAgICAgICAgaWYgKGRldGFjaCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5pbnNlcnRCZWZvcmUodGhpcy5kb20sIGFmdGVyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbUFmdGVyKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxET00uYXBwZW5kQ2hpbGQodGhpcy5kb21BZnRlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlR3V0dGVycyh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHByZXYgPSB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChhY3RpdmVHdXR0ZXJzKSwgY3VyID0gdXBkYXRlLnN0YXRlLmZhY2V0KGFjdGl2ZUd1dHRlcnMpO1xuICAgICAgICBsZXQgY2hhbmdlID0gdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLmhlaWdodENoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fFxuICAgICAgICAgICAgIVJhbmdlU2V0LmVxKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGd1dHRlckxpbmVDbGFzcyksIHVwZGF0ZS5zdGF0ZS5mYWNldChndXR0ZXJMaW5lQ2xhc3MpLCB1cGRhdGUudmlldy52aWV3cG9ydC5mcm9tLCB1cGRhdGUudmlldy52aWV3cG9ydC50byk7XG4gICAgICAgIGlmIChwcmV2ID09IGN1cikge1xuICAgICAgICAgICAgZm9yIChsZXQgZ3V0dGVyIG9mIHRoaXMuZ3V0dGVycylcbiAgICAgICAgICAgICAgICBpZiAoZ3V0dGVyLnVwZGF0ZSh1cGRhdGUpKVxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBndXR0ZXJzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjb25mIG9mIGN1cikge1xuICAgICAgICAgICAgICAgIGxldCBrbm93biA9IHByZXYuaW5kZXhPZihjb25mKTtcbiAgICAgICAgICAgICAgICBpZiAoa25vd24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcnMucHVzaChuZXcgU2luZ2xlR3V0dGVyVmlldyh0aGlzLnZpZXcsIGNvbmYpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3V0dGVyc1trbm93bl0udXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcnMucHVzaCh0aGlzLmd1dHRlcnNba25vd25dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBnIG9mIHRoaXMuZ3V0dGVycykge1xuICAgICAgICAgICAgICAgIGcuZG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChndXR0ZXJzLmluZGV4T2YoZykgPCAwKVxuICAgICAgICAgICAgICAgICAgICBnLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGcgb2YgZ3V0dGVycykge1xuICAgICAgICAgICAgICAgIGlmIChnLmNvbmZpZy5zaWRlID09IFwiYWZ0ZXJcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRET01BZnRlcigpLmFwcGVuZENoaWxkKGcuZG9tKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKGcuZG9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ3V0dGVycyA9IGd1dHRlcnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgZm9yIChsZXQgdmlldyBvZiB0aGlzLmd1dHRlcnMpXG4gICAgICAgICAgICB2aWV3LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgIGlmICh0aGlzLmRvbUFmdGVyKVxuICAgICAgICAgICAgdGhpcy5kb21BZnRlci5yZW1vdmUoKTtcbiAgICB9XG59LCB7XG4gICAgcHJvdmlkZTogcGx1Z2luID0+IEVkaXRvclZpZXcuc2Nyb2xsTWFyZ2lucy5vZih2aWV3ID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gdmlldy5wbHVnaW4ocGx1Z2luKTtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5ndXR0ZXJzLmxlbmd0aCA9PSAwIHx8ICF2YWx1ZS5maXhlZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgYmVmb3JlID0gdmFsdWUuZG9tLm9mZnNldFdpZHRoICogdmlldy5zY2FsZVgsIGFmdGVyID0gdmFsdWUuZG9tQWZ0ZXIgPyB2YWx1ZS5kb21BZnRlci5vZmZzZXRXaWR0aCAqIHZpZXcuc2NhbGVYIDogMDtcbiAgICAgICAgcmV0dXJuIHZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSXG4gICAgICAgICAgICA/IHsgbGVmdDogYmVmb3JlLCByaWdodDogYWZ0ZXIgfVxuICAgICAgICAgICAgOiB7IHJpZ2h0OiBiZWZvcmUsIGxlZnQ6IGFmdGVyIH07XG4gICAgfSlcbn0pO1xuZnVuY3Rpb24gYXNBcnJheSh2YWwpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwgOiBbdmFsXSk7IH1cbmZ1bmN0aW9uIGFkdmFuY2VDdXJzb3IoY3Vyc29yLCBjb2xsZWN0LCBwb3MpIHtcbiAgICB3aGlsZSAoY3Vyc29yLnZhbHVlICYmIGN1cnNvci5mcm9tIDw9IHBvcykge1xuICAgICAgICBpZiAoY3Vyc29yLmZyb20gPT0gcG9zKVxuICAgICAgICAgICAgY29sbGVjdC5wdXNoKGN1cnNvci52YWx1ZSk7XG4gICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgfVxufVxuY2xhc3MgVXBkYXRlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoZ3V0dGVyLCB2aWV3cG9ydCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuZ3V0dGVyID0gZ3V0dGVyO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBSYW5nZVNldC5pdGVyKGd1dHRlci5tYXJrZXJzLCB2aWV3cG9ydC5mcm9tKTtcbiAgICB9XG4gICAgYWRkRWxlbWVudCh2aWV3LCBibG9jaywgbWFya2Vycykge1xuICAgICAgICBsZXQgeyBndXR0ZXIgfSA9IHRoaXMsIGFib3ZlID0gKGJsb2NrLnRvcCAtIHRoaXMuaGVpZ2h0KSAvIHZpZXcuc2NhbGVZLCBoZWlnaHQgPSBibG9jay5oZWlnaHQgLyB2aWV3LnNjYWxlWTtcbiAgICAgICAgaWYgKHRoaXMuaSA9PSBndXR0ZXIuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgbmV3RWx0ID0gbmV3IEd1dHRlckVsZW1lbnQodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycyk7XG4gICAgICAgICAgICBndXR0ZXIuZWxlbWVudHMucHVzaChuZXdFbHQpO1xuICAgICAgICAgICAgZ3V0dGVyLmRvbS5hcHBlbmRDaGlsZChuZXdFbHQuZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGd1dHRlci5lbGVtZW50c1t0aGlzLmldLnVwZGF0ZSh2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhlaWdodCA9IGJsb2NrLmJvdHRvbTtcbiAgICAgICAgdGhpcy5pKys7XG4gICAgfVxuICAgIGxpbmUodmlldywgbGluZSwgZXh0cmFNYXJrZXJzKSB7XG4gICAgICAgIGxldCBsb2NhbE1hcmtlcnMgPSBbXTtcbiAgICAgICAgYWR2YW5jZUN1cnNvcih0aGlzLmN1cnNvciwgbG9jYWxNYXJrZXJzLCBsaW5lLmZyb20pO1xuICAgICAgICBpZiAoZXh0cmFNYXJrZXJzLmxlbmd0aClcbiAgICAgICAgICAgIGxvY2FsTWFya2VycyA9IGxvY2FsTWFya2Vycy5jb25jYXQoZXh0cmFNYXJrZXJzKTtcbiAgICAgICAgbGV0IGZvckxpbmUgPSB0aGlzLmd1dHRlci5jb25maWcubGluZU1hcmtlcih2aWV3LCBsaW5lLCBsb2NhbE1hcmtlcnMpO1xuICAgICAgICBpZiAoZm9yTGluZSlcbiAgICAgICAgICAgIGxvY2FsTWFya2Vycy51bnNoaWZ0KGZvckxpbmUpO1xuICAgICAgICBsZXQgZ3V0dGVyID0gdGhpcy5ndXR0ZXI7XG4gICAgICAgIGlmIChsb2NhbE1hcmtlcnMubGVuZ3RoID09IDAgJiYgIWd1dHRlci5jb25maWcucmVuZGVyRW1wdHlFbGVtZW50cylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5hZGRFbGVtZW50KHZpZXcsIGxpbmUsIGxvY2FsTWFya2Vycyk7XG4gICAgfVxuICAgIHdpZGdldCh2aWV3LCBibG9jaykge1xuICAgICAgICBsZXQgbWFya2VyID0gdGhpcy5ndXR0ZXIuY29uZmlnLndpZGdldE1hcmtlcih2aWV3LCBibG9jay53aWRnZXQsIGJsb2NrKSwgbWFya2VycyA9IG1hcmtlciA/IFttYXJrZXJdIDogbnVsbDtcbiAgICAgICAgZm9yIChsZXQgY2xzIG9mIHZpZXcuc3RhdGUuZmFjZXQoZ3V0dGVyV2lkZ2V0Q2xhc3MpKSB7XG4gICAgICAgICAgICBsZXQgbWFya2VyID0gY2xzKHZpZXcsIGJsb2NrLndpZGdldCwgYmxvY2spO1xuICAgICAgICAgICAgaWYgKG1hcmtlcilcbiAgICAgICAgICAgICAgICAobWFya2VycyB8fCAobWFya2VycyA9IFtdKSkucHVzaChtYXJrZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrZXJzKVxuICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50KHZpZXcsIGJsb2NrLCBtYXJrZXJzKTtcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICBsZXQgZ3V0dGVyID0gdGhpcy5ndXR0ZXI7XG4gICAgICAgIHdoaWxlIChndXR0ZXIuZWxlbWVudHMubGVuZ3RoID4gdGhpcy5pKSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IGd1dHRlci5lbGVtZW50cy5wb3AoKTtcbiAgICAgICAgICAgIGd1dHRlci5kb20ucmVtb3ZlQ2hpbGQobGFzdC5kb20pO1xuICAgICAgICAgICAgbGFzdC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBTaW5nbGVHdXR0ZXJWaWV3IHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBjb25maWcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5zcGFjZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tZ3V0dGVyXCIgKyAodGhpcy5jb25maWcuY2xhc3MgPyBcIiBcIiArIHRoaXMuY29uZmlnLmNsYXNzIDogXCJcIik7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gY29uZmlnLmRvbUV2ZW50SGFuZGxlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIocHJvcCwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldCwgeTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9IHRoaXMuZG9tICYmIHRoaXMuZG9tLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRhcmdldC5wYXJlbnROb2RlICE9IHRoaXMuZG9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB5ID0gKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXRIZWlnaHQoeSAtIHZpZXcuZG9jdW1lbnRUb3ApO1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuZG9tRXZlbnRIYW5kbGVyc1twcm9wXSh2aWV3LCBsaW5lLCBldmVudCkpXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtlcnMgPSBhc0FycmF5KGNvbmZpZy5tYXJrZXJzKHZpZXcpKTtcbiAgICAgICAgaWYgKGNvbmZpZy5pbml0aWFsU3BhY2VyKSB7XG4gICAgICAgICAgICB0aGlzLnNwYWNlciA9IG5ldyBHdXR0ZXJFbGVtZW50KHZpZXcsIDAsIDAsIFtjb25maWcuaW5pdGlhbFNwYWNlcih2aWV3KV0pO1xuICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5zcGFjZXIuZG9tKTtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VyLmRvbS5zdHlsZS5jc3NUZXh0ICs9IFwidmlzaWJpbGl0eTogaGlkZGVuOyBwb2ludGVyLWV2ZW50czogbm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHByZXZNYXJrZXJzID0gdGhpcy5tYXJrZXJzO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBhc0FycmF5KHRoaXMuY29uZmlnLm1hcmtlcnModXBkYXRlLnZpZXcpKTtcbiAgICAgICAgaWYgKHRoaXMuc3BhY2VyICYmIHRoaXMuY29uZmlnLnVwZGF0ZVNwYWNlcikge1xuICAgICAgICAgICAgbGV0IHVwZGF0ZWQgPSB0aGlzLmNvbmZpZy51cGRhdGVTcGFjZXIodGhpcy5zcGFjZXIubWFya2Vyc1swXSwgdXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkICE9IHRoaXMuc3BhY2VyLm1hcmtlcnNbMF0pXG4gICAgICAgICAgICAgICAgdGhpcy5zcGFjZXIudXBkYXRlKHVwZGF0ZS52aWV3LCAwLCAwLCBbdXBkYXRlZF0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2cCA9IHVwZGF0ZS52aWV3LnZpZXdwb3J0O1xuICAgICAgICByZXR1cm4gIVJhbmdlU2V0LmVxKHRoaXMubWFya2VycywgcHJldk1hcmtlcnMsIHZwLmZyb20sIHZwLnRvKSB8fFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLmxpbmVNYXJrZXJDaGFuZ2UgPyB0aGlzLmNvbmZpZy5saW5lTWFya2VyQ2hhbmdlKHVwZGF0ZSkgOiBmYWxzZSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IGVsdCBvZiB0aGlzLmVsZW1lbnRzKVxuICAgICAgICAgICAgZWx0LmRlc3Ryb3koKTtcbiAgICB9XG59XG5jbGFzcyBHdXR0ZXJFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gLTE7XG4gICAgICAgIHRoaXMuYWJvdmUgPSAwO1xuICAgICAgICB0aGlzLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWd1dHRlckVsZW1lbnRcIjtcbiAgICAgICAgdGhpcy51cGRhdGUodmlldywgaGVpZ2h0LCBhYm92ZSwgbWFya2Vycyk7XG4gICAgfVxuICAgIHVwZGF0ZSh2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFib3ZlICE9IGFib3ZlKVxuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUubWFyZ2luVG9wID0gKHRoaXMuYWJvdmUgPSBhYm92ZSkgPyBhYm92ZSArIFwicHhcIiA6IFwiXCI7XG4gICAgICAgIGlmICghc2FtZU1hcmtlcnModGhpcy5tYXJrZXJzLCBtYXJrZXJzKSlcbiAgICAgICAgICAgIHRoaXMuc2V0TWFya2Vycyh2aWV3LCBtYXJrZXJzKTtcbiAgICB9XG4gICAgc2V0TWFya2Vycyh2aWV3LCBtYXJrZXJzKSB7XG4gICAgICAgIGxldCBjbHMgPSBcImNtLWd1dHRlckVsZW1lbnRcIiwgZG9tUG9zID0gdGhpcy5kb20uZmlyc3RDaGlsZDtcbiAgICAgICAgZm9yIChsZXQgaU5ldyA9IDAsIGlPbGQgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBza2lwVG8gPSBpT2xkLCBtYXJrZXIgPSBpTmV3IDwgbWFya2Vycy5sZW5ndGggPyBtYXJrZXJzW2lOZXcrK10gOiBudWxsLCBtYXRjaGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAobWFya2VyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGMgPSBtYXJrZXIuZWxlbWVudENsYXNzO1xuICAgICAgICAgICAgICAgIGlmIChjKVxuICAgICAgICAgICAgICAgICAgICBjbHMgKz0gXCIgXCIgKyBjO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBpT2xkOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXJrZXJzW2ldLmNvbXBhcmUobWFya2VyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFRvID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNraXBUbyA9IHRoaXMubWFya2Vycy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaU9sZCA8IHNraXBUbykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5tYXJrZXJzW2lPbGQrK107XG4gICAgICAgICAgICAgICAgaWYgKG5leHQudG9ET00pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5kZXN0cm95KGRvbVBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZnRlciA9IGRvbVBvcy5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgZG9tUG9zLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBkb21Qb3MgPSBhZnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hcmtlcilcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChtYXJrZXIudG9ET00pIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZClcbiAgICAgICAgICAgICAgICAgICAgZG9tUG9zID0gZG9tUG9zLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uaW5zZXJ0QmVmb3JlKG1hcmtlci50b0RPTSh2aWV3KSwgZG9tUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRjaGVkKVxuICAgICAgICAgICAgICAgIGlPbGQrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBjbHM7XG4gICAgICAgIHRoaXMubWFya2VycyA9IG1hcmtlcnM7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc2V0TWFya2VycyhudWxsLCBbXSk7IC8vIEZpcnN0IGFyZ3VtZW50IG5vdCB1c2VkIHVubGVzcyBjcmVhdGluZyBtYXJrZXJzXG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZU1hcmtlcnMoYSwgYikge1xuICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKCFhW2ldLmNvbXBhcmUoYltpXSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbkZhY2V0IHVzZWQgdG8gcHJvdmlkZSBtYXJrZXJzIHRvIHRoZSBsaW5lIG51bWJlciBndXR0ZXIuXG4qL1xuY29uc3QgbGluZU51bWJlck1hcmtlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkZhY2V0IHVzZWQgdG8gY3JlYXRlIG1hcmtlcnMgaW4gdGhlIGxpbmUgbnVtYmVyIGd1dHRlciBuZXh0IHRvIHdpZGdldHMuXG4qL1xuY29uc3QgbGluZU51bWJlcldpZGdldE1hcmtlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGxpbmVOdW1iZXJDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyh2YWx1ZXMsIHsgZm9ybWF0TnVtYmVyOiBTdHJpbmcsIGRvbUV2ZW50SGFuZGxlcnM6IHt9IH0sIHtcbiAgICAgICAgICAgIGRvbUV2ZW50SGFuZGxlcnMoYSwgYikge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBldmVudCBpbiBiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBleGlzdHMgPSByZXN1bHRbZXZlbnRdLCBhZGQgPSBiW2V2ZW50XTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2V2ZW50XSA9IGV4aXN0cyA/ICh2aWV3LCBsaW5lLCBldmVudCkgPT4gZXhpc3RzKHZpZXcsIGxpbmUsIGV2ZW50KSB8fCBhZGQodmlldywgbGluZSwgZXZlbnQpIDogYWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbmNsYXNzIE51bWJlck1hcmtlciBleHRlbmRzIEd1dHRlck1hcmtlciB7XG4gICAgY29uc3RydWN0b3IobnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gdGhpcy5udW1iZXIgPT0gb3RoZXIubnVtYmVyOyB9XG4gICAgdG9ET00oKSB7IHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLm51bWJlcik7IH1cbn1cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcih2aWV3LCBudW1iZXIpIHtcbiAgICByZXR1cm4gdmlldy5zdGF0ZS5mYWNldChsaW5lTnVtYmVyQ29uZmlnKS5mb3JtYXROdW1iZXIobnVtYmVyLCB2aWV3LnN0YXRlKTtcbn1cbmNvbnN0IGxpbmVOdW1iZXJHdXR0ZXIgPSAvKkBfX1BVUkVfXyovYWN0aXZlR3V0dGVycy5jb21wdXRlKFtsaW5lTnVtYmVyQ29uZmlnXSwgc3RhdGUgPT4gKHtcbiAgICBjbGFzczogXCJjbS1saW5lTnVtYmVyc1wiLFxuICAgIHJlbmRlckVtcHR5RWxlbWVudHM6IGZhbHNlLFxuICAgIG1hcmtlcnModmlldykgeyByZXR1cm4gdmlldy5zdGF0ZS5mYWNldChsaW5lTnVtYmVyTWFya2Vycyk7IH0sXG4gICAgbGluZU1hcmtlcih2aWV3LCBsaW5lLCBvdGhlcnMpIHtcbiAgICAgICAgaWYgKG90aGVycy5zb21lKG0gPT4gbS50b0RPTSkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJNYXJrZXIoZm9ybWF0TnVtYmVyKHZpZXcsIHZpZXcuc3RhdGUuZG9jLmxpbmVBdChsaW5lLmZyb20pLm51bWJlcikpO1xuICAgIH0sXG4gICAgd2lkZ2V0TWFya2VyOiAodmlldywgd2lkZ2V0LCBibG9jaykgPT4ge1xuICAgICAgICBmb3IgKGxldCBtIG9mIHZpZXcuc3RhdGUuZmFjZXQobGluZU51bWJlcldpZGdldE1hcmtlcikpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBtKHZpZXcsIHdpZGdldCwgYmxvY2spO1xuICAgICAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgbGluZU1hcmtlckNoYW5nZTogdXBkYXRlID0+IHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpICE9IHVwZGF0ZS5zdGF0ZS5mYWNldChsaW5lTnVtYmVyQ29uZmlnKSxcbiAgICBpbml0aWFsU3BhY2VyKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJNYXJrZXIoZm9ybWF0TnVtYmVyKHZpZXcsIG1heExpbmVOdW1iZXIodmlldy5zdGF0ZS5kb2MubGluZXMpKSk7XG4gICAgfSxcbiAgICB1cGRhdGVTcGFjZXIoc3BhY2VyLCB1cGRhdGUpIHtcbiAgICAgICAgbGV0IG1heCA9IGZvcm1hdE51bWJlcih1cGRhdGUudmlldywgbWF4TGluZU51bWJlcih1cGRhdGUudmlldy5zdGF0ZS5kb2MubGluZXMpKTtcbiAgICAgICAgcmV0dXJuIG1heCA9PSBzcGFjZXIubnVtYmVyID8gc3BhY2VyIDogbmV3IE51bWJlck1hcmtlcihtYXgpO1xuICAgIH0sXG4gICAgZG9tRXZlbnRIYW5kbGVyczogc3RhdGUuZmFjZXQobGluZU51bWJlckNvbmZpZykuZG9tRXZlbnRIYW5kbGVycyxcbiAgICBzaWRlOiBcImJlZm9yZVwiXG59KSk7XG4vKipcbkNyZWF0ZSBhIGxpbmUgbnVtYmVyIGd1dHRlciBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gbGluZU51bWJlcnMoY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBsaW5lTnVtYmVyQ29uZmlnLm9mKGNvbmZpZyksXG4gICAgICAgIGd1dHRlcnMoKSxcbiAgICAgICAgbGluZU51bWJlckd1dHRlclxuICAgIF07XG59XG5mdW5jdGlvbiBtYXhMaW5lTnVtYmVyKGxpbmVzKSB7XG4gICAgbGV0IGxhc3QgPSA5O1xuICAgIHdoaWxlIChsYXN0IDwgbGluZXMpXG4gICAgICAgIGxhc3QgPSBsYXN0ICogMTAgKyA5O1xuICAgIHJldHVybiBsYXN0O1xufVxuY29uc3QgYWN0aXZlTGluZUd1dHRlck1hcmtlciA9IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBHdXR0ZXJNYXJrZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmVsZW1lbnRDbGFzcyA9IFwiY20tYWN0aXZlTGluZUd1dHRlclwiO1xuICAgIH1cbn07XG5jb25zdCBhY3RpdmVMaW5lR3V0dGVySGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovZ3V0dGVyTGluZUNsYXNzLmNvbXB1dGUoW1wic2VsZWN0aW9uXCJdLCBzdGF0ZSA9PiB7XG4gICAgbGV0IG1hcmtzID0gW10sIGxhc3QgPSAtMTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGxldCBsaW5lUG9zID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5oZWFkKS5mcm9tO1xuICAgICAgICBpZiAobGluZVBvcyA+IGxhc3QpIHtcbiAgICAgICAgICAgIGxhc3QgPSBsaW5lUG9zO1xuICAgICAgICAgICAgbWFya3MucHVzaChhY3RpdmVMaW5lR3V0dGVyTWFya2VyLnJhbmdlKGxpbmVQb3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUmFuZ2VTZXQub2YobWFya3MpO1xufSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgYWRkcyBhIGBjbS1hY3RpdmVMaW5lR3V0dGVyYCBjbGFzcyB0b1xuYWxsIGd1dHRlciBlbGVtZW50cyBvbiB0aGUgW2FjdGl2ZVxubGluZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmhpZ2hsaWdodEFjdGl2ZUxpbmUpLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodEFjdGl2ZUxpbmVHdXR0ZXIoKSB7XG4gICAgcmV0dXJuIGFjdGl2ZUxpbmVHdXR0ZXJIaWdobGlnaHRlcjtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlcihkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gVmlld1BsdWdpbi5kZWZpbmUodmlldyA9PiAoe1xuICAgICAgICBkZWNvcmF0aW9uczogZGVjb3JhdG9yLmNyZWF0ZURlY28odmlldyksXG4gICAgICAgIHVwZGF0ZSh1KSB7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gZGVjb3JhdG9yLnVwZGF0ZURlY28odSwgdGhpcy5kZWNvcmF0aW9ucyk7XG4gICAgICAgIH0sXG4gICAgfSksIHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xuICAgIH0pO1xufVxuY29uc3QgdGFiRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1oaWdobGlnaHRUYWJcIiB9KTtcbmNvbnN0IHNwYWNlRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1oaWdobGlnaHRTcGFjZVwiIH0pO1xuY29uc3Qgd2hpdGVzcGFjZUhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL21hdGNoZXIoLypAX19QVVJFX18qL25ldyBNYXRjaERlY29yYXRvcih7XG4gICAgcmVnZXhwOiAvXFx0fCAvZyxcbiAgICBkZWNvcmF0aW9uOiBtYXRjaCA9PiBtYXRjaFswXSA9PSBcIlxcdFwiID8gdGFiRGVjbyA6IHNwYWNlRGVjbyxcbiAgICBib3VuZGFyeTogL1xcUy8sXG59KSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgaGlnaGxpZ2h0cyB3aGl0ZXNwYWNlLCBhZGRpbmcgYVxuYGNtLWhpZ2hsaWdodFNwYWNlYCBjbGFzcyB0byBzdHJldGNoZXMgb2Ygc3BhY2VzLCBhbmQgYVxuYGNtLWhpZ2hsaWdodFRhYmAgY2xhc3MgdG8gaW5kaXZpZHVhbCB0YWIgY2hhcmFjdGVycy4gQnkgZGVmYXVsdCxcbnRoZSBmb3JtZXIgYXJlIHNob3duIGFzIGZhaW50IGRvdHMsIGFuZCB0aGUgbGF0dGVyIGFzIGFycm93cy5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRXaGl0ZXNwYWNlKCkge1xuICAgIHJldHVybiB3aGl0ZXNwYWNlSGlnaGxpZ2h0ZXI7XG59XG5jb25zdCB0cmFpbGluZ0hpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL21hdGNoZXIoLypAX19QVVJFX18qL25ldyBNYXRjaERlY29yYXRvcih7XG4gICAgcmVnZXhwOiAvXFxzKyQvZyxcbiAgICBkZWNvcmF0aW9uOiAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tdHJhaWxpbmdTcGFjZVwiIH0pXG59KSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgYWRkcyBhIGBjbS10cmFpbGluZ1NwYWNlYCBjbGFzcyB0byBhbGxcbnRyYWlsaW5nIHdoaXRlc3BhY2UuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0VHJhaWxpbmdXaGl0ZXNwYWNlKCkge1xuICAgIHJldHVybiB0cmFpbGluZ0hpZ2hsaWdodGVyO1xufVxuXG4vKipcbkBpbnRlcm5hbFxuKi9cbmNvbnN0IF9fdGVzdCA9IHsgSGVpZ2h0TWFwLCBIZWlnaHRPcmFjbGUsIE1lYXN1cmVkSGVpZ2h0cywgUXVlcnlUeXBlLCBDaGFuZ2VkUmFuZ2UsIGNvbXB1dGVPcmRlcixcbiAgICBtb3ZlVmlzdWFsbHksIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZywgZ2V0SGVpZ2h0Q2hhbmdlRmxhZzogKCkgPT4gaGVpZ2h0Q2hhbmdlRmxhZyB9O1xuXG5leHBvcnQgeyBCaWRpU3BhbiwgQmxvY2tJbmZvLCBCbG9ja1R5cGUsIERlY29yYXRpb24sIERpcmVjdGlvbiwgRWRpdG9yVmlldywgR3V0dGVyTWFya2VyLCBNYXRjaERlY29yYXRvciwgUmVjdGFuZ2xlTWFya2VyLCBWaWV3UGx1Z2luLCBWaWV3VXBkYXRlLCBXaWRnZXRUeXBlLCBfX3Rlc3QsIGNsb3NlSG92ZXJUb29sdGlwcywgY3Jvc3NoYWlyQ3Vyc29yLCBkcmF3U2VsZWN0aW9uLCBkcm9wQ3Vyc29yLCBnZXREaWFsb2csIGdldERyYXdTZWxlY3Rpb25Db25maWcsIGdldFBhbmVsLCBnZXRUb29sdGlwLCBndXR0ZXIsIGd1dHRlckxpbmVDbGFzcywgZ3V0dGVyV2lkZ2V0Q2xhc3MsIGd1dHRlcnMsIGhhc0hvdmVyVG9vbHRpcHMsIGhpZ2hsaWdodEFjdGl2ZUxpbmUsIGhpZ2hsaWdodEFjdGl2ZUxpbmVHdXR0ZXIsIGhpZ2hsaWdodFNwZWNpYWxDaGFycywgaGlnaGxpZ2h0VHJhaWxpbmdXaGl0ZXNwYWNlLCBoaWdobGlnaHRXaGl0ZXNwYWNlLCBob3ZlclRvb2x0aXAsIGtleW1hcCwgbGF5ZXIsIGxpbmVOdW1iZXJNYXJrZXJzLCBsaW5lTnVtYmVyV2lkZ2V0TWFya2VyLCBsaW5lTnVtYmVycywgbG9nRXhjZXB0aW9uLCBwYW5lbHMsIHBsYWNlaG9sZGVyLCByZWN0YW5ndWxhclNlbGVjdGlvbiwgcmVwb3NpdGlvblRvb2x0aXBzLCBydW5TY29wZUhhbmRsZXJzLCBzY3JvbGxQYXN0RW5kLCBzaG93RGlhbG9nLCBzaG93UGFuZWwsIHNob3dUb29sdGlwLCB0b29sdGlwcyB9O1xuIiwKICAgICIvKipcblRoZSBkZWZhdWx0IG1heGltdW0gbGVuZ3RoIG9mIGEgYFRyZWVCdWZmZXJgIG5vZGUuXG4qL1xuY29uc3QgRGVmYXVsdEJ1ZmZlckxlbmd0aCA9IDEwMjQ7XG5sZXQgbmV4dFByb3BJRCA9IDA7XG5jbGFzcyBSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbn1cbi8qKlxuRWFjaCBbbm9kZSB0eXBlXSgjY29tbW9uLk5vZGVUeXBlKSBvciBbaW5kaXZpZHVhbCB0cmVlXSgjY29tbW9uLlRyZWUpXG5jYW4gaGF2ZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggaXQgaW4gcHJvcHMuIEluc3RhbmNlcyBvZiB0aGlzXG5jbGFzcyByZXByZXNlbnQgcHJvcCBuYW1lcy5cbiovXG5jbGFzcyBOb2RlUHJvcCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IG5vZGUgcHJvcCB0eXBlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRQcm9wSUQrKztcbiAgICAgICAgdGhpcy5wZXJOb2RlID0gISFjb25maWcucGVyTm9kZTtcbiAgICAgICAgdGhpcy5kZXNlcmlhbGl6ZSA9IGNvbmZpZy5kZXNlcmlhbGl6ZSB8fCAoKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBub2RlIHR5cGUgZG9lc24ndCBkZWZpbmUgYSBkZXNlcmlhbGl6ZSBmdW5jdGlvblwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoaXMgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aXRoXG4gICAgW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yXG4gICAgW2BMUlBhcnNlci5jb25maWd1cmVgXSgjbHIuUGFyc2VyQ29uZmlnLnByb3BzKSB0byBjb21wdXRlXG4gICAgcHJvcCB2YWx1ZXMgZm9yIGVhY2ggbm9kZSB0eXBlIGluIHRoZSBzZXQuIFRha2VzIGEgW21hdGNoXG4gICAgb2JqZWN0XSgjY29tbW9uLk5vZGVUeXBlXm1hdGNoKSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdW5kZWZpbmVkXG4gICAgaWYgdGhlIG5vZGUgdHlwZSBkb2Vzbid0IGdldCB0aGlzIHByb3AsIGFuZCB0aGUgcHJvcCdzIHZhbHVlIGlmXG4gICAgaXQgZG9lcy5cbiAgICAqL1xuICAgIGFkZChtYXRjaCkge1xuICAgICAgICBpZiAodGhpcy5wZXJOb2RlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBhZGQgcGVyLW5vZGUgcHJvcHMgdG8gbm9kZSB0eXBlc1wiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICBtYXRjaCA9IE5vZGVUeXBlLm1hdGNoKG1hdGNoKTtcbiAgICAgICAgcmV0dXJuICh0eXBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbWF0Y2godHlwZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBudWxsIDogW3RoaXMsIHJlc3VsdF07XG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG5Qcm9wIHRoYXQgaXMgdXNlZCB0byBkZXNjcmliZSBtYXRjaGluZyBkZWxpbWl0ZXJzLiBGb3Igb3BlbmluZ1xuZGVsaW1pdGVycywgdGhpcyBob2xkcyBhbiBhcnJheSBvZiBub2RlIG5hbWVzICh3cml0dGVuIGFzIGFcbnNwYWNlLXNlcGFyYXRlZCBzdHJpbmcgd2hlbiBkZWNsYXJpbmcgdGhpcyBwcm9wIGluIGEgZ3JhbW1hcilcbmZvciB0aGUgbm9kZSB0eXBlcyBvZiBjbG9zaW5nIGRlbGltaXRlcnMgdGhhdCBtYXRjaCBpdC5cbiovXG5Ob2RlUHJvcC5jbG9zZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8qKlxuVGhlIGludmVyc2Ugb2YgW2BjbG9zZWRCeWBdKCNjb21tb24uTm9kZVByb3BeY2xvc2VkQnkpLiBUaGlzIGlzXG5hdHRhY2hlZCB0byBjbG9zaW5nIGRlbGltaXRlcnMsIGhvbGRpbmcgYW4gYXJyYXkgb2Ygbm9kZSBuYW1lc1xub2YgdHlwZXMgb2YgbWF0Y2hpbmcgb3BlbmluZyBkZWxpbWl0ZXJzLlxuKi9cbk5vZGVQcm9wLm9wZW5lZEJ5ID0gbmV3IE5vZGVQcm9wKHsgZGVzZXJpYWxpemU6IHN0ciA9PiBzdHIuc3BsaXQoXCIgXCIpIH0pO1xuLyoqXG5Vc2VkIHRvIGFzc2lnbiBub2RlIHR5cGVzIHRvIGdyb3VwcyAoZm9yIGV4YW1wbGUsIGFsbCBub2RlXG50eXBlcyB0aGF0IHJlcHJlc2VudCBhbiBleHByZXNzaW9uIGNvdWxkIGJlIHRhZ2dlZCB3aXRoIGFuXG5gXCJFeHByZXNzaW9uXCJgIGdyb3VwKS5cbiovXG5Ob2RlUHJvcC5ncm91cCA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8qKlxuQXR0YWNoZWQgdG8gbm9kZXMgdG8gaW5kaWNhdGUgdGhlc2Ugc2hvdWxkIGJlXG5bZGlzcGxheWVkXShodHRwczovL2NvZGVtaXJyb3IubmV0L2RvY3MvcmVmLyNsYW5ndWFnZS5zeW50YXhUcmVlKVxuaW4gYSBiaWRpcmVjdGlvbmFsIHRleHQgaXNvbGF0ZSwgc28gdGhhdCBkaXJlY3Rpb24tbmV1dHJhbFxuY2hhcmFjdGVycyBvbiB0aGVpciBzaWRlcyBkb24ndCBpbmNvcnJlY3RseSBnZXQgYXNzb2NpYXRlZCB3aXRoXG5zdXJyb3VuZGluZyB0ZXh0LiBZb3UnbGwgZ2VuZXJhbGx5IHdhbnQgdG8gc2V0IHRoaXMgZm9yIG5vZGVzXG50aGF0IGNvbnRhaW4gYXJiaXRyYXJ5IHRleHQsIGxpa2Ugc3RyaW5ncyBhbmQgY29tbWVudHMsIGFuZCBmb3Jcbm5vZGVzIHRoYXQgYXBwZWFyIF9pbnNpZGVfIGFyYml0cmFyeSB0ZXh0LCBsaWtlIEhUTUwgdGFncy4gV2hlblxubm90IGdpdmVuIGEgdmFsdWUsIGluIGEgZ3JhbW1hciBkZWNsYXJhdGlvbiwgZGVmYXVsdHMgdG9cbmBcImF1dG9cImAuXG4qL1xuTm9kZVByb3AuaXNvbGF0ZSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiB2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZSAhPSBcInJ0bFwiICYmIHZhbHVlICE9IFwibHRyXCIgJiYgdmFsdWUgIT0gXCJhdXRvXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIGlzb2xhdGU6IFwiICsgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWUgfHwgXCJhdXRvXCI7XG4gICAgfSB9KTtcbi8qKlxuVGhlIGhhc2ggb2YgdGhlIFtjb250ZXh0XSgjbHIuQ29udGV4dFRyYWNrZXIuY29uc3RydWN0b3IpXG50aGF0IHRoZSBub2RlIHdhcyBwYXJzZWQgaW4sIGlmIGFueS4gVXNlZCB0byBsaW1pdCByZXVzZSBvZlxuY29udGV4dHVhbCBub2Rlcy5cbiovXG5Ob2RlUHJvcC5jb250ZXh0SGFzaCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4vKipcblRoZSBkaXN0YW5jZSBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgbm9kZSB0aGF0IHRoZSB0b2tlbml6ZXJcbmxvb2tlZCBhaGVhZCBmb3IgYW55IG9mIHRoZSB0b2tlbnMgaW5zaWRlIHRoZSBub2RlLiAoVGhlIExSXG5wYXJzZXIgb25seSBzdG9yZXMgdGhpcyB3aGVuIGl0IGlzIGxhcmdlciB0aGFuIDI1LCBmb3JcbmVmZmljaWVuY3kgcmVhc29ucy4pXG4qL1xuTm9kZVByb3AubG9va0FoZWFkID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbi8qKlxuVGhpcyBwZXItbm9kZSBwcm9wIGlzIHVzZWQgdG8gcmVwbGFjZSBhIGdpdmVuIG5vZGUsIG9yIHBhcnQgb2YgYVxubm9kZSwgd2l0aCBhbm90aGVyIHRyZWUuIFRoaXMgaXMgdXNlZnVsIHRvIGluY2x1ZGUgdHJlZXMgZnJvbVxuZGlmZmVyZW50IGxhbmd1YWdlcyBpbiBtaXhlZC1sYW5ndWFnZSBwYXJzZXJzLlxuKi9cbk5vZGVQcm9wLm1vdW50ZWQgPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pO1xuLyoqXG5BIG1vdW50ZWQgdHJlZSwgd2hpY2ggY2FuIGJlIFtzdG9yZWRdKCNjb21tb24uTm9kZVByb3BebW91bnRlZCkgb25cbmEgdHJlZSBub2RlIHRvIGluZGljYXRlIHRoYXQgcGFydHMgb2YgaXRzIGNvbnRlbnQgYXJlXG5yZXByZXNlbnRlZCBieSBhbm90aGVyIHRyZWUuXG4qL1xuY2xhc3MgTW91bnRlZFRyZWUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBpbm5lciB0cmVlLlxuICAgICovXG4gICAgdHJlZSwgXG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBudWxsLCB0aGlzIHRyZWUgcmVwbGFjZXMgdGhlIGVudGlyZSBub2RlIChpdCB3aWxsXG4gICAgYmUgaW5jbHVkZWQgaW4gdGhlIHJlZ3VsYXIgaXRlcmF0aW9uIGluc3RlYWQgb2YgaXRzIGhvc3RcbiAgICBub2RlKS4gSWYgbm90LCBvbmx5IHRoZSBnaXZlbiByYW5nZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmVcbiAgICBjb3ZlcmVkIGJ5IHRoaXMgdHJlZS4gVGhpcyBpcyB1c2VkIGZvciB0cmVlcyB0aGF0IGFyZSBtaXhlZCBpblxuICAgIGEgd2F5IHRoYXQgaXNuJ3Qgc3RyaWN0bHkgaGllcmFyY2hpY2FsLiBTdWNoIG1vdW50ZWQgdHJlZXMgYXJlXG4gICAgb25seSBlbnRlcmVkIGJ5IFtgcmVzb2x2ZUlubmVyYF0oI2NvbW1vbi5UcmVlLnJlc29sdmVJbm5lcilcbiAgICBhbmQgW2BlbnRlcmBdKCNjb21tb24uU3ludGF4Tm9kZS5lbnRlcikuXG4gICAgKi9cbiAgICBvdmVybGF5LCBcbiAgICAvKipcbiAgICBUaGUgcGFyc2VyIHVzZWQgdG8gY3JlYXRlIHRoaXMgc3VidHJlZS5cbiAgICAqL1xuICAgIHBhcnNlcikge1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZ2V0KHRyZWUpIHtcbiAgICAgICAgcmV0dXJuIHRyZWUgJiYgdHJlZS5wcm9wcyAmJiB0cmVlLnByb3BzW05vZGVQcm9wLm1vdW50ZWQuaWRdO1xuICAgIH1cbn1cbmNvbnN0IG5vUHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqXG5FYWNoIG5vZGUgaW4gYSBzeW50YXggdHJlZSBoYXMgYSBub2RlIHR5cGUgYXNzb2NpYXRlZCB3aXRoIGl0LlxuKi9cbmNsYXNzIE5vZGVUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoZSBub2RlIHR5cGUuIE5vdCBuZWNlc3NhcmlseSB1bmlxdWUsIGJ1dCBpZiB0aGVcbiAgICBncmFtbWFyIHdhcyB3cml0dGVuIHByb3Blcmx5LCBkaWZmZXJlbnQgbm9kZSB0eXBlcyB3aXRoIHRoZVxuICAgIHNhbWUgbmFtZSB3aXRoaW4gYSBub2RlIHNldCBzaG91bGQgcGxheSB0aGUgc2FtZSBzZW1hbnRpY1xuICAgIHJvbGUuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHByb3BzLCBcbiAgICAvKipcbiAgICBUaGUgaWQgb2YgdGhpcyBub2RlIGluIGl0cyBzZXQuIENvcnJlc3BvbmRzIHRvIHRoZSB0ZXJtIGlkc1xuICAgIHVzZWQgaW4gdGhlIHBhcnNlci5cbiAgICAqL1xuICAgIGlkLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZsYWdzID0gMCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBub2RlIHR5cGUuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHtcbiAgICAgICAgbGV0IHByb3BzID0gc3BlYy5wcm9wcyAmJiBzcGVjLnByb3BzLmxlbmd0aCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiBub1Byb3BzO1xuICAgICAgICBsZXQgZmxhZ3MgPSAoc3BlYy50b3AgPyAxIC8qIE5vZGVGbGFnLlRvcCAqLyA6IDApIHwgKHNwZWMuc2tpcHBlZCA/IDIgLyogTm9kZUZsYWcuU2tpcHBlZCAqLyA6IDApIHxcbiAgICAgICAgICAgIChzcGVjLmVycm9yID8gNCAvKiBOb2RlRmxhZy5FcnJvciAqLyA6IDApIHwgKHNwZWMubmFtZSA9PSBudWxsID8gOCAvKiBOb2RlRmxhZy5Bbm9ueW1vdXMgKi8gOiAwKTtcbiAgICAgICAgbGV0IHR5cGUgPSBuZXcgTm9kZVR5cGUoc3BlYy5uYW1lIHx8IFwiXCIsIHByb3BzLCBzcGVjLmlkLCBmbGFncyk7XG4gICAgICAgIGlmIChzcGVjLnByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgc3JjIG9mIHNwZWMucHJvcHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3JjKSlcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjKHR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1swXS5wZXJOb2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDYW4ndCBzdG9yZSBhIHBlci1ub2RlIHByb3Agb24gYSBub2RlIHR5cGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW3NyY1swXS5pZF0gPSBzcmNbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmVzIGEgbm9kZSBwcm9wIGZvciB0aGlzIHR5cGUuIFdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIGlmXG4gICAgdGhlIHByb3AgaXNuJ3QgcHJlc2VudCBvbiB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBwcm9wKHByb3ApIHsgcmV0dXJuIHRoaXMucHJvcHNbcHJvcC5pZF07IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyB0aGUgdG9wIG5vZGUgb2YgYSBncmFtbWFyLlxuICAgICovXG4gICAgZ2V0IGlzVG9wKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIE5vZGVGbGFnLlRvcCAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgbm9kZSBpcyBwcm9kdWNlZCBieSBhIHNraXAgcnVsZS5cbiAgICAqL1xuICAgIGdldCBpc1NraXBwZWQoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDIgLyogTm9kZUZsYWcuU2tpcHBlZCAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBpcyBhbiBlcnJvciBub2RlLlxuICAgICovXG4gICAgZ2V0IGlzRXJyb3IoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogTm9kZUZsYWcuRXJyb3IgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFdoZW4gdHJ1ZSwgdGhpcyBub2RlIHR5cGUgZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgdXNlci1kZWNsYXJlZFxuICAgIG5hbWVkIG5vZGUsIGZvciBleGFtcGxlIGJlY2F1c2UgaXQgaXMgdXNlZCB0byBjYWNoZSByZXBldGl0aW9uLlxuICAgICovXG4gICAgZ2V0IGlzQW5vbnltb3VzKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIE5vZGVGbGFnLkFub255bW91cyAqLykgPiAwOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0cnVlIHdoZW4gdGhpcyBub2RlJ3MgbmFtZSBvciBvbmUgb2YgaXRzXG4gICAgW2dyb3Vwc10oI2NvbW1vbi5Ob2RlUHJvcF5ncm91cCkgbWF0Y2hlcyB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgICovXG4gICAgaXMobmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gbmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMucHJvcChOb2RlUHJvcC5ncm91cCk7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXAgPyBncm91cC5pbmRleE9mKG5hbWUpID4gLTEgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pZCA9PSBuYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBmdW5jdGlvbiBmcm9tIG5vZGUgdHlwZXMgdG8gYXJiaXRyYXJ5IHZhbHVlcyBieVxuICAgIHNwZWNpZnlpbmcgYW4gb2JqZWN0IHdob3NlIHByb3BlcnR5IG5hbWVzIGFyZSBub2RlIG9yXG4gICAgW2dyb3VwXSgjY29tbW9uLk5vZGVQcm9wXmdyb3VwKSBuYW1lcy4gT2Z0ZW4gdXNlZnVsIHdpdGhcbiAgICBbYE5vZGVQcm9wLmFkZGBdKCNjb21tb24uTm9kZVByb3AuYWRkKS4gWW91IGNhbiBwdXQgbXVsdGlwbGVcbiAgICBuYW1lcywgc2VwYXJhdGVkIGJ5IHNwYWNlcywgaW4gYSBzaW5nbGUgcHJvcGVydHkgbmFtZSB0byBtYXBcbiAgICBtdWx0aXBsZSBub2RlIG5hbWVzIHRvIGEgc2luZ2xlIHZhbHVlLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoKG1hcCkge1xuICAgICAgICBsZXQgZGlyZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXApXG4gICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgICAgIGRpcmVjdFtuYW1lXSA9IG1hcFtwcm9wXTtcbiAgICAgICAgcmV0dXJuIChub2RlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBncm91cHMgPSBub2RlLnByb3AoTm9kZVByb3AuZ3JvdXApLCBpID0gLTE7IGkgPCAoZ3JvdXBzID8gZ3JvdXBzLmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBkaXJlY3RbaSA8IDAgPyBub2RlLm5hbWUgOiBncm91cHNbaV1dO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuQW4gZW1wdHkgZHVtbXkgbm9kZSB0eXBlIHRvIHVzZSB3aGVuIG5vIGFjdHVhbCB0eXBlIGlzIGF2YWlsYWJsZS5cbiovXG5Ob2RlVHlwZS5ub25lID0gbmV3IE5vZGVUeXBlKFwiXCIsIE9iamVjdC5jcmVhdGUobnVsbCksIDAsIDggLyogTm9kZUZsYWcuQW5vbnltb3VzICovKTtcbi8qKlxuQSBub2RlIHNldCBob2xkcyBhIGNvbGxlY3Rpb24gb2Ygbm9kZSB0eXBlcy4gSXQgaXMgdXNlZCB0b1xuY29tcGFjdGx5IHJlcHJlc2VudCB0cmVlcyBieSBzdG9yaW5nIHRoZWlyIHR5cGUgaWRzLCByYXRoZXIgdGhhbiBhXG5mdWxsIHBvaW50ZXIgdG8gdGhlIHR5cGUgb2JqZWN0LCBpbiBhIG51bWVyaWMgYXJyYXkuIEVhY2ggcGFyc2VyXG5baGFzXSgjbHIuTFJQYXJzZXIubm9kZVNldCkgYSBub2RlIHNldCwgYW5kIFt0cmVlXG5idWZmZXJzXSgjY29tbW9uLlRyZWVCdWZmZXIpIGNhbiBvbmx5IHN0b3JlIGNvbGxlY3Rpb25zIG9mIG5vZGVzXG5mcm9tIHRoZSBzYW1lIHNldC4gQSBzZXQgY2FuIGhhdmUgYSBtYXhpbXVtIG9mIDIqKjE2ICg2NTUzNikgbm9kZVxudHlwZXMgaW4gaXQsIHNvIHRoYXQgdGhlIGlkcyBmaXQgaW50byAxNi1iaXQgdHlwZWQgYXJyYXkgc2xvdHMuXG4qL1xuY2xhc3MgTm9kZVNldCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2V0IHdpdGggdGhlIGdpdmVuIHR5cGVzLiBUaGUgYGlkYCBwcm9wZXJ0eSBvZiBlYWNoXG4gICAgdHlwZSBzaG91bGQgY29ycmVzcG9uZCB0byBpdHMgcG9zaXRpb24gd2l0aGluIHRoZSBhcnJheS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBub2RlIHR5cGVzIGluIHRoaXMgc2V0LCBieSBpZC5cbiAgICAqL1xuICAgIHR5cGVzKSB7XG4gICAgICAgIHRoaXMudHlwZXMgPSB0eXBlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0eXBlc1tpXS5pZCAhPSBpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTm9kZSB0eXBlIGlkcyBzaG91bGQgY29ycmVzcG9uZCB0byBhcnJheSBwb3NpdGlvbnMgd2hlbiBjcmVhdGluZyBhIG5vZGUgc2V0XCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBjb3B5IG9mIHRoaXMgc2V0IHdpdGggc29tZSBub2RlIHByb3BlcnRpZXMgYWRkZWQuIFRoZVxuICAgIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCBjYW4gYmUgY3JlYXRlZCB3aXRoXG4gICAgW2BOb2RlUHJvcC5hZGRgXSgjY29tbW9uLk5vZGVQcm9wLmFkZCkuXG4gICAgKi9cbiAgICBleHRlbmQoLi4ucHJvcHMpIHtcbiAgICAgICAgbGV0IG5ld1R5cGVzID0gW107XG4gICAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy50eXBlcykge1xuICAgICAgICAgICAgbGV0IG5ld1Byb3BzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiBwcm9wcykge1xuICAgICAgICAgICAgICAgIGxldCBhZGQgPSBzb3VyY2UodHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1Byb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCB0eXBlLnByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHNbYWRkWzBdLmlkXSA9IGFkZFsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdUeXBlcy5wdXNoKG5ld1Byb3BzID8gbmV3IE5vZGVUeXBlKHR5cGUubmFtZSwgbmV3UHJvcHMsIHR5cGUuaWQsIHR5cGUuZmxhZ3MpIDogdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2V0KG5ld1R5cGVzKTtcbiAgICB9XG59XG5jb25zdCBDYWNoZWROb2RlID0gbmV3IFdlYWtNYXAoKSwgQ2FjaGVkSW5uZXJOb2RlID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuT3B0aW9ucyB0aGF0IGNvbnRyb2wgaXRlcmF0aW9uLiBDYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgYHxgXG5vcGVyYXRvciB0byBlbmFibGUgbXVsdGlwbGUgb25lcy5cbiovXG52YXIgSXRlck1vZGU7XG4oZnVuY3Rpb24gKEl0ZXJNb2RlKSB7XG4gICAgLyoqXG4gICAgV2hlbiBlbmFibGVkLCBpdGVyYXRpb24gd2lsbCBvbmx5IHZpc2l0IFtgVHJlZWBdKCNjb21tb24uVHJlZSlcbiAgICBvYmplY3RzLCBub3Qgbm9kZXMgcGFja2VkIGludG9cbiAgICBbYFRyZWVCdWZmZXJgXSgjY29tbW9uLlRyZWVCdWZmZXIpcy5cbiAgICAqL1xuICAgIEl0ZXJNb2RlW0l0ZXJNb2RlW1wiRXhjbHVkZUJ1ZmZlcnNcIl0gPSAxXSA9IFwiRXhjbHVkZUJ1ZmZlcnNcIjtcbiAgICAvKipcbiAgICBFbmFibGUgdGhpcyB0byBtYWtlIGl0ZXJhdGlvbiBpbmNsdWRlIGFub255bW91cyBub2RlcyAoc3VjaCBhc1xuICAgIHRoZSBub2RlcyB0aGF0IHdyYXAgcmVwZWF0ZWQgZ3JhbW1hciBjb25zdHJ1Y3RzIGludG8gYSBiYWxhbmNlZFxuICAgIHRyZWUpLlxuICAgICovXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJJbmNsdWRlQW5vbnltb3VzXCJdID0gMl0gPSBcIkluY2x1ZGVBbm9ueW1vdXNcIjtcbiAgICAvKipcbiAgICBCeSBkZWZhdWx0LCByZWd1bGFyIFttb3VudGVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIG5vZGVzXG4gICAgcmVwbGFjZSB0aGVpciBiYXNlIG5vZGUgaW4gaXRlcmF0aW9uLiBFbmFibGUgdGhpcyB0byBpZ25vcmUgdGhlbVxuICAgIGluc3RlYWQuXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIklnbm9yZU1vdW50c1wiXSA9IDRdID0gXCJJZ25vcmVNb3VudHNcIjtcbiAgICAvKipcbiAgICBUaGlzIG9wdGlvbiBvbmx5IGFwcGxpZXMgaW5cbiAgICBbYGVudGVyYF0oI2NvbW1vbi5TeW50YXhOb2RlLmVudGVyKS1zdHlsZSBtZXRob2RzLiBJdCB0ZWxscyB0aGVcbiAgICBsaWJyYXJ5IHRvIG5vdCBlbnRlciBtb3VudGVkIG92ZXJsYXlzIGlmIG9uZSBjb3ZlcnMgdGhlIGdpdmVuXG4gICAgcG9zaXRpb24uXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIklnbm9yZU92ZXJsYXlzXCJdID0gOF0gPSBcIklnbm9yZU92ZXJsYXlzXCI7XG59KShJdGVyTW9kZSB8fCAoSXRlck1vZGUgPSB7fSkpO1xuLyoqXG5BIHBpZWNlIG9mIHN5bnRheCB0cmVlLiBUaGVyZSBhcmUgdHdvIHdheXMgdG8gYXBwcm9hY2ggdGhlc2VcbnRyZWVzOiB0aGUgd2F5IHRoZXkgYXJlIGFjdHVhbGx5IHN0b3JlZCBpbiBtZW1vcnksIGFuZCB0aGVcbmNvbnZlbmllbnQgd2F5LlxuXG5TeW50YXggdHJlZXMgYXJlIHN0b3JlZCBhcyBhIHRyZWUgb2YgYFRyZWVgIGFuZCBgVHJlZUJ1ZmZlcmBcbm9iamVjdHMuIEJ5IHBhY2tpbmcgZGV0YWlsIGluZm9ybWF0aW9uIGludG8gYFRyZWVCdWZmZXJgIGxlYWZcbm5vZGVzLCB0aGUgcmVwcmVzZW50YXRpb24gaXMgbWFkZSBhIGxvdCBtb3JlIG1lbW9yeS1lZmZpY2llbnQuXG5cbkhvd2V2ZXIsIHdoZW4geW91IHdhbnQgdG8gYWN0dWFsbHkgd29yayB3aXRoIHRyZWUgbm9kZXMsIHRoaXNcbnJlcHJlc2VudGF0aW9uIGlzIHZlcnkgYXdrd2FyZCwgc28gbW9zdCBjbGllbnQgY29kZSB3aWxsIHdhbnQgdG9cbnVzZSB0aGUgW2BUcmVlQ3Vyc29yYF0oI2NvbW1vbi5UcmVlQ3Vyc29yKSBvclxuW2BTeW50YXhOb2RlYF0oI2NvbW1vbi5TeW50YXhOb2RlKSBpbnRlcmZhY2UgaW5zdGVhZCwgd2hpY2ggcHJvdmlkZXNcbmEgdmlldyBvbiBzb21lIHBhcnQgb2YgdGhpcyBkYXRhIHN0cnVjdHVyZSwgYW5kIGNhbiBiZSB1c2VkIHRvXG5tb3ZlIGFyb3VuZCB0byBhZGphY2VudCBub2Rlcy5cbiovXG5jbGFzcyBUcmVlIHtcbiAgICAvKipcbiAgICBDb25zdHJ1Y3QgYSBuZXcgdHJlZS4gU2VlIGFsc28gW2BUcmVlLmJ1aWxkYF0oI2NvbW1vbi5UcmVlXmJ1aWxkKS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIHRoZSB0b3Agbm9kZS5cbiAgICAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgIFRoaXMgbm9kZSdzIGNoaWxkIG5vZGVzLlxuICAgICovXG4gICAgY2hpbGRyZW4sIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbnMgKG9mZnNldHMgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoaXMgdHJlZSkgb2ZcbiAgICB0aGUgY2hpbGRyZW4uXG4gICAgKi9cbiAgICBwb3NpdGlvbnMsIFxuICAgIC8qKlxuICAgIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhpcyB0cmVlXG4gICAgKi9cbiAgICBsZW5ndGgsIFxuICAgIC8qKlxuICAgIFBlci1ub2RlIFtub2RlIHByb3BzXSgjY29tbW9uLk5vZGVQcm9wKSB0byBhc3NvY2lhdGUgd2l0aCB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBwcm9wcykge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHRoaXMucG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BzID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3BzICYmIHByb3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBbcHJvcCwgdmFsdWVdIG9mIHByb3BzKVxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNbdHlwZW9mIHByb3AgPT0gXCJudW1iZXJcIiA/IHByb3AgOiBwcm9wLmlkXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBtb3VudGVkID0gTW91bnRlZFRyZWUuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiAhbW91bnRlZC5vdmVybGF5KVxuICAgICAgICAgICAgcmV0dXJuIG1vdW50ZWQudHJlZS50b1N0cmluZygpO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBjaCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgc3RyID0gY2gudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChzdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IFwiLFwiO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9IHN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXRoaXMudHlwZS5uYW1lID8gY2hpbGRyZW4gOlxuICAgICAgICAgICAgKC9cXFcvLnRlc3QodGhpcy50eXBlLm5hbWUpICYmICF0aGlzLnR5cGUuaXNFcnJvciA/IEpTT04uc3RyaW5naWZ5KHRoaXMudHlwZS5uYW1lKSA6IHRoaXMudHlwZS5uYW1lKSArXG4gICAgICAgICAgICAgICAgKGNoaWxkcmVuLmxlbmd0aCA/IFwiKFwiICsgY2hpbGRyZW4gKyBcIilcIiA6IFwiXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9zaXRpb25lZCBhdCB0aGUgdG9wIG9mXG4gICAgdGhlIHRyZWUuIE1vZGUgY2FuIGJlIHVzZWQgdG8gW2NvbnRyb2xdKCNjb21tb24uSXRlck1vZGUpIHdoaWNoXG4gICAgbm9kZXMgdGhlIGN1cnNvciB2aXNpdHMuXG4gICAgKi9cbiAgICBjdXJzb3IobW9kZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlQ3Vyc29yKHRoaXMudG9wTm9kZSwgbW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFt0cmVlIGN1cnNvcl0oI2NvbW1vbi5UcmVlQ3Vyc29yKSBwb2ludGluZyBpbnRvIHRoaXMgdHJlZVxuICAgIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSAoc2VlXG4gICAgW2Btb3ZlVG9gXSgjY29tbW9uLlRyZWVDdXJzb3IubW92ZVRvKS5cbiAgICAqL1xuICAgIGN1cnNvckF0KHBvcywgc2lkZSA9IDAsIG1vZGUgPSAwKSB7XG4gICAgICAgIGxldCBzY29wZSA9IENhY2hlZE5vZGUuZ2V0KHRoaXMpIHx8IHRoaXMudG9wTm9kZTtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKHNjb3BlKTtcbiAgICAgICAgY3Vyc29yLm1vdmVUbyhwb3MsIHNpZGUpO1xuICAgICAgICBDYWNoZWROb2RlLnNldCh0aGlzLCBjdXJzb3IuX3RyZWUpO1xuICAgICAgICByZXR1cm4gY3Vyc29yO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgb2JqZWN0IGZvciB0aGUgdG9wIG9mIHRoZVxuICAgIHRyZWUuXG4gICAgKi9cbiAgICBnZXQgdG9wTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZSh0aGlzLCAwLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgIElmIGBzaWRlYCBpcyAtMSwgdGhpcyB3aWxsIG1vdmUgaW50byBub2RlcyB0aGF0IGVuZCBhdCB0aGVcbiAgICBwb3NpdGlvbi4gSWYgMSwgaXQnbGwgbW92ZSBpbnRvIG5vZGVzIHRoYXQgc3RhcnQgYXQgdGhlXG4gICAgcG9zaXRpb24uIFdpdGggMCwgaXQnbGwgb25seSBlbnRlciBub2RlcyB0aGF0IGNvdmVyIHRoZSBwb3NpdGlvblxuICAgIGZyb20gYm90aCBzaWRlcy5cbiAgICBcbiAgICBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCBlbnRlclxuICAgIFtvdmVybGF5c10oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KSwgYW5kIHlvdSBvZnRlbiB3YW50XG4gICAgW2ByZXNvbHZlSW5uZXJgXSgjY29tbW9uLlRyZWUucmVzb2x2ZUlubmVyKSBpbnN0ZWFkLlxuICAgICovXG4gICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlLCBwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICAgICAgQ2FjaGVkTm9kZS5zZXQodGhpcywgbm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICAvKipcbiAgICBMaWtlIFtgcmVzb2x2ZWBdKCNjb21tb24uVHJlZS5yZXNvbHZlKSwgYnV0IHdpbGwgZW50ZXJcbiAgICBbb3ZlcmxhaWRdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSkgbm9kZXMsIHByb2R1Y2luZyBhIHN5bnRheCBub2RlXG4gICAgcG9pbnRpbmcgaW50byB0aGUgaW5uZXJtb3N0IG92ZXJsYWlkIHRyZWUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uXG4gICAgKHdpdGggcGFyZW50IGxpbmtzIGdvaW5nIHRocm91Z2ggYWxsIHBhcmVudCBzdHJ1Y3R1cmUsIGluY2x1ZGluZ1xuICAgIHRoZSBob3N0IHRyZWVzKS5cbiAgICAqL1xuICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkSW5uZXJOb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgICAgIENhY2hlZElubmVyTm9kZS5zZXQodGhpcywgbm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICAvKipcbiAgICBJbiBzb21lIHNpdHVhdGlvbnMsIGl0IGNhbiBiZSB1c2VmdWwgdG8gaXRlcmF0ZSB0aHJvdWdoIGFsbFxuICAgIG5vZGVzIGFyb3VuZCBhIHBvc2l0aW9uLCBpbmNsdWRpbmcgdGhvc2UgaW4gb3ZlcmxheXMgdGhhdCBkb24ndFxuICAgIGRpcmVjdGx5IGNvdmVyIHRoZSBwb3NpdGlvbi4gVGhpcyBtZXRob2QgZ2l2ZXMgeW91IGFuIGl0ZXJhdG9yXG4gICAgdGhhdCB3aWxsIHByb2R1Y2UgYWxsIG5vZGVzLCBmcm9tIHNtYWxsIHRvIGJpZywgYXJvdW5kIHRoZSBnaXZlblxuICAgIHBvc2l0aW9uLlxuICAgICovXG4gICAgcmVzb2x2ZVN0YWNrKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrSXRlcmF0b3IodGhpcywgcG9zLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSB0cmVlIGFuZCBpdHMgY2hpbGRyZW4sIGNhbGxpbmcgYGVudGVyYCBmb3IgYW55XG4gICAgbm9kZSB0aGF0IHRvdWNoZXMgdGhlIGBmcm9tYC9gdG9gIHJlZ2lvbiAoaWYgZ2l2ZW4pIGJlZm9yZVxuICAgIHJ1bm5pbmcgb3ZlciBzdWNoIGEgbm9kZSdzIGNoaWxkcmVuLCBhbmQgYGxlYXZlYCAoaWYgZ2l2ZW4pIHdoZW5cbiAgICBsZWF2aW5nIHRoZSBub2RlLiBXaGVuIGBlbnRlcmAgcmV0dXJucyBgZmFsc2VgLCB0aGF0IG5vZGUgd2lsbFxuICAgIG5vdCBoYXZlIGl0cyBjaGlsZHJlbiBpdGVyYXRlZCBvdmVyIChvciBgbGVhdmVgIGNhbGxlZCkuXG4gICAgKi9cbiAgICBpdGVyYXRlKHNwZWMpIHtcbiAgICAgICAgbGV0IHsgZW50ZXIsIGxlYXZlLCBmcm9tID0gMCwgdG8gPSB0aGlzLmxlbmd0aCB9ID0gc3BlYztcbiAgICAgICAgbGV0IG1vZGUgPSBzcGVjLm1vZGUgfHwgMCwgYW5vbiA9IChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPiAwO1xuICAgICAgICBmb3IgKGxldCBjID0gdGhpcy5jdXJzb3IobW9kZSB8IEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpOzspIHtcbiAgICAgICAgICAgIGxldCBlbnRlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYy5mcm9tIDw9IHRvICYmIGMudG8gPj0gZnJvbSAmJiAoIWFub24gJiYgYy50eXBlLmlzQW5vbnltb3VzIHx8IGVudGVyKGMpICE9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYy5maXJzdENoaWxkKCkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGVudGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChlbnRlcmVkICYmIGxlYXZlICYmIChhbm9uIHx8ICFjLnR5cGUuaXNBbm9ueW1vdXMpKVxuICAgICAgICAgICAgICAgICAgICBsZWF2ZShjKTtcbiAgICAgICAgICAgICAgICBpZiAoYy5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoIWMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBbbm9kZSBwcm9wXSgjY29tbW9uLk5vZGVQcm9wKSBmb3IgdGhpc1xuICAgIG5vZGUuIFdvcmtzIHdpdGggYm90aCBwZXItbm9kZSBhbmQgcGVyLXR5cGUgcHJvcHMuXG4gICAgKi9cbiAgICBwcm9wKHByb3ApIHtcbiAgICAgICAgcmV0dXJuICFwcm9wLnBlck5vZGUgPyB0aGlzLnR5cGUucHJvcChwcm9wKSA6IHRoaXMucHJvcHMgPyB0aGlzLnByb3BzW3Byb3AuaWRdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRoZSBub2RlJ3MgW3Blci1ub2RlIHByb3BzXSgjY29tbW9uLk5vZGVQcm9wLnBlck5vZGUpIGluIGFcbiAgICBmb3JtYXQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBbYFRyZWVgXSgjY29tbW9uLlRyZWUpXG4gICAgY29uc3RydWN0b3IuXG4gICAgKi9cbiAgICBnZXQgcHJvcFZhbHVlcygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5wcm9wcylcbiAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHRoaXMucHJvcHMpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goWytpZCwgdGhpcy5wcm9wc1tpZF1dKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgQmFsYW5jZSB0aGUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgdHJlZSwgcHJvZHVjaW5nIGEgY29weSBvZlxuICAgIHdoaWNoIG1heSBoYXZlIGNoaWxkcmVuIGdyb3VwZWQgaW50byBzdWJ0cmVlcyB3aXRoIHR5cGVcbiAgICBbYE5vZGVUeXBlLm5vbmVgXSgjY29tbW9uLk5vZGVUeXBlXm5vbmUpLlxuICAgICovXG4gICAgYmFsYW5jZShjb25maWcgPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gOCAvKiBCYWxhbmNlLkJyYW5jaEZhY3RvciAqLyA/IHRoaXMgOlxuICAgICAgICAgICAgYmFsYW5jZVJhbmdlKE5vZGVUeXBlLm5vbmUsIHRoaXMuY2hpbGRyZW4sIHRoaXMucG9zaXRpb25zLCAwLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCwgMCwgdGhpcy5sZW5ndGgsIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCB0aGlzLnByb3BWYWx1ZXMpLCBjb25maWcubWFrZVRyZWUgfHwgKChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQnVpbGQgYSB0cmVlIGZyb20gYSBwb3N0Zml4LW9yZGVyZWQgYnVmZmVyIG9mIG5vZGUgaW5mb3JtYXRpb24sXG4gICAgb3IgYSBjdXJzb3Igb3ZlciBzdWNoIGEgYnVmZmVyLlxuICAgICovXG4gICAgc3RhdGljIGJ1aWxkKGRhdGEpIHsgcmV0dXJuIGJ1aWxkVHJlZShkYXRhKTsgfVxufVxuLyoqXG5UaGUgZW1wdHkgdHJlZVxuKi9cblRyZWUuZW1wdHkgPSBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBbXSwgW10sIDApO1xuY2xhc3MgRmxhdEJ1ZmZlckN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoYnVmZmVyLCBpbmRleCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIH1cbiAgICBnZXQgaWQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gNF07IH1cbiAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH1cbiAgICBnZXQgZW5kKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDJdOyB9XG4gICAgZ2V0IHNpemUoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMV07IH1cbiAgICBnZXQgcG9zKCkgeyByZXR1cm4gdGhpcy5pbmRleDsgfVxuICAgIG5leHQoKSB7IHRoaXMuaW5kZXggLT0gNDsgfVxuICAgIGZvcmsoKSB7IHJldHVybiBuZXcgRmxhdEJ1ZmZlckN1cnNvcih0aGlzLmJ1ZmZlciwgdGhpcy5pbmRleCk7IH1cbn1cbi8qKlxuVHJlZSBidWZmZXJzIGNvbnRhaW4gKHR5cGUsIHN0YXJ0LCBlbmQsIGVuZEluZGV4KSBxdWFkcyBmb3IgZWFjaFxubm9kZS4gSW4gc3VjaCBhIGJ1ZmZlciwgbm9kZXMgYXJlIHN0b3JlZCBpbiBwcmVmaXggb3JkZXIgKHBhcmVudHNcbmJlZm9yZSBjaGlsZHJlbiwgd2l0aCB0aGUgZW5kSW5kZXggb2YgdGhlIHBhcmVudCBpbmRpY2F0aW5nIHdoaWNoXG5jaGlsZHJlbiBiZWxvbmcgdG8gaXQpLlxuKi9cbmNsYXNzIFRyZWVCdWZmZXIge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHRyZWUgYnVmZmVyLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGJ1ZmZlcidzIGNvbnRlbnQuXG4gICAgKi9cbiAgICBidWZmZXIsIFxuICAgIC8qKlxuICAgIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIGdyb3VwIG9mIG5vZGVzIGluIHRoZSBidWZmZXIuXG4gICAgKi9cbiAgICBsZW5ndGgsIFxuICAgIC8qKlxuICAgIFRoZSBub2RlIHNldCB1c2VkIGluIHRoaXMgYnVmZmVyLlxuICAgICovXG4gICAgc2V0KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiBOb2RlVHlwZS5ub25lOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5idWZmZXIubGVuZ3RoOykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmJ1ZmZlcltpbmRleCArIDNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbihcIixcIik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2hpbGRTdHJpbmcoaW5kZXgpIHtcbiAgICAgICAgbGV0IGlkID0gdGhpcy5idWZmZXJbaW5kZXhdLCBlbmRJbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107XG4gICAgICAgIGxldCB0eXBlID0gdGhpcy5zZXQudHlwZXNbaWRdLCByZXN1bHQgPSB0eXBlLm5hbWU7XG4gICAgICAgIGlmICgvXFxXLy50ZXN0KHJlc3VsdCkgJiYgIXR5cGUuaXNFcnJvcilcbiAgICAgICAgICAgIHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdCk7XG4gICAgICAgIGluZGV4ICs9IDQ7XG4gICAgICAgIGlmIChlbmRJbmRleCA9PSBpbmRleClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBlbmRJbmRleCkge1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmNoaWxkU3RyaW5nKGluZGV4KSk7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIFwiKFwiICsgY2hpbGRyZW4uam9pbihcIixcIikgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaW5kQ2hpbGQoc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRpciwgcG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcywgcGljayA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSA9IGJ1ZmZlcltpICsgM10pIHtcbiAgICAgICAgICAgIGlmIChjaGVja1NpZGUoc2lkZSwgcG9zLCBidWZmZXJbaSArIDFdLCBidWZmZXJbaSArIDJdKSkge1xuICAgICAgICAgICAgICAgIHBpY2sgPSBpO1xuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGljaztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzbGljZShzdGFydEksIGVuZEksIGZyb20pIHtcbiAgICAgICAgbGV0IGIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgbGV0IGNvcHkgPSBuZXcgVWludDE2QXJyYXkoZW5kSSAtIHN0YXJ0SSksIGxlbiA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydEksIGogPSAwOyBpIDwgZW5kSTspIHtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXTtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIGZyb207XG4gICAgICAgICAgICBsZXQgdG8gPSBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tO1xuICAgICAgICAgICAgY29weVtqKytdID0gYltpKytdIC0gc3RhcnRJO1xuICAgICAgICAgICAgbGVuID0gTWF0aC5tYXgobGVuLCB0byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlQnVmZmVyKGNvcHksIGxlbiwgdGhpcy5zZXQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrU2lkZShzaWRlLCBwb3MsIGZyb20sIHRvKSB7XG4gICAgc3dpdGNoIChzaWRlKSB7XG4gICAgICAgIGNhc2UgLTIgLyogU2lkZS5CZWZvcmUgKi86IHJldHVybiBmcm9tIDwgcG9zO1xuICAgICAgICBjYXNlIC0xIC8qIFNpZGUuQXRPckJlZm9yZSAqLzogcmV0dXJuIHRvID49IHBvcyAmJiBmcm9tIDwgcG9zO1xuICAgICAgICBjYXNlIDAgLyogU2lkZS5Bcm91bmQgKi86IHJldHVybiBmcm9tIDwgcG9zICYmIHRvID4gcG9zO1xuICAgICAgICBjYXNlIDEgLyogU2lkZS5BdE9yQWZ0ZXIgKi86IHJldHVybiBmcm9tIDw9IHBvcyAmJiB0byA+IHBvcztcbiAgICAgICAgY2FzZSAyIC8qIFNpZGUuQWZ0ZXIgKi86IHJldHVybiB0byA+IHBvcztcbiAgICAgICAgY2FzZSA0IC8qIFNpZGUuRG9udENhcmUgKi86IHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVOb2RlKG5vZGUsIHBvcywgc2lkZSwgb3ZlcmxheXMpIHtcbiAgICB2YXIgX2E7XG4gICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlXG4gICAgd2hpbGUgKG5vZGUuZnJvbSA9PSBub2RlLnRvIHx8XG4gICAgICAgIChzaWRlIDwgMSA/IG5vZGUuZnJvbSA+PSBwb3MgOiBub2RlLmZyb20gPiBwb3MpIHx8XG4gICAgICAgIChzaWRlID4gLTEgPyBub2RlLnRvIDw9IHBvcyA6IG5vZGUudG8gPCBwb3MpKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSAhb3ZlcmxheXMgJiYgbm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlICYmIG5vZGUuaW5kZXggPCAwID8gbnVsbCA6IG5vZGUucGFyZW50O1xuICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICBub2RlID0gcGFyZW50O1xuICAgIH1cbiAgICBsZXQgbW9kZSA9IG92ZXJsYXlzID8gMCA6IEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzO1xuICAgIC8vIE11c3QgZ28gdXAgb3V0IG9mIG92ZXJsYXlzIHdoZW4gdGhvc2UgZG8gbm90IG92ZXJsYXAgd2l0aCBwb3NcbiAgICBpZiAob3ZlcmxheXMpXG4gICAgICAgIGZvciAobGV0IHNjYW4gPSBub2RlLCBwYXJlbnQgPSBzY2FuLnBhcmVudDsgcGFyZW50OyBzY2FuID0gcGFyZW50LCBwYXJlbnQgPSBzY2FuLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHNjYW4gaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBzY2FuLmluZGV4IDwgMCAmJiAoKF9hID0gcGFyZW50LmVudGVyKHBvcywgc2lkZSwgbW9kZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mcm9tKSAhPSBzY2FuLmZyb20pXG4gICAgICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IGlubmVyID0gbm9kZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpO1xuICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIG5vZGUgPSBpbm5lcjtcbiAgICB9XG59XG5jbGFzcyBCYXNlTm9kZSB7XG4gICAgY3Vyc29yKG1vZGUgPSAwKSB7IHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLCBtb2RlKTsgfVxuICAgIGdldENoaWxkKHR5cGUsIGJlZm9yZSA9IG51bGwsIGFmdGVyID0gbnVsbCkge1xuICAgICAgICBsZXQgciA9IGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gci5sZW5ndGggPyByWzBdIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0Q2hpbGRyZW4odHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTtcbiAgICB9XG4gICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIGZhbHNlKTtcbiAgICB9XG4gICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVOb2RlKHRoaXMsIHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIG1hdGNoQ29udGV4dChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBtYXRjaE5vZGVDb250ZXh0KHRoaXMucGFyZW50LCBjb250ZXh0KTtcbiAgICB9XG4gICAgZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUocG9zKSB7XG4gICAgICAgIGxldCBzY2FuID0gdGhpcy5jaGlsZEJlZm9yZShwb3MpLCBub2RlID0gdGhpcztcbiAgICAgICAgd2hpbGUgKHNjYW4pIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gc2Nhbi5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoIWxhc3QgfHwgbGFzdC50byAhPSBzY2FuLnRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKGxhc3QudHlwZS5pc0Vycm9yICYmIGxhc3QuZnJvbSA9PSBsYXN0LnRvKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHNjYW47XG4gICAgICAgICAgICAgICAgc2NhbiA9IGxhc3QucHJldlNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY2FuID0gbGFzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgZ2V0IG5vZGUoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgZ2V0IG5leHQoKSB7IHJldHVybiB0aGlzLnBhcmVudDsgfVxufVxuY2xhc3MgVHJlZU5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XG4gICAgY29uc3RydWN0b3IoX3RyZWUsIGZyb20sIFxuICAgIC8vIEluZGV4IGluIHBhcmVudCBub2RlLCBzZXQgdG8gLTEgaWYgdGhlIG5vZGUgaXMgbm90IGEgZGlyZWN0IGNoaWxkIG9mIF9wYXJlbnQubm9kZSAob3ZlcmxheSlcbiAgICBpbmRleCwgX3BhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl90cmVlID0gX3RyZWU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7IHJldHVybiB0aGlzLl90cmVlLnR5cGU7IH1cbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZS5uYW1lOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5mcm9tICsgdGhpcy5fdHJlZS5sZW5ndGg7IH1cbiAgICBuZXh0Q2hpbGQoaSwgZGlyLCBwb3MsIHNpZGUsIG1vZGUgPSAwKSB7XG4gICAgICAgIGZvciAobGV0IHBhcmVudCA9IHRoaXM7Oykge1xuICAgICAgICAgICAgZm9yIChsZXQgeyBjaGlsZHJlbiwgcG9zaXRpb25zIH0gPSBwYXJlbnQuX3RyZWUsIGUgPSBkaXIgPiAwID8gY2hpbGRyZW4ubGVuZ3RoIDogLTE7IGkgIT0gZTsgaSArPSBkaXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGNoaWxkcmVuW2ldLCBzdGFydCA9IHBvc2l0aW9uc1tpXSArIHBhcmVudC5mcm9tO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tTaWRlKHNpZGUsIHBvcywgc3RhcnQsIHN0YXJ0ICsgbmV4dC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBuZXh0LmZpbmRDaGlsZCgwLCBuZXh0LmJ1ZmZlci5sZW5ndGgsIGRpciwgcG9zIC0gc3RhcnQsIHNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZShuZXcgQnVmZmVyQ29udGV4dChwYXJlbnQsIG5leHQsIGksIHN0YXJ0KSwgbnVsbCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICghbmV4dC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKG5leHQpKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW91bnRlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobW9kZSAmIEl0ZXJNb2RlLklnbm9yZU1vdW50cykgJiYgKG1vdW50ZWQgPSBNb3VudGVkVHJlZS5nZXQobmV4dCkpICYmICFtb3VudGVkLm92ZXJsYXkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgc3RhcnQsIGksIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbm5lciA9IG5ldyBUcmVlTm9kZShuZXh0LCBzdGFydCwgaSwgcGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIWlubmVyLnR5cGUuaXNBbm9ueW1vdXMgPyBpbm5lclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbm5lci5uZXh0Q2hpbGQoZGlyIDwgMCA/IG5leHQuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fCAhcGFyZW50LnR5cGUuaXNBbm9ueW1vdXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocGFyZW50LmluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgaSA9IHBhcmVudC5pbmRleCArIGRpcjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll9wYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoIXBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5uZXh0Q2hpbGQodGhpcy5fdHJlZS5jaGlsZHJlbi5sZW5ndGggLSAxLCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCgwLCAxLCBwb3MsIDIgLyogU2lkZS5BZnRlciAqLyk7IH1cbiAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIHBvcywgLTIgLyogU2lkZS5CZWZvcmUgKi8pOyB9XG4gICAgZW50ZXIocG9zLCBzaWRlLCBtb2RlID0gMCkge1xuICAgICAgICBsZXQgbW91bnRlZDtcbiAgICAgICAgaWYgKCEobW9kZSAmIEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzKSAmJiAobW91bnRlZCA9IE1vdW50ZWRUcmVlLmdldCh0aGlzLl90cmVlKSkgJiYgbW91bnRlZC5vdmVybGF5KSB7XG4gICAgICAgICAgICBsZXQgclBvcyA9IHBvcyAtIHRoaXMuZnJvbTtcbiAgICAgICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPiAwID8gZnJvbSA8PSByUG9zIDogZnJvbSA8IHJQb3MpICYmXG4gICAgICAgICAgICAgICAgICAgIChzaWRlIDwgMCA/IHRvID49IHJQb3MgOiB0byA+IHJQb3MpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgbW91bnRlZC5vdmVybGF5WzBdLmZyb20gKyB0aGlzLmZyb20sIC0xLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCBzaWRlLCBtb2RlKTtcbiAgICB9XG4gICAgbmV4dFNpZ25pZmljYW50UGFyZW50KCkge1xuICAgICAgICBsZXQgdmFsID0gdGhpcztcbiAgICAgICAgd2hpbGUgKHZhbC50eXBlLmlzQW5vbnltb3VzICYmIHZhbC5fcGFyZW50KVxuICAgICAgICAgICAgdmFsID0gdmFsLl9wYXJlbnQ7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgPyB0aGlzLl9wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbmV4dFNpYmxpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4ICsgMSwgMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBwcmV2U2libGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCAmJiB0aGlzLmluZGV4ID49IDAgPyB0aGlzLl9wYXJlbnQubmV4dENoaWxkKHRoaXMuaW5kZXggLSAxLCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCB0cmVlKCkgeyByZXR1cm4gdGhpcy5fdHJlZTsgfVxuICAgIHRvVHJlZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWU7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5fdHJlZS50b1N0cmluZygpOyB9XG59XG5mdW5jdGlvbiBnZXRDaGlsZHJlbihub2RlLCB0eXBlLCBiZWZvcmUsIGFmdGVyKSB7XG4gICAgbGV0IGN1ciA9IG5vZGUuY3Vyc29yKCksIHJlc3VsdCA9IFtdO1xuICAgIGlmICghY3VyLmZpcnN0Q2hpbGQoKSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoYmVmb3JlICE9IG51bGwpXG4gICAgICAgIGZvciAobGV0IGZvdW5kID0gZmFsc2U7ICFmb3VuZDspIHtcbiAgICAgICAgICAgIGZvdW5kID0gY3VyLnR5cGUuaXMoYmVmb3JlKTtcbiAgICAgICAgICAgIGlmICghY3VyLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKGFmdGVyICE9IG51bGwgJiYgY3VyLnR5cGUuaXMoYWZ0ZXIpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKGN1ci50eXBlLmlzKHR5cGUpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goY3VyLm5vZGUpO1xuICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgcmV0dXJuIGFmdGVyID09IG51bGwgPyByZXN1bHQgOiBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaE5vZGVDb250ZXh0KG5vZGUsIGNvbnRleHQsIGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEpIHtcbiAgICBmb3IgKGxldCBwID0gbm9kZTsgaSA+PSAwOyBwID0gcC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKCFwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXAudHlwZS5pc0Fub255bW91cykge1xuICAgICAgICAgICAgaWYgKGNvbnRleHRbaV0gJiYgY29udGV4dFtpXSAhPSBwLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuY2xhc3MgQnVmZmVyQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBidWZmZXIsIGluZGV4LCBzdGFydCkge1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIH1cbn1cbmNsYXNzIEJ1ZmZlck5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfVxuICAgIGdldCBmcm9tKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdOyB9XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgX3BhcmVudCwgaW5kZXgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLnR5cGUgPSBjb250ZXh0LmJ1ZmZlci5zZXQudHlwZXNbY29udGV4dC5idWZmZXIuYnVmZmVyW2luZGV4XV07XG4gICAgfVxuICAgIGNoaWxkKGRpciwgcG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgZGlyLCBwb3MgLSB0aGlzLmNvbnRleHQuc3RhcnQsIHNpZGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNoaWxkKC0xLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgcG9zLCAyIC8qIFNpZGUuQWZ0ZXIgKi8pOyB9XG4gICAgY2hpbGRCZWZvcmUocG9zKSB7IHJldHVybiB0aGlzLmNoaWxkKC0xLCBwb3MsIC0yIC8qIFNpZGUuQmVmb3JlICovKTsgfVxuICAgIGVudGVyKHBvcywgc2lkZSwgbW9kZSA9IDApIHtcbiAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IGluZGV4ID0gYnVmZmVyLmZpbmRDaGlsZCh0aGlzLmluZGV4ICsgNCwgYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM10sIHNpZGUgPiAwID8gMSA6IC0xLCBwb3MgLSB0aGlzLmNvbnRleHQuc3RhcnQsIHNpZGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50IHx8IHRoaXMuY29udGV4dC5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7XG4gICAgfVxuICAgIGV4dGVybmFsU2libGluZyhkaXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IG51bGwgOiB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRDaGlsZCh0aGlzLmNvbnRleHQuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTtcbiAgICB9XG4gICAgZ2V0IG5leHRTaWJsaW5nKCkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IGFmdGVyID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgIGlmIChhZnRlciA8ICh0aGlzLl9wYXJlbnQgPyBidWZmZXIuYnVmZmVyW3RoaXMuX3BhcmVudC5pbmRleCArIDNdIDogYnVmZmVyLmJ1ZmZlci5sZW5ndGgpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBhZnRlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVybmFsU2libGluZygxKTtcbiAgICB9XG4gICAgZ2V0IHByZXZTaWJsaW5nKCkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gdGhpcy5fcGFyZW50ID8gdGhpcy5fcGFyZW50LmluZGV4ICsgNCA6IDA7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID09IHBhcmVudFN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxTaWJsaW5nKC0xKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBidWZmZXIuZmluZENoaWxkKHBhcmVudFN0YXJ0LCB0aGlzLmluZGV4LCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSk7XG4gICAgfVxuICAgIGdldCB0cmVlKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHRvVHJlZSgpIHtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgbGV0IHN0YXJ0SSA9IHRoaXMuaW5kZXggKyA0LCBlbmRJID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgIGlmIChlbmRJID4gc3RhcnRJKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdO1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChidWZmZXIuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tKSk7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRyZWUodGhpcy50eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCB0aGlzLnRvIC0gdGhpcy5mcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIHRoaXMuY29udGV4dC5idWZmZXIuY2hpbGRTdHJpbmcodGhpcy5pbmRleCk7IH1cbn1cbmZ1bmN0aW9uIGl0ZXJTdGFjayhoZWFkcykge1xuICAgIGlmICghaGVhZHMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgcGljayA9IDAsIHBpY2tlZCA9IGhlYWRzWzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBoZWFkc1tpXTtcbiAgICAgICAgaWYgKG5vZGUuZnJvbSA+IHBpY2tlZC5mcm9tIHx8IG5vZGUudG8gPCBwaWNrZWQudG8pIHtcbiAgICAgICAgICAgIHBpY2tlZCA9IG5vZGU7XG4gICAgICAgICAgICBwaWNrID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgbmV4dCA9IHBpY2tlZCBpbnN0YW5jZW9mIFRyZWVOb2RlICYmIHBpY2tlZC5pbmRleCA8IDAgPyBudWxsIDogcGlja2VkLnBhcmVudDtcbiAgICBsZXQgbmV3SGVhZHMgPSBoZWFkcy5zbGljZSgpO1xuICAgIGlmIChuZXh0KVxuICAgICAgICBuZXdIZWFkc1twaWNrXSA9IG5leHQ7XG4gICAgZWxzZVxuICAgICAgICBuZXdIZWFkcy5zcGxpY2UocGljaywgMSk7XG4gICAgcmV0dXJuIG5ldyBTdGFja0l0ZXJhdG9yKG5ld0hlYWRzLCBwaWNrZWQpO1xufVxuY2xhc3MgU3RhY2tJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoaGVhZHMsIG5vZGUpIHtcbiAgICAgICAgdGhpcy5oZWFkcyA9IGhlYWRzO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIH1cbiAgICBnZXQgbmV4dCgpIHsgcmV0dXJuIGl0ZXJTdGFjayh0aGlzLmhlYWRzKTsgfVxufVxuZnVuY3Rpb24gc3RhY2tJdGVyYXRvcih0cmVlLCBwb3MsIHNpZGUpIHtcbiAgICBsZXQgaW5uZXIgPSB0cmVlLnJlc29sdmVJbm5lcihwb3MsIHNpZGUpLCBsYXllcnMgPSBudWxsO1xuICAgIGZvciAobGV0IHNjYW4gPSBpbm5lciBpbnN0YW5jZW9mIFRyZWVOb2RlID8gaW5uZXIgOiBpbm5lci5jb250ZXh0LnBhcmVudDsgc2Nhbjsgc2NhbiA9IHNjYW4ucGFyZW50KSB7XG4gICAgICAgIGlmIChzY2FuLmluZGV4IDwgMCkgeyAvLyBUaGlzIGlzIGFuIG92ZXJsYXkgcm9vdFxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHNjYW4ucGFyZW50O1xuICAgICAgICAgICAgKGxheWVycyB8fCAobGF5ZXJzID0gW2lubmVyXSkpLnB1c2gocGFyZW50LnJlc29sdmUocG9zLCBzaWRlKSk7XG4gICAgICAgICAgICBzY2FuID0gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1vdW50ID0gTW91bnRlZFRyZWUuZ2V0KHNjYW4udHJlZSk7XG4gICAgICAgICAgICAvLyBSZWxldmFudCBvdmVybGF5IGJyYW5jaGluZyBvZmZcbiAgICAgICAgICAgIGlmIChtb3VudCAmJiBtb3VudC5vdmVybGF5ICYmIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSA8PSBwb3MgJiYgbW91bnQub3ZlcmxheVttb3VudC5vdmVybGF5Lmxlbmd0aCAtIDFdLnRvID49IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCByb290ID0gbmV3IFRyZWVOb2RlKG1vdW50LnRyZWUsIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSArIHNjYW4uZnJvbSwgLTEsIHNjYW4pO1xuICAgICAgICAgICAgICAgIChsYXllcnMgfHwgKGxheWVycyA9IFtpbm5lcl0pKS5wdXNoKHJlc29sdmVOb2RlKHJvb3QsIHBvcywgc2lkZSwgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5ZXJzID8gaXRlclN0YWNrKGxheWVycykgOiBpbm5lcjtcbn1cbi8qKlxuQSB0cmVlIGN1cnNvciBvYmplY3QgZm9jdXNlcyBvbiBhIGdpdmVuIG5vZGUgaW4gYSBzeW50YXggdHJlZSwgYW5kXG5hbGxvd3MgeW91IHRvIG1vdmUgdG8gYWRqYWNlbnQgbm9kZXMuXG4qL1xuY2xhc3MgVHJlZUN1cnNvciB7XG4gICAgLyoqXG4gICAgU2hvcnRoYW5kIGZvciBgLnR5cGUubmFtZWAuXG4gICAgKi9cbiAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMudHlwZS5uYW1lOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1vZGUgPSAwKSB7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YWNrID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyTm9kZSA9IG51bGw7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgVHJlZU5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMueWllbGROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdHJlZSA9IG5vZGUuY29udGV4dC5wYXJlbnQ7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSBub2RlLl9wYXJlbnQ7IG47IG4gPSBuLl9wYXJlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFjay51bnNoaWZ0KG4uaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJOb2RlID0gbm9kZTtcbiAgICAgICAgICAgIHRoaXMueWllbGRCdWYobm9kZS5pbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgeWllbGROb2RlKG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLl90cmVlID0gbm9kZTtcbiAgICAgICAgdGhpcy50eXBlID0gbm9kZS50eXBlO1xuICAgICAgICB0aGlzLmZyb20gPSBub2RlLmZyb207XG4gICAgICAgIHRoaXMudG8gPSBub2RlLnRvO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgeWllbGRCdWYoaW5kZXgsIHR5cGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICBsZXQgeyBzdGFydCwgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZSB8fCBidWZmZXIuc2V0LnR5cGVzW2J1ZmZlci5idWZmZXJbaW5kZXhdXTtcbiAgICAgICAgdGhpcy5mcm9tID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMV07XG4gICAgICAgIHRoaXMudG8gPSBzdGFydCArIGJ1ZmZlci5idWZmZXJbaW5kZXggKyAyXTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgeWllbGQobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgVHJlZU5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkTm9kZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDtcbiAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYobm9kZS5pbmRleCwgbm9kZS50eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID8gdGhpcy5idWZmZXIuYnVmZmVyLmNoaWxkU3RyaW5nKHRoaXMuaW5kZXgpIDogdGhpcy5fdHJlZS50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVudGVyQ2hpbGQoZGlyLCBwb3MsIHNpZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUubmV4dENoaWxkKGRpciA8IDAgPyB0aGlzLl90cmVlLl90cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwLCBkaXIsIHBvcywgc2lkZSwgdGhpcy5tb2RlKSk7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuYnVmZmVyLnN0YXJ0LCBzaWRlKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuaW5kZXgpO1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1ZihpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGN1cnNvciB0byB0aGlzIG5vZGUncyBmaXJzdCBjaGlsZC4gV2hlbiB0aGlzIHJldHVybnNcbiAgICBmYWxzZSwgdGhlIG5vZGUgaGFzIG5vIGNoaWxkLCBhbmQgdGhlIGN1cnNvciBoYXMgbm90IGJlZW4gbW92ZWQuXG4gICAgKi9cbiAgICBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKDEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhpcyBub2RlJ3MgbGFzdCBjaGlsZC5cbiAgICAqL1xuICAgIGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgZmlyc3QgY2hpbGQgdGhhdCBlbmRzIGFmdGVyIGBwb3NgLlxuICAgICovXG4gICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIDIgLyogU2lkZS5BZnRlciAqLyk7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBsYXN0IGNoaWxkIHRoYXQgc3RhcnRzIGJlZm9yZSBgcG9zYC5cbiAgICAqL1xuICAgIGNoaWxkQmVmb3JlKHBvcykgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCBwb3MsIC0yIC8qIFNpZGUuQmVmb3JlICovKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgY2hpbGQgYXJvdW5kIGBwb3NgLiBJZiBzaWRlIGlzIC0xIHRoZVxuICAgIGNoaWxkIG1heSBlbmQgYXQgdGhhdCBwb3NpdGlvbiwgd2hlbiAxIGl0IG1heSBzdGFydCB0aGVyZS4gVGhpc1xuICAgIHdpbGwgYWxzbyBlbnRlciBbb3ZlcmxhaWRdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSlcbiAgICBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSB0cmVlcyB1bmxlc3MgYG92ZXJsYXlzYCBpc1xuICAgIHNldCB0byBmYWxzZS5cbiAgICAqL1xuICAgIGVudGVyKHBvcywgc2lkZSwgbW9kZSA9IHRoaXMubW9kZSkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKTtcbiAgICAgICAgcmV0dXJuIG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycyA/IGZhbHNlIDogdGhpcy5lbnRlckNoaWxkKDEsIHBvcywgc2lkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5vZGUncyBwYXJlbnQgbm9kZSwgaWYgdGhpcyBpc24ndCB0aGUgdG9wIG5vZGUuXG4gICAgKi9cbiAgICBwYXJlbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUoKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID8gdGhpcy5fdHJlZS5fcGFyZW50IDogdGhpcy5fdHJlZS5wYXJlbnQpO1xuICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1Zih0aGlzLnN0YWNrLnBvcCgpKTtcbiAgICAgICAgbGV0IHBhcmVudCA9ICh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSA/IHRoaXMuYnVmZmVyLnBhcmVudCA6IHRoaXMuYnVmZmVyLnBhcmVudC5uZXh0U2lnbmlmaWNhbnRQYXJlbnQoKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUocGFyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzaWJsaW5nKGRpcikge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLl90cmVlLl9wYXJlbnQgPyBmYWxzZVxuICAgICAgICAgICAgICAgIDogdGhpcy55aWVsZCh0aGlzLl90cmVlLmluZGV4IDwgMCA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl90cmVlLl9wYXJlbnQubmV4dENoaWxkKHRoaXMuX3RyZWUuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovLCB0aGlzLm1vZGUpKTtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgZCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGRpciA8IDApIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnRTdGFydCA9IGQgPCAwID8gMCA6IHRoaXMuc3RhY2tbZF0gKyA0O1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggIT0gcGFyZW50U3RhcnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYnVmZmVyLmZpbmRDaGlsZChwYXJlbnRTdGFydCwgdGhpcy5pbmRleCwgLTEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGFmdGVyID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107XG4gICAgICAgICAgICBpZiAoYWZ0ZXIgPCAoZCA8IDAgPyBidWZmZXIuYnVmZmVyLmxlbmd0aCA6IGJ1ZmZlci5idWZmZXJbdGhpcy5zdGFja1tkXSArIDNdKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1ZihhZnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGQgPCAwID8gdGhpcy55aWVsZCh0aGlzLmJ1ZmZlci5wYXJlbnQubmV4dENoaWxkKHRoaXMuYnVmZmVyLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLywgdGhpcy5tb2RlKSkgOiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGlzIG5vZGUncyBuZXh0IHNpYmxpbmcsIGlmIGFueS5cbiAgICAqL1xuICAgIG5leHRTaWJsaW5nKCkgeyByZXR1cm4gdGhpcy5zaWJsaW5nKDEpOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGlzIG5vZGUncyBwcmV2aW91cyBzaWJsaW5nLCBpZiBhbnkuXG4gICAgKi9cbiAgICBwcmV2U2libGluZygpIHsgcmV0dXJuIHRoaXMuc2libGluZygtMSk7IH1cbiAgICBhdExhc3ROb2RlKGRpcikge1xuICAgICAgICBsZXQgaW5kZXgsIHBhcmVudCwgeyBidWZmZXIgfSA9IHRoaXM7XG4gICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCBidWZmZXIuYnVmZmVyLmJ1ZmZlci5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRleDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyLmJ1ZmZlci5idWZmZXJbaSArIDNdIDwgdGhpcy5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICh7IGluZGV4LCBwYXJlbnQgfSA9IGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAoeyBpbmRleCwgX3BhcmVudDogcGFyZW50IH0gPSB0aGlzLl90cmVlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgcGFyZW50OyB7IGluZGV4LCBfcGFyZW50OiBwYXJlbnQgfSA9IHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgZGlyLCBlID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll90cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSAhPSBlOyBpICs9IGRpcikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSBwYXJlbnQuX3RyZWUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIWNoaWxkLnR5cGUuaXNBbm9ueW1vdXMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoaWxkKGNoaWxkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG1vdmUoZGlyLCBlbnRlcikge1xuICAgICAgICBpZiAoZW50ZXIgJiYgdGhpcy5lbnRlckNoaWxkKGRpciwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaWJsaW5nKGRpcikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5hdExhc3ROb2RlKGRpcikgfHwgIXRoaXMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5leHQgbm9kZSBpbiBhXG4gICAgW3ByZS1vcmRlcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJlZV90cmF2ZXJzYWwjUHJlLW9yZGVyLF9OTFIpXG4gICAgdHJhdmVyc2FsLCBnb2luZyBmcm9tIGEgbm9kZSB0byBpdHMgZmlyc3QgY2hpbGQgb3IsIGlmIHRoZVxuICAgIGN1cnJlbnQgbm9kZSBpcyBlbXB0eSBvciBgZW50ZXJgIGlzIGZhbHNlLCBpdHMgbmV4dCBzaWJsaW5nIG9yXG4gICAgdGhlIG5leHQgc2libGluZyBvZiB0aGUgZmlyc3QgcGFyZW50IG5vZGUgdGhhdCBoYXMgb25lLlxuICAgICovXG4gICAgbmV4dChlbnRlciA9IHRydWUpIHsgcmV0dXJuIHRoaXMubW92ZSgxLCBlbnRlcik7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBuZXh0IG5vZGUgaW4gYSBsYXN0LXRvLWZpcnN0IHByZS1vcmRlciB0cmF2ZXJzYWwuIEFcbiAgICBub2RlIGlzIGZvbGxvd2VkIGJ5IGl0cyBsYXN0IGNoaWxkIG9yLCBpZiBpdCBoYXMgbm9uZSwgaXRzXG4gICAgcHJldmlvdXMgc2libGluZyBvciB0aGUgcHJldmlvdXMgc2libGluZyBvZiB0aGUgZmlyc3QgcGFyZW50XG4gICAgbm9kZSB0aGF0IGhhcyBvbmUuXG4gICAgKi9cbiAgICBwcmV2KGVudGVyID0gdHJ1ZSkgeyByZXR1cm4gdGhpcy5tb3ZlKC0xLCBlbnRlcik7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGlubmVybW9zdCBub2RlIHRoYXQgY292ZXJzIGBwb3NgLiBJZlxuICAgIGBzaWRlYCBpcyAtMSwgaXQgd2lsbCBlbnRlciBub2RlcyB0aGF0IGVuZCBhdCBgcG9zYC4gSWYgaXQgaXMgMSxcbiAgICBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgc3RhcnQgYXQgYHBvc2AuXG4gICAgKi9cbiAgICBtb3ZlVG8ocG9zLCBzaWRlID0gMCkge1xuICAgICAgICAvLyBNb3ZlIHVwIHRvIGEgbm9kZSB0aGF0IGFjdHVhbGx5IGhvbGRzIHRoZSBwb3NpdGlvbiwgaWYgcG9zc2libGVcbiAgICAgICAgd2hpbGUgKHRoaXMuZnJvbSA9PSB0aGlzLnRvIHx8XG4gICAgICAgICAgICAoc2lkZSA8IDEgPyB0aGlzLmZyb20gPj0gcG9zIDogdGhpcy5mcm9tID4gcG9zKSB8fFxuICAgICAgICAgICAgKHNpZGUgPiAtMSA/IHRoaXMudG8gPD0gcG9zIDogdGhpcy50byA8IHBvcykpXG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFRoZW4gc2NhbiBkb3duIGludG8gY2hpbGQgbm9kZXMgYXMgZmFyIGFzIHBvc3NpYmxlXG4gICAgICAgIHdoaWxlICh0aGlzLmVudGVyQ2hpbGQoMSwgcG9zLCBzaWRlKSkgeyB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGN1cnNvcidzIGN1cnJlbnRcbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBub2RlKCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyZWU7XG4gICAgICAgIGxldCBjYWNoZSA9IHRoaXMuYnVmZmVyTm9kZSwgcmVzdWx0ID0gbnVsbCwgZGVwdGggPSAwO1xuICAgICAgICBpZiAoY2FjaGUgJiYgY2FjaGUuY29udGV4dCA9PSB0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgc2NhbjogZm9yIChsZXQgaW5kZXggPSB0aGlzLmluZGV4LCBkID0gdGhpcy5zdGFjay5sZW5ndGg7IGQgPj0gMDspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gY2FjaGU7IGM7IGMgPSBjLl9wYXJlbnQpXG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmluZGV4ID09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXB0aCA9IGQgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgc2NhbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5zdGFja1stLWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSBkZXB0aDsgaSA8IHRoaXMuc3RhY2subGVuZ3RoOyBpKyspXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgQnVmZmVyTm9kZSh0aGlzLmJ1ZmZlciwgcmVzdWx0LCB0aGlzLnN0YWNrW2ldKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyTm9kZSA9IG5ldyBCdWZmZXJOb2RlKHRoaXMuYnVmZmVyLCByZXN1bHQsIHRoaXMuaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIFt0cmVlXSgjY29tbW9uLlRyZWUpIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBub2RlLCBpZlxuICAgIGFueS4gV2lsbCByZXR1cm4gbnVsbCB3aGVuIHRoZSBub2RlIGlzIGluIGEgW3RyZWVcbiAgICBidWZmZXJdKCNjb21tb24uVHJlZUJ1ZmZlcikuXG4gICAgKi9cbiAgICBnZXQgdHJlZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID8gbnVsbCA6IHRoaXMuX3RyZWUuX3RyZWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLCBjYWxsaW5nXG4gICAgYGVudGVyYCB3aGVuIGVudGVyaW5nIGEgbm9kZSBhbmQgYGxlYXZlYCwgaWYgZ2l2ZW4sIHdoZW4gbGVhdmluZ1xuICAgIG9uZS4gV2hlbiBgZW50ZXJgIHJldHVybnMgYGZhbHNlYCwgYW55IGNoaWxkcmVuIG9mIHRoYXQgbm9kZSBhcmVcbiAgICBza2lwcGVkLCBhbmQgYGxlYXZlYCBpc24ndCBjYWxsZWQgZm9yIGl0LlxuICAgICovXG4gICAgaXRlcmF0ZShlbnRlciwgbGVhdmUpIHtcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBtdXN0TGVhdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUuaXNBbm9ueW1vdXMgfHwgZW50ZXIodGhpcykgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudHlwZS5pc0Fub255bW91cylcbiAgICAgICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAobXVzdExlYXZlICYmIGxlYXZlKVxuICAgICAgICAgICAgICAgICAgICBsZWF2ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICBtdXN0TGVhdmUgPSB0aGlzLnR5cGUuaXNBbm9ueW1vdXM7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgICAgICBtdXN0TGVhdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0aGUgY3VycmVudCBub2RlIG1hdGNoZXMgYSBnaXZlbiBjb250ZXh04oCUYSBzZXF1ZW5jZVxuICAgIG9mIGRpcmVjdCBwYXJlbnQgbm9kZSBuYW1lcy4gRW1wdHkgc3RyaW5ncyBpbiB0aGUgY29udGV4dCBhcnJheVxuICAgIGFyZSB0cmVhdGVkIGFzIHdpbGRjYXJkcy5cbiAgICAqL1xuICAgIG1hdGNoQ29udGV4dChjb250ZXh0KSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLm5vZGUucGFyZW50LCBjb250ZXh0KTtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgeyB0eXBlcyB9ID0gYnVmZmVyLnNldDtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNvbnRleHQubGVuZ3RoIC0gMSwgZCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBkLS0pIHtcbiAgICAgICAgICAgIGlmIChkIDwgMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLl90cmVlLCBjb250ZXh0LCBpKTtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbYnVmZmVyLmJ1ZmZlclt0aGlzLnN0YWNrW2RdXV07XG4gICAgICAgICAgICBpZiAoIXR5cGUuaXNBbm9ueW1vdXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dFtpXSAmJiBjb250ZXh0W2ldICE9IHR5cGUubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNDaGlsZCh0cmVlKSB7XG4gICAgcmV0dXJuIHRyZWUuY2hpbGRyZW4uc29tZShjaCA9PiBjaCBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHwgIWNoLnR5cGUuaXNBbm9ueW1vdXMgfHwgaGFzQ2hpbGQoY2gpKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVHJlZShkYXRhKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCB7IGJ1ZmZlciwgbm9kZVNldCwgbWF4QnVmZmVyTGVuZ3RoID0gRGVmYXVsdEJ1ZmZlckxlbmd0aCwgcmV1c2VkID0gW10sIG1pblJlcGVhdFR5cGUgPSBub2RlU2V0LnR5cGVzLmxlbmd0aCB9ID0gZGF0YTtcbiAgICBsZXQgY3Vyc29yID0gQXJyYXkuaXNBcnJheShidWZmZXIpID8gbmV3IEZsYXRCdWZmZXJDdXJzb3IoYnVmZmVyLCBidWZmZXIubGVuZ3RoKSA6IGJ1ZmZlcjtcbiAgICBsZXQgdHlwZXMgPSBub2RlU2V0LnR5cGVzO1xuICAgIGxldCBjb250ZXh0SGFzaCA9IDAsIGxvb2tBaGVhZCA9IDA7XG4gICAgZnVuY3Rpb24gdGFrZU5vZGUocGFyZW50U3RhcnQsIG1pblBvcywgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5SZXBlYXQsIGRlcHRoKSB7XG4gICAgICAgIGxldCB7IGlkLCBzdGFydCwgZW5kLCBzaXplIH0gPSBjdXJzb3I7XG4gICAgICAgIGxldCBsb29rQWhlYWRBdFN0YXJ0ID0gbG9va0FoZWFkLCBjb250ZXh0QXRTdGFydCA9IGNvbnRleHRIYXNoO1xuICAgICAgICB3aGlsZSAoc2l6ZSA8IDApIHtcbiAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoc2l6ZSA9PSAtMSAvKiBTcGVjaWFsUmVjb3JkLlJldXNlICovKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSByZXVzZWRbaWRdO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnQgLSBwYXJlbnRTdGFydCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtMyAvKiBTcGVjaWFsUmVjb3JkLkNvbnRleHRDaGFuZ2UgKi8pIHsgLy8gQ29udGV4dCBjaGFuZ2VcbiAgICAgICAgICAgICAgICBjb250ZXh0SGFzaCA9IGlkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTQgLyogU3BlY2lhbFJlY29yZC5Mb29rQWhlYWQgKi8pIHtcbiAgICAgICAgICAgICAgICBsb29rQWhlYWQgPSBpZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVW5yZWNvZ25pemVkIHJlY29yZCBzaXplOiAke3NpemV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHR5cGUgPSB0eXBlc1tpZF0sIG5vZGUsIGJ1ZmZlcjtcbiAgICAgICAgbGV0IHN0YXJ0UG9zID0gc3RhcnQgLSBwYXJlbnRTdGFydDtcbiAgICAgICAgaWYgKGVuZCAtIHN0YXJ0IDw9IG1heEJ1ZmZlckxlbmd0aCAmJiAoYnVmZmVyID0gZmluZEJ1ZmZlclNpemUoY3Vyc29yLnBvcyAtIG1pblBvcywgaW5SZXBlYXQpKSkge1xuICAgICAgICAgICAgLy8gU21hbGwgZW5vdWdoIGZvciBhIGJ1ZmZlciwgYW5kIG5vIHJldXNlZCBub2RlcyBpbnNpZGVcbiAgICAgICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlci5zaXplIC0gYnVmZmVyLnNraXApO1xuICAgICAgICAgICAgbGV0IGVuZFBvcyA9IGN1cnNvci5wb3MgLSBidWZmZXIuc2l6ZSwgaW5kZXggPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJzb3IucG9zID4gZW5kUG9zKVxuICAgICAgICAgICAgICAgIGluZGV4ID0gY29weVRvQnVmZmVyKGJ1ZmZlci5zdGFydCwgZGF0YSwgaW5kZXgpO1xuICAgICAgICAgICAgbm9kZSA9IG5ldyBUcmVlQnVmZmVyKGRhdGEsIGVuZCAtIGJ1ZmZlci5zdGFydCwgbm9kZVNldCk7XG4gICAgICAgICAgICBzdGFydFBvcyA9IGJ1ZmZlci5zdGFydCAtIHBhcmVudFN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvLyBNYWtlIGl0IGEgbm9kZVxuICAgICAgICAgICAgbGV0IGVuZFBvcyA9IGN1cnNvci5wb3MgLSBzaXplO1xuICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgIGxldCBsb2NhbENoaWxkcmVuID0gW10sIGxvY2FsUG9zaXRpb25zID0gW107XG4gICAgICAgICAgICBsZXQgbG9jYWxJblJlcGVhdCA9IGlkID49IG1pblJlcGVhdFR5cGUgPyBpZCA6IC0xO1xuICAgICAgICAgICAgbGV0IGxhc3RHcm91cCA9IDAsIGxhc3RFbmQgPSBlbmQ7XG4gICAgICAgICAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IGVuZFBvcykge1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbEluUmVwZWF0ID49IDAgJiYgY3Vyc29yLmlkID09IGxvY2FsSW5SZXBlYXQgJiYgY3Vyc29yLnNpemUgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmVuZCA8PSBsYXN0RW5kIC0gbWF4QnVmZmVyTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlUmVwZWF0TGVhZihsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgc3RhcnQsIGxhc3RHcm91cCwgY3Vyc29yLmVuZCwgbGFzdEVuZCwgbG9jYWxJblJlcGVhdCwgbG9va0FoZWFkQXRTdGFydCwgY29udGV4dEF0U3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEdyb3VwID0gbG9jYWxDaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0RW5kID0gY3Vyc29yLmVuZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXB0aCA+IDI1MDAgLyogQ3V0T2ZmLkRlcHRoICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHRha2VGbGF0Tm9kZShzdGFydCwgZW5kUG9zLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YWtlTm9kZShzdGFydCwgZW5kUG9zLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgbG9jYWxJblJlcGVhdCwgZGVwdGggKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+PSAwICYmIGxhc3RHcm91cCA+IDAgJiYgbGFzdEdyb3VwIDwgbG9jYWxDaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgbWFrZVJlcGVhdExlYWYobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHN0YXJ0LCBsYXN0R3JvdXAsIHN0YXJ0LCBsYXN0RW5kLCBsb2NhbEluUmVwZWF0LCBsb29rQWhlYWRBdFN0YXJ0LCBjb250ZXh0QXRTdGFydCk7XG4gICAgICAgICAgICBsb2NhbENoaWxkcmVuLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGxvY2FsUG9zaXRpb25zLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGlmIChsb2NhbEluUmVwZWF0ID4gLTEgJiYgbGFzdEdyb3VwID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCBtYWtlID0gbWFrZUJhbGFuY2VkKHR5cGUsIGNvbnRleHRBdFN0YXJ0KTtcbiAgICAgICAgICAgICAgICBub2RlID0gYmFsYW5jZVJhbmdlKHR5cGUsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCAwLCBsb2NhbENoaWxkcmVuLmxlbmd0aCwgMCwgZW5kIC0gc3RhcnQsIG1ha2UsIG1ha2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG1ha2VUcmVlKHR5cGUsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBlbmQgLSBzdGFydCwgbG9va0FoZWFkQXRTdGFydCAtIGVuZCwgY29udGV4dEF0U3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKHN0YXJ0UG9zKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGFrZUZsYXROb2RlKHBhcmVudFN0YXJ0LCBtaW5Qb3MsIGNoaWxkcmVuLCBwb3NpdGlvbnMpIHtcbiAgICAgICAgbGV0IG5vZGVzID0gW107IC8vIFRlbXBvcmFyeSwgaW52ZXJ0ZWQgYXJyYXkgb2YgbGVhZiBub2RlcyBmb3VuZCwgd2l0aCBhYnNvbHV0ZSBwb3NpdGlvbnNcbiAgICAgICAgbGV0IG5vZGVDb3VudCA9IDAsIHN0b3BBdCA9IC0xO1xuICAgICAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IG1pblBvcykge1xuICAgICAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjtcbiAgICAgICAgICAgIGlmIChzaXplID4gNCkgeyAvLyBOb3QgYSBsZWFmXG4gICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0b3BBdCA+IC0xICYmIHN0YXJ0IDwgc3RvcEF0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcEF0IDwgMClcbiAgICAgICAgICAgICAgICAgICAgc3RvcEF0ID0gZW5kIC0gbWF4QnVmZmVyTGVuZ3RoO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goaWQsIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgIG5vZGVDb3VudCsrO1xuICAgICAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGVDb3VudCkge1xuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IG5ldyBVaW50MTZBcnJheShub2RlQ291bnQgKiA0KTtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmxlbmd0aCAtIDMsIGogPSAwOyBpID49IDA7IGkgLT0gMykge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKytdID0gbm9kZXNbaV07XG4gICAgICAgICAgICAgICAgYnVmZmVyW2orK10gPSBub2Rlc1tpICsgMV0gLSBzdGFydDtcbiAgICAgICAgICAgICAgICBidWZmZXJbaisrXSA9IG5vZGVzW2kgKyAyXSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKytdID0gajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3IFRyZWVCdWZmZXIoYnVmZmVyLCBub2Rlc1syXSAtIHN0YXJ0LCBub2RlU2V0KSk7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaChzdGFydCAtIHBhcmVudFN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlQmFsYW5jZWQodHlwZSwgY29udGV4dEhhc2gpIHtcbiAgICAgICAgcmV0dXJuIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IHtcbiAgICAgICAgICAgIGxldCBsb29rQWhlYWQgPSAwLCBsYXN0SSA9IGNoaWxkcmVuLmxlbmd0aCAtIDEsIGxhc3QsIGxvb2tBaGVhZFByb3A7XG4gICAgICAgICAgICBpZiAobGFzdEkgPj0gMCAmJiAobGFzdCA9IGNoaWxkcmVuW2xhc3RJXSkgaW5zdGFuY2VvZiBUcmVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0SSAmJiBsYXN0LnR5cGUgPT0gdHlwZSAmJiBsYXN0Lmxlbmd0aCA9PSBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0O1xuICAgICAgICAgICAgICAgIGlmIChsb29rQWhlYWRQcm9wID0gbGFzdC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCkpXG4gICAgICAgICAgICAgICAgICAgIGxvb2tBaGVhZCA9IHBvc2l0aW9uc1tsYXN0SV0gKyBsYXN0Lmxlbmd0aCArIGxvb2tBaGVhZFByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFrZVRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBsb29rQWhlYWQsIGNvbnRleHRIYXNoKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZVJlcGVhdExlYWYoY2hpbGRyZW4sIHBvc2l0aW9ucywgYmFzZSwgaSwgZnJvbSwgdG8sIHR5cGUsIGxvb2tBaGVhZCwgY29udGV4dEhhc2gpIHtcbiAgICAgICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgd2hpbGUgKGNoaWxkcmVuLmxlbmd0aCA+IGkpIHtcbiAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChjaGlsZHJlbi5wb3AoKSk7XG4gICAgICAgICAgICBsb2NhbFBvc2l0aW9ucy5wdXNoKHBvc2l0aW9ucy5wb3AoKSArIGJhc2UgLSBmcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbi5wdXNoKG1ha2VUcmVlKG5vZGVTZXQudHlwZXNbdHlwZV0sIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCB0byAtIGZyb20sIGxvb2tBaGVhZCAtIHRvLCBjb250ZXh0SGFzaCkpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gYmFzZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1ha2VUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgbG9va0FoZWFkLCBjb250ZXh0SGFzaCwgcHJvcHMpIHtcbiAgICAgICAgaWYgKGNvbnRleHRIYXNoKSB7XG4gICAgICAgICAgICBsZXQgcGFpciA9IFtOb2RlUHJvcC5jb250ZXh0SGFzaCwgY29udGV4dEhhc2hdO1xuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb29rQWhlYWQgPiAyNSkge1xuICAgICAgICAgICAgbGV0IHBhaXIgPSBbTm9kZVByb3AubG9va0FoZWFkLCBsb29rQWhlYWRdO1xuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIHByb3BzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmluZEJ1ZmZlclNpemUobWF4U2l6ZSwgaW5SZXBlYXQpIHtcbiAgICAgICAgLy8gU2NhbiB0aHJvdWdoIHRoZSBidWZmZXIgdG8gZmluZCBwcmV2aW91cyBzaWJsaW5ncyB0aGF0IGZpdFxuICAgICAgICAvLyB0b2dldGhlciBpbiBhIFRyZWVCdWZmZXIsIGFuZCBkb24ndCBjb250YWluIGFueSByZXVzZWQgbm9kZXNcbiAgICAgICAgLy8gKHdoaWNoIGNhbid0IGJlIHN0b3JlZCBpbiBhIGJ1ZmZlcikuXG4gICAgICAgIC8vIElmIGBpblJlcGVhdGAgaXMgPiAtMSwgaWdub3JlIG5vZGUgYm91bmRhcmllcyBvZiB0aGF0IHR5cGUgZm9yXG4gICAgICAgIC8vIG5lc3RpbmcsIGJ1dCBtYWtlIHN1cmUgdGhlIGVuZCBmYWxscyBlaXRoZXIgYXQgdGhlIHN0YXJ0XG4gICAgICAgIC8vIChgbWF4U2l6ZWApIG9yIGJlZm9yZSBzdWNoIGEgbm9kZS5cbiAgICAgICAgbGV0IGZvcmsgPSBjdXJzb3IuZm9yaygpO1xuICAgICAgICBsZXQgc2l6ZSA9IDAsIHN0YXJ0ID0gMCwgc2tpcCA9IDAsIG1pblN0YXJ0ID0gZm9yay5lbmQgLSBtYXhCdWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCByZXN1bHQgPSB7IHNpemU6IDAsIHN0YXJ0OiAwLCBza2lwOiAwIH07XG4gICAgICAgIHNjYW46IGZvciAobGV0IG1pblBvcyA9IGZvcmsucG9zIC0gbWF4U2l6ZTsgZm9yay5wb3MgPiBtaW5Qb3M7KSB7XG4gICAgICAgICAgICBsZXQgbm9kZVNpemUgPSBmb3JrLnNpemU7XG4gICAgICAgICAgICAvLyBQcmV0ZW5kIG5lc3RlZCByZXBlYXQgbm9kZXMgb2YgdGhlIHNhbWUgdHlwZSBkb24ndCBleGlzdFxuICAgICAgICAgICAgaWYgKGZvcmsuaWQgPT0gaW5SZXBlYXQgJiYgbm9kZVNpemUgPj0gMCkge1xuICAgICAgICAgICAgICAgIC8vIEV4Y2VwdCB0aGF0IHdlIHN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIGFzIGEgdmFsaWQgcmV0dXJuXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUuXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNpemUgPSBzaXplO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHJlc3VsdC5za2lwID0gc2tpcDtcbiAgICAgICAgICAgICAgICBza2lwICs9IDQ7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSA0O1xuICAgICAgICAgICAgICAgIGZvcmsubmV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gZm9yay5wb3MgLSBub2RlU2l6ZTtcbiAgICAgICAgICAgIGlmIChub2RlU2l6ZSA8IDAgfHwgc3RhcnRQb3MgPCBtaW5Qb3MgfHwgZm9yay5zdGFydCA8IG1pblN0YXJ0KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IGxvY2FsU2tpcHBlZCA9IGZvcmsuaWQgPj0gbWluUmVwZWF0VHlwZSA/IDQgOiAwO1xuICAgICAgICAgICAgbGV0IG5vZGVTdGFydCA9IGZvcmsuc3RhcnQ7XG4gICAgICAgICAgICBmb3JrLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlIChmb3JrLnBvcyA+IHN0YXJ0UG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA9PSAtMyAvKiBTcGVjaWFsUmVjb3JkLkNvbnRleHRDaGFuZ2UgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFNraXBwZWQgKz0gNDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgc2NhbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZm9yay5pZCA+PSBtaW5SZXBlYXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2tpcHBlZCArPSA0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JrLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0ID0gbm9kZVN0YXJ0O1xuICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZTtcbiAgICAgICAgICAgIHNraXAgKz0gbG9jYWxTa2lwcGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpblJlcGVhdCA8IDAgfHwgc2l6ZSA9PSBtYXhTaXplKSB7XG4gICAgICAgICAgICByZXN1bHQuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgIHJlc3VsdC5za2lwID0gc2tpcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LnNpemUgPiA0ID8gcmVzdWx0IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb3B5VG9CdWZmZXIoYnVmZmVyU3RhcnQsIGJ1ZmZlciwgaW5kZXgpIHtcbiAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjtcbiAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgaWYgKHNpemUgPj0gMCAmJiBpZCA8IG1pblJlcGVhdFR5cGUpIHtcbiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IDQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIChzaXplIC0gNCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gY29weVRvQnVmZmVyKGJ1ZmZlclN0YXJ0LCBidWZmZXIsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBlbmQgLSBidWZmZXJTdGFydDtcbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0IC0gYnVmZmVyU3RhcnQ7XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplID09IC0zIC8qIFNwZWNpYWxSZWNvcmQuQ29udGV4dENoYW5nZSAqLykge1xuICAgICAgICAgICAgY29udGV4dEhhc2ggPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIFNwZWNpYWxSZWNvcmQuTG9va0FoZWFkICovKSB7XG4gICAgICAgICAgICBsb29rQWhlYWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTtcbiAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IDApXG4gICAgICAgIHRha2VOb2RlKGRhdGEuc3RhcnQgfHwgMCwgZGF0YS5idWZmZXJTdGFydCB8fCAwLCBjaGlsZHJlbiwgcG9zaXRpb25zLCAtMSwgMCk7XG4gICAgbGV0IGxlbmd0aCA9IChfYSA9IGRhdGEubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoY2hpbGRyZW4ubGVuZ3RoID8gcG9zaXRpb25zWzBdICsgY2hpbGRyZW5bMF0ubGVuZ3RoIDogMCk7XG4gICAgcmV0dXJuIG5ldyBUcmVlKHR5cGVzW2RhdGEudG9wSURdLCBjaGlsZHJlbi5yZXZlcnNlKCksIHBvc2l0aW9ucy5yZXZlcnNlKCksIGxlbmd0aCk7XG59XG5jb25zdCBub2RlU2l6ZUNhY2hlID0gbmV3IFdlYWtNYXA7XG5mdW5jdGlvbiBub2RlU2l6ZShiYWxhbmNlVHlwZSwgbm9kZSkge1xuICAgIGlmICghYmFsYW5jZVR5cGUuaXNBbm9ueW1vdXMgfHwgbm9kZSBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHwgbm9kZS50eXBlICE9IGJhbGFuY2VUeXBlKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBsZXQgc2l6ZSA9IG5vZGVTaXplQ2FjaGUuZ2V0KG5vZGUpO1xuICAgIGlmIChzaXplID09IG51bGwpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9IGJhbGFuY2VUeXBlIHx8ICEoY2hpbGQgaW5zdGFuY2VvZiBUcmVlKSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVTaXplQ2FjaGUuc2V0KG5vZGUsIHNpemUpO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbn1cbmZ1bmN0aW9uIGJhbGFuY2VSYW5nZShcbi8vIFRoZSB0eXBlIHRoZSBiYWxhbmNlZCB0cmVlJ3MgaW5uZXIgbm9kZXMuXG5iYWxhbmNlVHlwZSwgXG4vLyBUaGUgZGlyZWN0IGNoaWxkcmVuIGFuZCB0aGVpciBwb3NpdGlvbnNcbmNoaWxkcmVuLCBwb3NpdGlvbnMsIFxuLy8gVGhlIGluZGV4IHJhbmdlIGluIGNoaWxkcmVuL3Bvc2l0aW9ucyB0byB1c2VcbmZyb20sIHRvLCBcbi8vIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgbm9kZXMsIHJlbGF0aXZlIHRvIHRoZWlyIHBhcmVudC5cbnN0YXJ0LCBcbi8vIExlbmd0aCBvZiB0aGUgb3V0ZXIgbm9kZVxubGVuZ3RoLCBcbi8vIEZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSB0b3Agbm9kZSBvZiB0aGUgYmFsYW5jZWQgdHJlZVxubWtUb3AsIFxuLy8gRnVuY3Rpb24gdG8gYnVpbGQgaW50ZXJuYWwgbm9kZXMgZm9yIHRoZSBiYWxhbmNlZCB0cmVlXG5ta1RyZWUpIHtcbiAgICBsZXQgdG90YWwgPSAwO1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKylcbiAgICAgICAgdG90YWwgKz0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICBsZXQgbWF4Q2hpbGQgPSBNYXRoLmNlaWwoKHRvdGFsICogMS41KSAvIDggLyogQmFsYW5jZS5CcmFuY2hGYWN0b3IgKi8pO1xuICAgIGxldCBsb2NhbENoaWxkcmVuID0gW10sIGxvY2FsUG9zaXRpb25zID0gW107XG4gICAgZnVuY3Rpb24gZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzspIHtcbiAgICAgICAgICAgIGxldCBncm91cEZyb20gPSBpLCBncm91cFN0YXJ0ID0gcG9zaXRpb25zW2ldLCBncm91cFNpemUgPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgZm9yICg7IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRTaXplID0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplICsgbmV4dFNpemUgPj0gbWF4Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGdyb3VwU2l6ZSArPSBuZXh0U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID09IGdyb3VwRnJvbSArIDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplID4gbWF4Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9ubHkgPSBjaGlsZHJlbltncm91cEZyb21dOyAvLyBPbmx5IHRyZWVzIGNhbiBoYXZlIGEgc2l6ZSA+IDFcbiAgICAgICAgICAgICAgICAgICAgZGl2aWRlKG9ubHkuY2hpbGRyZW4sIG9ubHkucG9zaXRpb25zLCAwLCBvbmx5LmNoaWxkcmVuLmxlbmd0aCwgcG9zaXRpb25zW2dyb3VwRnJvbV0gKyBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5wdXNoKGNoaWxkcmVuW2dyb3VwRnJvbV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHBvc2l0aW9uc1tpIC0gMV0gKyBjaGlsZHJlbltpIC0gMV0ubGVuZ3RoIC0gZ3JvdXBTdGFydDtcbiAgICAgICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goYmFsYW5jZVJhbmdlKGJhbGFuY2VUeXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBncm91cEZyb20sIGksIGdyb3VwU3RhcnQsIGxlbmd0aCwgbnVsbCwgbWtUcmVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFBvc2l0aW9ucy5wdXNoKGdyb3VwU3RhcnQgKyBvZmZzZXQgLSBzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCAwKTtcbiAgICByZXR1cm4gKG1rVG9wIHx8IG1rVHJlZSkobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIGxlbmd0aCk7XG59XG4vKipcblByb3ZpZGVzIGEgd2F5IHRvIGFzc29jaWF0ZSB2YWx1ZXMgd2l0aCBwaWVjZXMgb2YgdHJlZXMuIEFzIGxvbmdcbmFzIHRoYXQgcGFydCBvZiB0aGUgdHJlZSBpcyByZXVzZWQsIHRoZSBhc3NvY2lhdGVkIHZhbHVlcyBjYW4gYmVcbnJldHJpZXZlZCBmcm9tIGFuIHVwZGF0ZWQgdHJlZS5cbiovXG5jbGFzcyBOb2RlV2Vha01hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgc2V0QnVmZmVyKGJ1ZmZlciwgaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMubWFwLmdldChidWZmZXIpO1xuICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KGJ1ZmZlciwgaW5uZXIgPSBuZXcgTWFwKTtcbiAgICAgICAgaW5uZXIuc2V0KGluZGV4LCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldEJ1ZmZlcihidWZmZXIsIGluZGV4KSB7XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMubWFwLmdldChidWZmZXIpO1xuICAgICAgICByZXR1cm4gaW5uZXIgJiYgaW5uZXIuZ2V0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2V0IHRoZSB2YWx1ZSBmb3IgdGhpcyBzeW50YXggbm9kZS5cbiAgICAqL1xuICAgIHNldChub2RlLCB2YWx1ZSkge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEJ1ZmZlck5vZGUpXG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihub2RlLmNvbnRleHQuYnVmZmVyLCBub2RlLmluZGV4LCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSlcbiAgICAgICAgICAgIHRoaXMubWFwLnNldChub2RlLnRyZWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdmFsdWUgZm9yIHRoaXMgc3ludGF4IG5vZGUsIGlmIGl0IGV4aXN0cyBpbiB0aGUgbWFwLlxuICAgICovXG4gICAgZ2V0KG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBCdWZmZXJOb2RlID8gdGhpcy5nZXRCdWZmZXIobm9kZS5jb250ZXh0LmJ1ZmZlciwgbm9kZS5pbmRleClcbiAgICAgICAgICAgIDogbm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlID8gdGhpcy5tYXAuZ2V0KG5vZGUudHJlZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFNldCB0aGUgdmFsdWUgZm9yIHRoZSBub2RlIHRoYXQgYSBjdXJzb3IgY3VycmVudGx5IHBvaW50cyB0by5cbiAgICAqL1xuICAgIGN1cnNvclNldChjdXJzb3IsIHZhbHVlKSB7XG4gICAgICAgIGlmIChjdXJzb3IuYnVmZmVyKVxuICAgICAgICAgICAgdGhpcy5zZXRCdWZmZXIoY3Vyc29yLmJ1ZmZlci5idWZmZXIsIGN1cnNvci5pbmRleCwgdmFsdWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoY3Vyc29yLnRyZWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdGhlIHZhbHVlIGZvciB0aGUgbm9kZSB0aGF0IGEgY3Vyc29yIGN1cnJlbnRseSBwb2ludHNcbiAgICB0by5cbiAgICAqL1xuICAgIGN1cnNvckdldChjdXJzb3IpIHtcbiAgICAgICAgcmV0dXJuIGN1cnNvci5idWZmZXIgPyB0aGlzLmdldEJ1ZmZlcihjdXJzb3IuYnVmZmVyLmJ1ZmZlciwgY3Vyc29yLmluZGV4KSA6IHRoaXMubWFwLmdldChjdXJzb3IudHJlZSk7XG4gICAgfVxufVxuXG4vKipcblRyZWUgZnJhZ21lbnRzIGFyZSB1c2VkIGR1cmluZyBbaW5jcmVtZW50YWxcbnBhcnNpbmddKCNjb21tb24uUGFyc2VyLnN0YXJ0UGFyc2UpIHRvIHRyYWNrIHBhcnRzIG9mIG9sZCB0cmVlc1xudGhhdCBjYW4gYmUgcmV1c2VkIGluIGEgbmV3IHBhcnNlLiBBbiBhcnJheSBvZiBmcmFnbWVudHMgaXMgdXNlZFxudG8gdHJhY2sgcmVnaW9ucyBvZiBhbiBvbGQgdHJlZSB3aG9zZSBub2RlcyBtaWdodCBiZSByZXVzZWQgaW4gbmV3XG5wYXJzZXMuIFVzZSB0aGUgc3RhdGljXG5bYGFwcGx5Q2hhbmdlc2BdKCNjb21tb24uVHJlZUZyYWdtZW50XmFwcGx5Q2hhbmdlcykgbWV0aG9kIHRvXG51cGRhdGUgZnJhZ21lbnRzIGZvciBkb2N1bWVudCBjaGFuZ2VzLlxuKi9cbmNsYXNzIFRyZWVGcmFnbWVudCB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgdHJlZSBmcmFnbWVudC4gWW91J2xsIHVzdWFsbHkgd2FudCB0byB1c2VcbiAgICBbYGFkZFRyZWVgXSgjY29tbW9uLlRyZWVGcmFnbWVudF5hZGRUcmVlKSBhbmRcbiAgICBbYGFwcGx5Q2hhbmdlc2BdKCNjb21tb24uVHJlZUZyYWdtZW50XmFwcGx5Q2hhbmdlcykgaW5zdGVhZCBvZlxuICAgIGNhbGxpbmcgdGhpcyBkaXJlY3RseS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBvZiB0aGUgdW5jaGFuZ2VkIHJhbmdlIHBvaW50ZWQgdG8gYnkgdGhpcyBmcmFnbWVudC5cbiAgICBUaGlzIHJlZmVycyB0byBhbiBvZmZzZXQgaW4gdGhlIF91cGRhdGVkXyBkb2N1bWVudCAoYXMgb3Bwb3NlZFxuICAgIHRvIHRoZSBvcmlnaW5hbCB0cmVlKS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIHVuY2hhbmdlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgdHJlZSB0aGF0IHRoaXMgZnJhZ21lbnQgaXMgYmFzZWQgb24uXG4gICAgKi9cbiAgICB0cmVlLCBcbiAgICAvKipcbiAgICBUaGUgb2Zmc2V0IGJldHdlZW4gdGhlIGZyYWdtZW50J3MgdHJlZSBhbmQgdGhlIGRvY3VtZW50IHRoYXRcbiAgICB0aGlzIGZyYWdtZW50IGNhbiBiZSB1c2VkIGFnYWluc3QuIEFkZCB0aGlzIHdoZW4gZ29pbmcgZnJvbVxuICAgIGRvY3VtZW50IHRvIHRyZWUgcG9zaXRpb25zLCBzdWJ0cmFjdCBpdCB0byBnbyBmcm9tIHRyZWUgdG9cbiAgICBkb2N1bWVudCBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBvZmZzZXQsIG9wZW5TdGFydCA9IGZhbHNlLCBvcGVuRW5kID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5vcGVuID0gKG9wZW5TdGFydCA/IDEgLyogT3Blbi5TdGFydCAqLyA6IDApIHwgKG9wZW5FbmQgPyAyIC8qIE9wZW4uRW5kICovIDogMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHN0YXJ0IG9mIHRoZSBmcmFnbWVudCByZXByZXNlbnRzIHRoZSBzdGFydCBvZiBhXG4gICAgcGFyc2UsIG9yIHRoZSBlbmQgb2YgYSBjaGFuZ2UuIChJbiB0aGUgc2Vjb25kIGNhc2UsIGl0IG1heSBub3RcbiAgICBiZSBzYWZlIHRvIHJldXNlIHNvbWUgbm9kZXMgYXQgdGhlIHN0YXJ0LCBkZXBlbmRpbmcgb24gdGhlXG4gICAgcGFyc2luZyBhbGdvcml0aG0uKVxuICAgICovXG4gICAgZ2V0IG9wZW5TdGFydCgpIHsgcmV0dXJuICh0aGlzLm9wZW4gJiAxIC8qIE9wZW4uU3RhcnQgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIGVuZCBvZiB0aGUgZnJhZ21lbnQgcmVwcmVzZW50cyB0aGUgZW5kIG9mIGFcbiAgICBmdWxsLWRvY3VtZW50IHBhcnNlLCBvciB0aGUgc3RhcnQgb2YgYSBjaGFuZ2UuXG4gICAgKi9cbiAgICBnZXQgb3BlbkVuZCgpIHsgcmV0dXJuICh0aGlzLm9wZW4gJiAyIC8qIE9wZW4uRW5kICovKSA+IDA7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZXQgb2YgZnJhZ21lbnRzIGZyb20gYSBmcmVzaGx5IHBhcnNlZCB0cmVlLCBvciB1cGRhdGVcbiAgICBhbiBleGlzdGluZyBzZXQgb2YgZnJhZ21lbnRzIGJ5IHJlcGxhY2luZyB0aGUgb25lcyB0aGF0IG92ZXJsYXBcbiAgICB3aXRoIGEgdHJlZSB3aXRoIGNvbnRlbnQgZnJvbSB0aGUgbmV3IHRyZWUuIFdoZW4gYHBhcnRpYWxgIGlzXG4gICAgdHJ1ZSwgdGhlIHBhcnNlIGlzIHRyZWF0ZWQgYXMgaW5jb21wbGV0ZSwgYW5kIHRoZSByZXN1bHRpbmdcbiAgICBmcmFnbWVudCBoYXMgW2BvcGVuRW5kYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnQub3BlbkVuZCkgc2V0IHRvXG4gICAgdHJ1ZS5cbiAgICAqL1xuICAgIHN0YXRpYyBhZGRUcmVlKHRyZWUsIGZyYWdtZW50cyA9IFtdLCBwYXJ0aWFsID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtuZXcgVHJlZUZyYWdtZW50KDAsIHRyZWUubGVuZ3RoLCB0cmVlLCAwLCBmYWxzZSwgcGFydGlhbCldO1xuICAgICAgICBmb3IgKGxldCBmIG9mIGZyYWdtZW50cylcbiAgICAgICAgICAgIGlmIChmLnRvID4gdHJlZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IGEgc2V0IG9mIGVkaXRzIHRvIGFuIGFycmF5IG9mIGZyYWdtZW50cywgcmVtb3Zpbmcgb3JcbiAgICBzcGxpdHRpbmcgZnJhZ21lbnRzIGFzIG5lY2Vzc2FyeSB0byByZW1vdmUgZWRpdGVkIHJhbmdlcywgYW5kXG4gICAgYWRqdXN0aW5nIG9mZnNldHMgZm9yIGZyYWdtZW50cyB0aGF0IG1vdmVkLlxuICAgICovXG4gICAgc3RhdGljIGFwcGx5Q2hhbmdlcyhmcmFnbWVudHMsIGNoYW5nZXMsIG1pbkdhcCA9IDEyOCkge1xuICAgICAgICBpZiAoIWNoYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgZkkgPSAxLCBuZXh0RiA9IGZyYWdtZW50cy5sZW5ndGggPyBmcmFnbWVudHNbMF0gOiBudWxsO1xuICAgICAgICBmb3IgKGxldCBjSSA9IDAsIHBvcyA9IDAsIG9mZiA9IDA7OyBjSSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dEMgPSBjSSA8IGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlc1tjSV0gOiBudWxsO1xuICAgICAgICAgICAgbGV0IG5leHRQb3MgPSBuZXh0QyA/IG5leHRDLmZyb21BIDogMWU5O1xuICAgICAgICAgICAgaWYgKG5leHRQb3MgLSBwb3MgPj0gbWluR2FwKVxuICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0RiAmJiBuZXh0Ri5mcm9tIDwgbmV4dFBvcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3V0ID0gbmV4dEY7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gY3V0LmZyb20gfHwgbmV4dFBvcyA8PSBjdXQudG8gfHwgb2ZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZkZyb20gPSBNYXRoLm1heChjdXQuZnJvbSwgcG9zKSAtIG9mZiwgZlRvID0gTWF0aC5taW4oY3V0LnRvLCBuZXh0UG9zKSAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1dCA9IGZGcm9tID49IGZUbyA/IG51bGwgOiBuZXcgVHJlZUZyYWdtZW50KGZGcm9tLCBmVG8sIGN1dC50cmVlLCBjdXQub2Zmc2V0ICsgb2ZmLCBjSSA+IDAsICEhbmV4dEMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjdXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEYudG8gPiBuZXh0UG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIG5leHRGID0gZkkgPCBmcmFnbWVudHMubGVuZ3RoID8gZnJhZ21lbnRzW2ZJKytdIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHRDKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcG9zID0gbmV4dEMudG9BO1xuICAgICAgICAgICAgb2ZmID0gbmV4dEMudG9BIC0gbmV4dEMudG9CO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5BIHN1cGVyY2xhc3MgdGhhdCBwYXJzZXJzIHNob3VsZCBleHRlbmQuXG4qL1xuY2xhc3MgUGFyc2VyIHtcbiAgICAvKipcbiAgICBTdGFydCBhIHBhcnNlLCByZXR1cm5pbmcgYSBbcGFydGlhbCBwYXJzZV0oI2NvbW1vbi5QYXJ0aWFsUGFyc2UpXG4gICAgb2JqZWN0LiBbYGZyYWdtZW50c2BdKCNjb21tb24uVHJlZUZyYWdtZW50KSBjYW4gYmUgcGFzc2VkIGluIHRvXG4gICAgbWFrZSB0aGUgcGFyc2UgaW5jcmVtZW50YWwuXG4gICAgXG4gICAgQnkgZGVmYXVsdCwgdGhlIGVudGlyZSBpbnB1dCBpcyBwYXJzZWQuIFlvdSBjYW4gcGFzcyBgcmFuZ2VzYCxcbiAgICB3aGljaCBzaG91bGQgYmUgYSBzb3J0ZWQgYXJyYXkgb2Ygbm9uLWVtcHR5LCBub24tb3ZlcmxhcHBpbmdcbiAgICByYW5nZXMsIHRvIHBhcnNlIG9ubHkgdGhvc2UgcmFuZ2VzLiBUaGUgdHJlZSByZXR1cm5lZCBpbiB0aGF0XG4gICAgY2FzZSB3aWxsIHN0YXJ0IGF0IGByYW5nZXNbMF0uZnJvbWAuXG4gICAgKi9cbiAgICBzdGFydFBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICBpbnB1dCA9IG5ldyBTdHJpbmdJbnB1dChpbnB1dCk7XG4gICAgICAgIHJhbmdlcyA9ICFyYW5nZXMgPyBbbmV3IFJhbmdlKDAsIGlucHV0Lmxlbmd0aCldIDogcmFuZ2VzLmxlbmd0aCA/IHJhbmdlcy5tYXAociA9PiBuZXcgUmFuZ2Uoci5mcm9tLCByLnRvKSkgOiBbbmV3IFJhbmdlKDAsIDApXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cyB8fCBbXSwgcmFuZ2VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUnVuIGEgZnVsbCBwYXJzZSwgcmV0dXJuaW5nIHRoZSByZXN1bHRpbmcgdHJlZS5cbiAgICAqL1xuICAgIHBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBsZXQgcGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGRvbmUgPSBwYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFN0cmluZ0lucHV0IHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnN0cmluZy5sZW5ndGg7IH1cbiAgICBjaHVuayhmcm9tKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tKTsgfVxuICAgIGdldCBsaW5lQ2h1bmtzKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZWFkKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tLCB0byk7IH1cbn1cblxuLyoqXG5DcmVhdGUgYSBwYXJzZSB3cmFwcGVyIHRoYXQsIGFmdGVyIHRoZSBpbm5lciBwYXJzZSBjb21wbGV0ZXMsXG5zY2FucyBpdHMgdHJlZSBmb3IgbWl4ZWQgbGFuZ3VhZ2UgcmVnaW9ucyB3aXRoIHRoZSBgbmVzdGBcbmZ1bmN0aW9uLCBydW5zIHRoZSByZXN1bHRpbmcgW2lubmVyIHBhcnNlc10oI2NvbW1vbi5OZXN0ZWRQYXJzZSksXG5hbmQgdGhlbiBbbW91bnRzXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIHRoZWlyIHJlc3VsdHMgb250byB0aGVcbnRyZWUuXG4qL1xuZnVuY3Rpb24gcGFyc2VNaXhlZChuZXN0KSB7XG4gICAgcmV0dXJuIChwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSA9PiBuZXcgTWl4ZWRQYXJzZShwYXJzZSwgbmVzdCwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbn1cbmNsYXNzIElubmVyUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgcGFyc2UsIG92ZXJsYXksIHRhcmdldCwgZnJvbSkge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHBhcnNlO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1JhbmdlcyhyYW5nZXMpIHtcbiAgICBpZiAoIXJhbmdlcy5sZW5ndGggfHwgcmFuZ2VzLnNvbWUociA9PiByLmZyb20gPj0gci50bykpXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbm5lciBwYXJzZSByYW5nZXMgZ2l2ZW46IFwiICsgSlNPTi5zdHJpbmdpZnkocmFuZ2VzKSk7XG59XG5jbGFzcyBBY3RpdmVPdmVybGF5IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIHByZWRpY2F0ZSwgbW91bnRzLCBpbmRleCwgc3RhcnQsIHRhcmdldCwgcHJldikge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMubW91bnRzID0gbW91bnRzO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgIH1cbn1cbmNvbnN0IHN0b3BwZWRJbm5lciA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG5jbGFzcyBNaXhlZFBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlLCBuZXN0LCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5uZXN0ID0gbmVzdDtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBbXTtcbiAgICAgICAgdGhpcy5pbm5lckRvbmUgPSAwO1xuICAgICAgICB0aGlzLmJhc2VUcmVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLmJhc2VQYXJzZSA9IGJhc2U7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VQYXJzZSkge1xuICAgICAgICAgICAgbGV0IGRvbmUgPSB0aGlzLmJhc2VQYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICBpZiAoIWRvbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhc2VQYXJzZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhc2VUcmVlID0gZG9uZTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRJbm5lcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5uZXIgb2YgdGhpcy5pbm5lcilcbiAgICAgICAgICAgICAgICAgICAgaW5uZXIucGFyc2Uuc3RvcEF0KHRoaXMuc3RvcHBlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbm5lckRvbmUgPT0gdGhpcy5pbm5lci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmJhc2VUcmVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFRyZWUocmVzdWx0LnR5cGUsIHJlc3VsdC5jaGlsZHJlbiwgcmVzdWx0LnBvc2l0aW9ucywgcmVzdWx0Lmxlbmd0aCwgcmVzdWx0LnByb3BWYWx1ZXMuY29uY2F0KFtbc3RvcHBlZElubmVyLCB0aGlzLnN0b3BwZWRBdF1dKSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMuaW5uZXJbdGhpcy5pbm5lckRvbmVdLCBkb25lID0gaW5uZXIucGFyc2UuYWR2YW5jZSgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5pbm5lckRvbmUrKztcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzb21ld2hhdCBkb2RneSBidXQgc3VwZXIgaGVscGZ1bCBoYWNrIHdoZXJlIHdlXG4gICAgICAgICAgICAvLyBwYXRjaCB1cCBub2RlcyBjcmVhdGVkIGJ5IHRoZSBpbm5lciBwYXJzZSAoYW5kIHRodXNcbiAgICAgICAgICAgIC8vIHByZXN1bWFibHkgbm90IGFsaWFzZWQgYW55d2hlcmUgZWxzZSkgdG8gaG9sZCB0aGUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIC8vIGFib3V0IHRoZSBpbm5lciBwYXJzZS5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgaW5uZXIudGFyZ2V0LnByb3BzKTtcbiAgICAgICAgICAgIHByb3BzW05vZGVQcm9wLm1vdW50ZWQuaWRdID0gbmV3IE1vdW50ZWRUcmVlKGRvbmUsIGlubmVyLm92ZXJsYXksIGlubmVyLnBhcnNlcik7XG4gICAgICAgICAgICBpbm5lci50YXJnZXQucHJvcHMgPSBwcm9wcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBhcnNlKVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmlucHV0Lmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaW5uZXJEb25lOyBpIDwgdGhpcy5pbm5lci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5uZXJbaV0uZnJvbSA8IHBvcylcbiAgICAgICAgICAgICAgICBwb3MgPSBNYXRoLm1pbihwb3MsIHRoaXMuaW5uZXJbaV0ucGFyc2UucGFyc2VkUG9zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBzdG9wQXQocG9zKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgICAgICBpZiAodGhpcy5iYXNlUGFyc2UpXG4gICAgICAgICAgICB0aGlzLmJhc2VQYXJzZS5zdG9wQXQocG9zKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaW5uZXJEb25lOyBpIDwgdGhpcy5pbm5lci5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyW2ldLnBhcnNlLnN0b3BBdChwb3MpO1xuICAgIH1cbiAgICBzdGFydElubmVyKCkge1xuICAgICAgICBsZXQgZnJhZ21lbnRDdXJzb3IgPSBuZXcgRnJhZ21lbnRDdXJzb3IodGhpcy5mcmFnbWVudHMpO1xuICAgICAgICBsZXQgb3ZlcmxheSA9IG51bGw7XG4gICAgICAgIGxldCBjb3ZlcmVkID0gbnVsbDtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKG5ldyBUcmVlTm9kZSh0aGlzLmJhc2VUcmVlLCB0aGlzLnJhbmdlc1swXS5mcm9tLCAwLCBudWxsKSwgSXRlck1vZGUuSW5jbHVkZUFub255bW91cyB8IEl0ZXJNb2RlLklnbm9yZU1vdW50cyk7XG4gICAgICAgIHNjYW46IGZvciAobGV0IG5lc3QsIGlzQ292ZXJlZDs7KSB7XG4gICAgICAgICAgICBsZXQgZW50ZXIgPSB0cnVlLCByYW5nZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIGN1cnNvci5mcm9tID49IHRoaXMuc3RvcHBlZEF0KSB7XG4gICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZyYWdtZW50Q3Vyc29yLmhhc05vZGUoY3Vyc29yKSkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IG92ZXJsYXkubW91bnRzLmZpbmQobSA9PiBtLmZyYWcuZnJvbSA8PSBjdXJzb3IuZnJvbSAmJiBtLmZyYWcudG8gPj0gY3Vyc29yLnRvICYmIG0ubW91bnQub3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgbWF0Y2gubW91bnQub3ZlcmxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gci5mcm9tICsgbWF0Y2gucG9zLCB0byA9IHIudG8gKyBtYXRjaC5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyb20gPj0gY3Vyc29yLmZyb20gJiYgdG8gPD0gY3Vyc29yLnRvICYmICFvdmVybGF5LnJhbmdlcy5zb21lKHIgPT4gci5mcm9tIDwgdG8gJiYgci50byA+IGZyb20pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJhbmdlcy5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVudGVyID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb3ZlcmVkICYmIChpc0NvdmVyZWQgPSBjaGVja0NvdmVyKGNvdmVyZWQucmFuZ2VzLCBjdXJzb3IuZnJvbSwgY3Vyc29yLnRvKSkpIHtcbiAgICAgICAgICAgICAgICBlbnRlciA9IGlzQ292ZXJlZCAhPSAyIC8qIENvdmVyLkZ1bGwgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghY3Vyc29yLnR5cGUuaXNBbm9ueW1vdXMgJiYgKG5lc3QgPSB0aGlzLm5lc3QoY3Vyc29yLCB0aGlzLmlucHV0KSkgJiZcbiAgICAgICAgICAgICAgICAoY3Vyc29yLmZyb20gPCBjdXJzb3IudG8gfHwgIW5lc3Qub3ZlcmxheSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvci50cmVlKVxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbGl6ZShjdXJzb3IpO1xuICAgICAgICAgICAgICAgIGxldCBvbGRNb3VudHMgPSBmcmFnbWVudEN1cnNvci5maW5kTW91bnRzKGN1cnNvci5mcm9tLCBuZXN0LnBhcnNlcik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXN0Lm92ZXJsYXkgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkgPSBuZXcgQWN0aXZlT3ZlcmxheShuZXN0LnBhcnNlciwgbmVzdC5vdmVybGF5LCBvbGRNb3VudHMsIHRoaXMuaW5uZXIubGVuZ3RoLCBjdXJzb3IuZnJvbSwgY3Vyc29yLnRyZWUsIG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHB1bmNoUmFuZ2VzKHRoaXMucmFuZ2VzLCBuZXN0Lm92ZXJsYXkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChjdXJzb3IuZnJvbSA8IGN1cnNvci50byA/IFtuZXcgUmFuZ2UoY3Vyc29yLmZyb20sIGN1cnNvci50byldIDogW10pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1JhbmdlcyhyYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCB8fCAhbmVzdC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lci5wdXNoKG5ldyBJbm5lclBhcnNlKG5lc3QucGFyc2VyLCByYW5nZXMubGVuZ3RoID8gbmVzdC5wYXJzZXIuc3RhcnRQYXJzZSh0aGlzLmlucHV0LCBlbnRlckZyYWdtZW50cyhvbGRNb3VudHMsIHJhbmdlcyksIHJhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5lc3QucGFyc2VyLnN0YXJ0UGFyc2UoXCJcIiksIG5lc3Qub3ZlcmxheSA/IG5lc3Qub3ZlcmxheS5tYXAociA9PiBuZXcgUmFuZ2Uoci5mcm9tIC0gY3Vyc29yLmZyb20sIHIudG8gLSBjdXJzb3IuZnJvbSkpIDogbnVsbCwgY3Vyc29yLnRyZWUsIHJhbmdlcy5sZW5ndGggPyByYW5nZXNbMF0uZnJvbSA6IGN1cnNvci5mcm9tKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmVzdC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSB7IHJhbmdlcywgZGVwdGg6IDAsIHByZXY6IGNvdmVyZWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVybGF5ICYmIChyYW5nZSA9IG92ZXJsYXkucHJlZGljYXRlKGN1cnNvcikpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShjdXJzb3IuZnJvbSwgY3Vyc29yLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZnJvbSA8IHJhbmdlLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXN0ID0gb3ZlcmxheS5yYW5nZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3QgPj0gMCAmJiBvdmVybGF5LnJhbmdlc1tsYXN0XS50byA9PSByYW5nZS5mcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5yYW5nZXNbbGFzdF0gPSB7IGZyb206IG92ZXJsYXkucmFuZ2VzW2xhc3RdLmZyb20sIHRvOiByYW5nZS50byB9O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50ZXIgJiYgY3Vyc29yLmZpcnN0Q2hpbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmRlcHRoKys7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWQuZGVwdGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgc2NhbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkgJiYgIS0tb3ZlcmxheS5kZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHB1bmNoUmFuZ2VzKHRoaXMucmFuZ2VzLCBvdmVybGF5LnJhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrUmFuZ2VzKHJhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lci5zcGxpY2Uob3ZlcmxheS5pbmRleCwgMCwgbmV3IElubmVyUGFyc2Uob3ZlcmxheS5wYXJzZXIsIG92ZXJsYXkucGFyc2VyLnN0YXJ0UGFyc2UodGhpcy5pbnB1dCwgZW50ZXJGcmFnbWVudHMob3ZlcmxheS5tb3VudHMsIHJhbmdlcyksIHJhbmdlcyksIG92ZXJsYXkucmFuZ2VzLm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20gLSBvdmVybGF5LnN0YXJ0LCByLnRvIC0gb3ZlcmxheS5zdGFydCkpLCBvdmVybGF5LnRhcmdldCwgcmFuZ2VzWzBdLmZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkgPSBvdmVybGF5LnByZXY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyZWQgJiYgIS0tY292ZXJlZC5kZXB0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSBjb3ZlcmVkLnByZXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tDb3Zlcihjb3ZlcmVkLCBmcm9tLCB0bykge1xuICAgIGZvciAobGV0IHJhbmdlIG9mIGNvdmVyZWQpIHtcbiAgICAgICAgaWYgKHJhbmdlLmZyb20gPj0gdG8pXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKHJhbmdlLnRvID4gZnJvbSlcbiAgICAgICAgICAgIHJldHVybiByYW5nZS5mcm9tIDw9IGZyb20gJiYgcmFuZ2UudG8gPj0gdG8gPyAyIC8qIENvdmVyLkZ1bGwgKi8gOiAxIC8qIENvdmVyLlBhcnRpYWwgKi87XG4gICAgfVxuICAgIHJldHVybiAwIC8qIENvdmVyLk5vbmUgKi87XG59XG4vLyBUYWtlIGEgcGllY2Ugb2YgYnVmZmVyIGFuZCBjb252ZXJ0IGl0IGludG8gYSBzdGFuZC1hbG9uZVxuLy8gVHJlZUJ1ZmZlci5cbmZ1bmN0aW9uIHNsaWNlQnVmKGJ1Ziwgc3RhcnRJLCBlbmRJLCBub2RlcywgcG9zaXRpb25zLCBvZmYpIHtcbiAgICBpZiAoc3RhcnRJIDwgZW5kSSkge1xuICAgICAgICBsZXQgZnJvbSA9IGJ1Zi5idWZmZXJbc3RhcnRJICsgMV07XG4gICAgICAgIG5vZGVzLnB1c2goYnVmLnNsaWNlKHN0YXJ0SSwgZW5kSSwgZnJvbSkpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gb2ZmKTtcbiAgICB9XG59XG4vLyBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgbm9kZSB0aGF0J3MgaW4gYSBidWZmZXIsIGFuZCBjb252ZXJ0cyBpdCwgYW5kXG4vLyBpdHMgcGFyZW50IGJ1ZmZlciBub2RlcywgaW50byBhIFRyZWUuIFRoaXMgaXMgYWdhaW4gYWN0aW5nIG9uIHRoZVxuLy8gYXNzdW1wdGlvbiB0aGF0IHRoZSB0cmVlcyBhbmQgYnVmZmVycyBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYnkgdGhlXG4vLyBwYXJzZSB0aGF0IHdhcyByYW4gdmlhIHRoZSBtaXggcGFyc2VyLCBhbmQgdGh1cyBhcmVuJ3Qgc2hhcmVkIHdpdGhcbi8vIGFueSBvdGhlciBjb2RlLCBtYWtpbmcgdmlvbGF0aW9ucyBvZiB0aGUgaW1tdXRhYmlsaXR5IHNhZmUuXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZShjdXJzb3IpIHtcbiAgICBsZXQgeyBub2RlIH0gPSBjdXJzb3IsIHN0YWNrID0gW107XG4gICAgbGV0IGJ1ZmZlciA9IG5vZGUuY29udGV4dC5idWZmZXI7XG4gICAgLy8gU2NhbiB1cCB0byB0aGUgbmVhcmVzdCB0cmVlXG4gICAgZG8ge1xuICAgICAgICBzdGFjay5wdXNoKGN1cnNvci5pbmRleCk7XG4gICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICB9IHdoaWxlICghY3Vyc29yLnRyZWUpO1xuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBidWZmZXIgaW4gdGhhdCB0cmVlXG4gICAgbGV0IGJhc2UgPSBjdXJzb3IudHJlZSwgaSA9IGJhc2UuY2hpbGRyZW4uaW5kZXhPZihidWZmZXIpO1xuICAgIGxldCBidWYgPSBiYXNlLmNoaWxkcmVuW2ldLCBiID0gYnVmLmJ1ZmZlciwgbmV3U3RhY2sgPSBbaV07XG4gICAgLy8gU3BsaXQgYSBsZXZlbCBpbiB0aGUgYnVmZmVyLCBwdXR0aW5nIHRoZSBub2RlcyBiZWZvcmUgYW5kIGFmdGVyXG4gICAgLy8gdGhlIGNoaWxkIHRoYXQgY29udGFpbnMgYG5vZGVgIGludG8gbmV3IGJ1ZmZlcnMuXG4gICAgZnVuY3Rpb24gc3BsaXQoc3RhcnRJLCBlbmRJLCB0eXBlLCBpbm5lck9mZnNldCwgbGVuZ3RoLCBzdGFja1Bvcykge1xuICAgICAgICBsZXQgdGFyZ2V0SSA9IHN0YWNrW3N0YWNrUG9zXTtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICBzbGljZUJ1ZihidWYsIHN0YXJ0SSwgdGFyZ2V0SSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5uZXJPZmZzZXQpO1xuICAgICAgICBsZXQgZnJvbSA9IGJbdGFyZ2V0SSArIDFdLCB0byA9IGJbdGFyZ2V0SSArIDJdO1xuICAgICAgICBuZXdTdGFjay5wdXNoKGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgIGxldCBjaGlsZCA9IHN0YWNrUG9zXG4gICAgICAgICAgICA/IHNwbGl0KHRhcmdldEkgKyA0LCBiW3RhcmdldEkgKyAzXSwgYnVmLnNldC50eXBlc1tiW3RhcmdldEldXSwgZnJvbSwgdG8gLSBmcm9tLCBzdGFja1BvcyAtIDEpXG4gICAgICAgICAgICA6IG5vZGUudG9UcmVlKCk7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChmcm9tIC0gaW5uZXJPZmZzZXQpO1xuICAgICAgICBzbGljZUJ1ZihidWYsIGJbdGFyZ2V0SSArIDNdLCBlbmRJLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBpbm5lck9mZnNldCk7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpO1xuICAgIH1cbiAgICBiYXNlLmNoaWxkcmVuW2ldID0gc3BsaXQoMCwgYi5sZW5ndGgsIE5vZGVUeXBlLm5vbmUsIDAsIGJ1Zi5sZW5ndGgsIHN0YWNrLmxlbmd0aCAtIDEpO1xuICAgIC8vIE1vdmUgdGhlIGN1cnNvciBiYWNrIHRvIHRoZSB0YXJnZXQgbm9kZVxuICAgIGZvciAobGV0IGluZGV4IG9mIG5ld1N0YWNrKSB7XG4gICAgICAgIGxldCB0cmVlID0gY3Vyc29yLnRyZWUuY2hpbGRyZW5baW5kZXhdLCBwb3MgPSBjdXJzb3IudHJlZS5wb3NpdGlvbnNbaW5kZXhdO1xuICAgICAgICBjdXJzb3IueWllbGQobmV3IFRyZWVOb2RlKHRyZWUsIHBvcyArIGN1cnNvci5mcm9tLCBpbmRleCwgY3Vyc29yLl90cmVlKSk7XG4gICAgfVxufVxuY2xhc3MgU3RydWN0dXJlQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcihyb290LCBvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHJvb3QuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMgfCBJdGVyTW9kZS5JZ25vcmVNb3VudHMpO1xuICAgIH1cbiAgICAvLyBNb3ZlIHRvIHRoZSBmaXJzdCBub2RlIChpbiBwcmUtb3JkZXIpIHRoYXQgc3RhcnRzIGF0IG9yIGFmdGVyIGBwb3NgLlxuICAgIG1vdmVUbyhwb3MpIHtcbiAgICAgICAgbGV0IHsgY3Vyc29yIH0gPSB0aGlzLCBwID0gcG9zIC0gdGhpcy5vZmZzZXQ7XG4gICAgICAgIHdoaWxlICghdGhpcy5kb25lICYmIGN1cnNvci5mcm9tIDwgcCkge1xuICAgICAgICAgICAgaWYgKGN1cnNvci50byA+PSBwb3MgJiYgY3Vyc29yLmVudGVyKHAsIDEsIEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzIHwgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMpKSA7XG4gICAgICAgICAgICBlbHNlIGlmICghY3Vyc29yLm5leHQoZmFsc2UpKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzTm9kZShjdXJzb3IpIHtcbiAgICAgICAgdGhpcy5tb3ZlVG8oY3Vyc29yLmZyb20pO1xuICAgICAgICBpZiAoIXRoaXMuZG9uZSAmJiB0aGlzLmN1cnNvci5mcm9tICsgdGhpcy5vZmZzZXQgPT0gY3Vyc29yLmZyb20gJiYgdGhpcy5jdXJzb3IudHJlZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgdHJlZSA9IHRoaXMuY3Vyc29yLnRyZWU7Oykge1xuICAgICAgICAgICAgICAgIGlmICh0cmVlID09IGN1cnNvci50cmVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJlZS5jaGlsZHJlbi5sZW5ndGggJiYgdHJlZS5wb3NpdGlvbnNbMF0gPT0gMCAmJiB0cmVlLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgVHJlZSlcbiAgICAgICAgICAgICAgICAgICAgdHJlZSA9IHRyZWUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuY2xhc3MgRnJhZ21lbnRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLmN1clRvID0gMDtcbiAgICAgICAgdGhpcy5mcmFnSSA9IDA7XG4gICAgICAgIGlmIChmcmFnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSB0aGlzLmN1ckZyYWcgPSBmcmFnbWVudHNbMF07XG4gICAgICAgICAgICB0aGlzLmN1clRvID0gKF9hID0gZmlyc3QudHJlZS5wcm9wKHN0b3BwZWRJbm5lcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZpcnN0LnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZmlyc3QudHJlZSwgLWZpcnN0Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1ckZyYWcgPSB0aGlzLmlubmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNOb2RlKG5vZGUpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY3VyRnJhZyAmJiBub2RlLmZyb20gPj0gdGhpcy5jdXJUbylcbiAgICAgICAgICAgIHRoaXMubmV4dEZyYWcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyRnJhZyAmJiB0aGlzLmN1ckZyYWcuZnJvbSA8PSBub2RlLmZyb20gJiYgdGhpcy5jdXJUbyA+PSBub2RlLnRvICYmIHRoaXMuaW5uZXIuaGFzTm9kZShub2RlKTtcbiAgICB9XG4gICAgbmV4dEZyYWcoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5mcmFnSSsrO1xuICAgICAgICBpZiAodGhpcy5mcmFnSSA9PSB0aGlzLmZyYWdtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VyRnJhZyA9IHRoaXMuaW5uZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZyYWcgPSB0aGlzLmN1ckZyYWcgPSB0aGlzLmZyYWdtZW50c1t0aGlzLmZyYWdJXTtcbiAgICAgICAgICAgIHRoaXMuY3VyVG8gPSAoX2EgPSBmcmFnLnRyZWUucHJvcChzdG9wcGVkSW5uZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmcmFnLnRvO1xuICAgICAgICAgICAgdGhpcy5pbm5lciA9IG5ldyBTdHJ1Y3R1cmVDdXJzb3IoZnJhZy50cmVlLCAtZnJhZy5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRNb3VudHMocG9zLCBwYXJzZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICh0aGlzLmlubmVyKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyLmN1cnNvci5tb3ZlVG8ocG9zLCAxKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyA9IHRoaXMuaW5uZXIuY3Vyc29yLm5vZGU7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGxldCBtb3VudCA9IChfYSA9IHBvcy50cmVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvcChOb2RlUHJvcC5tb3VudGVkKTtcbiAgICAgICAgICAgICAgICBpZiAobW91bnQgJiYgbW91bnQucGFyc2VyID09IHBhcnNlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5mcmFnSTsgaSA8IHRoaXMuZnJhZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhZyA9IHRoaXMuZnJhZ21lbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYWcuZnJvbSA+PSBwb3MudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZy50cmVlID09IHRoaXMuY3VyRnJhZy50cmVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBwb3MuZnJvbSAtIGZyYWcub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcHVuY2hSYW5nZXMob3V0ZXIsIHJhbmdlcykge1xuICAgIGxldCBjb3B5ID0gbnVsbCwgY3VycmVudCA9IHJhbmdlcztcbiAgICBmb3IgKGxldCBpID0gMSwgaiA9IDA7IGkgPCBvdXRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZ2FwRnJvbSA9IG91dGVyW2kgLSAxXS50bywgZ2FwVG8gPSBvdXRlcltpXS5mcm9tO1xuICAgICAgICBmb3IgKDsgaiA8IGN1cnJlbnQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCByID0gY3VycmVudFtqXTtcbiAgICAgICAgICAgIGlmIChyLmZyb20gPj0gZ2FwVG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAoci50byA8PSBnYXBGcm9tKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjb3B5ID0gcmFuZ2VzLnNsaWNlKCk7XG4gICAgICAgICAgICBpZiAoci5mcm9tIDwgZ2FwRnJvbSkge1xuICAgICAgICAgICAgICAgIGNvcHlbal0gPSBuZXcgUmFuZ2Uoci5mcm9tLCBnYXBGcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoci50byA+IGdhcFRvKVxuICAgICAgICAgICAgICAgICAgICBjb3B5LnNwbGljZShqICsgMSwgMCwgbmV3IFJhbmdlKGdhcFRvLCByLnRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyLnRvID4gZ2FwVG8pIHtcbiAgICAgICAgICAgICAgICBjb3B5W2otLV0gPSBuZXcgUmFuZ2UoZ2FwVG8sIHIudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29weS5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGZpbmRDb3ZlckNoYW5nZXMoYSwgYiwgZnJvbSwgdG8pIHtcbiAgICBsZXQgaUEgPSAwLCBpQiA9IDAsIGluQSA9IGZhbHNlLCBpbkIgPSBmYWxzZSwgcG9zID0gLTFlOTtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgbmV4dEEgPSBpQSA9PSBhLmxlbmd0aCA/IDFlOSA6IGluQSA/IGFbaUFdLnRvIDogYVtpQV0uZnJvbTtcbiAgICAgICAgbGV0IG5leHRCID0gaUIgPT0gYi5sZW5ndGggPyAxZTkgOiBpbkIgPyBiW2lCXS50byA6IGJbaUJdLmZyb207XG4gICAgICAgIGlmIChpbkEgIT0gaW5CKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChwb3MsIGZyb20pLCBlbmQgPSBNYXRoLm1pbihuZXh0QSwgbmV4dEIsIHRvKTtcbiAgICAgICAgICAgIGlmIChzdGFydCA8IGVuZClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgUmFuZ2Uoc3RhcnQsIGVuZCkpO1xuICAgICAgICB9XG4gICAgICAgIHBvcyA9IE1hdGgubWluKG5leHRBLCBuZXh0Qik7XG4gICAgICAgIGlmIChwb3MgPT0gMWU5KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChuZXh0QSA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5BKVxuICAgICAgICAgICAgICAgIGluQSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0QiA9PSBwb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5CKVxuICAgICAgICAgICAgICAgIGluQiA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbkIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpQisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyBHaXZlbiBhIG51bWJlciBvZiBmcmFnbWVudHMgZm9yIHRoZSBvdXRlciB0cmVlLCBhbmQgYSBzZXQgb2YgcmFuZ2VzXG4vLyB0byBwYXJzZSwgZmluZCBmcmFnbWVudHMgZm9yIGlubmVyIHRyZWVzIG1vdW50ZWQgYXJvdW5kIHRob3NlXG4vLyByYW5nZXMsIGlmIGFueS5cbmZ1bmN0aW9uIGVudGVyRnJhZ21lbnRzKG1vdW50cywgcmFuZ2VzKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgcG9zLCBtb3VudCwgZnJhZyB9IG9mIG1vdW50cykge1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSBwb3MgKyAobW91bnQub3ZlcmxheSA/IG1vdW50Lm92ZXJsYXlbMF0uZnJvbSA6IDApLCBlbmRQb3MgPSBzdGFydFBvcyArIG1vdW50LnRyZWUubGVuZ3RoO1xuICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KGZyYWcuZnJvbSwgc3RhcnRQb3MpLCB0byA9IE1hdGgubWluKGZyYWcudG8sIGVuZFBvcyk7XG4gICAgICAgIGlmIChtb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICBsZXQgb3ZlcmxheSA9IG1vdW50Lm92ZXJsYXkubWFwKHIgPT4gbmV3IFJhbmdlKHIuZnJvbSArIHBvcywgci50byArIHBvcykpO1xuICAgICAgICAgICAgbGV0IGNoYW5nZXMgPSBmaW5kQ292ZXJDaGFuZ2VzKHJhbmdlcywgb3ZlcmxheSwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IGZyb207OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gY2hhbmdlcy5sZW5ndGgsIGVuZCA9IGxhc3QgPyB0byA6IGNoYW5nZXNbaV0uZnJvbTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgVHJlZUZyYWdtZW50KHBvcywgZW5kLCBtb3VudC50cmVlLCAtc3RhcnRQb3MsIGZyYWcuZnJvbSA+PSBwb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBwb3MgPSBjaGFuZ2VzW2ldLnRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFRyZWVGcmFnbWVudChmcm9tLCB0bywgbW91bnQudHJlZSwgLXN0YXJ0UG9zLCBmcmFnLmZyb20gPj0gc3RhcnRQb3MgfHwgZnJhZy5vcGVuU3RhcnQsIGZyYWcudG8gPD0gZW5kUG9zIHx8IGZyYWcub3BlbkVuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IERlZmF1bHRCdWZmZXJMZW5ndGgsIEl0ZXJNb2RlLCBNb3VudGVkVHJlZSwgTm9kZVByb3AsIE5vZGVTZXQsIE5vZGVUeXBlLCBOb2RlV2Vha01hcCwgUGFyc2VyLCBUcmVlLCBUcmVlQnVmZmVyLCBUcmVlQ3Vyc29yLCBUcmVlRnJhZ21lbnQsIHBhcnNlTWl4ZWQgfTtcbiIsCiAgICAiaW1wb3J0IHsgTm9kZVByb3AgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcblxubGV0IG5leHRUYWdJRCA9IDA7XG4vKipcbkhpZ2hsaWdodGluZyB0YWdzIGFyZSBtYXJrZXJzIHRoYXQgZGVub3RlIGEgaGlnaGxpZ2h0aW5nIGNhdGVnb3J5LlxuVGhleSBhcmUgW2Fzc29jaWF0ZWRdKCNoaWdobGlnaHQuc3R5bGVUYWdzKSB3aXRoIHBhcnRzIG9mIGEgc3ludGF4XG50cmVlIGJ5IGEgbGFuZ3VhZ2UgbW9kZSwgYW5kIHRoZW4gbWFwcGVkIHRvIGFuIGFjdHVhbCBDU1Mgc3R5bGUgYnlcbmEgW2hpZ2hsaWdodGVyXSgjaGlnaGxpZ2h0LkhpZ2hsaWdodGVyKS5cblxuQmVjYXVzZSBzeW50YXggdHJlZSBub2RlIHR5cGVzIGFuZCBoaWdobGlnaHQgc3R5bGVzIGhhdmUgdG8gYmVcbmFibGUgdG8gdGFsayB0aGUgc2FtZSBsYW5ndWFnZSwgQ29kZU1pcnJvciB1c2VzIGEgbW9zdGx5IF9jbG9zZWRfXG5bdm9jYWJ1bGFyeV0oI2hpZ2hsaWdodC50YWdzKSBvZiBzeW50YXggdGFncyAoYXMgb3Bwb3NlZCB0b1xudHJhZGl0aW9uYWwgb3BlbiBzdHJpbmctYmFzZWQgc3lzdGVtcywgd2hpY2ggbWFrZSBpdCBoYXJkIGZvclxuaGlnaGxpZ2h0aW5nIHRoZW1lcyB0byBjb3ZlciBhbGwgdGhlIHRva2VucyBwcm9kdWNlZCBieSB0aGVcbnZhcmlvdXMgbGFuZ3VhZ2VzKS5cblxuSXQgX2lzXyBwb3NzaWJsZSB0byBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIHlvdXIgb3duXG5oaWdobGlnaHRpbmcgdGFncyBmb3Igc3lzdGVtLWludGVybmFsIHVzZSAod2hlcmUgeW91IGNvbnRyb2wgYm90aFxudGhlIGxhbmd1YWdlIHBhY2thZ2UgYW5kIHRoZSBoaWdobGlnaHRlciksIGJ1dCBzdWNoIHRhZ3Mgd2lsbCBub3RcbmJlIHBpY2tlZCB1cCBieSByZWd1bGFyIGhpZ2hsaWdodGVycyAodGhvdWdoIHlvdSBjYW4gZGVyaXZlIHRoZW1cbmZyb20gc3RhbmRhcmQgdGFncyB0byBhbGxvdyBoaWdobGlnaHRlcnMgdG8gZmFsbCBiYWNrIHRvIHRob3NlKS5cbiovXG5jbGFzcyBUYWcge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIG9wdGlvbmFsIG5hbWUgb2YgdGhlIGJhc2UgdGFnIEBpbnRlcm5hbFxuICAgICovXG4gICAgbmFtZSwgXG4gICAgLyoqXG4gICAgVGhlIHNldCBvZiB0aGlzIHRhZyBhbmQgYWxsIGl0cyBwYXJlbnQgdGFncywgc3RhcnRpbmcgd2l0aFxuICAgIHRoaXMgb25lIGl0c2VsZiBhbmQgc29ydGVkIGluIG9yZGVyIG9mIGRlY3JlYXNpbmcgc3BlY2lmaWNpdHkuXG4gICAgKi9cbiAgICBzZXQsIFxuICAgIC8qKlxuICAgIFRoZSBiYXNlIHVubW9kaWZpZWQgdGFnIHRoYXQgdGhpcyBvbmUgaXMgYmFzZWQgb24sIGlmIGl0J3NcbiAgICBtb2RpZmllZCBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGJhc2UsIFxuICAgIC8qKlxuICAgIFRoZSBtb2RpZmllcnMgYXBwbGllZCB0byB0aGlzLmJhc2UgQGludGVybmFsXG4gICAgKi9cbiAgICBtb2RpZmllZCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnNldCA9IHNldDtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5tb2RpZmllZCA9IG1vZGlmaWVkO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuaWQgPSBuZXh0VGFnSUQrKztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCB7IG5hbWUgfSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IG1vZCBvZiB0aGlzLm1vZGlmaWVkKVxuICAgICAgICAgICAgaWYgKG1vZC5uYW1lKVxuICAgICAgICAgICAgICAgIG5hbWUgPSBgJHttb2QubmFtZX0oJHtuYW1lfSlgO1xuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gICAgc3RhdGljIGRlZmluZShuYW1lT3JQYXJlbnQsIHBhcmVudCkge1xuICAgICAgICBsZXQgbmFtZSA9IHR5cGVvZiBuYW1lT3JQYXJlbnQgPT0gXCJzdHJpbmdcIiA/IG5hbWVPclBhcmVudCA6IFwiP1wiO1xuICAgICAgICBpZiAobmFtZU9yUGFyZW50IGluc3RhbmNlb2YgVGFnKVxuICAgICAgICAgICAgcGFyZW50ID0gbmFtZU9yUGFyZW50O1xuICAgICAgICBpZiAocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50LmJhc2UpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGRlcml2ZSBmcm9tIGEgbW9kaWZpZWQgdGFnXCIpO1xuICAgICAgICBsZXQgdGFnID0gbmV3IFRhZyhuYW1lLCBbXSwgbnVsbCwgW10pO1xuICAgICAgICB0YWcuc2V0LnB1c2godGFnKTtcbiAgICAgICAgaWYgKHBhcmVudClcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgcGFyZW50LnNldClcbiAgICAgICAgICAgICAgICB0YWcuc2V0LnB1c2godCk7XG4gICAgICAgIHJldHVybiB0YWc7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIHRhZyBfbW9kaWZpZXJfLCB3aGljaCBpcyBhIGZ1bmN0aW9uIHRoYXQsIGdpdmVuIGEgdGFnLFxuICAgIHdpbGwgcmV0dXJuIGEgdGFnIHRoYXQgaXMgYSBzdWJ0YWcgb2YgdGhlIG9yaWdpbmFsLiBBcHBseWluZyB0aGVcbiAgICBzYW1lIG1vZGlmaWVyIHRvIGEgdHdpY2UgdGFnIHdpbGwgcmV0dXJuIHRoZSBzYW1lIHZhbHVlIChgbTEodDEpXG4gICAgPT0gbTEodDEpYCkgYW5kIGFwcGx5aW5nIG11bHRpcGxlIG1vZGlmaWVycyB3aWxsLCByZWdhcmRsZXNzIG9yXG4gICAgb3JkZXIsIHByb2R1Y2UgdGhlIHNhbWUgdGFnIChgbTEobTIodDEpKSA9PSBtMihtMSh0MSkpYCkuXG4gICAgXG4gICAgV2hlbiBtdWx0aXBsZSBtb2RpZmllcnMgYXJlIGFwcGxpZWQgdG8gYSBnaXZlbiBiYXNlIHRhZywgZWFjaFxuICAgIHNtYWxsZXIgc2V0IG9mIG1vZGlmaWVycyBpcyByZWdpc3RlcmVkIGFzIGEgcGFyZW50LCBzbyB0aGF0IGZvclxuICAgIGV4YW1wbGUgYG0xKG0yKG0zKHQxKSkpYCBpcyBhIHN1YnR5cGUgb2YgYG0xKG0yKHQxKSlgLFxuICAgIGBtMShtMyh0MSlgLCBhbmQgc28gb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lTW9kaWZpZXIobmFtZSkge1xuICAgICAgICBsZXQgbW9kID0gbmV3IE1vZGlmaWVyKG5hbWUpO1xuICAgICAgICByZXR1cm4gKHRhZykgPT4ge1xuICAgICAgICAgICAgaWYgKHRhZy5tb2RpZmllZC5pbmRleE9mKG1vZCkgPiAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgICAgICAgcmV0dXJuIE1vZGlmaWVyLmdldCh0YWcuYmFzZSB8fCB0YWcsIHRhZy5tb2RpZmllZC5jb25jYXQobW9kKS5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmxldCBuZXh0TW9kaWZpZXJJRCA9IDA7XG5jbGFzcyBNb2RpZmllciB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IFtdO1xuICAgICAgICB0aGlzLmlkID0gbmV4dE1vZGlmaWVySUQrKztcbiAgICB9XG4gICAgc3RhdGljIGdldChiYXNlLCBtb2RzKSB7XG4gICAgICAgIGlmICghbW9kcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgbGV0IGV4aXN0cyA9IG1vZHNbMF0uaW5zdGFuY2VzLmZpbmQodCA9PiB0LmJhc2UgPT0gYmFzZSAmJiBzYW1lQXJyYXkobW9kcywgdC5tb2RpZmllZCkpO1xuICAgICAgICBpZiAoZXhpc3RzKVxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0cztcbiAgICAgICAgbGV0IHNldCA9IFtdLCB0YWcgPSBuZXcgVGFnKGJhc2UubmFtZSwgc2V0LCBiYXNlLCBtb2RzKTtcbiAgICAgICAgZm9yIChsZXQgbSBvZiBtb2RzKVxuICAgICAgICAgICAgbS5pbnN0YW5jZXMucHVzaCh0YWcpO1xuICAgICAgICBsZXQgY29uZmlncyA9IHBvd2VyU2V0KG1vZHMpO1xuICAgICAgICBmb3IgKGxldCBwYXJlbnQgb2YgYmFzZS5zZXQpXG4gICAgICAgICAgICBpZiAoIXBhcmVudC5tb2RpZmllZC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29uZmlnIG9mIGNvbmZpZ3MpXG4gICAgICAgICAgICAgICAgICAgIHNldC5wdXNoKE1vZGlmaWVyLmdldChwYXJlbnQsIGNvbmZpZykpO1xuICAgICAgICByZXR1cm4gdGFnO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNhbWVBcnJheShhLCBiKSB7XG4gICAgcmV0dXJuIGEubGVuZ3RoID09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHgsIGkpID0+IHggPT0gYltpXSk7XG59XG5mdW5jdGlvbiBwb3dlclNldChhcnJheSkge1xuICAgIGxldCBzZXRzID0gW1tdXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwLCBlID0gc2V0cy5sZW5ndGg7IGogPCBlOyBqKyspIHtcbiAgICAgICAgICAgIHNldHMucHVzaChzZXRzW2pdLmNvbmNhdChhcnJheVtpXSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXRzLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpO1xufVxuLyoqXG5UaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYWRkIGEgc2V0IG9mIHRhZ3MgdG8gYSBsYW5ndWFnZSBzeW50YXhcbnZpYSBbYE5vZGVTZXQuZXh0ZW5kYF0oI2NvbW1vbi5Ob2RlU2V0LmV4dGVuZCkgb3JcbltgTFJQYXJzZXIuY29uZmlndXJlYF0oI2xyLkxSUGFyc2VyLmNvbmZpZ3VyZSkuXG5cblRoZSBhcmd1bWVudCBvYmplY3QgbWFwcyBub2RlIHNlbGVjdG9ycyB0byBbaGlnaGxpZ2h0aW5nXG50YWdzXSgjaGlnaGxpZ2h0LlRhZykgb3IgYXJyYXlzIG9mIHRhZ3MuXG5cbk5vZGUgc2VsZWN0b3JzIG1heSBob2xkIG9uZSBvciBtb3JlIChzcGFjZS1zZXBhcmF0ZWQpIG5vZGUgcGF0aHMuXG5TdWNoIGEgcGF0aCBjYW4gYmUgYSBbbm9kZSBuYW1lXSgjY29tbW9uLk5vZGVUeXBlLm5hbWUpLCBvclxubXVsdGlwbGUgbm9kZSBuYW1lcyAob3IgYCpgIHdpbGRjYXJkcykgc2VwYXJhdGVkIGJ5IHNsYXNoXG5jaGFyYWN0ZXJzLCBhcyBpbiBgXCJCbG9jay9EZWNsYXJhdGlvbi9WYXJpYWJsZU5hbWVcImAuIFN1Y2ggYSBwYXRoXG5tYXRjaGVzIHRoZSBmaW5hbCBub2RlIGJ1dCBvbmx5IGlmIGl0cyBkaXJlY3QgcGFyZW50IG5vZGVzIGFyZSB0aGVcbm90aGVyIG5vZGVzIG1lbnRpb25lZC4gQSBgKmAgaW4gc3VjaCBhIHBhdGggbWF0Y2hlcyBhbnkgcGFyZW50LFxuYnV0IG9ubHkgYSBzaW5nbGUgbGV2ZWzigJR3aWxkY2FyZHMgdGhhdCBtYXRjaCBtdWx0aXBsZSBwYXJlbnRzXG5hcmVuJ3Qgc3VwcG9ydGVkLCBib3RoIGZvciBlZmZpY2llbmN5IHJlYXNvbnMgYW5kIGJlY2F1c2UgTGV6ZXJcbnRyZWVzIG1ha2UgaXQgcmF0aGVyIGhhcmQgdG8gcmVhc29uIGFib3V0IHdoYXQgdGhleSB3b3VsZCBtYXRjaC4pXG5cbkEgcGF0aCBjYW4gYmUgZW5kZWQgd2l0aCBgLy4uLmAgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdGFnIGFzc2lnbmVkXG50byB0aGUgbm9kZSBzaG91bGQgYWxzbyBhcHBseSB0byBhbGwgY2hpbGQgbm9kZXMsIGV2ZW4gaWYgdGhleVxubWF0Y2ggdGhlaXIgb3duIHN0eWxlIChieSBkZWZhdWx0LCBvbmx5IHRoZSBpbm5lcm1vc3Qgc3R5bGUgaXNcbnVzZWQpLlxuXG5XaGVuIGEgcGF0aCBlbmRzIGluIGAhYCwgYXMgaW4gYEF0dHJpYnV0ZSFgLCBubyBmdXJ0aGVyIG1hdGNoaW5nXG5oYXBwZW5zIGZvciB0aGUgbm9kZSdzIGNoaWxkIG5vZGVzLCBhbmQgdGhlIGVudGlyZSBub2RlIGdldHMgdGhlXG5naXZlbiBzdHlsZS5cblxuSW4gdGhpcyBub3RhdGlvbiwgbm9kZSBuYW1lcyB0aGF0IGNvbnRhaW4gYC9gLCBgIWAsIGAqYCwgb3IgYC4uLmBcbm11c3QgYmUgcXVvdGVkIGFzIEpTT04gc3RyaW5ncy5cblxuRm9yIGV4YW1wbGU6XG5cbmBgYGphdmFzY3JpcHRcbnBhcnNlci53aXRoUHJvcHMoXG4gIHN0eWxlVGFncyh7XG4gICAgLy8gU3R5bGUgTnVtYmVyIGFuZCBCaWdOdW1iZXIgbm9kZXNcbiAgICBcIk51bWJlciBCaWdOdW1iZXJcIjogdGFncy5udW1iZXIsXG4gICAgLy8gU3R5bGUgRXNjYXBlIG5vZGVzIHdob3NlIHBhcmVudCBpcyBTdHJpbmdcbiAgICBcIlN0cmluZy9Fc2NhcGVcIjogdGFncy5lc2NhcGUsXG4gICAgLy8gU3R5bGUgYW55dGhpbmcgaW5zaWRlIEF0dHJpYnV0ZXMgbm9kZXNcbiAgICBcIkF0dHJpYnV0ZXMhXCI6IHRhZ3MubWV0YSxcbiAgICAvLyBBZGQgYSBzdHlsZSB0byBhbGwgY29udGVudCBpbnNpZGUgSXRhbGljIG5vZGVzXG4gICAgXCJJdGFsaWMvLi4uXCI6IHRhZ3MuZW1waGFzaXMsXG4gICAgLy8gU3R5bGUgSW52YWxpZFN0cmluZyBub2RlcyBhcyBib3RoIGBzdHJpbmdgIGFuZCBgaW52YWxpZGBcbiAgICBcIkludmFsaWRTdHJpbmdcIjogW3RhZ3Muc3RyaW5nLCB0YWdzLmludmFsaWRdLFxuICAgIC8vIFN0eWxlIHRoZSBub2RlIG5hbWVkIFwiL1wiIGFzIHB1bmN0dWF0aW9uXG4gICAgJ1wiL1wiJzogdGFncy5wdW5jdHVhdGlvblxuICB9KVxuKVxuYGBgXG4qL1xuZnVuY3Rpb24gc3R5bGVUYWdzKHNwZWMpIHtcbiAgICBsZXQgYnlOYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHRhZ3MgPSBzcGVjW3Byb3BdO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpXG4gICAgICAgICAgICB0YWdzID0gW3RhZ3NdO1xuICAgICAgICBmb3IgKGxldCBwYXJ0IG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgaWYgKHBhcnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2VzID0gW10sIG1vZGUgPSAyIC8qIE1vZGUuTm9ybWFsICovLCByZXN0ID0gcGFydDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSAwOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3QgPT0gXCIuLi5cIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAxIC8qIE1vZGUuSW5oZXJpdCAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtID0gL15cIig/OlteXCJcXFxcXXxcXFxcLikqP1wifFteXFwvIV0rLy5leGVjKHJlc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW0pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGllY2VzLnB1c2gobVswXSA9PSBcIipcIiA/IFwiXCIgOiBtWzBdWzBdID09ICdcIicgPyBKU09OLnBhcnNlKG1bMF0pIDogbVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHBhcnRbcG9zKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09IHBhcnQubGVuZ3RoICYmIG5leHQgPT0gXCIhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAwIC8qIE1vZGUuT3BhcXVlICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gXCIvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHBhcnQuc2xpY2UocG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBwaWVjZXMubGVuZ3RoIC0gMSwgaW5uZXIgPSBwaWVjZXNbbGFzdF07XG4gICAgICAgICAgICAgICAgaWYgKCFpbm5lcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHBhdGg6IFwiICsgcGFydCk7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBuZXcgUnVsZSh0YWdzLCBtb2RlLCBsYXN0ID4gMCA/IHBpZWNlcy5zbGljZSgwLCBsYXN0KSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGJ5TmFtZVtpbm5lcl0gPSBydWxlLnNvcnQoYnlOYW1lW2lubmVyXSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBydWxlTm9kZVByb3AuYWRkKGJ5TmFtZSk7XG59XG5jb25zdCBydWxlTm9kZVByb3AgPSBuZXcgTm9kZVByb3AoKTtcbmNsYXNzIFJ1bGUge1xuICAgIGNvbnN0cnVjdG9yKHRhZ3MsIG1vZGUsIGNvbnRleHQsIG5leHQpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGFncztcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZ2V0IG9wYXF1ZSgpIHsgcmV0dXJuIHRoaXMubW9kZSA9PSAwIC8qIE1vZGUuT3BhcXVlICovOyB9XG4gICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi87IH1cbiAgICBzb3J0KG90aGVyKSB7XG4gICAgICAgIGlmICghb3RoZXIgfHwgb3RoZXIuZGVwdGggPCB0aGlzLmRlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBvdGhlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLm5leHQgPSB0aGlzLnNvcnQob3RoZXIubmV4dCk7XG4gICAgICAgIHJldHVybiBvdGhlcjtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0ID8gdGhpcy5jb250ZXh0Lmxlbmd0aCA6IDA7IH1cbn1cblJ1bGUuZW1wdHkgPSBuZXcgUnVsZShbXSwgMiAvKiBNb2RlLk5vcm1hbCAqLywgbnVsbCk7XG4vKipcbkRlZmluZSBhIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikgZnJvbSBhbiBhcnJheSBvZlxudGFnL2NsYXNzIHBhaXJzLiBDbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCBtb3JlIHNwZWNpZmljIHRhZ3Mgd2lsbFxudGFrZSBwcmVjZWRlbmNlLlxuKi9cbmZ1bmN0aW9uIHRhZ0hpZ2hsaWdodGVyKHRhZ3MsIG9wdGlvbnMpIHtcbiAgICBsZXQgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBzdHlsZSBvZiB0YWdzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdHlsZS50YWcpKVxuICAgICAgICAgICAgbWFwW3N0eWxlLnRhZy5pZF0gPSBzdHlsZS5jbGFzcztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIHN0eWxlLnRhZylcbiAgICAgICAgICAgICAgICBtYXBbdGFnLmlkXSA9IHN0eWxlLmNsYXNzO1xuICAgIH1cbiAgICBsZXQgeyBzY29wZSwgYWxsID0gbnVsbCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHlsZTogKHRhZ3MpID0+IHtcbiAgICAgICAgICAgIGxldCBjbHMgPSBhbGw7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHN1YiBvZiB0YWcuc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWdDbGFzcyA9IG1hcFtzdWIuaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9IGNscyA/IGNscyArIFwiIFwiICsgdGFnQ2xhc3MgOiB0YWdDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNscztcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGVcbiAgICB9O1xufVxuZnVuY3Rpb24gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHRhZ3MpIHtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBoaWdobGlnaHRlciBvZiBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gaGlnaGxpZ2h0ZXIuc3R5bGUodGFncyk7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA/IHJlc3VsdCArIFwiIFwiICsgdmFsdWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuSGlnaGxpZ2h0IHRoZSBnaXZlbiBbdHJlZV0oI2NvbW1vbi5UcmVlKSB3aXRoIHRoZSBnaXZlblxuW2hpZ2hsaWdodGVyXSgjaGlnaGxpZ2h0LkhpZ2hsaWdodGVyKS4gT2Z0ZW4sIHRoZSBoaWdoZXItbGV2ZWxcbltgaGlnaGxpZ2h0Q29kZWBdKCNoaWdobGlnaHQuaGlnaGxpZ2h0Q29kZSkgZnVuY3Rpb24gaXMgZWFzaWVyIHRvXG51c2UuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgXG4vKipcbkFzc2lnbiBzdHlsaW5nIHRvIGEgcmVnaW9uIG9mIHRoZSB0ZXh0LiBXaWxsIGJlIGNhbGxlZCwgaW4gb3JkZXJcbm9mIHBvc2l0aW9uLCBmb3IgYW55IHJhbmdlcyB3aGVyZSBtb3JlIHRoYW4gemVybyBjbGFzc2VzIGFwcGx5LlxuYGNsYXNzZXNgIGlzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBDU1MgY2xhc3Nlcy5cbiovXG5wdXRTdHlsZSwgXG4vKipcblRoZSBzdGFydCBvZiB0aGUgcmFuZ2UgdG8gaGlnaGxpZ2h0LlxuKi9cbmZyb20gPSAwLCBcbi8qKlxuVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4qL1xudG8gPSB0cmVlLmxlbmd0aCkge1xuICAgIGxldCBidWlsZGVyID0gbmV3IEhpZ2hsaWdodEJ1aWxkZXIoZnJvbSwgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlcikgPyBoaWdobGlnaHRlciA6IFtoaWdobGlnaHRlcl0sIHB1dFN0eWxlKTtcbiAgICBidWlsZGVyLmhpZ2hsaWdodFJhbmdlKHRyZWUuY3Vyc29yKCksIGZyb20sIHRvLCBcIlwiLCBidWlsZGVyLmhpZ2hsaWdodGVycyk7XG4gICAgYnVpbGRlci5mbHVzaCh0byk7XG59XG4vKipcbkhpZ2hsaWdodCB0aGUgZ2l2ZW4gdHJlZSB3aXRoIHRoZSBnaXZlbiBoaWdobGlnaHRlciwgY2FsbGluZ1xuYHB1dFRleHRgIGZvciBldmVyeSBwaWVjZSBvZiB0ZXh0LCBlaXRoZXIgd2l0aCBhIHNldCBvZiBjbGFzc2VzIG9yXG53aXRoIHRoZSBlbXB0eSBzdHJpbmcgd2hlbiB1bnN0eWxlZCwgYW5kIGBwdXRCcmVha2AgZm9yIGV2ZXJ5IGxpbmVcbmJyZWFrLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodENvZGUoY29kZSwgdHJlZSwgaGlnaGxpZ2h0ZXIsIHB1dFRleHQsIHB1dEJyZWFrLCBmcm9tID0gMCwgdG8gPSBjb2RlLmxlbmd0aCkge1xuICAgIGxldCBwb3MgPSBmcm9tO1xuICAgIGZ1bmN0aW9uIHdyaXRlVG8ocCwgY2xhc3Nlcykge1xuICAgICAgICBpZiAocCA8PSBwb3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IHRleHQgPSBjb2RlLnNsaWNlKHBvcywgcCksIGkgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0QnJlYWsgPSB0ZXh0LmluZGV4T2YoXCJcXG5cIiwgaSk7XG4gICAgICAgICAgICBsZXQgdXB0byA9IG5leHRCcmVhayA8IDAgPyB0ZXh0Lmxlbmd0aCA6IG5leHRCcmVhaztcbiAgICAgICAgICAgIGlmICh1cHRvID4gaSlcbiAgICAgICAgICAgICAgICBwdXRUZXh0KHRleHQuc2xpY2UoaSwgdXB0byksIGNsYXNzZXMpO1xuICAgICAgICAgICAgaWYgKG5leHRCcmVhayA8IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwdXRCcmVhaygpO1xuICAgICAgICAgICAgaSA9IG5leHRCcmVhayArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gcDtcbiAgICB9XG4gICAgaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgKGZyb20sIHRvLCBjbGFzc2VzKSA9PiB7XG4gICAgICAgIHdyaXRlVG8oZnJvbSwgXCJcIik7XG4gICAgICAgIHdyaXRlVG8odG8sIGNsYXNzZXMpO1xuICAgIH0sIGZyb20sIHRvKTtcbiAgICB3cml0ZVRvKHRvLCBcIlwiKTtcbn1cbmNsYXNzIEhpZ2hsaWdodEJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGF0LCBoaWdobGlnaHRlcnMsIHNwYW4pIHtcbiAgICAgICAgdGhpcy5hdCA9IGF0O1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVycyA9IGhpZ2hsaWdodGVycztcbiAgICAgICAgdGhpcy5zcGFuID0gc3BhbjtcbiAgICAgICAgdGhpcy5jbGFzcyA9IFwiXCI7XG4gICAgfVxuICAgIHN0YXJ0U3BhbihhdCwgY2xzKSB7XG4gICAgICAgIGlmIChjbHMgIT0gdGhpcy5jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5mbHVzaChhdCk7XG4gICAgICAgICAgICBpZiAoYXQgPiB0aGlzLmF0KVxuICAgICAgICAgICAgICAgIHRoaXMuYXQgPSBhdDtcbiAgICAgICAgICAgIHRoaXMuY2xhc3MgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2godG8pIHtcbiAgICAgICAgaWYgKHRvID4gdGhpcy5hdCAmJiB0aGlzLmNsYXNzKVxuICAgICAgICAgICAgdGhpcy5zcGFuKHRoaXMuYXQsIHRvLCB0aGlzLmNsYXNzKTtcbiAgICB9XG4gICAgaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycykge1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tOiBzdGFydCwgdG86IGVuZCB9ID0gY3Vyc29yO1xuICAgICAgICBpZiAoc3RhcnQgPj0gdG8gfHwgZW5kIDw9IGZyb20pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlLmlzVG9wKVxuICAgICAgICAgICAgaGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZSh0eXBlKSk7XG4gICAgICAgIGxldCBjbHMgPSBpbmhlcml0ZWRDbGFzcztcbiAgICAgICAgbGV0IHJ1bGUgPSBnZXRTdHlsZVRhZ3MoY3Vyc29yKSB8fCBSdWxlLmVtcHR5O1xuICAgICAgICBsZXQgdGFnQ2xzID0gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHJ1bGUudGFncyk7XG4gICAgICAgIGlmICh0YWdDbHMpIHtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiO1xuICAgICAgICAgICAgY2xzICs9IHRhZ0NscztcbiAgICAgICAgICAgIGlmIChydWxlLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi8pXG4gICAgICAgICAgICAgICAgaW5oZXJpdGVkQ2xhc3MgKz0gKGluaGVyaXRlZENsYXNzID8gXCIgXCIgOiBcIlwiKSArIHRhZ0NscztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0U3BhbihNYXRoLm1heChmcm9tLCBzdGFydCksIGNscyk7XG4gICAgICAgIGlmIChydWxlLm9wYXF1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1vdW50ZWQgPSBjdXJzb3IudHJlZSAmJiBjdXJzb3IudHJlZS5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGN1cnNvci5ub2RlLmVudGVyKG1vdW50ZWQub3ZlcmxheVswXS5mcm9tICsgc3RhcnQsIDEpO1xuICAgICAgICAgICAgbGV0IGlubmVySGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZShtb3VudGVkLnRyZWUudHlwZSkpO1xuICAgICAgICAgICAgbGV0IGhhc0NoaWxkID0gY3Vyc29yLmZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBzdGFydDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gaSA8IG1vdW50ZWQub3ZlcmxheS5sZW5ndGggPyBtb3VudGVkLm92ZXJsYXlbaV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0UG9zID0gbmV4dCA/IG5leHQuZnJvbSArIHN0YXJ0IDogZW5kO1xuICAgICAgICAgICAgICAgIGxldCByYW5nZUZyb20gPSBNYXRoLm1heChmcm9tLCBwb3MpLCByYW5nZVRvID0gTWF0aC5taW4odG8sIG5leHRQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZUZyb20gPCByYW5nZVRvICYmIGhhc0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJzb3IuZnJvbSA8IHJhbmdlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCByYW5nZUZyb20sIHJhbmdlVG8sIGluaGVyaXRlZENsYXNzLCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4ocmFuZ2VUbywgY3Vyc29yLnRvKSwgY2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IudG8gPj0gbmV4dFBvcyB8fCAhY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0IHx8IG5leHRQb3MgPiB0bylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV4dC50byArIHN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoaW5uZXIuY3Vyc29yKCksIE1hdGgubWF4KGZyb20sIG5leHQuZnJvbSArIHN0YXJ0KSwgTWF0aC5taW4odG8sIHBvcyksIFwiXCIsIGlubmVySGlnaGxpZ2h0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIHBvcyksIGNscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NoaWxkKVxuICAgICAgICAgICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZClcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRDbGFzcyA9IFwiXCI7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci50byA8PSBmcm9tKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmZyb20gPj0gdG8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIGN1cnNvci50byksIGNscyk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IubmV4dFNpYmxpbmcoKSk7XG4gICAgICAgICAgICBjdXJzb3IucGFyZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbk1hdGNoIGEgc3ludGF4IG5vZGUncyBbaGlnaGxpZ2h0IHJ1bGVzXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykuIElmXG50aGVyZSdzIGEgbWF0Y2gsIHJldHVybiBpdHMgc2V0IG9mIHRhZ3MsIGFuZCB3aGV0aGVyIGl0IGlzXG5vcGFxdWUgKHVzZXMgYSBgIWApIG9yIGFwcGxpZXMgdG8gYWxsIGNoaWxkIG5vZGVzIChgLy4uLmApLlxuKi9cbmZ1bmN0aW9uIGdldFN0eWxlVGFncyhub2RlKSB7XG4gICAgbGV0IHJ1bGUgPSBub2RlLnR5cGUucHJvcChydWxlTm9kZVByb3ApO1xuICAgIHdoaWxlIChydWxlICYmIHJ1bGUuY29udGV4dCAmJiAhbm9kZS5tYXRjaENvbnRleHQocnVsZS5jb250ZXh0KSlcbiAgICAgICAgcnVsZSA9IHJ1bGUubmV4dDtcbiAgICByZXR1cm4gcnVsZSB8fCBudWxsO1xufVxuY29uc3QgdCA9IFRhZy5kZWZpbmU7XG5jb25zdCBjb21tZW50ID0gdCgpLCBuYW1lID0gdCgpLCB0eXBlTmFtZSA9IHQobmFtZSksIHByb3BlcnR5TmFtZSA9IHQobmFtZSksIGxpdGVyYWwgPSB0KCksIHN0cmluZyA9IHQobGl0ZXJhbCksIG51bWJlciA9IHQobGl0ZXJhbCksIGNvbnRlbnQgPSB0KCksIGhlYWRpbmcgPSB0KGNvbnRlbnQpLCBrZXl3b3JkID0gdCgpLCBvcGVyYXRvciA9IHQoKSwgcHVuY3R1YXRpb24gPSB0KCksIGJyYWNrZXQgPSB0KHB1bmN0dWF0aW9uKSwgbWV0YSA9IHQoKTtcbi8qKlxuVGhlIGRlZmF1bHQgc2V0IG9mIGhpZ2hsaWdodGluZyBbdGFnc10oI2hpZ2hsaWdodC5UYWcpLlxuXG5UaGlzIGNvbGxlY3Rpb24gaXMgaGVhdmlseSBiaWFzZWQgdG93YXJkcyBwcm9ncmFtbWluZyBsYW5ndWFnZXMsXG5hbmQgbmVjZXNzYXJpbHkgaW5jb21wbGV0ZS4gQSBmdWxsIG9udG9sb2d5IG9mIHN5bnRhY3RpY1xuY29uc3RydWN0cyB3b3VsZCBmaWxsIGEgc3RhY2sgb2YgYm9va3MsIGFuZCBiZSBpbXByYWN0aWNhbCB0b1xud3JpdGUgdGhlbWVzIGZvci4gU28gdHJ5IHRvIG1ha2UgZG8gd2l0aCB0aGlzIHNldC4gSWYgYWxsIGVsc2VcbmZhaWxzLCBbb3BlbiBhblxuaXNzdWVdKGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL2NvZGVtaXJyb3IubmV4dCkgdG8gcHJvcG9zZSBhXG5uZXcgdGFnLCBvciBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIGEgbG9jYWwgY3VzdG9tIHRhZyBmb3JcbnlvdXIgdXNlIGNhc2UuXG5cbk5vdGUgdGhhdCBpdCBpcyBub3Qgb2JsaWdhdG9yeSB0byBhbHdheXMgYXR0YWNoIHRoZSBtb3N0IHNwZWNpZmljXG50YWcgcG9zc2libGUgdG8gYW4gZWxlbWVudOKAlGlmIHlvdXIgZ3JhbW1hciBjYW4ndCBlYXNpbHlcbmRpc3Rpbmd1aXNoIGEgY2VydGFpbiB0eXBlIG9mIGVsZW1lbnQgKHN1Y2ggYXMgYSBsb2NhbCB2YXJpYWJsZSksXG5pdCBpcyBva2F5IHRvIHN0eWxlIGl0IGFzIGl0cyBtb3JlIGdlbmVyYWwgdmFyaWFudCAoYSB2YXJpYWJsZSkuXG5cbkZvciB0YWdzIHRoYXQgZXh0ZW5kIHNvbWUgcGFyZW50IHRhZywgdGhlIGRvY3VtZW50YXRpb24gbGlua3MgdG9cbnRoZSBwYXJlbnQuXG4qL1xuY29uc3QgdGFncyA9IHtcbiAgICAvKipcbiAgICBBIGNvbW1lbnQuXG4gICAgKi9cbiAgICBjb21tZW50LFxuICAgIC8qKlxuICAgIEEgbGluZSBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgbGluZUNvbW1lbnQ6IHQoY29tbWVudCksXG4gICAgLyoqXG4gICAgQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgYmxvY2tDb21tZW50OiB0KGNvbW1lbnQpLFxuICAgIC8qKlxuICAgIEEgZG9jdW1lbnRhdGlvbiBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgZG9jQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvKipcbiAgICBBbnkga2luZCBvZiBpZGVudGlmaWVyLlxuICAgICovXG4gICAgbmFtZSxcbiAgICAvKipcbiAgICBUaGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSBvZiBhIHZhcmlhYmxlLlxuICAgICovXG4gICAgdmFyaWFibGVOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgdHlwZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgdHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgIC8qKlxuICAgIEEgdGFnIG5hbWUgKHN1YnRhZyBvZiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKSkuXG4gICAgKi9cbiAgICB0YWdOYW1lOiB0KHR5cGVOYW1lKSxcbiAgICAvKipcbiAgICBBIHByb3BlcnR5IG9yIGZpZWxkIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSxcbiAgICAvKipcbiAgICBBbiBhdHRyaWJ1dGUgbmFtZSAoc3VidGFnIG9mIFtgcHJvcGVydHlOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkpLlxuICAgICovXG4gICAgYXR0cmlidXRlTmFtZTogdChwcm9wZXJ0eU5hbWUpLFxuICAgIC8qKlxuICAgIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgY2xhc3MuXG4gICAgKi9cbiAgICBjbGFzc05hbWU6IHQobmFtZSksXG4gICAgLyoqXG4gICAgQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgbGFiZWxOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgbmFtZXNwYWNlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBuYW1lc3BhY2U6IHQobmFtZSksXG4gICAgLyoqXG4gICAgVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSBtYWNyby5cbiAgICAqL1xuICAgIG1hY3JvTmFtZTogdChuYW1lKSxcbiAgICAvKipcbiAgICBBIGxpdGVyYWwgdmFsdWUuXG4gICAgKi9cbiAgICBsaXRlcmFsLFxuICAgIC8qKlxuICAgIEEgc3RyaW5nIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICBzdHJpbmcsXG4gICAgLyoqXG4gICAgQSBkb2N1bWVudGF0aW9uIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpLlxuICAgICovXG4gICAgZG9jU3RyaW5nOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBjaGFyYWN0ZXIgbGl0ZXJhbCAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGNoYXJhY3RlcjogdChzdHJpbmcpLFxuICAgIC8qKlxuICAgIEFuIGF0dHJpYnV0ZSB2YWx1ZSAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGF0dHJpYnV0ZVZhbHVlOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBudW1iZXIgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIG51bWJlcixcbiAgICAvKipcbiAgICBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuXG4gICAgKi9cbiAgICBpbnRlZ2VyOiB0KG51bWJlciksXG4gICAgLyoqXG4gICAgQSBmbG9hdGluZy1wb2ludCBbbnVtYmVyXSgjaGlnaGxpZ2h0LnRhZ3MubnVtYmVyKSBsaXRlcmFsLlxuICAgICovXG4gICAgZmxvYXQ6IHQobnVtYmVyKSxcbiAgICAvKipcbiAgICBBIGJvb2xlYW4gW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGJvb2w6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICByZWdleHA6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQW4gZXNjYXBlIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCksIGZvciBleGFtcGxlIGFcbiAgICBiYWNrc2xhc2ggZXNjYXBlIGluIGEgc3RyaW5nLlxuICAgICovXG4gICAgZXNjYXBlOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgY29sb3IgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGNvbG9yOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgVVJMIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICB1cmw6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQSBsYW5ndWFnZSBrZXl3b3JkLlxuICAgICovXG4gICAga2V5d29yZCxcbiAgICAvKipcbiAgICBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgdGhlIHNlbGYgb3IgdGhpc1xuICAgIG9iamVjdC5cbiAgICAqL1xuICAgIHNlbGY6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgVGhlIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgZm9yIG51bGwuXG4gICAgKi9cbiAgICBudWxsOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBkZW5vdGluZyBzb21lIGF0b21pYyB2YWx1ZS5cbiAgICAqL1xuICAgIGF0b206IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgcmVwcmVzZW50cyBhIHVuaXQuXG4gICAgKi9cbiAgICB1bml0OiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgbW9kaWZpZXIgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKS5cbiAgICAqL1xuICAgIG1vZGlmaWVyOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSB0aGF0IGFjdHMgYXMgYW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcktleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBjb250cm9sLWZsb3cgcmVsYXRlZCBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLlxuICAgICovXG4gICAgY29udHJvbEtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgZGVmaW5lcyBzb21ldGhpbmcuXG4gICAgKi9cbiAgICBkZWZpbml0aW9uS2V5d29yZDogdChrZXl3b3JkKSxcbiAgICAvKipcbiAgICBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgcmVsYXRlZCB0byBkZWZpbmluZyBvclxuICAgIGludGVyZmFjaW5nIHdpdGggbW9kdWxlcy5cbiAgICAqL1xuICAgIG1vZHVsZUtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcixcbiAgICAvKipcbiAgICBBbiBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZXJlZmVyZW5jZXMgc29tZXRoaW5nLlxuICAgICovXG4gICAgZGVyZWZPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQXJpdGhtZXRpYy1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGFyaXRobWV0aWNPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgTG9naWNhbCBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuXG4gICAgKi9cbiAgICBsb2dpY09wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBCaXQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgICovXG4gICAgYml0d2lzZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBDb21wYXJpc29uIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbXBhcmVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgW09wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpIHRoYXQgdXBkYXRlcyBpdHMgb3BlcmFuZC5cbiAgICAqL1xuICAgIHVwZGF0ZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy5cbiAgICAqL1xuICAgIGRlZmluaXRpb25PcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgVHlwZS1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIHR5cGVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQ29udHJvbC1mbG93IFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbnRyb2xPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgUHJvZ3JhbSBvciBtYXJrdXAgcHVuY3R1YXRpb24uXG4gICAgKi9cbiAgICBwdW5jdHVhdGlvbixcbiAgICAvKipcbiAgICBbUHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikgdGhhdCBzZXBhcmF0ZXNcbiAgICB0aGluZ3MuXG4gICAgKi9cbiAgICBzZXBhcmF0b3I6IHQocHVuY3R1YXRpb24pLFxuICAgIC8qKlxuICAgIEJyYWNrZXQtc3R5bGUgW3B1bmN0dWF0aW9uXSgjaGlnaGxpZ2h0LnRhZ3MucHVuY3R1YXRpb24pLlxuICAgICovXG4gICAgYnJhY2tldCxcbiAgICAvKipcbiAgICBBbmdsZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgPGAgYW5kIGA+YFxuICAgIHRva2VucykuXG4gICAgKi9cbiAgICBhbmdsZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgU3F1YXJlIFticmFja2V0c10oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpICh1c3VhbGx5IGBbYCBhbmQgYF1gXG4gICAgdG9rZW5zKS5cbiAgICAqL1xuICAgIHNxdWFyZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgUGFyZW50aGVzZXMgKHVzdWFsbHkgYChgIGFuZCBgKWAgdG9rZW5zKS4gU3VidGFnIG9mXG4gICAgW2JyYWNrZXRdKCNoaWdobGlnaHQudGFncy5icmFja2V0KS5cbiAgICAqL1xuICAgIHBhcmVuOiB0KGJyYWNrZXQpLFxuICAgIC8qKlxuICAgIEJyYWNlcyAodXN1YWxseSBge2AgYW5kIGB9YCB0b2tlbnMpLiBTdWJ0YWcgb2ZcbiAgICBbYnJhY2tldF0oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpLlxuICAgICovXG4gICAgYnJhY2U6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgQ29udGVudCwgZm9yIGV4YW1wbGUgcGxhaW4gdGV4dCBpbiBYTUwgb3IgbWFya3VwIGRvY3VtZW50cy5cbiAgICAqL1xuICAgIGNvbnRlbnQsXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLlxuICAgICovXG4gICAgaGVhZGluZyxcbiAgICAvKipcbiAgICBBIGxldmVsIDEgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmcxOiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgMiBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzI6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCAzIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nMzogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIGxldmVsIDQgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmc0OiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgNSBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzU6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCA2IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nNjogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIHByb3NlIFtjb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgc2VwYXJhdG9yIChzdWNoIGFzIGEgaG9yaXpvbnRhbCBydWxlKS5cbiAgICAqL1xuICAgIGNvbnRlbnRTZXBhcmF0b3I6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBsaXN0LlxuICAgICovXG4gICAgbGlzdDogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIHF1b3RlLlxuICAgICovXG4gICAgcXVvdGU6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIGVtcGhhc2l6ZWQuXG4gICAgKi9cbiAgICBlbXBoYXNpczogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgc3R5bGVkIHN0cm9uZy5cbiAgICAqL1xuICAgIHN0cm9uZzogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgcGFydCBvZiBhIGxpbmsuXG4gICAgKi9cbiAgICBsaW5rOiB0KGNvbnRlbnQpLFxuICAgIC8qKlxuICAgIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgYXMgY29kZSBvclxuICAgIG1vbm9zcGFjZS5cbiAgICAqL1xuICAgIG1vbm9zcGFjZTogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaGFzIGEgc3RyaWtlLXRocm91Z2hcbiAgICBzdHlsZS5cbiAgICAqL1xuICAgIHN0cmlrZXRocm91Z2g6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuXG4gICAgKi9cbiAgICBpbnNlcnRlZDogdCgpLFxuICAgIC8qKlxuICAgIERlbGV0ZWQgdGV4dC5cbiAgICAqL1xuICAgIGRlbGV0ZWQ6IHQoKSxcbiAgICAvKipcbiAgICBDaGFuZ2VkIHRleHQuXG4gICAgKi9cbiAgICBjaGFuZ2VkOiB0KCksXG4gICAgLyoqXG4gICAgQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LlxuICAgICovXG4gICAgaW52YWxpZDogdCgpLFxuICAgIC8qKlxuICAgIE1ldGFkYXRhIG9yIG1ldGEtaW5zdHJ1Y3Rpb24uXG4gICAgKi9cbiAgICBtZXRhLFxuICAgIC8qKlxuICAgIFtNZXRhZGF0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpIHRoYXQgYXBwbGllcyB0byB0aGUgZW50aXJlXG4gICAgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBkb2N1bWVudE1ldGE6IHQobWV0YSksXG4gICAgLyoqXG4gICAgW01ldGFkYXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkgdGhhdCBhbm5vdGF0ZXMgb3IgYWRkc1xuICAgIGF0dHJpYnV0ZXMgdG8gYSBnaXZlbiBzeW50YWN0aWMgZWxlbWVudC5cbiAgICAqL1xuICAgIGFubm90YXRpb246IHQobWV0YSksXG4gICAgLyoqXG4gICAgUHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBvciBwcmVwcm9jZXNzb3IgZGlyZWN0aXZlLiBTdWJ0YWcgb2ZcbiAgICBbbWV0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpLlxuICAgICovXG4gICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0KG1ldGEpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgaW5kaWNhdGVzIHRoYXQgYVxuICAgIGdpdmVuIGVsZW1lbnQgaXMgYmVpbmcgZGVmaW5lZC4gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIHRoZVxuICAgIHZhcmlvdXMgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0YWdzLlxuICAgICovXG4gICAgZGVmaW5pdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKFwiZGVmaW5pdGlvblwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0XG4gICAgc29tZXRoaW5nIGlzIGNvbnN0YW50LiBNb3N0bHkgZXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoXG4gICAgW3ZhcmlhYmxlIG5hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKS5cbiAgICAqL1xuICAgIGNvbnN0YW50OiBUYWcuZGVmaW5lTW9kaWZpZXIoXCJjb25zdGFudFwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB1c2VkIHRvIGluZGljYXRlIHRoYXRcbiAgICBhIFt2YXJpYWJsZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgb3IgW3Byb3BlcnR5XG4gICAgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkgaXMgYmVpbmcgY2FsbGVkIG9yIGRlZmluZWRcbiAgICBhcyBhIGZ1bmN0aW9uLlxuICAgICovXG4gICAgZnVuY3Rpb246IFRhZy5kZWZpbmVNb2RpZmllcihcImZ1bmN0aW9uXCIpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG9cbiAgICBbbmFtZXNdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0byBpbmRpY2F0ZSB0aGF0IHRoZXkgYmVsb25nIHRvXG4gICAgdGhlIGxhbmd1YWdlJ3Mgc3RhbmRhcmQgZW52aXJvbm1lbnQuXG4gICAgKi9cbiAgICBzdGFuZGFyZDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3RhbmRhcmRcIiksXG4gICAgLyoqXG4gICAgW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgYSBnaXZlblxuICAgIFtuYW1lc10oI2hpZ2hsaWdodC50YWdzLm5hbWUpIGlzIGxvY2FsIHRvIHNvbWUgc2NvcGUuXG4gICAgKi9cbiAgICBsb2NhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwibG9jYWxcIiksXG4gICAgLyoqXG4gICAgQSBnZW5lcmljIHZhcmlhbnQgW21vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdFxuICAgIGNhbiBiZSB1c2VkIHRvIHRhZyBsYW5ndWFnZS1zcGVjaWZpYyBhbHRlcm5hdGl2ZSB2YXJpYW50cyBvZlxuICAgIHNvbWUgY29tbW9uIHRhZy4gSXQgaXMgcmVjb21tZW5kZWQgZm9yIHRoZW1lcyB0byBkZWZpbmUgc3BlY2lhbFxuICAgIGZvcm1zIG9mIGF0IGxlYXN0IHRoZSBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKSBhbmRcbiAgICBbdmFyaWFibGUgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgdGFncywgc2luY2UgdGhvc2VcbiAgICBjb21lIHVwIGEgbG90LlxuICAgICovXG4gICAgc3BlY2lhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3BlY2lhbFwiKVxufTtcbmZvciAobGV0IG5hbWUgaW4gdGFncykge1xuICAgIGxldCB2YWwgPSB0YWdzW25hbWVdO1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBUYWcpXG4gICAgICAgIHZhbC5uYW1lID0gbmFtZTtcbn1cbi8qKlxuVGhpcyBpcyBhIGhpZ2hsaWdodGVyIHRoYXQgYWRkcyBzdGFibGUsIHByZWRpY3RhYmxlIGNsYXNzZXMgdG9cbnRva2VucywgZm9yIHN0eWxpbmcgd2l0aCBleHRlcm5hbCBDU1MuXG5cblRoZSBmb2xsb3dpbmcgdGFncyBhcmUgbWFwcGVkIHRvIHRoZWlyIG5hbWUgcHJlZml4ZWQgd2l0aCBgXCJ0b2stXCJgXG4oZm9yIGV4YW1wbGUgYFwidG9rLWNvbW1lbnRcImApOlxuXG4qIFtgbGlua2BdKCNoaWdobGlnaHQudGFncy5saW5rKVxuKiBbYGhlYWRpbmdgXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZylcbiogW2BlbXBoYXNpc2BdKCNoaWdobGlnaHQudGFncy5lbXBoYXNpcylcbiogW2BzdHJvbmdgXSgjaGlnaGxpZ2h0LnRhZ3Muc3Ryb25nKVxuKiBbYGtleXdvcmRgXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZClcbiogW2BhdG9tYF0oI2hpZ2hsaWdodC50YWdzLmF0b20pXG4qIFtgYm9vbGBdKCNoaWdobGlnaHQudGFncy5ib29sKVxuKiBbYHVybGBdKCNoaWdobGlnaHQudGFncy51cmwpXG4qIFtgbGFiZWxOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmxhYmVsTmFtZSlcbiogW2BpbnNlcnRlZGBdKCNoaWdobGlnaHQudGFncy5pbnNlcnRlZClcbiogW2BkZWxldGVkYF0oI2hpZ2hsaWdodC50YWdzLmRlbGV0ZWQpXG4qIFtgbGl0ZXJhbGBdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKVxuKiBbYHN0cmluZ2BdKCNoaWdobGlnaHQudGFncy5zdHJpbmcpXG4qIFtgbnVtYmVyYF0oI2hpZ2hsaWdodC50YWdzLm51bWJlcilcbiogW2B2YXJpYWJsZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuKiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKVxuKiBbYG5hbWVzcGFjZWBdKCNoaWdobGlnaHQudGFncy5uYW1lc3BhY2UpXG4qIFtgY2xhc3NOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmNsYXNzTmFtZSlcbiogW2BtYWNyb05hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MubWFjcm9OYW1lKVxuKiBbYHByb3BlcnR5TmFtZWBdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpXG4qIFtgb3BlcmF0b3JgXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpXG4qIFtgY29tbWVudGBdKCNoaWdobGlnaHQudGFncy5jb21tZW50KVxuKiBbYG1ldGFgXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSlcbiogW2BwdW5jdHVhdGlvbmBdKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbilcbiogW2BpbnZhbGlkYF0oI2hpZ2hsaWdodC50YWdzLmludmFsaWQpXG5cbkluIGFkZGl0aW9uLCB0aGVzZSBtYXBwaW5ncyBhcmUgcHJvdmlkZWQ6XG5cbiogW2ByZWdleHBgXSgjaGlnaGxpZ2h0LnRhZ3MucmVnZXhwKSxcbiAgW2Blc2NhcGVgXSgjaGlnaGxpZ2h0LnRhZ3MuZXNjYXBlKSwgYW5kXG4gIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKVxuICBhcmUgbWFwcGVkIHRvIGBcInRvay1zdHJpbmcyXCJgXG4qIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lMlwiYFxuKiBbYGxvY2FsYF0oI2hpZ2hsaWdodC50YWdzLmxvY2FsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lIHRvay1sb2NhbFwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbiAgdG8gYFwidG9rLXZhcmlhYmxlTmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYChwcm9wZXJ0eU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSlcbiAgdG8gYFwidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKi9cbmNvbnN0IGNsYXNzSGlnaGxpZ2h0ZXIgPSB0YWdIaWdobGlnaHRlcihbXG4gICAgeyB0YWc6IHRhZ3MubGluaywgY2xhc3M6IFwidG9rLWxpbmtcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmhlYWRpbmcsIGNsYXNzOiBcInRvay1oZWFkaW5nXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcywgY2xhc3M6IFwidG9rLWVtcGhhc2lzXCIgfSxcbiAgICB7IHRhZzogdGFncy5zdHJvbmcsIGNsYXNzOiBcInRvay1zdHJvbmdcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmtleXdvcmQsIGNsYXNzOiBcInRvay1rZXl3b3JkXCIgfSxcbiAgICB7IHRhZzogdGFncy5hdG9tLCBjbGFzczogXCJ0b2stYXRvbVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuYm9vbCwgY2xhc3M6IFwidG9rLWJvb2xcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnVybCwgY2xhc3M6IFwidG9rLXVybFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGFiZWxOYW1lLCBjbGFzczogXCJ0b2stbGFiZWxOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5pbnNlcnRlZCwgY2xhc3M6IFwidG9rLWluc2VydGVkXCIgfSxcbiAgICB7IHRhZzogdGFncy5kZWxldGVkLCBjbGFzczogXCJ0b2stZGVsZXRlZFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGl0ZXJhbCwgY2xhc3M6IFwidG9rLWxpdGVyYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmluZywgY2xhc3M6IFwidG9rLXN0cmluZ1wiIH0sXG4gICAgeyB0YWc6IHRhZ3MubnVtYmVyLCBjbGFzczogXCJ0b2stbnVtYmVyXCIgfSxcbiAgICB7IHRhZzogW3RhZ3MucmVnZXhwLCB0YWdzLmVzY2FwZSwgdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sIGNsYXNzOiBcInRvay1zdHJpbmcyXCIgfSxcbiAgICB7IHRhZzogdGFncy52YXJpYWJsZU5hbWUsIGNsYXNzOiBcInRvay12YXJpYWJsZU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZSB0b2stbG9jYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogXCJ0b2stdmFyaWFibGVOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZTJcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy5wcm9wZXJ0eU5hbWUpLCBjbGFzczogXCJ0b2stcHJvcGVydHlOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy50eXBlTmFtZSwgY2xhc3M6IFwidG9rLXR5cGVOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5uYW1lc3BhY2UsIGNsYXNzOiBcInRvay1uYW1lc3BhY2VcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSwgY2xhc3M6IFwidG9rLWNsYXNzTmFtZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubWFjcm9OYW1lLCBjbGFzczogXCJ0b2stbWFjcm9OYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5wcm9wZXJ0eU5hbWUsIGNsYXNzOiBcInRvay1wcm9wZXJ0eU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLm9wZXJhdG9yLCBjbGFzczogXCJ0b2stb3BlcmF0b3JcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsIGNsYXNzOiBcInRvay1jb21tZW50XCIgfSxcbiAgICB7IHRhZzogdGFncy5tZXRhLCBjbGFzczogXCJ0b2stbWV0YVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuaW52YWxpZCwgY2xhc3M6IFwidG9rLWludmFsaWRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnB1bmN0dWF0aW9uLCBjbGFzczogXCJ0b2stcHVuY3R1YXRpb25cIiB9XG5dKTtcblxuZXhwb3J0IHsgVGFnLCBjbGFzc0hpZ2hsaWdodGVyLCBnZXRTdHlsZVRhZ3MsIGhpZ2hsaWdodENvZGUsIGhpZ2hsaWdodFRyZWUsIHN0eWxlVGFncywgdGFnSGlnaGxpZ2h0ZXIsIHRhZ3MgfTtcbiIsCiAgICAiaW1wb3J0IHsgTm9kZVByb3AsIEl0ZXJNb2RlLCBUcmVlLCBUcmVlRnJhZ21lbnQsIFBhcnNlciwgTm9kZVR5cGUsIE5vZGVTZXQgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcbmltcG9ydCB7IFN0YXRlRWZmZWN0LCBTdGF0ZUZpZWxkLCBGYWNldCwgRWRpdG9yU3RhdGUsIGNvdW50Q29sdW1uLCBjb21iaW5lQ29uZmlnLCBSYW5nZVNldCwgUmFuZ2VTZXRCdWlsZGVyLCBQcmVjIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgVmlld1BsdWdpbiwgbG9nRXhjZXB0aW9uLCBFZGl0b3JWaWV3LCBEZWNvcmF0aW9uLCBXaWRnZXRUeXBlLCBndXR0ZXIsIEd1dHRlck1hcmtlciwgRGlyZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyB0YWdzLCB0YWdIaWdobGlnaHRlciwgaGlnaGxpZ2h0VHJlZSwgc3R5bGVUYWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5pbXBvcnQgeyBTdHlsZU1vZHVsZSB9IGZyb20gJ3N0eWxlLW1vZCc7XG5cbnZhciBfYTtcbi8qKlxuTm9kZSBwcm9wIHN0b3JlZCBpbiBhIHBhcnNlcidzIHRvcCBzeW50YXggbm9kZSB0byBwcm92aWRlIHRoZVxuZmFjZXQgdGhhdCBzdG9yZXMgbGFuZ3VhZ2Utc3BlY2lmaWMgZGF0YSBmb3IgdGhhdCBsYW5ndWFnZS5cbiovXG5jb25zdCBsYW5ndWFnZURhdGFQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5IZWxwZXIgZnVuY3Rpb24gdG8gZGVmaW5lIGEgZmFjZXQgKHRvIGJlIGFkZGVkIHRvIHRoZSB0b3Agc3ludGF4XG5ub2RlKHMpIGZvciBhIGxhbmd1YWdlIHZpYVxuW2BsYW5ndWFnZURhdGFQcm9wYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZURhdGFQcm9wKSksIHRoYXQgd2lsbCBiZVxudXNlZCB0byBhc3NvY2lhdGUgbGFuZ3VhZ2UgZGF0YSB3aXRoIHRoZSBsYW5ndWFnZS4gWW91XG5wcm9iYWJseSBvbmx5IG5lZWQgdGhpcyB3aGVuIHN1YmNsYXNzaW5nXG5bYExhbmd1YWdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkuXG4qL1xuZnVuY3Rpb24gZGVmaW5lTGFuZ3VhZ2VGYWNldChiYXNlRGF0YSkge1xuICAgIHJldHVybiBGYWNldC5kZWZpbmUoe1xuICAgICAgICBjb21iaW5lOiBiYXNlRGF0YSA/IHZhbHVlcyA9PiB2YWx1ZXMuY29uY2F0KGJhc2VEYXRhKSA6IHVuZGVmaW5lZFxuICAgIH0pO1xufVxuLyoqXG5TeW50YXggbm9kZSBwcm9wIHVzZWQgdG8gcmVnaXN0ZXIgc3VibGFuZ3VhZ2VzLiBTaG91bGQgYmUgYWRkZWQgdG9cbnRoZSB0b3AgbGV2ZWwgbm9kZSB0eXBlIGZvciB0aGUgbGFuZ3VhZ2UuXG4qL1xuY29uc3Qgc3VibGFuZ3VhZ2VQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5BIGxhbmd1YWdlIG9iamVjdCBtYW5hZ2VzIHBhcnNpbmcgYW5kIHBlci1sYW5ndWFnZVxuW21ldGFkYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KS4gUGFyc2UgZGF0YSBpc1xubWFuYWdlZCBhcyBhIFtMZXplcl0oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldCkgdHJlZS4gVGhlIGNsYXNzXG5jYW4gYmUgdXNlZCBkaXJlY3RseSwgdmlhIHRoZSBbYExSTGFuZ3VhZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxSTGFuZ3VhZ2UpXG5zdWJjbGFzcyBmb3IgW0xlemVyXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0LykgTFIgcGFyc2Vycywgb3JcbnZpYSB0aGUgW2BTdHJlYW1MYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuU3RyZWFtTGFuZ3VhZ2UpIHN1YmNsYXNzXG5mb3Igc3RyZWFtIHBhcnNlcnMuXG4qL1xuY2xhc3MgTGFuZ3VhZ2Uge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIGxhbmd1YWdlIG9iamVjdC4gSWYgeW91IG5lZWQgdG8gaW52b2tlIHRoaXNcbiAgICBkaXJlY3RseSwgZmlyc3QgZGVmaW5lIGEgZGF0YSBmYWNldCB3aXRoXG4gICAgW2BkZWZpbmVMYW5ndWFnZUZhY2V0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5kZWZpbmVMYW5ndWFnZUZhY2V0KSwgYW5kIHRoZW5cbiAgICBjb25maWd1cmUgeW91ciBwYXJzZXIgdG8gW2F0dGFjaF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZURhdGFQcm9wKSBpdFxuICAgIHRvIHRoZSBsYW5ndWFnZSdzIG91dGVyIHN5bnRheCBub2RlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIFtsYW5ndWFnZSBkYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KSBmYWNldFxuICAgIHVzZWQgZm9yIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBkYXRhLCBwYXJzZXIsIGV4dHJhRXh0ZW5zaW9ucyA9IFtdLCBcbiAgICAvKipcbiAgICBBIGxhbmd1YWdlIG5hbWUuXG4gICAgKi9cbiAgICBuYW1lID0gXCJcIikge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAvLyBLbHVkZ2UgdG8gZGVmaW5lIEVkaXRvclN0YXRlLnRyZWUgYXMgYSBkZWJ1Z2dpbmcgaGVscGVyLFxuICAgICAgICAvLyB3aXRob3V0IHRoZSBFZGl0b3JTdGF0ZSBwYWNrYWdlIGFjdHVhbGx5IGtub3dpbmcgYWJvdXRcbiAgICAgICAgLy8gbGFuZ3VhZ2VzIGFuZCBsZXplciB0cmVlcy5cbiAgICAgICAgaWYgKCFFZGl0b3JTdGF0ZS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJ0cmVlXCIpKVxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVkaXRvclN0YXRlLnByb3RvdHlwZSwgXCJ0cmVlXCIsIHsgZ2V0KCkgeyByZXR1cm4gc3ludGF4VHJlZSh0aGlzKTsgfSB9KTtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gW1xuICAgICAgICAgICAgbGFuZ3VhZ2Uub2YodGhpcyksXG4gICAgICAgICAgICBFZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGEub2YoKHN0YXRlLCBwb3MsIHNpZGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wID0gdG9wTm9kZUF0KHN0YXRlLCBwb3MsIHNpZGUpLCBkYXRhID0gdG9wLnR5cGUucHJvcChsYW5ndWFnZURhdGFQcm9wKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IHN0YXRlLmZhY2V0KGRhdGEpLCBzdWIgPSB0b3AudHlwZS5wcm9wKHN1Ymxhbmd1YWdlUHJvcCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJOb2RlID0gdG9wLnJlc29sdmUocG9zIC0gdG9wLmZyb20sIHNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWJsYW5nIG9mIHN1YilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJsYW5nLnRlc3QoaW5uZXJOb2RlLCBzdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHN0YXRlLmZhY2V0KHN1YmxhbmcuZmFjZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJsYW5nLnR5cGUgPT0gXCJyZXBsYWNlXCIgPyBkYXRhIDogZGF0YS5jb25jYXQoYmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgXS5jb25jYXQoZXh0cmFFeHRlbnNpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUXVlcnkgd2hldGhlciB0aGlzIGxhbmd1YWdlIGlzIGFjdGl2ZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBpc0FjdGl2ZUF0KHN0YXRlLCBwb3MsIHNpZGUgPSAtMSkge1xuICAgICAgICByZXR1cm4gdG9wTm9kZUF0KHN0YXRlLCBwb3MsIHNpZGUpLnR5cGUucHJvcChsYW5ndWFnZURhdGFQcm9wKSA9PSB0aGlzLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGRvY3VtZW50IHJlZ2lvbnMgdGhhdCB3ZXJlIHBhcnNlZCB1c2luZyB0aGlzIGxhbmd1YWdlLlxuICAgIFRoZSByZXR1cm5lZCByZWdpb25zIHdpbGwgX2luY2x1ZGVfIGFueSBuZXN0ZWQgbGFuZ3VhZ2VzIHJvb3RlZFxuICAgIGluIHRoaXMgbGFuZ3VhZ2UsIHdoZW4gdGhvc2UgZXhpc3QuXG4gICAgKi9cbiAgICBmaW5kUmVnaW9ucyhzdGF0ZSkge1xuICAgICAgICBsZXQgbGFuZyA9IHN0YXRlLmZhY2V0KGxhbmd1YWdlKTtcbiAgICAgICAgaWYgKChsYW5nID09PSBudWxsIHx8IGxhbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhbmcuZGF0YSkgPT0gdGhpcy5kYXRhKVxuICAgICAgICAgICAgcmV0dXJuIFt7IGZyb206IDAsIHRvOiBzdGF0ZS5kb2MubGVuZ3RoIH1dO1xuICAgICAgICBpZiAoIWxhbmcgfHwgIWxhbmcuYWxsb3dzTmVzdGluZylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgZXhwbG9yZSA9ICh0cmVlLCBmcm9tKSA9PiB7XG4gICAgICAgICAgICBpZiAodHJlZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbSwgdG86IGZyb20gKyB0cmVlLmxlbmd0aCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbW91bnQgPSB0cmVlLnByb3AoTm9kZVByb3AubW91bnRlZCk7XG4gICAgICAgICAgICBpZiAobW91bnQpIHtcbiAgICAgICAgICAgICAgICBpZiAobW91bnQudHJlZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW91bnQub3ZlcmxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgbW91bnQub3ZlcmxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGZyb206IHIuZnJvbSArIGZyb20sIHRvOiByLnRvICsgZnJvbSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBmcm9tOiBmcm9tLCB0bzogZnJvbSArIHRyZWUubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vdW50Lm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBleHBsb3JlKG1vdW50LnRyZWUsIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSArIGZyb20pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IHNpemUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoID0gdHJlZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggaW5zdGFuY2VvZiBUcmVlKVxuICAgICAgICAgICAgICAgICAgICBleHBsb3JlKGNoLCB0cmVlLnBvc2l0aW9uc1tpXSArIGZyb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBleHBsb3JlKHN5bnRheFRyZWUoc3RhdGUpLCAwKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBsYW5ndWFnZSBhbGxvd3MgbmVzdGVkIGxhbmd1YWdlcy4gVGhlXG4gICAgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIHRydWUuXG4gICAgKi9cbiAgICBnZXQgYWxsb3dzTmVzdGluZygpIHsgcmV0dXJuIHRydWU7IH1cbn1cbi8qKlxuQGludGVybmFsXG4qL1xuTGFuZ3VhZ2Uuc2V0U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5mdW5jdGlvbiB0b3BOb2RlQXQoc3RhdGUsIHBvcywgc2lkZSkge1xuICAgIGxldCB0b3BMYW5nID0gc3RhdGUuZmFjZXQobGFuZ3VhZ2UpLCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSkudG9wTm9kZTtcbiAgICBpZiAoIXRvcExhbmcgfHwgdG9wTGFuZy5hbGxvd3NOZXN0aW5nKSB7XG4gICAgICAgIGZvciAobGV0IG5vZGUgPSB0cmVlOyBub2RlOyBub2RlID0gbm9kZS5lbnRlcihwb3MsIHNpZGUsIEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzKSlcbiAgICAgICAgICAgIGlmIChub2RlLnR5cGUuaXNUb3ApXG4gICAgICAgICAgICAgICAgdHJlZSA9IG5vZGU7XG4gICAgfVxuICAgIHJldHVybiB0cmVlO1xufVxuLyoqXG5BIHN1YmNsYXNzIG9mIFtgTGFuZ3VhZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKSBmb3IgdXNlIHdpdGggTGV6ZXJcbltMUiBwYXJzZXJzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2xyLkxSUGFyc2VyKVxucGFyc2Vycy5cbiovXG5jbGFzcyBMUkxhbmd1YWdlIGV4dGVuZHMgTGFuZ3VhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHBhcnNlciwgbmFtZSkge1xuICAgICAgICBzdXBlcihkYXRhLCBwYXJzZXIsIFtdLCBuYW1lKTtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIGxhbmd1YWdlIGZyb20gYSBwYXJzZXIuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBkZWZpbmVMYW5ndWFnZUZhY2V0KHNwZWMubGFuZ3VhZ2VEYXRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMUkxhbmd1YWdlKGRhdGEsIHNwZWMucGFyc2VyLmNvbmZpZ3VyZSh7XG4gICAgICAgICAgICBwcm9wczogW2xhbmd1YWdlRGF0YVByb3AuYWRkKHR5cGUgPT4gdHlwZS5pc1RvcCA/IGRhdGEgOiB1bmRlZmluZWQpXVxuICAgICAgICB9KSwgc3BlYy5uYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoaXMgbGFuZ3VhZ2Ugd2l0aCBhIHJlY29uZmlndXJlZFxuICAgIHZlcnNpb24gb2YgaXRzIHBhcnNlciBhbmQgb3B0aW9uYWxseSBhIG5ldyBuYW1lLlxuICAgICovXG4gICAgY29uZmlndXJlKG9wdGlvbnMsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMUkxhbmd1YWdlKHRoaXMuZGF0YSwgdGhpcy5wYXJzZXIuY29uZmlndXJlKG9wdGlvbnMpLCBuYW1lIHx8IHRoaXMubmFtZSk7XG4gICAgfVxuICAgIGdldCBhbGxvd3NOZXN0aW5nKCkgeyByZXR1cm4gdGhpcy5wYXJzZXIuaGFzV3JhcHBlcnMoKTsgfVxufVxuLyoqXG5HZXQgdGhlIHN5bnRheCB0cmVlIGZvciBhIHN0YXRlLCB3aGljaCBpcyB0aGUgY3VycmVudCAocG9zc2libHlcbmluY29tcGxldGUpIHBhcnNlIHRyZWUgb2YgdGhlIGFjdGl2ZVxuW2xhbmd1YWdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKSwgb3IgdGhlIGVtcHR5IHRyZWUgaWYgdGhlcmUgaXMgbm9cbmxhbmd1YWdlIGF2YWlsYWJsZS5cbiovXG5mdW5jdGlvbiBzeW50YXhUcmVlKHN0YXRlKSB7XG4gICAgbGV0IGZpZWxkID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUsIGZhbHNlKTtcbiAgICByZXR1cm4gZmllbGQgPyBmaWVsZC50cmVlIDogVHJlZS5lbXB0eTtcbn1cbi8qKlxuVHJ5IHRvIGdldCBhIHBhcnNlIHRyZWUgdGhhdCBzcGFucyBhdCBsZWFzdCB1cCB0byBgdXB0b2AuIFRoZVxubWV0aG9kIHdpbGwgZG8gYXQgbW9zdCBgdGltZW91dGAgbWlsbGlzZWNvbmRzIG9mIHdvcmsgdG8gcGFyc2VcbnVwIHRvIHRoYXQgcG9pbnQgaWYgdGhlIHRyZWUgaXNuJ3QgYWxyZWFkeSBhdmFpbGFibGUuXG4qL1xuZnVuY3Rpb24gZW5zdXJlU3ludGF4VHJlZShzdGF0ZSwgdXB0bywgdGltZW91dCA9IDUwKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBwYXJzZSA9IChfYSA9IHN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250ZXh0O1xuICAgIGlmICghcGFyc2UpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBvbGRWaWVwb3J0ID0gcGFyc2Uudmlld3BvcnQ7XG4gICAgcGFyc2UudXBkYXRlVmlld3BvcnQoeyBmcm9tOiAwLCB0bzogdXB0byB9KTtcbiAgICBsZXQgcmVzdWx0ID0gcGFyc2UuaXNEb25lKHVwdG8pIHx8IHBhcnNlLndvcmsodGltZW91dCwgdXB0bykgPyBwYXJzZS50cmVlIDogbnVsbDtcbiAgICBwYXJzZS51cGRhdGVWaWV3cG9ydChvbGRWaWVwb3J0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG5RdWVyaWVzIHdoZXRoZXIgdGhlcmUgaXMgYSBmdWxsIHN5bnRheCB0cmVlIGF2YWlsYWJsZSB1cCB0byB0aGVcbmdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLiBJZiB0aGVyZSBpc24ndCwgdGhlIGJhY2tncm91bmQgcGFyc2VcbnByb2Nlc3MgX21pZ2h0XyBzdGlsbCBiZSB3b3JraW5nIGFuZCB1cGRhdGUgdGhlIHRyZWUgZnVydGhlciwgYnV0XG50aGVyZSBpcyBubyBndWFyYW50ZWUgb2YgdGhhdOKAlHRoZSBwYXJzZXIgd2lsbCBbc3RvcFxud29ya2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5zeW50YXhQYXJzZXJSdW5uaW5nKSB3aGVuIGl0IGhhcyBzcGVudCBhXG5jZXJ0YWluIGFtb3VudCBvZiB0aW1lIG9yIGhhcyBtb3ZlZCBiZXlvbmQgdGhlIHZpc2libGUgdmlld3BvcnQuXG5BbHdheXMgcmV0dXJucyBmYWxzZSBpZiBubyBsYW5ndWFnZSBoYXMgYmVlbiBlbmFibGVkLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFRyZWVBdmFpbGFibGUoc3RhdGUsIHVwdG8gPSBzdGF0ZS5kb2MubGVuZ3RoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRleHQuaXNEb25lKHVwdG8pKSB8fCBmYWxzZTtcbn1cbi8qKlxuTW92ZSBwYXJzaW5nIGZvcndhcmQsIGFuZCB1cGRhdGUgdGhlIGVkaXRvciBzdGF0ZSBhZnRlcndhcmRzIHRvXG5yZWZsZWN0IHRoZSBuZXcgdHJlZS4gV2lsbCB3b3JrIGZvciBhdCBtb3N0IGB0aW1lb3V0YFxubWlsbGlzZWNvbmRzLiBSZXR1cm5zIHRydWUgaWYgdGhlIHBhcnNlciBtYW5hZ2VkIGdldCB0byB0aGUgZ2l2ZW5cbnBvc2l0aW9uIGluIHRoYXQgdGltZS5cbiovXG5mdW5jdGlvbiBmb3JjZVBhcnNpbmcodmlldywgdXB0byA9IHZpZXcudmlld3BvcnQudG8sIHRpbWVvdXQgPSAxMDApIHtcbiAgICBsZXQgc3VjY2VzcyA9IGVuc3VyZVN5bnRheFRyZWUodmlldy5zdGF0ZSwgdXB0bywgdGltZW91dCk7XG4gICAgaWYgKHN1Y2Nlc3MgIT0gc3ludGF4VHJlZSh2aWV3LnN0YXRlKSlcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7fSk7XG4gICAgcmV0dXJuICEhc3VjY2Vzcztcbn1cbi8qKlxuVGVsbHMgeW91IHdoZXRoZXIgdGhlIGxhbmd1YWdlIHBhcnNlciBpcyBwbGFubmluZyB0byBkbyBtb3JlXG5wYXJzaW5nIHdvcmsgKGluIGEgYHJlcXVlc3RJZGxlQ2FsbGJhY2tgIHBzZXVkby10aHJlYWQpIG9yIGhhc1xuc3RvcHBlZCBydW5uaW5nLCBlaXRoZXIgYmVjYXVzZSBpdCBwYXJzZWQgdGhlIGVudGlyZSBkb2N1bWVudCxcbmJlY2F1c2UgaXQgc3BlbnQgdG9vIG11Y2ggdGltZSBhbmQgd2FzIGN1dCBvZmYsIG9yIGJlY2F1c2UgdGhlcmVcbmlzIG5vIGxhbmd1YWdlIHBhcnNlciBlbmFibGVkLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFBhcnNlclJ1bm5pbmcodmlldykge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKChfYSA9IHZpZXcucGx1Z2luKHBhcnNlV29ya2VyKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzV29ya2luZygpKSB8fCBmYWxzZTtcbn1cbi8qKlxuTGV6ZXItc3R5bGVcbltgSW5wdXRgXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2NvbW1vbi5JbnB1dClcbm9iamVjdCBmb3IgYSBbYFRleHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRleHQpIG9iamVjdC5cbiovXG5jbGFzcyBEb2NJbnB1dCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGlucHV0IG9iamVjdCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgICB0aGlzLmN1cnNvclBvcyA9IDA7XG4gICAgICAgIHRoaXMuc3RyaW5nID0gXCJcIjtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBkb2MuaXRlcigpO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy5kb2MubGVuZ3RoOyB9XG4gICAgc3luY1RvKHBvcykge1xuICAgICAgICB0aGlzLnN0cmluZyA9IHRoaXMuY3Vyc29yLm5leHQocG9zIC0gdGhpcy5jdXJzb3JQb3MpLnZhbHVlO1xuICAgICAgICB0aGlzLmN1cnNvclBvcyA9IHBvcyArIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Vyc29yUG9zIC0gdGhpcy5zdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjaHVuayhwb3MpIHtcbiAgICAgICAgdGhpcy5zeW5jVG8ocG9zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nO1xuICAgIH1cbiAgICBnZXQgbGluZUNodW5rcygpIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZWFkKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBzdHJpbmdTdGFydCA9IHRoaXMuY3Vyc29yUG9zIC0gdGhpcy5zdHJpbmcubGVuZ3RoO1xuICAgICAgICBpZiAoZnJvbSA8IHN0cmluZ1N0YXJ0IHx8IHRvID49IHRoaXMuY3Vyc29yUG9zKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKGZyb20gLSBzdHJpbmdTdGFydCwgdG8gLSBzdHJpbmdTdGFydCk7XG4gICAgfVxufVxubGV0IGN1cnJlbnRDb250ZXh0ID0gbnVsbDtcbi8qKlxuQSBwYXJzZSBjb250ZXh0IHByb3ZpZGVkIHRvIHBhcnNlcnMgd29ya2luZyBvbiB0aGUgZWRpdG9yIGNvbnRlbnQuXG4qL1xuY2xhc3MgUGFyc2VDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBUcmVlIGZyYWdtZW50cyB0aGF0IGNhbiBiZSByZXVzZWQgYnkgaW5jcmVtZW50YWwgcmUtcGFyc2VzLlxuICAgICovXG4gICAgZnJhZ21lbnRzID0gW10sIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdHJlZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0cmVlTGVuLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBlZGl0b3Igdmlld3BvcnQgKG9yIHNvbWUgb3ZlcmFwcHJveGltYXRpb25cbiAgICB0aGVyZW9mKS4gSW50ZW5kZWQgdG8gYmUgdXNlZCBmb3Igb3Bwb3J0dW5pc3RpY2FsbHkgYXZvaWRpbmdcbiAgICB3b3JrIChpbiB3aGljaCBjYXNlXG4gICAgW2Bza2lwVW50aWxJblZpZXdgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLlBhcnNlQ29udGV4dC5za2lwVW50aWxJblZpZXcpXG4gICAgc2hvdWxkIGJlIGNhbGxlZCB0byBtYWtlIHN1cmUgdGhlIHBhcnNlciBpcyByZXN0YXJ0ZWQgd2hlbiB0aGVcbiAgICBza2lwcGVkIHJlZ2lvbiBiZWNvbWVzIHZpc2libGUpLlxuICAgICovXG4gICAgdmlld3BvcnQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2tpcHBlZCwgXG4gICAgLyoqXG4gICAgVGhpcyBpcyB3aGVyZSBza2lwcGluZyBwYXJzZXJzIGNhbiByZWdpc3RlciBhIHByb21pc2UgdGhhdCxcbiAgICB3aGVuIHJlc29sdmVkLCB3aWxsIHNjaGVkdWxlIGEgbmV3IHBhcnNlLiBJdCBpcyBjbGVhcmVkIHdoZW5cbiAgICB0aGUgcGFyc2Ugd29ya2VyIHBpY2tzIHVwIHRoZSBwcm9taXNlLiBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNjaGVkdWxlT24pIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBmcmFnbWVudHM7XG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgIHRoaXMudHJlZUxlbiA9IHRyZWVMZW47XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgdGhpcy5za2lwcGVkID0gc2tpcHBlZDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU9uID0gc2NoZWR1bGVPbjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZW1wU2tpcHBlZCA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUocGFyc2VyLCBzdGF0ZSwgdmlld3BvcnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZUNvbnRleHQocGFyc2VyLCBzdGF0ZSwgW10sIFRyZWUuZW1wdHksIDAsIHZpZXdwb3J0LCBbXSwgbnVsbCk7XG4gICAgfVxuICAgIHN0YXJ0UGFyc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlci5zdGFydFBhcnNlKG5ldyBEb2NJbnB1dCh0aGlzLnN0YXRlLmRvYyksIHRoaXMuZnJhZ21lbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB3b3JrKHVudGlsLCB1cHRvKSB7XG4gICAgICAgIGlmICh1cHRvICE9IG51bGwgJiYgdXB0byA+PSB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpXG4gICAgICAgICAgICB1cHRvID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy50cmVlICE9IFRyZWUuZW1wdHkgJiYgdGhpcy5pc0RvbmUodXB0byAhPT0gbnVsbCAmJiB1cHRvICE9PSB2b2lkIDAgPyB1cHRvIDogdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKSkge1xuICAgICAgICAgICAgdGhpcy50YWtlVHJlZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aENvbnRleHQoKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1bnRpbCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZFRpbWUgPSBEYXRlLm5vdygpICsgdW50aWw7XG4gICAgICAgICAgICAgICAgdW50aWwgPSAoKSA9PiBEYXRlLm5vdygpID4gZW5kVGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJzZSlcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5zdGFydFBhcnNlKCk7XG4gICAgICAgICAgICBpZiAodXB0byAhPSBudWxsICYmICh0aGlzLnBhcnNlLnN0b3BwZWRBdCA9PSBudWxsIHx8IHRoaXMucGFyc2Uuc3RvcHBlZEF0ID4gdXB0bykgJiZcbiAgICAgICAgICAgICAgICB1cHRvIDwgdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2Uuc3RvcEF0KHVwdG8pO1xuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5wYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSB0aGlzLndpdGhvdXRUZW1wU2tpcHBlZChUcmVlRnJhZ21lbnQuYWRkVHJlZShkb25lLCB0aGlzLmZyYWdtZW50cywgdGhpcy5wYXJzZS5zdG9wcGVkQXQgIT0gbnVsbCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVMZW4gPSAoX2EgPSB0aGlzLnBhcnNlLnN0b3BwZWRBdCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5zdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWUgPSBkb25lO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJlZUxlbiA8ICh1cHRvICE9PSBudWxsICYmIHVwdG8gIT09IHZvaWQgMCA/IHVwdG8gOiB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMuc3RhcnRQYXJzZSgpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVudGlsKCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdGFrZVRyZWUoKSB7XG4gICAgICAgIGxldCBwb3MsIHRyZWU7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlICYmIChwb3MgPSB0aGlzLnBhcnNlLnBhcnNlZFBvcykgPj0gdGhpcy50cmVlTGVuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJzZS5zdG9wcGVkQXQgPT0gbnVsbCB8fCB0aGlzLnBhcnNlLnN0b3BwZWRBdCA+IHBvcylcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlLnN0b3BBdChwb3MpO1xuICAgICAgICAgICAgdGhpcy53aXRoQ29udGV4dCgoKSA9PiB7IHdoaWxlICghKHRyZWUgPSB0aGlzLnBhcnNlLmFkdmFuY2UoKSkpIHsgfSB9KTtcbiAgICAgICAgICAgIHRoaXMudHJlZUxlbiA9IHBvcztcbiAgICAgICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50cyA9IHRoaXMud2l0aG91dFRlbXBTa2lwcGVkKFRyZWVGcmFnbWVudC5hZGRUcmVlKHRoaXMudHJlZSwgdGhpcy5mcmFnbWVudHMsIHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhDb250ZXh0KGYpIHtcbiAgICAgICAgbGV0IHByZXYgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgY3VycmVudENvbnRleHQgPSB0aGlzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gcHJldjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRob3V0VGVtcFNraXBwZWQoZnJhZ21lbnRzKSB7XG4gICAgICAgIGZvciAobGV0IHI7IHIgPSB0aGlzLnRlbXBTa2lwcGVkLnBvcCgpOylcbiAgICAgICAgICAgIGZyYWdtZW50cyA9IGN1dEZyYWdtZW50cyhmcmFnbWVudHMsIHIuZnJvbSwgci50byk7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2hhbmdlcyhjaGFuZ2VzLCBuZXdTdGF0ZSkge1xuICAgICAgICBsZXQgeyBmcmFnbWVudHMsIHRyZWUsIHRyZWVMZW4sIHZpZXdwb3J0LCBza2lwcGVkIH0gPSB0aGlzO1xuICAgICAgICB0aGlzLnRha2VUcmVlKCk7XG4gICAgICAgIGlmICghY2hhbmdlcy5lbXB0eSkge1xuICAgICAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICAgICAgY2hhbmdlcy5pdGVyQ2hhbmdlZFJhbmdlcygoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikgPT4gcmFuZ2VzLnB1c2goeyBmcm9tQSwgdG9BLCBmcm9tQiwgdG9CIH0pKTtcbiAgICAgICAgICAgIGZyYWdtZW50cyA9IFRyZWVGcmFnbWVudC5hcHBseUNoYW5nZXMoZnJhZ21lbnRzLCByYW5nZXMpO1xuICAgICAgICAgICAgdHJlZSA9IFRyZWUuZW1wdHk7XG4gICAgICAgICAgICB0cmVlTGVuID0gMDtcbiAgICAgICAgICAgIHZpZXdwb3J0ID0geyBmcm9tOiBjaGFuZ2VzLm1hcFBvcyh2aWV3cG9ydC5mcm9tLCAtMSksIHRvOiBjaGFuZ2VzLm1hcFBvcyh2aWV3cG9ydC50bywgMSkgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNraXBwZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2tpcHBlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgdGhpcy5za2lwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gY2hhbmdlcy5tYXBQb3Moci5mcm9tLCAxKSwgdG8gPSBjaGFuZ2VzLm1hcFBvcyhyLnRvLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tIDwgdG8pXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwcGVkLnB1c2goeyBmcm9tLCB0byB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZUNvbnRleHQodGhpcy5wYXJzZXIsIG5ld1N0YXRlLCBmcmFnbWVudHMsIHRyZWUsIHRyZWVMZW4sIHZpZXdwb3J0LCBza2lwcGVkLCB0aGlzLnNjaGVkdWxlT24pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHVwZGF0ZVZpZXdwb3J0KHZpZXdwb3J0KSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0LmZyb20gPT0gdmlld3BvcnQuZnJvbSAmJiB0aGlzLnZpZXdwb3J0LnRvID09IHZpZXdwb3J0LnRvKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIGxldCBzdGFydExlbiA9IHRoaXMuc2tpcHBlZC5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5za2lwcGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gdGhpcy5za2lwcGVkW2ldO1xuICAgICAgICAgICAgaWYgKGZyb20gPCB2aWV3cG9ydC50byAmJiB0byA+IHZpZXdwb3J0LmZyb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGN1dEZyYWdtZW50cyh0aGlzLmZyYWdtZW50cywgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcHBlZC5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5za2lwcGVkLmxlbmd0aCA+PSBzdGFydExlbilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyc2UpIHtcbiAgICAgICAgICAgIHRoaXMudGFrZVRyZWUoKTtcbiAgICAgICAgICAgIHRoaXMucGFyc2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIE5vdGlmeSB0aGUgcGFyc2Ugc2NoZWR1bGVyIHRoYXQgdGhlIGdpdmVuIHJlZ2lvbiB3YXMgc2tpcHBlZFxuICAgIGJlY2F1c2UgaXQgd2Fzbid0IGluIHZpZXcsIGFuZCB0aGUgcGFyc2Ugc2hvdWxkIGJlIHJlc3RhcnRlZFxuICAgIHdoZW4gaXQgY29tZXMgaW50byB2aWV3LlxuICAgICovXG4gICAgc2tpcFVudGlsSW5WaWV3KGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuc2tpcHBlZC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYSBwYXJzZXIgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBwbGFjZWhvbGRlciB3aGVuXG4gICAgYXN5bmNocm9ub3VzbHkgbG9hZGluZyBhIG5lc3RlZCBwYXJzZXIuIEl0J2xsIHNraXAgaXRzIGlucHV0IGFuZFxuICAgIG1hcmsgaXQgYXMgbm90LXJlYWxseS1wYXJzZWQsIHNvIHRoYXQgdGhlIG5leHQgdXBkYXRlIHdpbGwgcGFyc2VcbiAgICBpdCBhZ2Fpbi5cbiAgICBcbiAgICBXaGVuIGB1bnRpbGAgaXMgZ2l2ZW4sIGEgcmVwYXJzZSB3aWxsIGJlIHNjaGVkdWxlZCB3aGVuIHRoYXRcbiAgICBwcm9taXNlIHJlc29sdmVzLlxuICAgICovXG4gICAgc3RhdGljIGdldFNraXBwaW5nUGFyc2VyKHVudGlsKSB7XG4gICAgICAgIHJldHVybiBuZXcgY2xhc3MgZXh0ZW5kcyBQYXJzZXIge1xuICAgICAgICAgICAgY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSByYW5nZXNbMF0uZnJvbSwgdG8gPSByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvO1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZFBvczogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjeCA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiByYW5nZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4LnRlbXBTa2lwcGVkLnB1c2gocik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVudGlsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeC5zY2hlZHVsZU9uID0gY3guc2NoZWR1bGVPbiA/IFByb21pc2UuYWxsKFtjeC5zY2hlZHVsZU9uLCB1bnRpbF0pIDogdW50aWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IHRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIFtdLCBbXSwgdG8gLSBmcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3RvcHBlZEF0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzdG9wQXQoKSB7IH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaXNEb25lKHVwdG8pIHtcbiAgICAgICAgdXB0byA9IE1hdGgubWluKHVwdG8sIHRoaXMuc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgICAgIGxldCBmcmFncyA9IHRoaXMuZnJhZ21lbnRzO1xuICAgICAgICByZXR1cm4gdGhpcy50cmVlTGVuID49IHVwdG8gJiYgZnJhZ3MubGVuZ3RoICYmIGZyYWdzWzBdLmZyb20gPT0gMCAmJiBmcmFnc1swXS50byA+PSB1cHRvO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNvbnRleHQgZm9yIHRoZSBjdXJyZW50IHBhcnNlLCBvciBgbnVsbGAgaWYgbm8gZWRpdG9yXG4gICAgcGFyc2UgaXMgaW4gcHJvZ3Jlc3MuXG4gICAgKi9cbiAgICBzdGF0aWMgZ2V0KCkgeyByZXR1cm4gY3VycmVudENvbnRleHQ7IH1cbn1cbmZ1bmN0aW9uIGN1dEZyYWdtZW50cyhmcmFnbWVudHMsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIFRyZWVGcmFnbWVudC5hcHBseUNoYW5nZXMoZnJhZ21lbnRzLCBbeyBmcm9tQTogZnJvbSwgdG9BOiB0bywgZnJvbUI6IGZyb20sIHRvQjogdG8gfV0pO1xufVxuY2xhc3MgTGFuZ3VhZ2VTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gQSBtdXRhYmxlIHBhcnNlIHN0YXRlIHRoYXQgaXMgdXNlZCB0byBwcmVzZXJ2ZSB3b3JrIGRvbmUgZHVyaW5nXG4gICAgLy8gdGhlIGxpZmV0aW1lIG9mIGEgc3RhdGUgd2hlbiBtb3ZpbmcgdG8gdGhlIG5leHQgc3RhdGUuXG4gICAgY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnRyZWUgPSBjb250ZXh0LnRyZWU7XG4gICAgfVxuICAgIGFwcGx5KHRyKSB7XG4gICAgICAgIGlmICghdHIuZG9jQ2hhbmdlZCAmJiB0aGlzLnRyZWUgPT0gdGhpcy5jb250ZXh0LnRyZWUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgbGV0IG5ld0N4ID0gdGhpcy5jb250ZXh0LmNoYW5nZXModHIuY2hhbmdlcywgdHIuc3RhdGUpO1xuICAgICAgICAvLyBJZiB0aGUgcHJldmlvdXMgcGFyc2Ugd2Fzbid0IGRvbmUsIGdvIGZvcndhcmQgb25seSB1cCB0byBpdHNcbiAgICAgICAgLy8gZW5kIHBvc2l0aW9uIG9yIHRoZSBlbmQgb2YgdGhlIHZpZXdwb3J0LCB0byBhdm9pZCBzbG93aW5nIGRvd25cbiAgICAgICAgLy8gc3RhdGUgdXBkYXRlcyB3aXRoIHBhcnNlIHdvcmsgYmV5b25kIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgbGV0IHVwdG8gPSB0aGlzLmNvbnRleHQudHJlZUxlbiA9PSB0ci5zdGFydFN0YXRlLmRvYy5sZW5ndGggPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogTWF0aC5tYXgodHIuY2hhbmdlcy5tYXBQb3ModGhpcy5jb250ZXh0LnRyZWVMZW4pLCBuZXdDeC52aWV3cG9ydC50byk7XG4gICAgICAgIGlmICghbmV3Q3gud29yaygyMCAvKiBXb3JrLkFwcGx5ICovLCB1cHRvKSlcbiAgICAgICAgICAgIG5ld0N4LnRha2VUcmVlKCk7XG4gICAgICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdGF0ZShuZXdDeCk7XG4gICAgfVxuICAgIHN0YXRpYyBpbml0KHN0YXRlKSB7XG4gICAgICAgIGxldCB2cFRvID0gTWF0aC5taW4oMzAwMCAvKiBXb3JrLkluaXRWaWV3cG9ydCAqLywgc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgICAgIGxldCBwYXJzZVN0YXRlID0gUGFyc2VDb250ZXh0LmNyZWF0ZShzdGF0ZS5mYWNldChsYW5ndWFnZSkucGFyc2VyLCBzdGF0ZSwgeyBmcm9tOiAwLCB0bzogdnBUbyB9KTtcbiAgICAgICAgaWYgKCFwYXJzZVN0YXRlLndvcmsoMjAgLyogV29yay5BcHBseSAqLywgdnBUbykpXG4gICAgICAgICAgICBwYXJzZVN0YXRlLnRha2VUcmVlKCk7XG4gICAgICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdGF0ZShwYXJzZVN0YXRlKTtcbiAgICB9XG59XG5MYW5ndWFnZS5zdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlOiBMYW5ndWFnZVN0YXRlLmluaXQsXG4gICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICBmb3IgKGxldCBlIG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICBpZiAoZS5pcyhMYW5ndWFnZS5zZXRTdGF0ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudmFsdWU7XG4gICAgICAgIGlmICh0ci5zdGFydFN0YXRlLmZhY2V0KGxhbmd1YWdlKSAhPSB0ci5zdGF0ZS5mYWNldChsYW5ndWFnZSkpXG4gICAgICAgICAgICByZXR1cm4gTGFuZ3VhZ2VTdGF0ZS5pbml0KHRyLnN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmFwcGx5KHRyKTtcbiAgICB9XG59KTtcbmxldCByZXF1ZXN0SWRsZSA9IChjYWxsYmFjaykgPT4ge1xuICAgIGxldCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjaygpLCA1MDAgLyogV29yay5NYXhQYXVzZSAqLyk7XG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn07XG5pZiAodHlwZW9mIHJlcXVlc3RJZGxlQ2FsbGJhY2sgIT0gXCJ1bmRlZmluZWRcIilcbiAgICByZXF1ZXN0SWRsZSA9IChjYWxsYmFjaykgPT4ge1xuICAgICAgICBsZXQgaWRsZSA9IC0xLCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZGxlID0gcmVxdWVzdElkbGVDYWxsYmFjayhjYWxsYmFjaywgeyB0aW1lb3V0OiA1MDAgLyogV29yay5NYXhQYXVzZSAqLyAtIDEwMCAvKiBXb3JrLk1pblBhdXNlICovIH0pO1xuICAgICAgICB9LCAxMDAgLyogV29yay5NaW5QYXVzZSAqLyk7XG4gICAgICAgIHJldHVybiAoKSA9PiBpZGxlIDwgMCA/IGNsZWFyVGltZW91dCh0aW1lb3V0KSA6IGNhbmNlbElkbGVDYWxsYmFjayhpZGxlKTtcbiAgICB9O1xuY29uc3QgaXNJbnB1dFBlbmRpbmcgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgKChfYSA9IG5hdmlnYXRvci5zY2hlZHVsaW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNJbnB1dFBlbmRpbmcpXG4gICAgPyAoKSA9PiBuYXZpZ2F0b3Iuc2NoZWR1bGluZy5pc0lucHV0UGVuZGluZygpIDogbnVsbDtcbmNvbnN0IHBhcnNlV29ya2VyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIFBhcnNlV29ya2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMud29ya2luZyA9IG51bGw7XG4gICAgICAgIHRoaXMud29ya1NjaGVkdWxlZCA9IDA7XG4gICAgICAgIC8vIEVuZCBvZiB0aGUgY3VycmVudCB0aW1lIGNodW5rXG4gICAgICAgIHRoaXMuY2h1bmtFbmQgPSAtMTtcbiAgICAgICAgLy8gTWlsbGlzZWNvbmRzIG9mIGJ1ZGdldCBsZWZ0IGZvciB0aGlzIGNodW5rXG4gICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgPSAtMTtcbiAgICAgICAgdGhpcy53b3JrID0gdGhpcy53b3JrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVXb3JrKCk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IGN4ID0gdGhpcy52aWV3LnN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlKS5jb250ZXh0O1xuICAgICAgICBpZiAoY3gudXBkYXRlVmlld3BvcnQodXBkYXRlLnZpZXcudmlld3BvcnQpIHx8IHRoaXMudmlldy52aWV3cG9ydC50byA+IGN4LnRyZWVMZW4pXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlV29yaygpO1xuICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlldy5oYXNGb2N1cylcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rQnVkZ2V0ICs9IDUwIC8qIFdvcmsuQ2hhbmdlQm9udXMgKi87XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlV29yaygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tBc3luY1NjaGVkdWxlKGN4KTtcbiAgICB9XG4gICAgc2NoZWR1bGVXb3JrKCkge1xuICAgICAgICBpZiAodGhpcy53b3JraW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdGhpcy52aWV3LCBmaWVsZCA9IHN0YXRlLmZpZWxkKExhbmd1YWdlLnN0YXRlKTtcbiAgICAgICAgaWYgKGZpZWxkLnRyZWUgIT0gZmllbGQuY29udGV4dC50cmVlIHx8ICFmaWVsZC5jb250ZXh0LmlzRG9uZShzdGF0ZS5kb2MubGVuZ3RoKSlcbiAgICAgICAgICAgIHRoaXMud29ya2luZyA9IHJlcXVlc3RJZGxlKHRoaXMud29yayk7XG4gICAgfVxuICAgIHdvcmsoZGVhZGxpbmUpIHtcbiAgICAgICAgdGhpcy53b3JraW5nID0gbnVsbDtcbiAgICAgICAgbGV0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICh0aGlzLmNodW5rRW5kIDwgbm93ICYmICh0aGlzLmNodW5rRW5kIDwgMCB8fCB0aGlzLnZpZXcuaGFzRm9jdXMpKSB7IC8vIFN0YXJ0IGEgbmV3IGNodW5rXG4gICAgICAgICAgICB0aGlzLmNodW5rRW5kID0gbm93ICsgMzAwMDAgLyogV29yay5DaHVua1RpbWUgKi87XG4gICAgICAgICAgICB0aGlzLmNodW5rQnVkZ2V0ID0gMzAwMCAvKiBXb3JrLkNodW5rQnVkZ2V0ICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNodW5rQnVkZ2V0IDw9IDApXG4gICAgICAgICAgICByZXR1cm47IC8vIE5vIG1vcmUgYnVkZ2V0XG4gICAgICAgIGxldCB7IHN0YXRlLCB2aWV3cG9ydDogeyB0bzogdnBUbyB9IH0gPSB0aGlzLnZpZXcsIGZpZWxkID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUpO1xuICAgICAgICBpZiAoZmllbGQudHJlZSA9PSBmaWVsZC5jb250ZXh0LnRyZWUgJiYgZmllbGQuY29udGV4dC5pc0RvbmUodnBUbyArIDEwMDAwMCAvKiBXb3JrLk1heFBhcnNlQWhlYWQgKi8pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZW5kVGltZSA9IERhdGUubm93KCkgKyBNYXRoLm1pbih0aGlzLmNodW5rQnVkZ2V0LCAxMDAgLyogV29yay5TbGljZSAqLywgZGVhZGxpbmUgJiYgIWlzSW5wdXRQZW5kaW5nID8gTWF0aC5tYXgoMjUgLyogV29yay5NaW5TbGljZSAqLywgZGVhZGxpbmUudGltZVJlbWFpbmluZygpIC0gNSkgOiAxZTkpO1xuICAgICAgICBsZXQgdmlld3BvcnRGaXJzdCA9IGZpZWxkLmNvbnRleHQudHJlZUxlbiA8IHZwVG8gJiYgc3RhdGUuZG9jLmxlbmd0aCA+IHZwVG8gKyAxMDAwO1xuICAgICAgICBsZXQgZG9uZSA9IGZpZWxkLmNvbnRleHQud29yaygoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaXNJbnB1dFBlbmRpbmcgJiYgaXNJbnB1dFBlbmRpbmcoKSB8fCBEYXRlLm5vdygpID4gZW5kVGltZTtcbiAgICAgICAgfSwgdnBUbyArICh2aWV3cG9ydEZpcnN0ID8gMCA6IDEwMDAwMCAvKiBXb3JrLk1heFBhcnNlQWhlYWQgKi8pKTtcbiAgICAgICAgdGhpcy5jaHVua0J1ZGdldCAtPSBEYXRlLm5vdygpIC0gbm93O1xuICAgICAgICBpZiAoZG9uZSB8fCB0aGlzLmNodW5rQnVkZ2V0IDw9IDApIHtcbiAgICAgICAgICAgIGZpZWxkLmNvbnRleHQudGFrZVRyZWUoKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IExhbmd1YWdlLnNldFN0YXRlLm9mKG5ldyBMYW5ndWFnZVN0YXRlKGZpZWxkLmNvbnRleHQpKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jaHVua0J1ZGdldCA+IDAgJiYgIShkb25lICYmICF2aWV3cG9ydEZpcnN0KSlcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVXb3JrKCk7XG4gICAgICAgIHRoaXMuY2hlY2tBc3luY1NjaGVkdWxlKGZpZWxkLmNvbnRleHQpO1xuICAgIH1cbiAgICBjaGVja0FzeW5jU2NoZWR1bGUoY3gpIHtcbiAgICAgICAgaWYgKGN4LnNjaGVkdWxlT24pIHtcbiAgICAgICAgICAgIHRoaXMud29ya1NjaGVkdWxlZCsrO1xuICAgICAgICAgICAgY3guc2NoZWR1bGVPblxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuc2NoZWR1bGVXb3JrKCkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlcnIpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMud29ya1NjaGVkdWxlZC0tKTtcbiAgICAgICAgICAgIGN4LnNjaGVkdWxlT24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLndvcmtpbmcpXG4gICAgICAgICAgICB0aGlzLndvcmtpbmcoKTtcbiAgICB9XG4gICAgaXNXb3JraW5nKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy53b3JraW5nIHx8IHRoaXMud29ya1NjaGVkdWxlZCA+IDApO1xuICAgIH1cbn0sIHtcbiAgICBldmVudEhhbmRsZXJzOiB7IGZvY3VzKCkgeyB0aGlzLnNjaGVkdWxlV29yaygpOyB9IH1cbn0pO1xuLyoqXG5UaGUgZmFjZXQgdXNlZCB0byBhc3NvY2lhdGUgYSBsYW5ndWFnZSB3aXRoIGFuIGVkaXRvciBzdGF0ZS4gVXNlZFxuYnkgYExhbmd1YWdlYCBvYmplY3QncyBgZXh0ZW5zaW9uYCBwcm9wZXJ0eSAoc28geW91IGRvbid0IG5lZWQgdG9cbm1hbnVhbGx5IHdyYXAgeW91ciBsYW5ndWFnZXMgaW4gdGhpcykuIENhbiBiZSB1c2VkIHRvIGFjY2VzcyB0aGVcbmN1cnJlbnQgbGFuZ3VhZ2Ugb24gYSBzdGF0ZS5cbiovXG5jb25zdCBsYW5ndWFnZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUobGFuZ3VhZ2VzKSB7IHJldHVybiBsYW5ndWFnZXMubGVuZ3RoID8gbGFuZ3VhZ2VzWzBdIDogbnVsbDsgfSxcbiAgICBlbmFibGVzOiBsYW5ndWFnZSA9PiBbXG4gICAgICAgIExhbmd1YWdlLnN0YXRlLFxuICAgICAgICBwYXJzZVdvcmtlcixcbiAgICAgICAgRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcy5jb21wdXRlKFtsYW5ndWFnZV0sIHN0YXRlID0+IHtcbiAgICAgICAgICAgIGxldCBsYW5nID0gc3RhdGUuZmFjZXQobGFuZ3VhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIGxhbmcgJiYgbGFuZy5uYW1lID8geyBcImRhdGEtbGFuZ3VhZ2VcIjogbGFuZy5uYW1lIH0gOiB7fTtcbiAgICAgICAgfSlcbiAgICBdXG59KTtcbi8qKlxuVGhpcyBjbGFzcyBidW5kbGVzIGEgW2xhbmd1YWdlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlKSB3aXRoIGFuXG5vcHRpb25hbCBzZXQgb2Ygc3VwcG9ydGluZyBleHRlbnNpb25zLiBMYW5ndWFnZSBwYWNrYWdlcyBhcmVcbmVuY291cmFnZWQgdG8gZXhwb3J0IGEgZnVuY3Rpb24gdGhhdCBvcHRpb25hbGx5IHRha2VzIGFcbmNvbmZpZ3VyYXRpb24gb2JqZWN0IGFuZCByZXR1cm5zIGEgYExhbmd1YWdlU3VwcG9ydGAgaW5zdGFuY2UsIGFzXG50aGUgbWFpbiB3YXkgZm9yIGNsaWVudCBjb2RlIHRvIHVzZSB0aGUgcGFja2FnZS5cbiovXG5jbGFzcyBMYW5ndWFnZVN1cHBvcnQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGxhbmd1YWdlIHN1cHBvcnQgb2JqZWN0LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGxhbmd1YWdlIG9iamVjdC5cbiAgICAqL1xuICAgIGxhbmd1YWdlLCBcbiAgICAvKipcbiAgICBBbiBvcHRpb25hbCBzZXQgb2Ygc3VwcG9ydGluZyBleHRlbnNpb25zLiBXaGVuIG5lc3RpbmcgYVxuICAgIGxhbmd1YWdlIGluIGFub3RoZXIgbGFuZ3VhZ2UsIHRoZSBvdXRlciBsYW5ndWFnZSBpcyBlbmNvdXJhZ2VkXG4gICAgdG8gaW5jbHVkZSB0aGUgc3VwcG9ydGluZyBleHRlbnNpb25zIGZvciBpdHMgaW5uZXIgbGFuZ3VhZ2VzXG4gICAgaW4gaXRzIG93biBzZXQgb2Ygc3VwcG9ydCBleHRlbnNpb25zLlxuICAgICovXG4gICAgc3VwcG9ydCA9IFtdKSB7XG4gICAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgdGhpcy5zdXBwb3J0ID0gc3VwcG9ydDtcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBbbGFuZ3VhZ2UsIHN1cHBvcnRdO1xuICAgIH1cbn1cbi8qKlxuTGFuZ3VhZ2UgZGVzY3JpcHRpb25zIGFyZSB1c2VkIHRvIHN0b3JlIG1ldGFkYXRhIGFib3V0IGxhbmd1YWdlc1xuYW5kIHRvIGR5bmFtaWNhbGx5IGxvYWQgdGhlbS4gVGhlaXIgbWFpbiByb2xlIGlzIGZpbmRpbmcgdGhlXG5hcHByb3ByaWF0ZSBsYW5ndWFnZSBmb3IgYSBmaWxlbmFtZSBvciBkeW5hbWljYWxseSBsb2FkaW5nIG5lc3RlZFxucGFyc2Vycy5cbiovXG5jbGFzcyBMYW5ndWFnZURlc2NyaXB0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbmFtZSBvZiB0aGlzIGxhbmd1YWdlLlxuICAgICovXG4gICAgbmFtZSwgXG4gICAgLyoqXG4gICAgQWx0ZXJuYXRpdmUgbmFtZXMgZm9yIHRoZSBtb2RlIChsb3dlcmNhc2VkLCBpbmNsdWRlcyBgdGhpcy5uYW1lYCkuXG4gICAgKi9cbiAgICBhbGlhcywgXG4gICAgLyoqXG4gICAgRmlsZSBleHRlbnNpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGxhbmd1YWdlLlxuICAgICovXG4gICAgZXh0ZW5zaW9ucywgXG4gICAgLyoqXG4gICAgT3B0aW9uYWwgZmlsZW5hbWUgcGF0dGVybiB0aGF0IHNob3VsZCBiZSBhc3NvY2lhdGVkIHdpdGggdGhpc1xuICAgIGxhbmd1YWdlLlxuICAgICovXG4gICAgZmlsZW5hbWUsIGxvYWRGdW5jLCBcbiAgICAvKipcbiAgICBJZiB0aGUgbGFuZ3VhZ2UgaGFzIGJlZW4gbG9hZGVkLCB0aGlzIHdpbGwgaG9sZCBpdHMgdmFsdWUuXG4gICAgKi9cbiAgICBzdXBwb3J0ID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBhbGlhcztcbiAgICAgICAgdGhpcy5leHRlbnNpb25zID0gZXh0ZW5zaW9ucztcbiAgICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICB0aGlzLmxvYWRGdW5jID0gbG9hZEZ1bmM7XG4gICAgICAgIHRoaXMuc3VwcG9ydCA9IHN1cHBvcnQ7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIFN0YXJ0IGxvYWRpbmcgdGhlIHRoZSBsYW5ndWFnZS4gV2lsbCByZXR1cm4gYSBwcm9taXNlIHRoYXRcbiAgICByZXNvbHZlcyB0byBhIFtgTGFuZ3VhZ2VTdXBwb3J0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZVN1cHBvcnQpXG4gICAgb2JqZWN0IHdoZW4gdGhlIGxhbmd1YWdlIHN1Y2Nlc3NmdWxseSBsb2Fkcy5cbiAgICAqL1xuICAgIGxvYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgfHwgKHRoaXMubG9hZGluZyA9IHRoaXMubG9hZEZ1bmMoKS50aGVuKHN1cHBvcnQgPT4gdGhpcy5zdXBwb3J0ID0gc3VwcG9ydCwgZXJyID0+IHsgdGhpcy5sb2FkaW5nID0gbnVsbDsgdGhyb3cgZXJyOyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGxhbmd1YWdlIGRlc2NyaXB0aW9uLlxuICAgICovXG4gICAgc3RhdGljIG9mKHNwZWMpIHtcbiAgICAgICAgbGV0IHsgbG9hZCwgc3VwcG9ydCB9ID0gc3BlYztcbiAgICAgICAgaWYgKCFsb2FkKSB7XG4gICAgICAgICAgICBpZiAoIXN1cHBvcnQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJNdXN0IHBhc3MgZWl0aGVyICdsb2FkJyBvciAnc3VwcG9ydCcgdG8gTGFuZ3VhZ2VEZXNjcmlwdGlvbi5vZlwiKTtcbiAgICAgICAgICAgIGxvYWQgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoc3VwcG9ydCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMYW5ndWFnZURlc2NyaXB0aW9uKHNwZWMubmFtZSwgKHNwZWMuYWxpYXMgfHwgW10pLmNvbmNhdChzcGVjLm5hbWUpLm1hcChzID0+IHMudG9Mb3dlckNhc2UoKSksIHNwZWMuZXh0ZW5zaW9ucyB8fCBbXSwgc3BlYy5maWxlbmFtZSwgbG9hZCwgc3VwcG9ydCk7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgZm9yIGEgbGFuZ3VhZ2UgaW4gdGhlIGdpdmVuIGFycmF5IG9mIGRlc2NyaXB0aW9ucyB0aGF0XG4gICAgbWF0Y2hlcyB0aGUgZmlsZW5hbWUuIFdpbGwgZmlyc3QgbWF0Y2hcbiAgICBbYGZpbGVuYW1lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZURlc2NyaXB0aW9uLmZpbGVuYW1lKSBwYXR0ZXJucyxcbiAgICBhbmQgdGhlbiBbZXh0ZW5zaW9uc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZURlc2NyaXB0aW9uLmV4dGVuc2lvbnMpLFxuICAgIGFuZCByZXR1cm4gdGhlIGZpcnN0IGxhbmd1YWdlIHRoYXQgbWF0Y2hlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBtYXRjaEZpbGVuYW1lKGRlc2NzLCBmaWxlbmFtZSkge1xuICAgICAgICBmb3IgKGxldCBkIG9mIGRlc2NzKVxuICAgICAgICAgICAgaWYgKGQuZmlsZW5hbWUgJiYgZC5maWxlbmFtZS50ZXN0KGZpbGVuYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgbGV0IGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhmaWxlbmFtZSk7XG4gICAgICAgIGlmIChleHQpXG4gICAgICAgICAgICBmb3IgKGxldCBkIG9mIGRlc2NzKVxuICAgICAgICAgICAgICAgIGlmIChkLmV4dGVuc2lvbnMuaW5kZXhPZihleHRbMV0pID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgTG9vayBmb3IgYSBsYW5ndWFnZSB3aG9zZSBuYW1lIG9yIGFsaWFzIG1hdGNoZXMgdGhlIHRoZSBnaXZlblxuICAgIG5hbWUgKGNhc2UtaW5zZW5zaXRpdmVseSkuIElmIGBmdXp6eWAgaXMgdHJ1ZSwgYW5kIG5vIGRpcmVjdFxuICAgIG1hdGNocyBpcyBmb3VuZCwgdGhpcydsbCBhbHNvIHNlYXJjaCBmb3IgYSBsYW5ndWFnZSB3aG9zZSBuYW1lXG4gICAgb3IgYWxpYXMgb2NjdXJzIGluIHRoZSBzdHJpbmcgKGZvciBuYW1lcyBzaG9ydGVyIHRoYW4gdGhyZWVcbiAgICBjaGFyYWN0ZXJzLCBvbmx5IHdoZW4gc3Vycm91bmRlZCBieSBub24td29yZCBjaGFyYWN0ZXJzKS5cbiAgICAqL1xuICAgIHN0YXRpYyBtYXRjaExhbmd1YWdlTmFtZShkZXNjcywgbmFtZSwgZnV6enkgPSB0cnVlKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICBpZiAoZC5hbGlhcy5zb21lKGEgPT4gYSA9PSBuYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgaWYgKGZ1enp5KVxuICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcylcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBhIG9mIGQuYWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gbmFtZS5pbmRleE9mKGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSAmJiAoYS5sZW5ndGggPiAyIHx8ICEvXFx3Ly50ZXN0KG5hbWVbZm91bmQgLSAxXSkgJiYgIS9cXHcvLnRlc3QobmFtZVtmb3VuZCArIGEubGVuZ3RoXSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuRmFjZXQgdGhhdCBkZWZpbmVzIGEgd2F5IHRvIHByb3ZpZGUgYSBmdW5jdGlvbiB0aGF0IGNvbXB1dGVzIHRoZVxuYXBwcm9wcmlhdGUgaW5kZW50YXRpb24gZGVwdGgsIGFzIGEgY29sdW1uIG51bWJlciAoc2VlXG5bYGluZGVudFN0cmluZ2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U3RyaW5nKSksIGF0IHRoZSBzdGFydCBvZiBhIGdpdmVuXG5saW5lLiBBIHJldHVybiB2YWx1ZSBvZiBgbnVsbGAgaW5kaWNhdGVzIG5vIGluZGVudGF0aW9uIGNhbiBiZVxuZGV0ZXJtaW5lZCwgYW5kIHRoZSBsaW5lIHNob3VsZCBpbmhlcml0IHRoZSBpbmRlbnRhdGlvbiBvZiB0aGUgb25lXG5hYm92ZSBpdC4gQSByZXR1cm4gdmFsdWUgb2YgYHVuZGVmaW5lZGAgZGVmZXJzIHRvIHRoZSBuZXh0IGluZGVudFxuc2VydmljZS5cbiovXG5jb25zdCBpbmRlbnRTZXJ2aWNlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5GYWNldCBmb3Igb3ZlcnJpZGluZyB0aGUgdW5pdCBieSB3aGljaCBpbmRlbnRhdGlvbiBoYXBwZW5zLiBTaG91bGRcbmJlIGEgc3RyaW5nIGNvbnNpc3RpbmcgZW50aXJlbHkgb2YgdGhlIHNhbWUgd2hpdGVzcGFjZSBjaGFyYWN0ZXIuXG5XaGVuIG5vdCBzZXQsIHRoaXMgZGVmYXVsdHMgdG8gMiBzcGFjZXMuXG4qL1xuY29uc3QgaW5kZW50VW5pdCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB7XG4gICAgICAgIGlmICghdmFsdWVzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBcIiAgXCI7XG4gICAgICAgIGxldCB1bml0ID0gdmFsdWVzWzBdO1xuICAgICAgICBpZiAoIXVuaXQgfHwgL1xcUy8udGVzdCh1bml0KSB8fCBBcnJheS5mcm9tKHVuaXQpLnNvbWUoZSA9PiBlICE9IHVuaXRbMF0pKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbmRlbnQgdW5pdDogXCIgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZXNbMF0pKTtcbiAgICAgICAgcmV0dXJuIHVuaXQ7XG4gICAgfVxufSk7XG4vKipcblJldHVybiB0aGUgX2NvbHVtbiB3aWR0aF8gb2YgYW4gaW5kZW50IHVuaXQgaW4gdGhlIHN0YXRlLlxuRGV0ZXJtaW5lZCBieSB0aGUgW2BpbmRlbnRVbml0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KVxuZmFjZXQsIGFuZCBbYHRhYlNpemVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRhYlNpemUpIHdoZW4gdGhhdFxuY29udGFpbnMgdGFicy5cbiovXG5mdW5jdGlvbiBnZXRJbmRlbnRVbml0KHN0YXRlKSB7XG4gICAgbGV0IHVuaXQgPSBzdGF0ZS5mYWNldChpbmRlbnRVbml0KTtcbiAgICByZXR1cm4gdW5pdC5jaGFyQ29kZUF0KDApID09IDkgPyBzdGF0ZS50YWJTaXplICogdW5pdC5sZW5ndGggOiB1bml0Lmxlbmd0aDtcbn1cbi8qKlxuQ3JlYXRlIGFuIGluZGVudGF0aW9uIHN0cmluZyB0aGF0IGNvdmVycyBjb2x1bW5zIDAgdG8gYGNvbHNgLlxuV2lsbCB1c2UgdGFicyBmb3IgYXMgbXVjaCBvZiB0aGUgY29sdW1ucyBhcyBwb3NzaWJsZSB3aGVuIHRoZVxuW2BpbmRlbnRVbml0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KSBmYWNldCBjb250YWluc1xudGFicy5cbiovXG5mdW5jdGlvbiBpbmRlbnRTdHJpbmcoc3RhdGUsIGNvbHMpIHtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIiwgdHMgPSBzdGF0ZS50YWJTaXplLCBjaCA9IHN0YXRlLmZhY2V0KGluZGVudFVuaXQpWzBdO1xuICAgIGlmIChjaCA9PSBcIlxcdFwiKSB7XG4gICAgICAgIHdoaWxlIChjb2xzID49IHRzKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gXCJcXHRcIjtcbiAgICAgICAgICAgIGNvbHMgLT0gdHM7XG4gICAgICAgIH1cbiAgICAgICAgY2ggPSBcIiBcIjtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyBpKyspXG4gICAgICAgIHJlc3VsdCArPSBjaDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG5HZXQgdGhlIGluZGVudGF0aW9uLCBhcyBhIGNvbHVtbiBudW1iZXIsIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cbldpbGwgZmlyc3QgY29uc3VsdCBhbnkgW2luZGVudCBzZXJ2aWNlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTZXJ2aWNlKVxudGhhdCBhcmUgcmVnaXN0ZXJlZCwgYW5kIGlmIG5vbmUgb2YgdGhvc2UgcmV0dXJuIGFuIGluZGVudGF0aW9uLFxudGhpcyB3aWxsIGNoZWNrIHRoZSBzeW50YXggdHJlZSBmb3IgdGhlIFtpbmRlbnQgbm9kZVxucHJvcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnROb2RlUHJvcCkgYW5kIHVzZSB0aGF0IGlmIGZvdW5kLiBSZXR1cm5zIGFcbm51bWJlciB3aGVuIGFuIGluZGVudGF0aW9uIGNvdWxkIGJlIGRldGVybWluZWQsIGFuZCBudWxsXG5vdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gZ2V0SW5kZW50YXRpb24oY29udGV4dCwgcG9zKSB7XG4gICAgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBFZGl0b3JTdGF0ZSlcbiAgICAgICAgY29udGV4dCA9IG5ldyBJbmRlbnRDb250ZXh0KGNvbnRleHQpO1xuICAgIGZvciAobGV0IHNlcnZpY2Ugb2YgY29udGV4dC5zdGF0ZS5mYWNldChpbmRlbnRTZXJ2aWNlKSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc2VydmljZShjb250ZXh0LCBwb3MpO1xuICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoY29udGV4dC5zdGF0ZSk7XG4gICAgcmV0dXJuIHRyZWUubGVuZ3RoID49IHBvcyA/IHN5bnRheEluZGVudGF0aW9uKGNvbnRleHQsIHRyZWUsIHBvcykgOiBudWxsO1xufVxuLyoqXG5DcmVhdGUgYSBjaGFuZ2Ugc2V0IHRoYXQgYXV0by1pbmRlbnRzIGFsbCBsaW5lcyB0b3VjaGVkIGJ5IHRoZVxuZ2l2ZW4gZG9jdW1lbnQgcmFuZ2UuXG4qL1xuZnVuY3Rpb24gaW5kZW50UmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgbGV0IHVwZGF0ZWQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxldCBjb250ZXh0ID0gbmV3IEluZGVudENvbnRleHQoc3RhdGUsIHsgb3ZlcnJpZGVJbmRlbnRhdGlvbjogc3RhcnQgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB1cGRhdGVkW3N0YXJ0XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogLTE7IH0gfSk7XG4gICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBwb3MgPSBmcm9tOyBwb3MgPD0gdG87KSB7XG4gICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBwb3MgPSBsaW5lLnRvICsgMTtcbiAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKGNvbnRleHQsIGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIS9cXFMvLnRlc3QobGluZS50ZXh0KSlcbiAgICAgICAgICAgIGluZGVudCA9IDA7XG4gICAgICAgIGxldCBjdXIgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXTtcbiAgICAgICAgbGV0IG5vcm0gPSBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCk7XG4gICAgICAgIGlmIChjdXIgIT0gbm9ybSkge1xuICAgICAgICAgICAgdXBkYXRlZFtsaW5lLmZyb21dID0gaW5kZW50O1xuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCB0bzogbGluZS5mcm9tICsgY3VyLmxlbmd0aCwgaW5zZXJ0OiBub3JtIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZS5jaGFuZ2VzKGNoYW5nZXMpO1xufVxuLyoqXG5JbmRlbnRhdGlvbiBjb250ZXh0cyBhcmUgdXNlZCB3aGVuIGNhbGxpbmcgW2luZGVudGF0aW9uXG5zZXJ2aWNlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTZXJ2aWNlKS4gVGhleSBwcm92aWRlIGhlbHBlciB1dGlsaXRpZXNcbnVzZWZ1bCBpbiBpbmRlbnRhdGlvbiBsb2dpYywgYW5kIGNhbiBzZWxlY3RpdmVseSBvdmVycmlkZSB0aGVcbmluZGVudGF0aW9uIHJlcG9ydGVkIGZvciBzb21lIGxpbmVzLlxuKi9cbmNsYXNzIEluZGVudENvbnRleHQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbmRlbnQgY29udGV4dC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnVuaXQgPSBnZXRJbmRlbnRVbml0KHN0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgZGVzY3JpcHRpb24gb2YgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLCB0YWtpbmdcbiAgICBbc2ltdWxhdGVkIGxpbmVcbiAgICBicmVha3NdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuSW5kZW50Q29udGV4dC5jb25zdHJ1Y3Rvcl5vcHRpb25zLnNpbXVsYXRlQnJlYWspXG4gICAgaW50byBhY2NvdW50LiBJZiB0aGVyZSBpcyBzdWNoIGEgYnJlYWsgYXQgYHBvc2AsIHRoZSBgYmlhc2BcbiAgICBhcmd1bWVudCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHBhcnQgb2YgdGhlIGxpbmUgbGluZSBiZWZvcmUgb3JcbiAgICBhZnRlciB0aGUgYnJlYWsgaXMgdXNlZC5cbiAgICAqL1xuICAgIGxpbmVBdChwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgIGxldCB7IHNpbXVsYXRlQnJlYWssIHNpbXVsYXRlRG91YmxlQnJlYWsgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKHNpbXVsYXRlQnJlYWsgIT0gbnVsbCAmJiBzaW11bGF0ZUJyZWFrID49IGxpbmUuZnJvbSAmJiBzaW11bGF0ZUJyZWFrIDw9IGxpbmUudG8pIHtcbiAgICAgICAgICAgIGlmIChzaW11bGF0ZURvdWJsZUJyZWFrICYmIHNpbXVsYXRlQnJlYWsgPT0gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQ6IFwiXCIsIGZyb206IHBvcyB9O1xuICAgICAgICAgICAgZWxzZSBpZiAoYmlhcyA8IDAgPyBzaW11bGF0ZUJyZWFrIDwgcG9zIDogc2ltdWxhdGVCcmVhayA8PSBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogbGluZS50ZXh0LnNsaWNlKHNpbXVsYXRlQnJlYWsgLSBsaW5lLmZyb20pLCBmcm9tOiBzaW11bGF0ZUJyZWFrIH07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogbGluZS50ZXh0LnNsaWNlKDAsIHNpbXVsYXRlQnJlYWsgLSBsaW5lLmZyb20pLCBmcm9tOiBsaW5lLmZyb20gfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB0ZXh0IGRpcmVjdGx5IGFmdGVyIGBwb3NgLCBlaXRoZXIgdGhlIGVudGlyZSBsaW5lXG4gICAgb3IgdGhlIG5leHQgMTAwIGNoYXJhY3RlcnMsIHdoaWNoZXZlciBpcyBzaG9ydGVyLlxuICAgICovXG4gICAgdGV4dEFmdGVyUG9zKHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW11bGF0ZURvdWJsZUJyZWFrICYmIHBvcyA9PSB0aGlzLm9wdGlvbnMuc2ltdWxhdGVCcmVhaylcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tIH0gPSB0aGlzLmxpbmVBdChwb3MsIGJpYXMpO1xuICAgICAgICByZXR1cm4gdGV4dC5zbGljZShwb3MgLSBmcm9tLCBNYXRoLm1pbih0ZXh0Lmxlbmd0aCwgcG9zICsgMTAwIC0gZnJvbSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBjb2x1bW4gZm9yIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGNvbHVtbihwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGxldCB7IHRleHQsIGZyb20gfSA9IHRoaXMubGluZUF0KHBvcywgYmlhcyk7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNvdW50Q29sdW1uKHRleHQsIHBvcyAtIGZyb20pO1xuICAgICAgICBsZXQgb3ZlcnJpZGUgPSB0aGlzLm9wdGlvbnMub3ZlcnJpZGVJbmRlbnRhdGlvbiA/IHRoaXMub3B0aW9ucy5vdmVycmlkZUluZGVudGF0aW9uKGZyb20pIDogLTE7XG4gICAgICAgIGlmIChvdmVycmlkZSA+IC0xKVxuICAgICAgICAgICAgcmVzdWx0ICs9IG92ZXJyaWRlIC0gdGhpcy5jb3VudENvbHVtbih0ZXh0LCB0ZXh0LnNlYXJjaCgvXFxTfCQvKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGNvbHVtbiBwb3NpdGlvbiAodGFraW5nIHRhYnMgaW50byBhY2NvdW50KSBvZiB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbiBpbiB0aGUgZ2l2ZW4gc3RyaW5nLlxuICAgICovXG4gICAgY291bnRDb2x1bW4obGluZSwgcG9zID0gbGluZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvdW50Q29sdW1uKGxpbmUsIHRoaXMuc3RhdGUudGFiU2l6ZSwgcG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgaW5kZW50YXRpb24gY29sdW1uIG9mIHRoZSBsaW5lIGF0IHRoZSBnaXZlbiBwb2ludC5cbiAgICAqL1xuICAgIGxpbmVJbmRlbnQocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tIH0gPSB0aGlzLmxpbmVBdChwb3MsIGJpYXMpO1xuICAgICAgICBsZXQgb3ZlcnJpZGUgPSB0aGlzLm9wdGlvbnMub3ZlcnJpZGVJbmRlbnRhdGlvbjtcbiAgICAgICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICAgICAgICBsZXQgb3ZlcnJpZGVuID0gb3ZlcnJpZGUoZnJvbSk7XG4gICAgICAgICAgICBpZiAob3ZlcnJpZGVuID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb3VudENvbHVtbih0ZXh0LCB0ZXh0LnNlYXJjaCgvXFxTfCQvKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIFtzaW11bGF0ZWQgbGluZVxuICAgIGJyZWFrXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkluZGVudENvbnRleHQuY29uc3RydWN0b3Jeb3B0aW9ucy5zaW11bGF0ZUJyZWFrKVxuICAgIGZvciB0aGlzIGNvbnRleHQsIGlmIGFueS5cbiAgICAqL1xuICAgIGdldCBzaW11bGF0ZWRCcmVhaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zaW11bGF0ZUJyZWFrIHx8IG51bGw7XG4gICAgfVxufVxuLyoqXG5BIHN5bnRheCB0cmVlIG5vZGUgcHJvcCB1c2VkIHRvIGFzc29jaWF0ZSBpbmRlbnRhdGlvbiBzdHJhdGVnaWVzXG53aXRoIG5vZGUgdHlwZXMuIFN1Y2ggYSBzdHJhdGVneSBpcyBhIGZ1bmN0aW9uIGZyb20gYW4gaW5kZW50YXRpb25cbmNvbnRleHQgdG8gYSBjb2x1bW4gbnVtYmVyIChzZWUgYWxzb1xuW2BpbmRlbnRTdHJpbmdgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFN0cmluZykpIG9yIG51bGwsIHdoZXJlIG51bGxcbmluZGljYXRlcyB0aGF0IG5vIGRlZmluaXRpdmUgaW5kZW50YXRpb24gY2FuIGJlIGRldGVybWluZWQuXG4qL1xuY29uc3QgaW5kZW50Tm9kZVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vLyBDb21wdXRlIHRoZSBpbmRlbnRhdGlvbiBmb3IgYSBnaXZlbiBwb3NpdGlvbiBmcm9tIHRoZSBzeW50YXggdHJlZS5cbmZ1bmN0aW9uIHN5bnRheEluZGVudGF0aW9uKGN4LCBhc3QsIHBvcykge1xuICAgIGxldCBzdGFjayA9IGFzdC5yZXNvbHZlU3RhY2socG9zKTtcbiAgICBsZXQgaW5uZXIgPSBhc3QucmVzb2x2ZUlubmVyKHBvcywgLTEpLnJlc29sdmUocG9zLCAwKS5lbnRlclVuZmluaXNoZWROb2Rlc0JlZm9yZShwb3MpO1xuICAgIGlmIChpbm5lciAhPSBzdGFjay5ub2RlKSB7XG4gICAgICAgIGxldCBhZGQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgY3VyID0gaW5uZXI7IGN1ciAmJiAhKGN1ci5mcm9tIDwgc3RhY2subm9kZS5mcm9tIHx8IGN1ci50byA+IHN0YWNrLm5vZGUudG8gfHxcbiAgICAgICAgICAgIGN1ci5mcm9tID09IHN0YWNrLm5vZGUuZnJvbSAmJiBjdXIudHlwZSA9PSBzdGFjay5ub2RlLnR5cGUpOyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICAgICAgYWRkLnB1c2goY3VyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFkZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIHN0YWNrID0geyBub2RlOiBhZGRbaV0sIG5leHQ6IHN0YWNrIH07XG4gICAgfVxuICAgIHJldHVybiBpbmRlbnRGb3Ioc3RhY2ssIGN4LCBwb3MpO1xufVxuZnVuY3Rpb24gaW5kZW50Rm9yKHN0YWNrLCBjeCwgcG9zKSB7XG4gICAgZm9yIChsZXQgY3VyID0gc3RhY2s7IGN1cjsgY3VyID0gY3VyLm5leHQpIHtcbiAgICAgICAgbGV0IHN0cmF0ZWd5ID0gaW5kZW50U3RyYXRlZ3koY3VyLm5vZGUpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpXG4gICAgICAgICAgICByZXR1cm4gc3RyYXRlZ3koVHJlZUluZGVudENvbnRleHQuY3JlYXRlKGN4LCBwb3MsIGN1cikpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGlnbm9yZUNsb3NlZChjeCkge1xuICAgIHJldHVybiBjeC5wb3MgPT0gY3gub3B0aW9ucy5zaW11bGF0ZUJyZWFrICYmIGN4Lm9wdGlvbnMuc2ltdWxhdGVEb3VibGVCcmVhaztcbn1cbmZ1bmN0aW9uIGluZGVudFN0cmF0ZWd5KHRyZWUpIHtcbiAgICBsZXQgc3RyYXRlZ3kgPSB0cmVlLnR5cGUucHJvcChpbmRlbnROb2RlUHJvcCk7XG4gICAgaWYgKHN0cmF0ZWd5KVxuICAgICAgICByZXR1cm4gc3RyYXRlZ3k7XG4gICAgbGV0IGZpcnN0ID0gdHJlZS5maXJzdENoaWxkLCBjbG9zZTtcbiAgICBpZiAoZmlyc3QgJiYgKGNsb3NlID0gZmlyc3QudHlwZS5wcm9wKE5vZGVQcm9wLmNsb3NlZEJ5KSkpIHtcbiAgICAgICAgbGV0IGxhc3QgPSB0cmVlLmxhc3RDaGlsZCwgY2xvc2VkID0gbGFzdCAmJiBjbG9zZS5pbmRleE9mKGxhc3QubmFtZSkgPiAtMTtcbiAgICAgICAgcmV0dXJuIGN4ID0+IGRlbGltaXRlZFN0cmF0ZWd5KGN4LCB0cnVlLCAxLCB1bmRlZmluZWQsIGNsb3NlZCAmJiAhaWdub3JlQ2xvc2VkKGN4KSA/IGxhc3QuZnJvbSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIHJldHVybiB0cmVlLnBhcmVudCA9PSBudWxsID8gdG9wSW5kZW50IDogbnVsbDtcbn1cbmZ1bmN0aW9uIHRvcEluZGVudCgpIHsgcmV0dXJuIDA7IH1cbi8qKlxuT2JqZWN0cyBvZiB0aGlzIHR5cGUgcHJvdmlkZSBjb250ZXh0IGluZm9ybWF0aW9uIGFuZCBoZWxwZXJcbm1ldGhvZHMgdG8gaW5kZW50YXRpb24gZnVuY3Rpb25zIHJlZ2lzdGVyZWQgb24gc3ludGF4IG5vZGVzLlxuKi9cbmNsYXNzIFRyZWVJbmRlbnRDb250ZXh0IGV4dGVuZHMgSW5kZW50Q29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoYmFzZSwgXG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIGF0IHdoaWNoIGluZGVudGF0aW9uIGlzIGJlaW5nIGNvbXB1dGVkLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoYmFzZS5zdGF0ZSwgYmFzZS5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5iYXNlID0gYmFzZTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzeW50YXggdHJlZSBub2RlIHRvIHdoaWNoIHRoZSBpbmRlbnRhdGlvbiBzdHJhdGVneVxuICAgIGFwcGxpZXMuXG4gICAgKi9cbiAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXMuY29udGV4dC5ub2RlOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGJhc2UsIHBvcywgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyZWVJbmRlbnRDb250ZXh0KGJhc2UsIHBvcywgY29udGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgdGV4dCBkaXJlY3RseSBhZnRlciBgdGhpcy5wb3NgLCBlaXRoZXIgdGhlIGVudGlyZSBsaW5lXG4gICAgb3IgdGhlIG5leHQgMTAwIGNoYXJhY3RlcnMsIHdoaWNoZXZlciBpcyBzaG9ydGVyLlxuICAgICovXG4gICAgZ2V0IHRleHRBZnRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dEFmdGVyUG9zKHRoaXMucG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBpbmRlbnRhdGlvbiBhdCB0aGUgcmVmZXJlbmNlIGxpbmUgZm9yIGB0aGlzLm5vZGVgLCB3aGljaFxuICAgIGlzIHRoZSBsaW5lIG9uIHdoaWNoIGl0IHN0YXJ0cywgdW5sZXNzIHRoZXJlIGlzIGEgbm9kZSB0aGF0IGlzXG4gICAgX25vdF8gYSBwYXJlbnQgb2YgdGhpcyBub2RlIGNvdmVyaW5nIHRoZSBzdGFydCBvZiB0aGF0IGxpbmUuIElmXG4gICAgc28sIHRoZSBsaW5lIGF0IHRoZSBzdGFydCBvZiB0aGF0IG5vZGUgaXMgdHJpZWQsIGFnYWluIHNraXBwaW5nXG4gICAgb24gaWYgaXQgaXMgY292ZXJlZCBieSBhbm90aGVyIHN1Y2ggbm9kZS5cbiAgICAqL1xuICAgIGdldCBiYXNlSW5kZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlSW5kZW50Rm9yKHRoaXMubm9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gZm9yIHRoZSByZWZlcmVuY2UgbGluZSBvZiB0aGUgZ2l2ZW4gbm9kZVxuICAgIChzZWUgW2BiYXNlSW5kZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5UcmVlSW5kZW50Q29udGV4dC5iYXNlSW5kZW50KSkuXG4gICAgKi9cbiAgICBiYXNlSW5kZW50Rm9yKG5vZGUpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnN0YXRlLmRvYy5saW5lQXQobm9kZS5mcm9tKTtcbiAgICAgICAgLy8gU2tpcCBsaW5lIHN0YXJ0cyB0aGF0IGFyZSBjb3ZlcmVkIGJ5IGEgc2libGluZyAob3IgY291c2luLCBldGMpXG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBhdEJyZWFrID0gbm9kZS5yZXNvbHZlKGxpbmUuZnJvbSk7XG4gICAgICAgICAgICB3aGlsZSAoYXRCcmVhay5wYXJlbnQgJiYgYXRCcmVhay5wYXJlbnQuZnJvbSA9PSBhdEJyZWFrLmZyb20pXG4gICAgICAgICAgICAgICAgYXRCcmVhayA9IGF0QnJlYWsucGFyZW50O1xuICAgICAgICAgICAgaWYgKGlzUGFyZW50KGF0QnJlYWssIG5vZGUpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGluZSA9IHRoaXMuc3RhdGUuZG9jLmxpbmVBdChhdEJyZWFrLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVJbmRlbnQobGluZS5mcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29udGludWUgbG9va2luZyBmb3IgaW5kZW50YXRpb25zIGluIHRoZSBub2RlJ3MgcGFyZW50IG5vZGVzLFxuICAgIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGF0LlxuICAgICovXG4gICAgY29udGludWUoKSB7XG4gICAgICAgIHJldHVybiBpbmRlbnRGb3IodGhpcy5jb250ZXh0Lm5leHQsIHRoaXMuYmFzZSwgdGhpcy5wb3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUGFyZW50KHBhcmVudCwgb2YpIHtcbiAgICBmb3IgKGxldCBjdXIgPSBvZjsgY3VyOyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAocGFyZW50ID09IGN1cilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIENoZWNrIHdoZXRoZXIgYSBkZWxpbWl0ZWQgbm9kZSBpcyBhbGlnbmVkIChtZWFuaW5nIHRoZXJlIGFyZVxuLy8gbm9uLXNraXBwZWQgbm9kZXMgb24gdGhlIHNhbWUgbGluZSBhcyB0aGUgb3BlbmluZyBkZWxpbWl0ZXIpLiBBbmRcbi8vIGlmIHNvLCByZXR1cm4gdGhlIG9wZW5pbmcgdG9rZW4uXG5mdW5jdGlvbiBicmFja2V0ZWRBbGlnbmVkKGNvbnRleHQpIHtcbiAgICBsZXQgdHJlZSA9IGNvbnRleHQubm9kZTtcbiAgICBsZXQgb3BlblRva2VuID0gdHJlZS5jaGlsZEFmdGVyKHRyZWUuZnJvbSksIGxhc3QgPSB0cmVlLmxhc3RDaGlsZDtcbiAgICBpZiAoIW9wZW5Ub2tlbilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHNpbSA9IGNvbnRleHQub3B0aW9ucy5zaW11bGF0ZUJyZWFrO1xuICAgIGxldCBvcGVuTGluZSA9IGNvbnRleHQuc3RhdGUuZG9jLmxpbmVBdChvcGVuVG9rZW4uZnJvbSk7XG4gICAgbGV0IGxpbmVFbmQgPSBzaW0gPT0gbnVsbCB8fCBzaW0gPD0gb3BlbkxpbmUuZnJvbSA/IG9wZW5MaW5lLnRvIDogTWF0aC5taW4ob3BlbkxpbmUudG8sIHNpbSk7XG4gICAgZm9yIChsZXQgcG9zID0gb3BlblRva2VuLnRvOzspIHtcbiAgICAgICAgbGV0IG5leHQgPSB0cmVlLmNoaWxkQWZ0ZXIocG9zKTtcbiAgICAgICAgaWYgKCFuZXh0IHx8IG5leHQgPT0gbGFzdClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIW5leHQudHlwZS5pc1NraXBwZWQpIHtcbiAgICAgICAgICAgIGlmIChuZXh0LmZyb20gPj0gbGluZUVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBzcGFjZSA9IC9eICovLmV4ZWMob3BlbkxpbmUudGV4dC5zbGljZShvcGVuVG9rZW4udG8gLSBvcGVuTGluZS5mcm9tKSlbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogb3BlblRva2VuLmZyb20sIHRvOiBvcGVuVG9rZW4udG8gKyBzcGFjZSB9O1xuICAgICAgICB9XG4gICAgICAgIHBvcyA9IG5leHQudG87XG4gICAgfVxufVxuLyoqXG5BbiBpbmRlbnRhdGlvbiBzdHJhdGVneSBmb3IgZGVsaW1pdGVkICh1c3VhbGx5IGJyYWNrZXRlZCkgbm9kZXMuXG5XaWxsLCBieSBkZWZhdWx0LCBpbmRlbnQgb25lIHVuaXQgbW9yZSB0aGFuIHRoZSBwYXJlbnQncyBiYXNlXG5pbmRlbnQgdW5sZXNzIHRoZSBsaW5lIHN0YXJ0cyB3aXRoIGEgY2xvc2luZyB0b2tlbi4gV2hlbiBgYWxpZ25gXG5pcyB0cnVlIGFuZCB0aGVyZSBhcmUgbm9uLXNraXBwZWQgbm9kZXMgb24gdGhlIG5vZGUncyBvcGVuaW5nXG5saW5lLCB0aGUgY29udGVudCBvZiB0aGUgbm9kZSB3aWxsIGJlIGFsaWduZWQgd2l0aCB0aGUgZW5kIG9mIHRoZVxub3BlbmluZyBub2RlLCBsaWtlIHRoaXM6XG5cbiAgICBmb28oYmFyLFxuICAgICAgICBiYXopXG4qL1xuZnVuY3Rpb24gZGVsaW1pdGVkSW5kZW50KHsgY2xvc2luZywgYWxpZ24gPSB0cnVlLCB1bml0cyA9IDEgfSkge1xuICAgIHJldHVybiAoY29udGV4dCkgPT4gZGVsaW1pdGVkU3RyYXRlZ3koY29udGV4dCwgYWxpZ24sIHVuaXRzLCBjbG9zaW5nKTtcbn1cbmZ1bmN0aW9uIGRlbGltaXRlZFN0cmF0ZWd5KGNvbnRleHQsIGFsaWduLCB1bml0cywgY2xvc2luZywgY2xvc2VkQXQpIHtcbiAgICBsZXQgYWZ0ZXIgPSBjb250ZXh0LnRleHRBZnRlciwgc3BhY2UgPSBhZnRlci5tYXRjaCgvXlxccyovKVswXS5sZW5ndGg7XG4gICAgbGV0IGNsb3NlZCA9IGNsb3NpbmcgJiYgYWZ0ZXIuc2xpY2Uoc3BhY2UsIHNwYWNlICsgY2xvc2luZy5sZW5ndGgpID09IGNsb3NpbmcgfHwgY2xvc2VkQXQgPT0gY29udGV4dC5wb3MgKyBzcGFjZTtcbiAgICBsZXQgYWxpZ25lZCA9IGFsaWduID8gYnJhY2tldGVkQWxpZ25lZChjb250ZXh0KSA6IG51bGw7XG4gICAgaWYgKGFsaWduZWQpXG4gICAgICAgIHJldHVybiBjbG9zZWQgPyBjb250ZXh0LmNvbHVtbihhbGlnbmVkLmZyb20pIDogY29udGV4dC5jb2x1bW4oYWxpZ25lZC50byk7XG4gICAgcmV0dXJuIGNvbnRleHQuYmFzZUluZGVudCArIChjbG9zZWQgPyAwIDogY29udGV4dC51bml0ICogdW5pdHMpO1xufVxuLyoqXG5BbiBpbmRlbnRhdGlvbiBzdHJhdGVneSB0aGF0IGFsaWducyBhIG5vZGUncyBjb250ZW50IHRvIGl0cyBiYXNlXG5pbmRlbnRhdGlvbi5cbiovXG5jb25zdCBmbGF0SW5kZW50ID0gKGNvbnRleHQpID0+IGNvbnRleHQuYmFzZUluZGVudDtcbi8qKlxuQ3JlYXRlcyBhbiBpbmRlbnRhdGlvbiBzdHJhdGVneSB0aGF0LCBieSBkZWZhdWx0LCBpbmRlbnRzXG5jb250aW51ZWQgbGluZXMgb25lIHVuaXQgbW9yZSB0aGFuIHRoZSBub2RlJ3MgYmFzZSBpbmRlbnRhdGlvbi5cbllvdSBjYW4gcHJvdmlkZSBgZXhjZXB0YCB0byBwcmV2ZW50IGluZGVudGF0aW9uIG9mIGxpbmVzIHRoYXRcbm1hdGNoIGEgcGF0dGVybiAoZm9yIGV4YW1wbGUgYC9eZWxzZVxcYi9gIGluIGBpZmAvYGVsc2VgXG5jb25zdHJ1Y3RzKSwgYW5kIHlvdSBjYW4gY2hhbmdlIHRoZSBhbW91bnQgb2YgdW5pdHMgdXNlZCB3aXRoIHRoZVxuYHVuaXRzYCBvcHRpb24uXG4qL1xuZnVuY3Rpb24gY29udGludWVkSW5kZW50KHsgZXhjZXB0LCB1bml0cyA9IDEgfSA9IHt9KSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGxldCBtYXRjaEV4Y2VwdCA9IGV4Y2VwdCAmJiBleGNlcHQudGVzdChjb250ZXh0LnRleHRBZnRlcik7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmJhc2VJbmRlbnQgKyAobWF0Y2hFeGNlcHQgPyAwIDogdW5pdHMgKiBjb250ZXh0LnVuaXQpO1xuICAgIH07XG59XG5jb25zdCBEb250SW5kZW50QmV5b25kID0gMjAwO1xuLyoqXG5FbmFibGVzIHJlaW5kZW50YXRpb24gb24gaW5wdXQuIFdoZW4gYSBsYW5ndWFnZSBkZWZpbmVzIGFuXG5gaW5kZW50T25JbnB1dGAgZmllbGQgaW4gaXRzIFtsYW5ndWFnZVxuZGF0YV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGFBdCksIHdoaWNoIG11c3QgaG9sZCBhIHJlZ3VsYXJcbmV4cHJlc3Npb24sIHRoZSBsaW5lIGF0IHRoZSBjdXJzb3Igd2lsbCBiZSByZWluZGVudGVkIHdoZW5ldmVyIG5ld1xudGV4dCBpcyB0eXBlZCBhbmQgdGhlIGlucHV0IGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lIHVwIHRvIHRoZVxuY3Vyc29yIG1hdGNoZXMgdGhhdCByZWdleHAuXG5cblRvIGF2b2lkIHVubmVjY2VzYXJ5IHJlaW5kZW50cywgaXQgaXMgcmVjb21tZW5kZWQgdG8gc3RhcnQgdGhlXG5yZWdleHAgd2l0aCBgXmAgKHVzdWFsbHkgZm9sbG93ZWQgYnkgYFxccypgKSwgYW5kIGVuZCBpdCB3aXRoIGAkYC5cbkZvciBleGFtcGxlLCBgL15cXHMqXFx9JC9gIHdpbGwgcmVpbmRlbnQgd2hlbiBhIGNsb3NpbmcgYnJhY2UgaXNcbmFkZGVkIGF0IHRoZSBzdGFydCBvZiBhIGxpbmUuXG4qL1xuZnVuY3Rpb24gaW5kZW50T25JbnB1dCgpIHtcbiAgICByZXR1cm4gRWRpdG9yU3RhdGUudHJhbnNhY3Rpb25GaWx0ZXIub2YodHIgPT4ge1xuICAgICAgICBpZiAoIXRyLmRvY0NoYW5nZWQgfHwgIXRyLmlzVXNlckV2ZW50KFwiaW5wdXQudHlwZVwiKSAmJiAhdHIuaXNVc2VyRXZlbnQoXCJpbnB1dC5jb21wbGV0ZVwiKSlcbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgbGV0IHJ1bGVzID0gdHIuc3RhcnRTdGF0ZS5sYW5ndWFnZURhdGFBdChcImluZGVudE9uSW5wdXRcIiwgdHIuc3RhcnRTdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgaWYgKCFydWxlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIGxldCBkb2MgPSB0ci5uZXdEb2MsIHsgaGVhZCB9ID0gdHIubmV3U2VsZWN0aW9uLm1haW4sIGxpbmUgPSBkb2MubGluZUF0KGhlYWQpO1xuICAgICAgICBpZiAoaGVhZCA+IGxpbmUuZnJvbSArIERvbnRJbmRlbnRCZXlvbmQpXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIGxldCBsaW5lU3RhcnQgPSBkb2Muc2xpY2VTdHJpbmcobGluZS5mcm9tLCBoZWFkKTtcbiAgICAgICAgaWYgKCFydWxlcy5zb21lKHIgPT4gci50ZXN0KGxpbmVTdGFydCkpKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdHIsIGxhc3QgPSAtMSwgY2hhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB7IGhlYWQgfSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQoaGVhZCk7XG4gICAgICAgICAgICBpZiAobGluZS5mcm9tID09IGxhc3QpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsYXN0ID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKHN0YXRlLCBsaW5lLmZyb20pO1xuICAgICAgICAgICAgaWYgKGluZGVudCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IGN1ciA9IC9eXFxzKi8uZXhlYyhsaW5lLnRleHQpWzBdO1xuICAgICAgICAgICAgbGV0IG5vcm0gPSBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCk7XG4gICAgICAgICAgICBpZiAoY3VyICE9IG5vcm0pXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbGluZS5mcm9tLCB0bzogbGluZS5mcm9tICsgY3VyLmxlbmd0aCwgaW5zZXJ0OiBub3JtIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IFt0ciwgeyBjaGFuZ2VzLCBzZXF1ZW50aWFsOiB0cnVlIH1dIDogdHI7XG4gICAgfSk7XG59XG5cbi8qKlxuQSBmYWNldCB0aGF0IHJlZ2lzdGVycyBhIGNvZGUgZm9sZGluZyBzZXJ2aWNlLiBXaGVuIGNhbGxlZCB3aXRoXG50aGUgZXh0ZW50IG9mIGEgbGluZSwgc3VjaCBhIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBmb2xkYWJsZVxucmFuZ2UgdGhhdCBzdGFydHMgb24gdGhhdCBsaW5lIChidXQgY29udGludWVzIGJleW9uZCBpdCksIGlmIG9uZVxuY2FuIGJlIGZvdW5kLlxuKi9cbmNvbnN0IGZvbGRTZXJ2aWNlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuLyoqXG5UaGlzIG5vZGUgcHJvcCBpcyB1c2VkIHRvIGFzc29jaWF0ZSBmb2xkaW5nIGluZm9ybWF0aW9uIHdpdGhcbnN5bnRheCBub2RlIHR5cGVzLiBHaXZlbiBhIHN5bnRheCBub2RlLCBpdCBzaG91bGQgY2hlY2sgd2hldGhlclxudGhhdCB0cmVlIGlzIGZvbGRhYmxlIGFuZCByZXR1cm4gdGhlIHJhbmdlIHRoYXQgY2FuIGJlIGNvbGxhcHNlZFxud2hlbiBpdCBpcy5cbiovXG5jb25zdCBmb2xkTm9kZVByb3AgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVQcm9wKCk7XG4vKipcbltGb2xkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGROb2RlUHJvcCkgZnVuY3Rpb24gdGhhdCBmb2xkcyBldmVyeXRoaW5nIGJ1dFxudGhlIGZpcnN0IGFuZCB0aGUgbGFzdCBjaGlsZCBvZiBhIHN5bnRheCBub2RlLiBVc2VmdWwgZm9yIG5vZGVzXG50aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCBkZWxpbWl0ZXJzLlxuKi9cbmZ1bmN0aW9uIGZvbGRJbnNpZGUobm9kZSkge1xuICAgIGxldCBmaXJzdCA9IG5vZGUuZmlyc3RDaGlsZCwgbGFzdCA9IG5vZGUubGFzdENoaWxkO1xuICAgIHJldHVybiBmaXJzdCAmJiBmaXJzdC50byA8IGxhc3QuZnJvbSA/IHsgZnJvbTogZmlyc3QudG8sIHRvOiBsYXN0LnR5cGUuaXNFcnJvciA/IG5vZGUudG8gOiBsYXN0LmZyb20gfSA6IG51bGw7XG59XG5mdW5jdGlvbiBzeW50YXhGb2xkaW5nKHN0YXRlLCBzdGFydCwgZW5kKSB7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKTtcbiAgICBpZiAodHJlZS5sZW5ndGggPCBlbmQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBzdGFjayA9IHRyZWUucmVzb2x2ZVN0YWNrKGVuZCwgMSk7XG4gICAgbGV0IGZvdW5kID0gbnVsbDtcbiAgICBmb3IgKGxldCBpdGVyID0gc3RhY2s7IGl0ZXI7IGl0ZXIgPSBpdGVyLm5leHQpIHtcbiAgICAgICAgbGV0IGN1ciA9IGl0ZXIubm9kZTtcbiAgICAgICAgaWYgKGN1ci50byA8PSBlbmQgfHwgY3VyLmZyb20gPiBlbmQpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKGZvdW5kICYmIGN1ci5mcm9tIDwgc3RhcnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbGV0IHByb3AgPSBjdXIudHlwZS5wcm9wKGZvbGROb2RlUHJvcCk7XG4gICAgICAgIGlmIChwcm9wICYmIChjdXIudG8gPCB0cmVlLmxlbmd0aCAtIDUwIHx8IHRyZWUubGVuZ3RoID09IHN0YXRlLmRvYy5sZW5ndGggfHwgIWlzVW5maW5pc2hlZChjdXIpKSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gcHJvcChjdXIsIHN0YXRlKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5mcm9tIDw9IGVuZCAmJiB2YWx1ZS5mcm9tID49IHN0YXJ0ICYmIHZhbHVlLnRvID4gZW5kKVxuICAgICAgICAgICAgICAgIGZvdW5kID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gaXNVbmZpbmlzaGVkKG5vZGUpIHtcbiAgICBsZXQgY2ggPSBub2RlLmxhc3RDaGlsZDtcbiAgICByZXR1cm4gY2ggJiYgY2gudG8gPT0gbm9kZS50byAmJiBjaC50eXBlLmlzRXJyb3I7XG59XG4vKipcbkNoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIGxpbmUgaXMgZm9sZGFibGUuIEZpcnN0IGFza3MgYW55IGZvbGRcbnNlcnZpY2VzIHJlZ2lzdGVyZWQgdGhyb3VnaFxuW2Bmb2xkU2VydmljZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZFNlcnZpY2UpLCBhbmQgaWYgbm9uZSBvZiB0aGVtIHJldHVyblxuYSByZXN1bHQsIHRyaWVzIHRvIHF1ZXJ5IHRoZSBbZm9sZCBub2RlXG5wcm9wXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGROb2RlUHJvcCkgb2Ygc3ludGF4IG5vZGVzIHRoYXQgY292ZXIgdGhlIGVuZFxub2YgdGhlIGxpbmUuXG4qL1xuZnVuY3Rpb24gZm9sZGFibGUoc3RhdGUsIGxpbmVTdGFydCwgbGluZUVuZCkge1xuICAgIGZvciAobGV0IHNlcnZpY2Ugb2Ygc3RhdGUuZmFjZXQoZm9sZFNlcnZpY2UpKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzZXJ2aWNlKHN0YXRlLCBsaW5lU3RhcnQsIGxpbmVFbmQpO1xuICAgICAgICBpZiAocmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIHN5bnRheEZvbGRpbmcoc3RhdGUsIGxpbmVTdGFydCwgbGluZUVuZCk7XG59XG5mdW5jdGlvbiBtYXBSYW5nZShyYW5nZSwgbWFwcGluZykge1xuICAgIGxldCBmcm9tID0gbWFwcGluZy5tYXBQb3MocmFuZ2UuZnJvbSwgMSksIHRvID0gbWFwcGluZy5tYXBQb3MocmFuZ2UudG8sIC0xKTtcbiAgICByZXR1cm4gZnJvbSA+PSB0byA/IHVuZGVmaW5lZCA6IHsgZnJvbSwgdG8gfTtcbn1cbi8qKlxuU3RhdGUgZWZmZWN0IHRoYXQgY2FuIGJlIGF0dGFjaGVkIHRvIGEgdHJhbnNhY3Rpb24gdG8gZm9sZCB0aGVcbmdpdmVuIHJhbmdlLiAoWW91IHByb2JhYmx5IG9ubHkgbmVlZCB0aGlzIGluIGV4Y2VwdGlvbmFsXG5jaXJjdW1zdGFuY2Vz4oCUdXN1YWxseSB5b3UnbGwganVzdCB3YW50IHRvIGxldFxuW2Bmb2xkQ29kZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZENvZGUpIGFuZCB0aGUgW2ZvbGRcbmd1dHRlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkR3V0dGVyKSBjcmVhdGUgdGhlIHRyYW5zYWN0aW9ucy4pXG4qL1xuY29uc3QgZm9sZEVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoeyBtYXA6IG1hcFJhbmdlIH0pO1xuLyoqXG5TdGF0ZSBlZmZlY3QgdGhhdCB1bmZvbGRzIHRoZSBnaXZlbiByYW5nZSAoaWYgaXQgd2FzIGZvbGRlZCkuXG4qL1xuY29uc3QgdW5mb2xkRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogbWFwUmFuZ2UgfSk7XG5mdW5jdGlvbiBzZWxlY3RlZExpbmVzKHZpZXcpIHtcbiAgICBsZXQgbGluZXMgPSBbXTtcbiAgICBmb3IgKGxldCB7IGhlYWQgfSBvZiB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgaWYgKGxpbmVzLnNvbWUobCA9PiBsLmZyb20gPD0gaGVhZCAmJiBsLnRvID49IGhlYWQpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxpbmVzLnB1c2godmlldy5saW5lQmxvY2tBdChoZWFkKSk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbn1cbi8qKlxuVGhlIHN0YXRlIGZpZWxkIHRoYXQgc3RvcmVzIHRoZSBmb2xkZWQgcmFuZ2VzIChhcyBhIFtkZWNvcmF0aW9uXG5zZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uU2V0KSkuIENhbiBiZSBwYXNzZWQgdG9cbltgRWRpdG9yU3RhdGUudG9KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS50b0pTT04pIGFuZFxuW2Bmcm9tSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeZnJvbUpTT04pIHRvIHNlcmlhbGl6ZSB0aGUgZm9sZFxuc3RhdGUuXG4qL1xuY29uc3QgZm9sZFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgfSxcbiAgICB1cGRhdGUoZm9sZGVkLCB0cikge1xuICAgICAgICBpZiAodHIuaXNVc2VyRXZlbnQoXCJkZWxldGVcIikpXG4gICAgICAgICAgICB0ci5jaGFuZ2VzLml0ZXJDaGFuZ2VkUmFuZ2VzKChmcm9tQSwgdG9BKSA9PiBmb2xkZWQgPSBjbGVhclRvdWNoZWRGb2xkcyhmb2xkZWQsIGZyb21BLCB0b0EpKTtcbiAgICAgICAgZm9sZGVkID0gZm9sZGVkLm1hcCh0ci5jaGFuZ2VzKTtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZS5pcyhmb2xkRWZmZWN0KSAmJiAhZm9sZEV4aXN0cyhmb2xkZWQsIGUudmFsdWUuZnJvbSwgZS52YWx1ZS50bykpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBwcmVwYXJlUGxhY2Vob2xkZXIgfSA9IHRyLnN0YXRlLmZhY2V0KGZvbGRDb25maWcpO1xuICAgICAgICAgICAgICAgIGxldCB3aWRnZXQgPSAhcHJlcGFyZVBsYWNlaG9sZGVyID8gZm9sZFdpZGdldCA6XG4gICAgICAgICAgICAgICAgICAgIERlY29yYXRpb24ucmVwbGFjZSh7IHdpZGdldDogbmV3IFByZXBhcmVkRm9sZFdpZGdldChwcmVwYXJlUGxhY2Vob2xkZXIodHIuc3RhdGUsIGUudmFsdWUpKSB9KTtcbiAgICAgICAgICAgICAgICBmb2xkZWQgPSBmb2xkZWQudXBkYXRlKHsgYWRkOiBbd2lkZ2V0LnJhbmdlKGUudmFsdWUuZnJvbSwgZS52YWx1ZS50byldIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5pcyh1bmZvbGRFZmZlY3QpKSB7XG4gICAgICAgICAgICAgICAgZm9sZGVkID0gZm9sZGVkLnVwZGF0ZSh7IGZpbHRlcjogKGZyb20sIHRvKSA9PiBlLnZhbHVlLmZyb20gIT0gZnJvbSB8fCBlLnZhbHVlLnRvICE9IHRvLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJGcm9tOiBlLnZhbHVlLmZyb20sIGZpbHRlclRvOiBlLnZhbHVlLnRvIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFyIGZvbGRlZCByYW5nZXMgdGhhdCBjb3ZlciB0aGUgc2VsZWN0aW9uIGhlYWRcbiAgICAgICAgaWYgKHRyLnNlbGVjdGlvbilcbiAgICAgICAgICAgIGZvbGRlZCA9IGNsZWFyVG91Y2hlZEZvbGRzKGZvbGRlZCwgdHIuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgICAgIHJldHVybiBmb2xkZWQ7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IEVkaXRvclZpZXcuZGVjb3JhdGlvbnMuZnJvbShmKSxcbiAgICB0b0pTT04oZm9sZGVkLCBzdGF0ZSkge1xuICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgIGZvbGRlZC5iZXR3ZWVuKDAsIHN0YXRlLmRvYy5sZW5ndGgsIChmcm9tLCB0bykgPT4geyByYW5nZXMucHVzaChmcm9tLCB0byk7IH0pO1xuICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgIH0sXG4gICAgZnJvbUpTT04odmFsdWUpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggJSAyKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gZm9yIGZvbGQgc3RhdGVcIik7XG4gICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHZhbHVlW2krK10sIHRvID0gdmFsdWVbaSsrXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiB0byAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIGZvciBmb2xkIHN0YXRlXCIpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goZm9sZFdpZGdldC5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnNldChyYW5nZXMsIHRydWUpO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gY2xlYXJUb3VjaGVkRm9sZHMoZm9sZGVkLCBmcm9tLCB0byA9IGZyb20pIHtcbiAgICBsZXQgdG91Y2hlZCA9IGZhbHNlO1xuICAgIGZvbGRlZC5iZXR3ZWVuKGZyb20sIHRvLCAoYSwgYikgPT4geyBpZiAoYSA8IHRvICYmIGIgPiBmcm9tKVxuICAgICAgICB0b3VjaGVkID0gdHJ1ZTsgfSk7XG4gICAgcmV0dXJuICF0b3VjaGVkID8gZm9sZGVkIDogZm9sZGVkLnVwZGF0ZSh7XG4gICAgICAgIGZpbHRlckZyb206IGZyb20sXG4gICAgICAgIGZpbHRlclRvOiB0byxcbiAgICAgICAgZmlsdGVyOiAoYSwgYikgPT4gYSA+PSB0byB8fCBiIDw9IGZyb21cbiAgICB9KTtcbn1cbi8qKlxuR2V0IGEgW3JhbmdlIHNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZVNldCkgY29udGFpbmluZyB0aGUgZm9sZGVkIHJhbmdlc1xuaW4gdGhlIGdpdmVuIHN0YXRlLlxuKi9cbmZ1bmN0aW9uIGZvbGRlZFJhbmdlcyhzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSB8fCBSYW5nZVNldC5lbXB0eTtcbn1cbmZ1bmN0aW9uIGZpbmRGb2xkKHN0YXRlLCBmcm9tLCB0bykge1xuICAgIHZhciBfYTtcbiAgICBsZXQgZm91bmQgPSBudWxsO1xuICAgIChfYSA9IHN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYmV0d2Vlbihmcm9tLCB0bywgKGZyb20sIHRvKSA9PiB7XG4gICAgICAgIGlmICghZm91bmQgfHwgZm91bmQuZnJvbSA+IGZyb20pXG4gICAgICAgICAgICBmb3VuZCA9IHsgZnJvbSwgdG8gfTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmQ7XG59XG5mdW5jdGlvbiBmb2xkRXhpc3RzKGZvbGRlZCwgZnJvbSwgdG8pIHtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBmb2xkZWQuYmV0d2Vlbihmcm9tLCBmcm9tLCAoYSwgYikgPT4geyBpZiAoYSA9PSBmcm9tICYmIGIgPT0gdG8pXG4gICAgICAgIGZvdW5kID0gdHJ1ZTsgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gbWF5YmVFbmFibGUoc3RhdGUsIG90aGVyKSB7XG4gICAgcmV0dXJuIHN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpID8gb3RoZXIgOiBvdGhlci5jb25jYXQoU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKGNvZGVGb2xkaW5nKCkpKTtcbn1cbi8qKlxuRm9sZCB0aGUgbGluZXMgdGhhdCBhcmUgc2VsZWN0ZWQsIGlmIHBvc3NpYmxlLlxuKi9cbmNvbnN0IGZvbGRDb2RlID0gdmlldyA9PiB7XG4gICAgZm9yIChsZXQgbGluZSBvZiBzZWxlY3RlZExpbmVzKHZpZXcpKSB7XG4gICAgICAgIGxldCByYW5nZSA9IGZvbGRhYmxlKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IG1heWJlRW5hYmxlKHZpZXcuc3RhdGUsIFtmb2xkRWZmZWN0Lm9mKHJhbmdlKSwgYW5ub3VuY2VGb2xkKHZpZXcsIHJhbmdlKV0pIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbi8qKlxuVW5mb2xkIGZvbGRlZCByYW5nZXMgb24gc2VsZWN0ZWQgbGluZXMuXG4qL1xuY29uc3QgdW5mb2xkQ29kZSA9IHZpZXcgPT4ge1xuICAgIGlmICghdmlldy5zdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgZm9yIChsZXQgbGluZSBvZiBzZWxlY3RlZExpbmVzKHZpZXcpKSB7XG4gICAgICAgIGxldCBmb2xkZWQgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAoZm9sZGVkKVxuICAgICAgICAgICAgZWZmZWN0cy5wdXNoKHVuZm9sZEVmZmVjdC5vZihmb2xkZWQpLCBhbm5vdW5jZUZvbGQodmlldywgZm9sZGVkLCBmYWxzZSkpO1xuICAgIH1cbiAgICBpZiAoZWZmZWN0cy5sZW5ndGgpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzIH0pO1xuICAgIHJldHVybiBlZmZlY3RzLmxlbmd0aCA+IDA7XG59O1xuZnVuY3Rpb24gYW5ub3VuY2VGb2xkKHZpZXcsIHJhbmdlLCBmb2xkID0gdHJ1ZSkge1xuICAgIGxldCBsaW5lRnJvbSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5mcm9tKS5udW1iZXIsIGxpbmVUbyA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChyYW5nZS50bykubnVtYmVyO1xuICAgIHJldHVybiBFZGl0b3JWaWV3LmFubm91bmNlLm9mKGAke3ZpZXcuc3RhdGUucGhyYXNlKGZvbGQgPyBcIkZvbGRlZCBsaW5lc1wiIDogXCJVbmZvbGRlZCBsaW5lc1wiKX0gJHtsaW5lRnJvbX0gJHt2aWV3LnN0YXRlLnBocmFzZShcInRvXCIpfSAke2xpbmVUb30uYCk7XG59XG4vKipcbkZvbGQgYWxsIHRvcC1sZXZlbCBmb2xkYWJsZSByYW5nZXMuIE5vdGUgdGhhdCwgaW4gbW9zdCBjYXNlcyxcbmZvbGRpbmcgaW5mb3JtYXRpb24gd2lsbCBkZXBlbmQgb24gdGhlIFtzeW50YXhcbnRyZWVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2Uuc3ludGF4VHJlZSksIGFuZCBmb2xkaW5nIGV2ZXJ5dGhpbmcgbWF5IG5vdCB3b3JrXG5yZWxpYWJseSB3aGVuIHRoZSBkb2N1bWVudCBoYXNuJ3QgYmVlbiBmdWxseSBwYXJzZWQgKGVpdGhlclxuYmVjYXVzZSB0aGUgZWRpdG9yIHN0YXRlIHdhcyBvbmx5IGp1c3QgaW5pdGlhbGl6ZWQsIG9yIGJlY2F1c2UgdGhlXG5kb2N1bWVudCBpcyBzbyBiaWcgdGhhdCB0aGUgcGFyc2VyIGRlY2lkZWQgbm90IHRvIHBhcnNlIGl0XG5lbnRpcmVseSkuXG4qL1xuY29uc3QgZm9sZEFsbCA9IHZpZXcgPT4ge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBlZmZlY3RzID0gW107XG4gICAgZm9yIChsZXQgcG9zID0gMDsgcG9zIDwgc3RhdGUuZG9jLmxlbmd0aDspIHtcbiAgICAgICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHBvcyksIHJhbmdlID0gZm9sZGFibGUoc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChyYW5nZSlcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaChmb2xkRWZmZWN0Lm9mKHJhbmdlKSk7XG4gICAgICAgIHBvcyA9IChyYW5nZSA/IHZpZXcubGluZUJsb2NrQXQocmFuZ2UudG8pIDogbGluZSkudG8gKyAxO1xuICAgIH1cbiAgICBpZiAoZWZmZWN0cy5sZW5ndGgpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBtYXliZUVuYWJsZSh2aWV3LnN0YXRlLCBlZmZlY3RzKSB9KTtcbiAgICByZXR1cm4gISFlZmZlY3RzLmxlbmd0aDtcbn07XG4vKipcblVuZm9sZCBhbGwgZm9sZGVkIGNvZGUuXG4qL1xuY29uc3QgdW5mb2xkQWxsID0gdmlldyA9PiB7XG4gICAgbGV0IGZpZWxkID0gdmlldy5zdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIWZpZWxkIHx8ICFmaWVsZC5zaXplKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGVmZmVjdHMgPSBbXTtcbiAgICBmaWVsZC5iZXR3ZWVuKDAsIHZpZXcuc3RhdGUuZG9jLmxlbmd0aCwgKGZyb20sIHRvKSA9PiB7IGVmZmVjdHMucHVzaCh1bmZvbGRFZmZlY3Qub2YoeyBmcm9tLCB0byB9KSk7IH0pO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzIH0pO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8vIEZpbmQgdGhlIGZvbGRhYmxlIHJlZ2lvbiBjb250YWluaW5nIHRoZSBnaXZlbiBsaW5lLCBpZiBvbmUgZXhpc3RzXG5mdW5jdGlvbiBmb2xkYWJsZUNvbnRhaW5lcih2aWV3LCBsaW5lQmxvY2spIHtcbiAgICAvLyBMb29rIGJhY2t3YXJkcyB0aHJvdWdoIGxpbmUgYmxvY2tzIHVudGlsIHdlIGZpbmQgYSBmb2xkYWJsZSByZWdpb24gdGhhdFxuICAgIC8vIGludGVyc2VjdHMgd2l0aCB0aGUgbGluZVxuICAgIGZvciAobGV0IGxpbmUgPSBsaW5lQmxvY2s7Oykge1xuICAgICAgICBsZXQgZm9sZGFibGVSZWdpb24gPSBmb2xkYWJsZSh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAoZm9sZGFibGVSZWdpb24gJiYgZm9sZGFibGVSZWdpb24udG8gPiBsaW5lQmxvY2suZnJvbSlcbiAgICAgICAgICAgIHJldHVybiBmb2xkYWJsZVJlZ2lvbjtcbiAgICAgICAgaWYgKCFsaW5lLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGluZSA9IHZpZXcubGluZUJsb2NrQXQobGluZS5mcm9tIC0gMSk7XG4gICAgfVxufVxuLyoqXG5Ub2dnbGUgZm9sZGluZyBhdCBjdXJzb3JzLiBVbmZvbGRzIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGZvbGRcbnN0YXJ0aW5nIGluIHRoYXQgbGluZSwgdHJpZXMgdG8gZmluZCBhIGZvbGRhYmxlIHJhbmdlIGFyb3VuZCBpdFxub3RoZXJ3aXNlLlxuKi9cbmNvbnN0IHRvZ2dsZUZvbGQgPSAodmlldykgPT4ge1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgZm9yIChsZXQgbGluZSBvZiBzZWxlY3RlZExpbmVzKHZpZXcpKSB7XG4gICAgICAgIGxldCBmb2xkZWQgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAoZm9sZGVkKSB7XG4gICAgICAgICAgICBlZmZlY3RzLnB1c2godW5mb2xkRWZmZWN0Lm9mKGZvbGRlZCksIGFubm91bmNlRm9sZCh2aWV3LCBmb2xkZWQsIGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZm9sZFJhbmdlID0gZm9sZGFibGVDb250YWluZXIodmlldywgbGluZSk7XG4gICAgICAgICAgICBpZiAoZm9sZFJhbmdlKVxuICAgICAgICAgICAgICAgIGVmZmVjdHMucHVzaChmb2xkRWZmZWN0Lm9mKGZvbGRSYW5nZSksIGFubm91bmNlRm9sZCh2aWV3LCBmb2xkUmFuZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogbWF5YmVFbmFibGUodmlldy5zdGF0ZSwgZWZmZWN0cykgfSk7XG4gICAgcmV0dXJuICEhZWZmZWN0cy5sZW5ndGg7XG59O1xuLyoqXG5EZWZhdWx0IGZvbGQtcmVsYXRlZCBrZXkgYmluZGluZ3MuXG5cbiAtIEN0cmwtU2hpZnQtWyAoQ21kLUFsdC1bIG9uIG1hY09TKTogW2Bmb2xkQ29kZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZENvZGUpLlxuIC0gQ3RybC1TaGlmdC1dIChDbWQtQWx0LV0gb24gbWFjT1MpOiBbYHVuZm9sZENvZGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnVuZm9sZENvZGUpLlxuIC0gQ3RybC1BbHQtWzogW2Bmb2xkQWxsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkQWxsKS5cbiAtIEN0cmwtQWx0LV06IFtgdW5mb2xkQWxsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS51bmZvbGRBbGwpLlxuKi9cbmNvbnN0IGZvbGRLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiQ3RybC1TaGlmdC1bXCIsIG1hYzogXCJDbWQtQWx0LVtcIiwgcnVuOiBmb2xkQ29kZSB9LFxuICAgIHsga2V5OiBcIkN0cmwtU2hpZnQtXVwiLCBtYWM6IFwiQ21kLUFsdC1dXCIsIHJ1bjogdW5mb2xkQ29kZSB9LFxuICAgIHsga2V5OiBcIkN0cmwtQWx0LVtcIiwgcnVuOiBmb2xkQWxsIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1BbHQtXVwiLCBydW46IHVuZm9sZEFsbCB9XG5dO1xuY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcbiAgICBwbGFjZWhvbGRlckRPTTogbnVsbCxcbiAgICBwcmVwYXJlUGxhY2Vob2xkZXI6IG51bGwsXG4gICAgcGxhY2Vob2xkZXJUZXh0OiBcIuKAplwiXG59O1xuY29uc3QgZm9sZENvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUodmFsdWVzKSB7IHJldHVybiBjb21iaW5lQ29uZmlnKHZhbHVlcywgZGVmYXVsdENvbmZpZyk7IH1cbn0pO1xuLyoqXG5DcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgY29uZmlndXJlcyBjb2RlIGZvbGRpbmcuXG4qL1xuZnVuY3Rpb24gY29kZUZvbGRpbmcoY29uZmlnKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtmb2xkU3RhdGUsIGJhc2VUaGVtZSQxXTtcbiAgICBpZiAoY29uZmlnKVxuICAgICAgICByZXN1bHQucHVzaChmb2xkQ29uZmlnLm9mKGNvbmZpZykpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB3aWRnZXRUb0RPTSh2aWV3LCBwcmVwYXJlZCkge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjb25mID0gc3RhdGUuZmFjZXQoZm9sZENvbmZpZyk7XG4gICAgbGV0IG9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHZpZXcucG9zQXRET00oZXZlbnQudGFyZ2V0KSk7XG4gICAgICAgIGxldCBmb2xkZWQgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICBpZiAoZm9sZGVkKVxuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHVuZm9sZEVmZmVjdC5vZihmb2xkZWQpIH0pO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgaWYgKGNvbmYucGxhY2Vob2xkZXJET00pXG4gICAgICAgIHJldHVybiBjb25mLnBsYWNlaG9sZGVyRE9NKHZpZXcsIG9uY2xpY2ssIHByZXBhcmVkKTtcbiAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb25mLnBsYWNlaG9sZGVyVGV4dDtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc3RhdGUucGhyYXNlKFwiZm9sZGVkIGNvZGVcIikpO1xuICAgIGVsZW1lbnQudGl0bGUgPSBzdGF0ZS5waHJhc2UoXCJ1bmZvbGRcIik7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBcImNtLWZvbGRQbGFjZWhvbGRlclwiO1xuICAgIGVsZW1lbnQub25jbGljayA9IG9uY2xpY2s7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5jb25zdCBmb2xkV2lkZ2V0ID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ucmVwbGFjZSh7IHdpZGdldDogLypAX19QVVJFX18qL25ldyBjbGFzcyBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgICAgICB0b0RPTSh2aWV3KSB7IHJldHVybiB3aWRnZXRUb0RPTSh2aWV3LCBudWxsKTsgfVxuICAgIH0gfSk7XG5jbGFzcyBQcmVwYXJlZEZvbGRXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzLnZhbHVlID09IG90aGVyLnZhbHVlOyB9XG4gICAgdG9ET00odmlldykgeyByZXR1cm4gd2lkZ2V0VG9ET00odmlldywgdGhpcy52YWx1ZSk7IH1cbn1cbmNvbnN0IGZvbGRHdXR0ZXJEZWZhdWx0cyA9IHtcbiAgICBvcGVuVGV4dDogXCLijIRcIixcbiAgICBjbG9zZWRUZXh0OiBcIuKAulwiLFxuICAgIG1hcmtlckRPTTogbnVsbCxcbiAgICBkb21FdmVudEhhbmRsZXJzOiB7fSxcbiAgICBmb2xkaW5nQ2hhbmdlZDogKCkgPT4gZmFsc2Vcbn07XG5jbGFzcyBGb2xkTWFya2VyIGV4dGVuZHMgR3V0dGVyTWFya2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIG9wZW4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMub3BlbiA9IG9wZW47XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzLmNvbmZpZyA9PSBvdGhlci5jb25maWcgJiYgdGhpcy5vcGVuID09IG90aGVyLm9wZW47IH1cbiAgICB0b0RPTSh2aWV3KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tYXJrZXJET00pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWcubWFya2VyRE9NKHRoaXMub3Blbik7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSB0aGlzLm9wZW4gPyB0aGlzLmNvbmZpZy5vcGVuVGV4dCA6IHRoaXMuY29uZmlnLmNsb3NlZFRleHQ7XG4gICAgICAgIHNwYW4udGl0bGUgPSB2aWV3LnN0YXRlLnBocmFzZSh0aGlzLm9wZW4gPyBcIkZvbGQgbGluZVwiIDogXCJVbmZvbGQgbGluZVwiKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxufVxuLyoqXG5DcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgcmVnaXN0ZXJzIGEgZm9sZCBndXR0ZXIsIHdoaWNoIHNob3dzIGFcbmZvbGQgc3RhdHVzIGluZGljYXRvciBiZWZvcmUgZm9sZGFibGUgbGluZXMgKHdoaWNoIGNhbiBiZSBjbGlja2VkXG50byBmb2xkIG9yIHVuZm9sZCB0aGUgbGluZSkuXG4qL1xuZnVuY3Rpb24gZm9sZEd1dHRlcihjb25maWcgPSB7fSkge1xuICAgIGxldCBmdWxsQ29uZmlnID0geyAuLi5mb2xkR3V0dGVyRGVmYXVsdHMsIC4uLmNvbmZpZyB9O1xuICAgIGxldCBjYW5Gb2xkID0gbmV3IEZvbGRNYXJrZXIoZnVsbENvbmZpZywgdHJ1ZSksIGNhblVuZm9sZCA9IG5ldyBGb2xkTWFya2VyKGZ1bGxDb25maWcsIGZhbHNlKTtcbiAgICBsZXQgbWFya2VycyA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy5mcm9tID0gdmlldy52aWV3cG9ydC5mcm9tO1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJzID0gdGhpcy5idWlsZE1hcmtlcnModmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHxcbiAgICAgICAgICAgICAgICB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChsYW5ndWFnZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGxhbmd1YWdlKSB8fFxuICAgICAgICAgICAgICAgIHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpICE9IHVwZGF0ZS5zdGF0ZS5maWVsZChmb2xkU3RhdGUsIGZhbHNlKSB8fFxuICAgICAgICAgICAgICAgIHN5bnRheFRyZWUodXBkYXRlLnN0YXJ0U3RhdGUpICE9IHN5bnRheFRyZWUodXBkYXRlLnN0YXRlKSB8fFxuICAgICAgICAgICAgICAgIGZ1bGxDb25maWcuZm9sZGluZ0NoYW5nZWQodXBkYXRlKSlcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtlcnMgPSB0aGlzLmJ1aWxkTWFya2Vycyh1cGRhdGUudmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRNYXJrZXJzKHZpZXcpIHtcbiAgICAgICAgICAgIGxldCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiB2aWV3LnZpZXdwb3J0TGluZUJsb2Nrcykge1xuICAgICAgICAgICAgICAgIGxldCBtYXJrID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKSA/IGNhblVuZm9sZFxuICAgICAgICAgICAgICAgICAgICA6IGZvbGRhYmxlKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50bykgPyBjYW5Gb2xkIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAobWFyaylcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobGluZS5mcm9tLCBsaW5lLmZyb20sIG1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgeyBkb21FdmVudEhhbmRsZXJzIH0gPSBmdWxsQ29uZmlnO1xuICAgIHJldHVybiBbXG4gICAgICAgIG1hcmtlcnMsXG4gICAgICAgIGd1dHRlcih7XG4gICAgICAgICAgICBjbGFzczogXCJjbS1mb2xkR3V0dGVyXCIsXG4gICAgICAgICAgICBtYXJrZXJzKHZpZXcpIHsgdmFyIF9hOyByZXR1cm4gKChfYSA9IHZpZXcucGx1Z2luKG1hcmtlcnMpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFya2VycykgfHwgUmFuZ2VTZXQuZW1wdHk7IH0sXG4gICAgICAgICAgICBpbml0aWFsU3BhY2VyKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9sZE1hcmtlcihmdWxsQ29uZmlnLCBmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9tRXZlbnRIYW5kbGVyczoge1xuICAgICAgICAgICAgICAgIC4uLmRvbUV2ZW50SGFuZGxlcnMsXG4gICAgICAgICAgICAgICAgY2xpY2s6ICh2aWV3LCBsaW5lLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9tRXZlbnRIYW5kbGVycy5jbGljayAmJiBkb21FdmVudEhhbmRsZXJzLmNsaWNrKHZpZXcsIGxpbmUsIGV2ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm9sZGVkID0gZmluZEZvbGQodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHVuZm9sZEVmZmVjdC5vZihmb2xkZWQpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlID0gZm9sZGFibGUodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogZm9sZEVmZmVjdC5vZihyYW5nZSkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgY29kZUZvbGRpbmcoKVxuICAgIF07XG59XG5jb25zdCBiYXNlVGhlbWUkMSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tZm9sZFBsYWNlaG9sZGVyXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNlZWVcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjZGRkXCIsXG4gICAgICAgIGNvbG9yOiBcIiM4ODhcIixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiBcIi4yZW1cIixcbiAgICAgICAgbWFyZ2luOiBcIjAgMXB4XCIsXG4gICAgICAgIHBhZGRpbmc6IFwiMCAxcHhcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgIH0sXG4gICAgXCIuY20tZm9sZEd1dHRlciBzcGFuXCI6IHtcbiAgICAgICAgcGFkZGluZzogXCIwIDFweFwiLFxuICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiXG4gICAgfVxufSk7XG5cbi8qKlxuQSBoaWdobGlnaHQgc3R5bGUgYXNzb2NpYXRlcyBDU1Mgc3R5bGVzIHdpdGggaGlnbGlnaHRpbmdcblt0YWdzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2hpZ2hsaWdodC5UYWcpLlxuKi9cbmNsYXNzIEhpZ2hsaWdodFN0eWxlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgdGFnIHN0eWxlcyB1c2VkIHRvIGNyZWF0ZSB0aGlzIGhpZ2hsaWdodCBzdHlsZS5cbiAgICAqL1xuICAgIHNwZWNzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3BlY3MgPSBzcGVjcztcbiAgICAgICAgbGV0IG1vZFNwZWM7XG4gICAgICAgIGZ1bmN0aW9uIGRlZihzcGVjKSB7XG4gICAgICAgICAgICBsZXQgY2xzID0gU3R5bGVNb2R1bGUubmV3TmFtZSgpO1xuICAgICAgICAgICAgKG1vZFNwZWMgfHwgKG1vZFNwZWMgPSBPYmplY3QuY3JlYXRlKG51bGwpKSlbXCIuXCIgKyBjbHNdID0gc3BlYztcbiAgICAgICAgICAgIHJldHVybiBjbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxsID0gdHlwZW9mIG9wdGlvbnMuYWxsID09IFwic3RyaW5nXCIgPyBvcHRpb25zLmFsbCA6IG9wdGlvbnMuYWxsID8gZGVmKG9wdGlvbnMuYWxsKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc2NvcGVPcHQgPSBvcHRpb25zLnNjb3BlO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGVPcHQgaW5zdGFuY2VvZiBMYW5ndWFnZSA/ICh0eXBlKSA9PiB0eXBlLnByb3AobGFuZ3VhZ2VEYXRhUHJvcCkgPT0gc2NvcGVPcHQuZGF0YVxuICAgICAgICAgICAgOiBzY29wZU9wdCA/ICh0eXBlKSA9PiB0eXBlID09IHNjb3BlT3B0IDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0eWxlID0gdGFnSGlnaGxpZ2h0ZXIoc3BlY3MubWFwKHN0eWxlID0+ICh7XG4gICAgICAgICAgICB0YWc6IHN0eWxlLnRhZyxcbiAgICAgICAgICAgIGNsYXNzOiBzdHlsZS5jbGFzcyB8fCBkZWYoT2JqZWN0LmFzc2lnbih7fSwgc3R5bGUsIHsgdGFnOiBudWxsIH0pKVxuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGFsbCxcbiAgICAgICAgfSkuc3R5bGU7XG4gICAgICAgIHRoaXMubW9kdWxlID0gbW9kU3BlYyA/IG5ldyBTdHlsZU1vZHVsZShtb2RTcGVjKSA6IG51bGw7XG4gICAgICAgIHRoaXMudGhlbWVUeXBlID0gb3B0aW9ucy50aGVtZVR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGhpZ2hsaWdodGVyIHN0eWxlIHRoYXQgYXNzb2NpYXRlcyB0aGUgZ2l2ZW4gc3R5bGVzIHRvXG4gICAgdGhlIGdpdmVuIHRhZ3MuIFRoZSBzcGVjcyBtdXN0IGJlIG9iamVjdHMgdGhhdCBob2xkIGEgc3R5bGUgdGFnXG4gICAgb3IgYXJyYXkgb2YgdGFncyBpbiB0aGVpciBgdGFnYCBwcm9wZXJ0eSwgYW5kIGVpdGhlciBhIHNpbmdsZVxuICAgIGBjbGFzc2AgcHJvcGVydHkgcHJvdmlkaW5nIGEgc3RhdGljIENTUyBjbGFzcyAoZm9yIGhpZ2hsaWdodGVyXG4gICAgdGhhdCByZWx5IG9uIGV4dGVybmFsIHN0eWxpbmcpLCBvciBhXG4gICAgW2BzdHlsZS1tb2RgXShodHRwczovL2dpdGh1Yi5jb20vbWFyaWpuaC9zdHlsZS1tb2QjZG9jdW1lbnRhdGlvbiktc3R5bGVcbiAgICBzZXQgb2YgQ1NTIHByb3BlcnRpZXMgKHdoaWNoIGRlZmluZSB0aGUgc3R5bGluZyBmb3IgdGhvc2UgdGFncykuXG4gICAgXG4gICAgVGhlIENTUyBydWxlcyBjcmVhdGVkIGZvciBhIGhpZ2hsaWdodGVyIHdpbGwgYmUgZW1pdHRlZCBpbiB0aGVcbiAgICBvcmRlciBvZiB0aGUgc3BlYydzIHByb3BlcnRpZXMuIFRoYXQgbWVhbnMgdGhhdCBmb3IgZWxlbWVudHMgdGhhdFxuICAgIGhhdmUgbXVsdGlwbGUgdGFncyBhc3NvY2lhdGVkIHdpdGggdGhlbSwgc3R5bGVzIGRlZmluZWQgZnVydGhlclxuICAgIGRvd24gaW4gdGhlIGxpc3Qgd2lsbCBoYXZlIGEgaGlnaGVyIENTUyBwcmVjZWRlbmNlIHRoYW4gc3R5bGVzXG4gICAgZGVmaW5lZCBlYXJsaWVyLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShzcGVjcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEhpZ2hsaWdodFN0eWxlKHNwZWNzLCBvcHRpb25zIHx8IHt9KTtcbiAgICB9XG59XG5jb25zdCBoaWdobGlnaHRlckZhY2V0ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZmFsbGJhY2tIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUodmFsdWVzKSB7IHJldHVybiB2YWx1ZXMubGVuZ3RoID8gW3ZhbHVlc1swXV0gOiBudWxsOyB9XG59KTtcbmZ1bmN0aW9uIGdldEhpZ2hsaWdodGVycyhzdGF0ZSkge1xuICAgIGxldCBtYWluID0gc3RhdGUuZmFjZXQoaGlnaGxpZ2h0ZXJGYWNldCk7XG4gICAgcmV0dXJuIG1haW4ubGVuZ3RoID8gbWFpbiA6IHN0YXRlLmZhY2V0KGZhbGxiYWNrSGlnaGxpZ2h0ZXIpO1xufVxuLyoqXG5XcmFwIGEgaGlnaGxpZ2h0ZXIgaW4gYW4gZWRpdG9yIGV4dGVuc2lvbiB0aGF0IHVzZXMgaXQgdG8gYXBwbHlcbnN5bnRheCBoaWdobGlnaHRpbmcgdG8gdGhlIGVkaXRvciBjb250ZW50LlxuXG5XaGVuIG11bHRpcGxlIChub24tZmFsbGJhY2spIHN0eWxlcyBhcmUgcHJvdmlkZWQsIHRoZSBzdHlsaW5nXG5hcHBsaWVkIGlzIHRoZSB1bmlvbiBvZiB0aGUgY2xhc3NlcyB0aGV5IGVtaXQuXG4qL1xuZnVuY3Rpb24gc3ludGF4SGlnaGxpZ2h0aW5nKGhpZ2hsaWdodGVyLCBvcHRpb25zKSB7XG4gICAgbGV0IGV4dCA9IFt0cmVlSGlnaGxpZ2h0ZXJdLCB0aGVtZVR5cGU7XG4gICAgaWYgKGhpZ2hsaWdodGVyIGluc3RhbmNlb2YgSGlnaGxpZ2h0U3R5bGUpIHtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVyLm1vZHVsZSlcbiAgICAgICAgICAgIGV4dC5wdXNoKEVkaXRvclZpZXcuc3R5bGVNb2R1bGUub2YoaGlnaGxpZ2h0ZXIubW9kdWxlKSk7XG4gICAgICAgIHRoZW1lVHlwZSA9IGhpZ2hsaWdodGVyLnRoZW1lVHlwZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5mYWxsYmFjaylcbiAgICAgICAgZXh0LnB1c2goZmFsbGJhY2tIaWdobGlnaHRlci5vZihoaWdobGlnaHRlcikpO1xuICAgIGVsc2UgaWYgKHRoZW1lVHlwZSlcbiAgICAgICAgZXh0LnB1c2goaGlnaGxpZ2h0ZXJGYWNldC5jb21wdXRlTihbRWRpdG9yVmlldy5kYXJrVGhlbWVdLCBzdGF0ZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5kYXJrVGhlbWUpID09ICh0aGVtZVR5cGUgPT0gXCJkYXJrXCIpID8gW2hpZ2hsaWdodGVyXSA6IFtdO1xuICAgICAgICB9KSk7XG4gICAgZWxzZVxuICAgICAgICBleHQucHVzaChoaWdobGlnaHRlckZhY2V0Lm9mKGhpZ2hsaWdodGVyKSk7XG4gICAgcmV0dXJuIGV4dDtcbn1cbi8qKlxuUmV0dXJucyB0aGUgQ1NTIGNsYXNzZXMgKGlmIGFueSkgdGhhdCB0aGUgaGlnaGxpZ2h0ZXJzIGFjdGl2ZSBpblxudGhlIHN0YXRlIHdvdWxkIGFzc2lnbiB0byB0aGUgZ2l2ZW4gc3R5bGVcblt0YWdzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2hpZ2hsaWdodC5UYWcpIGFuZFxuKG9wdGlvbmFsKSBsYW5ndWFnZVxuW3Njb3BlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkhpZ2hsaWdodFN0eWxlXmRlZmluZV5vcHRpb25zLnNjb3BlKS5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRpbmdGb3Ioc3RhdGUsIHRhZ3MsIHNjb3BlKSB7XG4gICAgbGV0IGhpZ2hsaWdodGVycyA9IGdldEhpZ2hsaWdodGVycyhzdGF0ZSk7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgaWYgKGhpZ2hsaWdodGVycylcbiAgICAgICAgZm9yIChsZXQgaGlnaGxpZ2h0ZXIgb2YgaGlnaGxpZ2h0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWhpZ2hsaWdodGVyLnNjb3BlIHx8IHNjb3BlICYmIGhpZ2hsaWdodGVyLnNjb3BlKHNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGxldCBjbHMgPSBoaWdobGlnaHRlci5zdHlsZSh0YWdzKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPyByZXN1bHQgKyBcIiBcIiArIGNscyA6IGNscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jbGFzcyBUcmVlSGlnaGxpZ2h0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5tYXJrQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnRyZWUgPSBzeW50YXhUcmVlKHZpZXcuc3RhdGUpO1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY28odmlldywgZ2V0SGlnaGxpZ2h0ZXJzKHZpZXcuc3RhdGUpKTtcbiAgICAgICAgdGhpcy5kZWNvcmF0ZWRUbyA9IHZpZXcudmlld3BvcnQudG87XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHVwZGF0ZS5zdGF0ZSksIGhpZ2hsaWdodGVycyA9IGdldEhpZ2hsaWdodGVycyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBsZXQgc3R5bGVDaGFuZ2UgPSBoaWdobGlnaHRlcnMgIT0gZ2V0SGlnaGxpZ2h0ZXJzKHVwZGF0ZS5zdGFydFN0YXRlKTtcbiAgICAgICAgbGV0IHsgdmlld3BvcnQgfSA9IHVwZGF0ZS52aWV3LCBkZWNvcmF0ZWRUb01hcHBlZCA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyh0aGlzLmRlY29yYXRlZFRvLCAxKTtcbiAgICAgICAgaWYgKHRyZWUubGVuZ3RoIDwgdmlld3BvcnQudG8gJiYgIXN0eWxlQ2hhbmdlICYmIHRyZWUudHlwZSA9PSB0aGlzLnRyZWUudHlwZSAmJiBkZWNvcmF0ZWRUb01hcHBlZCA+PSB2aWV3cG9ydC50bykge1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdGlvbnMubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGVkVG8gPSBkZWNvcmF0ZWRUb01hcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmVlICE9IHRoaXMudHJlZSB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8IHN0eWxlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvKHVwZGF0ZS52aWV3LCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0ZWRUbyA9IHZpZXdwb3J0LnRvO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJ1aWxkRGVjbyh2aWV3LCBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgaWYgKCFoaWdobGlnaHRlcnMgfHwgIXRoaXMudHJlZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xuICAgICAgICAgICAgaGlnaGxpZ2h0VHJlZSh0aGlzLnRyZWUsIGhpZ2hsaWdodGVycywgKGZyb20sIHRvLCBzdHlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCB0aGlzLm1hcmtDYWNoZVtzdHlsZV0gfHwgKHRoaXMubWFya0NhY2hlW3N0eWxlXSA9IERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBzdHlsZSB9KSkpO1xuICAgICAgICAgICAgfSwgZnJvbSwgdG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cbn1cbmNvbnN0IHRyZWVIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2goLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKFRyZWVIaWdobGlnaHRlciwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pKTtcbi8qKlxuQSBkZWZhdWx0IGhpZ2hsaWdodCBzdHlsZSAod29ya3Mgd2VsbCB3aXRoIGxpZ2h0IHRoZW1lcykuXG4qL1xuY29uc3QgZGVmYXVsdEhpZ2hsaWdodFN0eWxlID0gLypAX19QVVJFX18qL0hpZ2hsaWdodFN0eWxlLmRlZmluZShbXG4gICAgeyB0YWc6IHRhZ3MubWV0YSxcbiAgICAgICAgY29sb3I6IFwiIzQwNDc0MFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGluayxcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCIgfSxcbiAgICB7IHRhZzogdGFncy5oZWFkaW5nLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcyxcbiAgICAgICAgZm9udFN0eWxlOiBcIml0YWxpY1wiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3Ryb25nLFxuICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmlrZXRocm91Z2gsXG4gICAgICAgIHRleHREZWNvcmF0aW9uOiBcImxpbmUtdGhyb3VnaFwiIH0sXG4gICAgeyB0YWc6IHRhZ3Mua2V5d29yZCxcbiAgICAgICAgY29sb3I6IFwiIzcwOFwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLmF0b20sIHRhZ3MuYm9vbCwgdGFncy51cmwsIHRhZ3MuY29udGVudFNlcGFyYXRvciwgdGFncy5sYWJlbE5hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjE5XCIgfSxcbiAgICB7IHRhZzogW3RhZ3MubGl0ZXJhbCwgdGFncy5pbnNlcnRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiMxNjRcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5zdHJpbmcsIHRhZ3MuZGVsZXRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiNhMTFcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5yZWdleHAsIHRhZ3MuZXNjYXBlLCAvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sXG4gICAgICAgIGNvbG9yOiBcIiNlNDBcIiB9LFxuICAgIHsgdGFnOiAvKkBfX1BVUkVfXyovdGFncy5kZWZpbml0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzAwZlwiIH0sXG4gICAgeyB0YWc6IC8qQF9fUFVSRV9fKi90YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzMwYVwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLnR5cGVOYW1lLCB0YWdzLm5hbWVzcGFjZV0sXG4gICAgICAgIGNvbG9yOiBcIiMwODVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSxcbiAgICAgICAgY29sb3I6IFwiIzE2N1wiIH0sXG4gICAgeyB0YWc6IFsvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgdGFncy5tYWNyb05hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjU2XCIgfSxcbiAgICB7IHRhZzogLypAX19QVVJFX18qL3RhZ3MuZGVmaW5pdGlvbih0YWdzLnByb3BlcnR5TmFtZSksXG4gICAgICAgIGNvbG9yOiBcIiMwMGNcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsXG4gICAgICAgIGNvbG9yOiBcIiM5NDBcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmludmFsaWQsXG4gICAgICAgIGNvbG9yOiBcIiNmMDBcIiB9XG5dKTtcblxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIiYuY20tZm9jdXNlZCAuY20tbWF0Y2hpbmdCcmFja2V0XCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiMzMjhjODI1MlwiIH0sXG4gICAgXCImLmNtLWZvY3VzZWQgLmNtLW5vbm1hdGNoaW5nQnJhY2tldFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjYmI1NTU1NDRcIiB9XG59KTtcbmNvbnN0IERlZmF1bHRTY2FuRGlzdCA9IDEwMDAwLCBEZWZhdWx0QnJhY2tldHMgPSBcIigpW117fVwiO1xuY29uc3QgYnJhY2tldE1hdGNoaW5nQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShjb25maWdzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIHtcbiAgICAgICAgICAgIGFmdGVyQ3Vyc29yOiB0cnVlLFxuICAgICAgICAgICAgYnJhY2tldHM6IERlZmF1bHRCcmFja2V0cyxcbiAgICAgICAgICAgIG1heFNjYW5EaXN0YW5jZTogRGVmYXVsdFNjYW5EaXN0LFxuICAgICAgICAgICAgcmVuZGVyTWF0Y2g6IGRlZmF1bHRSZW5kZXJNYXRjaFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbmNvbnN0IG1hdGNoaW5nTWFyayA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1tYXRjaGluZ0JyYWNrZXRcIiB9KSwgbm9ubWF0Y2hpbmdNYXJrID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLW5vbm1hdGNoaW5nQnJhY2tldFwiIH0pO1xuZnVuY3Rpb24gZGVmYXVsdFJlbmRlck1hdGNoKG1hdGNoKSB7XG4gICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgbGV0IG1hcmsgPSBtYXRjaC5tYXRjaGVkID8gbWF0Y2hpbmdNYXJrIDogbm9ubWF0Y2hpbmdNYXJrO1xuICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5zdGFydC5mcm9tLCBtYXRjaC5zdGFydC50bykpO1xuICAgIGlmIChtYXRjaC5lbmQpXG4gICAgICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5lbmQuZnJvbSwgbWF0Y2guZW5kLnRvKSk7XG4gICAgcmV0dXJuIGRlY29yYXRpb25zO1xufVxuY29uc3QgYnJhY2tldE1hdGNoaW5nU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIERlY29yYXRpb24ubm9uZTsgfSxcbiAgICB1cGRhdGUoZGVjbywgdHIpIHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkICYmICF0ci5zZWxlY3Rpb24pXG4gICAgICAgICAgICByZXR1cm4gZGVjbztcbiAgICAgICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgICAgIGxldCBjb25maWcgPSB0ci5zdGF0ZS5mYWNldChicmFja2V0TWF0Y2hpbmdDb25maWcpO1xuICAgICAgICBmb3IgKGxldCByYW5nZSBvZiB0ci5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgLTEsIGNvbmZpZylcbiAgICAgICAgICAgICAgICB8fCAocmFuZ2UuaGVhZCA+IDAgJiYgbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCAtIDEsIDEsIGNvbmZpZykpXG4gICAgICAgICAgICAgICAgfHwgKGNvbmZpZy5hZnRlckN1cnNvciAmJlxuICAgICAgICAgICAgICAgICAgICAobWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgMSwgY29uZmlnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJhbmdlLmhlYWQgPCB0ci5zdGF0ZS5kb2MubGVuZ3RoICYmIG1hdGNoQnJhY2tldHModHIuc3RhdGUsIHJhbmdlLmhlYWQgKyAxLCAtMSwgY29uZmlnKSkpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zLmNvbmNhdChjb25maWcucmVuZGVyTWF0Y2gobWF0Y2gsIHRyLnN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY29yYXRpb25zLCB0cnVlKTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYpXG59KTtcbmNvbnN0IGJyYWNrZXRNYXRjaGluZ1VuaXF1ZSA9IFtcbiAgICBicmFja2V0TWF0Y2hpbmdTdGF0ZSxcbiAgICBiYXNlVGhlbWVcbl07XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIGJyYWNrZXQgbWF0Y2hpbmcuIFdoZW5ldmVyIHRoZVxuY3Vyc29yIGlzIG5leHQgdG8gYSBicmFja2V0LCB0aGF0IGJyYWNrZXQgYW5kIHRoZSBvbmUgaXQgbWF0Y2hlc1xuYXJlIGhpZ2hsaWdodGVkLiBPciwgd2hlbiBubyBtYXRjaGluZyBicmFja2V0IGlzIGZvdW5kLCBhbm90aGVyXG5oaWdobGlnaHRpbmcgc3R5bGUgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGlzLlxuKi9cbmZ1bmN0aW9uIGJyYWNrZXRNYXRjaGluZyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbYnJhY2tldE1hdGNoaW5nQ29uZmlnLm9mKGNvbmZpZyksIGJyYWNrZXRNYXRjaGluZ1VuaXF1ZV07XG59XG4vKipcbldoZW4gbGFyZ2VyIHN5bnRheCBub2Rlcywgc3VjaCBhcyBIVE1MIHRhZ3MsIGFyZSBtYXJrZWQgYXNcbm9wZW5pbmcvY2xvc2luZywgaXQgY2FuIGJlIGEgYml0IG1lc3N5IHRvIHRyZWF0IHRoZSB3aG9sZSBub2RlIGFzXG5hIG1hdGNoYWJsZSBicmFja2V0LiBUaGlzIG5vZGUgcHJvcCBhbGxvd3MgeW91IHRvIGRlZmluZSwgZm9yIHN1Y2hcbmEgbm9kZSwgYSDigJhoYW5kbGXigJnigJR0aGUgcGFydCBvZiB0aGUgbm9kZSB0aGF0IGlzIGhpZ2hsaWdodGVkLCBhbmRcbnRoYXQgdGhlIGN1cnNvciBtdXN0IGJlIG9uIHRvIGFjdGl2YXRlIGhpZ2hsaWdodGluZyBpbiB0aGUgZmlyc3RcbnBsYWNlLlxuKi9cbmNvbnN0IGJyYWNrZXRNYXRjaGluZ0hhbmRsZSA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVByb3AoKTtcbmZ1bmN0aW9uIG1hdGNoaW5nTm9kZXMobm9kZSwgZGlyLCBicmFja2V0cykge1xuICAgIGxldCBieVByb3AgPSBub2RlLnByb3AoZGlyIDwgMCA/IE5vZGVQcm9wLm9wZW5lZEJ5IDogTm9kZVByb3AuY2xvc2VkQnkpO1xuICAgIGlmIChieVByb3ApXG4gICAgICAgIHJldHVybiBieVByb3A7XG4gICAgaWYgKG5vZGUubmFtZS5sZW5ndGggPT0gMSkge1xuICAgICAgICBsZXQgaW5kZXggPSBicmFja2V0cy5pbmRleE9mKG5vZGUubmFtZSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xICYmIGluZGV4ICUgMiA9PSAoZGlyIDwgMCA/IDEgOiAwKSlcbiAgICAgICAgICAgIHJldHVybiBbYnJhY2tldHNbaW5kZXggKyBkaXJdXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBmaW5kSGFuZGxlKG5vZGUpIHtcbiAgICBsZXQgaGFzSGFuZGxlID0gbm9kZS50eXBlLnByb3AoYnJhY2tldE1hdGNoaW5nSGFuZGxlKTtcbiAgICByZXR1cm4gaGFzSGFuZGxlID8gaGFzSGFuZGxlKG5vZGUubm9kZSkgOiBub2RlO1xufVxuLyoqXG5GaW5kIHRoZSBtYXRjaGluZyBicmFja2V0IGZvciB0aGUgdG9rZW4gYXQgYHBvc2AsIHNjYW5uaW5nXG5kaXJlY3Rpb24gYGRpcmAuIE9ubHkgdGhlIGBicmFja2V0c2AgYW5kIGBtYXhTY2FuRGlzdGFuY2VgXG5wcm9wZXJ0aWVzIGFyZSB1c2VkIGZyb20gYGNvbmZpZ2AsIGlmIGdpdmVuLiBSZXR1cm5zIG51bGwgaWYgbm9cbmJyYWNrZXQgd2FzIGZvdW5kIGF0IGBwb3NgLCBvciBhIG1hdGNoIHJlc3VsdCBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IG1heFNjYW5EaXN0YW5jZSA9IGNvbmZpZy5tYXhTY2FuRGlzdGFuY2UgfHwgRGVmYXVsdFNjYW5EaXN0LCBicmFja2V0cyA9IGNvbmZpZy5icmFja2V0cyB8fCBEZWZhdWx0QnJhY2tldHM7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKSwgbm9kZSA9IHRyZWUucmVzb2x2ZUlubmVyKHBvcywgZGlyKTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnQpIHtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSBtYXRjaGluZ05vZGVzKGN1ci50eXBlLCBkaXIsIGJyYWNrZXRzKTtcbiAgICAgICAgaWYgKG1hdGNoZXMgJiYgY3VyLmZyb20gPCBjdXIudG8pIHtcbiAgICAgICAgICAgIGxldCBoYW5kbGUgPSBmaW5kSGFuZGxlKGN1cik7XG4gICAgICAgICAgICBpZiAoaGFuZGxlICYmIChkaXIgPiAwID8gcG9zID49IGhhbmRsZS5mcm9tICYmIHBvcyA8IGhhbmRsZS50byA6IHBvcyA+IGhhbmRsZS5mcm9tICYmIHBvcyA8PSBoYW5kbGUudG8pKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaE1hcmtlZEJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgY3VyLCBoYW5kbGUsIG1hdGNoZXMsIGJyYWNrZXRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hQbGFpbkJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgdHJlZSwgbm9kZS50eXBlLCBtYXhTY2FuRGlzdGFuY2UsIGJyYWNrZXRzKTtcbn1cbmZ1bmN0aW9uIG1hdGNoTWFya2VkQnJhY2tldHMoX3N0YXRlLCBfcG9zLCBkaXIsIHRva2VuLCBoYW5kbGUsIG1hdGNoaW5nLCBicmFja2V0cykge1xuICAgIGxldCBwYXJlbnQgPSB0b2tlbi5wYXJlbnQsIGZpcnN0VG9rZW4gPSB7IGZyb206IGhhbmRsZS5mcm9tLCB0bzogaGFuZGxlLnRvIH07XG4gICAgbGV0IGRlcHRoID0gMCwgY3Vyc29yID0gcGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50LmN1cnNvcigpO1xuICAgIGlmIChjdXJzb3IgJiYgKGRpciA8IDAgPyBjdXJzb3IuY2hpbGRCZWZvcmUodG9rZW4uZnJvbSkgOiBjdXJzb3IuY2hpbGRBZnRlcih0b2tlbi50bykpKVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoZGlyIDwgMCA/IGN1cnNvci50byA8PSB0b2tlbi5mcm9tIDogY3Vyc29yLmZyb20gPj0gdG9rZW4udG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVwdGggPT0gMCAmJiBtYXRjaGluZy5pbmRleE9mKGN1cnNvci50eXBlLm5hbWUpID4gLTEgJiYgY3Vyc29yLmZyb20gPCBjdXJzb3IudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEhhbmRsZSA9IGZpbmRIYW5kbGUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IGZpcnN0VG9rZW4sIGVuZDogZW5kSGFuZGxlID8geyBmcm9tOiBlbmRIYW5kbGUuZnJvbSwgdG86IGVuZEhhbmRsZS50byB9IDogdW5kZWZpbmVkLCBtYXRjaGVkOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoaW5nTm9kZXMoY3Vyc29yLnR5cGUsIGRpciwgYnJhY2tldHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoaW5nTm9kZXMoY3Vyc29yLnR5cGUsIC1kaXIsIGJyYWNrZXRzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEhhbmRsZSA9IGZpbmRIYW5kbGUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGZpcnN0VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmRIYW5kbGUgJiYgZW5kSGFuZGxlLmZyb20gPCBlbmRIYW5kbGUudG8gPyB7IGZyb206IGVuZEhhbmRsZS5mcm9tLCB0bzogZW5kSGFuZGxlLnRvIH0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGRpciA8IDAgPyBjdXJzb3IucHJldlNpYmxpbmcoKSA6IGN1cnNvci5uZXh0U2libGluZygpKTtcbiAgICByZXR1cm4geyBzdGFydDogZmlyc3RUb2tlbiwgbWF0Y2hlZDogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIG1hdGNoUGxhaW5CcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIHRyZWUsIHRva2VuVHlwZSwgbWF4U2NhbkRpc3RhbmNlLCBicmFja2V0cykge1xuICAgIGxldCBzdGFydENoID0gZGlyIDwgMCA/IHN0YXRlLnNsaWNlRG9jKHBvcyAtIDEsIHBvcykgOiBzdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIDEpO1xuICAgIGxldCBicmFja2V0ID0gYnJhY2tldHMuaW5kZXhPZihzdGFydENoKTtcbiAgICBpZiAoYnJhY2tldCA8IDAgfHwgKGJyYWNrZXQgJSAyID09IDApICE9IChkaXIgPiAwKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHN0YXJ0VG9rZW4gPSB7IGZyb206IGRpciA8IDAgPyBwb3MgLSAxIDogcG9zLCB0bzogZGlyID4gMCA/IHBvcyArIDEgOiBwb3MgfTtcbiAgICBsZXQgaXRlciA9IHN0YXRlLmRvYy5pdGVyUmFuZ2UocG9zLCBkaXIgPiAwID8gc3RhdGUuZG9jLmxlbmd0aCA6IDApLCBkZXB0aCA9IDA7XG4gICAgZm9yIChsZXQgZGlzdGFuY2UgPSAwOyAhKGl0ZXIubmV4dCgpKS5kb25lICYmIGRpc3RhbmNlIDw9IG1heFNjYW5EaXN0YW5jZTspIHtcbiAgICAgICAgbGV0IHRleHQgPSBpdGVyLnZhbHVlO1xuICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgIGRpc3RhbmNlICs9IHRleHQubGVuZ3RoO1xuICAgICAgICBsZXQgYmFzZVBvcyA9IHBvcyArIGRpc3RhbmNlICogZGlyO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBkaXIgPiAwID8gMCA6IHRleHQubGVuZ3RoIC0gMSwgZW5kID0gZGlyID4gMCA/IHRleHQubGVuZ3RoIDogLTE7IHBvcyAhPSBlbmQ7IHBvcyArPSBkaXIpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGJyYWNrZXRzLmluZGV4T2YodGV4dFtwb3NdKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA8IDAgfHwgdHJlZS5yZXNvbHZlSW5uZXIoYmFzZVBvcyArIHBvcywgMSkudHlwZSAhPSB0b2tlblR5cGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoKGZvdW5kICUgMiA9PSAwKSA9PSAoZGlyID4gMCkpIHtcbiAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVwdGggPT0gMSkgeyAvLyBDbG9zaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0VG9rZW4sIGVuZDogeyBmcm9tOiBiYXNlUG9zICsgcG9zLCB0bzogYmFzZVBvcyArIHBvcyArIDEgfSwgbWF0Y2hlZDogKGZvdW5kID4+IDEpID09IChicmFja2V0ID4+IDEpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgZGlzdGFuY2UgKz0gdGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBpdGVyLmRvbmUgPyB7IHN0YXJ0OiBzdGFydFRva2VuLCBtYXRjaGVkOiBmYWxzZSB9IDogbnVsbDtcbn1cblxuLy8gQ291bnRzIHRoZSBjb2x1bW4gb2Zmc2V0IGluIGEgc3RyaW5nLCB0YWtpbmcgdGFicyBpbnRvIGFjY291bnQuXG4vLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuZnVuY3Rpb24gY291bnRDb2woc3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXggPSAwLCBzdGFydFZhbHVlID0gMCkge1xuICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSBzdHJpbmcuc2VhcmNoKC9bXlxcc1xcdTAwYTBdLyk7XG4gICAgICAgIGlmIChlbmQgPT0gLTEpXG4gICAgICAgICAgICBlbmQgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgbiA9IHN0YXJ0VmFsdWU7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICBpZiAoc3RyaW5nLmNoYXJDb2RlQXQoaSkgPT0gOSlcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG4rKztcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG4vKipcbkVuY2Fwc3VsYXRlcyBhIHNpbmdsZSBsaW5lIG9mIGlucHV0LiBHaXZlbiB0byBzdHJlYW0gc3ludGF4IGNvZGUsXG53aGljaCB1c2VzIGl0IHRvIHRva2VuaXplIHRoZSBjb250ZW50LlxuKi9cbmNsYXNzIFN0cmluZ1N0cmVhbSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc3RyZWFtLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGxpbmUuXG4gICAgKi9cbiAgICBzdHJpbmcsIHRhYlNpemUsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGluZGVudCB1bml0IHNpemUuXG4gICAgKi9cbiAgICBpbmRlbnRVbml0LCBvdmVycmlkZUluZGVudCkge1xuICAgICAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgICAgICAgdGhpcy50YWJTaXplID0gdGFiU2l6ZTtcbiAgICAgICAgdGhpcy5pbmRlbnRVbml0ID0gaW5kZW50VW5pdDtcbiAgICAgICAgdGhpcy5vdmVycmlkZUluZGVudCA9IG92ZXJyaWRlSW5kZW50O1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIGxpbmUuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCB0b2tlbi5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIGVvbCgpIHsgcmV0dXJuIHRoaXMucG9zID49IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIFRydWUgaWYgd2UgYXJlIGF0IHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIHNvbCgpIHsgcmV0dXJuIHRoaXMucG9zID09IDA7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5leHQgY29kZSB1bml0IGFmdGVyIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBvciB1bmRlZmluZWRcbiAgICBpZiB3ZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgcGVlaygpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykgfHwgdW5kZWZpbmVkOyB9XG4gICAgLyoqXG4gICAgUmVhZCB0aGUgbmV4dCBjb2RlIHVuaXQgYW5kIGFkdmFuY2UgYHRoaXMucG9zYC5cbiAgICAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hdGNoIHRoZSBuZXh0IGNoYXJhY3RlciBhZ2FpbnN0IHRoZSBnaXZlbiBzdHJpbmcsIHJlZ3VsYXJcbiAgICBleHByZXNzaW9uLCBvciBwcmVkaWNhdGUuIENvbnN1bWUgYW5kIHJldHVybiBpdCBpZiBpdCBtYXRjaGVzLlxuICAgICovXG4gICAgZWF0KG1hdGNoKSB7XG4gICAgICAgIGxldCBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgICAgIGxldCBvaztcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgb2sgPSBjaCA9PSBtYXRjaDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgb2sgPSBjaCAmJiAobWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHAgPyBtYXRjaC50ZXN0KGNoKSA6IG1hdGNoKGNoKSk7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgKyt0aGlzLnBvcztcbiAgICAgICAgICAgIHJldHVybiBjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDb250aW51ZSBtYXRjaGluZyBjaGFyYWN0ZXJzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIHN0cmluZyxcbiAgICByZWd1bGFyIGV4cHJlc3Npb24sIG9yIHByZWRpY2F0ZSBmdW5jdGlvbi4gUmV0dXJuIHRydWUgaWYgYW55XG4gICAgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLlxuICAgICovXG4gICAgZWF0V2hpbGUobWF0Y2gpIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpIHsgfVxuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29uc3VtZSB3aGl0ZXNwYWNlIGFoZWFkIG9mIGB0aGlzLnBvc2AuIFJldHVybiB0cnVlIGlmIGFueSB3YXNcbiAgICBmb3VuZC5cbiAgICAqL1xuICAgIGVhdFNwYWNlKCkge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpXG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgc2tpcFRvRW5kKCkgeyB0aGlzLnBvcyA9IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gZGlyZWN0bHkgYmVmb3JlIHRoZSBnaXZlbiBjaGFyYWN0ZXIsIGlmIGZvdW5kIG9uIHRoZVxuICAgIGN1cnJlbnQgbGluZS5cbiAgICAqL1xuICAgIHNraXBUbyhjaCkge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGZvdW5kO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBiYWNrIGBuYCBjaGFyYWN0ZXJzLlxuICAgICovXG4gICAgYmFja1VwKG4pIHsgdGhpcy5wb3MgLT0gbjsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IGB0aGlzLnBvc2AuXG4gICAgKi9cbiAgICBjb2x1bW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxhc3RDb2x1bW5Qb3MgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IGNvdW50Q29sKHRoaXMuc3RyaW5nLCB0aGlzLnN0YXJ0LCB0aGlzLnRhYlNpemUsIHRoaXMubGFzdENvbHVtblBvcywgdGhpcy5sYXN0Q29sdW1uVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gY29sdW1uIG9mIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgKi9cbiAgICBpbmRlbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5vdmVycmlkZUluZGVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY291bnRDb2wodGhpcy5zdHJpbmcsIG51bGwsIHRoaXMudGFiU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hdGNoIHRoZSBpbnB1dCBhZ2FpbnN0IHRoZSBnaXZlbiBzdHJpbmcgb3IgcmVndWxhciBleHByZXNzaW9uXG4gICAgKHdoaWNoIHNob3VsZCBzdGFydCB3aXRoIGEgYF5gKS4gUmV0dXJuIHRydWUgb3IgdGhlIHJlZ2V4cCBtYXRjaFxuICAgIGlmIGl0IG1hdGNoZXMuXG4gICAgXG4gICAgVW5sZXNzIGBjb25zdW1lYCBpcyBzZXQgdG8gYGZhbHNlYCwgdGhpcyB3aWxsIG1vdmUgYHRoaXMucG9zYFxuICAgIHBhc3QgdGhlIG1hdGNoZWQgdGV4dC5cbiAgICBcbiAgICBXaGVuIG1hdGNoaW5nIGEgc3RyaW5nIGBjYXNlSW5zZW5zaXRpdmVgIGNhbiBiZSBzZXQgdG8gdHJ1ZSB0b1xuICAgIG1ha2UgdGhlIG1hdGNoIGNhc2UtaW5zZW5zaXRpdmUuXG4gICAgKi9cbiAgICBtYXRjaChwYXR0ZXJuLCBjb25zdW1lLCBjYXNlSW5zZW5zaXRpdmUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGxldCBjYXNlZCA9IChzdHIpID0+IGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyO1xuICAgICAgICAgICAgbGV0IHN1YnN0ciA9IHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLnBvcywgcGF0dGVybi5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGNhc2VkKHN1YnN0cikgPT0gY2FzZWQocGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uc3VtZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zICs9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5wb3MpLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBjb25zdW1lICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjdXJyZW50IHRva2VuLlxuICAgICovXG4gICAgY3VycmVudCgpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMucG9zKTsgfVxufVxuXG5mdW5jdGlvbiBmdWxsUGFyc2VyKHNwZWMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBzcGVjLm5hbWUgfHwgXCJcIixcbiAgICAgICAgdG9rZW46IHNwZWMudG9rZW4sXG4gICAgICAgIGJsYW5rTGluZTogc3BlYy5ibGFua0xpbmUgfHwgKCgpID0+IHsgfSksXG4gICAgICAgIHN0YXJ0U3RhdGU6IHNwZWMuc3RhcnRTdGF0ZSB8fCAoKCkgPT4gdHJ1ZSksXG4gICAgICAgIGNvcHlTdGF0ZTogc3BlYy5jb3B5U3RhdGUgfHwgZGVmYXVsdENvcHlTdGF0ZSxcbiAgICAgICAgaW5kZW50OiBzcGVjLmluZGVudCB8fCAoKCkgPT4gbnVsbCksXG4gICAgICAgIGxhbmd1YWdlRGF0YTogc3BlYy5sYW5ndWFnZURhdGEgfHwge30sXG4gICAgICAgIHRva2VuVGFibGU6IHNwZWMudG9rZW5UYWJsZSB8fCBub1Rva2VucyxcbiAgICAgICAgbWVyZ2VUb2tlbnM6IHNwZWMubWVyZ2VUb2tlbnMgIT09IGZhbHNlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDb3B5U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAodHlwZW9mIHN0YXRlICE9IFwib2JqZWN0XCIpXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICBsZXQgbmV3U3RhdGUgPSB7fTtcbiAgICBmb3IgKGxldCBwcm9wIGluIHN0YXRlKSB7XG4gICAgICAgIGxldCB2YWwgPSBzdGF0ZVtwcm9wXTtcbiAgICAgICAgbmV3U3RhdGVbcHJvcF0gPSAodmFsIGluc3RhbmNlb2YgQXJyYXkgPyB2YWwuc2xpY2UoKSA6IHZhbCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbn1cbmNvbnN0IEluZGVudGVkRnJvbSA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLyoqXG5BIFtsYW5ndWFnZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkgY2xhc3MgYmFzZWQgb24gYSBDb2RlTWlycm9yXG41LXN0eWxlIFtzdHJlYW1pbmcgcGFyc2VyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLlN0cmVhbVBhcnNlcikuXG4qL1xuY2xhc3MgU3RyZWFtTGFuZ3VhZ2UgZXh0ZW5kcyBMYW5ndWFnZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgICAgIGxldCBkYXRhID0gZGVmaW5lTGFuZ3VhZ2VGYWNldChwYXJzZXIubGFuZ3VhZ2VEYXRhKTtcbiAgICAgICAgbGV0IHAgPSBmdWxsUGFyc2VyKHBhcnNlciksIHNlbGY7XG4gICAgICAgIGxldCBpbXBsID0gbmV3IGNsYXNzIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyc2Uoc2VsZiwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc3VwZXIoZGF0YSwgaW1wbCwgW10sIHBhcnNlci5uYW1lKTtcbiAgICAgICAgdGhpcy50b3BOb2RlID0gZG9jSUQoZGF0YSwgdGhpcyk7XG4gICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnN0cmVhbVBhcnNlciA9IHA7XG4gICAgICAgIHRoaXMuc3RhdGVBZnRlciA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMudG9rZW5UYWJsZSA9IHBhcnNlci50b2tlblRhYmxlID8gbmV3IFRva2VuVGFibGUocC50b2tlblRhYmxlKSA6IGRlZmF1bHRUb2tlblRhYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBzdHJlYW0gbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHsgcmV0dXJuIG5ldyBTdHJlYW1MYW5ndWFnZShzcGVjKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0SW5kZW50KGN4KSB7XG4gICAgICAgIGxldCBmcm9tID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgeyBvdmVycmlkZUluZGVudGF0aW9uIH0gPSBjeC5vcHRpb25zO1xuICAgICAgICBpZiAob3ZlcnJpZGVJbmRlbnRhdGlvbikge1xuICAgICAgICAgICAgZnJvbSA9IEluZGVudGVkRnJvbS5nZXQoY3guc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGZyb20gIT0gbnVsbCAmJiBmcm9tIDwgY3gucG9zIC0gMWU0KVxuICAgICAgICAgICAgICAgIGZyb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXJ0ID0gZmluZFN0YXRlKHRoaXMsIGN4Lm5vZGUudHJlZSwgY3gubm9kZS5mcm9tLCBjeC5ub2RlLmZyb20sIGZyb20gIT09IG51bGwgJiYgZnJvbSAhPT0gdm9pZCAwID8gZnJvbSA6IGN4LnBvcyksIHN0YXRlUG9zLCBzdGF0ZTtcbiAgICAgICAgaWYgKHN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IHN0YXJ0LnN0YXRlO1xuICAgICAgICAgICAgc3RhdGVQb3MgPSBzdGFydC5wb3MgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGN4LnVuaXQpO1xuICAgICAgICAgICAgc3RhdGVQb3MgPSBjeC5ub2RlLmZyb207XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN4LnBvcyAtIHN0YXRlUG9zID4gMTAwMDAgLyogQy5NYXhJbmRlbnRTY2FuRGlzdCAqLylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3aGlsZSAoc3RhdGVQb3MgPCBjeC5wb3MpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gY3guc3RhdGUuZG9jLmxpbmVBdChzdGF0ZVBvcyksIGVuZCA9IE1hdGgubWluKGN4LnBvcywgbGluZS50byk7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZW50YXRpb24gPSBvdmVycmlkZUluZGVudGF0aW9uID8gb3ZlcnJpZGVJbmRlbnRhdGlvbihsaW5lLmZyb20pIDogLTE7XG4gICAgICAgICAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZS50ZXh0LCBjeC5zdGF0ZS50YWJTaXplLCBjeC51bml0LCBpbmRlbnRhdGlvbiA8IDAgPyB1bmRlZmluZWQgOiBpbmRlbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0cmVhbS5wb3MgPCBlbmQgLSBsaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHJlYWRUb2tlbih0aGlzLnN0cmVhbVBhcnNlci50b2tlbiwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbVBhcnNlci5ibGFua0xpbmUoc3RhdGUsIGN4LnVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZCA9PSBjeC5wb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzdGF0ZVBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5lID0gY3gubGluZUF0KGN4LnBvcyk7XG4gICAgICAgIGlmIChvdmVycmlkZUluZGVudGF0aW9uICYmIGZyb20gPT0gbnVsbClcbiAgICAgICAgICAgIEluZGVudGVkRnJvbS5zZXQoY3guc3RhdGUsIGxpbmUuZnJvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbVBhcnNlci5pbmRlbnQoc3RhdGUsIC9eXFxzKiguKikvLmV4ZWMobGluZS50ZXh0KVsxXSwgY3gpO1xuICAgIH1cbiAgICBnZXQgYWxsb3dzTmVzdGluZygpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG5mdW5jdGlvbiBmaW5kU3RhdGUobGFuZywgdHJlZSwgb2ZmLCBzdGFydFBvcywgYmVmb3JlKSB7XG4gICAgbGV0IHN0YXRlID0gb2ZmID49IHN0YXJ0UG9zICYmIG9mZiArIHRyZWUubGVuZ3RoIDw9IGJlZm9yZSAmJiB0cmVlLnByb3AobGFuZy5zdGF0ZUFmdGVyKTtcbiAgICBpZiAoc3RhdGUpXG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBsYW5nLnN0cmVhbVBhcnNlci5jb3B5U3RhdGUoc3RhdGUpLCBwb3M6IG9mZiArIHRyZWUubGVuZ3RoIH07XG4gICAgZm9yIChsZXQgaSA9IHRyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IGNoaWxkID0gdHJlZS5jaGlsZHJlbltpXSwgcG9zID0gb2ZmICsgdHJlZS5wb3NpdGlvbnNbaV07XG4gICAgICAgIGxldCBmb3VuZCA9IGNoaWxkIGluc3RhbmNlb2YgVHJlZSAmJiBwb3MgPCBiZWZvcmUgJiYgZmluZFN0YXRlKGxhbmcsIGNoaWxkLCBwb3MsIHN0YXJ0UG9zLCBiZWZvcmUpO1xuICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gY3V0VHJlZShsYW5nLCB0cmVlLCBmcm9tLCB0bywgaW5zaWRlKSB7XG4gICAgaWYgKGluc2lkZSAmJiBmcm9tIDw9IDAgJiYgdG8gPj0gdHJlZS5sZW5ndGgpXG4gICAgICAgIHJldHVybiB0cmVlO1xuICAgIGlmICghaW5zaWRlICYmIGZyb20gPT0gMCAmJiB0cmVlLnR5cGUgPT0gbGFuZy50b3BOb2RlKVxuICAgICAgICBpbnNpZGUgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSB0cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBwb3MgPSB0cmVlLnBvc2l0aW9uc1tpXSwgY2hpbGQgPSB0cmVlLmNoaWxkcmVuW2ldLCBpbm5lcjtcbiAgICAgICAgaWYgKHBvcyA8IHRvICYmIGNoaWxkIGluc3RhbmNlb2YgVHJlZSkge1xuICAgICAgICAgICAgaWYgKCEoaW5uZXIgPSBjdXRUcmVlKGxhbmcsIGNoaWxkLCBmcm9tIC0gcG9zLCB0byAtIHBvcywgaW5zaWRlKSkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gIWluc2lkZSA/IGlubmVyXG4gICAgICAgICAgICAgICAgOiBuZXcgVHJlZSh0cmVlLnR5cGUsIHRyZWUuY2hpbGRyZW4uc2xpY2UoMCwgaSkuY29uY2F0KGlubmVyKSwgdHJlZS5wb3NpdGlvbnMuc2xpY2UoMCwgaSArIDEpLCBwb3MgKyBpbm5lci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZmluZFN0YXJ0SW5GcmFnbWVudHMobGFuZywgZnJhZ21lbnRzLCBzdGFydFBvcywgZW5kUG9zLCBlZGl0b3JTdGF0ZSkge1xuICAgIGZvciAobGV0IGYgb2YgZnJhZ21lbnRzKSB7XG4gICAgICAgIGxldCBmcm9tID0gZi5mcm9tICsgKGYub3BlblN0YXJ0ID8gMjUgOiAwKSwgdG8gPSBmLnRvIC0gKGYub3BlbkVuZCA/IDI1IDogMCk7XG4gICAgICAgIGxldCBmb3VuZCA9IGZyb20gPD0gc3RhcnRQb3MgJiYgdG8gPiBzdGFydFBvcyAmJiBmaW5kU3RhdGUobGFuZywgZi50cmVlLCAwIC0gZi5vZmZzZXQsIHN0YXJ0UG9zLCB0byksIHRyZWU7XG4gICAgICAgIGlmIChmb3VuZCAmJiBmb3VuZC5wb3MgPD0gZW5kUG9zICYmICh0cmVlID0gY3V0VHJlZShsYW5nLCBmLnRyZWUsIHN0YXJ0UG9zICsgZi5vZmZzZXQsIGZvdW5kLnBvcyArIGYub2Zmc2V0LCBmYWxzZSkpKVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IGZvdW5kLnN0YXRlLCB0cmVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXRlOiBsYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGVkaXRvclN0YXRlID8gZ2V0SW5kZW50VW5pdChlZGl0b3JTdGF0ZSkgOiA0KSwgdHJlZTogVHJlZS5lbXB0eSB9O1xufVxuY2xhc3MgUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxhbmcsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLmxhbmcgPSBsYW5nO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gW107XG4gICAgICAgIHRoaXMuY2h1bmsgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1JldXNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50byA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpLCBmcm9tID0gcmFuZ2VzWzBdLmZyb207XG4gICAgICAgIGxldCB7IHN0YXRlLCB0cmVlIH0gPSBmaW5kU3RhcnRJbkZyYWdtZW50cyhsYW5nLCBmcmFnbWVudHMsIGZyb20sIHRoaXMudG8sIGNvbnRleHQgPT09IG51bGwgfHwgY29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGV4dC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSB0aGlzLmNodW5rU3RhcnQgPSBmcm9tICsgdHJlZS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MucHVzaCh0cmVlLmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0cmVlLnBvc2l0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgJiYgdGhpcy5wYXJzZWRQb3MgPCBjb250ZXh0LnZpZXdwb3J0LmZyb20gLSAxMDAwMDAgLyogQy5NYXhEaXN0YW5jZUJlZm9yZVZpZXdwb3J0ICovICYmXG4gICAgICAgICAgICByYW5nZXMuc29tZShyID0+IHIuZnJvbSA8PSBjb250ZXh0LnZpZXdwb3J0LmZyb20gJiYgci50byA+PSBjb250ZXh0LnZpZXdwb3J0LmZyb20pKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGdldEluZGVudFVuaXQoY29udGV4dC5zdGF0ZSkpO1xuICAgICAgICAgICAgY29udGV4dC5za2lwVW50aWxJblZpZXcodGhpcy5wYXJzZWRQb3MsIGNvbnRleHQudmlld3BvcnQuZnJvbSk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IGNvbnRleHQudmlld3BvcnQuZnJvbTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vdmVSYW5nZUluZGV4KCk7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpO1xuICAgICAgICBsZXQgcGFyc2VFbmQgPSB0aGlzLnN0b3BwZWRBdCA9PSBudWxsID8gdGhpcy50byA6IE1hdGgubWluKHRoaXMudG8sIHRoaXMuc3RvcHBlZEF0KTtcbiAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHBhcnNlRW5kLCB0aGlzLmNodW5rU3RhcnQgKyAyMDQ4IC8qIEMuQ2h1bmtTaXplICovKTtcbiAgICAgICAgaWYgKGNvbnRleHQpXG4gICAgICAgICAgICBlbmQgPSBNYXRoLm1pbihlbmQsIGNvbnRleHQudmlld3BvcnQudG8pO1xuICAgICAgICB3aGlsZSAodGhpcy5wYXJzZWRQb3MgPCBlbmQpXG4gICAgICAgICAgICB0aGlzLnBhcnNlTGluZShjb250ZXh0KTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtTdGFydCA8IHRoaXMucGFyc2VkUG9zKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuaygpO1xuICAgICAgICBpZiAodGhpcy5wYXJzZWRQb3MgPj0gcGFyc2VFbmQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2goKTtcbiAgICAgICAgaWYgKGNvbnRleHQgJiYgdGhpcy5wYXJzZWRQb3MgPj0gY29udGV4dC52aWV3cG9ydC50bykge1xuICAgICAgICAgICAgY29udGV4dC5za2lwVW50aWxJblZpZXcodGhpcy5wYXJzZWRQb3MsIHBhcnNlRW5kKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzdG9wQXQocG9zKSB7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgIH1cbiAgICBsaW5lQWZ0ZXIocG9zKSB7XG4gICAgICAgIGxldCBjaHVuayA9IHRoaXMuaW5wdXQuY2h1bmsocG9zKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0LmxpbmVDaHVua3MpIHtcbiAgICAgICAgICAgIGxldCBlb2wgPSBjaHVuay5pbmRleE9mKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKGVvbCA+IC0xKVxuICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UoMCwgZW9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaHVuayA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgICBjaHVuayA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcyArIGNodW5rLmxlbmd0aCA8PSB0aGlzLnRvID8gY2h1bmsgOiBjaHVuay5zbGljZSgwLCB0aGlzLnRvIC0gcG9zKTtcbiAgICB9XG4gICAgbmV4dExpbmUoKSB7XG4gICAgICAgIGxldCBmcm9tID0gdGhpcy5wYXJzZWRQb3MsIGxpbmUgPSB0aGlzLmxpbmVBZnRlcihmcm9tKSwgZW5kID0gZnJvbSArIGxpbmUubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMucmFuZ2VJbmRleDs7KSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2VFbmQgPSB0aGlzLnJhbmdlc1tpbmRleF0udG87XG4gICAgICAgICAgICBpZiAocmFuZ2VFbmQgPj0gZW5kKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgcmFuZ2VFbmQgLSAoZW5kIC0gbGluZS5sZW5ndGgpKTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5yYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IHJhbmdlU3RhcnQgPSB0aGlzLnJhbmdlc1tpbmRleF0uZnJvbTtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IHRoaXMubGluZUFmdGVyKHJhbmdlU3RhcnQpO1xuICAgICAgICAgICAgbGluZSArPSBhZnRlcjtcbiAgICAgICAgICAgIGVuZCA9IHJhbmdlU3RhcnQgKyBhZnRlci5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbGluZSwgZW5kIH07XG4gICAgfVxuICAgIHNraXBHYXBzVG8ocG9zLCBvZmZzZXQsIHNpZGUpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGVuZCA9IHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleF0udG8sIG9mZlBvcyA9IHBvcyArIG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzaWRlID4gMCA/IGVuZCA+IG9mZlBvcyA6IGVuZCA+PSBvZmZQb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF0uZnJvbTtcbiAgICAgICAgICAgIG9mZnNldCArPSBzdGFydCAtIGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgICBtb3ZlUmFuZ2VJbmRleCgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleF0udG8gPCB0aGlzLnBhcnNlZFBvcylcbiAgICAgICAgICAgIHRoaXMucmFuZ2VJbmRleCsrO1xuICAgIH1cbiAgICBlbWl0VG9rZW4oaWQsIGZyb20sIHRvLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IHNpemUgPSA0O1xuICAgICAgICBpZiAodGhpcy5yYW5nZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5za2lwR2Fwc1RvKGZyb20sIG9mZnNldCwgMSk7XG4gICAgICAgICAgICBmcm9tICs9IG9mZnNldDtcbiAgICAgICAgICAgIGxldCBsZW4wID0gdGhpcy5jaHVuay5sZW5ndGg7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLnNraXBHYXBzVG8odG8sIG9mZnNldCwgLTEpO1xuICAgICAgICAgICAgdG8gKz0gb2Zmc2V0O1xuICAgICAgICAgICAgc2l6ZSArPSB0aGlzLmNodW5rLmxlbmd0aCAtIGxlbjA7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmNodW5rLmxlbmd0aCAtIDQ7XG4gICAgICAgIGlmICh0aGlzLmxhbmcuc3RyZWFtUGFyc2VyLm1lcmdlVG9rZW5zICYmIHNpemUgPT0gNCAmJiBsYXN0ID49IDAgJiZcbiAgICAgICAgICAgIHRoaXMuY2h1bmtbbGFzdF0gPT0gaWQgJiYgdGhpcy5jaHVua1tsYXN0ICsgMl0gPT0gZnJvbSlcbiAgICAgICAgICAgIHRoaXMuY2h1bmtbbGFzdCArIDJdID0gdG87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuY2h1bmsucHVzaChpZCwgZnJvbSwgdG8sIHNpemUpO1xuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgICBwYXJzZUxpbmUoY29udGV4dCkge1xuICAgICAgICBsZXQgeyBsaW5lLCBlbmQgfSA9IHRoaXMubmV4dExpbmUoKSwgb2Zmc2V0ID0gMCwgeyBzdHJlYW1QYXJzZXIgfSA9IHRoaXMubGFuZztcbiAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZSwgY29udGV4dCA/IGNvbnRleHQuc3RhdGUudGFiU2l6ZSA6IDQsIGNvbnRleHQgPyBnZXRJbmRlbnRVbml0KGNvbnRleHQuc3RhdGUpIDogMik7XG4gICAgICAgIGlmIChzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgICAgIHN0cmVhbVBhcnNlci5ibGFua0xpbmUodGhpcy5zdGF0ZSwgc3RyZWFtLmluZGVudFVuaXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9rZW4gPSByZWFkVG9rZW4oc3RyZWFtUGFyc2VyLnRva2VuLCBzdHJlYW0sIHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbilcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5lbWl0VG9rZW4odGhpcy5sYW5nLnRva2VuVGFibGUucmVzb2x2ZSh0b2tlbiksIHRoaXMucGFyc2VkUG9zICsgc3RyZWFtLnN0YXJ0LCB0aGlzLnBhcnNlZFBvcyArIHN0cmVhbS5wb3MsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5zdGFydCA+IDEwMDAwIC8qIEMuTWF4TGluZUxlbmd0aCAqLylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSBlbmQ7XG4gICAgICAgIHRoaXMubW92ZVJhbmdlSW5kZXgoKTtcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkUG9zIDwgdGhpcy50bylcbiAgICAgICAgICAgIHRoaXMucGFyc2VkUG9zKys7XG4gICAgfVxuICAgIGZpbmlzaENodW5rKCkge1xuICAgICAgICBsZXQgdHJlZSA9IFRyZWUuYnVpbGQoe1xuICAgICAgICAgICAgYnVmZmVyOiB0aGlzLmNodW5rLFxuICAgICAgICAgICAgc3RhcnQ6IHRoaXMuY2h1bmtTdGFydCxcbiAgICAgICAgICAgIGxlbmd0aDogdGhpcy5wYXJzZWRQb3MgLSB0aGlzLmNodW5rU3RhcnQsXG4gICAgICAgICAgICBub2RlU2V0LFxuICAgICAgICAgICAgdG9wSUQ6IDAsXG4gICAgICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDIwNDggLyogQy5DaHVua1NpemUgKi8sXG4gICAgICAgICAgICByZXVzZWQ6IHRoaXMuY2h1bmtSZXVzZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRyZWUgPSBuZXcgVHJlZSh0cmVlLnR5cGUsIHRyZWUuY2hpbGRyZW4sIHRyZWUucG9zaXRpb25zLCB0cmVlLmxlbmd0aCwgW1t0aGlzLmxhbmcuc3RhdGVBZnRlciwgdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5jb3B5U3RhdGUodGhpcy5zdGF0ZSldXSk7XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2godHJlZSk7XG4gICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0aGlzLmNodW5rU3RhcnQgLSB0aGlzLnJhbmdlc1swXS5mcm9tKTtcbiAgICAgICAgdGhpcy5jaHVuayA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUmV1c2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSB0aGlzLnBhcnNlZFBvcztcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyZWUodGhpcy5sYW5nLnRvcE5vZGUsIHRoaXMuY2h1bmtzLCB0aGlzLmNodW5rUG9zLCB0aGlzLnBhcnNlZFBvcyAtIHRoaXMucmFuZ2VzWzBdLmZyb20pLmJhbGFuY2UoKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWFkVG9rZW4odG9rZW4sIHN0cmVhbSwgc3RhdGUpIHtcbiAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdG9rZW4oc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIGlmIChzdHJlYW0ucG9zID4gc3RyZWFtLnN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtIHBhcnNlciBmYWlsZWQgdG8gYWR2YW5jZSBzdHJlYW0uXCIpO1xufVxuY29uc3Qgbm9Ub2tlbnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IHR5cGVBcnJheSA9IFtOb2RlVHlwZS5ub25lXTtcbmNvbnN0IG5vZGVTZXQgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVTZXQodHlwZUFycmF5KTtcbmNvbnN0IHdhcm5lZCA9IFtdO1xuLy8gQ2FjaGUgb2Ygbm9kZSB0eXBlcyBieSBuYW1lIGFuZCB0YWdzXG5jb25zdCBieVRhZyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3QgZGVmYXVsdFRhYmxlID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5mb3IgKGxldCBbbGVnYWN5TmFtZSwgbmFtZV0gb2YgW1xuICAgIFtcInZhcmlhYmxlXCIsIFwidmFyaWFibGVOYW1lXCJdLFxuICAgIFtcInZhcmlhYmxlLTJcIiwgXCJ2YXJpYWJsZU5hbWUuc3BlY2lhbFwiXSxcbiAgICBbXCJzdHJpbmctMlwiLCBcInN0cmluZy5zcGVjaWFsXCJdLFxuICAgIFtcImRlZlwiLCBcInZhcmlhYmxlTmFtZS5kZWZpbml0aW9uXCJdLFxuICAgIFtcInRhZ1wiLCBcInRhZ05hbWVcIl0sXG4gICAgW1wiYXR0cmlidXRlXCIsIFwiYXR0cmlidXRlTmFtZVwiXSxcbiAgICBbXCJ0eXBlXCIsIFwidHlwZU5hbWVcIl0sXG4gICAgW1wiYnVpbHRpblwiLCBcInZhcmlhYmxlTmFtZS5zdGFuZGFyZFwiXSxcbiAgICBbXCJxdWFsaWZpZXJcIiwgXCJtb2RpZmllclwiXSxcbiAgICBbXCJlcnJvclwiLCBcImludmFsaWRcIl0sXG4gICAgW1wiaGVhZGVyXCIsIFwiaGVhZGluZ1wiXSxcbiAgICBbXCJwcm9wZXJ0eVwiLCBcInByb3BlcnR5TmFtZVwiXVxuXSlcbiAgICBkZWZhdWx0VGFibGVbbGVnYWN5TmFtZV0gPSAvKkBfX1BVUkVfXyovY3JlYXRlVG9rZW5UeXBlKG5vVG9rZW5zLCBuYW1lKTtcbmNsYXNzIFRva2VuVGFibGUge1xuICAgIGNvbnN0cnVjdG9yKGV4dHJhKSB7XG4gICAgICAgIHRoaXMuZXh0cmEgPSBleHRyYTtcbiAgICAgICAgdGhpcy50YWJsZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGVmYXVsdFRhYmxlKTtcbiAgICB9XG4gICAgcmVzb2x2ZSh0YWcpIHtcbiAgICAgICAgcmV0dXJuICF0YWcgPyAwIDogdGhpcy50YWJsZVt0YWddIHx8ICh0aGlzLnRhYmxlW3RhZ10gPSBjcmVhdGVUb2tlblR5cGUodGhpcy5leHRyYSwgdGFnKSk7XG4gICAgfVxufVxuY29uc3QgZGVmYXVsdFRva2VuVGFibGUgPSAvKkBfX1BVUkVfXyovbmV3IFRva2VuVGFibGUobm9Ub2tlbnMpO1xuZnVuY3Rpb24gd2FybkZvclBhcnQocGFydCwgbXNnKSB7XG4gICAgaWYgKHdhcm5lZC5pbmRleE9mKHBhcnQpID4gLTEpXG4gICAgICAgIHJldHVybjtcbiAgICB3YXJuZWQucHVzaChwYXJ0KTtcbiAgICBjb25zb2xlLndhcm4obXNnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRva2VuVHlwZShleHRyYSwgdGFnU3RyKSB7XG4gICAgbGV0IHRhZ3MkMSA9IFtdO1xuICAgIGZvciAobGV0IG5hbWUgb2YgdGFnU3RyLnNwbGl0KFwiIFwiKSkge1xuICAgICAgICBsZXQgZm91bmQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiBuYW1lLnNwbGl0KFwiLlwiKSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gKGV4dHJhW3BhcnRdIHx8IHRhZ3NbcGFydF0pO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHdhcm5Gb3JQYXJ0KHBhcnQsIGBVbmtub3duIGhpZ2hsaWdodGluZyB0YWcgJHtwYXJ0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZm91bmQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB3YXJuRm9yUGFydChwYXJ0LCBgTW9kaWZpZXIgJHtwYXJ0fSB1c2VkIGF0IHN0YXJ0IG9mIHRhZ2ApO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBmb3VuZC5tYXAodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgd2FybkZvclBhcnQocGFydCwgYFRhZyAke3BhcnR9IHVzZWQgYXMgbW9kaWZpZXJgKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdGFnIG9mIGZvdW5kKVxuICAgICAgICAgICAgdGFncyQxLnB1c2godGFnKTtcbiAgICB9XG4gICAgaWYgKCF0YWdzJDEubGVuZ3RoKVxuICAgICAgICByZXR1cm4gMDtcbiAgICBsZXQgbmFtZSA9IHRhZ1N0ci5yZXBsYWNlKC8gL2csIFwiX1wiKSwga2V5ID0gbmFtZSArIFwiIFwiICsgdGFncyQxLm1hcCh0ID0+IHQuaWQpO1xuICAgIGxldCBrbm93biA9IGJ5VGFnW2tleV07XG4gICAgaWYgKGtub3duKVxuICAgICAgICByZXR1cm4ga25vd24uaWQ7XG4gICAgbGV0IHR5cGUgPSBieVRhZ1trZXldID0gTm9kZVR5cGUuZGVmaW5lKHtcbiAgICAgICAgaWQ6IHR5cGVBcnJheS5sZW5ndGgsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHByb3BzOiBbc3R5bGVUYWdzKHsgW25hbWVdOiB0YWdzJDEgfSldXG4gICAgfSk7XG4gICAgdHlwZUFycmF5LnB1c2godHlwZSk7XG4gICAgcmV0dXJuIHR5cGUuaWQ7XG59XG5mdW5jdGlvbiBkb2NJRChkYXRhLCBsYW5nKSB7XG4gICAgbGV0IHR5cGUgPSBOb2RlVHlwZS5kZWZpbmUoeyBpZDogdHlwZUFycmF5Lmxlbmd0aCwgbmFtZTogXCJEb2N1bWVudFwiLCBwcm9wczogW1xuICAgICAgICAgICAgbGFuZ3VhZ2VEYXRhUHJvcC5hZGQoKCkgPT4gZGF0YSksXG4gICAgICAgICAgICBpbmRlbnROb2RlUHJvcC5hZGQoKCkgPT4gY3ggPT4gbGFuZy5nZXRJbmRlbnQoY3gpKVxuICAgICAgICBdLCB0b3A6IHRydWUgfSk7XG4gICAgdHlwZUFycmF5LnB1c2godHlwZSk7XG4gICAgcmV0dXJuIHR5cGU7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkRm9yTGluZShsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUubGVuZ3RoIDw9IDQwOTYgJiYgL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNcXHVmYjUwLVxcdWZkZmZdLy50ZXN0KGxpbmUpO1xufVxuZnVuY3Rpb24gdGV4dEhhc1JUTCh0ZXh0KSB7XG4gICAgZm9yIChsZXQgaSA9IHRleHQuaXRlcigpOyAhaS5uZXh0KCkuZG9uZTspXG4gICAgICAgIGlmIChidWlsZEZvckxpbmUoaS52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjaGFuZ2VBZGRzUlRMKGNoYW5nZSkge1xuICAgIGxldCBhZGRlZCA9IGZhbHNlO1xuICAgIGNoYW5nZS5pdGVyQ2hhbmdlcygoZkEsIHRBLCBmQiwgdEIsIGlucykgPT4ge1xuICAgICAgICBpZiAoIWFkZGVkICYmIHRleHRIYXNSVEwoaW5zKSlcbiAgICAgICAgICAgIGFkZGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWRkZWQ7XG59XG5jb25zdCBhbHdheXNJc29sYXRlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpIH0pO1xuLyoqXG5NYWtlIHN1cmUgbm9kZXNcblttYXJrZWRdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1vbi5Ob2RlUHJvcF5pc29sYXRlKVxuYXMgaXNvbGF0aW5nIGZvciBiaWRpcmVjdGlvbmFsIHRleHQgYXJlIHJlbmRlcmVkIGluIGEgd2F5IHRoYXRcbmlzb2xhdGVzIHRoZW0gZnJvbSB0aGUgc3Vycm91bmRpbmcgdGV4dC5cbiovXG5mdW5jdGlvbiBiaWRpSXNvbGF0ZXMob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGV4dGVuc2lvbnMgPSBbaXNvbGF0ZU1hcmtzXTtcbiAgICBpZiAob3B0aW9ucy5hbHdheXNJc29sYXRlKVxuICAgICAgICBleHRlbnNpb25zLnB1c2goYWx3YXlzSXNvbGF0ZS5vZih0cnVlKSk7XG4gICAgcmV0dXJuIGV4dGVuc2lvbnM7XG59XG5jb25zdCBpc29sYXRlTWFya3MgPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5hbHdheXMgPSB2aWV3LnN0YXRlLmZhY2V0KGFsd2F5c0lzb2xhdGUpIHx8XG4gICAgICAgICAgICB2aWV3LnRleHREaXJlY3Rpb24gIT0gRGlyZWN0aW9uLkxUUiB8fFxuICAgICAgICAgICAgdmlldy5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LnBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5oYXNSVEwgPSAhdGhpcy5hbHdheXMgJiYgdGV4dEhhc1JUTCh2aWV3LnN0YXRlLmRvYyk7XG4gICAgICAgIHRoaXMudHJlZSA9IHN5bnRheFRyZWUodmlldy5zdGF0ZSk7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmFsd2F5cyB8fCB0aGlzLmhhc1JUTCA/IGJ1aWxkRGVjbyh2aWV3LCB0aGlzLnRyZWUsIHRoaXMuYWx3YXlzKSA6IERlY29yYXRpb24ubm9uZTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgYWx3YXlzID0gdXBkYXRlLnN0YXRlLmZhY2V0KGFsd2F5c0lzb2xhdGUpIHx8XG4gICAgICAgICAgICB1cGRhdGUudmlldy50ZXh0RGlyZWN0aW9uICE9IERpcmVjdGlvbi5MVFIgfHxcbiAgICAgICAgICAgIHVwZGF0ZS5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LnBlckxpbmVUZXh0RGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKCFhbHdheXMgJiYgIXRoaXMuaGFzUlRMICYmIGNoYW5nZUFkZHNSVEwodXBkYXRlLmNoYW5nZXMpKVxuICAgICAgICAgICAgdGhpcy5oYXNSVEwgPSB0cnVlO1xuICAgICAgICBpZiAoIWFsd2F5cyAmJiAhdGhpcy5oYXNSVEwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB0cmVlID0gc3ludGF4VHJlZSh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBpZiAoYWx3YXlzICE9IHRoaXMuYWx3YXlzIHx8IHRyZWUgIT0gdGhpcy50cmVlIHx8IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XG4gICAgICAgICAgICB0aGlzLmFsd2F5cyA9IGFsd2F5cztcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBidWlsZERlY28odXBkYXRlLnZpZXcsIHRyZWUsIGFsd2F5cyk7XG4gICAgICAgIH1cbiAgICB9XG59LCB7XG4gICAgcHJvdmlkZTogcGx1Z2luID0+IHtcbiAgICAgICAgZnVuY3Rpb24gYWNjZXNzKHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlY29yYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtFZGl0b3JWaWV3Lm91dGVyRGVjb3JhdGlvbnMub2YoYWNjZXNzKSxcbiAgICAgICAgICAgIFByZWMubG93ZXN0KEVkaXRvclZpZXcuYmlkaUlzb2xhdGVkUmFuZ2VzLm9mKGFjY2VzcykpXTtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGJ1aWxkRGVjbyh2aWV3LCB0cmVlLCBhbHdheXMpIHtcbiAgICBsZXQgZGVjbyA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICBsZXQgcmFuZ2VzID0gdmlldy52aXNpYmxlUmFuZ2VzO1xuICAgIGlmICghYWx3YXlzKVxuICAgICAgICByYW5nZXMgPSBjbGlwUlRMTGluZXMocmFuZ2VzLCB2aWV3LnN0YXRlLmRvYyk7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHJhbmdlcykge1xuICAgICAgICB0cmVlLml0ZXJhdGUoe1xuICAgICAgICAgICAgZW50ZXI6IG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpc28gPSBub2RlLnR5cGUucHJvcChOb2RlUHJvcC5pc29sYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNvKVxuICAgICAgICAgICAgICAgICAgICBkZWNvLmFkZChub2RlLmZyb20sIG5vZGUudG8sIG1hcmtzW2lzb10pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyb20sIHRvXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGVjby5maW5pc2goKTtcbn1cbmZ1bmN0aW9uIGNsaXBSVExMaW5lcyhyYW5nZXMsIGRvYykge1xuICAgIGxldCBjdXIgPSBkb2MuaXRlcigpLCBwb3MgPSAwLCByZXN1bHQgPSBbXSwgbGFzdCA9IG51bGw7XG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHJhbmdlcykge1xuICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnRvID4gZnJvbSkge1xuICAgICAgICAgICAgZnJvbSA9IGxhc3QudG87XG4gICAgICAgICAgICBpZiAoZnJvbSA+PSB0bylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zICsgY3VyLnZhbHVlLmxlbmd0aCA8IGZyb20pIHtcbiAgICAgICAgICAgIGN1ci5uZXh0KGZyb20gLSAocG9zICsgY3VyLnZhbHVlLmxlbmd0aCkpO1xuICAgICAgICAgICAgcG9zID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBwb3MsIGVuZCA9IHBvcyArIGN1ci52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIWN1ci5saW5lQnJlYWsgJiYgYnVpbGRGb3JMaW5lKGN1ci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0LnRvID4gc3RhcnQgLSAxMClcbiAgICAgICAgICAgICAgICAgICAgbGFzdC50byA9IE1hdGgubWluKHRvLCBlbmQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGFzdCA9IHsgZnJvbTogc3RhcnQsIHRvOiBNYXRoLm1pbih0bywgZW5kKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmQgPj0gdG8pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgICAgICBjdXIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBtYXJrcyA9IHtcbiAgICBydGw6IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1pc29cIiwgaW5jbHVzaXZlOiB0cnVlLCBhdHRyaWJ1dGVzOiB7IGRpcjogXCJydGxcIiB9LCBiaWRpSXNvbGF0ZTogRGlyZWN0aW9uLlJUTCB9KSxcbiAgICBsdHI6IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1pc29cIiwgaW5jbHVzaXZlOiB0cnVlLCBhdHRyaWJ1dGVzOiB7IGRpcjogXCJsdHJcIiB9LCBiaWRpSXNvbGF0ZTogRGlyZWN0aW9uLkxUUiB9KSxcbiAgICBhdXRvOiAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taXNvXCIsIGluY2x1c2l2ZTogdHJ1ZSwgYXR0cmlidXRlczogeyBkaXI6IFwiYXV0b1wiIH0sIGJpZGlJc29sYXRlOiBudWxsIH0pXG59O1xuXG5leHBvcnQgeyBEb2NJbnB1dCwgSGlnaGxpZ2h0U3R5bGUsIEluZGVudENvbnRleHQsIExSTGFuZ3VhZ2UsIExhbmd1YWdlLCBMYW5ndWFnZURlc2NyaXB0aW9uLCBMYW5ndWFnZVN1cHBvcnQsIFBhcnNlQ29udGV4dCwgU3RyZWFtTGFuZ3VhZ2UsIFN0cmluZ1N0cmVhbSwgVHJlZUluZGVudENvbnRleHQsIGJpZGlJc29sYXRlcywgYnJhY2tldE1hdGNoaW5nLCBicmFja2V0TWF0Y2hpbmdIYW5kbGUsIGNvZGVGb2xkaW5nLCBjb250aW51ZWRJbmRlbnQsIGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgZGVmaW5lTGFuZ3VhZ2VGYWNldCwgZGVsaW1pdGVkSW5kZW50LCBlbnN1cmVTeW50YXhUcmVlLCBmbGF0SW5kZW50LCBmb2xkQWxsLCBmb2xkQ29kZSwgZm9sZEVmZmVjdCwgZm9sZEd1dHRlciwgZm9sZEluc2lkZSwgZm9sZEtleW1hcCwgZm9sZE5vZGVQcm9wLCBmb2xkU2VydmljZSwgZm9sZFN0YXRlLCBmb2xkYWJsZSwgZm9sZGVkUmFuZ2VzLCBmb3JjZVBhcnNpbmcsIGdldEluZGVudFVuaXQsIGdldEluZGVudGF0aW9uLCBoaWdobGlnaHRpbmdGb3IsIGluZGVudE5vZGVQcm9wLCBpbmRlbnRPbklucHV0LCBpbmRlbnRSYW5nZSwgaW5kZW50U2VydmljZSwgaW5kZW50U3RyaW5nLCBpbmRlbnRVbml0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEYXRhUHJvcCwgbWF0Y2hCcmFja2V0cywgc3VibGFuZ3VhZ2VQcm9wLCBzeW50YXhIaWdobGlnaHRpbmcsIHN5bnRheFBhcnNlclJ1bm5pbmcsIHN5bnRheFRyZWUsIHN5bnRheFRyZWVBdmFpbGFibGUsIHRvZ2dsZUZvbGQsIHVuZm9sZEFsbCwgdW5mb2xkQ29kZSwgdW5mb2xkRWZmZWN0IH07XG4iLAogICAgImltcG9ydCB7IEFubm90YXRpb24sIEZhY2V0LCBjb21iaW5lQ29uZmlnLCBTdGF0ZUZpZWxkLCBUcmFuc2FjdGlvbiwgQ2hhbmdlU2V0LCBDaGFuZ2VEZXNjLCBFZGl0b3JTZWxlY3Rpb24sIFN0YXRlRWZmZWN0LCBUZXh0LCBmaW5kQ2x1c3RlckJyZWFrLCBjb3VudENvbHVtbiwgQ2hhckNhdGVnb3J5IH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgRWRpdG9yVmlldywgRGlyZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBJbmRlbnRDb250ZXh0LCBnZXRJbmRlbnRhdGlvbiwgaW5kZW50U3RyaW5nLCBtYXRjaEJyYWNrZXRzLCBzeW50YXhUcmVlLCBnZXRJbmRlbnRVbml0LCBpbmRlbnRVbml0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgTm9kZVByb3AgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcblxuLyoqXG5Db21tZW50IG9yIHVuY29tbWVudCB0aGUgY3VycmVudCBzZWxlY3Rpb24uIFdpbGwgdXNlIGxpbmUgY29tbWVudHNcbmlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byBibG9jayBjb21tZW50cy5cbiovXG5jb25zdCB0b2dnbGVDb21tZW50ID0gdGFyZ2V0ID0+IHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdGFyZ2V0LCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tKSwgY29uZmlnID0gZ2V0Q29uZmlnKHRhcmdldC5zdGF0ZSwgbGluZS5mcm9tKTtcbiAgICByZXR1cm4gY29uZmlnLmxpbmUgPyB0b2dnbGVMaW5lQ29tbWVudCh0YXJnZXQpIDogY29uZmlnLmJsb2NrID8gdG9nZ2xlQmxvY2tDb21tZW50QnlMaW5lKHRhcmdldCkgOiBmYWxzZTtcbn07XG5mdW5jdGlvbiBjb21tYW5kKGYsIG9wdGlvbikge1xuICAgIHJldHVybiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgICAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB0ciA9IGYob3B0aW9uLCBzdGF0ZSk7XG4gICAgICAgIGlmICghdHIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh0cikpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5Db21tZW50IG9yIHVuY29tbWVudCB0aGUgY3VycmVudCBzZWxlY3Rpb24gdXNpbmcgbGluZSBjb21tZW50cy5cblRoZSBsaW5lIGNvbW1lbnQgc3ludGF4IGlzIHRha2VuIGZyb20gdGhlXG5bYGNvbW1lbnRUb2tlbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLkNvbW1lbnRUb2tlbnMpIFtsYW5ndWFnZVxuZGF0YV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGFBdCkuXG4qL1xuY29uc3QgdG9nZ2xlTGluZUNvbW1lbnQgPSAvKkBfX1BVUkVfXyovY29tbWFuZChjaGFuZ2VMaW5lQ29tbWVudCwgMCAvKiBDb21tZW50T3B0aW9uLlRvZ2dsZSAqLyk7XG4vKipcbkNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGxpbmUgY29tbWVudHMuXG4qL1xuY29uc3QgbGluZUNvbW1lbnQgPSAvKkBfX1BVUkVfXyovY29tbWFuZChjaGFuZ2VMaW5lQ29tbWVudCwgMSAvKiBDb21tZW50T3B0aW9uLkNvbW1lbnQgKi8pO1xuLyoqXG5VbmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGxpbmUgY29tbWVudHMuXG4qL1xuY29uc3QgbGluZVVuY29tbWVudCA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKGNoYW5nZUxpbmVDb21tZW50LCAyIC8qIENvbW1lbnRPcHRpb24uVW5jb21tZW50ICovKTtcbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGJsb2NrIGNvbW1lbnRzLlxuVGhlIGJsb2NrIGNvbW1lbnQgc3ludGF4IGlzIHRha2VuIGZyb20gdGhlXG5bYGNvbW1lbnRUb2tlbnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLkNvbW1lbnRUb2tlbnMpIFtsYW5ndWFnZVxuZGF0YV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGFBdCkuXG4qL1xuY29uc3QgdG9nZ2xlQmxvY2tDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlQmxvY2tDb21tZW50LCAwIC8qIENvbW1lbnRPcHRpb24uVG9nZ2xlICovKTtcbi8qKlxuQ29tbWVudCB0aGUgY3VycmVudCBzZWxlY3Rpb24gdXNpbmcgYmxvY2sgY29tbWVudHMuXG4qL1xuY29uc3QgYmxvY2tDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlQmxvY2tDb21tZW50LCAxIC8qIENvbW1lbnRPcHRpb24uQ29tbWVudCAqLyk7XG4vKipcblVuY29tbWVudCB0aGUgY3VycmVudCBzZWxlY3Rpb24gdXNpbmcgYmxvY2sgY29tbWVudHMuXG4qL1xuY29uc3QgYmxvY2tVbmNvbW1lbnQgPSAvKkBfX1BVUkVfXyovY29tbWFuZChjaGFuZ2VCbG9ja0NvbW1lbnQsIDIgLyogQ29tbWVudE9wdGlvbi5VbmNvbW1lbnQgKi8pO1xuLyoqXG5Db21tZW50IG9yIHVuY29tbWVudCB0aGUgbGluZXMgYXJvdW5kIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZ1xuYmxvY2sgY29tbWVudHMuXG4qL1xuY29uc3QgdG9nZ2xlQmxvY2tDb21tZW50QnlMaW5lID0gLypAX19QVVJFX18qL2NvbW1hbmQoKG8sIHMpID0+IGNoYW5nZUJsb2NrQ29tbWVudChvLCBzLCBzZWxlY3RlZExpbmVSYW5nZXMocykpLCAwIC8qIENvbW1lbnRPcHRpb24uVG9nZ2xlICovKTtcbmZ1bmN0aW9uIGdldENvbmZpZyhzdGF0ZSwgcG9zKSB7XG4gICAgbGV0IGRhdGEgPSBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImNvbW1lbnRUb2tlbnNcIiwgcG9zLCAxKTtcbiAgICByZXR1cm4gZGF0YS5sZW5ndGggPyBkYXRhWzBdIDoge307XG59XG5jb25zdCBTZWFyY2hNYXJnaW4gPSA1MDtcbi8qKlxuRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gcmFuZ2UgaXMgYmxvY2stY29tbWVudGVkIGluIHRoZSBnaXZlblxuc3RhdGUuXG4qL1xuZnVuY3Rpb24gZmluZEJsb2NrQ29tbWVudChzdGF0ZSwgeyBvcGVuLCBjbG9zZSB9LCBmcm9tLCB0bykge1xuICAgIGxldCB0ZXh0QmVmb3JlID0gc3RhdGUuc2xpY2VEb2MoZnJvbSAtIFNlYXJjaE1hcmdpbiwgZnJvbSk7XG4gICAgbGV0IHRleHRBZnRlciA9IHN0YXRlLnNsaWNlRG9jKHRvLCB0byArIFNlYXJjaE1hcmdpbik7XG4gICAgbGV0IHNwYWNlQmVmb3JlID0gL1xccyokLy5leGVjKHRleHRCZWZvcmUpWzBdLmxlbmd0aCwgc3BhY2VBZnRlciA9IC9eXFxzKi8uZXhlYyh0ZXh0QWZ0ZXIpWzBdLmxlbmd0aDtcbiAgICBsZXQgYmVmb3JlT2ZmID0gdGV4dEJlZm9yZS5sZW5ndGggLSBzcGFjZUJlZm9yZTtcbiAgICBpZiAodGV4dEJlZm9yZS5zbGljZShiZWZvcmVPZmYgLSBvcGVuLmxlbmd0aCwgYmVmb3JlT2ZmKSA9PSBvcGVuICYmXG4gICAgICAgIHRleHRBZnRlci5zbGljZShzcGFjZUFmdGVyLCBzcGFjZUFmdGVyICsgY2xvc2UubGVuZ3RoKSA9PSBjbG9zZSkge1xuICAgICAgICByZXR1cm4geyBvcGVuOiB7IHBvczogZnJvbSAtIHNwYWNlQmVmb3JlLCBtYXJnaW46IHNwYWNlQmVmb3JlICYmIDEgfSxcbiAgICAgICAgICAgIGNsb3NlOiB7IHBvczogdG8gKyBzcGFjZUFmdGVyLCBtYXJnaW46IHNwYWNlQWZ0ZXIgJiYgMSB9IH07XG4gICAgfVxuICAgIGxldCBzdGFydFRleHQsIGVuZFRleHQ7XG4gICAgaWYgKHRvIC0gZnJvbSA8PSAyICogU2VhcmNoTWFyZ2luKSB7XG4gICAgICAgIHN0YXJ0VGV4dCA9IGVuZFRleHQgPSBzdGF0ZS5zbGljZURvYyhmcm9tLCB0byk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdGFydFRleHQgPSBzdGF0ZS5zbGljZURvYyhmcm9tLCBmcm9tICsgU2VhcmNoTWFyZ2luKTtcbiAgICAgICAgZW5kVGV4dCA9IHN0YXRlLnNsaWNlRG9jKHRvIC0gU2VhcmNoTWFyZ2luLCB0byk7XG4gICAgfVxuICAgIGxldCBzdGFydFNwYWNlID0gL15cXHMqLy5leGVjKHN0YXJ0VGV4dClbMF0ubGVuZ3RoLCBlbmRTcGFjZSA9IC9cXHMqJC8uZXhlYyhlbmRUZXh0KVswXS5sZW5ndGg7XG4gICAgbGV0IGVuZE9mZiA9IGVuZFRleHQubGVuZ3RoIC0gZW5kU3BhY2UgLSBjbG9zZS5sZW5ndGg7XG4gICAgaWYgKHN0YXJ0VGV4dC5zbGljZShzdGFydFNwYWNlLCBzdGFydFNwYWNlICsgb3Blbi5sZW5ndGgpID09IG9wZW4gJiZcbiAgICAgICAgZW5kVGV4dC5zbGljZShlbmRPZmYsIGVuZE9mZiArIGNsb3NlLmxlbmd0aCkgPT0gY2xvc2UpIHtcbiAgICAgICAgcmV0dXJuIHsgb3BlbjogeyBwb3M6IGZyb20gKyBzdGFydFNwYWNlICsgb3Blbi5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAvXFxzLy50ZXN0KHN0YXJ0VGV4dC5jaGFyQXQoc3RhcnRTcGFjZSArIG9wZW4ubGVuZ3RoKSkgPyAxIDogMCB9LFxuICAgICAgICAgICAgY2xvc2U6IHsgcG9zOiB0byAtIGVuZFNwYWNlIC0gY2xvc2UubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogL1xccy8udGVzdChlbmRUZXh0LmNoYXJBdChlbmRPZmYgLSAxKSkgPyAxIDogMCB9IH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gc2VsZWN0ZWRMaW5lUmFuZ2VzKHN0YXRlKSB7XG4gICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IHIgb2Ygc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICBsZXQgZnJvbUxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHIuZnJvbSk7XG4gICAgICAgIGxldCB0b0xpbmUgPSByLnRvIDw9IGZyb21MaW5lLnRvID8gZnJvbUxpbmUgOiBzdGF0ZS5kb2MubGluZUF0KHIudG8pO1xuICAgICAgICBpZiAodG9MaW5lLmZyb20gPiBmcm9tTGluZS5mcm9tICYmIHRvTGluZS5mcm9tID09IHIudG8pXG4gICAgICAgICAgICB0b0xpbmUgPSByLnRvID09IGZyb21MaW5lLnRvICsgMSA/IGZyb21MaW5lIDogc3RhdGUuZG9jLmxpbmVBdChyLnRvIC0gMSk7XG4gICAgICAgIGxldCBsYXN0ID0gcmFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChsYXN0ID49IDAgJiYgcmFuZ2VzW2xhc3RdLnRvID4gZnJvbUxpbmUuZnJvbSlcbiAgICAgICAgICAgIHJhbmdlc1tsYXN0XS50byA9IHRvTGluZS50bztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBmcm9tTGluZS5mcm9tICsgL15cXHMqLy5leGVjKGZyb21MaW5lLnRleHQpWzBdLmxlbmd0aCwgdG86IHRvTGluZS50byB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cbi8vIFBlcmZvcm1zIHRvZ2dsZSwgY29tbWVudCBhbmQgdW5jb21tZW50IG9mIGJsb2NrIGNvbW1lbnRzIGluXG4vLyBsYW5ndWFnZXMgdGhhdCBzdXBwb3J0IHRoZW0uXG5mdW5jdGlvbiBjaGFuZ2VCbG9ja0NvbW1lbnQob3B0aW9uLCBzdGF0ZSwgcmFuZ2VzID0gc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgIGxldCB0b2tlbnMgPSByYW5nZXMubWFwKHIgPT4gZ2V0Q29uZmlnKHN0YXRlLCByLmZyb20pLmJsb2NrKTtcbiAgICBpZiAoIXRva2Vucy5ldmVyeShjID0+IGMpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgY29tbWVudHMgPSByYW5nZXMubWFwKChyLCBpKSA9PiBmaW5kQmxvY2tDb21tZW50KHN0YXRlLCB0b2tlbnNbaV0sIHIuZnJvbSwgci50bykpO1xuICAgIGlmIChvcHRpb24gIT0gMiAvKiBDb21tZW50T3B0aW9uLlVuY29tbWVudCAqLyAmJiAhY29tbWVudHMuZXZlcnkoYyA9PiBjKSkge1xuICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiBzdGF0ZS5jaGFuZ2VzKHJhbmdlcy5tYXAoKHJhbmdlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRzW2ldKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt7IGZyb206IHJhbmdlLmZyb20sIGluc2VydDogdG9rZW5zW2ldLm9wZW4gKyBcIiBcIiB9LCB7IGZyb206IHJhbmdlLnRvLCBpbnNlcnQ6IFwiIFwiICsgdG9rZW5zW2ldLmNsb3NlIH1dO1xuICAgICAgICAgICAgfSkpIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbiAhPSAxIC8qIENvbW1lbnRPcHRpb24uQ29tbWVudCAqLyAmJiBjb21tZW50cy5zb21lKGMgPT4gYykpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGNvbW1lbnQ7IGkgPCBjb21tZW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChjb21tZW50ID0gY29tbWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9rZW4gPSB0b2tlbnNbaV0sIHsgb3BlbiwgY2xvc2UgfSA9IGNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogb3Blbi5wb3MgLSB0b2tlbi5vcGVuLmxlbmd0aCwgdG86IG9wZW4ucG9zICsgb3Blbi5tYXJnaW4gfSwgeyBmcm9tOiBjbG9zZS5wb3MgLSBjbG9zZS5tYXJnaW4sIHRvOiBjbG9zZS5wb3MgKyB0b2tlbi5jbG9zZS5sZW5ndGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXMgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vLyBQZXJmb3JtcyB0b2dnbGUsIGNvbW1lbnQgYW5kIHVuY29tbWVudCBvZiBsaW5lIGNvbW1lbnRzLlxuZnVuY3Rpb24gY2hhbmdlTGluZUNvbW1lbnQob3B0aW9uLCBzdGF0ZSwgcmFuZ2VzID0gc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgIGxldCBsaW5lcyA9IFtdO1xuICAgIGxldCBwcmV2TGluZSA9IC0xO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiByYW5nZXMpIHtcbiAgICAgICAgbGV0IHN0YXJ0SSA9IGxpbmVzLmxlbmd0aCwgbWluSW5kZW50ID0gMWU5O1xuICAgICAgICBsZXQgdG9rZW4gPSBnZXRDb25maWcoc3RhdGUsIGZyb20pLmxpbmU7XG4gICAgICAgIGlmICghdG9rZW4pXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gZnJvbTsgcG9zIDw9IHRvOykge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAobGluZS5mcm9tID4gcHJldkxpbmUgJiYgKGZyb20gPT0gdG8gfHwgdG8gPiBsaW5lLmZyb20pKSB7XG4gICAgICAgICAgICAgICAgcHJldkxpbmUgPSBsaW5lLmZyb207XG4gICAgICAgICAgICAgICAgbGV0IGluZGVudCA9IC9eXFxzKi8uZXhlYyhsaW5lLnRleHQpWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgZW1wdHkgPSBpbmRlbnQgPT0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGNvbW1lbnQgPSBsaW5lLnRleHQuc2xpY2UoaW5kZW50LCBpbmRlbnQgKyB0b2tlbi5sZW5ndGgpID09IHRva2VuID8gaW5kZW50IDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKGluZGVudCA8IGxpbmUudGV4dC5sZW5ndGggJiYgaW5kZW50IDwgbWluSW5kZW50KVxuICAgICAgICAgICAgICAgICAgICBtaW5JbmRlbnQgPSBpbmRlbnQ7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaCh7IGxpbmUsIGNvbW1lbnQsIHRva2VuLCBpbmRlbnQsIGVtcHR5LCBzaW5nbGU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zID0gbGluZS50byArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pbkluZGVudCA8IDFlOSlcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydEk7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAobGluZXNbaV0uaW5kZW50IDwgbGluZXNbaV0ubGluZS50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgbGluZXNbaV0uaW5kZW50ID0gbWluSW5kZW50O1xuICAgICAgICBpZiAobGluZXMubGVuZ3RoID09IHN0YXJ0SSArIDEpXG4gICAgICAgICAgICBsaW5lc1tzdGFydEldLnNpbmdsZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChvcHRpb24gIT0gMiAvKiBDb21tZW50T3B0aW9uLlVuY29tbWVudCAqLyAmJiBsaW5lcy5zb21lKGwgPT4gbC5jb21tZW50IDwgMCAmJiAoIWwuZW1wdHkgfHwgbC5zaW5nbGUpKSkge1xuICAgICAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB7IGxpbmUsIHRva2VuLCBpbmRlbnQsIGVtcHR5LCBzaW5nbGUgfSBvZiBsaW5lcylcbiAgICAgICAgICAgIGlmIChzaW5nbGUgfHwgIWVtcHR5KVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSArIGluZGVudCwgaW5zZXJ0OiB0b2tlbiArIFwiIFwiIH0pO1xuICAgICAgICBsZXQgY2hhbmdlU2V0ID0gc3RhdGUuY2hhbmdlcyhjaGFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogY2hhbmdlU2V0LCBzZWxlY3Rpb246IHN0YXRlLnNlbGVjdGlvbi5tYXAoY2hhbmdlU2V0LCAxKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb24gIT0gMSAvKiBDb21tZW50T3B0aW9uLkNvbW1lbnQgKi8gJiYgbGluZXMuc29tZShsID0+IGwuY29tbWVudCA+PSAwKSkge1xuICAgICAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB7IGxpbmUsIGNvbW1lbnQsIHRva2VuIH0gb2YgbGluZXMpXG4gICAgICAgICAgICBpZiAoY29tbWVudCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBsaW5lLmZyb20gKyBjb21tZW50LCB0byA9IGZyb20gKyB0b2tlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUudGV4dFt0byAtIGxpbmUuZnJvbV0gPT0gXCIgXCIpXG4gICAgICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXMgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IGZyb21IaXN0b3J5ID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcblRyYW5zYWN0aW9uIGFubm90YXRpb24gdGhhdCB3aWxsIHByZXZlbnQgdGhhdCB0cmFuc2FjdGlvbiBmcm9tXG5iZWluZyBjb21iaW5lZCB3aXRoIG90aGVyIHRyYW5zYWN0aW9ucyBpbiB0aGUgdW5kbyBoaXN0b3J5LiBHaXZlblxuYFwiYmVmb3JlXCJgLCBpdCdsbCBwcmV2ZW50IG1lcmdpbmcgd2l0aCBwcmV2aW91cyB0cmFuc2FjdGlvbnMuIFdpdGhcbmBcImFmdGVyXCJgLCBzdWJzZXF1ZW50IHRyYW5zYWN0aW9ucyB3b24ndCBiZSBjb21iaW5lZCB3aXRoIHRoaXNcbm9uZS4gV2l0aCBgXCJmdWxsXCJgLCB0aGUgdHJhbnNhY3Rpb24gaXMgaXNvbGF0ZWQgb24gYm90aCBzaWRlcy5cbiovXG5jb25zdCBpc29sYXRlSGlzdG9yeSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5UaGlzIGZhY2V0IHByb3ZpZGVzIGEgd2F5IHRvIHJlZ2lzdGVyIGZ1bmN0aW9ucyB0aGF0LCBnaXZlbiBhXG50cmFuc2FjdGlvbiwgcHJvdmlkZSBhIHNldCBvZiBlZmZlY3RzIHRoYXQgdGhlIGhpc3Rvcnkgc2hvdWxkXG5zdG9yZSB3aGVuIGludmVydGluZyB0aGUgdHJhbnNhY3Rpb24uIFRoaXMgY2FuIGJlIHVzZWQgdG9cbmludGVncmF0ZSBzb21lIGtpbmRzIG9mIGVmZmVjdHMgaW4gdGhlIGhpc3RvcnksIHNvIHRoYXQgdGhleSBjYW5cbmJlIHVuZG9uZSAoYW5kIHJlZG9uZSBhZ2FpbikuXG4qL1xuY29uc3QgaW52ZXJ0ZWRFZmZlY3RzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgaGlzdG9yeUNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICBtaW5EZXB0aDogMTAwLFxuICAgICAgICAgICAgbmV3R3JvdXBEZWxheTogNTAwLFxuICAgICAgICAgICAgam9pblRvRXZlbnQ6IChfdCwgaXNBZGphY2VudCkgPT4gaXNBZGphY2VudCxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbWluRGVwdGg6IE1hdGgubWF4LFxuICAgICAgICAgICAgbmV3R3JvdXBEZWxheTogTWF0aC5taW4sXG4gICAgICAgICAgICBqb2luVG9FdmVudDogKGEsIGIpID0+ICh0ciwgYWRqKSA9PiBhKHRyLCBhZGopIHx8IGIodHIsIGFkailcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5jb25zdCBoaXN0b3J5RmllbGRfID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiBIaXN0b3J5U3RhdGUuZW1wdHk7XG4gICAgfSxcbiAgICB1cGRhdGUoc3RhdGUsIHRyKSB7XG4gICAgICAgIGxldCBjb25maWcgPSB0ci5zdGF0ZS5mYWNldChoaXN0b3J5Q29uZmlnKTtcbiAgICAgICAgbGV0IGZyb21IaXN0ID0gdHIuYW5ub3RhdGlvbihmcm9tSGlzdG9yeSk7XG4gICAgICAgIGlmIChmcm9tSGlzdCkge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBIaXN0RXZlbnQuZnJvbVRyYW5zYWN0aW9uKHRyLCBmcm9tSGlzdC5zZWxlY3Rpb24pLCBmcm9tID0gZnJvbUhpc3Quc2lkZTtcbiAgICAgICAgICAgIGxldCBvdGhlciA9IGZyb20gPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBzdGF0ZS51bmRvbmUgOiBzdGF0ZS5kb25lO1xuICAgICAgICAgICAgaWYgKGl0ZW0pXG4gICAgICAgICAgICAgICAgb3RoZXIgPSB1cGRhdGVCcmFuY2gob3RoZXIsIG90aGVyLmxlbmd0aCwgY29uZmlnLm1pbkRlcHRoLCBpdGVtKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvdGhlciA9IGFkZFNlbGVjdGlvbihvdGhlciwgdHIuc3RhcnRTdGF0ZS5zZWxlY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoZnJvbSA9PSAwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLyA/IGZyb21IaXN0LnJlc3QgOiBvdGhlciwgZnJvbSA9PSAwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLyA/IG90aGVyIDogZnJvbUhpc3QucmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlzb2xhdGUgPSB0ci5hbm5vdGF0aW9uKGlzb2xhdGVIaXN0b3J5KTtcbiAgICAgICAgaWYgKGlzb2xhdGUgPT0gXCJmdWxsXCIgfHwgaXNvbGF0ZSA9PSBcImJlZm9yZVwiKVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5pc29sYXRlKCk7XG4gICAgICAgIGlmICh0ci5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLmFkZFRvSGlzdG9yeSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuICF0ci5jaGFuZ2VzLmVtcHR5ID8gc3RhdGUuYWRkTWFwcGluZyh0ci5jaGFuZ2VzLmRlc2MpIDogc3RhdGU7XG4gICAgICAgIGxldCBldmVudCA9IEhpc3RFdmVudC5mcm9tVHJhbnNhY3Rpb24odHIpO1xuICAgICAgICBsZXQgdGltZSA9IHRyLmFubm90YXRpb24oVHJhbnNhY3Rpb24udGltZSksIHVzZXJFdmVudCA9IHRyLmFubm90YXRpb24oVHJhbnNhY3Rpb24udXNlckV2ZW50KTtcbiAgICAgICAgaWYgKGV2ZW50KVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hZGRDaGFuZ2VzKGV2ZW50LCB0aW1lLCB1c2VyRXZlbnQsIGNvbmZpZywgdHIpO1xuICAgICAgICBlbHNlIGlmICh0ci5zZWxlY3Rpb24pXG4gICAgICAgICAgICBzdGF0ZSA9IHN0YXRlLmFkZFNlbGVjdGlvbih0ci5zdGFydFN0YXRlLnNlbGVjdGlvbiwgdGltZSwgdXNlckV2ZW50LCBjb25maWcubmV3R3JvdXBEZWxheSk7XG4gICAgICAgIGlmIChpc29sYXRlID09IFwiZnVsbFwiIHx8IGlzb2xhdGUgPT0gXCJhZnRlclwiKVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5pc29sYXRlKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9LFxuICAgIHRvSlNPTih2YWx1ZSkge1xuICAgICAgICByZXR1cm4geyBkb25lOiB2YWx1ZS5kb25lLm1hcChlID0+IGUudG9KU09OKCkpLCB1bmRvbmU6IHZhbHVlLnVuZG9uZS5tYXAoZSA9PiBlLnRvSlNPTigpKSB9O1xuICAgIH0sXG4gICAgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShqc29uLmRvbmUubWFwKEhpc3RFdmVudC5mcm9tSlNPTiksIGpzb24udW5kb25lLm1hcChIaXN0RXZlbnQuZnJvbUpTT04pKTtcbiAgICB9XG59KTtcbi8qKlxuQ3JlYXRlIGEgaGlzdG9yeSBleHRlbnNpb24gd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbi5cbiovXG5mdW5jdGlvbiBoaXN0b3J5KGNvbmZpZyA9IHt9KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgaGlzdG9yeUZpZWxkXyxcbiAgICAgICAgaGlzdG9yeUNvbmZpZy5vZihjb25maWcpLFxuICAgICAgICBFZGl0b3JWaWV3LmRvbUV2ZW50SGFuZGxlcnMoe1xuICAgICAgICAgICAgYmVmb3JlaW5wdXQoZSwgdmlldykge1xuICAgICAgICAgICAgICAgIGxldCBjb21tYW5kID0gZS5pbnB1dFR5cGUgPT0gXCJoaXN0b3J5VW5kb1wiID8gdW5kbyA6IGUuaW5wdXRUeXBlID09IFwiaGlzdG9yeVJlZG9cIiA/IHJlZG8gOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghY29tbWFuZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbWFuZCh2aWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICBdO1xufVxuLyoqXG5UaGUgc3RhdGUgZmllbGQgdXNlZCB0byBzdG9yZSB0aGUgaGlzdG9yeSBkYXRhLiBTaG91bGQgcHJvYmFibHlcbm9ubHkgYmUgdXNlZCB3aGVuIHlvdSB3YW50IHRvXG5bc2VyaWFsaXplXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnRvSlNPTikgb3JcbltkZXNlcmlhbGl6ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5mcm9tSlNPTikgc3RhdGUgb2JqZWN0cyBpbiBhIHdheVxudGhhdCBwcmVzZXJ2ZXMgaGlzdG9yeS5cbiovXG5jb25zdCBoaXN0b3J5RmllbGQgPSBoaXN0b3J5RmllbGRfO1xuZnVuY3Rpb24gY21kKHNpZGUsIHNlbGVjdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkge1xuICAgICAgICBpZiAoIXNlbGVjdGlvbiAmJiBzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGhpc3RvcnlTdGF0ZSA9IHN0YXRlLmZpZWxkKGhpc3RvcnlGaWVsZF8sIGZhbHNlKTtcbiAgICAgICAgaWYgKCFoaXN0b3J5U3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB0ciA9IGhpc3RvcnlTdGF0ZS5wb3Aoc2lkZSwgc3RhdGUsIHNlbGVjdGlvbik7XG4gICAgICAgIGlmICghdHIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGRpc3BhdGNoKHRyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuVW5kbyBhIHNpbmdsZSBncm91cCBvZiBoaXN0b3J5IGV2ZW50cy4gUmV0dXJucyBmYWxzZSBpZiBubyBncm91cFxud2FzIGF2YWlsYWJsZS5cbiovXG5jb25zdCB1bmRvID0gLypAX19QVVJFX18qL2NtZCgwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLywgZmFsc2UpO1xuLyoqXG5SZWRvIGEgZ3JvdXAgb2YgaGlzdG9yeSBldmVudHMuIFJldHVybnMgZmFsc2UgaWYgbm8gZ3JvdXAgd2FzXG5hdmFpbGFibGUuXG4qL1xuY29uc3QgcmVkbyA9IC8qQF9fUFVSRV9fKi9jbWQoMSAvKiBCcmFuY2hOYW1lLlVuZG9uZSAqLywgZmFsc2UpO1xuLyoqXG5VbmRvIGEgY2hhbmdlIG9yIHNlbGVjdGlvbiBjaGFuZ2UuXG4qL1xuY29uc3QgdW5kb1NlbGVjdGlvbiA9IC8qQF9fUFVSRV9fKi9jbWQoMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8sIHRydWUpO1xuLyoqXG5SZWRvIGEgY2hhbmdlIG9yIHNlbGVjdGlvbiBjaGFuZ2UuXG4qL1xuY29uc3QgcmVkb1NlbGVjdGlvbiA9IC8qQF9fUFVSRV9fKi9jbWQoMSAvKiBCcmFuY2hOYW1lLlVuZG9uZSAqLywgdHJ1ZSk7XG5mdW5jdGlvbiBkZXB0aChzaWRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBsZXQgaGlzdFN0YXRlID0gc3RhdGUuZmllbGQoaGlzdG9yeUZpZWxkXywgZmFsc2UpO1xuICAgICAgICBpZiAoIWhpc3RTdGF0ZSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgYnJhbmNoID0gc2lkZSA9PSAwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLyA/IGhpc3RTdGF0ZS5kb25lIDogaGlzdFN0YXRlLnVuZG9uZTtcbiAgICAgICAgcmV0dXJuIGJyYW5jaC5sZW5ndGggLSAoYnJhbmNoLmxlbmd0aCAmJiAhYnJhbmNoWzBdLmNoYW5nZXMgPyAxIDogMCk7XG4gICAgfTtcbn1cbi8qKlxuVGhlIGFtb3VudCBvZiB1bmRvYWJsZSBjaGFuZ2UgZXZlbnRzIGF2YWlsYWJsZSBpbiBhIGdpdmVuIHN0YXRlLlxuKi9cbmNvbnN0IHVuZG9EZXB0aCA9IC8qQF9fUFVSRV9fKi9kZXB0aCgwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLyk7XG4vKipcblRoZSBhbW91bnQgb2YgcmVkb2FibGUgY2hhbmdlIGV2ZW50cyBhdmFpbGFibGUgaW4gYSBnaXZlbiBzdGF0ZS5cbiovXG5jb25zdCByZWRvRGVwdGggPSAvKkBfX1BVUkVfXyovZGVwdGgoMSAvKiBCcmFuY2hOYW1lLlVuZG9uZSAqLyk7XG4vLyBIaXN0b3J5IGV2ZW50cyBzdG9yZSBncm91cHMgb2YgY2hhbmdlcyBvciBlZmZlY3RzIHRoYXQgbmVlZCB0byBiZVxuLy8gdW5kb25lL3JlZG9uZSB0b2dldGhlci5cbmNsYXNzIEhpc3RFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gVGhlIGNoYW5nZXMgaW4gdGhpcyBldmVudC4gTm9ybWFsIGV2ZW50cyBob2xkIGF0IGxlYXN0IG9uZVxuICAgIC8vIGNoYW5nZSBvciBlZmZlY3QuIEJ1dCBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHN0b3JlIHNlbGVjdGlvblxuICAgIC8vIGV2ZW50cyBiZWZvcmUgdGhlIGZpcnN0IGNoYW5nZSwgaW4gd2hpY2ggY2FzZSBhIHNwZWNpYWwgdHlwZSBvZlxuICAgIC8vIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hpY2ggZG9lc24ndCBob2xkIGFueSBjaGFuZ2VzLCB3aXRoXG4gICAgLy8gY2hhbmdlcyA9PSBzdGFydFNlbGVjdGlvbiA9PSB1bmRlZmluZWRcbiAgICBjaGFuZ2VzLCBcbiAgICAvLyBUaGUgZWZmZWN0cyBhc3NvY2lhdGVkIHdpdGggdGhpcyBldmVudFxuICAgIGVmZmVjdHMsIFxuICAgIC8vIEFjY3VtdWxhdGVkIG1hcHBpbmcgKGZyb20gYWRkVG9IaXN0b3J5PT1mYWxzZSkgdGhhdCBzaG91bGQgYmVcbiAgICAvLyBhcHBsaWVkIHRvIGV2ZW50cyBiZWxvdyB0aGlzIG9uZS5cbiAgICBtYXBwZWQsIFxuICAgIC8vIFRoZSBzZWxlY3Rpb24gYmVmb3JlIHRoaXMgZXZlbnRcbiAgICBzdGFydFNlbGVjdGlvbiwgXG4gICAgLy8gU3RvcmVzIHNlbGVjdGlvbiBjaGFuZ2VzIGFmdGVyIHRoaXMgZXZlbnQsIHRvIGJlIHVzZWQgZm9yXG4gICAgLy8gc2VsZWN0aW9uIHVuZG8vcmVkby5cbiAgICBzZWxlY3Rpb25zQWZ0ZXIpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gY2hhbmdlcztcbiAgICAgICAgdGhpcy5lZmZlY3RzID0gZWZmZWN0cztcbiAgICAgICAgdGhpcy5tYXBwZWQgPSBtYXBwZWQ7XG4gICAgICAgIHRoaXMuc3RhcnRTZWxlY3Rpb24gPSBzdGFydFNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zQWZ0ZXIgPSBzZWxlY3Rpb25zQWZ0ZXI7XG4gICAgfVxuICAgIHNldFNlbEFmdGVyKGFmdGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlzdEV2ZW50KHRoaXMuY2hhbmdlcywgdGhpcy5lZmZlY3RzLCB0aGlzLm1hcHBlZCwgdGhpcy5zdGFydFNlbGVjdGlvbiwgYWZ0ZXIpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hhbmdlczogKF9hID0gdGhpcy5jaGFuZ2VzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9KU09OKCksXG4gICAgICAgICAgICBtYXBwZWQ6IChfYiA9IHRoaXMubWFwcGVkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9KU09OKCksXG4gICAgICAgICAgICBzdGFydFNlbGVjdGlvbjogKF9jID0gdGhpcy5zdGFydFNlbGVjdGlvbikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnRvSlNPTigpLFxuICAgICAgICAgICAgc2VsZWN0aW9uc0FmdGVyOiB0aGlzLnNlbGVjdGlvbnNBZnRlci5tYXAocyA9PiBzLnRvSlNPTigpKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudChqc29uLmNoYW5nZXMgJiYgQ2hhbmdlU2V0LmZyb21KU09OKGpzb24uY2hhbmdlcyksIFtdLCBqc29uLm1hcHBlZCAmJiBDaGFuZ2VEZXNjLmZyb21KU09OKGpzb24ubWFwcGVkKSwganNvbi5zdGFydFNlbGVjdGlvbiAmJiBFZGl0b3JTZWxlY3Rpb24uZnJvbUpTT04oanNvbi5zdGFydFNlbGVjdGlvbiksIGpzb24uc2VsZWN0aW9uc0FmdGVyLm1hcChFZGl0b3JTZWxlY3Rpb24uZnJvbUpTT04pKTtcbiAgICB9XG4gICAgLy8gVGhpcyBkb2VzIG5vdCBjaGVjayBgYWRkVG9IaXN0b3J5YCBhbmQgc3VjaCwgaXQgYXNzdW1lcyB0aGVcbiAgICAvLyB0cmFuc2FjdGlvbiBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYW4gaXRlbS4gUmV0dXJucyBudWxsIHdoZW5cbiAgICAvLyB0aGVyZSBhcmUgbm8gY2hhbmdlcyBvciBlZmZlY3RzIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICBzdGF0aWMgZnJvbVRyYW5zYWN0aW9uKHRyLCBzZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IGVmZmVjdHMgPSBub25lO1xuICAgICAgICBmb3IgKGxldCBpbnZlcnQgb2YgdHIuc3RhcnRTdGF0ZS5mYWNldChpbnZlcnRlZEVmZmVjdHMpKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gaW52ZXJ0KHRyKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGVmZmVjdHMgPSBlZmZlY3RzLmNvbmNhdChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWZmZWN0cy5sZW5ndGggJiYgdHIuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudCh0ci5jaGFuZ2VzLmludmVydCh0ci5zdGFydFN0YXRlLmRvYyksIGVmZmVjdHMsIHVuZGVmaW5lZCwgc2VsZWN0aW9uIHx8IHRyLnN0YXJ0U3RhdGUuc2VsZWN0aW9uLCBub25lKTtcbiAgICB9XG4gICAgc3RhdGljIHNlbGVjdGlvbihzZWxlY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlzdEV2ZW50KHVuZGVmaW5lZCwgbm9uZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHNlbGVjdGlvbnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZUJyYW5jaChicmFuY2gsIHRvLCBtYXhMZW4sIG5ld0V2ZW50KSB7XG4gICAgbGV0IHN0YXJ0ID0gdG8gKyAxID4gbWF4TGVuICsgMjAgPyB0byAtIG1heExlbiAtIDEgOiAwO1xuICAgIGxldCBuZXdCcmFuY2ggPSBicmFuY2guc2xpY2Uoc3RhcnQsIHRvKTtcbiAgICBuZXdCcmFuY2gucHVzaChuZXdFdmVudCk7XG4gICAgcmV0dXJuIG5ld0JyYW5jaDtcbn1cbmZ1bmN0aW9uIGlzQWRqYWNlbnQoYSwgYikge1xuICAgIGxldCByYW5nZXMgPSBbXSwgaXNBZGphY2VudCA9IGZhbHNlO1xuICAgIGEuaXRlckNoYW5nZWRSYW5nZXMoKGYsIHQpID0+IHJhbmdlcy5wdXNoKGYsIHQpKTtcbiAgICBiLml0ZXJDaGFuZ2VkUmFuZ2VzKChfZiwgX3QsIGYsIHQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGZyb20gPSByYW5nZXNbaSsrXSwgdG8gPSByYW5nZXNbaSsrXTtcbiAgICAgICAgICAgIGlmICh0ID49IGZyb20gJiYgZiA8PSB0bylcbiAgICAgICAgICAgICAgICBpc0FkamFjZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc0FkamFjZW50O1xufVxuZnVuY3Rpb24gZXFTZWxlY3Rpb25TaGFwZShhLCBiKSB7XG4gICAgcmV0dXJuIGEucmFuZ2VzLmxlbmd0aCA9PSBiLnJhbmdlcy5sZW5ndGggJiZcbiAgICAgICAgYS5yYW5nZXMuZmlsdGVyKChyLCBpKSA9PiByLmVtcHR5ICE9IGIucmFuZ2VzW2ldLmVtcHR5KS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiBjb25jKGEsIGIpIHtcbiAgICByZXR1cm4gIWEubGVuZ3RoID8gYiA6ICFiLmxlbmd0aCA/IGEgOiBhLmNvbmNhdChiKTtcbn1cbmNvbnN0IG5vbmUgPSBbXTtcbmNvbnN0IE1heFNlbGVjdGlvbnNQZXJFdmVudCA9IDIwMDtcbmZ1bmN0aW9uIGFkZFNlbGVjdGlvbihicmFuY2gsIHNlbGVjdGlvbikge1xuICAgIGlmICghYnJhbmNoLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW0hpc3RFdmVudC5zZWxlY3Rpb24oW3NlbGVjdGlvbl0pXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBsYXN0RXZlbnQgPSBicmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdO1xuICAgICAgICBsZXQgc2VscyA9IGxhc3RFdmVudC5zZWxlY3Rpb25zQWZ0ZXIuc2xpY2UoTWF0aC5tYXgoMCwgbGFzdEV2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggLSBNYXhTZWxlY3Rpb25zUGVyRXZlbnQpKTtcbiAgICAgICAgaWYgKHNlbHMubGVuZ3RoICYmIHNlbHNbc2Vscy5sZW5ndGggLSAxXS5lcShzZWxlY3Rpb24pKVxuICAgICAgICAgICAgcmV0dXJuIGJyYW5jaDtcbiAgICAgICAgc2Vscy5wdXNoKHNlbGVjdGlvbik7XG4gICAgICAgIHJldHVybiB1cGRhdGVCcmFuY2goYnJhbmNoLCBicmFuY2gubGVuZ3RoIC0gMSwgMWU5LCBsYXN0RXZlbnQuc2V0U2VsQWZ0ZXIoc2VscykpO1xuICAgIH1cbn1cbi8vIEFzc3VtZXMgdGhlIHRvcCBpdGVtIGhhcyBvbmUgb3IgbW9yZSBzZWxlY3Rpb25BZnRlciB2YWx1ZXNcbmZ1bmN0aW9uIHBvcFNlbGVjdGlvbihicmFuY2gpIHtcbiAgICBsZXQgbGFzdCA9IGJyYW5jaFticmFuY2gubGVuZ3RoIC0gMV07XG4gICAgbGV0IG5ld0JyYW5jaCA9IGJyYW5jaC5zbGljZSgpO1xuICAgIG5ld0JyYW5jaFticmFuY2gubGVuZ3RoIC0gMV0gPSBsYXN0LnNldFNlbEFmdGVyKGxhc3Quc2VsZWN0aW9uc0FmdGVyLnNsaWNlKDAsIGxhc3Quc2VsZWN0aW9uc0FmdGVyLmxlbmd0aCAtIDEpKTtcbiAgICByZXR1cm4gbmV3QnJhbmNoO1xufVxuLy8gQWRkIGEgbWFwcGluZyB0byB0aGUgdG9wIGV2ZW50IGluIHRoZSBnaXZlbiBicmFuY2guIElmIHRoaXMgbWFwc1xuLy8gYXdheSBhbGwgdGhlIGNoYW5nZXMgYW5kIGVmZmVjdHMgaW4gdGhhdCBpdGVtLCBkcm9wIGl0IGFuZFxuLy8gcHJvcGFnYXRlIHRoZSBtYXBwaW5nIHRvIHRoZSBuZXh0IGl0ZW0uXG5mdW5jdGlvbiBhZGRNYXBwaW5nVG9CcmFuY2goYnJhbmNoLCBtYXBwaW5nKSB7XG4gICAgaWYgKCFicmFuY2gubGVuZ3RoKVxuICAgICAgICByZXR1cm4gYnJhbmNoO1xuICAgIGxldCBsZW5ndGggPSBicmFuY2gubGVuZ3RoLCBzZWxlY3Rpb25zID0gbm9uZTtcbiAgICB3aGlsZSAobGVuZ3RoKSB7XG4gICAgICAgIGxldCBldmVudCA9IG1hcEV2ZW50KGJyYW5jaFtsZW5ndGggLSAxXSwgbWFwcGluZywgc2VsZWN0aW9ucyk7XG4gICAgICAgIGlmIChldmVudC5jaGFuZ2VzICYmICFldmVudC5jaGFuZ2VzLmVtcHR5IHx8IGV2ZW50LmVmZmVjdHMubGVuZ3RoKSB7IC8vIEV2ZW50IHN1cnZpdmVkIG1hcHBpbmdcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBicmFuY2guc2xpY2UoMCwgbGVuZ3RoKTtcbiAgICAgICAgICAgIHJlc3VsdFtsZW5ndGggLSAxXSA9IGV2ZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gRHJvcCB0aGlzIGV2ZW50LCBzaW5jZSB0aGVyZSdzIG5vIGNoYW5nZXMgb3IgZWZmZWN0cyBsZWZ0XG4gICAgICAgICAgICBtYXBwaW5nID0gZXZlbnQubWFwcGVkO1xuICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICBzZWxlY3Rpb25zID0gZXZlbnQuc2VsZWN0aW9uc0FmdGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3Rpb25zLmxlbmd0aCA/IFtIaXN0RXZlbnQuc2VsZWN0aW9uKHNlbGVjdGlvbnMpXSA6IG5vbmU7XG59XG5mdW5jdGlvbiBtYXBFdmVudChldmVudCwgbWFwcGluZywgZXh0cmFTZWxlY3Rpb25zKSB7XG4gICAgbGV0IHNlbGVjdGlvbnMgPSBjb25jKGV2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggPyBldmVudC5zZWxlY3Rpb25zQWZ0ZXIubWFwKHMgPT4gcy5tYXAobWFwcGluZykpIDogbm9uZSwgZXh0cmFTZWxlY3Rpb25zKTtcbiAgICAvLyBDaGFuZ2UtbGVzcyBldmVudHMgZG9uJ3Qgc3RvcmUgbWFwcGluZ3MgKHRoZXkgYXJlIGFsd2F5cyB0aGUgbGFzdCBldmVudCBpbiBhIGJyYW5jaClcbiAgICBpZiAoIWV2ZW50LmNoYW5nZXMpXG4gICAgICAgIHJldHVybiBIaXN0RXZlbnQuc2VsZWN0aW9uKHNlbGVjdGlvbnMpO1xuICAgIGxldCBtYXBwZWRDaGFuZ2VzID0gZXZlbnQuY2hhbmdlcy5tYXAobWFwcGluZyksIGJlZm9yZSA9IG1hcHBpbmcubWFwRGVzYyhldmVudC5jaGFuZ2VzLCB0cnVlKTtcbiAgICBsZXQgZnVsbE1hcHBpbmcgPSBldmVudC5tYXBwZWQgPyBldmVudC5tYXBwZWQuY29tcG9zZURlc2MoYmVmb3JlKSA6IGJlZm9yZTtcbiAgICByZXR1cm4gbmV3IEhpc3RFdmVudChtYXBwZWRDaGFuZ2VzLCBTdGF0ZUVmZmVjdC5tYXBFZmZlY3RzKGV2ZW50LmVmZmVjdHMsIG1hcHBpbmcpLCBmdWxsTWFwcGluZywgZXZlbnQuc3RhcnRTZWxlY3Rpb24ubWFwKGJlZm9yZSksIHNlbGVjdGlvbnMpO1xufVxuY29uc3Qgam9pbmFibGVVc2VyRXZlbnQgPSAvXihpbnB1dFxcLnR5cGV8ZGVsZXRlKSgkfFxcLikvO1xuY2xhc3MgSGlzdG9yeVN0YXRlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb25lLCB1bmRvbmUsIHByZXZUaW1lID0gMCwgcHJldlVzZXJFdmVudCA9IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmRvbmUgPSBkb25lO1xuICAgICAgICB0aGlzLnVuZG9uZSA9IHVuZG9uZTtcbiAgICAgICAgdGhpcy5wcmV2VGltZSA9IHByZXZUaW1lO1xuICAgICAgICB0aGlzLnByZXZVc2VyRXZlbnQgPSBwcmV2VXNlckV2ZW50O1xuICAgIH1cbiAgICBpc29sYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2VGltZSA/IG5ldyBIaXN0b3J5U3RhdGUodGhpcy5kb25lLCB0aGlzLnVuZG9uZSkgOiB0aGlzO1xuICAgIH1cbiAgICBhZGRDaGFuZ2VzKGV2ZW50LCB0aW1lLCB1c2VyRXZlbnQsIGNvbmZpZywgdHIpIHtcbiAgICAgICAgbGV0IGRvbmUgPSB0aGlzLmRvbmUsIGxhc3RFdmVudCA9IGRvbmVbZG9uZS5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RFdmVudCAmJiBsYXN0RXZlbnQuY2hhbmdlcyAmJiAhbGFzdEV2ZW50LmNoYW5nZXMuZW1wdHkgJiYgZXZlbnQuY2hhbmdlcyAmJlxuICAgICAgICAgICAgKCF1c2VyRXZlbnQgfHwgam9pbmFibGVVc2VyRXZlbnQudGVzdCh1c2VyRXZlbnQpKSAmJlxuICAgICAgICAgICAgKCghbGFzdEV2ZW50LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICB0aW1lIC0gdGhpcy5wcmV2VGltZSA8IGNvbmZpZy5uZXdHcm91cERlbGF5ICYmXG4gICAgICAgICAgICAgICAgY29uZmlnLmpvaW5Ub0V2ZW50KHRyLCBpc0FkamFjZW50KGxhc3RFdmVudC5jaGFuZ2VzLCBldmVudC5jaGFuZ2VzKSkpIHx8XG4gICAgICAgICAgICAgICAgLy8gRm9yIGNvbXBvc2UgKGJ1dCBub3QgY29tcG9zZS5zdGFydCkgZXZlbnRzLCBhbHdheXMgam9pbiB3aXRoIHByZXZpb3VzIGV2ZW50XG4gICAgICAgICAgICAgICAgdXNlckV2ZW50ID09IFwiaW5wdXQudHlwZS5jb21wb3NlXCIpKSB7XG4gICAgICAgICAgICBkb25lID0gdXBkYXRlQnJhbmNoKGRvbmUsIGRvbmUubGVuZ3RoIC0gMSwgY29uZmlnLm1pbkRlcHRoLCBuZXcgSGlzdEV2ZW50KGV2ZW50LmNoYW5nZXMuY29tcG9zZShsYXN0RXZlbnQuY2hhbmdlcyksIGNvbmMoU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhldmVudC5lZmZlY3RzLCBsYXN0RXZlbnQuY2hhbmdlcyksIGxhc3RFdmVudC5lZmZlY3RzKSwgbGFzdEV2ZW50Lm1hcHBlZCwgbGFzdEV2ZW50LnN0YXJ0U2VsZWN0aW9uLCBub25lKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkb25lID0gdXBkYXRlQnJhbmNoKGRvbmUsIGRvbmUubGVuZ3RoLCBjb25maWcubWluRGVwdGgsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShkb25lLCBub25lLCB0aW1lLCB1c2VyRXZlbnQpO1xuICAgIH1cbiAgICBhZGRTZWxlY3Rpb24oc2VsZWN0aW9uLCB0aW1lLCB1c2VyRXZlbnQsIG5ld0dyb3VwRGVsYXkpIHtcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmRvbmUubGVuZ3RoID8gdGhpcy5kb25lW3RoaXMuZG9uZS5sZW5ndGggLSAxXS5zZWxlY3Rpb25zQWZ0ZXIgOiBub25lO1xuICAgICAgICBpZiAobGFzdC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICB0aW1lIC0gdGhpcy5wcmV2VGltZSA8IG5ld0dyb3VwRGVsYXkgJiZcbiAgICAgICAgICAgIHVzZXJFdmVudCA9PSB0aGlzLnByZXZVc2VyRXZlbnQgJiYgdXNlckV2ZW50ICYmIC9ec2VsZWN0KCR8XFwuKS8udGVzdCh1c2VyRXZlbnQpICYmXG4gICAgICAgICAgICBlcVNlbGVjdGlvblNoYXBlKGxhc3RbbGFzdC5sZW5ndGggLSAxXSwgc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShhZGRTZWxlY3Rpb24odGhpcy5kb25lLCBzZWxlY3Rpb24pLCB0aGlzLnVuZG9uZSwgdGltZSwgdXNlckV2ZW50KTtcbiAgICB9XG4gICAgYWRkTWFwcGluZyhtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVN0YXRlKGFkZE1hcHBpbmdUb0JyYW5jaCh0aGlzLmRvbmUsIG1hcHBpbmcpLCBhZGRNYXBwaW5nVG9CcmFuY2godGhpcy51bmRvbmUsIG1hcHBpbmcpLCB0aGlzLnByZXZUaW1lLCB0aGlzLnByZXZVc2VyRXZlbnQpO1xuICAgIH1cbiAgICBwb3Aoc2lkZSwgc3RhdGUsIG9ubHlTZWxlY3Rpb24pIHtcbiAgICAgICAgbGV0IGJyYW5jaCA9IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyB0aGlzLmRvbmUgOiB0aGlzLnVuZG9uZTtcbiAgICAgICAgaWYgKGJyYW5jaC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgZXZlbnQgPSBicmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdLCBzZWxlY3Rpb24gPSBldmVudC5zZWxlY3Rpb25zQWZ0ZXJbMF0gfHwgc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBpZiAob25seVNlbGVjdGlvbiAmJiBldmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IGV2ZW50LnNlbGVjdGlvbnNBZnRlcltldmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IGZyb21IaXN0b3J5Lm9mKHsgc2lkZSwgcmVzdDogcG9wU2VsZWN0aW9uKGJyYW5jaCksIHNlbGVjdGlvbiB9KSxcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQ6IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBcInNlbGVjdC51bmRvXCIgOiBcInNlbGVjdC5yZWRvXCIsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFldmVudC5jaGFuZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXN0ID0gYnJhbmNoLmxlbmd0aCA9PSAxID8gbm9uZSA6IGJyYW5jaC5zbGljZSgwLCBicmFuY2gubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBpZiAoZXZlbnQubWFwcGVkKVxuICAgICAgICAgICAgICAgIHJlc3QgPSBhZGRNYXBwaW5nVG9CcmFuY2gocmVzdCwgZXZlbnQubWFwcGVkKTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIGNoYW5nZXM6IGV2ZW50LmNoYW5nZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBldmVudC5zdGFydFNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBldmVudC5lZmZlY3RzLFxuICAgICAgICAgICAgICAgIGFubm90YXRpb25zOiBmcm9tSGlzdG9yeS5vZih7IHNpZGUsIHJlc3QsIHNlbGVjdGlvbiB9KSxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHVzZXJFdmVudDogc2lkZSA9PSAwIC8qIEJyYW5jaE5hbWUuRG9uZSAqLyA/IFwidW5kb1wiIDogXCJyZWRvXCIsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuSGlzdG9yeVN0YXRlLmVtcHR5ID0gLypAX19QVVJFX18qL25ldyBIaXN0b3J5U3RhdGUobm9uZSwgbm9uZSk7XG4vKipcbkRlZmF1bHQga2V5IGJpbmRpbmdzIGZvciB0aGUgdW5kbyBoaXN0b3J5LlxuXG4tIE1vZC16OiBbYHVuZG9gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnVuZG8pLlxuLSBNb2QteSAoTW9kLVNoaWZ0LXogb24gbWFjT1MpICsgQ3RybC1TaGlmdC16IG9uIExpbnV4OiBbYHJlZG9gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnJlZG8pLlxuLSBNb2QtdTogW2B1bmRvU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy51bmRvU2VsZWN0aW9uKS5cbi0gQWx0LXUgKE1vZC1TaGlmdC11IG9uIG1hY09TKTogW2ByZWRvU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5yZWRvU2VsZWN0aW9uKS5cbiovXG5jb25zdCBoaXN0b3J5S2V5bWFwID0gW1xuICAgIHsga2V5OiBcIk1vZC16XCIsIHJ1bjogdW5kbywgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QteVwiLCBtYWM6IFwiTW9kLVNoaWZ0LXpcIiwgcnVuOiByZWRvLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsgbGludXg6IFwiQ3RybC1TaGlmdC16XCIsIHJ1bjogcmVkbywgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtdVwiLCBydW46IHVuZG9TZWxlY3Rpb24sIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiQWx0LXVcIiwgbWFjOiBcIk1vZC1TaGlmdC11XCIsIHJ1bjogcmVkb1NlbGVjdGlvbiwgcHJldmVudERlZmF1bHQ6IHRydWUgfVxuXTtcblxuZnVuY3Rpb24gdXBkYXRlU2VsKHNlbCwgYnkpIHtcbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShzZWwucmFuZ2VzLm1hcChieSksIHNlbC5tYWluSW5kZXgpO1xufVxuZnVuY3Rpb24gc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gc3RhdGUudXBkYXRlKHsgc2VsZWN0aW9uLCBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcInNlbGVjdFwiIH0pO1xufVxuZnVuY3Rpb24gbW92ZVNlbCh7IHN0YXRlLCBkaXNwYXRjaCB9LCBob3cpIHtcbiAgICBsZXQgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgaG93KTtcbiAgICBpZiAoc2VsZWN0aW9uLmVxKHN0YXRlLnNlbGVjdGlvbiwgdHJ1ZSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHNlbGVjdGlvbikpO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmb3J3YXJkID8gcmFuZ2UudG8gOiByYW5nZS5mcm9tKTtcbn1cbmZ1bmN0aW9uIGN1cnNvckJ5Q2hhcih2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIG1vdmVTZWwodmlldywgcmFuZ2UgPT4gcmFuZ2UuZW1wdHkgPyB2aWV3Lm1vdmVCeUNoYXIocmFuZ2UsIGZvcndhcmQpIDogcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpKTtcbn1cbmZ1bmN0aW9uIGx0ckF0Q3Vyc29yKHZpZXcpIHtcbiAgICByZXR1cm4gdmlldy50ZXh0RGlyZWN0aW9uQXQodmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKSA9PSBEaXJlY3Rpb24uTFRSO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGNoYXJhY3RlciB0byB0aGUgbGVmdCAod2hpY2ggaXMgYmFja3dhcmQgaW5cbmxlZnQtdG8tcmlnaHQgdGV4dCwgZm9yd2FyZCBpbiByaWdodC10by1sZWZ0IHRleHQpLlxuKi9cbmNvbnN0IGN1cnNvckNoYXJMZWZ0ID0gdmlldyA9PiBjdXJzb3JCeUNoYXIodmlldywgIWx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IGN1cnNvckNoYXJSaWdodCA9IHZpZXcgPT4gY3Vyc29yQnlDaGFyKHZpZXcsIGx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgZm9yd2FyZC5cbiovXG5jb25zdCBjdXJzb3JDaGFyRm9yd2FyZCA9IHZpZXcgPT4gY3Vyc29yQnlDaGFyKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGNoYXJhY3RlciBiYWNrd2FyZC5cbiovXG5jb25zdCBjdXJzb3JDaGFyQmFja3dhcmQgPSB2aWV3ID0+IGN1cnNvckJ5Q2hhcih2aWV3LCBmYWxzZSk7XG5mdW5jdGlvbiBieUNoYXJMb2dpY2FsKHN0YXRlLCByYW5nZSwgZm9yd2FyZCkge1xuICAgIGxldCBwb3MgPSByYW5nZS5oZWFkLCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgIGlmIChwb3MgPT0gKGZvcndhcmQgPyBsaW5lLnRvIDogbGluZS5mcm9tKSlcbiAgICAgICAgcG9zID0gZm9yd2FyZCA/IE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIGxpbmUudG8gKyAxKSA6IE1hdGgubWF4KDAsIGxpbmUuZnJvbSAtIDEpO1xuICAgIGVsc2VcbiAgICAgICAgcG9zID0gbGluZS5mcm9tICsgZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHBvcyAtIGxpbmUuZnJvbSwgZm9yd2FyZCk7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zLCBmb3J3YXJkID8gLTEgOiAxKTtcbn1cbmZ1bmN0aW9uIG1vdmVCeUNoYXJMb2dpY2FsKHRhcmdldCwgZm9yd2FyZCkge1xuICAgIHJldHVybiBtb3ZlU2VsKHRhcmdldCwgcmFuZ2UgPT4gcmFuZ2UuZW1wdHkgPyBieUNoYXJMb2dpY2FsKHRhcmdldC5zdGF0ZSwgcmFuZ2UsIGZvcndhcmQpIDogcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgZm9yd2FyZCwgaW4gbG9naWNhbFxuKG5vbi10ZXh0LWRpcmVjdGlvbi1hd2FyZSkgc3RyaW5nIGluZGV4IG9yZGVyLlxuKi9cbmNvbnN0IGN1cnNvckNoYXJGb3J3YXJkTG9naWNhbCA9IHRhcmdldCA9PiBtb3ZlQnlDaGFyTG9naWNhbCh0YXJnZXQsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGNoYXJhY3RlciBiYWNrd2FyZCwgaW4gbG9naWNhbCBzdHJpbmcgaW5kZXhcbm9yZGVyLlxuKi9cbmNvbnN0IGN1cnNvckNoYXJCYWNrd2FyZExvZ2ljYWwgPSB0YXJnZXQgPT4gbW92ZUJ5Q2hhckxvZ2ljYWwodGFyZ2V0LCBmYWxzZSk7XG5mdW5jdGlvbiBjdXJzb3JCeUdyb3VwKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiByYW5nZS5lbXB0eSA/IHZpZXcubW92ZUJ5R3JvdXAocmFuZ2UsIGZvcndhcmQpIDogcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBsZWZ0IGFjcm9zcyBvbmUgZ3JvdXAgb2Ygd29yZCBvclxubm9uLXdvcmQgKGJ1dCBhbHNvIG5vbi1zcGFjZSkgY2hhcmFjdGVycy5cbiovXG5jb25zdCBjdXJzb3JHcm91cExlZnQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgIWx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBncm91cCB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBSaWdodCA9IHZpZXcgPT4gY3Vyc29yQnlHcm91cCh2aWV3LCBsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgZm9yd2FyZC5cbiovXG5jb25zdCBjdXJzb3JHcm91cEZvcndhcmQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgYmFja3dhcmQuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBCYWNrd2FyZCA9IHZpZXcgPT4gY3Vyc29yQnlHcm91cCh2aWV3LCBmYWxzZSk7XG5mdW5jdGlvbiB0b0dyb3VwU3RhcnQodmlldywgcG9zLCBzdGFydCkge1xuICAgIGxldCBjYXRlZ29yaXplID0gdmlldy5zdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICBsZXQgY2F0ID0gY2F0ZWdvcml6ZShzdGFydCksIGluaXRpYWwgPSBjYXQgIT0gQ2hhckNhdGVnb3J5LlNwYWNlO1xuICAgIHJldHVybiAobmV4dCkgPT4ge1xuICAgICAgICBsZXQgbmV4dENhdCA9IGNhdGVnb3JpemUobmV4dCk7XG4gICAgICAgIGlmIChuZXh0Q2F0ICE9IENoYXJDYXRlZ29yeS5TcGFjZSlcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsICYmIG5leHRDYXQgPT0gY2F0O1xuICAgICAgICBpbml0aWFsID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbk1vdmUgdGhlIGN1cnNvciBvbmUgZ3JvdXAgZm9yd2FyZCBpbiB0aGUgZGVmYXVsdCBXaW5kb3dzIHN0eWxlLFxud2hlcmUgaXQgbW92ZXMgdG8gdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IGdyb3VwLlxuKi9cbmNvbnN0IGN1cnNvckdyb3VwRm9yd2FyZFdpbiA9IHZpZXcgPT4ge1xuICAgIHJldHVybiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IHJhbmdlLmVtcHR5XG4gICAgICAgID8gdmlldy5tb3ZlQnlDaGFyKHJhbmdlLCB0cnVlLCBzdGFydCA9PiB0b0dyb3VwU3RhcnQodmlldywgcmFuZ2UuaGVhZCwgc3RhcnQpKVxuICAgICAgICA6IHJhbmdlRW5kKHJhbmdlLCB0cnVlKSk7XG59O1xuY29uc3Qgc2VnbWVudGVyID0gdHlwZW9mIEludGwgIT0gXCJ1bmRlZmluZWRcIiAmJiBJbnRsLlNlZ21lbnRlciA/XG4gICAgLypAX19QVVJFX18qL25ldyAoSW50bC5TZWdtZW50ZXIpKHVuZGVmaW5lZCwgeyBncmFudWxhcml0eTogXCJ3b3JkXCIgfSkgOiBudWxsO1xuZnVuY3Rpb24gbW92ZUJ5U3Vid29yZCh2aWV3LCByYW5nZSwgZm9yd2FyZCkge1xuICAgIGxldCBjYXRlZ29yaXplID0gdmlldy5zdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocmFuZ2UuZnJvbSk7XG4gICAgbGV0IGNhdCA9IENoYXJDYXRlZ29yeS5TcGFjZSwgcG9zID0gcmFuZ2UuZnJvbSwgc3RlcHMgPSAwO1xuICAgIGxldCBkb25lID0gZmFsc2UsIHNhd1VwcGVyID0gZmFsc2UsIHNhd0xvd2VyID0gZmFsc2U7XG4gICAgbGV0IHN0ZXAgPSAobmV4dCkgPT4ge1xuICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcG9zICs9IGZvcndhcmQgPyBuZXh0Lmxlbmd0aCA6IC1uZXh0Lmxlbmd0aDtcbiAgICAgICAgbGV0IG5leHRDYXQgPSBjYXRlZ29yaXplKG5leHQpLCBhaGVhZDtcbiAgICAgICAgaWYgKG5leHRDYXQgPT0gQ2hhckNhdGVnb3J5LldvcmQgJiYgbmV4dC5jaGFyQ29kZUF0KDApIDwgMTI4ICYmIC9bXFxXX10vLnRlc3QobmV4dCkpXG4gICAgICAgICAgICBuZXh0Q2F0ID0gLTE7IC8vIFRyZWF0IHdvcmQgcHVuY3R1YXRpb24gc3BlY2lhbGx5XG4gICAgICAgIGlmIChjYXQgPT0gQ2hhckNhdGVnb3J5LlNwYWNlKVxuICAgICAgICAgICAgY2F0ID0gbmV4dENhdDtcbiAgICAgICAgaWYgKGNhdCAhPSBuZXh0Q2F0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoY2F0ID09IENoYXJDYXRlZ29yeS5Xb3JkKSB7XG4gICAgICAgICAgICBpZiAobmV4dC50b0xvd2VyQ2FzZSgpID09IG5leHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZvcndhcmQgJiYgc2F3VXBwZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBzYXdMb3dlciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzYXdMb3dlcikge1xuICAgICAgICAgICAgICAgIGlmIChmb3J3YXJkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc2F3VXBwZXIgJiYgZm9yd2FyZCAmJiBjYXRlZ29yaXplKGFoZWFkID0gdmlldy5zdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIDEpKSA9PSBDaGFyQ2F0ZWdvcnkuV29yZCAmJlxuICAgICAgICAgICAgICAgICAgICBhaGVhZC50b0xvd2VyQ2FzZSgpID09IGFoZWFkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2F3VXBwZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXBzKys7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgbGV0IGVuZCA9IHZpZXcubW92ZUJ5Q2hhcihyYW5nZSwgZm9yd2FyZCwgc3RhcnQgPT4ge1xuICAgICAgICBzdGVwKHN0YXJ0KTtcbiAgICAgICAgcmV0dXJuIHN0ZXA7XG4gICAgfSk7XG4gICAgaWYgKHNlZ21lbnRlciAmJiBjYXQgPT0gQ2hhckNhdGVnb3J5LldvcmQgJiYgZW5kLmZyb20gPT0gcmFuZ2UuZnJvbSArIHN0ZXBzICogKGZvcndhcmQgPyAxIDogLTEpKSB7XG4gICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4ocmFuZ2UuaGVhZCwgZW5kLmhlYWQpLCB0byA9IE1hdGgubWF4KHJhbmdlLmhlYWQsIGVuZC5oZWFkKTtcbiAgICAgICAgbGV0IHNraXBwZWQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKTtcbiAgICAgICAgaWYgKHNraXBwZWQubGVuZ3RoID4gMSAmJiAvW1xcdTRFMDAtXFx1ZmZmZl0vLnRlc3Qoc2tpcHBlZCkpIHtcbiAgICAgICAgICAgIGxldCBzZWdtZW50cyA9IEFycmF5LmZyb20oc2VnbWVudGVyLnNlZ21lbnQoc2tpcHBlZCkpO1xuICAgICAgICAgICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yd2FyZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIHNlZ21lbnRzWzFdLmluZGV4LCAtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZW5kLmhlYWQgKyBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLSAxXS5pbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVuZDtcbn1cbmZ1bmN0aW9uIGN1cnNvckJ5U3Vid29yZCh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIG1vdmVTZWwodmlldywgcmFuZ2UgPT4gcmFuZ2UuZW1wdHkgPyBtb3ZlQnlTdWJ3b3JkKHZpZXcsIHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgb3IgY2FtZWwtY2FzZSBzdWJ3b3JkIGZvcndhcmQuXG4qL1xuY29uc3QgY3Vyc29yU3Vid29yZEZvcndhcmQgPSB2aWV3ID0+IGN1cnNvckJ5U3Vid29yZCh2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBncm91cCBvciBjYW1lbC1jYXNlIHN1YndvcmQgYmFja3dhcmQuXG4qL1xuY29uc3QgY3Vyc29yU3Vid29yZEJhY2t3YXJkID0gdmlldyA9PiBjdXJzb3JCeVN1YndvcmQodmlldywgZmFsc2UpO1xuZnVuY3Rpb24gaW50ZXJlc3RpbmdOb2RlKHN0YXRlLCBub2RlLCBicmFja2V0UHJvcCkge1xuICAgIGlmIChub2RlLnR5cGUucHJvcChicmFja2V0UHJvcCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBsZW4gPSBub2RlLnRvIC0gbm9kZS5mcm9tO1xuICAgIHJldHVybiBsZW4gJiYgKGxlbiA+IDIgfHwgL1teXFxzLC47Ol0vLnRlc3Qoc3RhdGUuc2xpY2VEb2Mobm9kZS5mcm9tLCBub2RlLnRvKSkpIHx8IG5vZGUuZmlyc3RDaGlsZDtcbn1cbmZ1bmN0aW9uIG1vdmVCeVN5bnRheChzdGF0ZSwgc3RhcnQsIGZvcndhcmQpIHtcbiAgICBsZXQgcG9zID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKHN0YXJ0LmhlYWQpO1xuICAgIGxldCBicmFja2V0UHJvcCA9IGZvcndhcmQgPyBOb2RlUHJvcC5jbG9zZWRCeSA6IE5vZGVQcm9wLm9wZW5lZEJ5O1xuICAgIC8vIFNjYW4gZm9yd2FyZCB0aHJvdWdoIGNoaWxkIG5vZGVzIHRvIHNlZSBpZiB0aGVyZSdzIGFuIGludGVyZXN0aW5nXG4gICAgLy8gbm9kZSBhaGVhZC5cbiAgICBmb3IgKGxldCBhdCA9IHN0YXJ0LmhlYWQ7Oykge1xuICAgICAgICBsZXQgbmV4dCA9IGZvcndhcmQgPyBwb3MuY2hpbGRBZnRlcihhdCkgOiBwb3MuY2hpbGRCZWZvcmUoYXQpO1xuICAgICAgICBpZiAoIW5leHQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKGludGVyZXN0aW5nTm9kZShzdGF0ZSwgbmV4dCwgYnJhY2tldFByb3ApKVxuICAgICAgICAgICAgcG9zID0gbmV4dDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYXQgPSBmb3J3YXJkID8gbmV4dC50byA6IG5leHQuZnJvbTtcbiAgICB9XG4gICAgbGV0IGJyYWNrZXQgPSBwb3MudHlwZS5wcm9wKGJyYWNrZXRQcm9wKSwgbWF0Y2gsIG5ld1BvcztcbiAgICBpZiAoYnJhY2tldCAmJiAobWF0Y2ggPSBmb3J3YXJkID8gbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcG9zLmZyb20sIDEpIDogbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcG9zLnRvLCAtMSkpICYmIG1hdGNoLm1hdGNoZWQpXG4gICAgICAgIG5ld1BvcyA9IGZvcndhcmQgPyBtYXRjaC5lbmQudG8gOiBtYXRjaC5lbmQuZnJvbTtcbiAgICBlbHNlXG4gICAgICAgIG5ld1BvcyA9IGZvcndhcmQgPyBwb3MudG8gOiBwb3MuZnJvbTtcbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihuZXdQb3MsIGZvcndhcmQgPyAtMSA6IDEpO1xufVxuLyoqXG5Nb3ZlIHRoZSBjdXJzb3Igb3ZlciB0aGUgbmV4dCBzeW50YWN0aWMgZWxlbWVudCB0byB0aGUgbGVmdC5cbiovXG5jb25zdCBjdXJzb3JTeW50YXhMZWZ0ID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeVN5bnRheCh2aWV3LnN0YXRlLCByYW5nZSwgIWx0ckF0Q3Vyc29yKHZpZXcpKSk7XG4vKipcbk1vdmUgdGhlIGN1cnNvciBvdmVyIHRoZSBuZXh0IHN5bnRhY3RpYyBlbGVtZW50IHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBjdXJzb3JTeW50YXhSaWdodCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlTeW50YXgodmlldy5zdGF0ZSwgcmFuZ2UsIGx0ckF0Q3Vyc29yKHZpZXcpKSk7XG5mdW5jdGlvbiBjdXJzb3JCeUxpbmUodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IHtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiByYW5nZUVuZChyYW5nZSwgZm9yd2FyZCk7XG4gICAgICAgIGxldCBtb3ZlZCA9IHZpZXcubW92ZVZlcnRpY2FsbHkocmFuZ2UsIGZvcndhcmQpO1xuICAgICAgICByZXR1cm4gbW92ZWQuaGVhZCAhPSByYW5nZS5oZWFkID8gbW92ZWQgOiB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShyYW5nZSwgZm9yd2FyZCk7XG4gICAgfSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgbGluZSB1cC5cbiovXG5jb25zdCBjdXJzb3JMaW5lVXAgPSB2aWV3ID0+IGN1cnNvckJ5TGluZSh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgbGluZSBkb3duLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVEb3duID0gdmlldyA9PiBjdXJzb3JCeUxpbmUodmlldywgdHJ1ZSk7XG5mdW5jdGlvbiBwYWdlSW5mbyh2aWV3KSB7XG4gICAgbGV0IHNlbGZTY3JvbGwgPSB2aWV3LnNjcm9sbERPTS5jbGllbnRIZWlnaHQgPCB2aWV3LnNjcm9sbERPTS5zY3JvbGxIZWlnaHQgLSAyO1xuICAgIGxldCBtYXJnaW5Ub3AgPSAwLCBtYXJnaW5Cb3R0b20gPSAwLCBoZWlnaHQ7XG4gICAgaWYgKHNlbGZTY3JvbGwpIHtcbiAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHZpZXcuc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5zY3JvbGxNYXJnaW5zKSkge1xuICAgICAgICAgICAgbGV0IG1hcmdpbnMgPSBzb3VyY2Uodmlldyk7XG4gICAgICAgICAgICBpZiAobWFyZ2lucyA9PT0gbnVsbCB8fCBtYXJnaW5zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXJnaW5zLnRvcClcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3AgPSBNYXRoLm1heChtYXJnaW5zID09PSBudWxsIHx8IG1hcmdpbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hcmdpbnMudG9wLCBtYXJnaW5Ub3ApO1xuICAgICAgICAgICAgaWYgKG1hcmdpbnMgPT09IG51bGwgfHwgbWFyZ2lucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWFyZ2lucy5ib3R0b20pXG4gICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tID0gTWF0aC5tYXgobWFyZ2lucyA9PT0gbnVsbCB8fCBtYXJnaW5zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXJnaW5zLmJvdHRvbSwgbWFyZ2luQm90dG9tKTtcbiAgICAgICAgfVxuICAgICAgICBoZWlnaHQgPSB2aWV3LnNjcm9sbERPTS5jbGllbnRIZWlnaHQgLSBtYXJnaW5Ub3AgLSBtYXJnaW5Cb3R0b207XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBoZWlnaHQgPSAodmlldy5kb20ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cpLmlubmVySGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4geyBtYXJnaW5Ub3AsIG1hcmdpbkJvdHRvbSwgc2VsZlNjcm9sbCxcbiAgICAgICAgaGVpZ2h0OiBNYXRoLm1heCh2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0LCBoZWlnaHQgLSA1KSB9O1xufVxuZnVuY3Rpb24gY3Vyc29yQnlQYWdlKHZpZXcsIGZvcndhcmQpIHtcbiAgICBsZXQgcGFnZSA9IHBhZ2VJbmZvKHZpZXcpO1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwoc3RhdGUuc2VsZWN0aW9uLCByYW5nZSA9PiB7XG4gICAgICAgIHJldHVybiByYW5nZS5lbXB0eSA/IHZpZXcubW92ZVZlcnRpY2FsbHkocmFuZ2UsIGZvcndhcmQsIHBhZ2UuaGVpZ2h0KVxuICAgICAgICAgICAgOiByYW5nZUVuZChyYW5nZSwgZm9yd2FyZCk7XG4gICAgfSk7XG4gICAgaWYgKHNlbGVjdGlvbi5lcShzdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGVmZmVjdDtcbiAgICBpZiAocGFnZS5zZWxmU2Nyb2xsKSB7XG4gICAgICAgIGxldCBzdGFydFBvcyA9IHZpZXcuY29vcmRzQXRQb3Moc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgICAgIGxldCBzY3JvbGxSZWN0ID0gdmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBzY3JvbGxUb3AgPSBzY3JvbGxSZWN0LnRvcCArIHBhZ2UubWFyZ2luVG9wLCBzY3JvbGxCb3R0b20gPSBzY3JvbGxSZWN0LmJvdHRvbSAtIHBhZ2UubWFyZ2luQm90dG9tO1xuICAgICAgICBpZiAoc3RhcnRQb3MgJiYgc3RhcnRQb3MudG9wID4gc2Nyb2xsVG9wICYmIHN0YXJ0UG9zLmJvdHRvbSA8IHNjcm9sbEJvdHRvbSlcbiAgICAgICAgICAgIGVmZmVjdCA9IEVkaXRvclZpZXcuc2Nyb2xsSW50b1ZpZXcoc2VsZWN0aW9uLm1haW4uaGVhZCwgeyB5OiBcInN0YXJ0XCIsIHlNYXJnaW46IHN0YXJ0UG9zLnRvcCAtIHNjcm9sbFRvcCB9KTtcbiAgICB9XG4gICAgdmlldy5kaXNwYXRjaChzZXRTZWwoc3RhdGUsIHNlbGVjdGlvbiksIHsgZWZmZWN0czogZWZmZWN0IH0pO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIHBhZ2UgdXAuXG4qL1xuY29uc3QgY3Vyc29yUGFnZVVwID0gdmlldyA9PiBjdXJzb3JCeVBhZ2UodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIHBhZ2UgZG93bi5cbiovXG5jb25zdCBjdXJzb3JQYWdlRG93biA9IHZpZXcgPT4gY3Vyc29yQnlQYWdlKHZpZXcsIHRydWUpO1xuZnVuY3Rpb24gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LmxpbmVCbG9ja0F0KHN0YXJ0LmhlYWQpLCBtb3ZlZCA9IHZpZXcubW92ZVRvTGluZUJvdW5kYXJ5KHN0YXJ0LCBmb3J3YXJkKTtcbiAgICBpZiAobW92ZWQuaGVhZCA9PSBzdGFydC5oZWFkICYmIG1vdmVkLmhlYWQgIT0gKGZvcndhcmQgPyBsaW5lLnRvIDogbGluZS5mcm9tKSlcbiAgICAgICAgbW92ZWQgPSB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShzdGFydCwgZm9yd2FyZCwgZmFsc2UpO1xuICAgIGlmICghZm9yd2FyZCAmJiBtb3ZlZC5oZWFkID09IGxpbmUuZnJvbSAmJiBsaW5lLmxlbmd0aCkge1xuICAgICAgICBsZXQgc3BhY2UgPSAvXlxccyovLmV4ZWModmlldy5zdGF0ZS5zbGljZURvYyhsaW5lLmZyb20sIE1hdGgubWluKGxpbmUuZnJvbSArIDEwMCwgbGluZS50bykpKVswXS5sZW5ndGg7XG4gICAgICAgIGlmIChzcGFjZSAmJiBzdGFydC5oZWFkICE9IGxpbmUuZnJvbSArIHNwYWNlKVxuICAgICAgICAgICAgbW92ZWQgPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGxpbmUuZnJvbSArIHNwYWNlKTtcbiAgICB9XG4gICAgcmV0dXJuIG1vdmVkO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIG5leHQgbGluZSB3cmFwIHBvaW50LCBvciB0byB0aGUgZW5kIG9mXG50aGUgbGluZSBpZiB0aGVyZSBpc24ndCBvbmUgbGVmdCBvbiB0aGlzIGxpbmUuXG4qL1xuY29uc3QgY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlMaW5lQm91bmRhcnkodmlldywgcmFuZ2UsIHRydWUpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHByZXZpb3VzIGxpbmUgd3JhcCBwb2ludCwgb3IgZmFpbGluZyB0aGF0IHRvXG50aGUgc3RhcnQgb2YgdGhlIGxpbmUuIElmIHRoZSBsaW5lIGlzIGluZGVudGVkLCBhbmQgdGhlIGN1cnNvclxuaXNuJ3QgYWxyZWFkeSBhdCB0aGUgZW5kIG9mIHRoZSBpbmRlbnRhdGlvbiwgdGhpcyB3aWxsIG1vdmUgdG8gdGhlXG5lbmQgb2YgdGhlIGluZGVudGF0aW9uIGluc3RlYWQgb2YgdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgZmFsc2UpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBsaW5lIHdyYXAgcG9pbnQgdG8gdGhlIGxlZnQuXG4qL1xuY29uc3QgY3Vyc29yTGluZUJvdW5kYXJ5TGVmdCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlMaW5lQm91bmRhcnkodmlldywgcmFuZ2UsICFsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGxpbmUgd3JhcCBwb2ludCB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3QgY3Vyc29yTGluZUJvdW5kYXJ5UmlnaHQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVTdGFydCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHZpZXcubGluZUJsb2NrQXQocmFuZ2UuaGVhZCkuZnJvbSwgMSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgbGluZS5cbiovXG5jb25zdCBjdXJzb3JMaW5lRW5kID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Iodmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS50bywgLTEpKTtcbmZ1bmN0aW9uIHRvTWF0Y2hpbmdCcmFja2V0KHN0YXRlLCBkaXNwYXRjaCwgZXh0ZW5kKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2UsIHNlbGVjdGlvbiA9IHVwZGF0ZVNlbChzdGF0ZS5zZWxlY3Rpb24sIHJhbmdlID0+IHtcbiAgICAgICAgbGV0IG1hdGNoaW5nID0gbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcmFuZ2UuaGVhZCwgLTEpXG4gICAgICAgICAgICB8fCBtYXRjaEJyYWNrZXRzKHN0YXRlLCByYW5nZS5oZWFkLCAxKVxuICAgICAgICAgICAgfHwgKHJhbmdlLmhlYWQgPiAwICYmIG1hdGNoQnJhY2tldHMoc3RhdGUsIHJhbmdlLmhlYWQgLSAxLCAxKSlcbiAgICAgICAgICAgIHx8IChyYW5nZS5oZWFkIDwgc3RhdGUuZG9jLmxlbmd0aCAmJiBtYXRjaEJyYWNrZXRzKHN0YXRlLCByYW5nZS5oZWFkICsgMSwgLTEpKTtcbiAgICAgICAgaWYgKCFtYXRjaGluZyB8fCAhbWF0Y2hpbmcuZW5kKVxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIGxldCBoZWFkID0gbWF0Y2hpbmcuc3RhcnQuZnJvbSA9PSByYW5nZS5oZWFkID8gbWF0Y2hpbmcuZW5kLnRvIDogbWF0Y2hpbmcuZW5kLmZyb207XG4gICAgICAgIHJldHVybiBleHRlbmQgPyBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuYW5jaG9yLCBoZWFkKSA6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoaGVhZCk7XG4gICAgfSk7XG4gICAgaWYgKCFmb3VuZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgYnJhY2tldCBtYXRjaGluZyB0aGUgb25lIGl0IGlzIGN1cnJlbnRseVxub24sIGlmIGFueS5cbiovXG5jb25zdCBjdXJzb3JNYXRjaGluZ0JyYWNrZXQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gdG9NYXRjaGluZ0JyYWNrZXQoc3RhdGUsIGRpc3BhdGNoLCBmYWxzZSk7XG4vKipcbkV4dGVuZCB0aGUgc2VsZWN0aW9uIHRvIHRoZSBicmFja2V0IG1hdGNoaW5nIHRoZSBvbmUgdGhlIHNlbGVjdGlvblxuaGVhZCBpcyBjdXJyZW50bHkgb24sIGlmIGFueS5cbiovXG5jb25zdCBzZWxlY3RNYXRjaGluZ0JyYWNrZXQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gdG9NYXRjaGluZ0JyYWNrZXQoc3RhdGUsIGRpc3BhdGNoLCB0cnVlKTtcbmZ1bmN0aW9uIGV4dGVuZFNlbCh0YXJnZXQsIGhvdykge1xuICAgIGxldCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwodGFyZ2V0LnN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4ge1xuICAgICAgICBsZXQgaGVhZCA9IGhvdyhyYW5nZSk7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuYW5jaG9yLCBoZWFkLmhlYWQsIGhlYWQuZ29hbENvbHVtbiwgaGVhZC5iaWRpTGV2ZWwgfHwgdW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgICBpZiAoc2VsZWN0aW9uLmVxKHRhcmdldC5zdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdGFyZ2V0LmRpc3BhdGNoKHNldFNlbCh0YXJnZXQuc3RhdGUsIHNlbGVjdGlvbikpO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gc2VsZWN0QnlDaGFyKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IHZpZXcubW92ZUJ5Q2hhcihyYW5nZSwgZm9yd2FyZCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgY2hhcmFjdGVyIHRvIHRoZSBsZWZ0LCB3aGlsZSBsZWF2aW5nXG50aGUgYW5jaG9yIGluIHBsYWNlLlxuKi9cbmNvbnN0IHNlbGVjdENoYXJMZWZ0ID0gdmlldyA9PiBzZWxlY3RCeUNoYXIodmlldywgIWx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGNoYXJhY3RlciB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3Qgc2VsZWN0Q2hhclJpZ2h0ID0gdmlldyA9PiBzZWxlY3RCeUNoYXIodmlldywgbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgY2hhcmFjdGVyIGZvcndhcmQuXG4qL1xuY29uc3Qgc2VsZWN0Q2hhckZvcndhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5Q2hhcih2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGNoYXJhY3RlciBiYWNrd2FyZC5cbiovXG5jb25zdCBzZWxlY3RDaGFyQmFja3dhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5Q2hhcih2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgZm9yd2FyZCBieSBsb2dpY2FsXG4obm9uLWRpcmVjdGlvbiBhd2FyZSkgc3RyaW5nIGluZGV4IG9yZGVyLlxuKi9cbmNvbnN0IHNlbGVjdENoYXJGb3J3YXJkTG9naWNhbCA9IHRhcmdldCA9PiBleHRlbmRTZWwodGFyZ2V0LCByYW5nZSA9PiBieUNoYXJMb2dpY2FsKHRhcmdldC5zdGF0ZSwgcmFuZ2UsIHRydWUpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGNoYXJhY3RlciBiYWNrd2FyZCBieSBsb2dpY2FsIHN0cmluZ1xuaW5kZXggb3JkZXIuXG4qL1xuY29uc3Qgc2VsZWN0Q2hhckJhY2t3YXJkTG9naWNhbCA9IHRhcmdldCA9PiBleHRlbmRTZWwodGFyZ2V0LCByYW5nZSA9PiBieUNoYXJMb2dpY2FsKHRhcmdldC5zdGF0ZSwgcmFuZ2UsIGZhbHNlKSk7XG5mdW5jdGlvbiBzZWxlY3RCeUdyb3VwKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IHZpZXcubW92ZUJ5R3JvdXAocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIFtncm91cF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JHcm91cExlZnQpIHRvXG50aGUgbGVmdC5cbiovXG5jb25zdCBzZWxlY3RHcm91cExlZnQgPSB2aWV3ID0+IHNlbGVjdEJ5R3JvdXAodmlldywgIWx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGdyb3VwIHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBzZWxlY3RHcm91cFJpZ2h0ID0gdmlldyA9PiBzZWxlY3RCeUdyb3VwKHZpZXcsIGx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGdyb3VwIGZvcndhcmQuXG4qL1xuY29uc3Qgc2VsZWN0R3JvdXBGb3J3YXJkID0gdmlldyA9PiBzZWxlY3RCeUdyb3VwKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgYmFja3dhcmQuXG4qL1xuY29uc3Qgc2VsZWN0R3JvdXBCYWNrd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlHcm91cCh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCBmb3J3YXJkIGluIHRoZSBkZWZhdWx0IFdpbmRvd3NcbnN0eWxlLCBza2lwcGluZyB0byB0aGUgc3RhcnQgb2YgdGhlIG5leHQgZ3JvdXAuXG4qL1xuY29uc3Qgc2VsZWN0R3JvdXBGb3J3YXJkV2luID0gdmlldyA9PiB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiB2aWV3Lm1vdmVCeUNoYXIocmFuZ2UsIHRydWUsIHN0YXJ0ID0+IHRvR3JvdXBTdGFydCh2aWV3LCByYW5nZS5oZWFkLCBzdGFydCkpKTtcbn07XG5mdW5jdGlvbiBzZWxlY3RCeVN1YndvcmQodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5U3Vid29yZCh2aWV3LCByYW5nZSwgZm9yd2FyZCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgb3IgY2FtZWwtY2FzZSBzdWJ3b3JkIGZvcndhcmQuXG4qL1xuY29uc3Qgc2VsZWN0U3Vid29yZEZvcndhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5U3Vid29yZCh2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGdyb3VwIG9yIHN1YndvcmQgYmFja3dhcmQuXG4qL1xuY29uc3Qgc2VsZWN0U3Vid29yZEJhY2t3YXJkID0gdmlldyA9PiBzZWxlY3RCeVN1YndvcmQodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvdmVyIHRoZSBuZXh0IHN5bnRhY3RpYyBlbGVtZW50IHRvIHRoZSBsZWZ0LlxuKi9cbmNvbnN0IHNlbGVjdFN5bnRheExlZnQgPSB2aWV3ID0+IGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlTeW50YXgodmlldy5zdGF0ZSwgcmFuZ2UsICFsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvdmVyIHRoZSBuZXh0IHN5bnRhY3RpYyBlbGVtZW50IHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBzZWxlY3RTeW50YXhSaWdodCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeVN5bnRheCh2aWV3LnN0YXRlLCByYW5nZSwgbHRyQXRDdXJzb3IodmlldykpKTtcbmZ1bmN0aW9uIHNlbGVjdEJ5TGluZSh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiB2aWV3Lm1vdmVWZXJ0aWNhbGx5KHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBsaW5lIHVwLlxuKi9cbmNvbnN0IHNlbGVjdExpbmVVcCA9IHZpZXcgPT4gc2VsZWN0QnlMaW5lKHZpZXcsIGZhbHNlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGxpbmUgZG93bi5cbiovXG5jb25zdCBzZWxlY3RMaW5lRG93biA9IHZpZXcgPT4gc2VsZWN0QnlMaW5lKHZpZXcsIHRydWUpO1xuZnVuY3Rpb24gc2VsZWN0QnlQYWdlKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IHZpZXcubW92ZVZlcnRpY2FsbHkocmFuZ2UsIGZvcndhcmQsIHBhZ2VJbmZvKHZpZXcpLmhlaWdodCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgcGFnZSB1cC5cbiovXG5jb25zdCBzZWxlY3RQYWdlVXAgPSB2aWV3ID0+IHNlbGVjdEJ5UGFnZSh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBwYWdlIGRvd24uXG4qL1xuY29uc3Qgc2VsZWN0UGFnZURvd24gPSB2aWV3ID0+IHNlbGVjdEJ5UGFnZSh2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIG5leHQgbGluZSBib3VuZGFyeS5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlGb3J3YXJkID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCB0cnVlKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBwcmV2aW91cyBsaW5lIGJvdW5kYXJ5LlxuKi9cbmNvbnN0IHNlbGVjdExpbmVCb3VuZGFyeUJhY2t3YXJkID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBmYWxzZSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgbGluZSBib3VuZGFyeSB0byB0aGUgbGVmdC5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlMZWZ0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCAhbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGxpbmUgYm91bmRhcnkgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCBsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCB0byB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3Qgc2VsZWN0TGluZVN0YXJ0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLmZyb20pKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIGVuZCBvZiB0aGUgbGluZS5cbiovXG5jb25zdCBzZWxlY3RMaW5lRW5kID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLnRvKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgc3RhcnQgb2YgdGhlIGRvY3VtZW50LlxuKi9cbmNvbnN0IGN1cnNvckRvY1N0YXJ0ID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHsgYW5jaG9yOiAwIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBjdXJzb3JEb2NFbmQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgeyBhbmNob3I6IHN0YXRlLmRvYy5sZW5ndGggfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBzZWxlY3REb2NTdGFydCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCB7IGFuY2hvcjogc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCBoZWFkOiAwIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuKi9cbmNvbnN0IHNlbGVjdERvY0VuZCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCB7IGFuY2hvcjogc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCBoZWFkOiBzdGF0ZS5kb2MubGVuZ3RoIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblNlbGVjdCB0aGUgZW50aXJlIGRvY3VtZW50LlxuKi9cbmNvbnN0IHNlbGVjdEFsbCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHsgc2VsZWN0aW9uOiB7IGFuY2hvcjogMCwgaGVhZDogc3RhdGUuZG9jLmxlbmd0aCB9LCB1c2VyRXZlbnQ6IFwic2VsZWN0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuRXhwYW5kIHRoZSBzZWxlY3Rpb24gdG8gY292ZXIgZW50aXJlIGxpbmVzLlxuKi9cbmNvbnN0IHNlbGVjdExpbmUgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCByYW5nZXMgPSBzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpLm1hcCgoeyBmcm9tLCB0byB9KSA9PiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgTWF0aC5taW4odG8gKyAxLCBzdGF0ZS5kb2MubGVuZ3RoKSkpO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbjogRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMpLCB1c2VyRXZlbnQ6IFwic2VsZWN0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuU2VsZWN0IHRoZSBuZXh0IHN5bnRhY3RpYyBjb25zdHJ1Y3QgdGhhdCBpcyBsYXJnZXIgdGhhbiB0aGVcbnNlbGVjdGlvbi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBvbmx5IHdvcmsgaW5zb2ZhciBhcyB0aGUgbGFuZ3VhZ2Vcbltwcm92aWRlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZSkgeW91IHVzZSBidWlsZHMgdXAgYSBmdWxsXG5zeW50YXggdHJlZS5cbiovXG5jb25zdCBzZWxlY3RQYXJlbnRTeW50YXggPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwoc3RhdGUuc2VsZWN0aW9uLCByYW5nZSA9PiB7XG4gICAgICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSksIHN0YWNrID0gdHJlZS5yZXNvbHZlU3RhY2socmFuZ2UuZnJvbSwgMSk7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgbGV0IHN0YWNrQmVmb3JlID0gdHJlZS5yZXNvbHZlU3RhY2socmFuZ2UuZnJvbSwgLTEpO1xuICAgICAgICAgICAgaWYgKHN0YWNrQmVmb3JlLm5vZGUuZnJvbSA+PSBzdGFjay5ub2RlLmZyb20gJiYgc3RhY2tCZWZvcmUubm9kZS50byA8PSBzdGFjay5ub2RlLnRvKVxuICAgICAgICAgICAgICAgIHN0YWNrID0gc3RhY2tCZWZvcmU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgY3VyID0gc3RhY2s7IGN1cjsgY3VyID0gY3VyLm5leHQpIHtcbiAgICAgICAgICAgIGxldCB7IG5vZGUgfSA9IGN1cjtcbiAgICAgICAgICAgIGlmICgoKG5vZGUuZnJvbSA8IHJhbmdlLmZyb20gJiYgbm9kZS50byA+PSByYW5nZS50bykgfHxcbiAgICAgICAgICAgICAgICAobm9kZS50byA+IHJhbmdlLnRvICYmIG5vZGUuZnJvbSA8PSByYW5nZS5mcm9tKSkgJiZcbiAgICAgICAgICAgICAgICBjdXIubmV4dClcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKG5vZGUudG8sIG5vZGUuZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH0pO1xuICAgIGlmIChzZWxlY3Rpb24uZXEoc3RhdGUuc2VsZWN0aW9uKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5TaW1wbGlmeSB0aGUgY3VycmVudCBzZWxlY3Rpb24uIFdoZW4gbXVsdGlwbGUgcmFuZ2VzIGFyZSBzZWxlY3RlZCxcbnJlZHVjZSBpdCB0byBpdHMgbWFpbiByYW5nZS4gT3RoZXJ3aXNlLCBpZiB0aGUgc2VsZWN0aW9uIGlzXG5ub24tZW1wdHksIGNvbnZlcnQgaXQgdG8gYSBjdXJzb3Igc2VsZWN0aW9uLlxuKi9cbmNvbnN0IHNpbXBsaWZ5U2VsZWN0aW9uID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBsZXQgY3VyID0gc3RhdGUuc2VsZWN0aW9uLCBzZWxlY3Rpb24gPSBudWxsO1xuICAgIGlmIChjdXIucmFuZ2VzLmxlbmd0aCA+IDEpXG4gICAgICAgIHNlbGVjdGlvbiA9IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoW2N1ci5tYWluXSk7XG4gICAgZWxzZSBpZiAoIWN1ci5tYWluLmVtcHR5KVxuICAgICAgICBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKFtFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGN1ci5tYWluLmhlYWQpXSk7XG4gICAgaWYgKCFzZWxlY3Rpb24pXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHNlbGVjdGlvbikpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIGRlbGV0ZUJ5KHRhcmdldCwgYnkpIHtcbiAgICBpZiAodGFyZ2V0LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGV2ZW50ID0gXCJkZWxldGUuc2VsZWN0aW9uXCIsIHsgc3RhdGUgfSA9IHRhcmdldDtcbiAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gcmFuZ2U7XG4gICAgICAgIGlmIChmcm9tID09IHRvKSB7XG4gICAgICAgICAgICBsZXQgdG93YXJkcyA9IGJ5KHJhbmdlKTtcbiAgICAgICAgICAgIGlmICh0b3dhcmRzIDwgZnJvbSkge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gXCJkZWxldGUuYmFja3dhcmRcIjtcbiAgICAgICAgICAgICAgICB0b3dhcmRzID0gc2tpcEF0b21pYyh0YXJnZXQsIHRvd2FyZHMsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRvd2FyZHMgPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQgPSBcImRlbGV0ZS5mb3J3YXJkXCI7XG4gICAgICAgICAgICAgICAgdG93YXJkcyA9IHNraXBBdG9taWModGFyZ2V0LCB0b3dhcmRzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb20gPSBNYXRoLm1pbihmcm9tLCB0b3dhcmRzKTtcbiAgICAgICAgICAgIHRvID0gTWF0aC5tYXgodG8sIHRvd2FyZHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnJvbSA9IHNraXBBdG9taWModGFyZ2V0LCBmcm9tLCBmYWxzZSk7XG4gICAgICAgICAgICB0byA9IHNraXBBdG9taWModGFyZ2V0LCB0bywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb20gPT0gdG8gPyB7IHJhbmdlIH0gOiB7IGNoYW5nZXM6IHsgZnJvbSwgdG8gfSwgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZnJvbSwgZnJvbSA8IHJhbmdlLmhlYWQgPyAtMSA6IDEpIH07XG4gICAgfSk7XG4gICAgaWYgKGNoYW5nZXMuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywge1xuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgdXNlckV2ZW50OiBldmVudCxcbiAgICAgICAgZWZmZWN0czogZXZlbnQgPT0gXCJkZWxldGUuc2VsZWN0aW9uXCIgPyBFZGl0b3JWaWV3LmFubm91bmNlLm9mKHN0YXRlLnBocmFzZShcIlNlbGVjdGlvbiBkZWxldGVkXCIpKSA6IHVuZGVmaW5lZFxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHNraXBBdG9taWModGFyZ2V0LCBwb3MsIGZvcndhcmQpIHtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRWRpdG9yVmlldylcbiAgICAgICAgZm9yIChsZXQgcmFuZ2VzIG9mIHRhcmdldC5zdGF0ZS5mYWNldChFZGl0b3JWaWV3LmF0b21pY1JhbmdlcykubWFwKGYgPT4gZih0YXJnZXQpKSlcbiAgICAgICAgICAgIHJhbmdlcy5iZXR3ZWVuKHBvcywgcG9zLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA8IHBvcyAmJiB0byA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZm9yd2FyZCA/IHRvIDogZnJvbTtcbiAgICAgICAgICAgIH0pO1xuICAgIHJldHVybiBwb3M7XG59XG5jb25zdCBkZWxldGVCeUNoYXIgPSAodGFyZ2V0LCBmb3J3YXJkLCBieUluZGVudFVuaXQpID0+IGRlbGV0ZUJ5KHRhcmdldCwgcmFuZ2UgPT4ge1xuICAgIGxldCBwb3MgPSByYW5nZS5mcm9tLCB7IHN0YXRlIH0gPSB0YXJnZXQsIGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyksIGJlZm9yZSwgdGFyZ2V0UG9zO1xuICAgIGlmIChieUluZGVudFVuaXQgJiYgIWZvcndhcmQgJiYgcG9zID4gbGluZS5mcm9tICYmIHBvcyA8IGxpbmUuZnJvbSArIDIwMCAmJlxuICAgICAgICAhL1teIFxcdF0vLnRlc3QoYmVmb3JlID0gbGluZS50ZXh0LnNsaWNlKDAsIHBvcyAtIGxpbmUuZnJvbSkpKSB7XG4gICAgICAgIGlmIChiZWZvcmVbYmVmb3JlLmxlbmd0aCAtIDFdID09IFwiXFx0XCIpXG4gICAgICAgICAgICByZXR1cm4gcG9zIC0gMTtcbiAgICAgICAgbGV0IGNvbCA9IGNvdW50Q29sdW1uKGJlZm9yZSwgc3RhdGUudGFiU2l6ZSksIGRyb3AgPSBjb2wgJSBnZXRJbmRlbnRVbml0KHN0YXRlKSB8fCBnZXRJbmRlbnRVbml0KHN0YXRlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcm9wICYmIGJlZm9yZVtiZWZvcmUubGVuZ3RoIC0gMSAtIGldID09IFwiIFwiOyBpKyspXG4gICAgICAgICAgICBwb3MtLTtcbiAgICAgICAgdGFyZ2V0UG9zID0gcG9zO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0UG9zID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHBvcyAtIGxpbmUuZnJvbSwgZm9yd2FyZCwgZm9yd2FyZCkgKyBsaW5lLmZyb207XG4gICAgICAgIGlmICh0YXJnZXRQb3MgPT0gcG9zICYmIGxpbmUubnVtYmVyICE9IChmb3J3YXJkID8gc3RhdGUuZG9jLmxpbmVzIDogMSkpXG4gICAgICAgICAgICB0YXJnZXRQb3MgKz0gZm9yd2FyZCA/IDEgOiAtMTtcbiAgICAgICAgZWxzZSBpZiAoIWZvcndhcmQgJiYgL1tcXHVmZTAwLVxcdWZlMGZdLy50ZXN0KGxpbmUudGV4dC5zbGljZSh0YXJnZXRQb3MgLSBsaW5lLmZyb20sIHBvcyAtIGxpbmUuZnJvbSkpKVxuICAgICAgICAgICAgdGFyZ2V0UG9zID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHRhcmdldFBvcyAtIGxpbmUuZnJvbSwgZmFsc2UsIGZhbHNlKSArIGxpbmUuZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFBvcztcbn0pO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiwgb3IsIGZvciBjdXJzb3Igc2VsZWN0aW9ucywgdGhlIGNoYXJhY3RlciBvclxuaW5kZW50YXRpb24gdW5pdCBiZWZvcmUgdGhlIGN1cnNvci5cbiovXG5jb25zdCBkZWxldGVDaGFyQmFja3dhcmQgPSB2aWV3ID0+IGRlbGV0ZUJ5Q2hhcih2aWV3LCBmYWxzZSwgdHJ1ZSk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uIG9yIHRoZSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBjdXJzb3IuIERvZXMgbm90XG5pbXBsZW1lbnQgYW55IGV4dGVuZGVkIGJlaGF2aW9yIGxpa2UgZGVsZXRpbmcgd2hvbGUgaW5kZW50YXRpb25cbnVuaXRzIGluIG9uZSBnby5cbiovXG5jb25zdCBkZWxldGVDaGFyQmFja3dhcmRTdHJpY3QgPSB2aWV3ID0+IGRlbGV0ZUJ5Q2hhcih2aWV3LCBmYWxzZSwgZmFsc2UpO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciB0aGUgY2hhcmFjdGVyIGFmdGVyIHRoZSBjdXJzb3IuXG4qL1xuY29uc3QgZGVsZXRlQ2hhckZvcndhcmQgPSB2aWV3ID0+IGRlbGV0ZUJ5Q2hhcih2aWV3LCB0cnVlLCBmYWxzZSk7XG5jb25zdCBkZWxldGVCeUdyb3VwID0gKHRhcmdldCwgZm9yd2FyZCkgPT4gZGVsZXRlQnkodGFyZ2V0LCByYW5nZSA9PiB7XG4gICAgbGV0IHBvcyA9IHJhbmdlLmhlYWQsIHsgc3RhdGUgfSA9IHRhcmdldCwgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihwb3MpO1xuICAgIGZvciAobGV0IGNhdCA9IG51bGw7Oykge1xuICAgICAgICBpZiAocG9zID09IChmb3J3YXJkID8gbGluZS50byA6IGxpbmUuZnJvbSkpIHtcbiAgICAgICAgICAgIGlmIChwb3MgPT0gcmFuZ2UuaGVhZCAmJiBsaW5lLm51bWJlciAhPSAoZm9yd2FyZCA/IHN0YXRlLmRvYy5saW5lcyA6IDEpKVxuICAgICAgICAgICAgICAgIHBvcyArPSBmb3J3YXJkID8gMSA6IC0xO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgcG9zIC0gbGluZS5mcm9tLCBmb3J3YXJkKSArIGxpbmUuZnJvbTtcbiAgICAgICAgbGV0IG5leHRDaGFyID0gbGluZS50ZXh0LnNsaWNlKE1hdGgubWluKHBvcywgbmV4dCkgLSBsaW5lLmZyb20sIE1hdGgubWF4KHBvcywgbmV4dCkgLSBsaW5lLmZyb20pO1xuICAgICAgICBsZXQgbmV4dENhdCA9IGNhdGVnb3JpemUobmV4dENoYXIpO1xuICAgICAgICBpZiAoY2F0ICE9IG51bGwgJiYgbmV4dENhdCAhPSBjYXQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKG5leHRDaGFyICE9IFwiIFwiIHx8IHBvcyAhPSByYW5nZS5oZWFkKVxuICAgICAgICAgICAgY2F0ID0gbmV4dENhdDtcbiAgICAgICAgcG9zID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHBvcztcbn0pO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciBiYWNrd2FyZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBuZXh0XG5bZ3JvdXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVCeUdyb3VwKSwgb25seSBza2lwcGluZyBncm91cHMgb2ZcbndoaXRlc3BhY2Ugd2hlbiB0aGV5IGNvbnNpc3Qgb2YgYSBzaW5nbGUgc3BhY2UuXG4qL1xuY29uc3QgZGVsZXRlR3JvdXBCYWNrd2FyZCA9IHRhcmdldCA9PiBkZWxldGVCeUdyb3VwKHRhcmdldCwgZmFsc2UpO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciBmb3J3YXJkIHVudGlsIHRoZSBlbmQgb2YgdGhlIG5leHQgZ3JvdXAuXG4qL1xuY29uc3QgZGVsZXRlR3JvdXBGb3J3YXJkID0gdGFyZ2V0ID0+IGRlbGV0ZUJ5R3JvdXAodGFyZ2V0LCB0cnVlKTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24sIG9yLCBpZiBpdCBpcyBhIGN1cnNvciBzZWxlY3Rpb24sIGRlbGV0ZSB0b1xudGhlIGVuZCBvZiB0aGUgbGluZS4gSWYgdGhlIGN1cnNvciBpcyBkaXJlY3RseSBhdCB0aGUgZW5kIG9mIHRoZVxubGluZSwgZGVsZXRlIHRoZSBsaW5lIGJyZWFrIGFmdGVyIGl0LlxuKi9cbmNvbnN0IGRlbGV0ZVRvTGluZUVuZCA9IHZpZXcgPT4gZGVsZXRlQnkodmlldywgcmFuZ2UgPT4ge1xuICAgIGxldCBsaW5lRW5kID0gdmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS50bztcbiAgICByZXR1cm4gcmFuZ2UuaGVhZCA8IGxpbmVFbmQgPyBsaW5lRW5kIDogTWF0aC5taW4odmlldy5zdGF0ZS5kb2MubGVuZ3RoLCByYW5nZS5oZWFkICsgMSk7XG59KTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24sIG9yLCBpZiBpdCBpcyBhIGN1cnNvciBzZWxlY3Rpb24sIGRlbGV0ZSB0b1xudGhlIHN0YXJ0IG9mIHRoZSBsaW5lLiBJZiB0aGUgY3Vyc29yIGlzIGRpcmVjdGx5IGF0IHRoZSBzdGFydCBvZiB0aGVcbmxpbmUsIGRlbGV0ZSB0aGUgbGluZSBicmVhayBiZWZvcmUgaXQuXG4qL1xuY29uc3QgZGVsZXRlVG9MaW5lU3RhcnQgPSB2aWV3ID0+IGRlbGV0ZUJ5KHZpZXcsIHJhbmdlID0+IHtcbiAgICBsZXQgbGluZVN0YXJ0ID0gdmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS5mcm9tO1xuICAgIHJldHVybiByYW5nZS5oZWFkID4gbGluZVN0YXJ0ID8gbGluZVN0YXJ0IDogTWF0aC5tYXgoMCwgcmFuZ2UuaGVhZCAtIDEpO1xufSk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uLCBvciwgaWYgaXQgaXMgYSBjdXJzb3Igc2VsZWN0aW9uLCBkZWxldGUgdG9cbnRoZSBzdGFydCBvZiB0aGUgbGluZSBvciB0aGUgbmV4dCBsaW5lIHdyYXAgYmVmb3JlIHRoZSBjdXJzb3IuXG4qL1xuY29uc3QgZGVsZXRlTGluZUJvdW5kYXJ5QmFja3dhcmQgPSB2aWV3ID0+IGRlbGV0ZUJ5KHZpZXcsIHJhbmdlID0+IHtcbiAgICBsZXQgbGluZVN0YXJ0ID0gdmlldy5tb3ZlVG9MaW5lQm91bmRhcnkocmFuZ2UsIGZhbHNlKS5oZWFkO1xuICAgIHJldHVybiByYW5nZS5oZWFkID4gbGluZVN0YXJ0ID8gbGluZVN0YXJ0IDogTWF0aC5tYXgoMCwgcmFuZ2UuaGVhZCAtIDEpO1xufSk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uLCBvciwgaWYgaXQgaXMgYSBjdXJzb3Igc2VsZWN0aW9uLCBkZWxldGUgdG9cbnRoZSBlbmQgb2YgdGhlIGxpbmUgb3IgdGhlIG5leHQgbGluZSB3cmFwIGFmdGVyIHRoZSBjdXJzb3IuXG4qL1xuY29uc3QgZGVsZXRlTGluZUJvdW5kYXJ5Rm9yd2FyZCA9IHZpZXcgPT4gZGVsZXRlQnkodmlldywgcmFuZ2UgPT4ge1xuICAgIGxldCBsaW5lU3RhcnQgPSB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShyYW5nZSwgdHJ1ZSkuaGVhZDtcbiAgICByZXR1cm4gcmFuZ2UuaGVhZCA8IGxpbmVTdGFydCA/IGxpbmVTdGFydCA6IE1hdGgubWluKHZpZXcuc3RhdGUuZG9jLmxlbmd0aCwgcmFuZ2UuaGVhZCArIDEpO1xufSk7XG4vKipcbkRlbGV0ZSBhbGwgd2hpdGVzcGFjZSBkaXJlY3RseSBiZWZvcmUgYSBsaW5lIGVuZCBmcm9tIHRoZVxuZG9jdW1lbnQuXG4qL1xuY29uc3QgZGVsZXRlVHJhaWxpbmdXaGl0ZXNwYWNlID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IHBvcyA9IDAsIHByZXYgPSBcIlwiLCBpdGVyID0gc3RhdGUuZG9jLml0ZXIoKTs7KSB7XG4gICAgICAgIGl0ZXIubmV4dCgpO1xuICAgICAgICBpZiAoaXRlci5saW5lQnJlYWsgfHwgaXRlci5kb25lKSB7XG4gICAgICAgICAgICBsZXQgdHJhaWxpbmcgPSBwcmV2LnNlYXJjaCgvXFxzKyQvKTtcbiAgICAgICAgICAgIGlmICh0cmFpbGluZyA+IC0xKVxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IHBvcyAtIChwcmV2Lmxlbmd0aCAtIHRyYWlsaW5nKSwgdG86IHBvcyB9KTtcbiAgICAgICAgICAgIGlmIChpdGVyLmRvbmUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwcmV2ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXYgPSBpdGVyLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHBvcyArPSBpdGVyLnZhbHVlLmxlbmd0aDtcbiAgICB9XG4gICAgaWYgKCFjaGFuZ2VzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IGNoYW5nZXMsIHVzZXJFdmVudDogXCJkZWxldGVcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5SZXBsYWNlIGVhY2ggc2VsZWN0aW9uIHJhbmdlIHdpdGggYSBsaW5lIGJyZWFrLCBsZWF2aW5nIHRoZSBjdXJzb3Jcbm9uIHRoZSBsaW5lIGJlZm9yZSB0aGUgYnJlYWsuXG4qL1xuY29uc3Qgc3BsaXRMaW5lID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmZyb20sIHRvOiByYW5nZS50bywgaW5zZXJ0OiBUZXh0Lm9mKFtcIlwiLCBcIlwiXSkgfSxcbiAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmZyb20pIH07XG4gICAgfSk7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJpbnB1dFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkZsaXAgdGhlIGNoYXJhY3RlcnMgYmVmb3JlIGFuZCBhZnRlciB0aGUgY3Vyc29yKHMpLlxuKi9cbmNvbnN0IHRyYW5zcG9zZUNoYXJzID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5IHx8IHJhbmdlLmZyb20gPT0gMCB8fCByYW5nZS5mcm9tID09IHN0YXRlLmRvYy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICBsZXQgcG9zID0gcmFuZ2UuZnJvbSwgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgbGV0IGZyb20gPSBwb3MgPT0gbGluZS5mcm9tID8gcG9zIC0gMSA6IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIGZhbHNlKSArIGxpbmUuZnJvbTtcbiAgICAgICAgbGV0IHRvID0gcG9zID09IGxpbmUudG8gPyBwb3MgKyAxIDogZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHBvcyAtIGxpbmUuZnJvbSwgdHJ1ZSkgKyBsaW5lLmZyb207XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbSwgdG8sIGluc2VydDogc3RhdGUuZG9jLnNsaWNlKHBvcywgdG8pLmFwcGVuZChzdGF0ZS5kb2Muc2xpY2UoZnJvbSwgcG9zKSkgfSxcbiAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHRvKSB9O1xuICAgIH0pO1xuICAgIGlmIChjaGFuZ2VzLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcIm1vdmUuY2hhcmFjdGVyXCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIHNlbGVjdGVkTGluZUJsb2NrcyhzdGF0ZSkge1xuICAgIGxldCBibG9ja3MgPSBbXSwgdXB0byA9IC0xO1xuICAgIGZvciAobGV0IHJhbmdlIG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgbGV0IHN0YXJ0TGluZSA9IHN0YXRlLmRvYy5saW5lQXQocmFuZ2UuZnJvbSksIGVuZExpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLnRvKTtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSAmJiByYW5nZS50byA9PSBlbmRMaW5lLmZyb20pXG4gICAgICAgICAgICBlbmRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS50byAtIDEpO1xuICAgICAgICBpZiAodXB0byA+PSBzdGFydExpbmUubnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgcHJldiA9IGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBwcmV2LnRvID0gZW5kTGluZS50bztcbiAgICAgICAgICAgIHByZXYucmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmxvY2tzLnB1c2goeyBmcm9tOiBzdGFydExpbmUuZnJvbSwgdG86IGVuZExpbmUudG8sIHJhbmdlczogW3JhbmdlXSB9KTtcbiAgICAgICAgfVxuICAgICAgICB1cHRvID0gZW5kTGluZS5udW1iZXIgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gYmxvY2tzO1xufVxuZnVuY3Rpb24gbW92ZUxpbmUoc3RhdGUsIGRpc3BhdGNoLCBmb3J3YXJkKSB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBbXSwgcmFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgYmxvY2sgb2Ygc2VsZWN0ZWRMaW5lQmxvY2tzKHN0YXRlKSkge1xuICAgICAgICBpZiAoZm9yd2FyZCA/IGJsb2NrLnRvID09IHN0YXRlLmRvYy5sZW5ndGggOiBibG9jay5mcm9tID09IDApXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGV0IG5leHRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChmb3J3YXJkID8gYmxvY2sudG8gKyAxIDogYmxvY2suZnJvbSAtIDEpO1xuICAgICAgICBsZXQgc2l6ZSA9IG5leHRMaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIGlmIChmb3J3YXJkKSB7XG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBibG9jay50bywgdG86IG5leHRMaW5lLnRvIH0sIHsgZnJvbTogYmxvY2suZnJvbSwgaW5zZXJ0OiBuZXh0TGluZS50ZXh0ICsgc3RhdGUubGluZUJyZWFrIH0pO1xuICAgICAgICAgICAgZm9yIChsZXQgciBvZiBibG9jay5yYW5nZXMpXG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIHIuYW5jaG9yICsgc2l6ZSksIE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIHIuaGVhZCArIHNpemUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBuZXh0TGluZS5mcm9tLCB0bzogYmxvY2suZnJvbSB9LCB7IGZyb206IGJsb2NrLnRvLCBpbnNlcnQ6IHN0YXRlLmxpbmVCcmVhayArIG5leHRMaW5lLnRleHQgfSk7XG4gICAgICAgICAgICBmb3IgKGxldCByIG9mIGJsb2NrLnJhbmdlcylcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24ucmFuZ2Uoci5hbmNob3IgLSBzaXplLCByLmhlYWQgLSBzaXplKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjaGFuZ2VzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgIGNoYW5nZXMsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlLFxuICAgICAgICBzZWxlY3Rpb246IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbkluZGV4KSxcbiAgICAgICAgdXNlckV2ZW50OiBcIm1vdmUubGluZVwiXG4gICAgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3RlZCBsaW5lcyB1cCBvbmUgbGluZS5cbiovXG5jb25zdCBtb3ZlTGluZVVwID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IG1vdmVMaW5lKHN0YXRlLCBkaXNwYXRjaCwgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3RlZCBsaW5lcyBkb3duIG9uZSBsaW5lLlxuKi9cbmNvbnN0IG1vdmVMaW5lRG93biA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiBtb3ZlTGluZShzdGF0ZSwgZGlzcGF0Y2gsIHRydWUpO1xuZnVuY3Rpb24gY29weUxpbmUoc3RhdGUsIGRpc3BhdGNoLCBmb3J3YXJkKSB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBibG9jayBvZiBzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpKSB7XG4gICAgICAgIGlmIChmb3J3YXJkKVxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogYmxvY2suZnJvbSwgaW5zZXJ0OiBzdGF0ZS5kb2Muc2xpY2UoYmxvY2suZnJvbSwgYmxvY2sudG8pICsgc3RhdGUubGluZUJyZWFrIH0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBibG9jay50bywgaW5zZXJ0OiBzdGF0ZS5saW5lQnJlYWsgKyBzdGF0ZS5kb2Muc2xpY2UoYmxvY2suZnJvbSwgYmxvY2sudG8pIH0pO1xuICAgIH1cbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoeyBjaGFuZ2VzLCBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImlucHV0LmNvcHlsaW5lXCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5DcmVhdGUgYSBjb3B5IG9mIHRoZSBzZWxlY3RlZCBsaW5lcy4gS2VlcCB0aGUgc2VsZWN0aW9uIGluIHRoZSB0b3AgY29weS5cbiovXG5jb25zdCBjb3B5TGluZVVwID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IGNvcHlMaW5lKHN0YXRlLCBkaXNwYXRjaCwgZmFsc2UpO1xuLyoqXG5DcmVhdGUgYSBjb3B5IG9mIHRoZSBzZWxlY3RlZCBsaW5lcy4gS2VlcCB0aGUgc2VsZWN0aW9uIGluIHRoZSBib3R0b20gY29weS5cbiovXG5jb25zdCBjb3B5TGluZURvd24gPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gY29weUxpbmUoc3RhdGUsIGRpc3BhdGNoLCB0cnVlKTtcbi8qKlxuRGVsZXRlIHNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IGRlbGV0ZUxpbmUgPSB2aWV3ID0+IHtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlcyhzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpLm1hcCgoeyBmcm9tLCB0byB9KSA9PiB7XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgZWxzZSBpZiAodG8gPCBzdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgdG8rKztcbiAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8gfTtcbiAgICB9KSk7XG4gICAgbGV0IHNlbGVjdGlvbiA9IHVwZGF0ZVNlbChzdGF0ZS5zZWxlY3Rpb24sIHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGRpc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh2aWV3LmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgbGV0IGJsb2NrID0gdmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKSwgcG9zID0gdmlldy5jb29yZHNBdFBvcyhyYW5nZS5oZWFkLCByYW5nZS5hc3NvYyB8fCAxKTtcbiAgICAgICAgICAgIGlmIChwb3MpXG4gICAgICAgICAgICAgICAgZGlzdCA9IChibG9jay5ib3R0b20gKyB2aWV3LmRvY3VtZW50VG9wKSAtIHBvcy5ib3R0b20gKyB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgdHJ1ZSwgZGlzdCk7XG4gICAgfSkubWFwKGNoYW5nZXMpO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBjaGFuZ2VzLCBzZWxlY3Rpb24sIHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiZGVsZXRlLmxpbmVcIiB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbmV3bGluZS5cbiovXG5jb25zdCBpbnNlcnROZXdsaW5lID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoc3RhdGUucmVwbGFjZVNlbGVjdGlvbihzdGF0ZS5saW5lQnJlYWspLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5SZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCBhIG5ld2xpbmUgYW5kIHRoZSBzYW1lIGFtb3VudCBvZlxuaW5kZW50YXRpb24gYXMgdGhlIGxpbmUgYWJvdmUuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUtlZXBJbmRlbnQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGluZGVudCA9IC9eXFxzKi8uZXhlYyhzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pLnRleHQpWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogc3RhdGUubGluZUJyZWFrICsgaW5kZW50IH0sXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgaW5kZW50Lmxlbmd0aCArIDEpXG4gICAgICAgIH07XG4gICAgfSksIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJpbnB1dFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBpc0JldHdlZW5CcmFja2V0cyhzdGF0ZSwgcG9zKSB7XG4gICAgaWYgKC9cXChcXCl8XFxbXFxdfFxce1xcfS8udGVzdChzdGF0ZS5zbGljZURvYyhwb3MgLSAxLCBwb3MgKyAxKSkpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgdG86IHBvcyB9O1xuICAgIGxldCBjb250ZXh0ID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKHBvcyk7XG4gICAgbGV0IGJlZm9yZSA9IGNvbnRleHQuY2hpbGRCZWZvcmUocG9zKSwgYWZ0ZXIgPSBjb250ZXh0LmNoaWxkQWZ0ZXIocG9zKSwgY2xvc2VkQnk7XG4gICAgaWYgKGJlZm9yZSAmJiBhZnRlciAmJiBiZWZvcmUudG8gPD0gcG9zICYmIGFmdGVyLmZyb20gPj0gcG9zICYmXG4gICAgICAgIChjbG9zZWRCeSA9IGJlZm9yZS50eXBlLnByb3AoTm9kZVByb3AuY2xvc2VkQnkpKSAmJiBjbG9zZWRCeS5pbmRleE9mKGFmdGVyLm5hbWUpID4gLTEgJiZcbiAgICAgICAgc3RhdGUuZG9jLmxpbmVBdChiZWZvcmUudG8pLmZyb20gPT0gc3RhdGUuZG9jLmxpbmVBdChhZnRlci5mcm9tKS5mcm9tICYmXG4gICAgICAgICEvXFxTLy50ZXN0KHN0YXRlLnNsaWNlRG9jKGJlZm9yZS50bywgYWZ0ZXIuZnJvbSkpKVxuICAgICAgICByZXR1cm4geyBmcm9tOiBiZWZvcmUudG8sIHRvOiBhZnRlci5mcm9tIH07XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcblJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbmV3bGluZSBhbmQgaW5kZW50IHRoZSBuZXdseSBjcmVhdGVkXG5saW5lKHMpLiBJZiB0aGUgY3VycmVudCBsaW5lIGNvbnNpc3RzIG9ubHkgb2Ygd2hpdGVzcGFjZSwgdGhpc1xud2lsbCBhbHNvIGRlbGV0ZSB0aGF0IHdoaXRlc3BhY2UuIFdoZW4gdGhlIGN1cnNvciBpcyBiZXR3ZWVuXG5tYXRjaGluZyBicmFja2V0cywgYW4gYWRkaXRpb25hbCBuZXdsaW5lIHdpbGwgYmUgaW5zZXJ0ZWQgYWZ0ZXJcbnRoZSBjdXJzb3IuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUFuZEluZGVudCA9IC8qQF9fUFVSRV9fKi9uZXdsaW5lQW5kSW5kZW50KGZhbHNlKTtcbi8qKlxuQ3JlYXRlIGEgYmxhbmssIGluZGVudGVkIGxpbmUgYmVsb3cgdGhlIGN1cnJlbnQgbGluZS5cbiovXG5jb25zdCBpbnNlcnRCbGFua0xpbmUgPSAvKkBfX1BVUkVfXyovbmV3bGluZUFuZEluZGVudCh0cnVlKTtcbmZ1bmN0aW9uIG5ld2xpbmVBbmRJbmRlbnQoYXRFb2YpIHtcbiAgICByZXR1cm4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHJhbmdlLCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChmcm9tKTtcbiAgICAgICAgICAgIGxldCBleHBsb2RlID0gIWF0RW9mICYmIGZyb20gPT0gdG8gJiYgaXNCZXR3ZWVuQnJhY2tldHMoc3RhdGUsIGZyb20pO1xuICAgICAgICAgICAgaWYgKGF0RW9mKVxuICAgICAgICAgICAgICAgIGZyb20gPSB0byA9ICh0byA8PSBsaW5lLnRvID8gbGluZSA6IHN0YXRlLmRvYy5saW5lQXQodG8pKS50bztcbiAgICAgICAgICAgIGxldCBjeCA9IG5ldyBJbmRlbnRDb250ZXh0KHN0YXRlLCB7IHNpbXVsYXRlQnJlYWs6IGZyb20sIHNpbXVsYXRlRG91YmxlQnJlYWs6ICEhZXhwbG9kZSB9KTtcbiAgICAgICAgICAgIGxldCBpbmRlbnQgPSBnZXRJbmRlbnRhdGlvbihjeCwgZnJvbSk7XG4gICAgICAgICAgICBpZiAoaW5kZW50ID09IG51bGwpXG4gICAgICAgICAgICAgICAgaW5kZW50ID0gY291bnRDb2x1bW4oL15cXHMqLy5leGVjKHN0YXRlLmRvYy5saW5lQXQoZnJvbSkudGV4dClbMF0sIHN0YXRlLnRhYlNpemUpO1xuICAgICAgICAgICAgd2hpbGUgKHRvIDwgbGluZS50byAmJiAvXFxzLy50ZXN0KGxpbmUudGV4dFt0byAtIGxpbmUuZnJvbV0pKVxuICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICBpZiAoZXhwbG9kZSlcbiAgICAgICAgICAgICAgICAoeyBmcm9tLCB0byB9ID0gZXhwbG9kZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChmcm9tID4gbGluZS5mcm9tICYmIGZyb20gPCBsaW5lLmZyb20gKyAxMDAgJiYgIS9cXFMvLnRlc3QobGluZS50ZXh0LnNsaWNlKDAsIGZyb20pKSlcbiAgICAgICAgICAgICAgICBmcm9tID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGluc2VydCA9IFtcIlwiLCBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCldO1xuICAgICAgICAgICAgaWYgKGV4cGxvZGUpXG4gICAgICAgICAgICAgICAgaW5zZXJ0LnB1c2goaW5kZW50U3RyaW5nKHN0YXRlLCBjeC5saW5lSW5kZW50KGxpbmUuZnJvbSwgLTEpKSk7XG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb20sIHRvLCBpbnNlcnQ6IFRleHQub2YoaW5zZXJ0KSB9LFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZyb20gKyAxICsgaW5zZXJ0WzFdLmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5mdW5jdGlvbiBjaGFuZ2VCeVNlbGVjdGVkTGluZShzdGF0ZSwgZikge1xuICAgIGxldCBhdExpbmUgPSAtMTtcbiAgICByZXR1cm4gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHJhbmdlLmZyb207IHBvcyA8PSByYW5nZS50bzspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKGxpbmUubnVtYmVyID4gYXRMaW5lICYmIChyYW5nZS5lbXB0eSB8fCByYW5nZS50byA+IGxpbmUuZnJvbSkpIHtcbiAgICAgICAgICAgICAgICBmKGxpbmUsIGNoYW5nZXMsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICBhdExpbmUgPSBsaW5lLm51bWJlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaGFuZ2VTZXQgPSBzdGF0ZS5jaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICByZXR1cm4geyBjaGFuZ2VzLFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShjaGFuZ2VTZXQubWFwUG9zKHJhbmdlLmFuY2hvciwgMSksIGNoYW5nZVNldC5tYXBQb3MocmFuZ2UuaGVhZCwgMSkpIH07XG4gICAgfSk7XG59XG4vKipcbkF1dG8taW5kZW50IHRoZSBzZWxlY3RlZCBsaW5lcy4gVGhpcyB1c2VzIHRoZSBbaW5kZW50YXRpb24gc2VydmljZVxuZmFjZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U2VydmljZSkgYXMgc291cmNlIGZvciBhdXRvLWluZGVudFxuaW5mb3JtYXRpb24uXG4qL1xuY29uc3QgaW5kZW50U2VsZWN0aW9uID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgdXBkYXRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNvbnRleHQgPSBuZXcgSW5kZW50Q29udGV4dChzdGF0ZSwgeyBvdmVycmlkZUluZGVudGF0aW9uOiBzdGFydCA9PiB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSB1cGRhdGVkW3N0YXJ0XTtcbiAgICAgICAgICAgIHJldHVybiBmb3VuZCA9PSBudWxsID8gLTEgOiBmb3VuZDtcbiAgICAgICAgfSB9KTtcbiAgICBsZXQgY2hhbmdlcyA9IGNoYW5nZUJ5U2VsZWN0ZWRMaW5lKHN0YXRlLCAobGluZSwgY2hhbmdlcywgcmFuZ2UpID0+IHtcbiAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKGNvbnRleHQsIGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCEvXFxTLy50ZXN0KGxpbmUudGV4dCkpXG4gICAgICAgICAgICBpbmRlbnQgPSAwO1xuICAgICAgICBsZXQgY3VyID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgIGxldCBub3JtID0gaW5kZW50U3RyaW5nKHN0YXRlLCBpbmRlbnQpO1xuICAgICAgICBpZiAoY3VyICE9IG5vcm0gfHwgcmFuZ2UuZnJvbSA8IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRbbGluZS5mcm9tXSA9IGluZGVudDtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgsIGluc2VydDogbm9ybSB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghY2hhbmdlcy5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyB1c2VyRXZlbnQ6IFwiaW5kZW50XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuQWRkIGEgW3VuaXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgb2YgaW5kZW50YXRpb24gdG8gYWxsIHNlbGVjdGVkXG5saW5lcy5cbiovXG5jb25zdCBpbmRlbnRNb3JlID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlQnlTZWxlY3RlZExpbmUoc3RhdGUsIChsaW5lLCBjaGFuZ2VzKSA9PiB7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgaW5zZXJ0OiBzdGF0ZS5mYWNldChpbmRlbnRVbml0KSB9KTtcbiAgICB9KSwgeyB1c2VyRXZlbnQ6IFwiaW5wdXQuaW5kZW50XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuUmVtb3ZlIGEgW3VuaXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgb2YgaW5kZW50YXRpb24gZnJvbSBhbGxcbnNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IGluZGVudExlc3MgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VCeVNlbGVjdGVkTGluZShzdGF0ZSwgKGxpbmUsIGNoYW5nZXMpID0+IHtcbiAgICAgICAgbGV0IHNwYWNlID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgIGlmICghc3BhY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBjb2wgPSBjb3VudENvbHVtbihzcGFjZSwgc3RhdGUudGFiU2l6ZSksIGtlZXAgPSAwO1xuICAgICAgICBsZXQgaW5zZXJ0ID0gaW5kZW50U3RyaW5nKHN0YXRlLCBNYXRoLm1heCgwLCBjb2wgLSBnZXRJbmRlbnRVbml0KHN0YXRlKSkpO1xuICAgICAgICB3aGlsZSAoa2VlcCA8IHNwYWNlLmxlbmd0aCAmJiBrZWVwIDwgaW5zZXJ0Lmxlbmd0aCAmJiBzcGFjZS5jaGFyQ29kZUF0KGtlZXApID09IGluc2VydC5jaGFyQ29kZUF0KGtlZXApKVxuICAgICAgICAgICAga2VlcCsrO1xuICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20gKyBrZWVwLCB0bzogbGluZS5mcm9tICsgc3BhY2UubGVuZ3RoLCBpbnNlcnQ6IGluc2VydC5zbGljZShrZWVwKSB9KTtcbiAgICB9KSwgeyB1c2VyRXZlbnQ6IFwiZGVsZXRlLmRlZGVudFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkVuYWJsZXMgb3IgZGlzYWJsZXNcblt0YWItZm9jdXMgbW9kZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuc2V0VGFiRm9jdXNNb2RlKS4gV2hpbGUgb24sIHRoaXNcbnByZXZlbnRzIHRoZSBlZGl0b3IncyBrZXkgYmluZGluZ3MgZnJvbSBjYXB0dXJpbmcgVGFiIG9yXG5TaGlmdC1UYWIsIG1ha2luZyBpdCBwb3NzaWJsZSBmb3IgdGhlIHVzZXIgdG8gbW92ZSBmb2N1cyBvdXQgb2ZcbnRoZSBlZGl0b3Igd2l0aCB0aGUga2V5Ym9hcmQuXG4qL1xuY29uc3QgdG9nZ2xlVGFiRm9jdXNNb2RlID0gdmlldyA9PiB7XG4gICAgdmlldy5zZXRUYWJGb2N1c01vZGUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblRlbXBvcmFyaWx5IGVuYWJsZXMgW3RhYi1mb2N1c1xubW9kZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuc2V0VGFiRm9jdXNNb2RlKSBmb3IgdHdvIHNlY29uZHMgb3IgdW50aWxcbmFub3RoZXIga2V5IGlzIHByZXNzZWQuXG4qL1xuY29uc3QgdGVtcG9yYXJpbHlTZXRUYWJGb2N1c01vZGUgPSB2aWV3ID0+IHtcbiAgICB2aWV3LnNldFRhYkZvY3VzTW9kZSgyMDAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkluc2VydCBhIHRhYiBjaGFyYWN0ZXIgYXQgdGhlIGN1cnNvciBvciwgaWYgc29tZXRoaW5nIGlzIHNlbGVjdGVkLFxudXNlIFtgaW5kZW50TW9yZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TW9yZSkgdG8gaW5kZW50IHRoZSBlbnRpcmVcbnNlbGVjdGlvbi5cbiovXG5jb25zdCBpbnNlcnRUYWIgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLnNvbWUociA9PiAhci5lbXB0eSkpXG4gICAgICAgIHJldHVybiBpbmRlbnRNb3JlKHsgc3RhdGUsIGRpc3BhdGNoIH0pO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShzdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKFwiXFx0XCIpLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5BcnJheSBvZiBrZXkgYmluZGluZ3MgY29udGFpbmluZyB0aGUgRW1hY3Mtc3R5bGUgYmluZGluZ3MgdGhhdCBhcmVcbmF2YWlsYWJsZSBvbiBtYWNPUyBieSBkZWZhdWx0LlxuXG4gLSBDdHJsLWI6IFtgY3Vyc29yQ2hhckxlZnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckNoYXJMZWZ0KSAoW2BzZWxlY3RDaGFyTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhckxlZnQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLWY6IFtgY3Vyc29yQ2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JDaGFyUmlnaHQpIChbYHNlbGVjdENoYXJSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhclJpZ2h0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1wOiBbYGN1cnNvckxpbmVVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZVVwKSAoW2BzZWxlY3RMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVVcCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtbjogW2BjdXJzb3JMaW5lRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZURvd24pIChbYHNlbGVjdExpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRG93bikgd2l0aCBTaGlmdClcbiAtIEN0cmwtYTogW2BjdXJzb3JMaW5lU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVTdGFydCkgKFtgc2VsZWN0TGluZVN0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lU3RhcnQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLWU6IFtgY3Vyc29yTGluZUVuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZUVuZCkgKFtgc2VsZWN0TGluZUVuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZUVuZCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtZDogW2BkZWxldGVDaGFyRm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlQ2hhckZvcndhcmQpXG4gLSBDdHJsLWg6IFtgZGVsZXRlQ2hhckJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVDaGFyQmFja3dhcmQpXG4gLSBDdHJsLWs6IFtgZGVsZXRlVG9MaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVUb0xpbmVFbmQpXG4gLSBDdHJsLUFsdC1oOiBbYGRlbGV0ZUdyb3VwQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwQmFja3dhcmQpXG4gLSBDdHJsLW86IFtgc3BsaXRMaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zcGxpdExpbmUpXG4gLSBDdHJsLXQ6IFtgdHJhbnNwb3NlQ2hhcnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnRyYW5zcG9zZUNoYXJzKVxuIC0gQ3RybC12OiBbYGN1cnNvclBhZ2VEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlRG93bilcbiAtIEFsdC12OiBbYGN1cnNvclBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZVVwKVxuKi9cbmNvbnN0IGVtYWNzU3R5bGVLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiQ3RybC1iXCIsIHJ1bjogY3Vyc29yQ2hhckxlZnQsIHNoaWZ0OiBzZWxlY3RDaGFyTGVmdCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJDdHJsLWZcIiwgcnVuOiBjdXJzb3JDaGFyUmlnaHQsIHNoaWZ0OiBzZWxlY3RDaGFyUmlnaHQgfSxcbiAgICB7IGtleTogXCJDdHJsLXBcIiwgcnVuOiBjdXJzb3JMaW5lVXAsIHNoaWZ0OiBzZWxlY3RMaW5lVXAgfSxcbiAgICB7IGtleTogXCJDdHJsLW5cIiwgcnVuOiBjdXJzb3JMaW5lRG93biwgc2hpZnQ6IHNlbGVjdExpbmVEb3duIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1hXCIsIHJ1bjogY3Vyc29yTGluZVN0YXJ0LCBzaGlmdDogc2VsZWN0TGluZVN0YXJ0IH0sXG4gICAgeyBrZXk6IFwiQ3RybC1lXCIsIHJ1bjogY3Vyc29yTGluZUVuZCwgc2hpZnQ6IHNlbGVjdExpbmVFbmQgfSxcbiAgICB7IGtleTogXCJDdHJsLWRcIiwgcnVuOiBkZWxldGVDaGFyRm9yd2FyZCB9LFxuICAgIHsga2V5OiBcIkN0cmwtaFwiLCBydW46IGRlbGV0ZUNoYXJCYWNrd2FyZCB9LFxuICAgIHsga2V5OiBcIkN0cmwta1wiLCBydW46IGRlbGV0ZVRvTGluZUVuZCB9LFxuICAgIHsga2V5OiBcIkN0cmwtQWx0LWhcIiwgcnVuOiBkZWxldGVHcm91cEJhY2t3YXJkIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1vXCIsIHJ1bjogc3BsaXRMaW5lIH0sXG4gICAgeyBrZXk6IFwiQ3RybC10XCIsIHJ1bjogdHJhbnNwb3NlQ2hhcnMgfSxcbiAgICB7IGtleTogXCJDdHJsLXZcIiwgcnVuOiBjdXJzb3JQYWdlRG93biB9LFxuXTtcbi8qKlxuQW4gYXJyYXkgb2Yga2V5IGJpbmRpbmdzIGNsb3NlbHkgc3RpY2tpbmcgdG8gcGxhdGZvcm0tc3RhbmRhcmQgb3JcbndpZGVseSB1c2VkIGJpbmRpbmdzLiAoVGhpcyBpbmNsdWRlcyB0aGUgYmluZGluZ3MgZnJvbVxuW2BlbWFjc1N0eWxlS2V5bWFwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5lbWFjc1N0eWxlS2V5bWFwKSwgd2l0aCB0aGVpciBga2V5YFxucHJvcGVydHkgY2hhbmdlZCB0byBgbWFjYC4pXG5cbiAtIEFycm93TGVmdDogW2BjdXJzb3JDaGFyTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yQ2hhckxlZnQpIChbYHNlbGVjdENoYXJMZWZ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RDaGFyTGVmdCkgd2l0aCBTaGlmdClcbiAtIEFycm93UmlnaHQ6IFtgY3Vyc29yQ2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JDaGFyUmlnaHQpIChbYHNlbGVjdENoYXJSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhclJpZ2h0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1BcnJvd0xlZnQgKEFsdC1BcnJvd0xlZnQgb24gbWFjT1MpOiBbYGN1cnNvckdyb3VwTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yR3JvdXBMZWZ0KSAoW2BzZWxlY3RHcm91cExlZnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEdyb3VwTGVmdCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dSaWdodCAoQWx0LUFycm93UmlnaHQgb24gbWFjT1MpOiBbYGN1cnNvckdyb3VwUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckdyb3VwUmlnaHQpIChbYHNlbGVjdEdyb3VwUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEdyb3VwUmlnaHQpIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dMZWZ0IChvbiBtYWNPUyk6IFtgY3Vyc29yTGluZVN0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lU3RhcnQpIChbYHNlbGVjdExpbmVTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZVN0YXJ0KSB3aXRoIFNoaWZ0KVxuIC0gQ21kLUFycm93UmlnaHQgKG9uIG1hY09TKTogW2BjdXJzb3JMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lRW5kKSAoW2BzZWxlY3RMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRW5kKSB3aXRoIFNoaWZ0KVxuIC0gQXJyb3dVcDogW2BjdXJzb3JMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVVcCkgKFtgc2VsZWN0TGluZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lVXApIHdpdGggU2hpZnQpXG4gLSBBcnJvd0Rvd246IFtgY3Vyc29yTGluZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVEb3duKSAoW2BzZWxlY3RMaW5lRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZURvd24pIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dVcCAob24gbWFjT1MpOiBbYGN1cnNvckRvY1N0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NTdGFydCkgKFtgc2VsZWN0RG9jU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdERvY1N0YXJ0KSB3aXRoIFNoaWZ0KVxuIC0gQ21kLUFycm93RG93biAob24gbWFjT1MpOiBbYGN1cnNvckRvY0VuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yRG9jRW5kKSAoW2BzZWxlY3REb2NFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdERvY0VuZCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dVcCAob24gbWFjT1MpOiBbYGN1cnNvclBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZVVwKSAoW2BzZWxlY3RQYWdlVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdFBhZ2VVcCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dEb3duIChvbiBtYWNPUyk6IFtgY3Vyc29yUGFnZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VEb3duKSAoW2BzZWxlY3RQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZURvd24pIHdpdGggU2hpZnQpXG4gLSBQYWdlVXA6IFtgY3Vyc29yUGFnZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlVXApIChbYHNlbGVjdFBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZVVwKSB3aXRoIFNoaWZ0KVxuIC0gUGFnZURvd246IFtgY3Vyc29yUGFnZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VEb3duKSAoW2BzZWxlY3RQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZURvd24pIHdpdGggU2hpZnQpXG4gLSBIb21lOiBbYGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lQm91bmRhcnlCYWNrd2FyZCkgKFtgc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVCb3VuZGFyeUJhY2t3YXJkKSB3aXRoIFNoaWZ0KVxuIC0gRW5kOiBbYGN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmQpIChbYHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLUhvbWUgKENtZC1Ib21lIG9uIG1hY09TKTogW2BjdXJzb3JEb2NTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yRG9jU3RhcnQpIChbYHNlbGVjdERvY1N0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3REb2NTdGFydCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtRW5kIChDbWQtSG9tZSBvbiBtYWNPUyk6IFtgY3Vyc29yRG9jRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NFbmQpIChbYHNlbGVjdERvY0VuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0RG9jRW5kKSB3aXRoIFNoaWZ0KVxuIC0gRW50ZXIgYW5kIFNoaWZ0LUVudGVyOiBbYGluc2VydE5ld2xpbmVBbmRJbmRlbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluc2VydE5ld2xpbmVBbmRJbmRlbnQpXG4gLSBDdHJsLWEgKENtZC1hIG9uIG1hY09TKTogW2BzZWxlY3RBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEFsbClcbiAtIEJhY2tzcGFjZTogW2BkZWxldGVDaGFyQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUNoYXJCYWNrd2FyZClcbiAtIERlbGV0ZTogW2BkZWxldGVDaGFyRm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlQ2hhckZvcndhcmQpXG4gLSBDdHJsLUJhY2tzcGFjZSAoQWx0LUJhY2tzcGFjZSBvbiBtYWNPUyk6IFtgZGVsZXRlR3JvdXBCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlR3JvdXBCYWNrd2FyZClcbiAtIEN0cmwtRGVsZXRlIChBbHQtRGVsZXRlIG9uIG1hY09TKTogW2BkZWxldGVHcm91cEZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwRm9yd2FyZClcbiAtIENtZC1CYWNrc3BhY2UgKG1hY09TKTogW2BkZWxldGVMaW5lQm91bmRhcnlCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlTGluZUJvdW5kYXJ5QmFja3dhcmQpLlxuIC0gQ21kLURlbGV0ZSAobWFjT1MpOiBbYGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQpLlxuKi9cbmNvbnN0IHN0YW5kYXJkS2V5bWFwID0gLypAX19QVVJFX18qL1tcbiAgICB7IGtleTogXCJBcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JDaGFyTGVmdCwgc2hpZnQ6IHNlbGVjdENoYXJMZWZ0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1BcnJvd0xlZnRcIiwgbWFjOiBcIkFsdC1BcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JHcm91cExlZnQsIHNoaWZ0OiBzZWxlY3RHcm91cExlZnQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93TGVmdFwiLCBydW46IGN1cnNvckxpbmVCb3VuZGFyeUxlZnQsIHNoaWZ0OiBzZWxlY3RMaW5lQm91bmRhcnlMZWZ0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JDaGFyUmlnaHQsIHNoaWZ0OiBzZWxlY3RDaGFyUmlnaHQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUFycm93UmlnaHRcIiwgbWFjOiBcIkFsdC1BcnJvd1JpZ2h0XCIsIHJ1bjogY3Vyc29yR3JvdXBSaWdodCwgc2hpZnQ6IHNlbGVjdEdyb3VwUmlnaHQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JMaW5lQm91bmRhcnlSaWdodCwgc2hpZnQ6IHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFycm93VXBcIiwgcnVuOiBjdXJzb3JMaW5lVXAsIHNoaWZ0OiBzZWxlY3RMaW5lVXAsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93VXBcIiwgcnVuOiBjdXJzb3JEb2NTdGFydCwgc2hpZnQ6IHNlbGVjdERvY1N0YXJ0IH0sXG4gICAgeyBtYWM6IFwiQ3RybC1BcnJvd1VwXCIsIHJ1bjogY3Vyc29yUGFnZVVwLCBzaGlmdDogc2VsZWN0UGFnZVVwIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dEb3duXCIsIHJ1bjogY3Vyc29yTGluZURvd24sIHNoaWZ0OiBzZWxlY3RMaW5lRG93biwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJDbWQtQXJyb3dEb3duXCIsIHJ1bjogY3Vyc29yRG9jRW5kLCBzaGlmdDogc2VsZWN0RG9jRW5kIH0sXG4gICAgeyBtYWM6IFwiQ3RybC1BcnJvd0Rvd25cIiwgcnVuOiBjdXJzb3JQYWdlRG93biwgc2hpZnQ6IHNlbGVjdFBhZ2VEb3duIH0sXG4gICAgeyBrZXk6IFwiUGFnZVVwXCIsIHJ1bjogY3Vyc29yUGFnZVVwLCBzaGlmdDogc2VsZWN0UGFnZVVwIH0sXG4gICAgeyBrZXk6IFwiUGFnZURvd25cIiwgcnVuOiBjdXJzb3JQYWdlRG93biwgc2hpZnQ6IHNlbGVjdFBhZ2VEb3duIH0sXG4gICAgeyBrZXk6IFwiSG9tZVwiLCBydW46IGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkLCBzaGlmdDogc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUhvbWVcIiwgcnVuOiBjdXJzb3JEb2NTdGFydCwgc2hpZnQ6IHNlbGVjdERvY1N0YXJ0IH0sXG4gICAgeyBrZXk6IFwiRW5kXCIsIHJ1bjogY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZCwgc2hpZnQ6IHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUVuZFwiLCBydW46IGN1cnNvckRvY0VuZCwgc2hpZnQ6IHNlbGVjdERvY0VuZCB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIHJ1bjogaW5zZXJ0TmV3bGluZUFuZEluZGVudCwgc2hpZnQ6IGluc2VydE5ld2xpbmVBbmRJbmRlbnQgfSxcbiAgICB7IGtleTogXCJNb2QtYVwiLCBydW46IHNlbGVjdEFsbCB9LFxuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUNoYXJCYWNrd2FyZCwgc2hpZnQ6IGRlbGV0ZUNoYXJCYWNrd2FyZCB9LFxuICAgIHsga2V5OiBcIkRlbGV0ZVwiLCBydW46IGRlbGV0ZUNoYXJGb3J3YXJkIH0sXG4gICAgeyBrZXk6IFwiTW9kLUJhY2tzcGFjZVwiLCBtYWM6IFwiQWx0LUJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUdyb3VwQmFja3dhcmQgfSxcbiAgICB7IGtleTogXCJNb2QtRGVsZXRlXCIsIG1hYzogXCJBbHQtRGVsZXRlXCIsIHJ1bjogZGVsZXRlR3JvdXBGb3J3YXJkIH0sXG4gICAgeyBtYWM6IFwiTW9kLUJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUxpbmVCb3VuZGFyeUJhY2t3YXJkIH0sXG4gICAgeyBtYWM6IFwiTW9kLURlbGV0ZVwiLCBydW46IGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQgfVxuXS5jb25jYXQoLypAX19QVVJFX18qL2VtYWNzU3R5bGVLZXltYXAubWFwKGIgPT4gKHsgbWFjOiBiLmtleSwgcnVuOiBiLnJ1biwgc2hpZnQ6IGIuc2hpZnQgfSkpKTtcbi8qKlxuVGhlIGRlZmF1bHQga2V5bWFwLiBJbmNsdWRlcyBhbGwgYmluZGluZ3MgZnJvbVxuW2BzdGFuZGFyZEtleW1hcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc3RhbmRhcmRLZXltYXApIHBsdXMgdGhlIGZvbGxvd2luZzpcblxuLSBBbHQtQXJyb3dMZWZ0IChDdHJsLUFycm93TGVmdCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yU3ludGF4TGVmdCkgKFtgc2VsZWN0U3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4TGVmdCkgd2l0aCBTaGlmdClcbi0gQWx0LUFycm93UmlnaHQgKEN0cmwtQXJyb3dSaWdodCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4UmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclN5bnRheFJpZ2h0KSAoW2BzZWxlY3RTeW50YXhSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4UmlnaHQpIHdpdGggU2hpZnQpXG4tIEFsdC1BcnJvd1VwOiBbYG1vdmVMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLm1vdmVMaW5lVXApXG4tIEFsdC1BcnJvd0Rvd246IFtgbW92ZUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5tb3ZlTGluZURvd24pXG4tIFNoaWZ0LUFsdC1BcnJvd1VwOiBbYGNvcHlMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmNvcHlMaW5lVXApXG4tIFNoaWZ0LUFsdC1BcnJvd0Rvd246IFtgY29weUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jb3B5TGluZURvd24pXG4tIEVzY2FwZTogW2BzaW1wbGlmeVNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2ltcGxpZnlTZWxlY3Rpb24pXG4tIEN0cmwtRW50ZXIgKENtZC1FbnRlciBvbiBtYWNPUyk6IFtgaW5zZXJ0QmxhbmtMaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbnNlcnRCbGFua0xpbmUpXG4tIEFsdC1sIChDdHJsLWwgb24gbWFjT1MpOiBbYHNlbGVjdExpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmUpXG4tIEN0cmwtaSAoQ21kLWkgb24gbWFjT1MpOiBbYHNlbGVjdFBhcmVudFN5bnRheGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFyZW50U3ludGF4KVxuLSBDdHJsLVsgKENtZC1bIG9uIG1hY09TKTogW2BpbmRlbnRMZXNzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbmRlbnRMZXNzKVxuLSBDdHJsLV0gKENtZC1dIG9uIG1hY09TKTogW2BpbmRlbnRNb3JlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbmRlbnRNb3JlKVxuLSBDdHJsLUFsdC1cXFxcIChDbWQtQWx0LVxcXFwgb24gbWFjT1MpOiBbYGluZGVudFNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50U2VsZWN0aW9uKVxuLSBTaGlmdC1DdHJsLWsgKFNoaWZ0LUNtZC1rIG9uIG1hY09TKTogW2BkZWxldGVMaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVMaW5lKVxuLSBTaGlmdC1DdHJsLVxcXFwgKFNoaWZ0LUNtZC1cXFxcIG9uIG1hY09TKTogW2BjdXJzb3JNYXRjaGluZ0JyYWNrZXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvck1hdGNoaW5nQnJhY2tldClcbi0gQ3RybC0vIChDbWQtLyBvbiBtYWNPUyk6IFtgdG9nZ2xlQ29tbWVudGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMudG9nZ2xlQ29tbWVudCkuXG4tIFNoaWZ0LUFsdC1hOiBbYHRvZ2dsZUJsb2NrQ29tbWVudGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMudG9nZ2xlQmxvY2tDb21tZW50KS5cbi0gQ3RybC1tIChBbHQtU2hpZnQtbSBvbiBtYWNPUyk6IFtgdG9nZ2xlVGFiRm9jdXNNb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy50b2dnbGVUYWJGb2N1c01vZGUpLlxuKi9cbmNvbnN0IGRlZmF1bHRLZXltYXAgPSAvKkBfX1BVUkVfXyovW1xuICAgIHsga2V5OiBcIkFsdC1BcnJvd0xlZnRcIiwgbWFjOiBcIkN0cmwtQXJyb3dMZWZ0XCIsIHJ1bjogY3Vyc29yU3ludGF4TGVmdCwgc2hpZnQ6IHNlbGVjdFN5bnRheExlZnQgfSxcbiAgICB7IGtleTogXCJBbHQtQXJyb3dSaWdodFwiLCBtYWM6IFwiQ3RybC1BcnJvd1JpZ2h0XCIsIHJ1bjogY3Vyc29yU3ludGF4UmlnaHQsIHNoaWZ0OiBzZWxlY3RTeW50YXhSaWdodCB9LFxuICAgIHsga2V5OiBcIkFsdC1BcnJvd1VwXCIsIHJ1bjogbW92ZUxpbmVVcCB9LFxuICAgIHsga2V5OiBcIlNoaWZ0LUFsdC1BcnJvd1VwXCIsIHJ1bjogY29weUxpbmVVcCB9LFxuICAgIHsga2V5OiBcIkFsdC1BcnJvd0Rvd25cIiwgcnVuOiBtb3ZlTGluZURvd24gfSxcbiAgICB7IGtleTogXCJTaGlmdC1BbHQtQXJyb3dEb3duXCIsIHJ1bjogY29weUxpbmVEb3duIH0sXG4gICAgeyBrZXk6IFwiRXNjYXBlXCIsIHJ1bjogc2ltcGxpZnlTZWxlY3Rpb24gfSxcbiAgICB7IGtleTogXCJNb2QtRW50ZXJcIiwgcnVuOiBpbnNlcnRCbGFua0xpbmUgfSxcbiAgICB7IGtleTogXCJBbHQtbFwiLCBtYWM6IFwiQ3RybC1sXCIsIHJ1bjogc2VsZWN0TGluZSB9LFxuICAgIHsga2V5OiBcIk1vZC1pXCIsIHJ1bjogc2VsZWN0UGFyZW50U3ludGF4LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1bXCIsIHJ1bjogaW5kZW50TGVzcyB9LFxuICAgIHsga2V5OiBcIk1vZC1dXCIsIHJ1bjogaW5kZW50TW9yZSB9LFxuICAgIHsga2V5OiBcIk1vZC1BbHQtXFxcXFwiLCBydW46IGluZGVudFNlbGVjdGlvbiB9LFxuICAgIHsga2V5OiBcIlNoaWZ0LU1vZC1rXCIsIHJ1bjogZGVsZXRlTGluZSB9LFxuICAgIHsga2V5OiBcIlNoaWZ0LU1vZC1cXFxcXCIsIHJ1bjogY3Vyc29yTWF0Y2hpbmdCcmFja2V0IH0sXG4gICAgeyBrZXk6IFwiTW9kLS9cIiwgcnVuOiB0b2dnbGVDb21tZW50IH0sXG4gICAgeyBrZXk6IFwiQWx0LUFcIiwgcnVuOiB0b2dnbGVCbG9ja0NvbW1lbnQgfSxcbiAgICB7IGtleTogXCJDdHJsLW1cIiwgbWFjOiBcIlNoaWZ0LUFsdC1tXCIsIHJ1bjogdG9nZ2xlVGFiRm9jdXNNb2RlIH0sXG5dLmNvbmNhdChzdGFuZGFyZEtleW1hcCk7XG4vKipcbkEgYmluZGluZyB0aGF0IGJpbmRzIFRhYiB0byBbYGluZGVudE1vcmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluZGVudE1vcmUpIGFuZFxuU2hpZnQtVGFiIHRvIFtgaW5kZW50TGVzc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TGVzcykuXG5QbGVhc2Ugc2VlIHRoZSBbVGFiIGV4YW1wbGVdKC4uLy4uL2V4YW1wbGVzL3RhYi8pIGJlZm9yZSB1c2luZ1xudGhpcy5cbiovXG5jb25zdCBpbmRlbnRXaXRoVGFiID0geyBrZXk6IFwiVGFiXCIsIHJ1bjogaW5kZW50TW9yZSwgc2hpZnQ6IGluZGVudExlc3MgfTtcblxuZXhwb3J0IHsgYmxvY2tDb21tZW50LCBibG9ja1VuY29tbWVudCwgY29weUxpbmVEb3duLCBjb3B5TGluZVVwLCBjdXJzb3JDaGFyQmFja3dhcmQsIGN1cnNvckNoYXJCYWNrd2FyZExvZ2ljYWwsIGN1cnNvckNoYXJGb3J3YXJkLCBjdXJzb3JDaGFyRm9yd2FyZExvZ2ljYWwsIGN1cnNvckNoYXJMZWZ0LCBjdXJzb3JDaGFyUmlnaHQsIGN1cnNvckRvY0VuZCwgY3Vyc29yRG9jU3RhcnQsIGN1cnNvckdyb3VwQmFja3dhcmQsIGN1cnNvckdyb3VwRm9yd2FyZCwgY3Vyc29yR3JvdXBGb3J3YXJkV2luLCBjdXJzb3JHcm91cExlZnQsIGN1cnNvckdyb3VwUmlnaHQsIGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkLCBjdXJzb3JMaW5lQm91bmRhcnlGb3J3YXJkLCBjdXJzb3JMaW5lQm91bmRhcnlMZWZ0LCBjdXJzb3JMaW5lQm91bmRhcnlSaWdodCwgY3Vyc29yTGluZURvd24sIGN1cnNvckxpbmVFbmQsIGN1cnNvckxpbmVTdGFydCwgY3Vyc29yTGluZVVwLCBjdXJzb3JNYXRjaGluZ0JyYWNrZXQsIGN1cnNvclBhZ2VEb3duLCBjdXJzb3JQYWdlVXAsIGN1cnNvclN1YndvcmRCYWNrd2FyZCwgY3Vyc29yU3Vid29yZEZvcndhcmQsIGN1cnNvclN5bnRheExlZnQsIGN1cnNvclN5bnRheFJpZ2h0LCBkZWZhdWx0S2V5bWFwLCBkZWxldGVDaGFyQmFja3dhcmQsIGRlbGV0ZUNoYXJCYWNrd2FyZFN0cmljdCwgZGVsZXRlQ2hhckZvcndhcmQsIGRlbGV0ZUdyb3VwQmFja3dhcmQsIGRlbGV0ZUdyb3VwRm9yd2FyZCwgZGVsZXRlTGluZSwgZGVsZXRlTGluZUJvdW5kYXJ5QmFja3dhcmQsIGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQsIGRlbGV0ZVRvTGluZUVuZCwgZGVsZXRlVG9MaW5lU3RhcnQsIGRlbGV0ZVRyYWlsaW5nV2hpdGVzcGFjZSwgZW1hY3NTdHlsZUtleW1hcCwgaGlzdG9yeSwgaGlzdG9yeUZpZWxkLCBoaXN0b3J5S2V5bWFwLCBpbmRlbnRMZXNzLCBpbmRlbnRNb3JlLCBpbmRlbnRTZWxlY3Rpb24sIGluZGVudFdpdGhUYWIsIGluc2VydEJsYW5rTGluZSwgaW5zZXJ0TmV3bGluZSwgaW5zZXJ0TmV3bGluZUFuZEluZGVudCwgaW5zZXJ0TmV3bGluZUtlZXBJbmRlbnQsIGluc2VydFRhYiwgaW52ZXJ0ZWRFZmZlY3RzLCBpc29sYXRlSGlzdG9yeSwgbGluZUNvbW1lbnQsIGxpbmVVbmNvbW1lbnQsIG1vdmVMaW5lRG93biwgbW92ZUxpbmVVcCwgcmVkbywgcmVkb0RlcHRoLCByZWRvU2VsZWN0aW9uLCBzZWxlY3RBbGwsIHNlbGVjdENoYXJCYWNrd2FyZCwgc2VsZWN0Q2hhckJhY2t3YXJkTG9naWNhbCwgc2VsZWN0Q2hhckZvcndhcmQsIHNlbGVjdENoYXJGb3J3YXJkTG9naWNhbCwgc2VsZWN0Q2hhckxlZnQsIHNlbGVjdENoYXJSaWdodCwgc2VsZWN0RG9jRW5kLCBzZWxlY3REb2NTdGFydCwgc2VsZWN0R3JvdXBCYWNrd2FyZCwgc2VsZWN0R3JvdXBGb3J3YXJkLCBzZWxlY3RHcm91cEZvcndhcmRXaW4sIHNlbGVjdEdyb3VwTGVmdCwgc2VsZWN0R3JvdXBSaWdodCwgc2VsZWN0TGluZSwgc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUxlZnQsIHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0LCBzZWxlY3RMaW5lRG93biwgc2VsZWN0TGluZUVuZCwgc2VsZWN0TGluZVN0YXJ0LCBzZWxlY3RMaW5lVXAsIHNlbGVjdE1hdGNoaW5nQnJhY2tldCwgc2VsZWN0UGFnZURvd24sIHNlbGVjdFBhZ2VVcCwgc2VsZWN0UGFyZW50U3ludGF4LCBzZWxlY3RTdWJ3b3JkQmFja3dhcmQsIHNlbGVjdFN1YndvcmRGb3J3YXJkLCBzZWxlY3RTeW50YXhMZWZ0LCBzZWxlY3RTeW50YXhSaWdodCwgc2ltcGxpZnlTZWxlY3Rpb24sIHNwbGl0TGluZSwgc3RhbmRhcmRLZXltYXAsIHRlbXBvcmFyaWx5U2V0VGFiRm9jdXNNb2RlLCB0b2dnbGVCbG9ja0NvbW1lbnQsIHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSwgdG9nZ2xlQ29tbWVudCwgdG9nZ2xlTGluZUNvbW1lbnQsIHRvZ2dsZVRhYkZvY3VzTW9kZSwgdHJhbnNwb3NlQ2hhcnMsIHVuZG8sIHVuZG9EZXB0aCwgdW5kb1NlbGVjdGlvbiB9O1xuIiwKICAgICJpbXBvcnQgeyBzaG93UGFuZWwsIEVkaXRvclZpZXcsIGdldFBhbmVsLCBEZWNvcmF0aW9uLCBWaWV3UGx1Z2luLCBydW5TY29wZUhhbmRsZXJzIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBjb2RlUG9pbnRBdCwgZnJvbUNvZGVQb2ludCwgY29kZVBvaW50U2l6ZSwgU3RhdGVFZmZlY3QsIFN0YXRlRmllbGQsIEVkaXRvclNlbGVjdGlvbiwgRmFjZXQsIGNvbWJpbmVDb25maWcsIENoYXJDYXRlZ29yeSwgUmFuZ2VTZXRCdWlsZGVyLCBQcmVjLCBFZGl0b3JTdGF0ZSwgZmluZENsdXN0ZXJCcmVhayB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCBlbHQgZnJvbSAnY3JlbHQnO1xuXG5jb25zdCBiYXNpY05vcm1hbGl6ZSA9IHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSA9PSBcImZ1bmN0aW9uXCJcbiAgICA/IHggPT4geC5ub3JtYWxpemUoXCJORktEXCIpIDogeCA9PiB4O1xuLyoqXG5BIHNlYXJjaCBjdXJzb3IgcHJvdmlkZXMgYW4gaXRlcmF0b3Igb3ZlciB0ZXh0IG1hdGNoZXMgaW4gYVxuZG9jdW1lbnQuXG4qL1xuY2xhc3MgU2VhcmNoQ3Vyc29yIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSB0ZXh0IGN1cnNvci4gVGhlIHF1ZXJ5IGlzIHRoZSBzZWFyY2ggc3RyaW5nLCBgZnJvbWAgdG9cbiAgICBgdG9gIHByb3ZpZGVzIHRoZSByZWdpb24gdG8gc2VhcmNoLlxuICAgIFxuICAgIFdoZW4gYG5vcm1hbGl6ZWAgaXMgZ2l2ZW4sIGl0IHdpbGwgYmUgY2FsbGVkLCBvbiBib3RoIHRoZSBxdWVyeVxuICAgIHN0cmluZyBhbmQgdGhlIGNvbnRlbnQgaXQgaXMgbWF0Y2hlZCBhZ2FpbnN0LCBiZWZvcmUgY29tcGFyaW5nLlxuICAgIFlvdSBjYW4sIGZvciBleGFtcGxlLCBjcmVhdGUgYSBjYXNlLWluc2Vuc2l0aXZlIHNlYXJjaCBieVxuICAgIHBhc3NpbmcgYHMgPT4gcy50b0xvd2VyQ2FzZSgpYC5cbiAgICBcbiAgICBUZXh0IGlzIGFsd2F5cyBub3JtYWxpemVkIHdpdGhcbiAgICBbYC5ub3JtYWxpemUoXCJORktEXCIpYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL25vcm1hbGl6ZSlcbiAgICAod2hlbiBzdXBwb3J0ZWQpLlxuICAgICovXG4gICAgY29uc3RydWN0b3IodGV4dCwgcXVlcnksIGZyb20gPSAwLCB0byA9IHRleHQubGVuZ3RoLCBub3JtYWxpemUsIHRlc3QpIHtcbiAgICAgICAgdGhpcy50ZXN0ID0gdGVzdDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBjdXJyZW50IG1hdGNoIChvbmx5IGhvbGRzIGEgbWVhbmluZ2Z1bCB2YWx1ZSBhZnRlclxuICAgICAgICBbYG5leHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5TZWFyY2hDdXJzb3IubmV4dCkgaGFzIGJlZW4gY2FsbGVkIGFuZCB3aGVuXG4gICAgICAgIGBkb25lYCBpcyBmYWxzZSkuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSB7IGZyb206IDAsIHRvOiAwIH07XG4gICAgICAgIC8qKlxuICAgICAgICBXaGV0aGVyIHRoZSBlbmQgb2YgdGhlIGl0ZXJhdGVkIHJlZ2lvbiBoYXMgYmVlbiByZWFjaGVkLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gW107XG4gICAgICAgIHRoaXMuYnVmZmVyID0gXCJcIjtcbiAgICAgICAgdGhpcy5idWZmZXJQb3MgPSAwO1xuICAgICAgICB0aGlzLml0ZXIgPSB0ZXh0Lml0ZXJSYW5nZShmcm9tLCB0byk7XG4gICAgICAgIHRoaXMuYnVmZmVyU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZSA9IG5vcm1hbGl6ZSA/IHggPT4gbm9ybWFsaXplKGJhc2ljTm9ybWFsaXplKHgpKSA6IGJhc2ljTm9ybWFsaXplO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5ub3JtYWxpemUocXVlcnkpO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAodGhpcy5idWZmZXJQb3MgPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclN0YXJ0ICs9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaXRlci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pdGVyLmRvbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJQb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLml0ZXIudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvZGVQb2ludEF0KHRoaXMuYnVmZmVyLCB0aGlzLmJ1ZmZlclBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgZm9yIHRoZSBuZXh0IG1hdGNoLiBVcGRhdGVzIHRoZSBpdGVyYXRvcidzXG4gICAgW2B2YWx1ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLlNlYXJjaEN1cnNvci52YWx1ZSkgYW5kXG4gICAgW2Bkb25lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guU2VhcmNoQ3Vyc29yLmRvbmUpIHByb3BlcnRpZXMuIFNob3VsZCBiZSBjYWxsZWRcbiAgICBhdCBsZWFzdCBvbmNlIGJlZm9yZSB1c2luZyB0aGUgY3Vyc29yLlxuICAgICovXG4gICAgbmV4dCgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubWF0Y2hlcy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMucG9wKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRPdmVybGFwcGluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgYG5leHRgIG1ldGhvZCB3aWxsIGlnbm9yZSBtYXRjaGVzIHRoYXQgcGFydGlhbGx5IG92ZXJsYXAgYVxuICAgIHByZXZpb3VzIG1hdGNoLiBUaGlzIG1ldGhvZCBiZWhhdmVzIGxpa2UgYG5leHRgLCBidXQgaW5jbHVkZXNcbiAgICBzdWNoIG1hdGNoZXMuXG4gICAgKi9cbiAgICBuZXh0T3ZlcmxhcHBpbmcoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5wZWVrKCk7XG4gICAgICAgICAgICBpZiAobmV4dCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0ciA9IGZyb21Db2RlUG9pbnQobmV4dCksIHN0YXJ0ID0gdGhpcy5idWZmZXJTdGFydCArIHRoaXMuYnVmZmVyUG9zO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJQb3MgKz0gY29kZVBvaW50U2l6ZShuZXh0KTtcbiAgICAgICAgICAgIGxldCBub3JtID0gdGhpcy5ub3JtYWxpemUoc3RyKTtcbiAgICAgICAgICAgIGlmIChub3JtLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gc3RhcnQ7OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBub3JtLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMubWF0Y2goY29kZSwgcG9zLCB0aGlzLmJ1ZmZlclBvcyArIHRoaXMuYnVmZmVyU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBub3JtLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gc3RhcnQgJiYgaSA8IHN0ci5sZW5ndGggJiYgc3RyLmNoYXJDb2RlQXQoaSkgPT0gY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaChjb2RlLCBwb3MsIGVuZCkge1xuICAgICAgICBsZXQgbWF0Y2ggPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tYXRjaGVzW2ldLCBrZWVwID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWVyeS5jaGFyQ29kZUF0KGluZGV4KSA9PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucXVlcnkubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHsgZnJvbTogdGhpcy5tYXRjaGVzW2kgKyAxXSwgdG86IGVuZCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVzW2ldKys7XG4gICAgICAgICAgICAgICAgICAgIGtlZXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgha2VlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5zcGxpY2UoaSwgMik7XG4gICAgICAgICAgICAgICAgaSAtPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXJ5LmNoYXJDb2RlQXQoMCkgPT0gY29kZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVlcnkubGVuZ3RoID09IDEpXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSB7IGZyb206IHBvcywgdG86IGVuZCB9O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKDEsIHBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoICYmIHRoaXMudGVzdCAmJiAhdGhpcy50ZXN0KG1hdGNoLmZyb20sIG1hdGNoLnRvLCB0aGlzLmJ1ZmZlciwgdGhpcy5idWZmZXJTdGFydCkpXG4gICAgICAgICAgICBtYXRjaCA9IG51bGw7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG59XG5pZiAodHlwZW9mIFN5bWJvbCAhPSBcInVuZGVmaW5lZFwiKVxuICAgIFNlYXJjaEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbmNvbnN0IGVtcHR5ID0geyBmcm9tOiAtMSwgdG86IC0xLCBtYXRjaDogLypAX19QVVJFX18qLy8uKi8uZXhlYyhcIlwiKSB9O1xuY29uc3QgYmFzZUZsYWdzID0gXCJnbVwiICsgKC94Ly51bmljb2RlID09IG51bGwgPyBcIlwiIDogXCJ1XCIpO1xuLyoqXG5UaGlzIGNsYXNzIGlzIHNpbWlsYXIgdG8gW2BTZWFyY2hDdXJzb3JgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5TZWFyY2hDdXJzb3IpXG5idXQgc2VhcmNoZXMgZm9yIGEgcmVndWxhciBleHByZXNzaW9uIHBhdHRlcm4gaW5zdGVhZCBvZiBhIHBsYWluXG5zdHJpbmcuXG4qL1xuY2xhc3MgUmVnRXhwQ3Vyc29yIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBjdXJzb3IgdGhhdCB3aWxsIHNlYXJjaCB0aGUgZ2l2ZW4gcmFuZ2UgaW4gdGhlIGdpdmVuXG4gICAgZG9jdW1lbnQuIGBxdWVyeWAgc2hvdWxkIGJlIHRoZSByYXcgcGF0dGVybiAoYXMgeW91J2QgcGFzcyBpdCB0b1xuICAgIGBuZXcgUmVnRXhwYCkuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBxdWVyeSwgb3B0aW9ucywgZnJvbSA9IDAsIHRvID0gdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICAvKipcbiAgICAgICAgU2V0IHRvIGB0cnVlYCB3aGVuIHRoZSBjdXJzb3IgaGFzIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgc2VhcmNoXG4gICAgICAgIHJhbmdlLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgIFdpbGwgY29udGFpbiBhbiBvYmplY3Qgd2l0aCB0aGUgZXh0ZW50IG9mIHRoZSBtYXRjaCBhbmQgdGhlXG4gICAgICAgIG1hdGNoIG9iamVjdCB3aGVuIFtgbmV4dGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLlJlZ0V4cEN1cnNvci5uZXh0KVxuICAgICAgICBzdWNlc3NmdWxseSBmaW5kcyBhIG1hdGNoLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlID0gZW1wdHk7XG4gICAgICAgIGlmICgvXFxcXFtzV0Rucl18XFxufFxccnxcXFtcXF4vLnRlc3QocXVlcnkpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdWx0aWxpbmVSZWdFeHBDdXJzb3IodGV4dCwgcXVlcnksIG9wdGlvbnMsIGZyb20sIHRvKTtcbiAgICAgICAgdGhpcy5yZSA9IG5ldyBSZWdFeHAocXVlcnksIGJhc2VGbGFncyArICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlnbm9yZUNhc2UpID8gXCJpXCIgOiBcIlwiKSk7XG4gICAgICAgIHRoaXMudGVzdCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50ZXN0O1xuICAgICAgICB0aGlzLml0ZXIgPSB0ZXh0Lml0ZXIoKTtcbiAgICAgICAgbGV0IHN0YXJ0TGluZSA9IHRleHQubGluZUF0KGZyb20pO1xuICAgICAgICB0aGlzLmN1ckxpbmVTdGFydCA9IHN0YXJ0TGluZS5mcm9tO1xuICAgICAgICB0aGlzLm1hdGNoUG9zID0gdG9DaGFyRW5kKHRleHQsIGZyb20pO1xuICAgICAgICB0aGlzLmdldExpbmUodGhpcy5jdXJMaW5lU3RhcnQpO1xuICAgIH1cbiAgICBnZXRMaW5lKHNraXApIHtcbiAgICAgICAgdGhpcy5pdGVyLm5leHQoc2tpcCk7XG4gICAgICAgIGlmICh0aGlzLml0ZXIubGluZUJyZWFrKSB7XG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5pdGVyLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ICsgdGhpcy5jdXJMaW5lLmxlbmd0aCA+IHRoaXMudG8pXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5jdXJMaW5lLnNsaWNlKDAsIHRoaXMudG8gLSB0aGlzLmN1ckxpbmVTdGFydCk7XG4gICAgICAgICAgICB0aGlzLml0ZXIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHRMaW5lKCkge1xuICAgICAgICB0aGlzLmN1ckxpbmVTdGFydCA9IHRoaXMuY3VyTGluZVN0YXJ0ICsgdGhpcy5jdXJMaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCA+IHRoaXMudG8pXG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmdldExpbmUoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5leHQgbWF0Y2gsIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIGZvciAobGV0IG9mZiA9IHRoaXMubWF0Y2hQb3MgLSB0aGlzLmN1ckxpbmVTdGFydDs7KSB7XG4gICAgICAgICAgICB0aGlzLnJlLmxhc3RJbmRleCA9IG9mZjtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMubWF0Y2hQb3MgPD0gdGhpcy50byAmJiB0aGlzLnJlLmV4ZWModGhpcy5jdXJMaW5lKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gdGhpcy5jdXJMaW5lU3RhcnQgKyBtYXRjaC5pbmRleCwgdG8gPSBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hQb3MgPSB0b0NoYXJFbmQodGhpcy50ZXh0LCB0byArIChmcm9tID09IHRvID8gMSA6IDApKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA9PSB0aGlzLmN1ckxpbmVTdGFydCArIHRoaXMuY3VyTGluZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dExpbmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoKGZyb20gPCB0byB8fCBmcm9tID4gdGhpcy52YWx1ZS50bykgJiYgKCF0aGlzLnRlc3QgfHwgdGhpcy50ZXN0KGZyb20sIHRvLCBtYXRjaCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB7IGZyb20sIHRvLCBtYXRjaCB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2ZmID0gdGhpcy5tYXRjaFBvcyAtIHRoaXMuY3VyTGluZVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJMaW5lU3RhcnQgKyB0aGlzLmN1ckxpbmUubGVuZ3RoIDwgdGhpcy50bykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dExpbmUoKTtcbiAgICAgICAgICAgICAgICBvZmYgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGZsYXR0ZW5lZCA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLy8gUmV1c2FibGUgKHBhcnRpYWxseSkgZmxhdHRlbmVkIGRvY3VtZW50IHN0cmluZ3NcbmNsYXNzIEZsYXR0ZW5lZERvYyB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdGV4dCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIH1cbiAgICBnZXQgdG8oKSB7IHJldHVybiB0aGlzLmZyb20gKyB0aGlzLnRleHQubGVuZ3RoOyB9XG4gICAgc3RhdGljIGdldChkb2MsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBjYWNoZWQgPSBmbGF0dGVuZWQuZ2V0KGRvYyk7XG4gICAgICAgIGlmICghY2FjaGVkIHx8IGNhY2hlZC5mcm9tID49IHRvIHx8IGNhY2hlZC50byA8PSBmcm9tKSB7XG4gICAgICAgICAgICBsZXQgZmxhdCA9IG5ldyBGbGF0dGVuZWREb2MoZnJvbSwgZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvKSk7XG4gICAgICAgICAgICBmbGF0dGVuZWQuc2V0KGRvYywgZmxhdCk7XG4gICAgICAgICAgICByZXR1cm4gZmxhdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVkLmZyb20gPT0gZnJvbSAmJiBjYWNoZWQudG8gPT0gdG8pXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tOiBjYWNoZWRGcm9tIH0gPSBjYWNoZWQ7XG4gICAgICAgIGlmIChjYWNoZWRGcm9tID4gZnJvbSkge1xuICAgICAgICAgICAgdGV4dCA9IGRvYy5zbGljZVN0cmluZyhmcm9tLCBjYWNoZWRGcm9tKSArIHRleHQ7XG4gICAgICAgICAgICBjYWNoZWRGcm9tID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVkLnRvIDwgdG8pXG4gICAgICAgICAgICB0ZXh0ICs9IGRvYy5zbGljZVN0cmluZyhjYWNoZWQudG8sIHRvKTtcbiAgICAgICAgZmxhdHRlbmVkLnNldChkb2MsIG5ldyBGbGF0dGVuZWREb2MoY2FjaGVkRnJvbSwgdGV4dCkpO1xuICAgICAgICByZXR1cm4gbmV3IEZsYXR0ZW5lZERvYyhmcm9tLCB0ZXh0LnNsaWNlKGZyb20gLSBjYWNoZWRGcm9tLCB0byAtIGNhY2hlZEZyb20pKTtcbiAgICB9XG59XG5jbGFzcyBNdWx0aWxpbmVSZWdFeHBDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIHF1ZXJ5LCBvcHRpb25zLCBmcm9tLCB0bykge1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZhbHVlID0gZW1wdHk7XG4gICAgICAgIHRoaXMubWF0Y2hQb3MgPSB0b0NoYXJFbmQodGV4dCwgZnJvbSk7XG4gICAgICAgIHRoaXMucmUgPSBuZXcgUmVnRXhwKHF1ZXJ5LCBiYXNlRmxhZ3MgKyAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZ25vcmVDYXNlKSA/IFwiaVwiIDogXCJcIikpO1xuICAgICAgICB0aGlzLnRlc3QgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGVzdDtcbiAgICAgICAgdGhpcy5mbGF0ID0gRmxhdHRlbmVkRG9jLmdldCh0ZXh0LCBmcm9tLCB0aGlzLmNodW5rRW5kKGZyb20gKyA1MDAwIC8qIENodW5rLkJhc2UgKi8pKTtcbiAgICB9XG4gICAgY2h1bmtFbmQocG9zKSB7XG4gICAgICAgIHJldHVybiBwb3MgPj0gdGhpcy50byA/IHRoaXMudG8gOiB0aGlzLnRleHQubGluZUF0KHBvcykudG87XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBvZmYgPSB0aGlzLnJlLmxhc3RJbmRleCA9IHRoaXMubWF0Y2hQb3MgLSB0aGlzLmZsYXQuZnJvbTtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMucmUuZXhlYyh0aGlzLmZsYXQudGV4dCk7XG4gICAgICAgICAgICAvLyBTa2lwIGVtcHR5IG1hdGNoZXMgZGlyZWN0bHkgYWZ0ZXIgdGhlIGxhc3QgbWF0Y2hcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiAhbWF0Y2hbMF0gJiYgbWF0Y2guaW5kZXggPT0gb2ZmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZS5sYXN0SW5kZXggPSBvZmYgKyAxO1xuICAgICAgICAgICAgICAgIG1hdGNoID0gdGhpcy5yZS5leGVjKHRoaXMuZmxhdC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gdGhpcy5mbGF0LmZyb20gKyBtYXRjaC5pbmRleCwgdG8gPSBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vIElmIGEgbWF0Y2ggZ29lcyBhbG1vc3QgdG8gdGhlIGVuZCBvZiBhIG5vbmNvbXBsZXRlIGNodW5rLCB0cnlcbiAgICAgICAgICAgICAgICAvLyBhZ2Fpbiwgc2luY2UgaXQnbGwgbGlrZWx5IGJlIGFibGUgdG8gbWF0Y2ggbW9yZVxuICAgICAgICAgICAgICAgIGlmICgodGhpcy5mbGF0LnRvID49IHRoaXMudG8gfHwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggPD0gdGhpcy5mbGF0LnRleHQubGVuZ3RoIC0gMTApICYmXG4gICAgICAgICAgICAgICAgICAgICghdGhpcy50ZXN0IHx8IHRoaXMudGVzdChmcm9tLCB0bywgbWF0Y2gpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0geyBmcm9tLCB0bywgbWF0Y2ggfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaFBvcyA9IHRvQ2hhckVuZCh0aGlzLnRleHQsIHRvICsgKGZyb20gPT0gdG8gPyAxIDogMCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mbGF0LnRvID09IHRoaXMudG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR3JvdyB0aGUgZmxhdHRlbmVkIGRvY1xuICAgICAgICAgICAgdGhpcy5mbGF0ID0gRmxhdHRlbmVkRG9jLmdldCh0aGlzLnRleHQsIHRoaXMuZmxhdC5mcm9tLCB0aGlzLmNodW5rRW5kKHRoaXMuZmxhdC5mcm9tICsgdGhpcy5mbGF0LnRleHQubGVuZ3RoICogMikpO1xuICAgICAgICB9XG4gICAgfVxufVxuaWYgKHR5cGVvZiBTeW1ib2wgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFJlZ0V4cEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IE11bHRpbGluZVJlZ0V4cEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9XG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG5mdW5jdGlvbiB2YWxpZFJlZ0V4cChzb3VyY2UpIHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgUmVnRXhwKHNvdXJjZSwgYmFzZUZsYWdzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gdG9DaGFyRW5kKHRleHQsIHBvcykge1xuICAgIGlmIChwb3MgPj0gdGV4dC5sZW5ndGgpXG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgbGV0IGxpbmUgPSB0ZXh0LmxpbmVBdChwb3MpLCBuZXh0O1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRvICYmIChuZXh0ID0gbGluZS50ZXh0LmNoYXJDb2RlQXQocG9zIC0gbGluZS5mcm9tKSkgPj0gMHhEQzAwICYmIG5leHQgPCAweEUwMDApXG4gICAgICAgIHBvcysrO1xuICAgIHJldHVybiBwb3M7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmVEaWFsb2codmlldykge1xuICAgIGxldCBsaW5lID0gU3RyaW5nKHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpLm51bWJlcik7XG4gICAgbGV0IGlucHV0ID0gZWx0KFwiaW5wdXRcIiwgeyBjbGFzczogXCJjbS10ZXh0ZmllbGRcIiwgbmFtZTogXCJsaW5lXCIsIHZhbHVlOiBsaW5lIH0pO1xuICAgIGxldCBkb20gPSBlbHQoXCJmb3JtXCIsIHtcbiAgICAgICAgY2xhc3M6IFwiY20tZ290b0xpbmVcIixcbiAgICAgICAgb25rZXlkb3duOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3KSB7IC8vIEVzY2FwZVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGRpYWxvZ0VmZmVjdC5vZihmYWxzZSkgfSk7XG4gICAgICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykgeyAvLyBFbnRlclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25zdWJtaXQ6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH1cbiAgICB9LCBlbHQoXCJsYWJlbFwiLCB2aWV3LnN0YXRlLnBocmFzZShcIkdvIHRvIGxpbmVcIiksIFwiOiBcIiwgaW5wdXQpLCBcIiBcIiwgZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIgfSwgdmlldy5zdGF0ZS5waHJhc2UoXCJnb1wiKSksIGVsdChcImJ1dHRvblwiLCB7XG4gICAgICAgIG5hbWU6IFwiY2xvc2VcIixcbiAgICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGRpYWxvZ0VmZmVjdC5vZihmYWxzZSkgfSk7XG4gICAgICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiB2aWV3LnN0YXRlLnBocmFzZShcImNsb3NlXCIpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgfSwgW1wiw5dcIl0pKTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgbGV0IG1hdGNoID0gL14oWystXSk/KFxcZCspPyg6XFxkKyk/KCUpPyQvLmV4ZWMoaW5wdXQudmFsdWUpO1xuICAgICAgICBpZiAoIW1hdGNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc3RhcnRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgbGV0IFssIHNpZ24sIGxuLCBjbCwgcGVyY2VudF0gPSBtYXRjaDtcbiAgICAgICAgbGV0IGNvbCA9IGNsID8gK2NsLnNsaWNlKDEpIDogMDtcbiAgICAgICAgbGV0IGxpbmUgPSBsbiA/ICtsbiA6IHN0YXJ0TGluZS5udW1iZXI7XG4gICAgICAgIGlmIChsbiAmJiBwZXJjZW50KSB7XG4gICAgICAgICAgICBsZXQgcGMgPSBsaW5lIC8gMTAwO1xuICAgICAgICAgICAgaWYgKHNpZ24pXG4gICAgICAgICAgICAgICAgcGMgPSBwYyAqIChzaWduID09IFwiLVwiID8gLTEgOiAxKSArIChzdGFydExpbmUubnVtYmVyIC8gc3RhdGUuZG9jLmxpbmVzKTtcbiAgICAgICAgICAgIGxpbmUgPSBNYXRoLnJvdW5kKHN0YXRlLmRvYy5saW5lcyAqIHBjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsbiAmJiBzaWduKSB7XG4gICAgICAgICAgICBsaW5lID0gbGluZSAqIChzaWduID09IFwiLVwiID8gLTEgOiAxKSArIHN0YXJ0TGluZS5udW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvY0xpbmUgPSBzdGF0ZS5kb2MubGluZShNYXRoLm1heCgxLCBNYXRoLm1pbihzdGF0ZS5kb2MubGluZXMsIGxpbmUpKSk7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGRvY0xpbmUuZnJvbSArIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbCwgZG9jTGluZS5sZW5ndGgpKSk7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZWZmZWN0czogW2RpYWxvZ0VmZmVjdC5vZihmYWxzZSksIEVkaXRvclZpZXcuc2Nyb2xsSW50b1ZpZXcoc2VsZWN0aW9uLmZyb20sIHsgeTogJ2NlbnRlcicgfSldLFxuICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIH1cbiAgICByZXR1cm4geyBkb20gfTtcbn1cbmNvbnN0IGRpYWxvZ0VmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGRpYWxvZ0ZpZWxkID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgaWYgKGUuaXMoZGlhbG9nRWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGUudmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gc2hvd1BhbmVsLmZyb20oZiwgdmFsID0+IHZhbCA/IGNyZWF0ZUxpbmVEaWFsb2cgOiBudWxsKVxufSk7XG4vKipcbkNvbW1hbmQgdGhhdCBzaG93cyBhIGRpYWxvZyBhc2tpbmcgdGhlIHVzZXIgZm9yIGEgbGluZSBudW1iZXIsIGFuZFxud2hlbiBhIHZhbGlkIHBvc2l0aW9uIGlzIHByb3ZpZGVkLCBtb3ZlcyB0aGUgY3Vyc29yIHRvIHRoYXQgbGluZS5cblxuU3VwcG9ydHMgbGluZSBudW1iZXJzLCByZWxhdGl2ZSBsaW5lIG9mZnNldHMgcHJlZml4ZWQgd2l0aCBgK2Agb3JcbmAtYCwgZG9jdW1lbnQgcGVyY2VudGFnZXMgc3VmZml4ZWQgd2l0aCBgJWAsIGFuZCBhbiBvcHRpb25hbFxuY29sdW1uIHBvc2l0aW9uIGJ5IGFkZGluZyBgOmAgYW5kIGEgc2Vjb25kIG51bWJlciBhZnRlciB0aGUgbGluZVxubnVtYmVyLlxuKi9cbmNvbnN0IGdvdG9MaW5lID0gdmlldyA9PiB7XG4gICAgbGV0IHBhbmVsID0gZ2V0UGFuZWwodmlldywgY3JlYXRlTGluZURpYWxvZyk7XG4gICAgaWYgKCFwYW5lbCkge1xuICAgICAgICBsZXQgZWZmZWN0cyA9IFtkaWFsb2dFZmZlY3Qub2YodHJ1ZSldO1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5maWVsZChkaWFsb2dGaWVsZCwgZmFsc2UpID09IG51bGwpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2goU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKFtkaWFsb2dGaWVsZCwgYmFzZVRoZW1lJDFdKSk7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzIH0pO1xuICAgICAgICBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIGNyZWF0ZUxpbmVEaWFsb2cpO1xuICAgIH1cbiAgICBpZiAocGFuZWwpXG4gICAgICAgIHBhbmVsLmRvbS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuc2VsZWN0KCk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLXBhbmVsLmNtLWdvdG9MaW5lXCI6IHtcbiAgICAgICAgcGFkZGluZzogXCIycHggNnB4IDRweFwiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICBcIiYgbGFiZWxcIjogeyBmb250U2l6ZTogXCI4MCVcIiB9LFxuICAgICAgICBcIiYgW25hbWU9Y2xvc2VdXCI6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICB0b3A6IFwiMFwiLCBib3R0b206IFwiMFwiLFxuICAgICAgICAgICAgcmlnaHQ6IFwiNHB4XCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZvbnQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgcGFkZGluZzogXCIwXCJcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5jb25zdCBkZWZhdWx0SGlnaGxpZ2h0T3B0aW9ucyA9IHtcbiAgICBoaWdobGlnaHRXb3JkQXJvdW5kQ3Vyc29yOiBmYWxzZSxcbiAgICBtaW5TZWxlY3Rpb25MZW5ndGg6IDEsXG4gICAgbWF4TWF0Y2hlczogMTAwLFxuICAgIHdob2xlV29yZHM6IGZhbHNlXG59O1xuY29uc3QgaGlnaGxpZ2h0Q29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKG9wdGlvbnMsIGRlZmF1bHRIaWdobGlnaHRPcHRpb25zLCB7XG4gICAgICAgICAgICBoaWdobGlnaHRXb3JkQXJvdW5kQ3Vyc29yOiAoYSwgYikgPT4gYSB8fCBiLFxuICAgICAgICAgICAgbWluU2VsZWN0aW9uTGVuZ3RoOiBNYXRoLm1pbixcbiAgICAgICAgICAgIG1heE1hdGNoZXM6IE1hdGgubWluXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5UaGlzIGV4dGVuc2lvbiBoaWdobGlnaHRzIHRleHQgdGhhdCBtYXRjaGVzIHRoZSBzZWxlY3Rpb24uIEl0IHVzZXNcbnRoZSBgXCJjbS1zZWxlY3Rpb25NYXRjaFwiYCBjbGFzcyBmb3IgdGhlIGhpZ2hsaWdodGluZy4gV2hlblxuYGhpZ2hsaWdodFdvcmRBcm91bmRDdXJzb3JgIGlzIGVuYWJsZWQsIHRoZSB3b3JkIGF0IHRoZSBjdXJzb3Jcbml0c2VsZiB3aWxsIGJlIGhpZ2hsaWdodGVkIHdpdGggYFwiY20tc2VsZWN0aW9uTWF0Y2gtbWFpblwiYC5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzKG9wdGlvbnMpIHtcbiAgICBsZXQgZXh0ID0gW2RlZmF1bHRUaGVtZSwgbWF0Y2hIaWdobGlnaHRlcl07XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIGV4dC5wdXNoKGhpZ2hsaWdodENvbmZpZy5vZihvcHRpb25zKSk7XG4gICAgcmV0dXJuIGV4dDtcbn1cbmNvbnN0IG1hdGNoRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1zZWxlY3Rpb25NYXRjaFwiIH0pO1xuY29uc3QgbWFpbk1hdGNoRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1zZWxlY3Rpb25NYXRjaCBjbS1zZWxlY3Rpb25NYXRjaC1tYWluXCIgfSk7XG4vLyBXaGV0aGVyIHRoZSBjaGFyYWN0ZXJzIGRpcmVjdGx5IG91dHNpZGUgdGhlIGdpdmVuIHBvc2l0aW9ucyBhcmUgbm9uLXdvcmQgY2hhcmFjdGVyc1xuZnVuY3Rpb24gaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCBmcm9tLCB0bykge1xuICAgIHJldHVybiAoZnJvbSA9PSAwIHx8IGNoZWNrKHN0YXRlLnNsaWNlRG9jKGZyb20gLSAxLCBmcm9tKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpICYmXG4gICAgICAgICh0byA9PSBzdGF0ZS5kb2MubGVuZ3RoIHx8IGNoZWNrKHN0YXRlLnNsaWNlRG9jKHRvLCB0byArIDEpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG59XG4vLyBXaGV0aGVyIHRoZSBjaGFyYWN0ZXJzIGRpcmVjdGx5IGF0IHRoZSBnaXZlbiBwb3NpdGlvbnMgYXJlIHdvcmQgY2hhcmFjdGVyc1xuZnVuY3Rpb24gaW5zaWRlV29yZChjaGVjaywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIGNoZWNrKHN0YXRlLnNsaWNlRG9jKGZyb20sIGZyb20gKyAxKSkgPT0gQ2hhckNhdGVnb3J5LldvcmRcbiAgICAgICAgJiYgY2hlY2soc3RhdGUuc2xpY2VEb2ModG8gLSAxLCB0bykpID09IENoYXJDYXRlZ29yeS5Xb3JkO1xufVxuY29uc3QgbWF0Y2hIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHZpZXcpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHVwZGF0ZS52aWV3KTtcbiAgICB9XG4gICAgZ2V0RGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBjb25mID0gdmlldy5zdGF0ZS5mYWNldChoaWdobGlnaHRDb25maWcpO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc2VsID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgbGV0IHJhbmdlID0gc2VsLm1haW4sIHF1ZXJ5LCBjaGVjayA9IG51bGw7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgaWYgKCFjb25mLmhpZ2hsaWdodFdvcmRBcm91bmRDdXJzb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgIGxldCB3b3JkID0gc3RhdGUud29yZEF0KHJhbmdlLmhlYWQpO1xuICAgICAgICAgICAgaWYgKCF3b3JkKVxuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICBjaGVjayA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihyYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIHF1ZXJ5ID0gc3RhdGUuc2xpY2VEb2Mod29yZC5mcm9tLCB3b3JkLnRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSByYW5nZS50byAtIHJhbmdlLmZyb207XG4gICAgICAgICAgICBpZiAobGVuIDwgY29uZi5taW5TZWxlY3Rpb25MZW5ndGggfHwgbGVuID4gMjAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICBpZiAoY29uZi53aG9sZVdvcmRzKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBzdGF0ZS5zbGljZURvYyhyYW5nZS5mcm9tLCByYW5nZS50byk7IC8vIFRPRE86IGFsbG93IGFuZCBpbmNsdWRlIGxlYWRpbmcvdHJhaWxpbmcgc3BhY2U/XG4gICAgICAgICAgICAgICAgY2hlY2sgPSBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocmFuZ2UuaGVhZCk7XG4gICAgICAgICAgICAgICAgaWYgKCEoaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCByYW5nZS5mcm9tLCByYW5nZS50bykgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlV29yZChjaGVjaywgc3RhdGUsIHJhbmdlLmZyb20sIHJhbmdlLnRvKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHN0YXRlLnNsaWNlRG9jKHJhbmdlLmZyb20sIHJhbmdlLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkZWNvID0gW107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHF1ZXJ5LCBwYXJ0LmZyb20sIHBhcnQudG8pO1xuICAgICAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dCgpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2sgfHwgaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCBmcm9tLCB0bykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLmVtcHR5ICYmIGZyb20gPD0gcmFuZ2UuZnJvbSAmJiB0byA+PSByYW5nZS50bylcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChtYWluTWF0Y2hEZWNvLnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZyb20gPj0gcmFuZ2UudG8gfHwgdG8gPD0gcmFuZ2UuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChtYXRjaERlY28ucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY28ubGVuZ3RoID4gY29uZi5tYXhNYXRjaGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY28pO1xuICAgIH1cbn0sIHtcbiAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG59KTtcbmNvbnN0IGRlZmF1bHRUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tc2VsZWN0aW9uTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzk5ZmY3NzgwXCIgfSxcbiAgICBcIi5jbS1zZWFyY2hNYXRjaCAuY20tc2VsZWN0aW9uTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIiB9XG59KTtcbi8vIFNlbGVjdCB0aGUgd29yZHMgYXJvdW5kIHRoZSBjdXJzb3JzLlxuY29uc3Qgc2VsZWN0V29yZCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHsgc2VsZWN0aW9uIH0gPSBzdGF0ZTtcbiAgICBsZXQgbmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShzZWxlY3Rpb24ucmFuZ2VzLm1hcChyYW5nZSA9PiBzdGF0ZS53b3JkQXQocmFuZ2UuaGVhZCkgfHwgRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5oZWFkKSksIHNlbGVjdGlvbi5tYWluSW5kZXgpO1xuICAgIGlmIChuZXdTZWwuZXEoc2VsZWN0aW9uKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbjogbmV3U2VsIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vLyBGaW5kIG5leHQgb2NjdXJyZW5jZSBvZiBxdWVyeSByZWxhdGl2ZSB0byBsYXN0IGN1cnNvci4gV3JhcCBhcm91bmRcbi8vIHRoZSBkb2N1bWVudCBpZiB0aGVyZSBhcmUgbm8gbW9yZSBtYXRjaGVzLlxuZnVuY3Rpb24gZmluZE5leHRPY2N1cnJlbmNlKHN0YXRlLCBxdWVyeSkge1xuICAgIGxldCB7IG1haW4sIHJhbmdlcyB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGxldCB3b3JkID0gc3RhdGUud29yZEF0KG1haW4uaGVhZCksIGZ1bGxXb3JkID0gd29yZCAmJiB3b3JkLmZyb20gPT0gbWFpbi5mcm9tICYmIHdvcmQudG8gPT0gbWFpbi50bztcbiAgICBmb3IgKGxldCBjeWNsZWQgPSBmYWxzZSwgY3Vyc29yID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHF1ZXJ5LCByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvKTs7KSB7XG4gICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgIGlmIChjdXJzb3IuZG9uZSkge1xuICAgICAgICAgICAgaWYgKGN5Y2xlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGN1cnNvciA9IG5ldyBTZWFyY2hDdXJzb3Ioc3RhdGUuZG9jLCBxdWVyeSwgMCwgTWF0aC5tYXgoMCwgcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS5mcm9tIC0gMSkpO1xuICAgICAgICAgICAgY3ljbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjeWNsZWQgJiYgcmFuZ2VzLnNvbWUociA9PiByLmZyb20gPT0gY3Vyc29yLnZhbHVlLmZyb20pKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGZ1bGxXb3JkKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdvcmQgPSBzdGF0ZS53b3JkQXQoY3Vyc29yLnZhbHVlLmZyb20pO1xuICAgICAgICAgICAgICAgIGlmICghd29yZCB8fCB3b3JkLmZyb20gIT0gY3Vyc29yLnZhbHVlLmZyb20gfHwgd29yZC50byAhPSBjdXJzb3IudmFsdWUudG8pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnNvci52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuU2VsZWN0IG5leHQgb2NjdXJyZW5jZSBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uIEV4cGFuZCBzZWxlY3Rpb25cbnRvIHRoZSBzdXJyb3VuZGluZyB3b3JkIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBlbXB0eS5cbiovXG5jb25zdCBzZWxlY3ROZXh0T2NjdXJyZW5jZSA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHsgcmFuZ2VzIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKHJhbmdlcy5zb21lKHNlbCA9PiBzZWwuZnJvbSA9PT0gc2VsLnRvKSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdFdvcmQoeyBzdGF0ZSwgZGlzcGF0Y2ggfSk7XG4gICAgbGV0IHNlYXJjaGVkVGV4dCA9IHN0YXRlLnNsaWNlRG9jKHJhbmdlc1swXS5mcm9tLCByYW5nZXNbMF0udG8pO1xuICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLnNvbWUociA9PiBzdGF0ZS5zbGljZURvYyhyLmZyb20sIHIudG8pICE9IHNlYXJjaGVkVGV4dCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgcmFuZ2UgPSBmaW5kTmV4dE9jY3VycmVuY2Uoc3RhdGUsIHNlYXJjaGVkVGV4dCk7XG4gICAgaWYgKCFyYW5nZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgIHNlbGVjdGlvbjogc3RhdGUuc2VsZWN0aW9uLmFkZFJhbmdlKEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5mcm9tLCByYW5nZS50byksIGZhbHNlKSxcbiAgICAgICAgZWZmZWN0czogRWRpdG9yVmlldy5zY3JvbGxJbnRvVmlldyhyYW5nZS50bylcbiAgICB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5jb25zdCBzZWFyY2hDb25maWdGYWNldCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICB0b3A6IGZhbHNlLFxuICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgICAgICAgIHJlZ2V4cDogZmFsc2UsXG4gICAgICAgICAgICB3aG9sZVdvcmQ6IGZhbHNlLFxuICAgICAgICAgICAgY3JlYXRlUGFuZWw6IHZpZXcgPT4gbmV3IFNlYXJjaFBhbmVsKHZpZXcpLFxuICAgICAgICAgICAgc2Nyb2xsVG9NYXRjaDogcmFuZ2UgPT4gRWRpdG9yVmlldy5zY3JvbGxJbnRvVmlldyhyYW5nZSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcbkFkZCBzZWFyY2ggc3RhdGUgdG8gdGhlIGVkaXRvciBjb25maWd1cmF0aW9uLCBhbmQgb3B0aW9uYWxseVxuY29uZmlndXJlIHRoZSBzZWFyY2ggZXh0ZW5zaW9uLlxuKFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKSB3aWxsIGF1dG9tYXRpY2FsbHlcbmVuYWJsZSB0aGlzIGlmIGl0IGlzbid0IGFscmVhZHkgb24pLlxuKi9cbmZ1bmN0aW9uIHNlYXJjaChjb25maWcpIHtcbiAgICByZXR1cm4gY29uZmlnID8gW3NlYXJjaENvbmZpZ0ZhY2V0Lm9mKGNvbmZpZyksIHNlYXJjaEV4dGVuc2lvbnNdIDogc2VhcmNoRXh0ZW5zaW9ucztcbn1cbi8qKlxuQSBzZWFyY2ggcXVlcnkuIFBhcnQgb2YgdGhlIGVkaXRvcidzIHNlYXJjaCBzdGF0ZS5cbiovXG5jbGFzcyBTZWFyY2hRdWVyeSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcXVlcnkgb2JqZWN0LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gY29uZmlnLnNlYXJjaDtcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gISFjb25maWcuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5saXRlcmFsID0gISFjb25maWcubGl0ZXJhbDtcbiAgICAgICAgdGhpcy5yZWdleHAgPSAhIWNvbmZpZy5yZWdleHA7XG4gICAgICAgIHRoaXMucmVwbGFjZSA9IGNvbmZpZy5yZXBsYWNlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudmFsaWQgPSAhIXRoaXMuc2VhcmNoICYmICghdGhpcy5yZWdleHAgfHwgdmFsaWRSZWdFeHAodGhpcy5zZWFyY2gpKTtcbiAgICAgICAgdGhpcy51bnF1b3RlZCA9IHRoaXMudW5xdW90ZSh0aGlzLnNlYXJjaCk7XG4gICAgICAgIHRoaXMud2hvbGVXb3JkID0gISFjb25maWcud2hvbGVXb3JkO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHVucXVvdGUodGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFsID8gdGV4dCA6XG4gICAgICAgICAgICB0ZXh0LnJlcGxhY2UoL1xcXFwoW25ydFxcXFxdKS9nLCAoXywgY2gpID0+IGNoID09IFwiblwiID8gXCJcXG5cIiA6IGNoID09IFwiclwiID8gXCJcXHJcIiA6IGNoID09IFwidFwiID8gXCJcXHRcIiA6IFwiXFxcXFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIHF1ZXJ5IHRvIGFub3RoZXIgcXVlcnkuXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2ggPT0gb3RoZXIuc2VhcmNoICYmIHRoaXMucmVwbGFjZSA9PSBvdGhlci5yZXBsYWNlICYmXG4gICAgICAgICAgICB0aGlzLmNhc2VTZW5zaXRpdmUgPT0gb3RoZXIuY2FzZVNlbnNpdGl2ZSAmJiB0aGlzLnJlZ2V4cCA9PSBvdGhlci5yZWdleHAgJiZcbiAgICAgICAgICAgIHRoaXMud2hvbGVXb3JkID09IG90aGVyLndob2xlV29yZDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2V4cCA/IG5ldyBSZWdFeHBRdWVyeSh0aGlzKSA6IG5ldyBTdHJpbmdRdWVyeSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgc2VhcmNoIGN1cnNvciBmb3IgdGhpcyBxdWVyeSwgc2VhcmNoaW5nIHRocm91Z2ggdGhlIGdpdmVuXG4gICAgcmFuZ2UgaW4gdGhlIGdpdmVuIHN0YXRlLlxuICAgICovXG4gICAgZ2V0Q3Vyc29yKHN0YXRlLCBmcm9tID0gMCwgdG8pIHtcbiAgICAgICAgbGV0IHN0ID0gc3RhdGUuZG9jID8gc3RhdGUgOiBFZGl0b3JTdGF0ZS5jcmVhdGUoeyBkb2M6IHN0YXRlIH0pO1xuICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgIHRvID0gc3QuZG9jLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnZXhwID8gcmVnZXhwQ3Vyc29yKHRoaXMsIHN0LCBmcm9tLCB0bykgOiBzdHJpbmdDdXJzb3IodGhpcywgc3QsIGZyb20sIHRvKTtcbiAgICB9XG59XG5jbGFzcyBRdWVyeVR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICB9XG59XG5mdW5jdGlvbiBzdHJpbmdDdXJzb3Ioc3BlYywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hDdXJzb3Ioc3RhdGUuZG9jLCBzcGVjLnVucXVvdGVkLCBmcm9tLCB0bywgc3BlYy5jYXNlU2Vuc2l0aXZlID8gdW5kZWZpbmVkIDogeCA9PiB4LnRvTG93ZXJDYXNlKCksIHNwZWMud2hvbGVXb3JkID8gc3RyaW5nV29yZFRlc3Qoc3RhdGUuZG9jLCBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIoc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCkpIDogdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ1dvcmRUZXN0KGRvYywgY2F0ZWdvcml6ZXIpIHtcbiAgICByZXR1cm4gKGZyb20sIHRvLCBidWYsIGJ1ZlBvcykgPT4ge1xuICAgICAgICBpZiAoYnVmUG9zID4gZnJvbSB8fCBidWZQb3MgKyBidWYubGVuZ3RoIDwgdG8pIHtcbiAgICAgICAgICAgIGJ1ZlBvcyA9IE1hdGgubWF4KDAsIGZyb20gLSAyKTtcbiAgICAgICAgICAgIGJ1ZiA9IGRvYy5zbGljZVN0cmluZyhidWZQb3MsIE1hdGgubWluKGRvYy5sZW5ndGgsIHRvICsgMikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoY2F0ZWdvcml6ZXIoY2hhckJlZm9yZShidWYsIGZyb20gLSBidWZQb3MpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCB8fFxuICAgICAgICAgICAgY2F0ZWdvcml6ZXIoY2hhckFmdGVyKGJ1ZiwgZnJvbSAtIGJ1ZlBvcykpICE9IENoYXJDYXRlZ29yeS5Xb3JkKSAmJlxuICAgICAgICAgICAgKGNhdGVnb3JpemVyKGNoYXJBZnRlcihidWYsIHRvIC0gYnVmUG9zKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQgfHxcbiAgICAgICAgICAgICAgICBjYXRlZ29yaXplcihjaGFyQmVmb3JlKGJ1ZiwgdG8gLSBidWZQb3MpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG4gICAgfTtcbn1cbmNsYXNzIFN0cmluZ1F1ZXJ5IGV4dGVuZHMgUXVlcnlUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHN1cGVyKHNwZWMpO1xuICAgIH1cbiAgICBuZXh0TWF0Y2goc3RhdGUsIGN1ckZyb20sIGN1clRvKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSBzdHJpbmdDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgY3VyVG8sIHN0YXRlLmRvYy5sZW5ndGgpLm5leHRPdmVybGFwcGluZygpO1xuICAgICAgICBpZiAoY3Vyc29yLmRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCBjdXJGcm9tICsgdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCk7XG4gICAgICAgICAgICBjdXJzb3IgPSBzdHJpbmdDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgMCwgZW5kKS5uZXh0T3ZlcmxhcHBpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3Vyc29yLmRvbmUgfHwgY3Vyc29yLnZhbHVlLmZyb20gPT0gY3VyRnJvbSAmJiBjdXJzb3IudmFsdWUudG8gPT0gY3VyVG8gPyBudWxsIDogY3Vyc29yLnZhbHVlO1xuICAgIH1cbiAgICAvLyBTZWFyY2hpbmcgaW4gcmV2ZXJzZSBpcywgcmF0aGVyIHRoYW4gaW1wbGVtZW50aW5nIGFuIGludmVydGVkIHNlYXJjaFxuICAgIC8vIGN1cnNvciwgZG9uZSBieSBzY2FubmluZyBjaHVuayBhZnRlciBjaHVuayBmb3J3YXJkLlxuICAgIHByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHRvOzspIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IE1hdGgubWF4KGZyb20sIHBvcyAtIDEwMDAwIC8qIEZpbmRQcmV2LkNodW5rU2l6ZSAqLyAtIHRoaXMuc3BlYy51bnF1b3RlZC5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IGN1cnNvciA9IHN0cmluZ0N1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBzdGFydCwgcG9zKSwgcmFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dE92ZXJsYXBwaW5nKCkuZG9uZSlcbiAgICAgICAgICAgICAgICByYW5nZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPT0gZnJvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHBvcyAtPSAxMDAwMCAvKiBGaW5kUHJldi5DaHVua1NpemUgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJldk1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLnByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIDAsIGN1ckZyb20pO1xuICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgZm91bmQgPSB0aGlzLnByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIE1hdGgubWF4KDAsIGN1clRvIC0gdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCksIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gZm91bmQgJiYgKGZvdW5kLmZyb20gIT0gY3VyRnJvbSB8fCBmb3VuZC50byAhPSBjdXJUbykgPyBmb3VuZCA6IG51bGw7XG4gICAgfVxuICAgIGdldFJlcGxhY2VtZW50KF9yZXN1bHQpIHsgcmV0dXJuIHRoaXMuc3BlYy51bnF1b3RlKHRoaXMuc3BlYy5yZXBsYWNlKTsgfVxuICAgIG1hdGNoQWxsKHN0YXRlLCBsaW1pdCkge1xuICAgICAgICBsZXQgY3Vyc29yID0gc3RyaW5nQ3Vyc29yKHRoaXMuc3BlYywgc3RhdGUsIDAsIHN0YXRlLmRvYy5sZW5ndGgpLCByYW5nZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dCgpLmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID49IGxpbWl0KVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgIH1cbiAgICBoaWdobGlnaHQoc3RhdGUsIGZyb20sIHRvLCBhZGQpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IHN0cmluZ0N1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBNYXRoLm1heCgwLCBmcm9tIC0gdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCksIE1hdGgubWluKHRvICsgdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCwgc3RhdGUuZG9jLmxlbmd0aCkpO1xuICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgIGFkZChjdXJzb3IudmFsdWUuZnJvbSwgY3Vyc29yLnZhbHVlLnRvKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWdleHBDdXJzb3Ioc3BlYywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHBDdXJzb3Ioc3RhdGUuZG9jLCBzcGVjLnNlYXJjaCwge1xuICAgICAgICBpZ25vcmVDYXNlOiAhc3BlYy5jYXNlU2Vuc2l0aXZlLFxuICAgICAgICB0ZXN0OiBzcGVjLndob2xlV29yZCA/IHJlZ2V4cFdvcmRUZXN0KHN0YXRlLmNoYXJDYXRlZ29yaXplcihzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKSkgOiB1bmRlZmluZWRcbiAgICB9LCBmcm9tLCB0byk7XG59XG5mdW5jdGlvbiBjaGFyQmVmb3JlKHN0ciwgaW5kZXgpIHtcbiAgICByZXR1cm4gc3RyLnNsaWNlKGZpbmRDbHVzdGVyQnJlYWsoc3RyLCBpbmRleCwgZmFsc2UpLCBpbmRleCk7XG59XG5mdW5jdGlvbiBjaGFyQWZ0ZXIoc3RyLCBpbmRleCkge1xuICAgIHJldHVybiBzdHIuc2xpY2UoaW5kZXgsIGZpbmRDbHVzdGVyQnJlYWsoc3RyLCBpbmRleCkpO1xufVxuZnVuY3Rpb24gcmVnZXhwV29yZFRlc3QoY2F0ZWdvcml6ZXIpIHtcbiAgICByZXR1cm4gKF9mcm9tLCBfdG8sIG1hdGNoKSA9PiAhbWF0Y2hbMF0ubGVuZ3RoIHx8XG4gICAgICAgIChjYXRlZ29yaXplcihjaGFyQmVmb3JlKG1hdGNoLmlucHV0LCBtYXRjaC5pbmRleCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkIHx8XG4gICAgICAgICAgICBjYXRlZ29yaXplcihjaGFyQWZ0ZXIobWF0Y2guaW5wdXQsIG1hdGNoLmluZGV4KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpICYmXG4gICAgICAgICAgICAoY2F0ZWdvcml6ZXIoY2hhckFmdGVyKG1hdGNoLmlucHV0LCBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkIHx8XG4gICAgICAgICAgICAgICAgY2F0ZWdvcml6ZXIoY2hhckJlZm9yZShtYXRjaC5pbnB1dCwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG59XG5jbGFzcyBSZWdFeHBRdWVyeSBleHRlbmRzIFF1ZXJ5VHlwZSB7XG4gICAgbmV4dE1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICBsZXQgY3Vyc29yID0gcmVnZXhwQ3Vyc29yKHRoaXMuc3BlYywgc3RhdGUsIGN1clRvLCBzdGF0ZS5kb2MubGVuZ3RoKS5uZXh0KCk7XG4gICAgICAgIGlmIChjdXJzb3IuZG9uZSlcbiAgICAgICAgICAgIGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCAwLCBjdXJGcm9tKS5uZXh0KCk7XG4gICAgICAgIHJldHVybiBjdXJzb3IuZG9uZSA/IG51bGwgOiBjdXJzb3IudmFsdWU7XG4gICAgfVxuICAgIHByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgICAgIGZvciAobGV0IHNpemUgPSAxOzsgc2l6ZSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChmcm9tLCB0byAtIHNpemUgKiAxMDAwMCAvKiBGaW5kUHJldi5DaHVua1NpemUgKi8pO1xuICAgICAgICAgICAgbGV0IGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBzdGFydCwgdG8pLCByYW5nZSA9IG51bGw7XG4gICAgICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgICAgICByYW5nZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZSAmJiAoc3RhcnQgPT0gZnJvbSB8fCByYW5nZS5mcm9tID4gc3RhcnQgKyAxMCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgICAgICAgICAgaWYgKHN0YXJ0ID09IGZyb20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJldk1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2TWF0Y2hJblJhbmdlKHN0YXRlLCAwLCBjdXJGcm9tKSB8fFxuICAgICAgICAgICAgdGhpcy5wcmV2TWF0Y2hJblJhbmdlKHN0YXRlLCBjdXJUbywgc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgfVxuICAgIGdldFJlcGxhY2VtZW50KHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGVjLnVucXVvdGUodGhpcy5zcGVjLnJlcGxhY2UpLnJlcGxhY2UoL1xcJChbJCZdfFxcZCspL2csIChtLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaSA9PSBcIiZcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Lm1hdGNoWzBdO1xuICAgICAgICAgICAgaWYgKGkgPT0gXCIkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiJFwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbCA9IGkubGVuZ3RoOyBsID4gMDsgbC0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IG4gPSAraS5zbGljZSgwLCBsKTtcbiAgICAgICAgICAgICAgICBpZiAobiA+IDAgJiYgbiA8IHJlc3VsdC5tYXRjaC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQubWF0Y2hbbl0gKyBpLnNsaWNlKGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXRjaEFsbChzdGF0ZSwgbGltaXQpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCAwLCBzdGF0ZS5kb2MubGVuZ3RoKSwgcmFuZ2VzID0gW107XG4gICAgICAgIHdoaWxlICghY3Vyc29yLm5leHQoKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA+PSBsaW1pdClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGN1cnNvci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICB9XG4gICAgaGlnaGxpZ2h0KHN0YXRlLCBmcm9tLCB0bywgYWRkKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSByZWdleHBDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgTWF0aC5tYXgoMCwgZnJvbSAtIDI1MCAvKiBSZWdFeHAuSGlnaGxpZ2h0TWFyZ2luICovKSwgTWF0aC5taW4odG8gKyAyNTAgLyogUmVnRXhwLkhpZ2hsaWdodE1hcmdpbiAqLywgc3RhdGUuZG9jLmxlbmd0aCkpO1xuICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgIGFkZChjdXJzb3IudmFsdWUuZnJvbSwgY3Vyc29yLnZhbHVlLnRvKTtcbiAgICB9XG59XG4vKipcbkEgc3RhdGUgZWZmZWN0IHRoYXQgdXBkYXRlcyB0aGUgY3VycmVudCBzZWFyY2ggcXVlcnkuIE5vdGUgdGhhdFxudGhpcyBvbmx5IGhhcyBhbiBlZmZlY3QgaWYgdGhlIHNlYXJjaCBzdGF0ZSBoYXMgYmVlbiBpbml0aWFsaXplZFxuKGJ5IGluY2x1ZGluZyBbYHNlYXJjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLnNlYXJjaCkgaW4geW91ciBjb25maWd1cmF0aW9uIG9yXG5ieSBydW5uaW5nIFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKSBhdCBsZWFzdFxub25jZSkuXG4qL1xuY29uc3Qgc2V0U2VhcmNoUXVlcnkgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCB0b2dnbGVQYW5lbCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IHNlYXJjaFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWFyY2hTdGF0ZShkZWZhdWx0UXVlcnkoc3RhdGUpLmNyZWF0ZSgpLCBudWxsKTtcbiAgICB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0U2VhcmNoUXVlcnkpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IFNlYXJjaFN0YXRlKGVmZmVjdC52YWx1ZS5jcmVhdGUoKSwgdmFsdWUucGFuZWwpO1xuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKHRvZ2dsZVBhbmVsKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBTZWFyY2hTdGF0ZSh2YWx1ZS5xdWVyeSwgZWZmZWN0LnZhbHVlID8gY3JlYXRlU2VhcmNoUGFuZWwgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IHNob3dQYW5lbC5mcm9tKGYsIHZhbCA9PiB2YWwucGFuZWwpXG59KTtcbi8qKlxuR2V0IHRoZSBjdXJyZW50IHNlYXJjaCBxdWVyeSBmcm9tIGFuIGVkaXRvciBzdGF0ZS5cbiovXG5mdW5jdGlvbiBnZXRTZWFyY2hRdWVyeShzdGF0ZSkge1xuICAgIGxldCBjdXJTdGF0ZSA9IHN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuIGN1clN0YXRlID8gY3VyU3RhdGUucXVlcnkuc3BlYyA6IGRlZmF1bHRRdWVyeShzdGF0ZSk7XG59XG4vKipcblF1ZXJ5IHdoZXRoZXIgdGhlIHNlYXJjaCBwYW5lbCBpcyBvcGVuIGluIHRoZSBnaXZlbiBlZGl0b3Igc3RhdGUuXG4qL1xuZnVuY3Rpb24gc2VhcmNoUGFuZWxPcGVuKHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhbmVsKSAhPSBudWxsO1xufVxuY2xhc3MgU2VhcmNoU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHF1ZXJ5LCBwYW5lbCkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIHRoaXMucGFuZWwgPSBwYW5lbDtcbiAgICB9XG59XG5jb25zdCBtYXRjaE1hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tc2VhcmNoTWF0Y2hcIiB9KSwgc2VsZWN0ZWRNYXRjaE1hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tc2VhcmNoTWF0Y2ggY20tc2VhcmNoTWF0Y2gtc2VsZWN0ZWRcIiB9KTtcbmNvbnN0IHNlYXJjaEhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmhpZ2hsaWdodCh2aWV3LnN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHN0YXRlID0gdXBkYXRlLnN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlICE9IHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKSB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5oaWdobGlnaHQoc3RhdGUpO1xuICAgIH1cbiAgICBoaWdobGlnaHQoeyBxdWVyeSwgcGFuZWwgfSkge1xuICAgICAgICBpZiAoIXBhbmVsIHx8ICFxdWVyeS5zcGVjLnZhbGlkKVxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcztcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCByYW5nZXMgPSB2aWV3LnZpc2libGVSYW5nZXMsIGwgPSByYW5nZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBsIC0gMSAmJiB0byA+IHJhbmdlc1tpICsgMV0uZnJvbSAtIDIgKiAyNTAgLyogUmVnRXhwLkhpZ2hsaWdodE1hcmdpbiAqLylcbiAgICAgICAgICAgICAgICB0byA9IHJhbmdlc1srK2ldLnRvO1xuICAgICAgICAgICAgcXVlcnkuaGlnaGxpZ2h0KHZpZXcuc3RhdGUsIGZyb20sIHRvLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMuc29tZShyID0+IHIuZnJvbSA9PSBmcm9tICYmIHIudG8gPT0gdG8pO1xuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCBzZWxlY3RlZCA/IHNlbGVjdGVkTWF0Y2hNYXJrIDogbWF0Y2hNYXJrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cbn0sIHtcbiAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG59KTtcbmZ1bmN0aW9uIHNlYXJjaENvbW1hbmQoZikge1xuICAgIHJldHVybiB2aWV3ID0+IHtcbiAgICAgICAgbGV0IHN0YXRlID0gdmlldy5zdGF0ZS5maWVsZChzZWFyY2hTdGF0ZSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gc3RhdGUgJiYgc3RhdGUucXVlcnkuc3BlYy52YWxpZCA/IGYodmlldywgc3RhdGUpIDogb3BlblNlYXJjaFBhbmVsKHZpZXcpO1xuICAgIH07XG59XG4vKipcbk9wZW4gdGhlIHNlYXJjaCBwYW5lbCBpZiBpdCBpc24ndCBhbHJlYWR5IG9wZW4sIGFuZCBtb3ZlIHRoZVxuc2VsZWN0aW9uIHRvIHRoZSBmaXJzdCBtYXRjaCBhZnRlciB0aGUgY3VycmVudCBtYWluIHNlbGVjdGlvbi5cbldpbGwgd3JhcCBhcm91bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudCB3aGVuIGl0IHJlYWNoZXMgdGhlXG5lbmQuXG4qL1xuY29uc3QgZmluZE5leHQgPSAvKkBfX1BVUkVfXyovc2VhcmNoQ29tbWFuZCgodmlldywgeyBxdWVyeSB9KSA9PiB7XG4gICAgbGV0IHsgdG8gfSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgbGV0IG5leHQgPSBxdWVyeS5uZXh0TWF0Y2godmlldy5zdGF0ZSwgdG8sIHRvKTtcbiAgICBpZiAoIW5leHQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShuZXh0LmZyb20sIG5leHQudG8pO1xuICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICBlZmZlY3RzOiBbYW5ub3VuY2VNYXRjaCh2aWV3LCBuZXh0KSwgY29uZmlnLnNjcm9sbFRvTWF0Y2goc2VsZWN0aW9uLm1haW4sIHZpZXcpXSxcbiAgICAgICAgdXNlckV2ZW50OiBcInNlbGVjdC5zZWFyY2hcIlxuICAgIH0pO1xuICAgIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgcHJldmlvdXMgaW5zdGFuY2Ugb2YgdGhlIHNlYXJjaCBxdWVyeSxcbmJlZm9yZSB0aGUgY3VycmVudCBtYWluIHNlbGVjdGlvbi4gV2lsbCB3cmFwIHBhc3QgdGhlIHN0YXJ0XG5vZiB0aGUgZG9jdW1lbnQgdG8gc3RhcnQgc2VhcmNoaW5nIGF0IHRoZSBlbmQgYWdhaW4uXG4qL1xuY29uc3QgZmluZFByZXZpb3VzID0gLypAX19QVVJFX18qL3NlYXJjaENvbW1hbmQoKHZpZXcsIHsgcXVlcnkgfSkgPT4ge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCB7IGZyb20gfSA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGxldCBwcmV2ID0gcXVlcnkucHJldk1hdGNoKHN0YXRlLCBmcm9tLCBmcm9tKTtcbiAgICBpZiAoIXByZXYpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShwcmV2LmZyb20sIHByZXYudG8pO1xuICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICBlZmZlY3RzOiBbYW5ub3VuY2VNYXRjaCh2aWV3LCBwcmV2KSwgY29uZmlnLnNjcm9sbFRvTWF0Y2goc2VsZWN0aW9uLm1haW4sIHZpZXcpXSxcbiAgICAgICAgdXNlckV2ZW50OiBcInNlbGVjdC5zZWFyY2hcIlxuICAgIH0pO1xuICAgIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcblNlbGVjdCBhbGwgaW5zdGFuY2VzIG9mIHRoZSBzZWFyY2ggcXVlcnkuXG4qL1xuY29uc3Qgc2VsZWN0TWF0Y2hlcyA9IC8qQF9fUFVSRV9fKi9zZWFyY2hDb21tYW5kKCh2aWV3LCB7IHF1ZXJ5IH0pID0+IHtcbiAgICBsZXQgcmFuZ2VzID0gcXVlcnkubWF0Y2hBbGwodmlldy5zdGF0ZSwgMTAwMCk7XG4gICAgaWYgKCFyYW5nZXMgfHwgIXJhbmdlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcy5tYXAociA9PiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2Uoci5mcm9tLCByLnRvKSkpLFxuICAgICAgICB1c2VyRXZlbnQ6IFwic2VsZWN0LnNlYXJjaC5tYXRjaGVzXCJcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuLyoqXG5TZWxlY3QgYWxsIGluc3RhbmNlcyBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRleHQuXG4qL1xuY29uc3Qgc2VsZWN0U2VsZWN0aW9uTWF0Y2hlcyA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHNlbCA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggPiAxIHx8IHNlbC5tYWluLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHsgZnJvbSwgdG8gfSA9IHNlbC5tYWluO1xuICAgIGxldCByYW5nZXMgPSBbXSwgbWFpbiA9IDA7XG4gICAgZm9yIChsZXQgY3VyID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSk7ICFjdXIubmV4dCgpLmRvbmU7KSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGN1ci52YWx1ZS5mcm9tID09IGZyb20pXG4gICAgICAgICAgICBtYWluID0gcmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGN1ci52YWx1ZS5mcm9tLCBjdXIudmFsdWUudG8pKTtcbiAgICB9XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHtcbiAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgbWFpbiksXG4gICAgICAgIHVzZXJFdmVudDogXCJzZWxlY3Quc2VhcmNoLm1hdGNoZXNcIlxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblJlcGxhY2UgdGhlIGN1cnJlbnQgbWF0Y2ggb2YgdGhlIHNlYXJjaCBxdWVyeS5cbiovXG5jb25zdCByZXBsYWNlTmV4dCA9IC8qQF9fUFVSRV9fKi9zZWFyY2hDb21tYW5kKCh2aWV3LCB7IHF1ZXJ5IH0pID0+IHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgeyBmcm9tLCB0byB9ID0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IG1hdGNoID0gcXVlcnkubmV4dE1hdGNoKHN0YXRlLCBmcm9tLCBmcm9tKTtcbiAgICBpZiAoIW1hdGNoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IG5leHQgPSBtYXRjaDtcbiAgICBsZXQgY2hhbmdlcyA9IFtdLCBzZWxlY3Rpb24sIHJlcGxhY2VtZW50O1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgaWYgKG5leHQuZnJvbSA9PSBmcm9tICYmIG5leHQudG8gPT0gdG8pIHtcbiAgICAgICAgcmVwbGFjZW1lbnQgPSBzdGF0ZS50b1RleHQocXVlcnkuZ2V0UmVwbGFjZW1lbnQobmV4dCkpO1xuICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBuZXh0LmZyb20sIHRvOiBuZXh0LnRvLCBpbnNlcnQ6IHJlcGxhY2VtZW50IH0pO1xuICAgICAgICBuZXh0ID0gcXVlcnkubmV4dE1hdGNoKHN0YXRlLCBuZXh0LmZyb20sIG5leHQudG8pO1xuICAgICAgICBlZmZlY3RzLnB1c2goRWRpdG9yVmlldy5hbm5vdW5jZS5vZihzdGF0ZS5waHJhc2UoXCJyZXBsYWNlZCBtYXRjaCBvbiBsaW5lICRcIiwgc3RhdGUuZG9jLmxpbmVBdChmcm9tKS5udW1iZXIpICsgXCIuXCIpKTtcbiAgICB9XG4gICAgbGV0IGNoYW5nZVNldCA9IHZpZXcuc3RhdGUuY2hhbmdlcyhjaGFuZ2VzKTtcbiAgICBpZiAobmV4dCkge1xuICAgICAgICBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKG5leHQuZnJvbSwgbmV4dC50bykubWFwKGNoYW5nZVNldCk7XG4gICAgICAgIGVmZmVjdHMucHVzaChhbm5vdW5jZU1hdGNoKHZpZXcsIG5leHQpKTtcbiAgICAgICAgZWZmZWN0cy5wdXNoKHN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KS5zY3JvbGxUb01hdGNoKHNlbGVjdGlvbi5tYWluLCB2aWV3KSk7XG4gICAgfVxuICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzOiBjaGFuZ2VTZXQsXG4gICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgZWZmZWN0cyxcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnJlcGxhY2VcIlxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcblJlcGxhY2UgYWxsIGluc3RhbmNlcyBvZiB0aGUgc2VhcmNoIHF1ZXJ5IHdpdGggdGhlIGdpdmVuXG5yZXBsYWNlbWVudC5cbiovXG5jb25zdCByZXBsYWNlQWxsID0gLypAX19QVVJFX18qL3NlYXJjaENvbW1hbmQoKHZpZXcsIHsgcXVlcnkgfSkgPT4ge1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBxdWVyeS5tYXRjaEFsbCh2aWV3LnN0YXRlLCAxZTkpLm1hcChtYXRjaCA9PiB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBtYXRjaDtcbiAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8sIGluc2VydDogcXVlcnkuZ2V0UmVwbGFjZW1lbnQobWF0Y2gpIH07XG4gICAgfSk7XG4gICAgaWYgKCFjaGFuZ2VzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBhbm5vdW5jZVRleHQgPSB2aWV3LnN0YXRlLnBocmFzZShcInJlcGxhY2VkICQgbWF0Y2hlc1wiLCBjaGFuZ2VzLmxlbmd0aCkgKyBcIi5cIjtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgZWZmZWN0czogRWRpdG9yVmlldy5hbm5vdW5jZS5vZihhbm5vdW5jZVRleHQpLFxuICAgICAgICB1c2VyRXZlbnQ6IFwiaW5wdXQucmVwbGFjZS5hbGxcIlxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG5mdW5jdGlvbiBjcmVhdGVTZWFyY2hQYW5lbCh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcuc3RhdGUuZmFjZXQoc2VhcmNoQ29uZmlnRmFjZXQpLmNyZWF0ZVBhbmVsKHZpZXcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdFF1ZXJ5KHN0YXRlLCBmYWxsYmFjaykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgbGV0IHNlbCA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGxldCBzZWxUZXh0ID0gc2VsLmVtcHR5IHx8IHNlbC50byA+IHNlbC5mcm9tICsgMTAwID8gXCJcIiA6IHN0YXRlLnNsaWNlRG9jKHNlbC5mcm9tLCBzZWwudG8pO1xuICAgIGlmIChmYWxsYmFjayAmJiAhc2VsVGV4dClcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIGxldCBjb25maWcgPSBzdGF0ZS5mYWNldChzZWFyY2hDb25maWdGYWNldCk7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hRdWVyeSh7XG4gICAgICAgIHNlYXJjaDogKChfYSA9IGZhbGxiYWNrID09PSBudWxsIHx8IGZhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmYWxsYmFjay5saXRlcmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb25maWcubGl0ZXJhbCkgPyBzZWxUZXh0IDogc2VsVGV4dC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSxcbiAgICAgICAgY2FzZVNlbnNpdGl2ZTogKF9iID0gZmFsbGJhY2sgPT09IG51bGwgfHwgZmFsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZhbGxiYWNrLmNhc2VTZW5zaXRpdmUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGNvbmZpZy5jYXNlU2Vuc2l0aXZlLFxuICAgICAgICBsaXRlcmFsOiAoX2MgPSBmYWxsYmFjayA9PT0gbnVsbCB8fCBmYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmFsbGJhY2subGl0ZXJhbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY29uZmlnLmxpdGVyYWwsXG4gICAgICAgIHJlZ2V4cDogKF9kID0gZmFsbGJhY2sgPT09IG51bGwgfHwgZmFsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZhbGxiYWNrLnJlZ2V4cCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogY29uZmlnLnJlZ2V4cCxcbiAgICAgICAgd2hvbGVXb3JkOiAoX2UgPSBmYWxsYmFjayA9PT0gbnVsbCB8fCBmYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmFsbGJhY2sud2hvbGVXb3JkKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBjb25maWcud2hvbGVXb3JkXG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRTZWFyY2hJbnB1dCh2aWV3KSB7XG4gICAgbGV0IHBhbmVsID0gZ2V0UGFuZWwodmlldywgY3JlYXRlU2VhcmNoUGFuZWwpO1xuICAgIHJldHVybiBwYW5lbCAmJiBwYW5lbC5kb20ucXVlcnlTZWxlY3RvcihcIlttYWluLWZpZWxkXVwiKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpIHtcbiAgICBsZXQgaW5wdXQgPSBnZXRTZWFyY2hJbnB1dCh2aWV3KTtcbiAgICBpZiAoaW5wdXQgJiYgaW5wdXQgPT0gdmlldy5yb290LmFjdGl2ZUVsZW1lbnQpXG4gICAgICAgIGlucHV0LnNlbGVjdCgpO1xufVxuLyoqXG5NYWtlIHN1cmUgdGhlIHNlYXJjaCBwYW5lbCBpcyBvcGVuIGFuZCBmb2N1c2VkLlxuKi9cbmNvbnN0IG9wZW5TZWFyY2hQYW5lbCA9IHZpZXcgPT4ge1xuICAgIGxldCBzdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoc3RhdGUgJiYgc3RhdGUucGFuZWwpIHtcbiAgICAgICAgbGV0IHNlYXJjaElucHV0ID0gZ2V0U2VhcmNoSW5wdXQodmlldyk7XG4gICAgICAgIGlmIChzZWFyY2hJbnB1dCAmJiBzZWFyY2hJbnB1dCAhPSB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gZGVmYXVsdFF1ZXJ5KHZpZXcuc3RhdGUsIHN0YXRlLnF1ZXJ5LnNwZWMpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5LnZhbGlkKVxuICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRTZWFyY2hRdWVyeS5vZihxdWVyeSkgfSk7XG4gICAgICAgICAgICBzZWFyY2hJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgc2VhcmNoSW5wdXQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBbXG4gICAgICAgICAgICAgICAgdG9nZ2xlUGFuZWwub2YodHJ1ZSksXG4gICAgICAgICAgICAgICAgc3RhdGUgPyBzZXRTZWFyY2hRdWVyeS5vZihkZWZhdWx0UXVlcnkodmlldy5zdGF0ZSwgc3RhdGUucXVlcnkuc3BlYykpIDogU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKHNlYXJjaEV4dGVuc2lvbnMpXG4gICAgICAgICAgICBdIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkNsb3NlIHRoZSBzZWFyY2ggcGFuZWwuXG4qL1xuY29uc3QgY2xvc2VTZWFyY2hQYW5lbCA9IHZpZXcgPT4ge1xuICAgIGxldCBzdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS5wYW5lbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIGNyZWF0ZVNlYXJjaFBhbmVsKTtcbiAgICBpZiAocGFuZWwgJiYgcGFuZWwuZG9tLmNvbnRhaW5zKHZpZXcucm9vdC5hY3RpdmVFbGVtZW50KSlcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0b2dnbGVQYW5lbC5vZihmYWxzZSkgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5EZWZhdWx0IHNlYXJjaC1yZWxhdGVkIGtleSBiaW5kaW5ncy5cblxuIC0gTW9kLWY6IFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKVxuIC0gRjMsIE1vZC1nOiBbYGZpbmROZXh0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZmluZE5leHQpXG4gLSBTaGlmdC1GMywgU2hpZnQtTW9kLWc6IFtgZmluZFByZXZpb3VzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZmluZFByZXZpb3VzKVxuIC0gTW9kLUFsdC1nOiBbYGdvdG9MaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZ290b0xpbmUpXG4gLSBNb2QtZDogW2BzZWxlY3ROZXh0T2NjdXJyZW5jZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLnNlbGVjdE5leHRPY2N1cnJlbmNlKVxuKi9cbmNvbnN0IHNlYXJjaEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJNb2QtZlwiLCBydW46IG9wZW5TZWFyY2hQYW5lbCwgc2NvcGU6IFwiZWRpdG9yIHNlYXJjaC1wYW5lbFwiIH0sXG4gICAgeyBrZXk6IFwiRjNcIiwgcnVuOiBmaW5kTmV4dCwgc2hpZnQ6IGZpbmRQcmV2aW91cywgc2NvcGU6IFwiZWRpdG9yIHNlYXJjaC1wYW5lbFwiLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1nXCIsIHJ1bjogZmluZE5leHQsIHNoaWZ0OiBmaW5kUHJldmlvdXMsIHNjb3BlOiBcImVkaXRvciBzZWFyY2gtcGFuZWxcIiwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBjbG9zZVNlYXJjaFBhbmVsLCBzY29wZTogXCJlZGl0b3Igc2VhcmNoLXBhbmVsXCIgfSxcbiAgICB7IGtleTogXCJNb2QtU2hpZnQtbFwiLCBydW46IHNlbGVjdFNlbGVjdGlvbk1hdGNoZXMgfSxcbiAgICB7IGtleTogXCJNb2QtQWx0LWdcIiwgcnVuOiBnb3RvTGluZSB9LFxuICAgIHsga2V5OiBcIk1vZC1kXCIsIHJ1bjogc2VsZWN0TmV4dE9jY3VycmVuY2UsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG5dO1xuY2xhc3MgU2VhcmNoUGFuZWwge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyeSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUpLnF1ZXJ5LnNwZWM7XG4gICAgICAgIHRoaXMuY29tbWl0ID0gdGhpcy5jb21taXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZCA9IGVsdChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBxdWVyeS5zZWFyY2gsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogcGhyYXNlKHZpZXcsIFwiRmluZFwiKSxcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBwaHJhc2UodmlldywgXCJGaW5kXCIpLFxuICAgICAgICAgICAgY2xhc3M6IFwiY20tdGV4dGZpZWxkXCIsXG4gICAgICAgICAgICBuYW1lOiBcInNlYXJjaFwiLFxuICAgICAgICAgICAgZm9ybTogXCJcIixcbiAgICAgICAgICAgIFwibWFpbi1maWVsZFwiOiBcInRydWVcIixcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdCxcbiAgICAgICAgICAgIG9ua2V5dXA6IHRoaXMuY29tbWl0XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlcGxhY2VGaWVsZCA9IGVsdChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBxdWVyeS5yZXBsYWNlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHBocmFzZSh2aWV3LCBcIlJlcGxhY2VcIiksXG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogcGhyYXNlKHZpZXcsIFwiUmVwbGFjZVwiKSxcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLXRleHRmaWVsZFwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICBmb3JtOiBcIlwiLFxuICAgICAgICAgICAgb25jaGFuZ2U6IHRoaXMuY29tbWl0LFxuICAgICAgICAgICAgb25rZXl1cDogdGhpcy5jb21taXRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FzZUZpZWxkID0gZWx0KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgbmFtZTogXCJjYXNlXCIsXG4gICAgICAgICAgICBmb3JtOiBcIlwiLFxuICAgICAgICAgICAgY2hlY2tlZDogcXVlcnkuY2FzZVNlbnNpdGl2ZSxcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZUZpZWxkID0gZWx0KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZVwiLFxuICAgICAgICAgICAgZm9ybTogXCJcIixcbiAgICAgICAgICAgIGNoZWNrZWQ6IHF1ZXJ5LnJlZ2V4cCxcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53b3JkRmllbGQgPSBlbHQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICBuYW1lOiBcIndvcmRcIixcbiAgICAgICAgICAgIGZvcm06IFwiXCIsXG4gICAgICAgICAgICBjaGVja2VkOiBxdWVyeS53aG9sZVdvcmQsXG4gICAgICAgICAgICBvbmNoYW5nZTogdGhpcy5jb21taXRcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGJ1dHRvbihuYW1lLCBvbmNsaWNrLCBjb250ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIG5hbWUsIG9uY2xpY2ssIHR5cGU6IFwiYnV0dG9uXCIgfSwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20gPSBlbHQoXCJkaXZcIiwgeyBvbmtleWRvd246IChlKSA9PiB0aGlzLmtleWRvd24oZSksIGNsYXNzOiBcImNtLXNlYXJjaFwiIH0sIFtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQsXG4gICAgICAgICAgICBidXR0b24oXCJuZXh0XCIsICgpID0+IGZpbmROZXh0KHZpZXcpLCBbcGhyYXNlKHZpZXcsIFwibmV4dFwiKV0pLFxuICAgICAgICAgICAgYnV0dG9uKFwicHJldlwiLCAoKSA9PiBmaW5kUHJldmlvdXModmlldyksIFtwaHJhc2UodmlldywgXCJwcmV2aW91c1wiKV0pLFxuICAgICAgICAgICAgYnV0dG9uKFwic2VsZWN0XCIsICgpID0+IHNlbGVjdE1hdGNoZXModmlldyksIFtwaHJhc2UodmlldywgXCJhbGxcIildKSxcbiAgICAgICAgICAgIGVsdChcImxhYmVsXCIsIG51bGwsIFt0aGlzLmNhc2VGaWVsZCwgcGhyYXNlKHZpZXcsIFwibWF0Y2ggY2FzZVwiKV0pLFxuICAgICAgICAgICAgZWx0KFwibGFiZWxcIiwgbnVsbCwgW3RoaXMucmVGaWVsZCwgcGhyYXNlKHZpZXcsIFwicmVnZXhwXCIpXSksXG4gICAgICAgICAgICBlbHQoXCJsYWJlbFwiLCBudWxsLCBbdGhpcy53b3JkRmllbGQsIHBocmFzZSh2aWV3LCBcImJ5IHdvcmRcIildKSxcbiAgICAgICAgICAgIC4uLnZpZXcuc3RhdGUucmVhZE9ubHkgPyBbXSA6IFtcbiAgICAgICAgICAgICAgICBlbHQoXCJiclwiKSxcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VGaWVsZCxcbiAgICAgICAgICAgICAgICBidXR0b24oXCJyZXBsYWNlXCIsICgpID0+IHJlcGxhY2VOZXh0KHZpZXcpLCBbcGhyYXNlKHZpZXcsIFwicmVwbGFjZVwiKV0pLFxuICAgICAgICAgICAgICAgIGJ1dHRvbihcInJlcGxhY2VBbGxcIiwgKCkgPT4gcmVwbGFjZUFsbCh2aWV3KSwgW3BocmFzZSh2aWV3LCBcInJlcGxhY2UgYWxsXCIpXSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlbHQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xvc2VcIixcbiAgICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiBjbG9zZVNlYXJjaFBhbmVsKHZpZXcpLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBwaHJhc2UodmlldywgXCJjbG9zZVwiKSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgICAgICAgICB9LCBbXCLDl1wiXSlcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gbmV3IFNlYXJjaFF1ZXJ5KHtcbiAgICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSxcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmU6IHRoaXMuY2FzZUZpZWxkLmNoZWNrZWQsXG4gICAgICAgICAgICByZWdleHA6IHRoaXMucmVGaWVsZC5jaGVja2VkLFxuICAgICAgICAgICAgd2hvbGVXb3JkOiB0aGlzLndvcmRGaWVsZC5jaGVja2VkLFxuICAgICAgICAgICAgcmVwbGFjZTogdGhpcy5yZXBsYWNlRmllbGQudmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXF1ZXJ5LmVxKHRoaXMucXVlcnkpKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRTZWFyY2hRdWVyeS5vZihxdWVyeSkgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAga2V5ZG93bihlKSB7XG4gICAgICAgIGlmIChydW5TY29wZUhhbmRsZXJzKHRoaXMudmlldywgZSwgXCJzZWFyY2gtcGFuZWxcIikpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMgJiYgZS50YXJnZXQgPT0gdGhpcy5zZWFyY2hGaWVsZCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgKGUuc2hpZnRLZXkgPyBmaW5kUHJldmlvdXMgOiBmaW5kTmV4dCkodGhpcy52aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMgJiYgZS50YXJnZXQgPT0gdGhpcy5yZXBsYWNlRmllbGQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJlcGxhY2VOZXh0KHRoaXMudmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBmb3IgKGxldCB0ciBvZiB1cGRhdGUudHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldFNlYXJjaFF1ZXJ5KSAmJiAhZWZmZWN0LnZhbHVlLmVxKHRoaXMucXVlcnkpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFF1ZXJ5KGVmZmVjdC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSA9IHF1ZXJ5LnNlYXJjaDtcbiAgICAgICAgdGhpcy5yZXBsYWNlRmllbGQudmFsdWUgPSBxdWVyeS5yZXBsYWNlO1xuICAgICAgICB0aGlzLmNhc2VGaWVsZC5jaGVja2VkID0gcXVlcnkuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5yZUZpZWxkLmNoZWNrZWQgPSBxdWVyeS5yZWdleHA7XG4gICAgICAgIHRoaXMud29yZEZpZWxkLmNoZWNrZWQgPSBxdWVyeS53aG9sZVdvcmQ7XG4gICAgfVxuICAgIG1vdW50KCkge1xuICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnNlbGVjdCgpO1xuICAgIH1cbiAgICBnZXQgcG9zKCkgeyByZXR1cm4gODA7IH1cbiAgICBnZXQgdG9wKCkgeyByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KS50b3A7IH1cbn1cbmZ1bmN0aW9uIHBocmFzZSh2aWV3LCBwaHJhc2UpIHsgcmV0dXJuIHZpZXcuc3RhdGUucGhyYXNlKHBocmFzZSk7IH1cbmNvbnN0IEFubm91bmNlTWFyZ2luID0gMzA7XG5jb25zdCBCcmVhayA9IC9bXFxzXFwuLDo7PyFdLztcbmZ1bmN0aW9uIGFubm91bmNlTWF0Y2godmlldywgeyBmcm9tLCB0byB9KSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSksIGxpbmVFbmQgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQodG8pLnRvO1xuICAgIGxldCBzdGFydCA9IE1hdGgubWF4KGxpbmUuZnJvbSwgZnJvbSAtIEFubm91bmNlTWFyZ2luKSwgZW5kID0gTWF0aC5taW4obGluZUVuZCwgdG8gKyBBbm5vdW5jZU1hcmdpbik7XG4gICAgbGV0IHRleHQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKHN0YXJ0LCBlbmQpO1xuICAgIGlmIChzdGFydCAhPSBsaW5lLmZyb20pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBbm5vdW5jZU1hcmdpbjsgaSsrKVxuICAgICAgICAgICAgaWYgKCFCcmVhay50ZXN0KHRleHRbaSArIDFdKSAmJiBCcmVhay50ZXN0KHRleHRbaV0pKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoaSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlbmQgIT0gbGluZUVuZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gdGV4dC5sZW5ndGggLSAxOyBpID4gdGV4dC5sZW5ndGggLSBBbm5vdW5jZU1hcmdpbjsgaS0tKVxuICAgICAgICAgICAgaWYgKCFCcmVhay50ZXN0KHRleHRbaSAtIDFdKSAmJiBCcmVhay50ZXN0KHRleHRbaV0pKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBFZGl0b3JWaWV3LmFubm91bmNlLm9mKGAke3ZpZXcuc3RhdGUucGhyYXNlKFwiY3VycmVudCBtYXRjaFwiKX0uICR7dGV4dH0gJHt2aWV3LnN0YXRlLnBocmFzZShcIm9uIGxpbmVcIil9ICR7bGluZS5udW1iZXJ9LmApO1xufVxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS1wYW5lbC5jbS1zZWFyY2hcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjJweCA2cHggNHB4XCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIFwiJiBbbmFtZT1jbG9zZV1cIjoge1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgICByaWdodDogXCI0cHhcIixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgZm9udDogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgbWFyZ2luOiAwXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBpbnB1dCwgJiBidXR0b24sICYgbGFiZWxcIjoge1xuICAgICAgICAgICAgbWFyZ2luOiBcIi4yZW0gLjZlbSAuMmVtIDBcIlxuICAgICAgICB9LFxuICAgICAgICBcIiYgaW5wdXRbdHlwZT1jaGVja2JveF1cIjoge1xuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IFwiLjJlbVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBsYWJlbFwiOiB7XG4gICAgICAgICAgICBmb250U2l6ZTogXCI4MCVcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXNlYXJjaE1hdGNoXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmMDA1NFwiIH0sXG4gICAgXCImZGFyayAuY20tc2VhcmNoTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwZmZmZjhhXCIgfSxcbiAgICBcIiZsaWdodCAuY20tc2VhcmNoTWF0Y2gtc2VsZWN0ZWRcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmNmEwMDU0XCIgfSxcbiAgICBcIiZkYXJrIC5jbS1zZWFyY2hNYXRjaC1zZWxlY3RlZFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjZmYwMGZmOGFcIiB9XG59KTtcbmNvbnN0IHNlYXJjaEV4dGVuc2lvbnMgPSBbXG4gICAgc2VhcmNoU3RhdGUsXG4gICAgLypAX19QVVJFX18qL1ByZWMubG93KHNlYXJjaEhpZ2hsaWdodGVyKSxcbiAgICBiYXNlVGhlbWVcbl07XG5cbmV4cG9ydCB7IFJlZ0V4cEN1cnNvciwgU2VhcmNoQ3Vyc29yLCBTZWFyY2hRdWVyeSwgY2xvc2VTZWFyY2hQYW5lbCwgZmluZE5leHQsIGZpbmRQcmV2aW91cywgZ2V0U2VhcmNoUXVlcnksIGdvdG9MaW5lLCBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzLCBvcGVuU2VhcmNoUGFuZWwsIHJlcGxhY2VBbGwsIHJlcGxhY2VOZXh0LCBzZWFyY2gsIHNlYXJjaEtleW1hcCwgc2VhcmNoUGFuZWxPcGVuLCBzZWxlY3RNYXRjaGVzLCBzZWxlY3ROZXh0T2NjdXJyZW5jZSwgc2VsZWN0U2VsZWN0aW9uTWF0Y2hlcywgc2V0U2VhcmNoUXVlcnkgfTtcbiIsCiAgICAiaW1wb3J0IHsgQW5ub3RhdGlvbiwgU3RhdGVFZmZlY3QsIEVkaXRvclNlbGVjdGlvbiwgY29kZVBvaW50QXQsIGNvZGVQb2ludFNpemUsIGZyb21Db2RlUG9pbnQsIEZhY2V0LCBjb21iaW5lQ29uZmlnLCBTdGF0ZUZpZWxkLCBQcmVjLCBUZXh0LCBUcmFuc2FjdGlvbiwgTWFwTW9kZSwgUmFuZ2VWYWx1ZSwgUmFuZ2VTZXQsIENoYXJDYXRlZ29yeSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IERpcmVjdGlvbiwgbG9nRXhjZXB0aW9uLCBzaG93VG9vbHRpcCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgZ2V0VG9vbHRpcCwgRGVjb3JhdGlvbiwgV2lkZ2V0VHlwZSwga2V5bWFwIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBzeW50YXhUcmVlLCBpbmRlbnRVbml0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuXG4vKipcbkFuIGluc3RhbmNlIG9mIHRoaXMgaXMgcGFzc2VkIHRvIGNvbXBsZXRpb24gc291cmNlIGZ1bmN0aW9ucy5cbiovXG5jbGFzcyBDb21wbGV0aW9uQ29udGV4dCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGNvbXBsZXRpb24gY29udGV4dC4gKE1vc3RseSB1c2VmdWwgZm9yIHRlc3RpbmdcbiAgICBjb21wbGV0aW9uIHNvdXJjZXPigJRpbiB0aGUgZWRpdG9yLCB0aGUgZXh0ZW5zaW9uIHdpbGwgY3JlYXRlXG4gICAgdGhlc2UgZm9yIHlvdS4pXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHN0YXRlIHRoYXQgdGhlIGNvbXBsZXRpb24gaGFwcGVucyBpbi5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdGhlIGNvbXBsZXRpb24gaXMgaGFwcGVuaW5nLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciBjb21wbGV0aW9uIHdhcyBhY3RpdmF0ZWQgZXhwbGljaXRseSwgb3JcbiAgICBpbXBsaWNpdGx5IGJ5IHR5cGluZy4gVGhlIHVzdWFsIHdheSB0byByZXNwb25kIHRvIHRoaXMgaXMgdG9cbiAgICBvbmx5IHJldHVybiBjb21wbGV0aW9ucyB3aGVuIGVpdGhlciB0aGVyZSBpcyBwYXJ0IG9mIGFcbiAgICBjb21wbGV0YWJsZSBlbnRpdHkgYmVmb3JlIHRoZSBjdXJzb3IsIG9yIGBleHBsaWNpdGAgaXMgdHJ1ZS5cbiAgICAqL1xuICAgIGV4cGxpY2l0LCBcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHZpZXcuIE1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGNvbnRleHQgd2FzIGNyZWF0ZWRcbiAgICBpbiBhIHNpdHVhdGlvbiB3aGVyZSB0aGVyZSBpcyBubyBzdWNoIHZpZXcgYXZhaWxhYmxlLCBzdWNoIGFzXG4gICAgaW4gc3luY2hyb25vdXMgdXBkYXRlcyB2aWFcbiAgICBbYENvbXBsZXRpb25SZXN1bHQudXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ29tcGxldGlvblJlc3VsdC51cGRhdGUpXG4gICAgb3Igd2hlbiBjYWxsZWQgYnkgdGVzdCBjb2RlLlxuICAgICovXG4gICAgdmlldykge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmV4cGxpY2l0ID0gZXhwbGljaXQ7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hYm9ydExpc3RlbmVycyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuYWJvcnRPbkRvY0NoYW5nZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGV4dGVudCwgY29udGVudCwgYW5kIChpZiB0aGVyZSBpcyBhIHRva2VuKSB0eXBlIG9mIHRoZVxuICAgIHRva2VuIGJlZm9yZSBgdGhpcy5wb3NgLlxuICAgICovXG4gICAgdG9rZW5CZWZvcmUodHlwZXMpIHtcbiAgICAgICAgbGV0IHRva2VuID0gc3ludGF4VHJlZSh0aGlzLnN0YXRlKS5yZXNvbHZlSW5uZXIodGhpcy5wb3MsIC0xKTtcbiAgICAgICAgd2hpbGUgKHRva2VuICYmIHR5cGVzLmluZGV4T2YodG9rZW4ubmFtZSkgPCAwKVxuICAgICAgICAgICAgdG9rZW4gPSB0b2tlbi5wYXJlbnQ7XG4gICAgICAgIHJldHVybiB0b2tlbiA/IHsgZnJvbTogdG9rZW4uZnJvbSwgdG86IHRoaXMucG9zLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5zdGF0ZS5zbGljZURvYyh0b2tlbi5mcm9tLCB0aGlzLnBvcyksXG4gICAgICAgICAgICB0eXBlOiB0b2tlbi50eXBlIH0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG1hdGNoIG9mIHRoZSBnaXZlbiBleHByZXNzaW9uIGRpcmVjdGx5IGJlZm9yZSB0aGVcbiAgICBjdXJzb3IuXG4gICAgKi9cbiAgICBtYXRjaEJlZm9yZShleHByKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHRoaXMucG9zKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgobGluZS5mcm9tLCB0aGlzLnBvcyAtIDI1MCk7XG4gICAgICAgIGxldCBzdHIgPSBsaW5lLnRleHQuc2xpY2Uoc3RhcnQgLSBsaW5lLmZyb20sIHRoaXMucG9zIC0gbGluZS5mcm9tKTtcbiAgICAgICAgbGV0IGZvdW5kID0gc3RyLnNlYXJjaChlbnN1cmVBbmNob3IoZXhwciwgZmFsc2UpKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kIDwgMCA/IG51bGwgOiB7IGZyb206IHN0YXJ0ICsgZm91bmQsIHRvOiB0aGlzLnBvcywgdGV4dDogc3RyLnNsaWNlKGZvdW5kKSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBZaWVsZHMgdHJ1ZSB3aGVuIHRoZSBxdWVyeSBoYXMgYmVlbiBhYm9ydGVkLiBDYW4gYmUgdXNlZnVsIGluXG4gICAgYXN5bmNocm9ub3VzIHF1ZXJpZXMgdG8gYXZvaWQgZG9pbmcgd29yayB0aGF0IHdpbGwgYmUgaWdub3JlZC5cbiAgICAqL1xuICAgIGdldCBhYm9ydGVkKCkgeyByZXR1cm4gdGhpcy5hYm9ydExpc3RlbmVycyA9PSBudWxsOyB9XG4gICAgLyoqXG4gICAgQWxsb3dzIHlvdSB0byByZWdpc3RlciBhYm9ydCBoYW5kbGVycywgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlblxuICAgIHRoZSBxdWVyeSBpc1xuICAgIFthYm9ydGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5Db21wbGV0aW9uQ29udGV4dC5hYm9ydGVkKS5cbiAgICBcbiAgICBCeSBkZWZhdWx0LCBydW5uaW5nIHF1ZXJpZXMgd2lsbCBub3QgYmUgYWJvcnRlZCBmb3IgcmVndWxhclxuICAgIHR5cGluZyBvciBiYWNrc3BhY2luZywgb24gdGhlIGFzc3VtcHRpb24gdGhhdCB0aGV5IGFyZSBsaWtlbHkgdG9cbiAgICByZXR1cm4gYSByZXN1bHQgd2l0aCBhXG4gICAgW2B2YWxpZEZvcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLkNvbXBsZXRpb25SZXN1bHQudmFsaWRGb3IpIGZpZWxkIHRoYXRcbiAgICBhbGxvd3MgdGhlIHJlc3VsdCB0byBiZSB1c2VkIGFmdGVyIGFsbC4gUGFzc2luZyBgb25Eb2NDaGFuZ2U6XG4gICAgdHJ1ZWAgd2lsbCBjYXVzZSB0aGlzIHF1ZXJ5IHRvIGJlIGFib3J0ZWQgZm9yIGFueSBkb2N1bWVudFxuICAgIGNoYW5nZS5cbiAgICAqL1xuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhYm9ydFwiICYmIHRoaXMuYWJvcnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvcnRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9uRG9jQ2hhbmdlKVxuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRPbkRvY0NoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0b1NldChjaGFycykge1xuICAgIGxldCBmbGF0ID0gT2JqZWN0LmtleXMoY2hhcnMpLmpvaW4oXCJcIik7XG4gICAgbGV0IHdvcmRzID0gL1xcdy8udGVzdChmbGF0KTtcbiAgICBpZiAod29yZHMpXG4gICAgICAgIGZsYXQgPSBmbGF0LnJlcGxhY2UoL1xcdy9nLCBcIlwiKTtcbiAgICByZXR1cm4gYFske3dvcmRzID8gXCJcXFxcd1wiIDogXCJcIn0ke2ZsYXQucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXFxcXCQmXCIpfV1gO1xufVxuZnVuY3Rpb24gcHJlZml4TWF0Y2gob3B0aW9ucykge1xuICAgIGxldCBmaXJzdCA9IE9iamVjdC5jcmVhdGUobnVsbCksIHJlc3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHsgbGFiZWwgfSBvZiBvcHRpb25zKSB7XG4gICAgICAgIGZpcnN0W2xhYmVsWzBdXSA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGFiZWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICByZXN0W2xhYmVsW2ldXSA9IHRydWU7XG4gICAgfVxuICAgIGxldCBzb3VyY2UgPSB0b1NldChmaXJzdCkgKyB0b1NldChyZXN0KSArIFwiKiRcIjtcbiAgICByZXR1cm4gW25ldyBSZWdFeHAoXCJeXCIgKyBzb3VyY2UpLCBuZXcgUmVnRXhwKHNvdXJjZSldO1xufVxuLyoqXG5HaXZlbiBhIGEgZml4ZWQgYXJyYXkgb2Ygb3B0aW9ucywgcmV0dXJuIGFuIGF1dG9jb21wbGV0ZXIgdGhhdFxuY29tcGxldGVzIHRoZW0uXG4qL1xuZnVuY3Rpb24gY29tcGxldGVGcm9tTGlzdChsaXN0KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBsaXN0Lm1hcChvID0+IHR5cGVvZiBvID09IFwic3RyaW5nXCIgPyB7IGxhYmVsOiBvIH0gOiBvKTtcbiAgICBsZXQgW3ZhbGlkRm9yLCBtYXRjaF0gPSBvcHRpb25zLmV2ZXJ5KG8gPT4gL15cXHcrJC8udGVzdChvLmxhYmVsKSkgPyBbL1xcdyokLywgL1xcdyskL10gOiBwcmVmaXhNYXRjaChvcHRpb25zKTtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gY29udGV4dC5tYXRjaEJlZm9yZShtYXRjaCk7XG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBjb250ZXh0LmV4cGxpY2l0ID8geyBmcm9tOiB0b2tlbiA/IHRva2VuLmZyb20gOiBjb250ZXh0LnBvcywgb3B0aW9ucywgdmFsaWRGb3IgfSA6IG51bGw7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCB0aGUgZ2l2ZW4gY29tcGxldGlvbiBzb3VyY2Ugc28gdGhhdCBpdCB3aWxsIG9ubHkgZmlyZSB3aGVuIHRoZVxuY3Vyc29yIGlzIGluIGEgc3ludGF4IG5vZGUgd2l0aCBvbmUgb2YgdGhlIGdpdmVuIG5hbWVzLlxuKi9cbmZ1bmN0aW9uIGlmSW4obm9kZXMsIHNvdXJjZSkge1xuICAgIHJldHVybiAoY29udGV4dCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpLnJlc29sdmVJbm5lcihjb250ZXh0LnBvcywgLTEpOyBwb3M7IHBvcyA9IHBvcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChub2Rlcy5pbmRleE9mKHBvcy5uYW1lKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2UoY29udGV4dCk7XG4gICAgICAgICAgICBpZiAocG9zLnR5cGUuaXNUb3ApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCB0aGUgZ2l2ZW4gY29tcGxldGlvbiBzb3VyY2Ugc28gdGhhdCBpdCB3aWxsIG5vdCBmaXJlIHdoZW4gdGhlXG5jdXJzb3IgaXMgaW4gYSBzeW50YXggbm9kZSB3aXRoIG9uZSBvZiB0aGUgZ2l2ZW4gbmFtZXMuXG4qL1xuZnVuY3Rpb24gaWZOb3RJbihub2Rlcywgc291cmNlKSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHN5bnRheFRyZWUoY29udGV4dC5zdGF0ZSkucmVzb2x2ZUlubmVyKGNvbnRleHQucG9zLCAtMSk7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKG5vZGVzLmluZGV4T2YocG9zLm5hbWUpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocG9zLnR5cGUuaXNUb3ApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZShjb250ZXh0KTtcbiAgICB9O1xufVxuY2xhc3MgT3B0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wbGV0aW9uLCBzb3VyY2UsIG1hdGNoLCBzY29yZSkge1xuICAgICAgICB0aGlzLmNvbXBsZXRpb24gPSBjb21wbGV0aW9uO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgICAgICB0aGlzLnNjb3JlID0gc2NvcmU7XG4gICAgfVxufVxuZnVuY3Rpb24gY3VyKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tOyB9XG4vLyBNYWtlIHN1cmUgdGhlIGdpdmVuIHJlZ2V4cCBoYXMgYSAkIGF0IGl0cyBlbmQgYW5kLCBpZiBgc3RhcnRgIGlzXG4vLyB0cnVlLCBhIF4gYXQgaXRzIHN0YXJ0LlxuZnVuY3Rpb24gZW5zdXJlQW5jaG9yKGV4cHIsIHN0YXJ0KSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCB7IHNvdXJjZSB9ID0gZXhwcjtcbiAgICBsZXQgYWRkU3RhcnQgPSBzdGFydCAmJiBzb3VyY2VbMF0gIT0gXCJeXCIsIGFkZEVuZCA9IHNvdXJjZVtzb3VyY2UubGVuZ3RoIC0gMV0gIT0gXCIkXCI7XG4gICAgaWYgKCFhZGRTdGFydCAmJiAhYWRkRW5kKVxuICAgICAgICByZXR1cm4gZXhwcjtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgJHthZGRTdGFydCA/IFwiXlwiIDogXCJcIn0oPzoke3NvdXJjZX0pJHthZGRFbmQgPyBcIiRcIiA6IFwiXCJ9YCwgKF9hID0gZXhwci5mbGFncykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGV4cHIuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikpO1xufVxuLyoqXG5UaGlzIGFubm90YXRpb24gaXMgYWRkZWQgdG8gdHJhbnNhY3Rpb25zIHRoYXQgYXJlIHByb2R1Y2VkIGJ5XG5waWNraW5nIGEgY29tcGxldGlvbi5cbiovXG5jb25zdCBwaWNrZWRDb21wbGV0aW9uID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0cmFuc2FjdGlvbiBzcGVjIHdoaWNoIGluc2VydHMgYVxuY29tcGxldGlvbidzIHRleHQgaW4gdGhlIG1haW4gc2VsZWN0aW9uIHJhbmdlLCBhbmQgYW55IG90aGVyXG5zZWxlY3Rpb24gcmFuZ2UgdGhhdCBoYXMgdGhlIHNhbWUgdGV4dCBpbiBmcm9udCBvZiBpdC5cbiovXG5mdW5jdGlvbiBpbnNlcnRDb21wbGV0aW9uVGV4dChzdGF0ZSwgdGV4dCwgZnJvbSwgdG8pIHtcbiAgICBsZXQgeyBtYWluIH0gPSBzdGF0ZS5zZWxlY3Rpb24sIGZyb21PZmYgPSBmcm9tIC0gbWFpbi5mcm9tLCB0b09mZiA9IHRvIC0gbWFpbi5mcm9tO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAocmFuZ2UgIT0gbWFpbiAmJiBmcm9tICE9IHRvICYmXG4gICAgICAgICAgICBzdGF0ZS5zbGljZURvYyhyYW5nZS5mcm9tICsgZnJvbU9mZiwgcmFuZ2UuZnJvbSArIHRvT2ZmKSAhPSBzdGF0ZS5zbGljZURvYyhmcm9tLCB0bykpXG4gICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICBsZXQgbGluZXMgPSBzdGF0ZS50b1RleHQodGV4dCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmZyb20gKyBmcm9tT2ZmLCB0bzogdG8gPT0gbWFpbi5mcm9tID8gcmFuZ2UudG8gOiByYW5nZS5mcm9tICsgdG9PZmYsIGluc2VydDogbGluZXMgfSxcbiAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmZyb20gKyBmcm9tT2ZmICsgbGluZXMubGVuZ3RoKVxuICAgICAgICB9O1xuICAgIH0pKSwgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImlucHV0LmNvbXBsZXRlXCIgfSk7XG59XG5jb25zdCBTb3VyY2VDYWNoZSA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gYXNTb3VyY2Uoc291cmNlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZSkpXG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgbGV0IGtub3duID0gU291cmNlQ2FjaGUuZ2V0KHNvdXJjZSk7XG4gICAgaWYgKCFrbm93bilcbiAgICAgICAgU291cmNlQ2FjaGUuc2V0KHNvdXJjZSwga25vd24gPSBjb21wbGV0ZUZyb21MaXN0KHNvdXJjZSkpO1xuICAgIHJldHVybiBrbm93bjtcbn1cbmNvbnN0IHN0YXJ0Q29tcGxldGlvbkVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGNsb3NlQ29tcGxldGlvbkVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcblxuLy8gQSBwYXR0ZXJuIG1hdGNoZXIgZm9yIGZ1enp5IGNvbXBsZXRpb24gbWF0Y2hpbmcuIENyZWF0ZSBhbiBpbnN0YW5jZVxuLy8gb25jZSBmb3IgYSBwYXR0ZXJuLCBhbmQgdGhlbiB1c2UgdGhhdCB0byBtYXRjaCBhbnkgbnVtYmVyIG9mXG4vLyBjb21wbGV0aW9ucy5cbmNsYXNzIEZ1enp5TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICB0aGlzLmNoYXJzID0gW107XG4gICAgICAgIHRoaXMuZm9sZGVkID0gW107XG4gICAgICAgIC8vIEJ1ZmZlcnMgcmV1c2VkIGJ5IGNhbGxzIHRvIGBtYXRjaGAgdG8gdHJhY2sgbWF0Y2hlZCBjaGFyYWN0ZXJcbiAgICAgICAgLy8gcG9zaXRpb25zLlxuICAgICAgICB0aGlzLmFueSA9IFtdO1xuICAgICAgICB0aGlzLnByZWNpc2UgPSBbXTtcbiAgICAgICAgdGhpcy5ieVdvcmQgPSBbXTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMubWF0Y2hlZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHBhdHRlcm4ubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGNoYXIgPSBjb2RlUG9pbnRBdChwYXR0ZXJuLCBwKSwgc2l6ZSA9IGNvZGVQb2ludFNpemUoY2hhcik7XG4gICAgICAgICAgICB0aGlzLmNoYXJzLnB1c2goY2hhcik7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHBhdHRlcm4uc2xpY2UocCwgcCArIHNpemUpLCB1cHBlciA9IHBhcnQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuZm9sZGVkLnB1c2goY29kZVBvaW50QXQodXBwZXIgPT0gcGFydCA/IHBhcnQudG9Mb3dlckNhc2UoKSA6IHVwcGVyLCAwKSk7XG4gICAgICAgICAgICBwICs9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3RyYWwgPSBwYXR0ZXJuLmxlbmd0aCAhPSB0aGlzLmNoYXJzLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0KHNjb3JlLCBtYXRjaGVkKSB7XG4gICAgICAgIHRoaXMuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgdGhpcy5tYXRjaGVkID0gbWF0Y2hlZDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIE1hdGNoZXMgYSBnaXZlbiB3b3JkIChjb21wbGV0aW9uKSBhZ2FpbnN0IHRoZSBwYXR0ZXJuIChpbnB1dCkuXG4gICAgLy8gV2lsbCByZXR1cm4gYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGVyZSB3YXMgYSBtYXRjaCBhbmQsXG4gICAgLy8gb24gc3VjY2Vzcywgc2V0IGB0aGlzLnNjb3JlYCB0byB0aGUgc2NvcmUsIGB0aGlzLm1hdGNoZWRgIHRvIGFuXG4gICAgLy8gYXJyYXkgb2YgYGZyb20sIHRvYCBwYWlycyBpbmRpY2F0aW5nIHRoZSBtYXRjaGVkIHBhcnRzIG9mIGB3b3JkYC5cbiAgICAvL1xuICAgIC8vIFRoZSBzY29yZSBpcyBhIG51bWJlciB0aGF0IGlzIG1vcmUgbmVnYXRpdmUgdGhlIHdvcnNlIHRoZSBtYXRjaFxuICAgIC8vIGlzLiBTZWUgYFBlbmFsdHlgIGFib3ZlLlxuICAgIG1hdGNoKHdvcmQpIHtcbiAgICAgICAgaWYgKHRoaXMucGF0dGVybi5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldCgtMTAwIC8qIFBlbmFsdHkuTm90RnVsbCAqLywgW10pO1xuICAgICAgICBpZiAod29yZC5sZW5ndGggPCB0aGlzLnBhdHRlcm4ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCB7IGNoYXJzLCBmb2xkZWQsIGFueSwgcHJlY2lzZSwgYnlXb3JkIH0gPSB0aGlzO1xuICAgICAgICAvLyBGb3Igc2luZ2xlLWNoYXJhY3RlciBxdWVyaWVzLCBvbmx5IG1hdGNoIHdoZW4gdGhleSBvY2N1ciByaWdodFxuICAgICAgICAvLyBhdCB0aGUgc3RhcnRcbiAgICAgICAgaWYgKGNoYXJzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBjb2RlUG9pbnRBdCh3b3JkLCAwKSwgZmlyc3RTaXplID0gY29kZVBvaW50U2l6ZShmaXJzdCk7XG4gICAgICAgICAgICBsZXQgc2NvcmUgPSBmaXJzdFNpemUgPT0gd29yZC5sZW5ndGggPyAwIDogLTEwMCAvKiBQZW5hbHR5Lk5vdEZ1bGwgKi87XG4gICAgICAgICAgICBpZiAoZmlyc3QgPT0gY2hhcnNbMF0pIDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGZpcnN0ID09IGZvbGRlZFswXSlcbiAgICAgICAgICAgICAgICBzY29yZSArPSAtMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi87XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXQoc2NvcmUsIFswLCBmaXJzdFNpemVdKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlyZWN0ID0gd29yZC5pbmRleE9mKHRoaXMucGF0dGVybik7XG4gICAgICAgIGlmIChkaXJlY3QgPT0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldCh3b3JkLmxlbmd0aCA9PSB0aGlzLnBhdHRlcm4ubGVuZ3RoID8gMCA6IC0xMDAgLyogUGVuYWx0eS5Ob3RGdWxsICovLCBbMCwgdGhpcy5wYXR0ZXJuLmxlbmd0aF0pO1xuICAgICAgICBsZXQgbGVuID0gY2hhcnMubGVuZ3RoLCBhbnlUbyA9IDA7XG4gICAgICAgIGlmIChkaXJlY3QgPCAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgZSA9IE1hdGgubWluKHdvcmQubGVuZ3RoLCAyMDApOyBpIDwgZSAmJiBhbnlUbyA8IGxlbjspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGNvZGVQb2ludEF0KHdvcmQsIGkpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0ID09IGNoYXJzW2FueVRvXSB8fCBuZXh0ID09IGZvbGRlZFthbnlUb10pXG4gICAgICAgICAgICAgICAgICAgIGFueVthbnlUbysrXSA9IGk7XG4gICAgICAgICAgICAgICAgaSArPSBjb2RlUG9pbnRTaXplKG5leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm8gbWF0Y2gsIGV4aXQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChhbnlUbyA8IGxlbilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIHRyYWNrcyB0aGUgZXh0ZW50IG9mIHRoZSBwcmVjaXNlIChub24tZm9sZGVkLCBub3RcbiAgICAgICAgLy8gbmVjZXNzYXJpbHkgYWRqYWNlbnQpIG1hdGNoXG4gICAgICAgIGxldCBwcmVjaXNlVG8gPSAwO1xuICAgICAgICAvLyBUcmFja3Mgd2hldGhlciB0aGVyZSBpcyBhIG1hdGNoIHRoYXQgaGl0cyBvbmx5IGNoYXJhY3RlcnMgdGhhdFxuICAgICAgICAvLyBhcHBlYXIgdG8gYmUgc3RhcnRpbmcgd29yZHMuIGBieVdvcmRGb2xkZWRgIGlzIHNldCB0byB0cnVlIHdoZW5cbiAgICAgICAgLy8gYSBjYXNlIGZvbGRlZCBjaGFyYWN0ZXIgaXMgZW5jb3VudGVyZWQgaW4gc3VjaCBhIG1hdGNoXG4gICAgICAgIGxldCBieVdvcmRUbyA9IDAsIGJ5V29yZEZvbGRlZCA9IGZhbHNlO1xuICAgICAgICAvLyBJZiB3ZSd2ZSBmb3VuZCBhIHBhcnRpYWwgYWRqYWNlbnQgbWF0Y2gsIHRoZXNlIHRyYWNrIGl0cyBzdGF0ZVxuICAgICAgICBsZXQgYWRqYWNlbnRUbyA9IDAsIGFkamFjZW50U3RhcnQgPSAtMSwgYWRqYWNlbnRFbmQgPSAtMTtcbiAgICAgICAgbGV0IGhhc0xvd2VyID0gL1thLXpdLy50ZXN0KHdvcmQpLCB3b3JkQWRqYWNlbnQgPSB0cnVlO1xuICAgICAgICAvLyBHbyBvdmVyIHRoZSBvcHRpb24ncyB0ZXh0LCBzY2FubmluZyBmb3IgdGhlIHZhcmlvdXMga2luZHMgb2YgbWF0Y2hlc1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgZSA9IE1hdGgubWluKHdvcmQubGVuZ3RoLCAyMDApLCBwcmV2VHlwZSA9IDAgLyogVHAuTm9uV29yZCAqLzsgaSA8IGUgJiYgYnlXb3JkVG8gPCBsZW47KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGNvZGVQb2ludEF0KHdvcmQsIGkpO1xuICAgICAgICAgICAgaWYgKGRpcmVjdCA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocHJlY2lzZVRvIDwgbGVuICYmIG5leHQgPT0gY2hhcnNbcHJlY2lzZVRvXSlcbiAgICAgICAgICAgICAgICAgICAgcHJlY2lzZVtwcmVjaXNlVG8rK10gPSBpO1xuICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFRvIDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID09IGNoYXJzW2FkamFjZW50VG9dIHx8IG5leHQgPT0gZm9sZGVkW2FkamFjZW50VG9dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRUbyA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50U3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRFbmQgPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50VG8rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50VG8gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNoLCB0eXBlID0gbmV4dCA8IDB4ZmZcbiAgICAgICAgICAgICAgICA/IChuZXh0ID49IDQ4ICYmIG5leHQgPD0gNTcgfHwgbmV4dCA+PSA5NyAmJiBuZXh0IDw9IDEyMiA/IDIgLyogVHAuTG93ZXIgKi8gOiBuZXh0ID49IDY1ICYmIG5leHQgPD0gOTAgPyAxIC8qIFRwLlVwcGVyICovIDogMCAvKiBUcC5Ob25Xb3JkICovKVxuICAgICAgICAgICAgICAgIDogKChjaCA9IGZyb21Db2RlUG9pbnQobmV4dCkpICE9IGNoLnRvTG93ZXJDYXNlKCkgPyAxIC8qIFRwLlVwcGVyICovIDogY2ggIT0gY2gudG9VcHBlckNhc2UoKSA/IDIgLyogVHAuTG93ZXIgKi8gOiAwIC8qIFRwLk5vbldvcmQgKi8pO1xuICAgICAgICAgICAgaWYgKCFpIHx8IHR5cGUgPT0gMSAvKiBUcC5VcHBlciAqLyAmJiBoYXNMb3dlciB8fCBwcmV2VHlwZSA9PSAwIC8qIFRwLk5vbldvcmQgKi8gJiYgdHlwZSAhPSAwIC8qIFRwLk5vbldvcmQgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnNbYnlXb3JkVG9dID09IG5leHQgfHwgKGZvbGRlZFtieVdvcmRUb10gPT0gbmV4dCAmJiAoYnlXb3JkRm9sZGVkID0gdHJ1ZSkpKVxuICAgICAgICAgICAgICAgICAgICBieVdvcmRbYnlXb3JkVG8rK10gPSBpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ5V29yZC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHdvcmRBZGphY2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldlR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgaSArPSBjb2RlUG9pbnRTaXplKG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChieVdvcmRUbyA9PSBsZW4gJiYgYnlXb3JkWzBdID09IDAgJiYgd29yZEFkamFjZW50KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0KC0xMDAgLyogUGVuYWx0eS5CeVdvcmQgKi8gKyAoYnlXb3JkRm9sZGVkID8gLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIDogMCksIGJ5V29yZCwgd29yZCk7XG4gICAgICAgIGlmIChhZGphY2VudFRvID09IGxlbiAmJiBhZGphY2VudFN0YXJ0ID09IDApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXQoLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIC0gd29yZC5sZW5ndGggKyAoYWRqYWNlbnRFbmQgPT0gd29yZC5sZW5ndGggPyAwIDogLTEwMCAvKiBQZW5hbHR5Lk5vdEZ1bGwgKi8pLCBbMCwgYWRqYWNlbnRFbmRdKTtcbiAgICAgICAgaWYgKGRpcmVjdCA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0KC03MDAgLyogUGVuYWx0eS5Ob3RTdGFydCAqLyAtIHdvcmQubGVuZ3RoLCBbZGlyZWN0LCBkaXJlY3QgKyB0aGlzLnBhdHRlcm4ubGVuZ3RoXSk7XG4gICAgICAgIGlmIChhZGphY2VudFRvID09IGxlbilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldCgtMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi8gKyAtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gLSB3b3JkLmxlbmd0aCwgW2FkamFjZW50U3RhcnQsIGFkamFjZW50RW5kXSk7XG4gICAgICAgIGlmIChieVdvcmRUbyA9PSBsZW4pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQoLTEwMCAvKiBQZW5hbHR5LkJ5V29yZCAqLyArIChieVdvcmRGb2xkZWQgPyAtMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi8gOiAwKSArIC03MDAgLyogUGVuYWx0eS5Ob3RTdGFydCAqLyArXG4gICAgICAgICAgICAgICAgKHdvcmRBZGphY2VudCA/IDAgOiAtMTEwMCAvKiBQZW5hbHR5LkdhcCAqLyksIGJ5V29yZCwgd29yZCk7XG4gICAgICAgIHJldHVybiBjaGFycy5sZW5ndGggPT0gMiA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5yZXN1bHQoKGFueVswXSA/IC03MDAgLyogUGVuYWx0eS5Ob3RTdGFydCAqLyA6IDApICsgLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovICsgLTExMDAgLyogUGVuYWx0eS5HYXAgKi8sIGFueSwgd29yZCk7XG4gICAgfVxuICAgIHJlc3VsdChzY29yZSwgcG9zaXRpb25zLCB3b3JkKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgaSA9IDA7XG4gICAgICAgIGZvciAobGV0IHBvcyBvZiBwb3NpdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCB0byA9IHBvcyArICh0aGlzLmFzdHJhbCA/IGNvZGVQb2ludFNpemUoY29kZVBvaW50QXQod29yZCwgcG9zKSkgOiAxKTtcbiAgICAgICAgICAgIGlmIChpICYmIHJlc3VsdFtpIC0gMV0gPT0gcG9zKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtpIC0gMV0gPSB0bztcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpKytdID0gcG9zO1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpKytdID0gdG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmV0KHNjb3JlIC0gd29yZC5sZW5ndGgsIHJlc3VsdCk7XG4gICAgfVxufVxuY2xhc3MgU3RyaWN0TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICB0aGlzLm1hdGNoZWQgPSBbXTtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIHRoaXMuZm9sZGVkID0gcGF0dGVybi50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBtYXRjaCh3b3JkKSB7XG4gICAgICAgIGlmICh3b3JkLmxlbmd0aCA8IHRoaXMucGF0dGVybi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHN0YXJ0ID0gd29yZC5zbGljZSgwLCB0aGlzLnBhdHRlcm4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IG1hdGNoID0gc3RhcnQgPT0gdGhpcy5wYXR0ZXJuID8gMCA6IHN0YXJ0LnRvTG93ZXJDYXNlKCkgPT0gdGhpcy5mb2xkZWQgPyAtMjAwIC8qIFBlbmFsdHkuQ2FzZUZvbGQgKi8gOiBudWxsO1xuICAgICAgICBpZiAobWF0Y2ggPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB0aGlzLm1hdGNoZWQgPSBbMCwgc3RhcnQubGVuZ3RoXTtcbiAgICAgICAgdGhpcy5zY29yZSA9IG1hdGNoICsgKHdvcmQubGVuZ3RoID09IHRoaXMucGF0dGVybi5sZW5ndGggPyAwIDogLTEwMCAvKiBQZW5hbHR5Lk5vdEZ1bGwgKi8pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbmNvbnN0IGNvbXBsZXRpb25Db25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgYWN0aXZhdGVPblR5cGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGFjdGl2YXRlT25Db21wbGV0aW9uOiAoKSA9PiBmYWxzZSxcbiAgICAgICAgICAgIGFjdGl2YXRlT25UeXBpbmdEZWxheTogMTAwLFxuICAgICAgICAgICAgc2VsZWN0T25PcGVuOiB0cnVlLFxuICAgICAgICAgICAgb3ZlcnJpZGU6IG51bGwsXG4gICAgICAgICAgICBjbG9zZU9uQmx1cjogdHJ1ZSxcbiAgICAgICAgICAgIG1heFJlbmRlcmVkT3B0aW9uczogMTAwLFxuICAgICAgICAgICAgZGVmYXVsdEtleW1hcDogdHJ1ZSxcbiAgICAgICAgICAgIHRvb2x0aXBDbGFzczogKCkgPT4gXCJcIixcbiAgICAgICAgICAgIG9wdGlvbkNsYXNzOiAoKSA9PiBcIlwiLFxuICAgICAgICAgICAgYWJvdmVDdXJzb3I6IGZhbHNlLFxuICAgICAgICAgICAgaWNvbnM6IHRydWUsXG4gICAgICAgICAgICBhZGRUb09wdGlvbnM6IFtdLFxuICAgICAgICAgICAgcG9zaXRpb25JbmZvOiBkZWZhdWx0UG9zaXRpb25JbmZvLFxuICAgICAgICAgICAgZmlsdGVyU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIGNvbXBhcmVDb21wbGV0aW9uczogKGEsIGIpID0+IGEubGFiZWwubG9jYWxlQ29tcGFyZShiLmxhYmVsKSxcbiAgICAgICAgICAgIGludGVyYWN0aW9uRGVsYXk6IDc1LFxuICAgICAgICAgICAgdXBkYXRlU3luY1RpbWU6IDEwMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0S2V5bWFwOiAoYSwgYikgPT4gYSAmJiBiLFxuICAgICAgICAgICAgY2xvc2VPbkJsdXI6IChhLCBiKSA9PiBhICYmIGIsXG4gICAgICAgICAgICBpY29uczogKGEsIGIpID0+IGEgJiYgYixcbiAgICAgICAgICAgIHRvb2x0aXBDbGFzczogKGEsIGIpID0+IGMgPT4gam9pbkNsYXNzKGEoYyksIGIoYykpLFxuICAgICAgICAgICAgb3B0aW9uQ2xhc3M6IChhLCBiKSA9PiBjID0+IGpvaW5DbGFzcyhhKGMpLCBiKGMpKSxcbiAgICAgICAgICAgIGFkZFRvT3B0aW9uczogKGEsIGIpID0+IGEuY29uY2F0KGIpLFxuICAgICAgICAgICAgZmlsdGVyU3RyaWN0OiAoYSwgYikgPT4gYSB8fCBiLFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbmZ1bmN0aW9uIGpvaW5DbGFzcyhhLCBiKSB7XG4gICAgcmV0dXJuIGEgPyBiID8gYSArIFwiIFwiICsgYiA6IGEgOiBiO1xufVxuZnVuY3Rpb24gZGVmYXVsdFBvc2l0aW9uSW5mbyh2aWV3LCBsaXN0LCBvcHRpb24sIGluZm8sIHNwYWNlLCB0b29sdGlwKSB7XG4gICAgbGV0IHJ0bCA9IHZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uUlRMLCBsZWZ0ID0gcnRsLCBuYXJyb3cgPSBmYWxzZTtcbiAgICBsZXQgc2lkZSA9IFwidG9wXCIsIG9mZnNldCwgbWF4V2lkdGg7XG4gICAgbGV0IHNwYWNlTGVmdCA9IGxpc3QubGVmdCAtIHNwYWNlLmxlZnQsIHNwYWNlUmlnaHQgPSBzcGFjZS5yaWdodCAtIGxpc3QucmlnaHQ7XG4gICAgbGV0IGluZm9XaWR0aCA9IGluZm8ucmlnaHQgLSBpbmZvLmxlZnQsIGluZm9IZWlnaHQgPSBpbmZvLmJvdHRvbSAtIGluZm8udG9wO1xuICAgIGlmIChsZWZ0ICYmIHNwYWNlTGVmdCA8IE1hdGgubWluKGluZm9XaWR0aCwgc3BhY2VSaWdodCkpXG4gICAgICAgIGxlZnQgPSBmYWxzZTtcbiAgICBlbHNlIGlmICghbGVmdCAmJiBzcGFjZVJpZ2h0IDwgTWF0aC5taW4oaW5mb1dpZHRoLCBzcGFjZUxlZnQpKVxuICAgICAgICBsZWZ0ID0gdHJ1ZTtcbiAgICBpZiAoaW5mb1dpZHRoIDw9IChsZWZ0ID8gc3BhY2VMZWZ0IDogc3BhY2VSaWdodCkpIHtcbiAgICAgICAgb2Zmc2V0ID0gTWF0aC5tYXgoc3BhY2UudG9wLCBNYXRoLm1pbihvcHRpb24udG9wLCBzcGFjZS5ib3R0b20gLSBpbmZvSGVpZ2h0KSkgLSBsaXN0LnRvcDtcbiAgICAgICAgbWF4V2lkdGggPSBNYXRoLm1pbig0MDAgLyogSW5mby5XaWR0aCAqLywgbGVmdCA/IHNwYWNlTGVmdCA6IHNwYWNlUmlnaHQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmFycm93ID0gdHJ1ZTtcbiAgICAgICAgbWF4V2lkdGggPSBNYXRoLm1pbig0MDAgLyogSW5mby5XaWR0aCAqLywgKHJ0bCA/IGxpc3QucmlnaHQgOiBzcGFjZS5yaWdodCAtIGxpc3QubGVmdCkgLSAzMCAvKiBJbmZvLk1hcmdpbiAqLyk7XG4gICAgICAgIGxldCBzcGFjZUJlbG93ID0gc3BhY2UuYm90dG9tIC0gbGlzdC5ib3R0b207XG4gICAgICAgIGlmIChzcGFjZUJlbG93ID49IGluZm9IZWlnaHQgfHwgc3BhY2VCZWxvdyA+IGxpc3QudG9wKSB7IC8vIEJlbG93IHRoZSBjb21wbGV0aW9uXG4gICAgICAgICAgICBvZmZzZXQgPSBvcHRpb24uYm90dG9tIC0gbGlzdC50b3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIEFib3ZlIGl0XG4gICAgICAgICAgICBzaWRlID0gXCJib3R0b21cIjtcbiAgICAgICAgICAgIG9mZnNldCA9IGxpc3QuYm90dG9tIC0gb3B0aW9uLnRvcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc2NhbGVZID0gKGxpc3QuYm90dG9tIC0gbGlzdC50b3ApIC8gdG9vbHRpcC5vZmZzZXRIZWlnaHQ7XG4gICAgbGV0IHNjYWxlWCA9IChsaXN0LnJpZ2h0IC0gbGlzdC5sZWZ0KSAvIHRvb2x0aXAub2Zmc2V0V2lkdGg7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3R5bGU6IGAke3NpZGV9OiAke29mZnNldCAvIHNjYWxlWX1weDsgbWF4LXdpZHRoOiAke21heFdpZHRoIC8gc2NhbGVYfXB4YCxcbiAgICAgICAgY2xhc3M6IFwiY20tY29tcGxldGlvbkluZm8tXCIgKyAobmFycm93ID8gKHJ0bCA/IFwibGVmdC1uYXJyb3dcIiA6IFwicmlnaHQtbmFycm93XCIpIDogbGVmdCA/IFwibGVmdFwiIDogXCJyaWdodFwiKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIG9wdGlvbkNvbnRlbnQoY29uZmlnKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBjb25maWcuYWRkVG9PcHRpb25zLnNsaWNlKCk7XG4gICAgaWYgKGNvbmZpZy5pY29ucylcbiAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHJlbmRlcihjb21wbGV0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGV0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZChcImNtLWNvbXBsZXRpb25JY29uXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjb21wbGV0aW9uLnR5cGUpXG4gICAgICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCguLi5jb21wbGV0aW9uLnR5cGUuc3BsaXQoL1xccysvZykubWFwKGNscyA9PiBcImNtLWNvbXBsZXRpb25JY29uLVwiICsgY2xzKSk7XG4gICAgICAgICAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGljb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb246IDIwXG4gICAgICAgIH0pO1xuICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgIHJlbmRlcihjb21wbGV0aW9uLCBfcywgX3YsIG1hdGNoKSB7XG4gICAgICAgICAgICBsZXQgbGFiZWxFbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGxhYmVsRWx0LmNsYXNzTmFtZSA9IFwiY20tY29tcGxldGlvbkxhYmVsXCI7XG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBjb21wbGV0aW9uLmRpc3BsYXlMYWJlbCB8fCBjb21wbGV0aW9uLmxhYmVsLCBvZmYgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXRjaC5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBtYXRjaFtqKytdLCB0byA9IG1hdGNoW2orK107XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPiBvZmYpXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRWx0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhYmVsLnNsaWNlKG9mZiwgZnJvbSkpKTtcbiAgICAgICAgICAgICAgICBsZXQgc3BhbiA9IGxhYmVsRWx0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcbiAgICAgICAgICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhYmVsLnNsaWNlKGZyb20sIHRvKSkpO1xuICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS1jb21wbGV0aW9uTWF0Y2hlZFRleHRcIjtcbiAgICAgICAgICAgICAgICBvZmYgPSB0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmYgPCBsYWJlbC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgbGFiZWxFbHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGFiZWwuc2xpY2Uob2ZmKSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsRWx0O1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjogNTBcbiAgICB9LCB7XG4gICAgICAgIHJlbmRlcihjb21wbGV0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIWNvbXBsZXRpb24uZGV0YWlsKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbGV0IGRldGFpbEVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgZGV0YWlsRWx0LmNsYXNzTmFtZSA9IFwiY20tY29tcGxldGlvbkRldGFpbFwiO1xuICAgICAgICAgICAgZGV0YWlsRWx0LnRleHRDb250ZW50ID0gY29tcGxldGlvbi5kZXRhaWw7XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlsRWx0O1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjogODBcbiAgICB9KTtcbiAgICByZXR1cm4gY29udGVudC5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbikubWFwKGEgPT4gYS5yZW5kZXIpO1xufVxuZnVuY3Rpb24gcmFuZ2VBcm91bmRTZWxlY3RlZCh0b3RhbCwgc2VsZWN0ZWQsIG1heCkge1xuICAgIGlmICh0b3RhbCA8PSBtYXgpXG4gICAgICAgIHJldHVybiB7IGZyb206IDAsIHRvOiB0b3RhbCB9O1xuICAgIGlmIChzZWxlY3RlZCA8IDApXG4gICAgICAgIHNlbGVjdGVkID0gMDtcbiAgICBpZiAoc2VsZWN0ZWQgPD0gKHRvdGFsID4+IDEpKSB7XG4gICAgICAgIGxldCBvZmYgPSBNYXRoLmZsb29yKHNlbGVjdGVkIC8gbWF4KTtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogb2ZmICogbWF4LCB0bzogKG9mZiArIDEpICogbWF4IH07XG4gICAgfVxuICAgIGxldCBvZmYgPSBNYXRoLmZsb29yKCh0b3RhbCAtIHNlbGVjdGVkKSAvIG1heCk7XG4gICAgcmV0dXJuIHsgZnJvbTogdG90YWwgLSAob2ZmICsgMSkgKiBtYXgsIHRvOiB0b3RhbCAtIG9mZiAqIG1heCB9O1xufVxuY2xhc3MgQ29tcGxldGlvblRvb2x0aXAge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXRlRmllbGQsIGFwcGx5Q29tcGxldGlvbikge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnN0YXRlRmllbGQgPSBzdGF0ZUZpZWxkO1xuICAgICAgICB0aGlzLmFwcGx5Q29tcGxldGlvbiA9IGFwcGx5Q29tcGxldGlvbjtcbiAgICAgICAgdGhpcy5pbmZvID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmZvRGVzdHJveSA9IG51bGw7XG4gICAgICAgIHRoaXMucGxhY2VJbmZvUmVxID0ge1xuICAgICAgICAgICAgcmVhZDogKCkgPT4gdGhpcy5tZWFzdXJlSW5mbygpLFxuICAgICAgICAgICAgd3JpdGU6IChwb3MpID0+IHRoaXMucGxhY2VJbmZvKHBvcyksXG4gICAgICAgICAgICBrZXk6IHRoaXNcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zcGFjZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudENsYXNzID0gXCJcIjtcbiAgICAgICAgbGV0IGNTdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoc3RhdGVGaWVsZCk7XG4gICAgICAgIGxldCB7IG9wdGlvbnMsIHNlbGVjdGVkIH0gPSBjU3RhdGUub3BlbjtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZyk7XG4gICAgICAgIHRoaXMub3B0aW9uQ29udGVudCA9IG9wdGlvbkNvbnRlbnQoY29uZmlnKTtcbiAgICAgICAgdGhpcy5vcHRpb25DbGFzcyA9IGNvbmZpZy5vcHRpb25DbGFzcztcbiAgICAgICAgdGhpcy50b29sdGlwQ2xhc3MgPSBjb25maWcudG9vbHRpcENsYXNzO1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VBcm91bmRTZWxlY3RlZChvcHRpb25zLmxlbmd0aCwgc2VsZWN0ZWQsIGNvbmZpZy5tYXhSZW5kZXJlZE9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tdG9vbHRpcC1hdXRvY29tcGxldGVcIjtcbiAgICAgICAgdGhpcy51cGRhdGVUb29sdGlwQ2xhc3Modmlldy5zdGF0ZSk7XG4gICAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG9wdGlvbnMgfSA9IHZpZXcuc3RhdGUuZmllbGQoc3RhdGVGaWVsZCkub3BlbjtcbiAgICAgICAgICAgIGZvciAobGV0IGRvbSA9IGUudGFyZ2V0LCBtYXRjaDsgZG9tICYmIGRvbSAhPSB0aGlzLmRvbTsgZG9tID0gZG9tLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9tLm5vZGVOYW1lID09IFwiTElcIiAmJiAobWF0Y2ggPSAvLShcXGQrKSQvLmV4ZWMoZG9tLmlkKSkgJiYgK21hdGNoWzFdIDwgb3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUNvbXBsZXRpb24odmlldywgb3B0aW9uc1srbWF0Y2hbMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgc3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKHRoaXMuc3RhdGVGaWVsZCwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLnRvb2x0aXAgJiYgdmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5jbG9zZU9uQmx1ciAmJlxuICAgICAgICAgICAgICAgIGUucmVsYXRlZFRhcmdldCAhPSB2aWV3LmNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlQ29tcGxldGlvbkVmZmVjdC5vZihudWxsKSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2hvd09wdGlvbnMob3B0aW9ucywgY1N0YXRlLmlkKTtcbiAgICB9XG4gICAgbW91bnQoKSB7IHRoaXMudXBkYXRlU2VsKCk7IH1cbiAgICBzaG93T3B0aW9ucyhvcHRpb25zLCBpZCkge1xuICAgICAgICBpZiAodGhpcy5saXN0KVxuICAgICAgICAgICAgdGhpcy5saXN0LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUxpc3RCb3gob3B0aW9ucywgaWQsIHRoaXMucmFuZ2UpKTtcbiAgICAgICAgdGhpcy5saXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5mbylcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5wbGFjZUluZm9SZXEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBjU3RhdGUgPSB1cGRhdGUuc3RhdGUuZmllbGQodGhpcy5zdGF0ZUZpZWxkKTtcbiAgICAgICAgbGV0IHByZXZTdGF0ZSA9IHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKHRoaXMuc3RhdGVGaWVsZCk7XG4gICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcENsYXNzKHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIGlmIChjU3RhdGUgIT0gcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBsZXQgeyBvcHRpb25zLCBzZWxlY3RlZCwgZGlzYWJsZWQgfSA9IGNTdGF0ZS5vcGVuO1xuICAgICAgICAgICAgaWYgKCFwcmV2U3RhdGUub3BlbiB8fCBwcmV2U3RhdGUub3Blbi5vcHRpb25zICE9IG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VBcm91bmRTZWxlY3RlZChvcHRpb25zLmxlbmd0aCwgc2VsZWN0ZWQsIHVwZGF0ZS5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5tYXhSZW5kZXJlZE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd09wdGlvbnMob3B0aW9ucywgY1N0YXRlLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsKCk7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZWQgIT0gKChfYSA9IHByZXZTdGF0ZS5vcGVuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzYWJsZWQpKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC50b2dnbGUoXCJjbS10b29sdGlwLWF1dG9jb21wbGV0ZS1kaXNhYmxlZFwiLCAhIWRpc2FibGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVUb29sdGlwQ2xhc3Moc3RhdGUpIHtcbiAgICAgICAgbGV0IGNscyA9IHRoaXMudG9vbHRpcENsYXNzKHN0YXRlKTtcbiAgICAgICAgaWYgKGNscyAhPSB0aGlzLmN1cnJlbnRDbGFzcykge1xuICAgICAgICAgICAgZm9yIChsZXQgYyBvZiB0aGlzLmN1cnJlbnRDbGFzcy5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICAgICAgaWYgKGMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICBmb3IgKGxldCBjIG9mIGNscy5zcGxpdChcIiBcIikpXG4gICAgICAgICAgICAgICAgaWYgKGMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoYyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDbGFzcyA9IGNscztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwb3NpdGlvbmVkKHNwYWNlKSB7XG4gICAgICAgIHRoaXMuc3BhY2UgPSBzcGFjZTtcbiAgICAgICAgaWYgKHRoaXMuaW5mbylcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLnBsYWNlSW5mb1JlcSk7XG4gICAgfVxuICAgIHVwZGF0ZVNlbCgpIHtcbiAgICAgICAgbGV0IGNTdGF0ZSA9IHRoaXMudmlldy5zdGF0ZS5maWVsZCh0aGlzLnN0YXRlRmllbGQpLCBvcGVuID0gY1N0YXRlLm9wZW47XG4gICAgICAgIGlmIChvcGVuLnNlbGVjdGVkID4gLTEgJiYgb3Blbi5zZWxlY3RlZCA8IHRoaXMucmFuZ2UuZnJvbSB8fCBvcGVuLnNlbGVjdGVkID49IHRoaXMucmFuZ2UudG8pIHtcbiAgICAgICAgICAgIHRoaXMucmFuZ2UgPSByYW5nZUFyb3VuZFNlbGVjdGVkKG9wZW4ub3B0aW9ucy5sZW5ndGgsIG9wZW4uc2VsZWN0ZWQsIHRoaXMudmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5tYXhSZW5kZXJlZE9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zaG93T3B0aW9ucyhvcGVuLm9wdGlvbnMsIGNTdGF0ZS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXBkYXRlU2VsZWN0ZWRPcHRpb24ob3Blbi5zZWxlY3RlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUluZm8oKTtcbiAgICAgICAgICAgIGxldCB7IGNvbXBsZXRpb24gfSA9IG9wZW4ub3B0aW9uc1tvcGVuLnNlbGVjdGVkXTtcbiAgICAgICAgICAgIGxldCB7IGluZm8gfSA9IGNvbXBsZXRpb247XG4gICAgICAgICAgICBpZiAoIWluZm8pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGluZm9SZXN1bHQgPSB0eXBlb2YgaW5mbyA9PT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGluZm8pIDogaW5mbyhjb21wbGV0aW9uKTtcbiAgICAgICAgICAgIGlmICghaW5mb1Jlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAoXCJ0aGVuXCIgaW4gaW5mb1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgIGluZm9SZXN1bHQudGhlbihvYmogPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqICYmIHRoaXMudmlldy5zdGF0ZS5maWVsZCh0aGlzLnN0YXRlRmllbGQsIGZhbHNlKSA9PSBjU3RhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEluZm9QYW5lKG9iaiwgY29tcGxldGlvbik7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZSA9PiBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlLCBcImNvbXBsZXRpb24gaW5mb1wiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEluZm9QYW5lKGluZm9SZXN1bHQsIGNvbXBsZXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEluZm9QYW5lKGNvbnRlbnQsIGNvbXBsZXRpb24pIHtcbiAgICAgICAgdGhpcy5kZXN0cm95SW5mbygpO1xuICAgICAgICBsZXQgd3JhcCA9IHRoaXMuaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJjbS10b29sdGlwIGNtLWNvbXBsZXRpb25JbmZvXCI7XG4gICAgICAgIGlmIChjb250ZW50Lm5vZGVUeXBlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLmluZm9EZXN0cm95ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB7IGRvbSwgZGVzdHJveSB9ID0gY29udGVudDtcbiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICAgIHRoaXMuaW5mb0Rlc3Ryb3kgPSBkZXN0cm95IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQod3JhcCk7XG4gICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLnBsYWNlSW5mb1JlcSk7XG4gICAgfVxuICAgIHVwZGF0ZVNlbGVjdGVkT3B0aW9uKHNlbGVjdGVkKSB7XG4gICAgICAgIGxldCBzZXQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBvcHQgPSB0aGlzLmxpc3QuZmlyc3RDaGlsZCwgaSA9IHRoaXMucmFuZ2UuZnJvbTsgb3B0OyBvcHQgPSBvcHQubmV4dFNpYmxpbmcsIGkrKykge1xuICAgICAgICAgICAgaWYgKG9wdC5ub2RlTmFtZSAhPSBcIkxJXCIgfHwgIW9wdC5pZCkge1xuICAgICAgICAgICAgICAgIGktLTsgLy8gQSBzZWN0aW9uIGhlYWRlclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0Lmhhc0F0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0LnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICBzZXQgPSBvcHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdC5oYXNBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpKVxuICAgICAgICAgICAgICAgICAgICBvcHQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0KVxuICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXcodGhpcy5saXN0LCBzZXQpO1xuICAgICAgICByZXR1cm4gc2V0O1xuICAgIH1cbiAgICBtZWFzdXJlSW5mbygpIHtcbiAgICAgICAgbGV0IHNlbCA9IHRoaXMuZG9tLnF1ZXJ5U2VsZWN0b3IoXCJbYXJpYS1zZWxlY3RlZF1cIik7XG4gICAgICAgIGlmICghc2VsIHx8ICF0aGlzLmluZm8pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGxpc3RSZWN0ID0gdGhpcy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBpbmZvUmVjdCA9IHRoaXMuaW5mby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IHNlbFJlY3QgPSBzZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBzcGFjZSA9IHRoaXMuc3BhY2U7XG4gICAgICAgIGlmICghc3BhY2UpIHtcbiAgICAgICAgICAgIGxldCBkb2NFbHQgPSB0aGlzLmRvbS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHNwYWNlID0geyBsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiBkb2NFbHQuY2xpZW50V2lkdGgsIGJvdHRvbTogZG9jRWx0LmNsaWVudEhlaWdodCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxSZWN0LnRvcCA+IE1hdGgubWluKHNwYWNlLmJvdHRvbSwgbGlzdFJlY3QuYm90dG9tKSAtIDEwIHx8XG4gICAgICAgICAgICBzZWxSZWN0LmJvdHRvbSA8IE1hdGgubWF4KHNwYWNlLnRvcCwgbGlzdFJlY3QudG9wKSArIDEwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykucG9zaXRpb25JbmZvKHRoaXMudmlldywgbGlzdFJlY3QsIHNlbFJlY3QsIGluZm9SZWN0LCBzcGFjZSwgdGhpcy5kb20pO1xuICAgIH1cbiAgICBwbGFjZUluZm8ocG9zKSB7XG4gICAgICAgIGlmICh0aGlzLmluZm8pIHtcbiAgICAgICAgICAgIGlmIChwb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9zLnN0eWxlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm8uc3R5bGUuY3NzVGV4dCA9IHBvcy5zdHlsZTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY2xhc3NOYW1lID0gXCJjbS10b29sdGlwIGNtLWNvbXBsZXRpb25JbmZvIFwiICsgKHBvcy5jbGFzcyB8fCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mby5zdHlsZS5jc3NUZXh0ID0gXCJ0b3A6IC0xZTZweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUxpc3RCb3gob3B0aW9ucywgaWQsIHJhbmdlKSB7XG4gICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgICAgICB1bC5pZCA9IGlkO1xuICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwibGlzdGJveFwiKTtcbiAgICAgICAgdWwuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XG4gICAgICAgIHVsLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy52aWV3LnN0YXRlLnBocmFzZShcIkNvbXBsZXRpb25zXCIpKTtcbiAgICAgICAgdWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBlID0+IHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgZm9jdXMgY2hhbmdlIHdoZW4gY2xpY2tpbmcgdGhlIHNjcm9sbGJhclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09IHVsKVxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjdXJTZWN0aW9uID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IHJhbmdlLmZyb207IGkgPCByYW5nZS50bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyBjb21wbGV0aW9uLCBtYXRjaCB9ID0gb3B0aW9uc1tpXSwgeyBzZWN0aW9uIH0gPSBjb21wbGV0aW9uO1xuICAgICAgICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHR5cGVvZiBzZWN0aW9uID09IFwic3RyaW5nXCIgPyBzZWN0aW9uIDogc2VjdGlvbi5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lICE9IGN1clNlY3Rpb24gJiYgKGkgPiByYW5nZS5mcm9tIHx8IHJhbmdlLmZyb20gPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyU2VjdGlvbiA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvbiAhPSBcInN0cmluZ1wiICYmIHNlY3Rpb24uaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChzZWN0aW9uLmhlYWRlcihzZWN0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVyID0gdWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNvbXBsZXRpb24tc2VjdGlvblwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGkgPSB1bC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIikpO1xuICAgICAgICAgICAgbGkuaWQgPSBpZCArIFwiLVwiICsgaTtcbiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJvcHRpb25cIik7XG4gICAgICAgICAgICBsZXQgY2xzID0gdGhpcy5vcHRpb25DbGFzcyhjb21wbGV0aW9uKTtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgbGkuY2xhc3NOYW1lID0gY2xzO1xuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHRoaXMub3B0aW9uQ29udGVudCkge1xuICAgICAgICAgICAgICAgIGxldCBub2RlID0gc291cmNlKGNvbXBsZXRpb24sIHRoaXMudmlldy5zdGF0ZSwgdGhpcy52aWV3LCBtYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUpXG4gICAgICAgICAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyYW5nZS5mcm9tKVxuICAgICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZChcImNtLWNvbXBsZXRpb25MaXN0SW5jb21wbGV0ZVRvcFwiKTtcbiAgICAgICAgaWYgKHJhbmdlLnRvIDwgb3B0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICB1bC5jbGFzc0xpc3QuYWRkKFwiY20tY29tcGxldGlvbkxpc3RJbmNvbXBsZXRlQm90dG9tXCIpO1xuICAgICAgICByZXR1cm4gdWw7XG4gICAgfVxuICAgIGRlc3Ryb3lJbmZvKCkge1xuICAgICAgICBpZiAodGhpcy5pbmZvKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmZvRGVzdHJveSlcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9EZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmluZm8ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmluZm8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveUluZm8oKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb21wbGV0aW9uVG9vbHRpcChzdGF0ZUZpZWxkLCBhcHBseUNvbXBsZXRpb24pIHtcbiAgICByZXR1cm4gKHZpZXcpID0+IG5ldyBDb21wbGV0aW9uVG9vbHRpcCh2aWV3LCBzdGF0ZUZpZWxkLCBhcHBseUNvbXBsZXRpb24pO1xufVxuZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY29udGFpbmVyLCBlbGVtZW50KSB7XG4gICAgbGV0IHBhcmVudCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgc2VsZiA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHNjYWxlWSA9IHBhcmVudC5oZWlnaHQgLyBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgIGlmIChzZWxmLnRvcCA8IHBhcmVudC50b3ApXG4gICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgLT0gKHBhcmVudC50b3AgLSBzZWxmLnRvcCkgLyBzY2FsZVk7XG4gICAgZWxzZSBpZiAoc2VsZi5ib3R0b20gPiBwYXJlbnQuYm90dG9tKVxuICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wICs9IChzZWxmLmJvdHRvbSAtIHBhcmVudC5ib3R0b20pIC8gc2NhbGVZO1xufVxuXG4vLyBVc2VkIHRvIHBpY2sgYSBwcmVmZXJyZWQgb3B0aW9uIHdoZW4gdHdvIG9wdGlvbnMgd2l0aCB0aGUgc2FtZVxuLy8gbGFiZWwgb2NjdXIgaW4gdGhlIHJlc3VsdC5cbmZ1bmN0aW9uIHNjb3JlKG9wdGlvbikge1xuICAgIHJldHVybiAob3B0aW9uLmJvb3N0IHx8IDApICogMTAwICsgKG9wdGlvbi5hcHBseSA/IDEwIDogMCkgKyAob3B0aW9uLmluZm8gPyA1IDogMCkgK1xuICAgICAgICAob3B0aW9uLnR5cGUgPyAxIDogMCk7XG59XG5mdW5jdGlvbiBzb3J0T3B0aW9ucyhhY3RpdmUsIHN0YXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbXTtcbiAgICBsZXQgc2VjdGlvbnMgPSBudWxsO1xuICAgIGxldCBhZGRPcHRpb24gPSAob3B0aW9uKSA9PiB7XG4gICAgICAgIG9wdGlvbnMucHVzaChvcHRpb24pO1xuICAgICAgICBsZXQgeyBzZWN0aW9uIH0gPSBvcHRpb24uY29tcGxldGlvbjtcbiAgICAgICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICghc2VjdGlvbnMpXG4gICAgICAgICAgICAgICAgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGxldCBuYW1lID0gdHlwZW9mIHNlY3Rpb24gPT0gXCJzdHJpbmdcIiA/IHNlY3Rpb24gOiBzZWN0aW9uLm5hbWU7XG4gICAgICAgICAgICBpZiAoIXNlY3Rpb25zLnNvbWUocyA9PiBzLm5hbWUgPT0gbmFtZSkpXG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaCh0eXBlb2Ygc2VjdGlvbiA9PSBcInN0cmluZ1wiID8geyBuYW1lIH0gOiBzZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IGNvbmYgPSBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKTtcbiAgICBmb3IgKGxldCBhIG9mIGFjdGl2ZSlcbiAgICAgICAgaWYgKGEuaGFzUmVzdWx0KCkpIHtcbiAgICAgICAgICAgIGxldCBnZXRNYXRjaCA9IGEucmVzdWx0LmdldE1hdGNoO1xuICAgICAgICAgICAgaWYgKGEucmVzdWx0LmZpbHRlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBvcHRpb24gb2YgYS5yZXN1bHQub3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBhZGRPcHRpb24obmV3IE9wdGlvbihvcHRpb24sIGEuc291cmNlLCBnZXRNYXRjaCA/IGdldE1hdGNoKG9wdGlvbikgOiBbXSwgMWU5IC0gb3B0aW9ucy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgcGF0dGVybiA9IHN0YXRlLnNsaWNlRG9jKGEuZnJvbSwgYS50byksIG1hdGNoO1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaGVyID0gY29uZi5maWx0ZXJTdHJpY3QgPyBuZXcgU3RyaWN0TWF0Y2hlcihwYXR0ZXJuKSA6IG5ldyBGdXp6eU1hdGNoZXIocGF0dGVybik7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0aW9uIG9mIGEucmVzdWx0Lm9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9IG1hdGNoZXIubWF0Y2gob3B0aW9uLmxhYmVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWQgPSAhb3B0aW9uLmRpc3BsYXlMYWJlbCA/IG1hdGNoLm1hdGNoZWQgOiBnZXRNYXRjaCA/IGdldE1hdGNoKG9wdGlvbiwgbWF0Y2gubWF0Y2hlZCkgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE9wdGlvbihuZXcgT3B0aW9uKG9wdGlvbiwgYS5zb3VyY2UsIG1hdGNoZWQsIG1hdGNoLnNjb3JlICsgKG9wdGlvbi5ib29zdCB8fCAwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBpZiAoc2VjdGlvbnMpIHtcbiAgICAgICAgbGV0IHNlY3Rpb25PcmRlciA9IE9iamVjdC5jcmVhdGUobnVsbCksIHBvcyA9IDA7XG4gICAgICAgIGxldCBjbXAgPSAoYSwgYikgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKChfYSA9IGEucmFuaykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMWU5KSAtICgoX2IgPSBiLnJhbmspICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDFlOSkgfHwgKGEubmFtZSA8IGIubmFtZSA/IC0xIDogMSk7IH07XG4gICAgICAgIGZvciAobGV0IHMgb2Ygc2VjdGlvbnMuc29ydChjbXApKSB7XG4gICAgICAgICAgICBwb3MgLT0gMWU1O1xuICAgICAgICAgICAgc2VjdGlvbk9yZGVyW3MubmFtZV0gPSBwb3M7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGxldCB7IHNlY3Rpb24gfSA9IG9wdGlvbi5jb21wbGV0aW9uO1xuICAgICAgICAgICAgaWYgKHNlY3Rpb24pXG4gICAgICAgICAgICAgICAgb3B0aW9uLnNjb3JlICs9IHNlY3Rpb25PcmRlclt0eXBlb2Ygc2VjdGlvbiA9PSBcInN0cmluZ1wiID8gc2VjdGlvbiA6IHNlY3Rpb24ubmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9IFtdLCBwcmV2ID0gbnVsbDtcbiAgICBsZXQgY29tcGFyZSA9IGNvbmYuY29tcGFyZUNvbXBsZXRpb25zO1xuICAgIGZvciAobGV0IG9wdCBvZiBvcHRpb25zLnNvcnQoKGEsIGIpID0+IChiLnNjb3JlIC0gYS5zY29yZSkgfHwgY29tcGFyZShhLmNvbXBsZXRpb24sIGIuY29tcGxldGlvbikpKSB7XG4gICAgICAgIGxldCBjdXIgPSBvcHQuY29tcGxldGlvbjtcbiAgICAgICAgaWYgKCFwcmV2IHx8IHByZXYubGFiZWwgIT0gY3VyLmxhYmVsIHx8IHByZXYuZGV0YWlsICE9IGN1ci5kZXRhaWwgfHxcbiAgICAgICAgICAgIChwcmV2LnR5cGUgIT0gbnVsbCAmJiBjdXIudHlwZSAhPSBudWxsICYmIHByZXYudHlwZSAhPSBjdXIudHlwZSkgfHxcbiAgICAgICAgICAgIHByZXYuYXBwbHkgIT0gY3VyLmFwcGx5IHx8IHByZXYuYm9vc3QgIT0gY3VyLmJvb3N0KVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gob3B0KTtcbiAgICAgICAgZWxzZSBpZiAoc2NvcmUob3B0LmNvbXBsZXRpb24pID4gc2NvcmUocHJldikpXG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdID0gb3B0O1xuICAgICAgICBwcmV2ID0gb3B0LmNvbXBsZXRpb247XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jbGFzcyBDb21wbGV0aW9uRGlhbG9nIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBhdHRycywgdG9vbHRpcCwgdGltZXN0YW1wLCBzZWxlY3RlZCwgZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgICAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldFNlbGVjdGVkKHNlbGVjdGVkLCBpZCkge1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWQgPT0gdGhpcy5zZWxlY3RlZCB8fCBzZWxlY3RlZCA+PSB0aGlzLm9wdGlvbnMubGVuZ3RoID8gdGhpc1xuICAgICAgICAgICAgOiBuZXcgQ29tcGxldGlvbkRpYWxvZyh0aGlzLm9wdGlvbnMsIG1ha2VBdHRycyhpZCwgc2VsZWN0ZWQpLCB0aGlzLnRvb2x0aXAsIHRoaXMudGltZXN0YW1wLCBzZWxlY3RlZCwgdGhpcy5kaXNhYmxlZCk7XG4gICAgfVxuICAgIHN0YXRpYyBidWlsZChhY3RpdmUsIHN0YXRlLCBpZCwgcHJldiwgY29uZiwgZGlkU2V0QWN0aXZlKSB7XG4gICAgICAgIGlmIChwcmV2ICYmICFkaWRTZXRBY3RpdmUgJiYgYWN0aXZlLnNvbWUocyA9PiBzLmlzUGVuZGluZykpXG4gICAgICAgICAgICByZXR1cm4gcHJldi5zZXREaXNhYmxlZCgpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHNvcnRPcHRpb25zKGFjdGl2ZSwgc3RhdGUpO1xuICAgICAgICBpZiAoIW9wdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHByZXYgJiYgYWN0aXZlLnNvbWUoYSA9PiBhLmlzUGVuZGluZykgPyBwcmV2LnNldERpc2FibGVkKCkgOiBudWxsO1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5zZWxlY3RPbk9wZW4gPyAwIDogLTE7XG4gICAgICAgIGlmIChwcmV2ICYmIHByZXYuc2VsZWN0ZWQgIT0gc2VsZWN0ZWQgJiYgcHJldi5zZWxlY3RlZCAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IHNlbGVjdGVkVmFsdWUgPSBwcmV2Lm9wdGlvbnNbcHJldi5zZWxlY3RlZF0uY29tcGxldGlvbjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1tpXS5jb21wbGV0aW9uID09IHNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uRGlhbG9nKG9wdGlvbnMsIG1ha2VBdHRycyhpZCwgc2VsZWN0ZWQpLCB7XG4gICAgICAgICAgICBwb3M6IGFjdGl2ZS5yZWR1Y2UoKGEsIGIpID0+IGIuaGFzUmVzdWx0KCkgPyBNYXRoLm1pbihhLCBiLmZyb20pIDogYSwgMWU4KSxcbiAgICAgICAgICAgIGNyZWF0ZTogY3JlYXRlVG9vbHRpcCxcbiAgICAgICAgICAgIGFib3ZlOiBjb25mLmFib3ZlQ3Vyc29yLFxuICAgICAgICB9LCBwcmV2ID8gcHJldi50aW1lc3RhbXAgOiBEYXRlLm5vdygpLCBzZWxlY3RlZCwgZmFsc2UpO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBsZXRpb25EaWFsb2codGhpcy5vcHRpb25zLCB0aGlzLmF0dHJzLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMudG9vbHRpcCksIHsgcG9zOiBjaGFuZ2VzLm1hcFBvcyh0aGlzLnRvb2x0aXAucG9zKSB9KSwgdGhpcy50aW1lc3RhbXAsIHRoaXMuc2VsZWN0ZWQsIHRoaXMuZGlzYWJsZWQpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uRGlhbG9nKHRoaXMub3B0aW9ucywgdGhpcy5hdHRycywgdGhpcy50b29sdGlwLCB0aGlzLnRpbWVzdGFtcCwgdGhpcy5zZWxlY3RlZCwgdHJ1ZSk7XG4gICAgfVxufVxuY2xhc3MgQ29tcGxldGlvblN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihhY3RpdmUsIGlkLCBvcGVuKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMub3BlbiA9IG9wZW47XG4gICAgfVxuICAgIHN0YXRpYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uU3RhdGUobm9uZSwgXCJjbS1hYy1cIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDJlNikudG9TdHJpbmcoMzYpLCBudWxsKTtcbiAgICB9XG4gICAgdXBkYXRlKHRyKSB7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0ciwgY29uZiA9IHN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpO1xuICAgICAgICBsZXQgc291cmNlcyA9IGNvbmYub3ZlcnJpZGUgfHxcbiAgICAgICAgICAgIHN0YXRlLmxhbmd1YWdlRGF0YUF0KFwiYXV0b2NvbXBsZXRlXCIsIGN1cihzdGF0ZSkpLm1hcChhc1NvdXJjZSk7XG4gICAgICAgIGxldCBhY3RpdmUgPSBzb3VyY2VzLm1hcChzb3VyY2UgPT4ge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5hY3RpdmUuZmluZChzID0+IHMuc291cmNlID09IHNvdXJjZSkgfHxcbiAgICAgICAgICAgICAgICBuZXcgQWN0aXZlU291cmNlKHNvdXJjZSwgdGhpcy5hY3RpdmUuc29tZShhID0+IGEuc3RhdGUgIT0gMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLykgPyAxIC8qIFN0YXRlLlBlbmRpbmcgKi8gOiAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS51cGRhdGUodHIsIGNvbmYpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGggPT0gdGhpcy5hY3RpdmUubGVuZ3RoICYmIGFjdGl2ZS5ldmVyeSgoYSwgaSkgPT4gYSA9PSB0aGlzLmFjdGl2ZVtpXSkpXG4gICAgICAgICAgICBhY3RpdmUgPSB0aGlzLmFjdGl2ZTtcbiAgICAgICAgbGV0IG9wZW4gPSB0aGlzLm9wZW4sIGRpZFNldCA9IHRyLmVmZmVjdHMuc29tZShlID0+IGUuaXMoc2V0QWN0aXZlRWZmZWN0KSk7XG4gICAgICAgIGlmIChvcGVuICYmIHRyLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICBvcGVuID0gb3Blbi5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24gfHwgYWN0aXZlLnNvbWUoYSA9PiBhLmhhc1Jlc3VsdCgpICYmIHRyLmNoYW5nZXMudG91Y2hlc1JhbmdlKGEuZnJvbSwgYS50bykpIHx8XG4gICAgICAgICAgICAhc2FtZVJlc3VsdHMoYWN0aXZlLCB0aGlzLmFjdGl2ZSkgfHwgZGlkU2V0KVxuICAgICAgICAgICAgb3BlbiA9IENvbXBsZXRpb25EaWFsb2cuYnVpbGQoYWN0aXZlLCBzdGF0ZSwgdGhpcy5pZCwgb3BlbiwgY29uZiwgZGlkU2V0KTtcbiAgICAgICAgZWxzZSBpZiAob3BlbiAmJiBvcGVuLmRpc2FibGVkICYmICFhY3RpdmUuc29tZShhID0+IGEuaXNQZW5kaW5nKSlcbiAgICAgICAgICAgIG9wZW4gPSBudWxsO1xuICAgICAgICBpZiAoIW9wZW4gJiYgYWN0aXZlLmV2ZXJ5KGEgPT4gIWEuaXNQZW5kaW5nKSAmJiBhY3RpdmUuc29tZShhID0+IGEuaGFzUmVzdWx0KCkpKVxuICAgICAgICAgICAgYWN0aXZlID0gYWN0aXZlLm1hcChhID0+IGEuaGFzUmVzdWx0KCkgPyBuZXcgQWN0aXZlU291cmNlKGEuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKSA6IGEpO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0U2VsZWN0ZWRFZmZlY3QpKVxuICAgICAgICAgICAgICAgIG9wZW4gPSBvcGVuICYmIG9wZW4uc2V0U2VsZWN0ZWQoZWZmZWN0LnZhbHVlLCB0aGlzLmlkKTtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZSA9PSB0aGlzLmFjdGl2ZSAmJiBvcGVuID09IHRoaXMub3BlbiA/IHRoaXMgOiBuZXcgQ29tcGxldGlvblN0YXRlKGFjdGl2ZSwgdGhpcy5pZCwgb3Blbik7XG4gICAgfVxuICAgIGdldCB0b29sdGlwKCkgeyByZXR1cm4gdGhpcy5vcGVuID8gdGhpcy5vcGVuLnRvb2x0aXAgOiBudWxsOyB9XG4gICAgZ2V0IGF0dHJzKCkgeyByZXR1cm4gdGhpcy5vcGVuID8gdGhpcy5vcGVuLmF0dHJzIDogdGhpcy5hY3RpdmUubGVuZ3RoID8gYmFzZUF0dHJzIDogbm9BdHRyczsgfVxufVxuZnVuY3Rpb24gc2FtZVJlc3VsdHMoYSwgYikge1xuICAgIGlmIChhID09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAobGV0IGlBID0gMCwgaUIgPSAwOzspIHtcbiAgICAgICAgd2hpbGUgKGlBIDwgYS5sZW5ndGggJiYgIWFbaUFdLmhhc1Jlc3VsdCgpKVxuICAgICAgICAgICAgaUErKztcbiAgICAgICAgd2hpbGUgKGlCIDwgYi5sZW5ndGggJiYgIWJbaUJdLmhhc1Jlc3VsdCgpKVxuICAgICAgICAgICAgaUIrKztcbiAgICAgICAgbGV0IGVuZEEgPSBpQSA9PSBhLmxlbmd0aCwgZW5kQiA9IGlCID09IGIubGVuZ3RoO1xuICAgICAgICBpZiAoZW5kQSB8fCBlbmRCKVxuICAgICAgICAgICAgcmV0dXJuIGVuZEEgPT0gZW5kQjtcbiAgICAgICAgaWYgKGFbaUErK10ucmVzdWx0ICE9IGJbaUIrK10ucmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmNvbnN0IGJhc2VBdHRycyA9IHtcbiAgICBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFwibGlzdFwiXG59O1xuY29uc3Qgbm9BdHRycyA9IHt9O1xuZnVuY3Rpb24gbWFrZUF0dHJzKGlkLCBzZWxlY3RlZCkge1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgIFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJsaXN0XCIsXG4gICAgICAgIFwiYXJpYS1oYXNwb3B1cFwiOiBcImxpc3Rib3hcIixcbiAgICAgICAgXCJhcmlhLWNvbnRyb2xzXCI6IGlkXG4gICAgfTtcbiAgICBpZiAoc2VsZWN0ZWQgPiAtMSlcbiAgICAgICAgcmVzdWx0W1wiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCJdID0gaWQgKyBcIi1cIiArIHNlbGVjdGVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBub25lID0gW107XG5mdW5jdGlvbiBnZXRVcGRhdGVUeXBlKHRyLCBjb25mKSB7XG4gICAgaWYgKHRyLmlzVXNlckV2ZW50KFwiaW5wdXQuY29tcGxldGVcIikpIHtcbiAgICAgICAgbGV0IGNvbXBsZXRpb24gPSB0ci5hbm5vdGF0aW9uKHBpY2tlZENvbXBsZXRpb24pO1xuICAgICAgICBpZiAoY29tcGxldGlvbiAmJiBjb25mLmFjdGl2YXRlT25Db21wbGV0aW9uKGNvbXBsZXRpb24pKVxuICAgICAgICAgICAgcmV0dXJuIDQgLyogVXBkYXRlVHlwZS5BY3RpdmF0ZSAqLyB8IDggLyogVXBkYXRlVHlwZS5SZXNldCAqLztcbiAgICB9XG4gICAgbGV0IHR5cGluZyA9IHRyLmlzVXNlckV2ZW50KFwiaW5wdXQudHlwZVwiKTtcbiAgICByZXR1cm4gdHlwaW5nICYmIGNvbmYuYWN0aXZhdGVPblR5cGluZyA/IDQgLyogVXBkYXRlVHlwZS5BY3RpdmF0ZSAqLyB8IDEgLyogVXBkYXRlVHlwZS5UeXBpbmcgKi9cbiAgICAgICAgOiB0eXBpbmcgPyAxIC8qIFVwZGF0ZVR5cGUuVHlwaW5nICovXG4gICAgICAgICAgICA6IHRyLmlzVXNlckV2ZW50KFwiZGVsZXRlLmJhY2t3YXJkXCIpID8gMiAvKiBVcGRhdGVUeXBlLkJhY2tzcGFjaW5nICovXG4gICAgICAgICAgICAgICAgOiB0ci5zZWxlY3Rpb24gPyA4IC8qIFVwZGF0ZVR5cGUuUmVzZXQgKi9cbiAgICAgICAgICAgICAgICAgICAgOiB0ci5kb2NDaGFuZ2VkID8gMTYgLyogVXBkYXRlVHlwZS5SZXNldElmVG91Y2hpbmcgKi8gOiAwIC8qIFVwZGF0ZVR5cGUuTm9uZSAqLztcbn1cbmNsYXNzIEFjdGl2ZVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBzdGF0ZSwgZXhwbGljaXQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLmV4cGxpY2l0ID0gZXhwbGljaXQ7XG4gICAgfVxuICAgIGhhc1Jlc3VsdCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IGlzUGVuZGluZygpIHsgcmV0dXJuIHRoaXMuc3RhdGUgPT0gMSAvKiBTdGF0ZS5QZW5kaW5nICovOyB9XG4gICAgdXBkYXRlKHRyLCBjb25mKSB7XG4gICAgICAgIGxldCB0eXBlID0gZ2V0VXBkYXRlVHlwZSh0ciwgY29uZiksIHZhbHVlID0gdGhpcztcbiAgICAgICAgaWYgKCh0eXBlICYgOCAvKiBVcGRhdGVUeXBlLlJlc2V0ICovKSB8fCAodHlwZSAmIDE2IC8qIFVwZGF0ZVR5cGUuUmVzZXRJZlRvdWNoaW5nICovKSAmJiB0aGlzLnRvdWNoZXModHIpKVxuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQWN0aXZlU291cmNlKHZhbHVlLnNvdXJjZSwgMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLyk7XG4gICAgICAgIGlmICgodHlwZSAmIDQgLyogVXBkYXRlVHlwZS5BY3RpdmF0ZSAqLykgJiYgdmFsdWUuc3RhdGUgPT0gMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLylcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh0aGlzLnNvdXJjZSwgMSAvKiBTdGF0ZS5QZW5kaW5nICovKTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS51cGRhdGVGb3IodHIsIHR5cGUpO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhzdGFydENvbXBsZXRpb25FZmZlY3QpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDEgLyogU3RhdGUuUGVuZGluZyAqLywgZWZmZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhjbG9zZUNvbXBsZXRpb25FZmZlY3QpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKHNldEFjdGl2ZUVmZmVjdCkpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYWN0aXZlIG9mIGVmZmVjdC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5zb3VyY2UgPT0gdmFsdWUuc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhY3RpdmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICB1cGRhdGVGb3IodHIsIHR5cGUpIHsgcmV0dXJuIHRoaXMubWFwKHRyLmNoYW5nZXMpOyB9XG4gICAgbWFwKGNoYW5nZXMpIHsgcmV0dXJuIHRoaXM7IH1cbiAgICB0b3VjaGVzKHRyKSB7XG4gICAgICAgIHJldHVybiB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZShjdXIodHIuc3RhdGUpKTtcbiAgICB9XG59XG5jbGFzcyBBY3RpdmVSZXN1bHQgZXh0ZW5kcyBBY3RpdmVTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgZXhwbGljaXQsIGxpbWl0LCByZXN1bHQsIGZyb20sIHRvKSB7XG4gICAgICAgIHN1cGVyKHNvdXJjZSwgMyAvKiBTdGF0ZS5SZXN1bHQgKi8sIGV4cGxpY2l0KTtcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbiAgICBoYXNSZXN1bHQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgdXBkYXRlRm9yKHRyLCB0eXBlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCEodHlwZSAmIDMgLyogVXBkYXRlVHlwZS5TaW1wbGVJbnRlcmFjdGlvbiAqLykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgaWYgKHJlc3VsdC5tYXAgJiYgIXRyLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQubWFwKHJlc3VsdCwgdHIuY2hhbmdlcyk7XG4gICAgICAgIGxldCBmcm9tID0gdHIuY2hhbmdlcy5tYXBQb3ModGhpcy5mcm9tKSwgdG8gPSB0ci5jaGFuZ2VzLm1hcFBvcyh0aGlzLnRvLCAxKTtcbiAgICAgICAgbGV0IHBvcyA9IGN1cih0ci5zdGF0ZSk7XG4gICAgICAgIGlmIChwb3MgPiB0byB8fCAhcmVzdWx0IHx8XG4gICAgICAgICAgICAodHlwZSAmIDIgLyogVXBkYXRlVHlwZS5CYWNrc3BhY2luZyAqLykgJiYgKGN1cih0ci5zdGFydFN0YXRlKSA9PSB0aGlzLmZyb20gfHwgcG9zIDwgdGhpcy5saW1pdCkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVNvdXJjZSh0aGlzLnNvdXJjZSwgdHlwZSAmIDQgLyogVXBkYXRlVHlwZS5BY3RpdmF0ZSAqLyA/IDEgLyogU3RhdGUuUGVuZGluZyAqLyA6IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICBsZXQgbGltaXQgPSB0ci5jaGFuZ2VzLm1hcFBvcyh0aGlzLmxpbWl0KTtcbiAgICAgICAgaWYgKGNoZWNrVmFsaWQocmVzdWx0LnZhbGlkRm9yLCB0ci5zdGF0ZSwgZnJvbSwgdG8pKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVSZXN1bHQodGhpcy5zb3VyY2UsIHRoaXMuZXhwbGljaXQsIGxpbWl0LCByZXN1bHQsIGZyb20sIHRvKTtcbiAgICAgICAgaWYgKHJlc3VsdC51cGRhdGUgJiZcbiAgICAgICAgICAgIChyZXN1bHQgPSByZXN1bHQudXBkYXRlKHJlc3VsdCwgZnJvbSwgdG8sIG5ldyBDb21wbGV0aW9uQ29udGV4dCh0ci5zdGF0ZSwgcG9zLCBmYWxzZSkpKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlUmVzdWx0KHRoaXMuc291cmNlLCB0aGlzLmV4cGxpY2l0LCBsaW1pdCwgcmVzdWx0LCByZXN1bHQuZnJvbSwgKF9hID0gcmVzdWx0LnRvKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjdXIodHIuc3RhdGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTb3VyY2UodGhpcy5zb3VyY2UsIDEgLyogU3RhdGUuUGVuZGluZyAqLywgdGhpcy5leHBsaWNpdCk7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGlmIChtYXBwaW5nLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLnJlc3VsdC5tYXAgPyB0aGlzLnJlc3VsdC5tYXAodGhpcy5yZXN1bHQsIG1hcHBpbmcpIDogdGhpcy5yZXN1bHQ7XG4gICAgICAgIGlmICghcmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTb3VyY2UodGhpcy5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVJlc3VsdCh0aGlzLnNvdXJjZSwgdGhpcy5leHBsaWNpdCwgbWFwcGluZy5tYXBQb3ModGhpcy5saW1pdCksIHRoaXMucmVzdWx0LCBtYXBwaW5nLm1hcFBvcyh0aGlzLmZyb20pLCBtYXBwaW5nLm1hcFBvcyh0aGlzLnRvLCAxKSk7XG4gICAgfVxuICAgIHRvdWNoZXModHIpIHtcbiAgICAgICAgcmV0dXJuIHRyLmNoYW5nZXMudG91Y2hlc1JhbmdlKHRoaXMuZnJvbSwgdGhpcy50byk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tWYWxpZCh2YWxpZEZvciwgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgaWYgKCF2YWxpZEZvcilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB0ZXh0ID0gc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pO1xuICAgIHJldHVybiB0eXBlb2YgdmFsaWRGb3IgPT0gXCJmdW5jdGlvblwiID8gdmFsaWRGb3IodGV4dCwgZnJvbSwgdG8sIHN0YXRlKSA6IGVuc3VyZUFuY2hvcih2YWxpZEZvciwgdHJ1ZSkudGVzdCh0ZXh0KTtcbn1cbmNvbnN0IHNldEFjdGl2ZUVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoe1xuICAgIG1hcChzb3VyY2VzLCBtYXBwaW5nKSB7IHJldHVybiBzb3VyY2VzLm1hcChzID0+IHMubWFwKG1hcHBpbmcpKTsgfVxufSk7XG5jb25zdCBzZXRTZWxlY3RlZEVmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGNvbXBsZXRpb25TdGF0ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gQ29tcGxldGlvblN0YXRlLnN0YXJ0KCk7IH0sXG4gICAgdXBkYXRlKHZhbHVlLCB0cikgeyByZXR1cm4gdmFsdWUudXBkYXRlKHRyKTsgfSxcbiAgICBwcm92aWRlOiBmID0+IFtcbiAgICAgICAgc2hvd1Rvb2x0aXAuZnJvbShmLCB2YWwgPT4gdmFsLnRvb2x0aXApLFxuICAgICAgICBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLmZyb20oZiwgc3RhdGUgPT4gc3RhdGUuYXR0cnMpXG4gICAgXVxufSk7XG5mdW5jdGlvbiBhcHBseUNvbXBsZXRpb24odmlldywgb3B0aW9uKSB7XG4gICAgY29uc3QgYXBwbHkgPSBvcHRpb24uY29tcGxldGlvbi5hcHBseSB8fCBvcHRpb24uY29tcGxldGlvbi5sYWJlbDtcbiAgICBsZXQgcmVzdWx0ID0gdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUpLmFjdGl2ZS5maW5kKGEgPT4gYS5zb3VyY2UgPT0gb3B0aW9uLnNvdXJjZSk7XG4gICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgQWN0aXZlUmVzdWx0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2YgYXBwbHkgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgdmlldy5kaXNwYXRjaChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc2VydENvbXBsZXRpb25UZXh0KHZpZXcuc3RhdGUsIGFwcGx5LCByZXN1bHQuZnJvbSwgcmVzdWx0LnRvKSksIHsgYW5ub3RhdGlvbnM6IHBpY2tlZENvbXBsZXRpb24ub2Yob3B0aW9uLmNvbXBsZXRpb24pIH0pKTtcbiAgICBlbHNlXG4gICAgICAgIGFwcGx5KHZpZXcsIG9wdGlvbi5jb21wbGV0aW9uLCByZXN1bHQuZnJvbSwgcmVzdWx0LnRvKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IGNyZWF0ZVRvb2x0aXAgPSAvKkBfX1BVUkVfXyovY29tcGxldGlvblRvb2x0aXAoY29tcGxldGlvblN0YXRlLCBhcHBseUNvbXBsZXRpb24pO1xuXG4vKipcblJldHVybnMgYSBjb21tYW5kIHRoYXQgbW92ZXMgdGhlIGNvbXBsZXRpb24gc2VsZWN0aW9uIGZvcndhcmQgb3JcbmJhY2t3YXJkIGJ5IHRoZSBnaXZlbiBhbW91bnQuXG4qL1xuZnVuY3Rpb24gbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24oZm9yd2FyZCwgYnkgPSBcIm9wdGlvblwiKSB7XG4gICAgcmV0dXJuICh2aWV3KSA9PiB7XG4gICAgICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgICAgICBpZiAoIWNTdGF0ZSB8fCAhY1N0YXRlLm9wZW4gfHwgY1N0YXRlLm9wZW4uZGlzYWJsZWQgfHxcbiAgICAgICAgICAgIERhdGUubm93KCkgLSBjU3RhdGUub3Blbi50aW1lc3RhbXAgPCB2aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLmludGVyYWN0aW9uRGVsYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGVwID0gMSwgdG9vbHRpcDtcbiAgICAgICAgaWYgKGJ5ID09IFwicGFnZVwiICYmICh0b29sdGlwID0gZ2V0VG9vbHRpcCh2aWV3LCBjU3RhdGUub3Blbi50b29sdGlwKSkpXG4gICAgICAgICAgICBzdGVwID0gTWF0aC5tYXgoMiwgTWF0aC5mbG9vcih0b29sdGlwLmRvbS5vZmZzZXRIZWlnaHQgL1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuZG9tLnF1ZXJ5U2VsZWN0b3IoXCJsaVwiKS5vZmZzZXRIZWlnaHQpIC0gMSk7XG4gICAgICAgIGxldCB7IGxlbmd0aCB9ID0gY1N0YXRlLm9wZW4ub3B0aW9ucztcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gY1N0YXRlLm9wZW4uc2VsZWN0ZWQgPiAtMSA/IGNTdGF0ZS5vcGVuLnNlbGVjdGVkICsgc3RlcCAqIChmb3J3YXJkID8gMSA6IC0xKSA6IGZvcndhcmQgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHNlbGVjdGVkIDwgMClcbiAgICAgICAgICAgIHNlbGVjdGVkID0gYnkgPT0gXCJwYWdlXCIgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQgPj0gbGVuZ3RoKVxuICAgICAgICAgICAgc2VsZWN0ZWQgPSBieSA9PSBcInBhZ2VcIiA/IGxlbmd0aCAtIDEgOiAwO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0U2VsZWN0ZWRFZmZlY3Qub2Yoc2VsZWN0ZWQpIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5BY2NlcHQgdGhlIGN1cnJlbnQgY29tcGxldGlvbi5cbiovXG5jb25zdCBhY2NlcHRDb21wbGV0aW9uID0gKHZpZXcpID0+IHtcbiAgICBsZXQgY1N0YXRlID0gdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSB8fCAhY1N0YXRlIHx8ICFjU3RhdGUub3BlbiB8fCBjU3RhdGUub3Blbi5zZWxlY3RlZCA8IDAgfHwgY1N0YXRlLm9wZW4uZGlzYWJsZWQgfHxcbiAgICAgICAgRGF0ZS5ub3coKSAtIGNTdGF0ZS5vcGVuLnRpbWVzdGFtcCA8IHZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuaW50ZXJhY3Rpb25EZWxheSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhcHBseUNvbXBsZXRpb24odmlldywgY1N0YXRlLm9wZW4ub3B0aW9uc1tjU3RhdGUub3Blbi5zZWxlY3RlZF0pO1xufTtcbi8qKlxuRXhwbGljaXRseSBzdGFydCBhdXRvY29tcGxldGlvbi5cbiovXG5jb25zdCBzdGFydENvbXBsZXRpb24gPSAodmlldykgPT4ge1xuICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghY1N0YXRlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHN0YXJ0Q29tcGxldGlvbkVmZmVjdC5vZih0cnVlKSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkNsb3NlIHRoZSBjdXJyZW50bHkgYWN0aXZlIGNvbXBsZXRpb24uXG4qL1xuY29uc3QgY2xvc2VDb21wbGV0aW9uID0gKHZpZXcpID0+IHtcbiAgICBsZXQgY1N0YXRlID0gdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIWNTdGF0ZSB8fCAhY1N0YXRlLmFjdGl2ZS5zb21lKGEgPT4gYS5zdGF0ZSAhPSAwIC8qIFN0YXRlLkluYWN0aXZlICovKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBjbG9zZUNvbXBsZXRpb25FZmZlY3Qub2YobnVsbCkgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuY2xhc3MgUnVubmluZ1F1ZXJ5IHtcbiAgICBjb25zdHJ1Y3RvcihhY3RpdmUsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMudXBkYXRlcyA9IFtdO1xuICAgICAgICAvLyBOb3RlIHRoYXQgJ3VuZGVmaW5lZCcgbWVhbnMgJ25vdCBkb25lIHlldCcsIHdoZXJlYXMgJ251bGwnIG1lYW5zXG4gICAgICAgIC8vICdxdWVyeSByZXR1cm5lZCBudWxsJy5cbiAgICAgICAgdGhpcy5kb25lID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmNvbnN0IE1heFVwZGF0ZUNvdW50ID0gNTAsIE1pbkFib3J0VGltZSA9IDEwMDA7XG5jb25zdCBjb21wbGV0aW9uUGx1Z2luID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVib3VuY2VVcGRhdGUgPSAtMTtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gW107XG4gICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSAtMTtcbiAgICAgICAgdGhpcy5wZW5kaW5nU3RhcnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAwIC8qIENvbXBvc2l0aW9uU3RhdGUuTm9uZSAqLztcbiAgICAgICAgZm9yIChsZXQgYWN0aXZlIG9mIHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKS5hY3RpdmUpXG4gICAgICAgICAgICBpZiAoYWN0aXZlLmlzUGVuZGluZylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UXVlcnkoYWN0aXZlKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY1N0YXRlID0gdXBkYXRlLnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSk7XG4gICAgICAgIGxldCBjb25mID0gdXBkYXRlLnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpO1xuICAgICAgICBpZiAoIXVwZGF0ZS5zZWxlY3Rpb25TZXQgJiYgIXVwZGF0ZS5kb2NDaGFuZ2VkICYmIHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSkgPT0gY1N0YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZG9lc1Jlc2V0ID0gdXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gZ2V0VXBkYXRlVHlwZSh0ciwgY29uZik7XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUgJiA4IC8qIFVwZGF0ZVR5cGUuUmVzZXQgKi8pIHx8ICh0ci5zZWxlY3Rpb24gfHwgdHIuZG9jQ2hhbmdlZCkgJiYgISh0eXBlICYgMyAvKiBVcGRhdGVUeXBlLlNpbXBsZUludGVyYWN0aW9uICovKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ydW5uaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLnJ1bm5pbmdbaV07XG4gICAgICAgICAgICBpZiAoZG9lc1Jlc2V0IHx8XG4gICAgICAgICAgICAgICAgcXVlcnkuY29udGV4dC5hYm9ydE9uRG9jQ2hhbmdlICYmIHVwZGF0ZS5kb2NDaGFuZ2VkIHx8XG4gICAgICAgICAgICAgICAgcXVlcnkudXBkYXRlcy5sZW5ndGggKyB1cGRhdGUudHJhbnNhY3Rpb25zLmxlbmd0aCA+IE1heFVwZGF0ZUNvdW50ICYmIERhdGUubm93KCkgLSBxdWVyeS50aW1lID4gTWluQWJvcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiBxdWVyeS5jb250ZXh0LmFib3J0TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5LmNvbnRleHQuYWJvcnRMaXN0ZW5lcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucnVubmluZy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LnVwZGF0ZXMucHVzaCguLi51cGRhdGUudHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWJvdW5jZVVwZGF0ZSA+IC0xKVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VVcGRhdGUpO1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLmVmZmVjdHMuc29tZShlID0+IGUuaXMoc3RhcnRDb21wbGV0aW9uRWZmZWN0KSkpKVxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3RhcnQgPSB0cnVlO1xuICAgICAgICBsZXQgZGVsYXkgPSB0aGlzLnBlbmRpbmdTdGFydCA/IDUwIDogY29uZi5hY3RpdmF0ZU9uVHlwaW5nRGVsYXk7XG4gICAgICAgIHRoaXMuZGVib3VuY2VVcGRhdGUgPSBjU3RhdGUuYWN0aXZlLnNvbWUoYSA9PiBhLmlzUGVuZGluZyAmJiAhdGhpcy5ydW5uaW5nLnNvbWUocSA9PiBxLmFjdGl2ZS5zb3VyY2UgPT0gYS5zb3VyY2UpKVxuICAgICAgICAgICAgPyBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc3RhcnRVcGRhdGUoKSwgZGVsYXkpIDogLTE7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyAhPSAwIC8qIENvbXBvc2l0aW9uU3RhdGUuTm9uZSAqLylcbiAgICAgICAgICAgIGZvciAobGV0IHRyIG9mIHVwZGF0ZS50cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHIuaXNVc2VyRXZlbnQoXCJpbnB1dC50eXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IDIgLyogQ29tcG9zaXRpb25TdGF0ZS5DaGFuZ2VkICovO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY29tcG9zaW5nID09IDIgLyogQ29tcG9zaXRpb25TdGF0ZS5DaGFuZ2VkICovICYmIHRyLnNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAzIC8qIENvbXBvc2l0aW9uU3RhdGUuQ2hhbmdlZEFuZE1vdmVkICovO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydFVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5kZWJvdW5jZVVwZGF0ZSA9IC0xO1xuICAgICAgICB0aGlzLnBlbmRpbmdTdGFydCA9IGZhbHNlO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdGhpcy52aWV3LCBjU3RhdGUgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUpO1xuICAgICAgICBmb3IgKGxldCBhY3RpdmUgb2YgY1N0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZS5pc1BlbmRpbmcgJiYgIXRoaXMucnVubmluZy5zb21lKHIgPT4gci5hY3RpdmUuc291cmNlID09IGFjdGl2ZS5zb3VyY2UpKVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRRdWVyeShhY3RpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcubGVuZ3RoICYmIGNTdGF0ZS5vcGVuICYmIGNTdGF0ZS5vcGVuLmRpc2FibGVkKVxuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZUFjY2VwdCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5hY2NlcHQoKSwgdGhpcy52aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLnVwZGF0ZVN5bmNUaW1lKTtcbiAgICB9XG4gICAgc3RhcnRRdWVyeShhY3RpdmUpIHtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRoaXMudmlldywgcG9zID0gY3VyKHN0YXRlKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgQ29tcGxldGlvbkNvbnRleHQoc3RhdGUsIHBvcywgYWN0aXZlLmV4cGxpY2l0LCB0aGlzLnZpZXcpO1xuICAgICAgICBsZXQgcGVuZGluZyA9IG5ldyBSdW5uaW5nUXVlcnkoYWN0aXZlLCBjb250ZXh0KTtcbiAgICAgICAgdGhpcy5ydW5uaW5nLnB1c2gocGVuZGluZyk7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShhY3RpdmUuc291cmNlKGNvbnRleHQpKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAoIXBlbmRpbmcuY29udGV4dC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZy5kb25lID0gcmVzdWx0IHx8IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUFjY2VwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogY2xvc2VDb21wbGV0aW9uRWZmZWN0Lm9mKG51bGwpIH0pO1xuICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMudmlldy5zdGF0ZSwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNjaGVkdWxlQWNjZXB0KCkge1xuICAgICAgICBpZiAodGhpcy5ydW5uaW5nLmV2ZXJ5KHEgPT4gcS5kb25lICE9PSB1bmRlZmluZWQpKVxuICAgICAgICAgICAgdGhpcy5hY2NlcHQoKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5kZWJvdW5jZUFjY2VwdCA8IDApXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlQWNjZXB0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmFjY2VwdCgpLCB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykudXBkYXRlU3luY1RpbWUpO1xuICAgIH1cbiAgICAvLyBGb3IgZWFjaCBmaW5pc2hlZCBxdWVyeSBpbiB0aGlzLnJ1bm5pbmcsIHRyeSB0byBjcmVhdGUgYSByZXN1bHRcbiAgICAvLyBvciwgaWYgYXBwcm9wcmlhdGUsIHJlc3RhcnQgdGhlIHF1ZXJ5LlxuICAgIGFjY2VwdCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5kZWJvdW5jZUFjY2VwdCA+IC0xKVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VBY2NlcHQpO1xuICAgICAgICB0aGlzLmRlYm91bmNlQWNjZXB0ID0gLTE7XG4gICAgICAgIGxldCB1cGRhdGVkID0gW107XG4gICAgICAgIGxldCBjb25mID0gdGhpcy52aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLCBjU3RhdGUgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJ1bm5pbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBxdWVyeSA9IHRoaXMucnVubmluZ1tpXTtcbiAgICAgICAgICAgIGlmIChxdWVyeS5kb25lID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICBpZiAocXVlcnkuZG9uZSkge1xuICAgICAgICAgICAgICAgIGxldCBwb3MgPSBjdXIocXVlcnkudXBkYXRlcy5sZW5ndGggPyBxdWVyeS51cGRhdGVzWzBdLnN0YXJ0U3RhdGUgOiB0aGlzLnZpZXcuc3RhdGUpO1xuICAgICAgICAgICAgICAgIGxldCBsaW1pdCA9IE1hdGgubWluKHBvcywgcXVlcnkuZG9uZS5mcm9tICsgKHF1ZXJ5LmFjdGl2ZS5leHBsaWNpdCA/IDAgOiAxKSk7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IG5ldyBBY3RpdmVSZXN1bHQocXVlcnkuYWN0aXZlLnNvdXJjZSwgcXVlcnkuYWN0aXZlLmV4cGxpY2l0LCBsaW1pdCwgcXVlcnkuZG9uZSwgcXVlcnkuZG9uZS5mcm9tLCAoX2EgPSBxdWVyeS5kb25lLnRvKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBwb3MpO1xuICAgICAgICAgICAgICAgIC8vIFJlcGxheSB0aGUgdHJhbnNhY3Rpb25zIHRoYXQgaGFwcGVuZWQgc2luY2UgdGhlIHN0YXJ0IG9mXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgYW5kIHNlZSBpZiB0aGF0IHByZXNlcnZlcyB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdHIgb2YgcXVlcnkudXBkYXRlcylcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gYWN0aXZlLnVwZGF0ZSh0ciwgY29uZik7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZS5oYXNSZXN1bHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLnB1c2goYWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBjU3RhdGUuYWN0aXZlLmZpbmQoYSA9PiBhLnNvdXJjZSA9PSBxdWVyeS5hY3RpdmUuc291cmNlKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQuaXNQZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5LmRvbmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdGx5IGZhaWxlZC4gU2hvdWxkIGNsZWFyIHRoZSBwZW5kaW5nIHN0YXR1cyBpZiBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBoYXNuJ3QgYmVlbiByZS1zZXQgaW4gdGhlIG1lYW50aW1lLlxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlID0gbmV3IEFjdGl2ZVNvdXJjZShxdWVyeS5hY3RpdmUuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdHIgb2YgcXVlcnkudXBkYXRlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGFjdGl2ZS51cGRhdGUodHIsIGNvbmYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZS5pc1BlbmRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLnB1c2goYWN0aXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyZWQgYnkgc3Vic2VxdWVudCB0cmFuc2FjdGlvbnMuIFJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRRdWVyeShjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZWQubGVuZ3RoIHx8IGNTdGF0ZS5vcGVuICYmIGNTdGF0ZS5vcGVuLmRpc2FibGVkKVxuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0QWN0aXZlRWZmZWN0Lm9mKHVwZGF0ZWQpIH0pO1xuICAgIH1cbn0sIHtcbiAgICBldmVudEhhbmRsZXJzOiB7XG4gICAgICAgIGJsdXIoZXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBzdGF0ZSA9IHRoaXMudmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS50b29sdGlwICYmIHRoaXMudmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5jbG9zZU9uQmx1cikge1xuICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSBzdGF0ZS5vcGVuICYmIGdldFRvb2x0aXAodGhpcy52aWV3LCBzdGF0ZS5vcGVuLnRvb2x0aXApO1xuICAgICAgICAgICAgICAgIGlmICghZGlhbG9nIHx8ICFkaWFsb2cuZG9tLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlQ29tcGxldGlvbkVmZmVjdC5vZihudWxsKSB9KSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb21wb3NpdGlvbnN0YXJ0KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAxIC8qIENvbXBvc2l0aW9uU3RhdGUuU3RhcnRlZCAqLztcbiAgICAgICAgfSxcbiAgICAgICAgY29tcG9zaXRpb25lbmQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb3NpbmcgPT0gMyAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWRBbmRNb3ZlZCAqLykge1xuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSBmaXJlcyBjb21wb3NpdGlvbmVuZCBldmVudHMgc3luY2hyb25vdXNseSwgcG9zc2libHlcbiAgICAgICAgICAgICAgICAvLyBmcm9tIGluc2lkZSBhbiB1cGRhdGUsIHNvIGRpc3BhdGNoIGFzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJlZW50cmFuY3lcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHN0YXJ0Q29tcGxldGlvbkVmZmVjdC5vZihmYWxzZSkgfSksIDIwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gMCAvKiBDb21wb3NpdGlvblN0YXRlLk5vbmUgKi87XG4gICAgICAgIH1cbiAgICB9XG59KTtcbmNvbnN0IHdpbmRvd3MgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwib2JqZWN0XCIgJiYgLypAX19QVVJFX18qLy9XaW4vLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcbmNvbnN0IGNvbW1pdENoYXJhY3RlcnMgPSAvKkBfX1BVUkVfXyovUHJlYy5oaWdoZXN0KC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmRvbUV2ZW50SGFuZGxlcnMoe1xuICAgIGtleWRvd24oZXZlbnQsIHZpZXcpIHtcbiAgICAgICAgbGV0IGZpZWxkID0gdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhZmllbGQub3BlbiB8fCBmaWVsZC5vcGVuLmRpc2FibGVkIHx8IGZpZWxkLm9wZW4uc2VsZWN0ZWQgPCAwIHx8XG4gICAgICAgICAgICBldmVudC5rZXkubGVuZ3RoID4gMSB8fCBldmVudC5jdHJsS2V5ICYmICEod2luZG93cyAmJiBldmVudC5hbHRLZXkpIHx8IGV2ZW50Lm1ldGFLZXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBvcHRpb24gPSBmaWVsZC5vcGVuLm9wdGlvbnNbZmllbGQub3Blbi5zZWxlY3RlZF07XG4gICAgICAgIGxldCByZXN1bHQgPSBmaWVsZC5hY3RpdmUuZmluZChhID0+IGEuc291cmNlID09IG9wdGlvbi5zb3VyY2UpO1xuICAgICAgICBsZXQgY29tbWl0Q2hhcnMgPSBvcHRpb24uY29tcGxldGlvbi5jb21taXRDaGFyYWN0ZXJzIHx8IHJlc3VsdC5yZXN1bHQuY29tbWl0Q2hhcmFjdGVycztcbiAgICAgICAgaWYgKGNvbW1pdENoYXJzICYmIGNvbW1pdENoYXJzLmluZGV4T2YoZXZlbnQua2V5KSA+IC0xKVxuICAgICAgICAgICAgYXBwbHlDb21wbGV0aW9uKHZpZXcsIG9wdGlvbik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KSk7XG5cbmNvbnN0IGJhc2VUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tdG9vbHRpcC5jbS10b29sdGlwLWF1dG9jb21wbGV0ZVwiOiB7XG4gICAgICAgIFwiJiA+IHVsXCI6IHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlXCIsXG4gICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuIGF1dG9cIixcbiAgICAgICAgICAgIG1heFdpZHRoX2ZhbGxiYWNrOiBcIjcwMHB4XCIsXG4gICAgICAgICAgICBtYXhXaWR0aDogXCJtaW4oNzAwcHgsIDk1dncpXCIsXG4gICAgICAgICAgICBtaW5XaWR0aDogXCIyNTBweFwiLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiBcIjEwZW1cIixcbiAgICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgICAgICBsaXN0U3R5bGU6IFwibm9uZVwiLFxuICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgIFwiJiA+IGxpLCAmID4gY29tcGxldGlvbi1zZWN0aW9uXCI6IHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiBcIjFweCAzcHhcIixcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiAxLjJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiYgPiBsaVwiOiB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dYOiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHRleHRPdmVyZmxvdzogXCJlbGxpcHNpc1wiLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiYgPiBjb21wbGV0aW9uLXNlY3Rpb25cIjoge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibGlzdC1pdGVtXCIsXG4gICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiBcIjFweCBzb2xpZCBzaWx2ZXJcIixcbiAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDogXCIwLjVlbVwiLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuN1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tdG9vbHRpcC1hdXRvY29tcGxldGUgdWwgbGlbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMxN2NcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10b29sdGlwLWF1dG9jb21wbGV0ZS1kaXNhYmxlZCB1bCBsaVthcmlhLXNlbGVjdGVkXVwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzc3N1wiLFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcC1hdXRvY29tcGxldGUgdWwgbGlbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiMzNDdcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlLWRpc2FibGVkIHVsIGxpW2FyaWEtc2VsZWN0ZWRdXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNDQ0XCIsXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uTGlzdEluY29tcGxldGVUb3A6YmVmb3JlLCAuY20tY29tcGxldGlvbkxpc3RJbmNvbXBsZXRlQm90dG9tOmFmdGVyXCI6IHtcbiAgICAgICAgY29udGVudDogJ1wiwrfCt8K3XCInLFxuICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiXG4gICAgfSxcbiAgICBcIi5jbS10b29sdGlwLmNtLWNvbXBsZXRpb25JbmZvXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgcGFkZGluZzogXCIzcHggOXB4XCIsXG4gICAgICAgIHdpZHRoOiBcIm1heC1jb250ZW50XCIsXG4gICAgICAgIG1heFdpZHRoOiBgJHs0MDAgLyogSW5mby5XaWR0aCAqL31weGAsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLWxpbmVcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkluZm8uY20tY29tcGxldGlvbkluZm8tbGVmdFwiOiB7IHJpZ2h0OiBcIjEwMCVcIiB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JbmZvLmNtLWNvbXBsZXRpb25JbmZvLXJpZ2h0XCI6IHsgbGVmdDogXCIxMDAlXCIgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSW5mby5jbS1jb21wbGV0aW9uSW5mby1sZWZ0LW5hcnJvd1wiOiB7IHJpZ2h0OiBgJHszMCAvKiBJbmZvLk1hcmdpbiAqL31weGAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSW5mby5jbS1jb21wbGV0aW9uSW5mby1yaWdodC1uYXJyb3dcIjogeyBsZWZ0OiBgJHszMCAvKiBJbmZvLk1hcmdpbiAqL31weGAgfSxcbiAgICBcIiZsaWdodCAuY20tc25pcHBldEZpZWxkXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiMwMDAwMDAyMlwiIH0sXG4gICAgXCImZGFyayAuY20tc25pcHBldEZpZWxkXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmZmYyMlwiIH0sXG4gICAgXCIuY20tc25pcHBldEZpZWxkUG9zaXRpb25cIjoge1xuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRleHQtdG9wXCIsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IFwiMS4xNWVtXCIsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIG1hcmdpbjogXCIwIC0wLjdweCAtLjdlbVwiLFxuICAgICAgICBib3JkZXJMZWZ0OiBcIjEuNHB4IGRvdHRlZCAjODg4XCJcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25NYXRjaGVkVGV4dFwiOiB7XG4gICAgICAgIHRleHREZWNvcmF0aW9uOiBcInVuZGVybGluZVwiXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uRGV0YWlsXCI6IHtcbiAgICAgICAgbWFyZ2luTGVmdDogXCIwLjVlbVwiLFxuICAgICAgICBmb250U3R5bGU6IFwiaXRhbGljXCJcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uXCI6IHtcbiAgICAgICAgZm9udFNpemU6IFwiOTAlXCIsXG4gICAgICAgIHdpZHRoOiBcIi44ZW1cIixcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBwYWRkaW5nUmlnaHQ6IFwiLjZlbVwiLFxuICAgICAgICBvcGFjaXR5OiBcIjAuNlwiLFxuICAgICAgICBib3hTaXppbmc6IFwiY29udGVudC1ib3hcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tZnVuY3Rpb24sIC5jbS1jb21wbGV0aW9uSWNvbi1tZXRob2RcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifGkidcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1jbGFzc1wiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ+KXiydcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1pbnRlcmZhY2VcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifil4wnXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tdmFyaWFibGVcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifwnZGlJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWNvbnN0YW50XCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCIn8J2QtidcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi10eXBlXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCIn8J2RoSdcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1lbnVtXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCIn4oiqJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLXByb3BlcnR5XCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCIn4pahJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWtleXdvcmRcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifwn5SRXFx1RkUwRSdcIiB9IC8vIERpc2FibGUgZW1vamkgcmVuZGVyaW5nXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1uYW1lc3BhY2VcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifilqInXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tdGV4dFwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ2FiYydcIiwgZm9udFNpemU6IFwiNTAlXCIsIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIgfVxuICAgIH1cbn0pO1xuXG5jbGFzcyBGaWVsZFBvcyB7XG4gICAgY29uc3RydWN0b3IoZmllbGQsIGxpbmUsIGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5saW5lID0gbGluZTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbn1cbmNsYXNzIEZpZWxkUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkLCBmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgbWFwKGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IGZyb20gPSBjaGFuZ2VzLm1hcFBvcyh0aGlzLmZyb20sIC0xLCBNYXBNb2RlLlRyYWNrRGVsKTtcbiAgICAgICAgbGV0IHRvID0gY2hhbmdlcy5tYXBQb3ModGhpcy50bywgMSwgTWFwTW9kZS5UcmFja0RlbCk7XG4gICAgICAgIHJldHVybiBmcm9tID09IG51bGwgfHwgdG8gPT0gbnVsbCA/IG51bGwgOiBuZXcgRmllbGRSYW5nZSh0aGlzLmZpZWxkLCBmcm9tLCB0byk7XG4gICAgfVxufVxuY2xhc3MgU25pcHBldCB7XG4gICAgY29uc3RydWN0b3IobGluZXMsIGZpZWxkUG9zaXRpb25zKSB7XG4gICAgICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICAgICAgdGhpcy5maWVsZFBvc2l0aW9ucyA9IGZpZWxkUG9zaXRpb25zO1xuICAgIH1cbiAgICBpbnN0YW50aWF0ZShzdGF0ZSwgcG9zKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gW10sIGxpbmVTdGFydCA9IFtwb3NdO1xuICAgICAgICBsZXQgbGluZU9iaiA9IHN0YXRlLmRvYy5saW5lQXQocG9zKSwgYmFzZUluZGVudCA9IC9eXFxzKi8uZXhlYyhsaW5lT2JqLnRleHQpWzBdO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMubGluZXMpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQgPSBiYXNlSW5kZW50LCB0YWJzID0gL15cXHQqLy5leGVjKGxpbmUpWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYnM7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ICs9IHN0YXRlLmZhY2V0KGluZGVudFVuaXQpO1xuICAgICAgICAgICAgICAgIGxpbmVTdGFydC5wdXNoKHBvcyArIGluZGVudC5sZW5ndGggLSB0YWJzKTtcbiAgICAgICAgICAgICAgICBsaW5lID0gaW5kZW50ICsgbGluZS5zbGljZSh0YWJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIHBvcyArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJhbmdlcyA9IHRoaXMuZmllbGRQb3NpdGlvbnMubWFwKHBvcyA9PiBuZXcgRmllbGRSYW5nZShwb3MuZmllbGQsIGxpbmVTdGFydFtwb3MubGluZV0gKyBwb3MuZnJvbSwgbGluZVN0YXJ0W3Bvcy5saW5lXSArIHBvcy50bykpO1xuICAgICAgICByZXR1cm4geyB0ZXh0LCByYW5nZXMgfTtcbiAgICB9XG4gICAgc3RhdGljIHBhcnNlKHRlbXBsYXRlKSB7XG4gICAgICAgIGxldCBmaWVsZHMgPSBbXTtcbiAgICAgICAgbGV0IGxpbmVzID0gW10sIHBvc2l0aW9ucyA9IFtdLCBtO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRlbXBsYXRlLnNwbGl0KC9cXHJcXG4/fFxcbi8pKSB7XG4gICAgICAgICAgICB3aGlsZSAobSA9IC9bIyRdXFx7KD86KFxcZCspKD86OihbXn1dKikpP3woKD86XFxcXFt7fV18W159XSkqKSlcXH0vLmV4ZWMobGluZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VxID0gbVsxXSA/ICttWzFdIDogbnVsbCwgcmF3TmFtZSA9IG1bMl0gfHwgbVszXSB8fCBcIlwiLCBmb3VuZCA9IC0xO1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gcmF3TmFtZS5yZXBsYWNlKC9cXFxcW3t9XS9nLCBtID0+IG1bMV0pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXEgIT0gbnVsbCA/IGZpZWxkc1tpXS5zZXEgPT0gc2VxIDogbmFtZSA/IGZpZWxkc1tpXS5uYW1lID09IG5hbWUgOiBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgZmllbGRzLmxlbmd0aCAmJiAoc2VxID09IG51bGwgfHwgKGZpZWxkc1tpXS5zZXEgIT0gbnVsbCAmJiBmaWVsZHNbaV0uc2VxIDwgc2VxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcy5zcGxpY2UoaSwgMCwgeyBzZXEsIG5hbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcG9zIG9mIHBvc2l0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MuZmllbGQgPj0gZm91bmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zLmZpZWxkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKG5ldyBGaWVsZFBvcyhmb3VuZCwgbGluZXMubGVuZ3RoLCBtLmluZGV4LCBtLmluZGV4ICsgbmFtZS5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zbGljZSgwLCBtLmluZGV4KSArIHJhd05hbWUgKyBsaW5lLnNsaWNlKG0uaW5kZXggKyBtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lID0gbGluZS5yZXBsYWNlKC9cXFxcKFt7fV0pL2csIChfLCBicmFjZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3Mgb2YgcG9zaXRpb25zKVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zLmxpbmUgPT0gbGluZXMubGVuZ3RoICYmIHBvcy5mcm9tID4gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcy5mcm9tLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MudG8tLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBicmFjZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNuaXBwZXQobGluZXMsIHBvc2l0aW9ucyk7XG4gICAgfVxufVxubGV0IGZpZWxkTWFya2VyID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ud2lkZ2V0KHsgd2lkZ2V0OiAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgICAgIHRvRE9NKCkge1xuICAgICAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS1zbmlwcGV0RmllbGRQb3NpdGlvblwiO1xuICAgICAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgICAgIH1cbiAgICAgICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIH0gfSk7XG5sZXQgZmllbGRSYW5nZSA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1zbmlwcGV0RmllbGRcIiB9KTtcbmNsYXNzIEFjdGl2ZVNuaXBwZXQge1xuICAgIGNvbnN0cnVjdG9yKHJhbmdlcywgYWN0aXZlKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgdGhpcy5kZWNvID0gRGVjb3JhdGlvbi5zZXQocmFuZ2VzLm1hcChyID0+IChyLmZyb20gPT0gci50byA/IGZpZWxkTWFya2VyIDogZmllbGRSYW5nZSkucmFuZ2Uoci5mcm9tLCByLnRvKSkpO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IHIgb2YgdGhpcy5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBtYXBwZWQgPSByLm1hcChjaGFuZ2VzKTtcbiAgICAgICAgICAgIGlmICghbWFwcGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobWFwcGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVNuaXBwZXQocmFuZ2VzLCB0aGlzLmFjdGl2ZSk7XG4gICAgfVxuICAgIHNlbGVjdGlvbkluc2lkZUZpZWxkKHNlbCkge1xuICAgICAgICByZXR1cm4gc2VsLnJhbmdlcy5ldmVyeShyYW5nZSA9PiB0aGlzLnJhbmdlcy5zb21lKHIgPT4gci5maWVsZCA9PSB0aGlzLmFjdGl2ZSAmJiByLmZyb20gPD0gcmFuZ2UuZnJvbSAmJiByLnRvID49IHJhbmdlLnRvKSk7XG4gICAgfVxufVxuY29uc3Qgc2V0QWN0aXZlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7XG4gICAgbWFwKHZhbHVlLCBjaGFuZ2VzKSB7IHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5tYXAoY2hhbmdlcyk7IH1cbn0pO1xuY29uc3QgbW92ZVRvRmllbGQgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBzbmlwcGV0U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgdXBkYXRlKHZhbHVlLCB0cikge1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhzZXRBY3RpdmUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKG1vdmVUb0ZpZWxkKSAmJiB2YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVNuaXBwZXQodmFsdWUucmFuZ2VzLCBlZmZlY3QudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0ci5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0ci5zZWxlY3Rpb24gJiYgIXZhbHVlLnNlbGVjdGlvbkluc2lkZUZpZWxkKHRyLnNlbGVjdGlvbikpXG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYsIHZhbCA9PiB2YWwgPyB2YWwuZGVjbyA6IERlY29yYXRpb24ubm9uZSlcbn0pO1xuZnVuY3Rpb24gZmllbGRTZWxlY3Rpb24ocmFuZ2VzLCBmaWVsZCkge1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcy5maWx0ZXIociA9PiByLmZpZWxkID09IGZpZWxkKS5tYXAociA9PiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2Uoci5mcm9tLCByLnRvKSkpO1xufVxuLyoqXG5Db252ZXJ0IGEgc25pcHBldCB0ZW1wbGF0ZSB0byBhIGZ1bmN0aW9uIHRoYXQgY2FuXG5bYXBwbHldKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLkNvbXBsZXRpb24uYXBwbHkpIGl0LiBTbmlwcGV0cyBhcmUgd3JpdHRlblxudXNpbmcgc3ludGF4IGxpa2UgdGhpczpcblxuICAgIFwiZm9yIChsZXQgJHtpbmRleH0gPSAwOyAke2luZGV4fSA8ICR7ZW5kfTsgJHtpbmRleH0rKykge1xcblxcdCR7fVxcbn1cIlxuXG5FYWNoIGAke31gIHBsYWNlaG9sZGVyICh5b3UgbWF5IGFsc28gdXNlIGAje31gKSBpbmRpY2F0ZXMgYSBmaWVsZFxudGhhdCB0aGUgdXNlciBjYW4gZmlsbCBpbi4gSXRzIG5hbWUsIGlmIGFueSwgd2lsbCBiZSB0aGUgZGVmYXVsdFxuY29udGVudCBmb3IgdGhlIGZpZWxkLlxuXG5XaGVuIHRoZSBzbmlwcGV0IGlzIGFjdGl2YXRlZCBieSBjYWxsaW5nIHRoZSByZXR1cm5lZCBmdW5jdGlvbixcbnRoZSBjb2RlIGlzIGluc2VydGVkIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi4gTmV3bGluZXMgaW4gdGhlXG50ZW1wbGF0ZSBhcmUgaW5kZW50ZWQgYnkgdGhlIGluZGVudGF0aW9uIG9mIHRoZSBzdGFydCBsaW5lLCBwbHVzXG5vbmUgW2luZGVudCB1bml0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFVuaXQpIHBlciB0YWIgY2hhcmFjdGVyIGFmdGVyXG50aGUgbmV3bGluZS5cblxuT24gYWN0aXZhdGlvbiwgKGFsbCBpbnN0YW5jZXMgb2YpIHRoZSBmaXJzdCBmaWVsZCBhcmUgc2VsZWN0ZWQuXG5UaGUgdXNlciBjYW4gbW92ZSBiZXR3ZWVuIGZpZWxkcyB3aXRoIFRhYiBhbmQgU2hpZnQtVGFiIGFzIGxvbmcgYXNcbnRoZSBmaWVsZHMgYXJlIGFjdGl2ZS4gTW92aW5nIHRvIHRoZSBsYXN0IGZpZWxkIG9yIG1vdmluZyB0aGVcbmN1cnNvciBvdXQgb2YgdGhlIGN1cnJlbnQgZmllbGQgZGVhY3RpdmF0ZXMgdGhlIGZpZWxkcy5cblxuVGhlIG9yZGVyIG9mIGZpZWxkcyBkZWZhdWx0cyB0byB0ZXh0dWFsIG9yZGVyLCBidXQgeW91IGNhbiBhZGRcbm51bWJlcnMgdG8gcGxhY2Vob2xkZXJzIChgJHsxfWAgb3IgYCR7MTpkZWZhdWx0VGV4dH1gKSB0byBwcm92aWRlXG5hIGN1c3RvbSBvcmRlci5cblxuVG8gaW5jbHVkZSBhIGxpdGVyYWwgYHtgIG9yIGB9YCBpbiB5b3VyIHRlbXBsYXRlLCBwdXQgYSBiYWNrc2xhc2hcbmluIGZyb250IG9mIGl0LiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBhbmQgdGhlIGJyYWNlIHdpbGwgbm90IGJlXG5pbnRlcnByZXRlZCBhcyBpbmRpY2F0aW5nIGEgcGxhY2Vob2xkZXIuXG4qL1xuZnVuY3Rpb24gc25pcHBldCh0ZW1wbGF0ZSkge1xuICAgIGxldCBzbmlwcGV0ID0gU25pcHBldC5wYXJzZSh0ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIChlZGl0b3IsIGNvbXBsZXRpb24sIGZyb20sIHRvKSA9PiB7XG4gICAgICAgIGxldCB7IHRleHQsIHJhbmdlcyB9ID0gc25pcHBldC5pbnN0YW50aWF0ZShlZGl0b3Iuc3RhdGUsIGZyb20pO1xuICAgICAgICBsZXQgeyBtYWluIH0gPSBlZGl0b3Iuc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgc3BlYyA9IHtcbiAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbSwgdG86IHRvID09IG1haW4uZnJvbSA/IG1haW4udG8gOiB0bywgaW5zZXJ0OiBUZXh0Lm9mKHRleHQpIH0sXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgICAgIGFubm90YXRpb25zOiBjb21wbGV0aW9uID8gW3BpY2tlZENvbXBsZXRpb24ub2YoY29tcGxldGlvbiksIFRyYW5zYWN0aW9uLnVzZXJFdmVudC5vZihcImlucHV0LmNvbXBsZXRlXCIpXSA6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHNwZWMuc2VsZWN0aW9uID0gZmllbGRTZWxlY3Rpb24ocmFuZ2VzLCAwKTtcbiAgICAgICAgaWYgKHJhbmdlcy5zb21lKHIgPT4gci5maWVsZCA+IDApKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlID0gbmV3IEFjdGl2ZVNuaXBwZXQocmFuZ2VzLCAwKTtcbiAgICAgICAgICAgIGxldCBlZmZlY3RzID0gc3BlYy5lZmZlY3RzID0gW3NldEFjdGl2ZS5vZihhY3RpdmUpXTtcbiAgICAgICAgICAgIGlmIChlZGl0b3Iuc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBlZmZlY3RzLnB1c2goU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKFtzbmlwcGV0U3RhdGUsIGFkZFNuaXBwZXRLZXltYXAsIHNuaXBwZXRQb2ludGVySGFuZGxlciwgYmFzZVRoZW1lXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVkaXRvci5kaXNwYXRjaChlZGl0b3Iuc3RhdGUudXBkYXRlKHNwZWMpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbW92ZUZpZWxkKGRpcikge1xuICAgIHJldHVybiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgICAgICBsZXQgYWN0aXZlID0gc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSk7XG4gICAgICAgIGlmICghYWN0aXZlIHx8IGRpciA8IDAgJiYgYWN0aXZlLmFjdGl2ZSA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgbmV4dCA9IGFjdGl2ZS5hY3RpdmUgKyBkaXIsIGxhc3QgPSBkaXIgPiAwICYmICFhY3RpdmUucmFuZ2VzLnNvbWUociA9PiByLmZpZWxkID09IG5leHQgKyBkaXIpO1xuICAgICAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBmaWVsZFNlbGVjdGlvbihhY3RpdmUucmFuZ2VzLCBuZXh0KSxcbiAgICAgICAgICAgIGVmZmVjdHM6IHNldEFjdGl2ZS5vZihsYXN0ID8gbnVsbCA6IG5ldyBBY3RpdmVTbmlwcGV0KGFjdGl2ZS5yYW5nZXMsIG5leHQpKSxcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuQSBjb21tYW5kIHRoYXQgY2xlYXJzIHRoZSBhY3RpdmUgc25pcHBldCwgaWYgYW55LlxuKi9cbmNvbnN0IGNsZWFyU25pcHBldCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IGFjdGl2ZSA9IHN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghYWN0aXZlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHsgZWZmZWN0czogc2V0QWN0aXZlLm9mKG51bGwpIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdG8gdGhlIG5leHQgc25pcHBldCBmaWVsZCwgaWYgYXZhaWxhYmxlLlxuKi9cbmNvbnN0IG5leHRTbmlwcGV0RmllbGQgPSAvKkBfX1BVUkVfXyovbW92ZUZpZWxkKDEpO1xuLyoqXG5Nb3ZlIHRvIHRoZSBwcmV2aW91cyBzbmlwcGV0IGZpZWxkLCBpZiBhdmFpbGFibGUuXG4qL1xuY29uc3QgcHJldlNuaXBwZXRGaWVsZCA9IC8qQF9fUFVSRV9fKi9tb3ZlRmllbGQoLTEpO1xuLyoqXG5DaGVjayBpZiB0aGVyZSBpcyBhbiBhY3RpdmUgc25pcHBldCB3aXRoIGEgbmV4dCBmaWVsZCBmb3JcbmBuZXh0U25pcHBldEZpZWxkYCB0byBtb3ZlIHRvLlxuKi9cbmZ1bmN0aW9uIGhhc05leHRTbmlwcGV0RmllbGQoc3RhdGUpIHtcbiAgICBsZXQgYWN0aXZlID0gc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuICEhKGFjdGl2ZSAmJiBhY3RpdmUucmFuZ2VzLnNvbWUociA9PiByLmZpZWxkID09IGFjdGl2ZS5hY3RpdmUgKyAxKSk7XG59XG4vKipcblJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhbiBhY3RpdmUgc25pcHBldCBhbmQgYSBwcmV2aW91cyBmaWVsZFxuZm9yIGBwcmV2U25pcHBldEZpZWxkYCB0byBtb3ZlIHRvLlxuKi9cbmZ1bmN0aW9uIGhhc1ByZXZTbmlwcGV0RmllbGQoc3RhdGUpIHtcbiAgICBsZXQgYWN0aXZlID0gc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuICEhKGFjdGl2ZSAmJiBhY3RpdmUuYWN0aXZlID4gMCk7XG59XG5jb25zdCBkZWZhdWx0U25pcHBldEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJUYWJcIiwgcnVuOiBuZXh0U25pcHBldEZpZWxkLCBzaGlmdDogcHJldlNuaXBwZXRGaWVsZCB9LFxuICAgIHsga2V5OiBcIkVzY2FwZVwiLCBydW46IGNsZWFyU25pcHBldCB9XG5dO1xuLyoqXG5BIGZhY2V0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29uZmlndXJlIHRoZSBrZXkgYmluZGluZ3MgdXNlZCBieVxuc25pcHBldHMuIFRoZSBkZWZhdWx0IGJpbmRzIFRhYiB0b1xuW2BuZXh0U25pcHBldEZpZWxkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubmV4dFNuaXBwZXRGaWVsZCksIFNoaWZ0LVRhYiB0b1xuW2BwcmV2U25pcHBldEZpZWxkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUucHJldlNuaXBwZXRGaWVsZCksIGFuZCBFc2NhcGVcbnRvIFtgY2xlYXJTbmlwcGV0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xlYXJTbmlwcGV0KS5cbiovXG5jb25zdCBzbmlwcGV0S2V5bWFwID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShtYXBzKSB7IHJldHVybiBtYXBzLmxlbmd0aCA/IG1hcHNbMF0gOiBkZWZhdWx0U25pcHBldEtleW1hcDsgfVxufSk7XG5jb25zdCBhZGRTbmlwcGV0S2V5bWFwID0gLypAX19QVVJFX18qL1ByZWMuaGlnaGVzdCgvKkBfX1BVUkVfXyova2V5bWFwLmNvbXB1dGUoW3NuaXBwZXRLZXltYXBdLCBzdGF0ZSA9PiBzdGF0ZS5mYWNldChzbmlwcGV0S2V5bWFwKSkpO1xuLyoqXG5DcmVhdGUgYSBjb21wbGV0aW9uIGZyb20gYSBzbmlwcGV0LiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZVxucHJvcGVydGllcyBmcm9tIGBjb21wbGV0aW9uYCwgcGx1cyBhbiBgYXBwbHlgIGZ1bmN0aW9uIHRoYXRcbmFwcGxpZXMgdGhlIHNuaXBwZXQuXG4qL1xuZnVuY3Rpb24gc25pcHBldENvbXBsZXRpb24odGVtcGxhdGUsIGNvbXBsZXRpb24pIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21wbGV0aW9uKSwgeyBhcHBseTogc25pcHBldCh0ZW1wbGF0ZSkgfSk7XG59XG5jb25zdCBzbmlwcGV0UG9pbnRlckhhbmRsZXIgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICBtb3VzZWRvd24oZXZlbnQsIHZpZXcpIHtcbiAgICAgICAgbGV0IGFjdGl2ZSA9IHZpZXcuc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSksIHBvcztcbiAgICAgICAgaWYgKCFhY3RpdmUgfHwgKHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0pKSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgbWF0Y2ggPSBhY3RpdmUucmFuZ2VzLmZpbmQociA9PiByLmZyb20gPD0gcG9zICYmIHIudG8gPj0gcG9zKTtcbiAgICAgICAgaWYgKCFtYXRjaCB8fCBtYXRjaC5maWVsZCA9PSBhY3RpdmUuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogZmllbGRTZWxlY3Rpb24oYWN0aXZlLnJhbmdlcywgbWF0Y2guZmllbGQpLFxuICAgICAgICAgICAgZWZmZWN0czogc2V0QWN0aXZlLm9mKGFjdGl2ZS5yYW5nZXMuc29tZShyID0+IHIuZmllbGQgPiBtYXRjaC5maWVsZClcbiAgICAgICAgICAgICAgICA/IG5ldyBBY3RpdmVTbmlwcGV0KGFjdGl2ZS5yYW5nZXMsIG1hdGNoLmZpZWxkKSA6IG51bGwpLFxuICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiB3b3JkUkUod29yZENoYXJzKSB7XG4gICAgbGV0IGVzY2FwZWQgPSB3b3JkQ2hhcnMucmVwbGFjZSgvW1xcXVxcLVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBbXFxcXHB7QWxwaGFiZXRpY31cXFxccHtOdW1iZXJ9XyR7ZXNjYXBlZH1dK2AsIFwidWdcIik7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgW1xcdyR7ZXNjYXBlZH1dYCwgXCJnXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcFJFKHJlLCBmKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoZihyZS5zb3VyY2UpLCByZS51bmljb2RlID8gXCJ1XCIgOiBcIlwiKTtcbn1cbmNvbnN0IHdvcmRDYWNoZXMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIHdvcmRDYWNoZSh3b3JkQ2hhcnMpIHtcbiAgICByZXR1cm4gd29yZENhY2hlc1t3b3JkQ2hhcnNdIHx8ICh3b3JkQ2FjaGVzW3dvcmRDaGFyc10gPSBuZXcgV2Vha01hcCk7XG59XG5mdW5jdGlvbiBzdG9yZVdvcmRzKGRvYywgd29yZFJFLCByZXN1bHQsIHNlZW4sIGlnbm9yZUF0KSB7XG4gICAgZm9yIChsZXQgbGluZXMgPSBkb2MuaXRlckxpbmVzKCksIHBvcyA9IDA7ICFsaW5lcy5uZXh0KCkuZG9uZTspIHtcbiAgICAgICAgbGV0IHsgdmFsdWUgfSA9IGxpbmVzLCBtO1xuICAgICAgICB3b3JkUkUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgd2hpbGUgKG0gPSB3b3JkUkUuZXhlYyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICghc2VlblttWzBdXSAmJiBwb3MgKyBtLmluZGV4ICE9IGlnbm9yZUF0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB0eXBlOiBcInRleHRcIiwgbGFiZWw6IG1bMF0gfSk7XG4gICAgICAgICAgICAgICAgc2VlblttWzBdXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPj0gMjAwMCAvKiBDLk1heExpc3QgKi8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3MgKz0gdmFsdWUubGVuZ3RoICsgMTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb2xsZWN0V29yZHMoZG9jLCBjYWNoZSwgd29yZFJFLCB0bywgaWdub3JlQXQpIHtcbiAgICBsZXQgYmlnID0gZG9jLmxlbmd0aCA+PSAxMDAwIC8qIEMuTWluQ2FjaGVMZW4gKi87XG4gICAgbGV0IGNhY2hlZCA9IGJpZyAmJiBjYWNoZS5nZXQoZG9jKTtcbiAgICBpZiAoY2FjaGVkKVxuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIGxldCByZXN1bHQgPSBbXSwgc2VlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKGRvYy5jaGlsZHJlbikge1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgZG9jLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2gubGVuZ3RoID49IDEwMDAgLyogQy5NaW5DYWNoZUxlbiAqLykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgb2YgY29sbGVjdFdvcmRzKGNoLCBjYWNoZSwgd29yZFJFLCB0byAtIHBvcywgaWdub3JlQXQgLSBwb3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VlbltjLmxhYmVsXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VlbltjLmxhYmVsXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0b3JlV29yZHMoY2gsIHdvcmRSRSwgcmVzdWx0LCBzZWVuLCBpZ25vcmVBdCAtIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgKz0gY2gubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3RvcmVXb3Jkcyhkb2MsIHdvcmRSRSwgcmVzdWx0LCBzZWVuLCBpZ25vcmVBdCk7XG4gICAgfVxuICAgIGlmIChiaWcgJiYgcmVzdWx0Lmxlbmd0aCA8IDIwMDAgLyogQy5NYXhMaXN0ICovKVxuICAgICAgICBjYWNoZS5zZXQoZG9jLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkEgY29tcGxldGlvbiBzb3VyY2UgdGhhdCB3aWxsIHNjYW4gdGhlIGRvY3VtZW50IGZvciB3b3JkcyAodXNpbmcgYVxuW2NoYXJhY3RlciBjYXRlZ29yaXplcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIpKSwgYW5kXG5yZXR1cm4gdGhvc2UgYXMgY29tcGxldGlvbnMuXG4qL1xuY29uc3QgY29tcGxldGVBbnlXb3JkID0gY29udGV4dCA9PiB7XG4gICAgbGV0IHdvcmRDaGFycyA9IGNvbnRleHQuc3RhdGUubGFuZ3VhZ2VEYXRhQXQoXCJ3b3JkQ2hhcnNcIiwgY29udGV4dC5wb3MpLmpvaW4oXCJcIik7XG4gICAgbGV0IHJlID0gd29yZFJFKHdvcmRDaGFycyk7XG4gICAgbGV0IHRva2VuID0gY29udGV4dC5tYXRjaEJlZm9yZShtYXBSRShyZSwgcyA9PiBzICsgXCIkXCIpKTtcbiAgICBpZiAoIXRva2VuICYmICFjb250ZXh0LmV4cGxpY2l0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZnJvbSA9IHRva2VuID8gdG9rZW4uZnJvbSA6IGNvbnRleHQucG9zO1xuICAgIGxldCBvcHRpb25zID0gY29sbGVjdFdvcmRzKGNvbnRleHQuc3RhdGUuZG9jLCB3b3JkQ2FjaGUod29yZENoYXJzKSwgcmUsIDUwMDAwIC8qIEMuUmFuZ2UgKi8sIGZyb20pO1xuICAgIHJldHVybiB7IGZyb20sIG9wdGlvbnMsIHZhbGlkRm9yOiBtYXBSRShyZSwgcyA9PiBcIl5cIiArIHMpIH07XG59O1xuXG5jb25zdCBkZWZhdWx0cyA9IHtcbiAgICBicmFja2V0czogW1wiKFwiLCBcIltcIiwgXCJ7XCIsIFwiJ1wiLCAnXCInXSxcbiAgICBiZWZvcmU6IFwiKV19Ojs+XCIsXG4gICAgc3RyaW5nUHJlZml4ZXM6IFtdXG59O1xuY29uc3QgY2xvc2VCcmFja2V0RWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7XG4gICAgbWFwKHZhbHVlLCBtYXBwaW5nKSB7XG4gICAgICAgIGxldCBtYXBwZWQgPSBtYXBwaW5nLm1hcFBvcyh2YWx1ZSwgLTEsIE1hcE1vZGUuVHJhY2tBZnRlcik7XG4gICAgICAgIHJldHVybiBtYXBwZWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1hcHBlZDtcbiAgICB9XG59KTtcbmNvbnN0IGNsb3NlZEJyYWNrZXQgPSAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG59O1xuY2xvc2VkQnJhY2tldC5zdGFydFNpZGUgPSAxO1xuY2xvc2VkQnJhY2tldC5lbmRTaWRlID0gLTE7XG5jb25zdCBicmFja2V0U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIFJhbmdlU2V0LmVtcHR5OyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gdHIuc3RhdGUuZG9jLmxpbmVBdCh0ci5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlKHsgZmlsdGVyOiBmcm9tID0+IGZyb20gPj0gbGluZS5mcm9tICYmIGZyb20gPD0gbGluZS50byB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoY2xvc2VCcmFja2V0RWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnVwZGF0ZSh7IGFkZDogW2Nsb3NlZEJyYWNrZXQucmFuZ2UoZWZmZWN0LnZhbHVlLCBlZmZlY3QudmFsdWUgKyAxKV0gfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuRXh0ZW5zaW9uIHRvIGVuYWJsZSBicmFja2V0LWNsb3NpbmcgYmVoYXZpb3IuIFdoZW4gYSBjbG9zZWFibGVcbmJyYWNrZXQgaXMgdHlwZWQsIGl0cyBjbG9zaW5nIGJyYWNrZXQgaXMgaW1tZWRpYXRlbHkgaW5zZXJ0ZWRcbmFmdGVyIHRoZSBjdXJzb3IuIFdoZW4gY2xvc2luZyBhIGJyYWNrZXQgZGlyZWN0bHkgaW4gZnJvbnQgb2YgYVxuY2xvc2luZyBicmFja2V0IGluc2VydGVkIGJ5IHRoZSBleHRlbnNpb24sIHRoZSBjdXJzb3IgbW92ZXMgb3ZlclxudGhhdCBicmFja2V0LlxuKi9cbmZ1bmN0aW9uIGNsb3NlQnJhY2tldHMoKSB7XG4gICAgcmV0dXJuIFtpbnB1dEhhbmRsZXIsIGJyYWNrZXRTdGF0ZV07XG59XG5jb25zdCBkZWZpbmVkQ2xvc2luZyA9IFwiKClbXXt9PD7Cq8K7wrvCq++8u++8ve+9m++9nVwiO1xuZnVuY3Rpb24gY2xvc2luZyhjaCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmaW5lZENsb3NpbmcubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgIGlmIChkZWZpbmVkQ2xvc2luZy5jaGFyQ29kZUF0KGkpID09IGNoKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmluZWRDbG9zaW5nLmNoYXJBdChpICsgMSk7XG4gICAgcmV0dXJuIGZyb21Db2RlUG9pbnQoY2ggPCAxMjggPyBjaCA6IGNoICsgMSk7XG59XG5mdW5jdGlvbiBjb25maWcoc3RhdGUsIHBvcykge1xuICAgIHJldHVybiBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImNsb3NlQnJhY2tldHNcIiwgcG9zKVswXSB8fCBkZWZhdWx0cztcbn1cbmNvbnN0IGFuZHJvaWQgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwib2JqZWN0XCIgJiYgLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuY29uc3QgaW5wdXRIYW5kbGVyID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuaW5wdXRIYW5kbGVyLm9mKCh2aWV3LCBmcm9tLCB0bywgaW5zZXJ0KSA9PiB7XG4gICAgaWYgKChhbmRyb2lkID8gdmlldy5jb21wb3NpbmcgOiB2aWV3LmNvbXBvc2l0aW9uU3RhcnRlZCkgfHwgdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGlmIChpbnNlcnQubGVuZ3RoID4gMiB8fCBpbnNlcnQubGVuZ3RoID09IDIgJiYgY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChpbnNlcnQsIDApKSA9PSAxIHx8XG4gICAgICAgIGZyb20gIT0gc2VsLmZyb20gfHwgdG8gIT0gc2VsLnRvKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHRyID0gaW5zZXJ0QnJhY2tldCh2aWV3LnN0YXRlLCBpbnNlcnQpO1xuICAgIGlmICghdHIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuLyoqXG5Db21tYW5kIHRoYXQgaW1wbGVtZW50cyBkZWxldGluZyBhIHBhaXIgb2YgbWF0Y2hpbmcgYnJhY2tldHMgd2hlblxudGhlIGN1cnNvciBpcyBiZXR3ZWVuIHRoZW0uXG4qL1xuY29uc3QgZGVsZXRlQnJhY2tldFBhaXIgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjb25mID0gY29uZmlnKHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICBsZXQgdG9rZW5zID0gY29uZi5icmFja2V0cyB8fCBkZWZhdWx0cy5icmFja2V0cztcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gcHJldkNoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbiA9PSBiZWZvcmUgJiYgbmV4dENoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKSA9PSBjbG9zaW5nKGNvZGVQb2ludEF0KHRva2VuLCAwKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuaGVhZCAtIHRva2VuLmxlbmd0aCwgdG86IHJhbmdlLmhlYWQgKyB0b2tlbi5sZW5ndGggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmhlYWQgLSB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IGRvbnQgPSByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmICghZG9udClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJkZWxldGUuYmFja3dhcmRcIiB9KSk7XG4gICAgcmV0dXJuICFkb250O1xufTtcbi8qKlxuQ2xvc2UtYnJhY2tldHMgcmVsYXRlZCBrZXkgYmluZGluZ3MuIEJpbmRzIEJhY2tzcGFjZSB0b1xuW2BkZWxldGVCcmFja2V0UGFpcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmRlbGV0ZUJyYWNrZXRQYWlyKS5cbiovXG5jb25zdCBjbG9zZUJyYWNrZXRzS2V5bWFwID0gW1xuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUJyYWNrZXRQYWlyIH1cbl07XG4vKipcbkltcGxlbWVudHMgdGhlIGV4dGVuc2lvbidzIGJlaGF2aW9yIG9uIHRleHQgaW5zZXJ0aW9uLiBJZiB0aGVcbmdpdmVuIHN0cmluZyBjb3VudHMgYXMgYSBicmFja2V0IGluIHRoZSBsYW5ndWFnZSBhcm91bmQgdGhlXG5zZWxlY3Rpb24sIGFuZCByZXBsYWNpbmcgdGhlIHNlbGVjdGlvbiB3aXRoIGl0IHJlcXVpcmVzIGN1c3RvbVxuYmVoYXZpb3IgKGluc2VydGluZyBhIGNsb3NpbmcgdmVyc2lvbiBvciBza2lwcGluZyBwYXN0IGFcbnByZXZpb3VzbHktY2xvc2VkIGJyYWNrZXQpLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSB0cmFuc2FjdGlvblxucmVwcmVzZW50aW5nIHRoYXQgY3VzdG9tIGJlaGF2aW9yLiAoWW91IG9ubHkgbmVlZCB0aGlzIGlmIHlvdSB3YW50XG50byBwcm9ncmFtbWF0aWNhbGx5IGluc2VydCBicmFja2V0c+KAlHRoZVxuW2BjbG9zZUJyYWNrZXRzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xvc2VCcmFja2V0cykgZXh0ZW5zaW9uIHdpbGxcbnRha2UgY2FyZSBvZiBydW5uaW5nIHRoaXMgZm9yIHVzZXIgaW5wdXQuKVxuKi9cbmZ1bmN0aW9uIGluc2VydEJyYWNrZXQoc3RhdGUsIGJyYWNrZXQpIHtcbiAgICBsZXQgY29uZiA9IGNvbmZpZyhzdGF0ZSwgc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgbGV0IHRva2VucyA9IGNvbmYuYnJhY2tldHMgfHwgZGVmYXVsdHMuYnJhY2tldHM7XG4gICAgZm9yIChsZXQgdG9rIG9mIHRva2Vucykge1xuICAgICAgICBsZXQgY2xvc2VkID0gY2xvc2luZyhjb2RlUG9pbnRBdCh0b2ssIDApKTtcbiAgICAgICAgaWYgKGJyYWNrZXQgPT0gdG9rKVxuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZCA9PSB0b2sgPyBoYW5kbGVTYW1lKHN0YXRlLCB0b2ssIHRva2Vucy5pbmRleE9mKHRvayArIHRvayArIHRvaykgPiAtMSwgY29uZilcbiAgICAgICAgICAgICAgICA6IGhhbmRsZU9wZW4oc3RhdGUsIHRvaywgY2xvc2VkLCBjb25mLmJlZm9yZSB8fCBkZWZhdWx0cy5iZWZvcmUpO1xuICAgICAgICBpZiAoYnJhY2tldCA9PSBjbG9zZWQgJiYgY2xvc2VkQnJhY2tldEF0KHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tKSlcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbG9zZShzdGF0ZSwgdG9rLCBjbG9zZWQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNsb3NlZEJyYWNrZXRBdChzdGF0ZSwgcG9zKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgc3RhdGUuZmllbGQoYnJhY2tldFN0YXRlKS5iZXR3ZWVuKDAsIHN0YXRlLmRvYy5sZW5ndGgsIGZyb20gPT4ge1xuICAgICAgICBpZiAoZnJvbSA9PSBwb3MpXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gbmV4dENoYXIoZG9jLCBwb3MpIHtcbiAgICBsZXQgbmV4dCA9IGRvYy5zbGljZVN0cmluZyhwb3MsIHBvcyArIDIpO1xuICAgIHJldHVybiBuZXh0LnNsaWNlKDAsIGNvZGVQb2ludFNpemUoY29kZVBvaW50QXQobmV4dCwgMCkpKTtcbn1cbmZ1bmN0aW9uIHByZXZDaGFyKGRvYywgcG9zKSB7XG4gICAgbGV0IHByZXYgPSBkb2Muc2xpY2VTdHJpbmcocG9zIC0gMiwgcG9zKTtcbiAgICByZXR1cm4gY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChwcmV2LCAwKSkgPT0gcHJldi5sZW5ndGggPyBwcmV2IDogcHJldi5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU9wZW4oc3RhdGUsIG9wZW4sIGNsb3NlLCBjbG9zZUJlZm9yZSkge1xuICAgIGxldCBkb250ID0gbnVsbCwgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogW3sgaW5zZXJ0OiBvcGVuLCBmcm9tOiByYW5nZS5mcm9tIH0sIHsgaW5zZXJ0OiBjbG9zZSwgZnJvbTogcmFuZ2UudG8gfV0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLnRvICsgb3Blbi5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuYW5jaG9yICsgb3Blbi5sZW5ndGgsIHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCkgfTtcbiAgICAgICAgbGV0IG5leHQgPSBuZXh0Q2hhcihzdGF0ZS5kb2MsIHJhbmdlLmhlYWQpO1xuICAgICAgICBpZiAoIW5leHQgfHwgL1xccy8udGVzdChuZXh0KSB8fCBjbG9zZUJlZm9yZS5pbmRleE9mKG5leHQpID4gLTEpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGluc2VydDogb3BlbiArIGNsb3NlLCBmcm9tOiByYW5nZS5oZWFkIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIG9wZW4ubGVuZ3RoKSB9O1xuICAgICAgICByZXR1cm4geyByYW5nZTogZG9udCA9IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNsb3NlKHN0YXRlLCBfb3BlbiwgY2xvc2UpIHtcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5ICYmIG5leHRDaGFyKHN0YXRlLmRvYywgcmFuZ2UuaGVhZCkgPT0gY2xvc2UpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmhlYWQsIHRvOiByYW5nZS5oZWFkICsgY2xvc2UubGVuZ3RoLCBpbnNlcnQ6IGNsb3NlIH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIGNsb3NlLmxlbmd0aCkgfTtcbiAgICAgICAgcmV0dXJuIGRvbnQgPSB7IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbi8vIEhhbmRsZXMgY2FzZXMgd2hlcmUgdGhlIG9wZW4gYW5kIGNsb3NlIHRva2VuIGFyZSB0aGUgc2FtZSwgYW5kXG4vLyBwb3NzaWJseSB0cmlwbGUgcXVvdGVzIChhcyBpbiBgXCJcIlwiYWJjXCJcIlwiYC1zdHlsZSBxdW90aW5nKS5cbmZ1bmN0aW9uIGhhbmRsZVNhbWUoc3RhdGUsIHRva2VuLCBhbGxvd1RyaXBsZSwgY29uZmlnKSB7XG4gICAgbGV0IHN0cmluZ1ByZWZpeGVzID0gY29uZmlnLnN0cmluZ1ByZWZpeGVzIHx8IGRlZmF1bHRzLnN0cmluZ1ByZWZpeGVzO1xuICAgIGxldCBkb250ID0gbnVsbCwgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogW3sgaW5zZXJ0OiB0b2tlbiwgZnJvbTogcmFuZ2UuZnJvbSB9LCB7IGluc2VydDogdG9rZW4sIGZyb206IHJhbmdlLnRvIH1dLFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IGNsb3NlQnJhY2tldEVmZmVjdC5vZihyYW5nZS50byArIHRva2VuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5hbmNob3IgKyB0b2tlbi5sZW5ndGgsIHJhbmdlLmhlYWQgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgIGxldCBwb3MgPSByYW5nZS5oZWFkLCBuZXh0ID0gbmV4dENoYXIoc3RhdGUuZG9jLCBwb3MpLCBzdGFydDtcbiAgICAgICAgaWYgKG5leHQgPT0gdG9rZW4pIHtcbiAgICAgICAgICAgIGlmIChub2RlU3RhcnQoc3RhdGUsIHBvcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGluc2VydDogdG9rZW4gKyB0b2tlbiwgZnJvbTogcG9zIH0sXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdHM6IGNsb3NlQnJhY2tldEVmZmVjdC5vZihwb3MgKyB0b2tlbi5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbG9zZWRCcmFja2V0QXQoc3RhdGUsIHBvcykpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXNUcmlwbGUgPSBhbGxvd1RyaXBsZSAmJiBzdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIHRva2VuLmxlbmd0aCAqIDMpID09IHRva2VuICsgdG9rZW4gKyB0b2tlbjtcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGlzVHJpcGxlID8gdG9rZW4gKyB0b2tlbiArIHRva2VuIDogdG9rZW47XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiBwb3MsIHRvOiBwb3MgKyBjb250ZW50Lmxlbmd0aCwgaW5zZXJ0OiBjb250ZW50IH0sXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyArIGNvbnRlbnQubGVuZ3RoKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFsbG93VHJpcGxlICYmIHN0YXRlLnNsaWNlRG9jKHBvcyAtIDIgKiB0b2tlbi5sZW5ndGgsIHBvcykgPT0gdG9rZW4gKyB0b2tlbiAmJlxuICAgICAgICAgICAgKHN0YXJ0ID0gY2FuU3RhcnRTdHJpbmdBdChzdGF0ZSwgcG9zIC0gMiAqIHRva2VuLmxlbmd0aCwgc3RyaW5nUHJlZml4ZXMpKSA+IC0xICYmXG4gICAgICAgICAgICBub2RlU3RhcnQoc3RhdGUsIHN0YXJ0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBpbnNlcnQ6IHRva2VuICsgdG9rZW4gKyB0b2tlbiArIHRva2VuLCBmcm9tOiBwb3MgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBjbG9zZUJyYWNrZXRFZmZlY3Qub2YocG9zICsgdG9rZW4ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcykobmV4dCkgIT0gQ2hhckNhdGVnb3J5LldvcmQpIHtcbiAgICAgICAgICAgIGlmIChjYW5TdGFydFN0cmluZ0F0KHN0YXRlLCBwb3MsIHN0cmluZ1ByZWZpeGVzKSA+IC0xICYmICFwcm9iYWJseUluU3RyaW5nKHN0YXRlLCBwb3MsIHRva2VuLCBzdHJpbmdQcmVmaXhlcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBpbnNlcnQ6IHRva2VuICsgdG9rZW4sIGZyb206IHBvcyB9LFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RzOiBjbG9zZUJyYWNrZXRFZmZlY3Qub2YocG9zICsgdG9rZW4ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zICsgdG9rZW4ubGVuZ3RoKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhbmdlOiBkb250ID0gcmFuZ2UgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gZG9udCA/IG51bGwgOiBzdGF0ZS51cGRhdGUoY2hhbmdlcywge1xuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnR5cGVcIlxuICAgIH0pO1xufVxuZnVuY3Rpb24gbm9kZVN0YXJ0KHN0YXRlLCBwb3MpIHtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MgKyAxKTtcbiAgICByZXR1cm4gdHJlZS5wYXJlbnQgJiYgdHJlZS5mcm9tID09IHBvcztcbn1cbmZ1bmN0aW9uIHByb2JhYmx5SW5TdHJpbmcoc3RhdGUsIHBvcywgcXVvdGVUb2tlbiwgcHJlZml4ZXMpIHtcbiAgICBsZXQgbm9kZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MsIC0xKTtcbiAgICBsZXQgbWF4UHJlZml4ID0gcHJlZml4ZXMucmVkdWNlKChtLCBwKSA9PiBNYXRoLm1heChtLCBwLmxlbmd0aCksIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHN0YXRlLnNsaWNlRG9jKG5vZGUuZnJvbSwgTWF0aC5taW4obm9kZS50bywgbm9kZS5mcm9tICsgcXVvdGVUb2tlbi5sZW5ndGggKyBtYXhQcmVmaXgpKTtcbiAgICAgICAgbGV0IHF1b3RlUG9zID0gc3RhcnQuaW5kZXhPZihxdW90ZVRva2VuKTtcbiAgICAgICAgaWYgKCFxdW90ZVBvcyB8fCBxdW90ZVBvcyA+IC0xICYmIHByZWZpeGVzLmluZGV4T2Yoc3RhcnQuc2xpY2UoMCwgcXVvdGVQb3MpKSA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAoZmlyc3QgJiYgZmlyc3QuZnJvbSA9PSBub2RlLmZyb20gJiYgZmlyc3QudG8gLSBmaXJzdC5mcm9tID4gcXVvdGVUb2tlbi5sZW5ndGggKyBxdW90ZVBvcykge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zbGljZURvYyhmaXJzdC50byAtIHF1b3RlVG9rZW4ubGVuZ3RoLCBmaXJzdC50bykgPT0gcXVvdGVUb2tlbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGZpcnN0ID0gZmlyc3QuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnRvID09IHBvcyAmJiBub2RlLnBhcmVudDtcbiAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY2FuU3RhcnRTdHJpbmdBdChzdGF0ZSwgcG9zLCBwcmVmaXhlcykge1xuICAgIGxldCBjaGFyQ2F0ID0gc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgaWYgKGNoYXJDYXQoc3RhdGUuc2xpY2VEb2MocG9zIC0gMSwgcG9zKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgZm9yIChsZXQgcHJlZml4IG9mIHByZWZpeGVzKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHBvcyAtIHByZWZpeC5sZW5ndGg7XG4gICAgICAgIGlmIChzdGF0ZS5zbGljZURvYyhzdGFydCwgcG9zKSA9PSBwcmVmaXggJiYgY2hhckNhdChzdGF0ZS5zbGljZURvYyhzdGFydCAtIDEsIHN0YXJ0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgYXV0b2NvbXBsZXRpb24uXG4qL1xuZnVuY3Rpb24gYXV0b2NvbXBsZXRpb24oY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBjb21taXRDaGFyYWN0ZXJzLFxuICAgICAgICBjb21wbGV0aW9uU3RhdGUsXG4gICAgICAgIGNvbXBsZXRpb25Db25maWcub2YoY29uZmlnKSxcbiAgICAgICAgY29tcGxldGlvblBsdWdpbixcbiAgICAgICAgY29tcGxldGlvbktleW1hcEV4dCxcbiAgICAgICAgYmFzZVRoZW1lXG4gICAgXTtcbn1cbi8qKlxuQmFzaWMga2V5YmluZGluZ3MgZm9yIGF1dG9jb21wbGV0aW9uLlxuXG4gLSBDdHJsLVNwYWNlIChhbmQgQWx0LVxcYCBvbiBtYWNPUyk6IFtgc3RhcnRDb21wbGV0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuc3RhcnRDb21wbGV0aW9uKVxuIC0gRXNjYXBlOiBbYGNsb3NlQ29tcGxldGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmNsb3NlQ29tcGxldGlvbilcbiAtIEFycm93RG93bjogW2Btb3ZlQ29tcGxldGlvblNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm1vdmVDb21wbGV0aW9uU2VsZWN0aW9uKWAodHJ1ZSlgXG4gLSBBcnJvd1VwOiBbYG1vdmVDb21wbGV0aW9uU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubW92ZUNvbXBsZXRpb25TZWxlY3Rpb24pYChmYWxzZSlgXG4gLSBQYWdlRG93bjogW2Btb3ZlQ29tcGxldGlvblNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm1vdmVDb21wbGV0aW9uU2VsZWN0aW9uKWAodHJ1ZSwgXCJwYWdlXCIpYFxuIC0gUGFnZURvd246IFtgbW92ZUNvbXBsZXRpb25TZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5tb3ZlQ29tcGxldGlvblNlbGVjdGlvbilgKHRydWUsIFwicGFnZVwiKWBcbiAtIEVudGVyOiBbYGFjY2VwdENvbXBsZXRpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5hY2NlcHRDb21wbGV0aW9uKVxuKi9cbmNvbnN0IGNvbXBsZXRpb25LZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiQ3RybC1TcGFjZVwiLCBydW46IHN0YXJ0Q29tcGxldGlvbiB9LFxuICAgIHsgbWFjOiBcIkFsdC1gXCIsIHJ1bjogc3RhcnRDb21wbGV0aW9uIH0sXG4gICAgeyBrZXk6IFwiRXNjYXBlXCIsIHJ1bjogY2xvc2VDb21wbGV0aW9uIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dEb3duXCIsIHJ1bjogLypAX19QVVJFX18qL21vdmVDb21wbGV0aW9uU2VsZWN0aW9uKHRydWUpIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dVcFwiLCBydW46IC8qQF9fUFVSRV9fKi9tb3ZlQ29tcGxldGlvblNlbGVjdGlvbihmYWxzZSkgfSxcbiAgICB7IGtleTogXCJQYWdlRG93blwiLCBydW46IC8qQF9fUFVSRV9fKi9tb3ZlQ29tcGxldGlvblNlbGVjdGlvbih0cnVlLCBcInBhZ2VcIikgfSxcbiAgICB7IGtleTogXCJQYWdlVXBcIiwgcnVuOiAvKkBfX1BVUkVfXyovbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24oZmFsc2UsIFwicGFnZVwiKSB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIHJ1bjogYWNjZXB0Q29tcGxldGlvbiB9XG5dO1xuY29uc3QgY29tcGxldGlvbktleW1hcEV4dCA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL2tleW1hcC5jb21wdXRlTihbY29tcGxldGlvbkNvbmZpZ10sIHN0YXRlID0+IHN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLmRlZmF1bHRLZXltYXAgPyBbY29tcGxldGlvbktleW1hcF0gOiBbXSkpO1xuLyoqXG5HZXQgdGhlIGN1cnJlbnQgY29tcGxldGlvbiBzdGF0dXMuIFdoZW4gY29tcGxldGlvbnMgYXJlIGF2YWlsYWJsZSxcbnRoaXMgd2lsbCByZXR1cm4gYFwiYWN0aXZlXCJgLiBXaGVuIGNvbXBsZXRpb25zIGFyZSBwZW5kaW5nIChpbiB0aGVcbnByb2Nlc3Mgb2YgYmVpbmcgcXVlcmllZCksIHRoaXMgcmV0dXJucyBgXCJwZW5kaW5nXCJgLiBPdGhlcndpc2UsIGl0XG5yZXR1cm5zIGBudWxsYC5cbiovXG5mdW5jdGlvbiBjb21wbGV0aW9uU3RhdHVzKHN0YXRlKSB7XG4gICAgbGV0IGNTdGF0ZSA9IHN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiBjU3RhdGUgJiYgY1N0YXRlLmFjdGl2ZS5zb21lKGEgPT4gYS5pc1BlbmRpbmcpID8gXCJwZW5kaW5nXCJcbiAgICAgICAgOiBjU3RhdGUgJiYgY1N0YXRlLmFjdGl2ZS5zb21lKGEgPT4gYS5zdGF0ZSAhPSAwIC8qIFN0YXRlLkluYWN0aXZlICovKSA/IFwiYWN0aXZlXCIgOiBudWxsO1xufVxuY29uc3QgY29tcGxldGlvbkFycmF5Q2FjaGUgPSAvKkBfX1BVUkVfXyovbmV3IFdlYWtNYXA7XG4vKipcblJldHVybnMgdGhlIGF2YWlsYWJsZSBjb21wbGV0aW9ucyBhcyBhbiBhcnJheS5cbiovXG5mdW5jdGlvbiBjdXJyZW50Q29tcGxldGlvbnMoc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgaWYgKCFvcGVuIHx8IG9wZW4uZGlzYWJsZWQpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICBsZXQgY29tcGxldGlvbnMgPSBjb21wbGV0aW9uQXJyYXlDYWNoZS5nZXQob3Blbi5vcHRpb25zKTtcbiAgICBpZiAoIWNvbXBsZXRpb25zKVxuICAgICAgICBjb21wbGV0aW9uQXJyYXlDYWNoZS5zZXQob3Blbi5vcHRpb25zLCBjb21wbGV0aW9ucyA9IG9wZW4ub3B0aW9ucy5tYXAobyA9PiBvLmNvbXBsZXRpb24pKTtcbiAgICByZXR1cm4gY29tcGxldGlvbnM7XG59XG4vKipcblJldHVybiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbXBsZXRpb24sIGlmIGFueS5cbiovXG5mdW5jdGlvbiBzZWxlY3RlZENvbXBsZXRpb24oc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgcmV0dXJuIG9wZW4gJiYgIW9wZW4uZGlzYWJsZWQgJiYgb3Blbi5zZWxlY3RlZCA+PSAwID8gb3Blbi5vcHRpb25zW29wZW4uc2VsZWN0ZWRdLmNvbXBsZXRpb24gOiBudWxsO1xufVxuLyoqXG5SZXR1cm5zIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcG9zaXRpb24gaW4gdGhlIGFjdGl2ZSBjb21wbGV0aW9uXG5saXN0LCBvciBudWxsIGlmIG5vIGNvbXBsZXRpb25zIGFyZSBhY3RpdmUuXG4qL1xuZnVuY3Rpb24gc2VsZWN0ZWRDb21wbGV0aW9uSW5kZXgoc3RhdGUpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG9wZW4gPSAoX2EgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZW47XG4gICAgcmV0dXJuIG9wZW4gJiYgIW9wZW4uZGlzYWJsZWQgJiYgb3Blbi5zZWxlY3RlZCA+PSAwID8gb3Blbi5zZWxlY3RlZCA6IG51bGw7XG59XG4vKipcbkNyZWF0ZSBhbiBlZmZlY3QgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gYSB0cmFuc2FjdGlvbiB0byBjaGFuZ2VcbnRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgY29tcGxldGlvbi5cbiovXG5mdW5jdGlvbiBzZXRTZWxlY3RlZENvbXBsZXRpb24oaW5kZXgpIHtcbiAgICByZXR1cm4gc2V0U2VsZWN0ZWRFZmZlY3Qub2YoaW5kZXgpO1xufVxuXG5leHBvcnQgeyBDb21wbGV0aW9uQ29udGV4dCwgYWNjZXB0Q29tcGxldGlvbiwgYXV0b2NvbXBsZXRpb24sIGNsZWFyU25pcHBldCwgY2xvc2VCcmFja2V0cywgY2xvc2VCcmFja2V0c0tleW1hcCwgY2xvc2VDb21wbGV0aW9uLCBjb21wbGV0ZUFueVdvcmQsIGNvbXBsZXRlRnJvbUxpc3QsIGNvbXBsZXRpb25LZXltYXAsIGNvbXBsZXRpb25TdGF0dXMsIGN1cnJlbnRDb21wbGV0aW9ucywgZGVsZXRlQnJhY2tldFBhaXIsIGhhc05leHRTbmlwcGV0RmllbGQsIGhhc1ByZXZTbmlwcGV0RmllbGQsIGlmSW4sIGlmTm90SW4sIGluc2VydEJyYWNrZXQsIGluc2VydENvbXBsZXRpb25UZXh0LCBtb3ZlQ29tcGxldGlvblNlbGVjdGlvbiwgbmV4dFNuaXBwZXRGaWVsZCwgcGlja2VkQ29tcGxldGlvbiwgcHJldlNuaXBwZXRGaWVsZCwgc2VsZWN0ZWRDb21wbGV0aW9uLCBzZWxlY3RlZENvbXBsZXRpb25JbmRleCwgc2V0U2VsZWN0ZWRDb21wbGV0aW9uLCBzbmlwcGV0LCBzbmlwcGV0Q29tcGxldGlvbiwgc25pcHBldEtleW1hcCwgc3RhcnRDb21wbGV0aW9uIH07XG4iLAogICAgImltcG9ydCB7IERlY29yYXRpb24sIHNob3dQYW5lbCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgZ3V0dGVyLCBzaG93VG9vbHRpcCwgaG92ZXJUb29sdGlwLCBnZXRQYW5lbCwgbG9nRXhjZXB0aW9uLCBXaWRnZXRUeXBlLCBHdXR0ZXJNYXJrZXIgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IFN0YXRlRWZmZWN0LCBTdGF0ZUZpZWxkLCBGYWNldCwgY29tYmluZUNvbmZpZywgUmFuZ2VTZXQsIFJhbmdlU2V0QnVpbGRlciB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCBlbHQgZnJvbSAnY3JlbHQnO1xuXG5jbGFzcyBTZWxlY3RlZERpYWdub3N0aWMge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCBkaWFnbm9zdGljKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5kaWFnbm9zdGljID0gZGlhZ25vc3RpYztcbiAgICB9XG59XG5jbGFzcyBMaW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGRpYWdub3N0aWNzLCBwYW5lbCwgc2VsZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5kaWFnbm9zdGljcyA9IGRpYWdub3N0aWNzO1xuICAgICAgICB0aGlzLnBhbmVsID0gcGFuZWw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcbiAgICB9XG4gICAgc3RhdGljIGluaXQoZGlhZ25vc3RpY3MsIHBhbmVsLCBzdGF0ZSkge1xuICAgICAgICAvLyBGaWx0ZXIgdGhlIGxpc3Qgb2YgZGlhZ25vc3RpY3MgZm9yIHdoaWNoIHRvIGNyZWF0ZSBtYXJrZXJzXG4gICAgICAgIGxldCBkaWFnbm9zdGljRmlsdGVyID0gc3RhdGUuZmFjZXQobGludENvbmZpZykubWFya2VyRmlsdGVyO1xuICAgICAgICBpZiAoZGlhZ25vc3RpY0ZpbHRlcilcbiAgICAgICAgICAgIGRpYWdub3N0aWNzID0gZGlhZ25vc3RpY0ZpbHRlcihkaWFnbm9zdGljcywgc3RhdGUpO1xuICAgICAgICBsZXQgc29ydGVkID0gZGlhZ25vc3RpY3Muc2xpY2UoKS5zb3J0KChhLCBiKSA9PiBhLmZyb20gLSBiLmZyb20gfHwgYS50byAtIGIudG8pO1xuICAgICAgICBsZXQgZGVjbyA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKSwgYWN0aXZlID0gW10sIHBvcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaSA9PSBzb3J0ZWQubGVuZ3RoID8gbnVsbCA6IHNvcnRlZFtpXTtcbiAgICAgICAgICAgIGlmICghbmV4dCAmJiAhYWN0aXZlLmxlbmd0aClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCBmcm9tLCB0bztcbiAgICAgICAgICAgIGlmIChhY3RpdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZnJvbSA9IHBvcztcbiAgICAgICAgICAgICAgICB0byA9IGFjdGl2ZS5yZWR1Y2UoKHAsIGQpID0+IE1hdGgubWluKHAsIGQudG8pLCBuZXh0ICYmIG5leHQuZnJvbSA+IGZyb20gPyBuZXh0LmZyb20gOiAxZTgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJvbSA9IG5leHQuZnJvbTtcbiAgICAgICAgICAgICAgICB0byA9IG5leHQudG87XG4gICAgICAgICAgICAgICAgYWN0aXZlLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBzb3J0ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBzb3J0ZWRbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQuZnJvbSA9PSBmcm9tICYmIChuZXh0LnRvID4gbmV4dC5mcm9tIHx8IG5leHQudG8gPT0gZnJvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBNYXRoLm1pbihuZXh0LnRvLCB0byk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWluKG5leHQuZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2V2ID0gbWF4U2V2ZXJpdHkoYWN0aXZlKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmUuc29tZShkID0+IGQuZnJvbSA9PSBkLnRvIHx8IChkLmZyb20gPT0gZC50byAtIDEgJiYgc3RhdGUuZG9jLmxpbmVBdChkLmZyb20pLnRvID09IGQuZnJvbSkpKSB7XG4gICAgICAgICAgICAgICAgZGVjby5hZGQoZnJvbSwgZnJvbSwgRGVjb3JhdGlvbi53aWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICB3aWRnZXQ6IG5ldyBEaWFnbm9zdGljV2lkZ2V0KHNldiksXG4gICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzOiBhY3RpdmUuc2xpY2UoKVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBtYXJrQ2xhc3MgPSBhY3RpdmUucmVkdWNlKChjLCBkKSA9PiBkLm1hcmtDbGFzcyA/IGMgKyBcIiBcIiArIGQubWFya0NsYXNzIDogYywgXCJcIik7XG4gICAgICAgICAgICAgICAgZGVjby5hZGQoZnJvbSwgdG8sIERlY29yYXRpb24ubWFyayh7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNtLWxpbnRSYW5nZSBjbS1saW50UmFuZ2UtXCIgKyBzZXYgKyBtYXJrQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzOiBhY3RpdmUuc2xpY2UoKSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlRW5kOiBhY3RpdmUuc29tZShhID0+IGEudG8gPiB0bylcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSB0bztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVbaV0udG8gPD0gcG9zKVxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNldCA9IGRlY28uZmluaXNoKCk7XG4gICAgICAgIHJldHVybiBuZXcgTGludFN0YXRlKHNldCwgcGFuZWwsIGZpbmREaWFnbm9zdGljKHNldCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbmREaWFnbm9zdGljKGRpYWdub3N0aWNzLCBkaWFnbm9zdGljID0gbnVsbCwgYWZ0ZXIgPSAwKSB7XG4gICAgbGV0IGZvdW5kID0gbnVsbDtcbiAgICBkaWFnbm9zdGljcy5iZXR3ZWVuKGFmdGVyLCAxZTksIChmcm9tLCB0bywgeyBzcGVjIH0pID0+IHtcbiAgICAgICAgaWYgKGRpYWdub3N0aWMgJiYgc3BlYy5kaWFnbm9zdGljcy5pbmRleE9mKGRpYWdub3N0aWMpIDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgIGZvdW5kID0gbmV3IFNlbGVjdGVkRGlhZ25vc3RpYyhmcm9tLCB0bywgZGlhZ25vc3RpYyB8fCBzcGVjLmRpYWdub3N0aWNzWzBdKTtcbiAgICAgICAgZWxzZSBpZiAoc3BlYy5kaWFnbm9zdGljcy5pbmRleE9mKGZvdW5kLmRpYWdub3N0aWMpIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm91bmQgPSBuZXcgU2VsZWN0ZWREaWFnbm9zdGljKGZvdW5kLmZyb20sIHRvLCBmb3VuZC5kaWFnbm9zdGljKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmQ7XG59XG5mdW5jdGlvbiBoaWRlVG9vbHRpcCh0ciwgdG9vbHRpcCkge1xuICAgIGxldCBmcm9tID0gdG9vbHRpcC5wb3MsIHRvID0gdG9vbHRpcC5lbmQgfHwgZnJvbTtcbiAgICBsZXQgcmVzdWx0ID0gdHIuc3RhdGUuZmFjZXQobGludENvbmZpZykuaGlkZU9uKHRyLCBmcm9tLCB0byk7XG4gICAgaWYgKHJlc3VsdCAhPSBudWxsKVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGxldCBsaW5lID0gdHIuc3RhcnRTdGF0ZS5kb2MubGluZUF0KHRvb2x0aXAucG9zKTtcbiAgICByZXR1cm4gISEodHIuZWZmZWN0cy5zb21lKGUgPT4gZS5pcyhzZXREaWFnbm9zdGljc0VmZmVjdCkpIHx8IHRyLmNoYW5nZXMudG91Y2hlc1JhbmdlKGxpbmUuZnJvbSwgTWF0aC5tYXgobGluZS50bywgdG8pKSk7XG59XG5mdW5jdGlvbiBtYXliZUVuYWJsZUxpbnQoc3RhdGUsIGVmZmVjdHMpIHtcbiAgICByZXR1cm4gc3RhdGUuZmllbGQobGludFN0YXRlLCBmYWxzZSkgPyBlZmZlY3RzIDogZWZmZWN0cy5jb25jYXQoU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKGxpbnRFeHRlbnNpb25zKSk7XG59XG4vKipcblJldHVybnMgYSB0cmFuc2FjdGlvbiBzcGVjIHdoaWNoIHVwZGF0ZXMgdGhlIGN1cnJlbnQgc2V0IG9mXG5kaWFnbm9zdGljcywgYW5kIGVuYWJsZXMgdGhlIGxpbnQgZXh0ZW5zaW9uIGlmIGlmIHdhc24ndCBhbHJlYWR5XG5hY3RpdmUuXG4qL1xuZnVuY3Rpb24gc2V0RGlhZ25vc3RpY3Moc3RhdGUsIGRpYWdub3N0aWNzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZWZmZWN0czogbWF5YmVFbmFibGVMaW50KHN0YXRlLCBbc2V0RGlhZ25vc3RpY3NFZmZlY3Qub2YoZGlhZ25vc3RpY3MpXSlcbiAgICB9O1xufVxuLyoqXG5UaGUgc3RhdGUgZWZmZWN0IHRoYXQgdXBkYXRlcyB0aGUgc2V0IG9mIGFjdGl2ZSBkaWFnbm9zdGljcy4gQ2FuXG5iZSB1c2VmdWwgd2hlbiB3cml0aW5nIGFuIGV4dGVuc2lvbiB0aGF0IG5lZWRzIHRvIHRyYWNrIHRoZXNlLlxuKi9cbmNvbnN0IHNldERpYWdub3N0aWNzRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgdG9nZ2xlUGFuZWwgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBtb3ZlUGFuZWxTZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBsaW50U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW50U3RhdGUoRGVjb3JhdGlvbi5ub25lLCBudWxsLCBudWxsKTtcbiAgICB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgaWYgKHRyLmRvY0NoYW5nZWQgJiYgdmFsdWUuZGlhZ25vc3RpY3Muc2l6ZSkge1xuICAgICAgICAgICAgbGV0IG1hcHBlZCA9IHZhbHVlLmRpYWdub3N0aWNzLm1hcCh0ci5jaGFuZ2VzKSwgc2VsZWN0ZWQgPSBudWxsLCBwYW5lbCA9IHZhbHVlLnBhbmVsO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbFBvcyA9IHRyLmNoYW5nZXMubWFwUG9zKHZhbHVlLnNlbGVjdGVkLmZyb20sIDEpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gZmluZERpYWdub3N0aWMobWFwcGVkLCB2YWx1ZS5zZWxlY3RlZC5kaWFnbm9zdGljLCBzZWxQb3MpIHx8IGZpbmREaWFnbm9zdGljKG1hcHBlZCwgbnVsbCwgc2VsUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFwcGVkLnNpemUgJiYgcGFuZWwgJiYgdHIuc3RhdGUuZmFjZXQobGludENvbmZpZykuYXV0b1BhbmVsKVxuICAgICAgICAgICAgICAgIHBhbmVsID0gbnVsbDtcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IExpbnRTdGF0ZShtYXBwZWQsIHBhbmVsLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0RGlhZ25vc3RpY3NFZmZlY3QpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhbmVsID0gIXRyLnN0YXRlLmZhY2V0KGxpbnRDb25maWcpLmF1dG9QYW5lbCA/IHZhbHVlLnBhbmVsIDogZWZmZWN0LnZhbHVlLmxlbmd0aCA/IExpbnRQYW5lbC5vcGVuIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IExpbnRTdGF0ZS5pbml0KGVmZmVjdC52YWx1ZSwgcGFuZWwsIHRyLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyh0b2dnbGVQYW5lbCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBMaW50U3RhdGUodmFsdWUuZGlhZ25vc3RpY3MsIGVmZmVjdC52YWx1ZSA/IExpbnRQYW5lbC5vcGVuIDogbnVsbCwgdmFsdWUuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKG1vdmVQYW5lbFNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBMaW50U3RhdGUodmFsdWUuZGlhZ25vc3RpY3MsIHZhbHVlLnBhbmVsLCBlZmZlY3QudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gW3Nob3dQYW5lbC5mcm9tKGYsIHZhbCA9PiB2YWwucGFuZWwpLFxuICAgICAgICBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZiwgcyA9PiBzLmRpYWdub3N0aWNzKV1cbn0pO1xuLyoqXG5SZXR1cm5zIHRoZSBudW1iZXIgb2YgYWN0aXZlIGxpbnQgZGlhZ25vc3RpY3MgaW4gdGhlIGdpdmVuIHN0YXRlLlxuKi9cbmZ1bmN0aW9uIGRpYWdub3N0aWNDb3VudChzdGF0ZSkge1xuICAgIGxldCBsaW50ID0gc3RhdGUuZmllbGQobGludFN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuIGxpbnQgPyBsaW50LmRpYWdub3N0aWNzLnNpemUgOiAwO1xufVxuY29uc3QgYWN0aXZlTWFyayA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1saW50UmFuZ2UgY20tbGludFJhbmdlLWFjdGl2ZVwiIH0pO1xuZnVuY3Rpb24gbGludFRvb2x0aXAodmlldywgcG9zLCBzaWRlKSB7XG4gICAgbGV0IHsgZGlhZ25vc3RpY3MgfSA9IHZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKTtcbiAgICBsZXQgZm91bmQsIHN0YXJ0ID0gLTEsIGVuZCA9IC0xO1xuICAgIGRpYWdub3N0aWNzLmJldHdlZW4ocG9zIC0gKHNpZGUgPCAwID8gMSA6IDApLCBwb3MgKyAoc2lkZSA+IDAgPyAxIDogMCksIChmcm9tLCB0bywgeyBzcGVjIH0pID0+IHtcbiAgICAgICAgaWYgKHBvcyA+PSBmcm9tICYmIHBvcyA8PSB0byAmJlxuICAgICAgICAgICAgKGZyb20gPT0gdG8gfHwgKChwb3MgPiBmcm9tIHx8IHNpZGUgPiAwKSAmJiAocG9zIDwgdG8gfHwgc2lkZSA8IDApKSkpIHtcbiAgICAgICAgICAgIGZvdW5kID0gc3BlYy5kaWFnbm9zdGljcztcbiAgICAgICAgICAgIHN0YXJ0ID0gZnJvbTtcbiAgICAgICAgICAgIGVuZCA9IHRvO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGRpYWdub3N0aWNGaWx0ZXIgPSB2aWV3LnN0YXRlLmZhY2V0KGxpbnRDb25maWcpLnRvb2x0aXBGaWx0ZXI7XG4gICAgaWYgKGZvdW5kICYmIGRpYWdub3N0aWNGaWx0ZXIpXG4gICAgICAgIGZvdW5kID0gZGlhZ25vc3RpY0ZpbHRlcihmb3VuZCwgdmlldy5zdGF0ZSk7XG4gICAgaWYgKCFmb3VuZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcG9zOiBzdGFydCxcbiAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgIGFib3ZlOiB2aWV3LnN0YXRlLmRvYy5saW5lQXQoc3RhcnQpLnRvIDwgZW5kLFxuICAgICAgICBjcmVhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkb206IGRpYWdub3N0aWNzVG9vbHRpcCh2aWV3LCBmb3VuZCkgfTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBkaWFnbm9zdGljc1Rvb2x0aXAodmlldywgZGlhZ25vc3RpY3MpIHtcbiAgICByZXR1cm4gZWx0KFwidWxcIiwgeyBjbGFzczogXCJjbS10b29sdGlwLWxpbnRcIiB9LCBkaWFnbm9zdGljcy5tYXAoZCA9PiByZW5kZXJEaWFnbm9zdGljKHZpZXcsIGQsIGZhbHNlKSkpO1xufVxuLyoqXG5Db21tYW5kIHRvIG9wZW4gYW5kIGZvY3VzIHRoZSBsaW50IHBhbmVsLlxuKi9cbmNvbnN0IG9wZW5MaW50UGFuZWwgPSAodmlldykgPT4ge1xuICAgIGxldCBmaWVsZCA9IHZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFmaWVsZCB8fCAhZmllbGQucGFuZWwpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBtYXliZUVuYWJsZUxpbnQodmlldy5zdGF0ZSwgW3RvZ2dsZVBhbmVsLm9mKHRydWUpXSkgfSk7XG4gICAgbGV0IHBhbmVsID0gZ2V0UGFuZWwodmlldywgTGludFBhbmVsLm9wZW4pO1xuICAgIGlmIChwYW5lbClcbiAgICAgICAgcGFuZWwuZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuY20tcGFuZWwtbGludCB1bFwiKS5mb2N1cygpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuQ29tbWFuZCB0byBjbG9zZSB0aGUgbGludCBwYW5lbCwgd2hlbiBvcGVuLlxuKi9cbmNvbnN0IGNsb3NlTGludFBhbmVsID0gKHZpZXcpID0+IHtcbiAgICBsZXQgZmllbGQgPSB2aWV3LnN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghZmllbGQgfHwgIWZpZWxkLnBhbmVsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRvZ2dsZVBhbmVsLm9mKGZhbHNlKSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgbmV4dCBkaWFnbm9zdGljLlxuKi9cbmNvbnN0IG5leHREaWFnbm9zdGljID0gKHZpZXcpID0+IHtcbiAgICBsZXQgZmllbGQgPSB2aWV3LnN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghZmllbGQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbiwgbmV4dCA9IGZpZWxkLmRpYWdub3N0aWNzLml0ZXIoc2VsLnRvICsgMSk7XG4gICAgaWYgKCFuZXh0LnZhbHVlKSB7XG4gICAgICAgIG5leHQgPSBmaWVsZC5kaWFnbm9zdGljcy5pdGVyKDApO1xuICAgICAgICBpZiAoIW5leHQudmFsdWUgfHwgbmV4dC5mcm9tID09IHNlbC5mcm9tICYmIG5leHQudG8gPT0gc2VsLnRvKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2aWV3LmRpc3BhdGNoKHsgc2VsZWN0aW9uOiB7IGFuY2hvcjogbmV4dC5mcm9tLCBoZWFkOiBuZXh0LnRvIH0sIHNjcm9sbEludG9WaWV3OiB0cnVlIH0pO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBwcmV2aW91cyBkaWFnbm9zdGljLlxuKi9cbmNvbnN0IHByZXZpb3VzRGlhZ25vc3RpYyA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGZpZWxkID0gc3RhdGUuZmllbGQobGludFN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFmaWVsZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZWwgPSBzdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICBsZXQgcHJldkZyb20sIHByZXZUbywgbGFzdEZyb20sIGxhc3RUbztcbiAgICBmaWVsZC5kaWFnbm9zdGljcy5iZXR3ZWVuKDAsIHN0YXRlLmRvYy5sZW5ndGgsIChmcm9tLCB0bykgPT4ge1xuICAgICAgICBpZiAodG8gPCBzZWwudG8gJiYgKHByZXZGcm9tID09IG51bGwgfHwgcHJldkZyb20gPCBmcm9tKSkge1xuICAgICAgICAgICAgcHJldkZyb20gPSBmcm9tO1xuICAgICAgICAgICAgcHJldlRvID0gdG87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RGcm9tID09IG51bGwgfHwgZnJvbSA+IGxhc3RGcm9tKSB7XG4gICAgICAgICAgICBsYXN0RnJvbSA9IGZyb207XG4gICAgICAgICAgICBsYXN0VG8gPSB0bztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChsYXN0RnJvbSA9PSBudWxsIHx8IHByZXZGcm9tID09IG51bGwgJiYgbGFzdEZyb20gPT0gc2VsLmZyb20pXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgc2VsZWN0aW9uOiB7IGFuY2hvcjogcHJldkZyb20gIT09IG51bGwgJiYgcHJldkZyb20gIT09IHZvaWQgMCA/IHByZXZGcm9tIDogbGFzdEZyb20sIGhlYWQ6IHByZXZUbyAhPT0gbnVsbCAmJiBwcmV2VG8gIT09IHZvaWQgMCA/IHByZXZUbyA6IGxhc3RUbyB9LCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkEgc2V0IG9mIGRlZmF1bHQga2V5IGJpbmRpbmdzIGZvciB0aGUgbGludCBmdW5jdGlvbmFsaXR5LlxuXG4tIEN0cmwtU2hpZnQtbSAoQ21kLVNoaWZ0LW0gb24gbWFjT1MpOiBbYG9wZW5MaW50UGFuZWxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xpbnQub3BlbkxpbnRQYW5lbClcbi0gRjg6IFtgbmV4dERpYWdub3N0aWNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xpbnQubmV4dERpYWdub3N0aWMpXG4qL1xuY29uc3QgbGludEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJNb2QtU2hpZnQtbVwiLCBydW46IG9wZW5MaW50UGFuZWwsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiRjhcIiwgcnVuOiBuZXh0RGlhZ25vc3RpYyB9XG5dO1xuY29uc3QgbGludFBsdWdpbiA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy5zZXQgPSB0cnVlO1xuICAgICAgICBsZXQgeyBkZWxheSB9ID0gdmlldy5zdGF0ZS5mYWNldChsaW50Q29uZmlnKTtcbiAgICAgICAgdGhpcy5saW50VGltZSA9IERhdGUubm93KCkgKyBkZWxheTtcbiAgICAgICAgdGhpcy5ydW4gPSB0aGlzLnJ1bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMucnVuLCBkZWxheSk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAobm93IDwgdGhpcy5saW50VGltZSAtIDEwKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMucnVuLCB0aGlzLmxpbnRUaW1lIC0gbm93KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdGhpcy52aWV3LCB7IHNvdXJjZXMgfSA9IHN0YXRlLmZhY2V0KGxpbnRDb25maWcpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGJhdGNoUmVzdWx0cyhzb3VyY2VzLm1hcChzID0+IFByb21pc2UucmVzb2x2ZShzKHRoaXMudmlldykpKSwgYW5ub3RhdGlvbnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlLmRvYyA9PSBzdGF0ZS5kb2MpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goc2V0RGlhZ25vc3RpY3ModGhpcy52aWV3LnN0YXRlLCBhbm5vdGF0aW9ucy5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKSkpO1xuICAgICAgICAgICAgICAgIH0sIGVycm9yID0+IHsgbG9nRXhjZXB0aW9uKHRoaXMudmlldy5zdGF0ZSwgZXJyb3IpOyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjb25maWcgPSB1cGRhdGUuc3RhdGUuZmFjZXQobGludENvbmZpZyk7XG4gICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCBjb25maWcgIT0gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQobGludENvbmZpZykgfHxcbiAgICAgICAgICAgIGNvbmZpZy5uZWVkc1JlZnJlc2ggJiYgY29uZmlnLm5lZWRzUmVmcmVzaCh1cGRhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLmxpbnRUaW1lID0gRGF0ZS5ub3coKSArIGNvbmZpZy5kZWxheTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnJ1biwgY29uZmlnLmRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JjZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0KSB7XG4gICAgICAgICAgICB0aGlzLmxpbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHRoaXMucnVuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBiYXRjaFJlc3VsdHMocHJvbWlzZXMsIHNpbmssIGVycm9yKSB7XG4gICAgbGV0IGNvbGxlY3RlZCA9IFtdLCB0aW1lb3V0ID0gLTE7XG4gICAgZm9yIChsZXQgcCBvZiBwcm9taXNlcylcbiAgICAgICAgcC50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGNvbGxlY3RlZC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0ZWQubGVuZ3RoID09IHByb21pc2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBzaW5rKGNvbGxlY3RlZCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc2luayhjb2xsZWN0ZWQpLCAyMDApO1xuICAgICAgICB9LCBlcnJvcik7XG59XG5jb25zdCBsaW50Q29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IHNvdXJjZXM6IGlucHV0Lm1hcChpID0+IGkuc291cmNlKS5maWx0ZXIoeCA9PiB4ICE9IG51bGwpIH0sIGNvbWJpbmVDb25maWcoaW5wdXQubWFwKGkgPT4gaS5jb25maWcpLCB7XG4gICAgICAgICAgICBkZWxheTogNzUwLFxuICAgICAgICAgICAgbWFya2VyRmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgdG9vbHRpcEZpbHRlcjogbnVsbCxcbiAgICAgICAgICAgIG5lZWRzUmVmcmVzaDogbnVsbCxcbiAgICAgICAgICAgIGhpZGVPbjogKCkgPT4gbnVsbCxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmVlZHNSZWZyZXNoOiAoYSwgYikgPT4gIWEgPyBiIDogIWIgPyBhIDogdSA9PiBhKHUpIHx8IGIodSlcbiAgICAgICAgfSkpO1xuICAgIH1cbn0pO1xuLyoqXG5HaXZlbiBhIGRpYWdub3N0aWMgc291cmNlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXRcbmVuYWJsZXMgbGludGluZyB3aXRoIHRoYXQgc291cmNlLiBJdCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciB0aGVcbmVkaXRvciBpcyBpZGxlIChhZnRlciBpdHMgY29udGVudCBjaGFuZ2VkKS4gSWYgYG51bGxgIGlzIGdpdmVuIGFzXG5zb3VyY2UsIHRoaXMgb25seSBjb25maWd1cmVzIHRoZSBsaW50IGV4dGVuc2lvbi5cbiovXG5mdW5jdGlvbiBsaW50ZXIoc291cmNlLCBjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIGxpbnRDb25maWcub2YoeyBzb3VyY2UsIGNvbmZpZyB9KSxcbiAgICAgICAgbGludFBsdWdpbixcbiAgICAgICAgbGludEV4dGVuc2lvbnNcbiAgICBdO1xufVxuLyoqXG5Gb3JjZXMgYW55IGxpbnRlcnMgW2NvbmZpZ3VyZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGludC5saW50ZXIpIHRvIHJ1biB3aGVuIHRoZVxuZWRpdG9yIGlzIGlkbGUgdG8gcnVuIHJpZ2h0IGF3YXkuXG4qL1xuZnVuY3Rpb24gZm9yY2VMaW50aW5nKHZpZXcpIHtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW4obGludFBsdWdpbik7XG4gICAgaWYgKHBsdWdpbilcbiAgICAgICAgcGx1Z2luLmZvcmNlKCk7XG59XG5mdW5jdGlvbiBhc3NpZ25LZXlzKGFjdGlvbnMpIHtcbiAgICBsZXQgYXNzaWduZWQgPSBbXTtcbiAgICBpZiAoYWN0aW9ucylcbiAgICAgICAgYWN0aW9uczogZm9yIChsZXQgeyBuYW1lIH0gb2YgYWN0aW9ucykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoID0gbmFtZVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoL1thLXpBLVpdLy50ZXN0KGNoKSAmJiAhYXNzaWduZWQuc29tZShjID0+IGMudG9Mb3dlckNhc2UoKSA9PSBjaC50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBhc3NpZ25lZC5wdXNoKGNoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgYWN0aW9ucztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25lZC5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgcmV0dXJuIGFzc2lnbmVkO1xufVxuZnVuY3Rpb24gcmVuZGVyRGlhZ25vc3RpYyh2aWV3LCBkaWFnbm9zdGljLCBpblBhbmVsKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBrZXlzID0gaW5QYW5lbCA/IGFzc2lnbktleXMoZGlhZ25vc3RpYy5hY3Rpb25zKSA6IFtdO1xuICAgIHJldHVybiBlbHQoXCJsaVwiLCB7IGNsYXNzOiBcImNtLWRpYWdub3N0aWMgY20tZGlhZ25vc3RpYy1cIiArIGRpYWdub3N0aWMuc2V2ZXJpdHkgfSwgZWx0KFwic3BhblwiLCB7IGNsYXNzOiBcImNtLWRpYWdub3N0aWNUZXh0XCIgfSwgZGlhZ25vc3RpYy5yZW5kZXJNZXNzYWdlID8gZGlhZ25vc3RpYy5yZW5kZXJNZXNzYWdlKHZpZXcpIDogZGlhZ25vc3RpYy5tZXNzYWdlKSwgKF9hID0gZGlhZ25vc3RpYy5hY3Rpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChhY3Rpb24sIGkpID0+IHtcbiAgICAgICAgbGV0IGZpcmVkID0gZmFsc2UsIGNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChmaXJlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBmaXJlZCA9IHRydWU7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmaW5kRGlhZ25vc3RpYyh2aWV3LnN0YXRlLmZpZWxkKGxpbnRTdGF0ZSkuZGlhZ25vc3RpY3MsIGRpYWdub3N0aWMpO1xuICAgICAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgICAgICAgIGFjdGlvbi5hcHBseSh2aWV3LCBmb3VuZC5mcm9tLCBmb3VuZC50byk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCB7IG5hbWUgfSA9IGFjdGlvbiwga2V5SW5kZXggPSBrZXlzW2ldID8gbmFtZS5pbmRleE9mKGtleXNbaV0pIDogLTE7XG4gICAgICAgIGxldCBuYW1lRWx0ID0ga2V5SW5kZXggPCAwID8gbmFtZSA6IFtuYW1lLnNsaWNlKDAsIGtleUluZGV4KSxcbiAgICAgICAgICAgIGVsdChcInVcIiwgbmFtZS5zbGljZShrZXlJbmRleCwga2V5SW5kZXggKyAxKSksXG4gICAgICAgICAgICBuYW1lLnNsaWNlKGtleUluZGV4ICsgMSldO1xuICAgICAgICByZXR1cm4gZWx0KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBjbGFzczogXCJjbS1kaWFnbm9zdGljQWN0aW9uXCIsXG4gICAgICAgICAgICBvbmNsaWNrOiBjbGljayxcbiAgICAgICAgICAgIG9ubW91c2Vkb3duOiBjbGljayxcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBgIEFjdGlvbjogJHtuYW1lfSR7a2V5SW5kZXggPCAwID8gXCJcIiA6IGAgKGFjY2VzcyBrZXkgXCIke2tleXNbaV19KVwiYH0uYFxuICAgICAgICB9LCBuYW1lRWx0KTtcbiAgICB9KSwgZGlhZ25vc3RpYy5zb3VyY2UgJiYgZWx0KFwiZGl2XCIsIHsgY2xhc3M6IFwiY20tZGlhZ25vc3RpY1NvdXJjZVwiIH0sIGRpYWdub3N0aWMuc291cmNlKSk7XG59XG5jbGFzcyBEaWFnbm9zdGljV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Ioc2V2KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2V2ID0gc2V2O1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuc2V2ID09IHRoaXMuc2V2OyB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIHJldHVybiBlbHQoXCJzcGFuXCIsIHsgY2xhc3M6IFwiY20tbGludFBvaW50IGNtLWxpbnRQb2ludC1cIiArIHRoaXMuc2V2IH0pO1xuICAgIH1cbn1cbmNsYXNzIFBhbmVsSXRlbSB7XG4gICAgY29uc3RydWN0b3IodmlldywgZGlhZ25vc3RpYykge1xuICAgICAgICB0aGlzLmRpYWdub3N0aWMgPSBkaWFnbm9zdGljO1xuICAgICAgICB0aGlzLmlkID0gXCJpdGVtX1wiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZikudG9TdHJpbmcoMTYpO1xuICAgICAgICB0aGlzLmRvbSA9IHJlbmRlckRpYWdub3N0aWModmlldywgZGlhZ25vc3RpYywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZG9tLmlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5kb20uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcIm9wdGlvblwiKTtcbiAgICB9XG59XG5jbGFzcyBMaW50UGFuZWwge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICBsZXQgb25rZXlkb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICBjbG9zZUxpbnRQYW5lbCh0aGlzLnZpZXcpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAzOCB8fCBldmVudC5rZXlDb2RlID09IDMzKSB7IC8vIEFycm93VXAsIFBhZ2VVcFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbigodGhpcy5zZWxlY3RlZEluZGV4IC0gMSArIHRoaXMuaXRlbXMubGVuZ3RoKSAlIHRoaXMuaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gNDAgfHwgZXZlbnQua2V5Q29kZSA9PSAzNCkgeyAvLyBBcnJvd0Rvd24sIFBhZ2VEb3duXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKCh0aGlzLnNlbGVjdGVkSW5kZXggKyAxKSAlIHRoaXMuaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gMzYpIHsgLy8gSG9tZVxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbigwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gMzUpIHsgLy8gRW5kXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKHRoaXMuaXRlbXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7IC8vIEVudGVyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID49IDY1ICYmIGV2ZW50LmtleUNvZGUgPD0gOTAgJiYgdGhpcy5zZWxlY3RlZEluZGV4ID49IDApIHsgLy8gQS1aXG4gICAgICAgICAgICAgICAgbGV0IHsgZGlhZ25vc3RpYyB9ID0gdGhpcy5pdGVtc1t0aGlzLnNlbGVjdGVkSW5kZXhdLCBrZXlzID0gYXNzaWduS2V5cyhkaWFnbm9zdGljLmFjdGlvbnMpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXNbaV0udG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApID09IGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZpbmREaWFnbm9zdGljKHRoaXMudmlldy5zdGF0ZS5maWVsZChsaW50U3RhdGUpLmRpYWdub3N0aWNzLCBkaWFnbm9zdGljKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFnbm9zdGljLmFjdGlvbnNbaV0uYXBwbHkodmlldywgZm91bmQuZnJvbSwgZm91bmQudG8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgb25jbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbaV0uZG9tLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbihpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0ID0gZWx0KFwidWxcIiwge1xuICAgICAgICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICAgICAgICByb2xlOiBcImxpc3Rib3hcIixcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnZpZXcuc3RhdGUucGhyYXNlKFwiRGlhZ25vc3RpY3NcIiksXG4gICAgICAgICAgICBvbmtleWRvd24sXG4gICAgICAgICAgICBvbmNsaWNrXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbSA9IGVsdChcImRpdlwiLCB7IGNsYXNzOiBcImNtLXBhbmVsLWxpbnRcIiB9LCB0aGlzLmxpc3QsIGVsdChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgbmFtZTogXCJjbG9zZVwiLFxuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRoaXMudmlldy5zdGF0ZS5waHJhc2UoXCJjbG9zZVwiKSxcbiAgICAgICAgICAgIG9uY2xpY2s6ICgpID0+IGNsb3NlTGludFBhbmVsKHRoaXMudmlldylcbiAgICAgICAgfSwgXCLDl1wiKSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZEluZGV4KCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKS5zZWxlY3RlZDtcbiAgICAgICAgaWYgKCFzZWxlY3RlZClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbaV0uZGlhZ25vc3RpYyA9PSBzZWxlY3RlZC5kaWFnbm9zdGljKVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IHsgZGlhZ25vc3RpY3MsIHNlbGVjdGVkIH0gPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKTtcbiAgICAgICAgbGV0IGkgPSAwLCBuZWVkc1N5bmMgPSBmYWxzZSwgbmV3U2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICAgICAgbGV0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgIGRpYWdub3N0aWNzLmJldHdlZW4oMCwgdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGgsIChfc3RhcnQsIF9lbmQsIHsgc3BlYyB9KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBkaWFnbm9zdGljIG9mIHNwZWMuZGlhZ25vc3RpY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5oYXMoZGlhZ25vc3RpYykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHNlZW4uYWRkKGRpYWdub3N0aWMpO1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IC0xLCBpdGVtO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbal0uZGlhZ25vc3RpYyA9PSBkaWFnbm9zdGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGo7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBQYW5lbEl0ZW0odGhpcy52aWV3LCBkaWFnbm9zdGljKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gdGhpcy5pdGVtc1tmb3VuZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGksIGZvdW5kIC0gaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1N5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCAmJiBpdGVtLmRpYWdub3N0aWMgPT0gc2VsZWN0ZWQuZGlhZ25vc3RpYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uZG9tLmhhc0F0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmRvbS5oYXNBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZG9tLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5pdGVtcy5sZW5ndGggJiYgISh0aGlzLml0ZW1zLmxlbmd0aCA9PSAxICYmIHRoaXMuaXRlbXNbMF0uZGlhZ25vc3RpYy5mcm9tIDwgMCkpIHtcbiAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IFBhbmVsSXRlbSh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgICAgICBmcm9tOiAtMSwgdG86IC0xLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiBcImluZm9cIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLnZpZXcuc3RhdGUucGhyYXNlKFwiTm8gZGlhZ25vc3RpY3NcIilcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1NlbGVjdGVkSXRlbSkge1xuICAgICAgICAgICAgdGhpcy5saXN0LnNldEF0dHJpYnV0ZShcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLCBuZXdTZWxlY3RlZEl0ZW0uaWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHtcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMsXG4gICAgICAgICAgICAgICAgcmVhZDogKCkgPT4gKHsgc2VsOiBuZXdTZWxlY3RlZEl0ZW0uZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBwYW5lbDogdGhpcy5saXN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIH0pLFxuICAgICAgICAgICAgICAgIHdyaXRlOiAoeyBzZWwsIHBhbmVsIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlWSA9IHBhbmVsLmhlaWdodCAvIHRoaXMubGlzdC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWwudG9wIDwgcGFuZWwudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0LnNjcm9sbFRvcCAtPSAocGFuZWwudG9wIC0gc2VsLnRvcCkgLyBzY2FsZVk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbC5ib3R0b20gPiBwYW5lbC5ib3R0b20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Quc2Nyb2xsVG9wICs9IChzZWwuYm90dG9tIC0gcGFuZWwuYm90dG9tKSAvIHNjYWxlWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3QucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZWVkc1N5bmMpXG4gICAgICAgICAgICB0aGlzLnN5bmMoKTtcbiAgICB9XG4gICAgc3luYygpIHtcbiAgICAgICAgbGV0IGRvbVBvcyA9IHRoaXMubGlzdC5maXJzdENoaWxkO1xuICAgICAgICBmdW5jdGlvbiBybSgpIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gZG9tUG9zO1xuICAgICAgICAgICAgZG9tUG9zID0gcHJldi5uZXh0U2libGluZztcbiAgICAgICAgICAgIHByZXYucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmxpc3QpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZG9tUG9zICE9IGl0ZW0uZG9tKVxuICAgICAgICAgICAgICAgICAgICBybSgpO1xuICAgICAgICAgICAgICAgIGRvbVBvcyA9IGl0ZW0uZG9tLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Lmluc2VydEJlZm9yZShpdGVtLmRvbSwgZG9tUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoZG9tUG9zKVxuICAgICAgICAgICAgcm0oKTtcbiAgICB9XG4gICAgbW92ZVNlbGVjdGlvbihzZWxlY3RlZEluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZmllbGQgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKTtcbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IGZpbmREaWFnbm9zdGljKGZpZWxkLmRpYWdub3N0aWNzLCB0aGlzLml0ZW1zW3NlbGVjdGVkSW5kZXhdLmRpYWdub3N0aWMpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogeyBhbmNob3I6IHNlbGVjdGlvbi5mcm9tLCBoZWFkOiBzZWxlY3Rpb24udG8gfSxcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlLFxuICAgICAgICAgICAgZWZmZWN0czogbW92ZVBhbmVsU2VsZWN0aW9uLm9mKHNlbGVjdGlvbilcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKHZpZXcpIHsgcmV0dXJuIG5ldyBMaW50UGFuZWwodmlldyk7IH1cbn1cbmZ1bmN0aW9uIHN2Zyhjb250ZW50LCBhdHRycyA9IGB2aWV3Qm94PVwiMCAwIDQwIDQwXCJgKSB7XG4gICAgcmV0dXJuIGB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAke2F0dHJzfT4ke2VuY29kZVVSSUNvbXBvbmVudChjb250ZW50KX08L3N2Zz4nKWA7XG59XG5mdW5jdGlvbiB1bmRlcmxpbmUoY29sb3IpIHtcbiAgICByZXR1cm4gc3ZnKGA8cGF0aCBkPVwibTAgMi41IGwyIC0xLjUgbDEgMCBsMiAxLjUgbDEgMFwiIHN0cm9rZT1cIiR7Y29sb3J9XCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIuN1wiLz5gLCBgd2lkdGg9XCI2XCIgaGVpZ2h0PVwiM1wiYCk7XG59XG5jb25zdCBiYXNlVGhlbWUgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLWRpYWdub3N0aWNcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjNweCA2cHggM3B4IDhweFwiLFxuICAgICAgICBtYXJnaW5MZWZ0OiBcIi0xcHhcIixcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcInByZS13cmFwXCJcbiAgICB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtZXJyb3JcIjogeyBib3JkZXJMZWZ0OiBcIjVweCBzb2xpZCAjZDExXCIgfSxcbiAgICBcIi5jbS1kaWFnbm9zdGljLXdhcm5pbmdcIjogeyBib3JkZXJMZWZ0OiBcIjVweCBzb2xpZCBvcmFuZ2VcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtaW5mb1wiOiB7IGJvcmRlckxlZnQ6IFwiNXB4IHNvbGlkICM5OTlcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtaGludFwiOiB7IGJvcmRlckxlZnQ6IFwiNXB4IHNvbGlkICM2NmRcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWNBY3Rpb25cIjoge1xuICAgICAgICBmb250OiBcImluaGVyaXRcIixcbiAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgcGFkZGluZzogXCIycHggNHB4XCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjNDQ0XCIsXG4gICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIzcHhcIixcbiAgICAgICAgbWFyZ2luTGVmdDogXCI4cHhcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgIH0sXG4gICAgXCIuY20tZGlhZ25vc3RpY1NvdXJjZVwiOiB7XG4gICAgICAgIGZvbnRTaXplOiBcIjcwJVwiLFxuICAgICAgICBvcGFjaXR5OiAuN1xuICAgIH0sXG4gICAgXCIuY20tbGludFJhbmdlXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBcImxlZnQgYm90dG9tXCIsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6IFwicmVwZWF0LXhcIixcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogXCIwLjdweFwiLFxuICAgIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWVycm9yXCI6IHsgYmFja2dyb3VuZEltYWdlOiAvKkBfX1BVUkVfXyovdW5kZXJsaW5lKFwiI2QxMVwiKSB9LFxuICAgIFwiLmNtLWxpbnRSYW5nZS13YXJuaW5nXCI6IHsgYmFja2dyb3VuZEltYWdlOiAvKkBfX1BVUkVfXyovdW5kZXJsaW5lKFwib3JhbmdlXCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWluZm9cIjogeyBiYWNrZ3JvdW5kSW1hZ2U6IC8qQF9fUFVSRV9fKi91bmRlcmxpbmUoXCIjOTk5XCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWhpbnRcIjogeyBiYWNrZ3JvdW5kSW1hZ2U6IC8qQF9fUFVSRV9fKi91bmRlcmxpbmUoXCIjNjZkXCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWFjdGl2ZVwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjZmZkZDk5ODBcIiB9LFxuICAgIFwiLmNtLXRvb2x0aXAtbGludFwiOiB7XG4gICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgIG1hcmdpbjogMFxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50XCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICBsZWZ0OiBcIi0ycHhcIixcbiAgICAgICAgICAgIGJvcmRlckxlZnQ6IFwiM3B4IHNvbGlkIHRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICBib3JkZXJSaWdodDogXCIzcHggc29saWQgdHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbTogXCI0cHggc29saWQgI2QxMVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLWxpbnRQb2ludC13YXJuaW5nXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgYm9yZGVyQm90dG9tQ29sb3I6IFwib3JhbmdlXCIgfVxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50LWluZm9cIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBib3JkZXJCb3R0b21Db2xvcjogXCIjOTk5XCIgfVxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50LWhpbnRcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBib3JkZXJCb3R0b21Db2xvcjogXCIjNjZkXCIgfVxuICAgIH0sXG4gICAgXCIuY20tcGFuZWwuY20tcGFuZWwtbGludFwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIFwiJiB1bFwiOiB7XG4gICAgICAgICAgICBtYXhIZWlnaHQ6IFwiMTAwcHhcIixcbiAgICAgICAgICAgIG92ZXJmbG93WTogXCJhdXRvXCIsXG4gICAgICAgICAgICBcIiYgW2FyaWEtc2VsZWN0ZWRdXCI6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2RkZFwiLFxuICAgICAgICAgICAgICAgIFwiJiB1XCI6IHsgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCIgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJjpmb2N1cyBbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRfZmFsbGJhY2s6IFwiI2JkZlwiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJIaWdobGlnaHRcIixcbiAgICAgICAgICAgICAgICBjb2xvcl9mYWxsYmFjazogXCJ3aGl0ZVwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIkhpZ2hsaWdodFRleHRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJiB1XCI6IHsgdGV4dERlY29yYXRpb246IFwibm9uZVwiIH0sXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgbWFyZ2luOiAwXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBbbmFtZT1jbG9zZV1cIjoge1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgICByaWdodDogXCIycHhcIixcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZvbnQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgIG1hcmdpbjogMFxuICAgICAgICB9XG4gICAgfVxufSk7XG5mdW5jdGlvbiBzZXZlcml0eVdlaWdodChzZXYpIHtcbiAgICByZXR1cm4gc2V2ID09IFwiZXJyb3JcIiA/IDQgOiBzZXYgPT0gXCJ3YXJuaW5nXCIgPyAzIDogc2V2ID09IFwiaW5mb1wiID8gMiA6IDE7XG59XG5mdW5jdGlvbiBtYXhTZXZlcml0eShkaWFnbm9zdGljcykge1xuICAgIGxldCBzZXYgPSBcImhpbnRcIiwgd2VpZ2h0ID0gMTtcbiAgICBmb3IgKGxldCBkIG9mIGRpYWdub3N0aWNzKSB7XG4gICAgICAgIGxldCB3ID0gc2V2ZXJpdHlXZWlnaHQoZC5zZXZlcml0eSk7XG4gICAgICAgIGlmICh3ID4gd2VpZ2h0KSB7XG4gICAgICAgICAgICB3ZWlnaHQgPSB3O1xuICAgICAgICAgICAgc2V2ID0gZC5zZXZlcml0eTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V2O1xufVxuY2xhc3MgTGludEd1dHRlck1hcmtlciBleHRlbmRzIEd1dHRlck1hcmtlciB7XG4gICAgY29uc3RydWN0b3IoZGlhZ25vc3RpY3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kaWFnbm9zdGljcyA9IGRpYWdub3N0aWNzO1xuICAgICAgICB0aGlzLnNldmVyaXR5ID0gbWF4U2V2ZXJpdHkoZGlhZ25vc3RpY3MpO1xuICAgIH1cbiAgICB0b0RPTSh2aWV3KSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gXCJjbS1saW50LW1hcmtlciBjbS1saW50LW1hcmtlci1cIiArIHRoaXMuc2V2ZXJpdHk7XG4gICAgICAgIGxldCBkaWFnbm9zdGljcyA9IHRoaXMuZGlhZ25vc3RpY3M7XG4gICAgICAgIGxldCBkaWFnbm9zdGljc0ZpbHRlciA9IHZpZXcuc3RhdGUuZmFjZXQobGludEd1dHRlckNvbmZpZykudG9vbHRpcEZpbHRlcjtcbiAgICAgICAgaWYgKGRpYWdub3N0aWNzRmlsdGVyKVxuICAgICAgICAgICAgZGlhZ25vc3RpY3MgPSBkaWFnbm9zdGljc0ZpbHRlcihkaWFnbm9zdGljcywgdmlldy5zdGF0ZSk7XG4gICAgICAgIGlmIChkaWFnbm9zdGljcy5sZW5ndGgpXG4gICAgICAgICAgICBlbHQub25tb3VzZW92ZXIgPSAoKSA9PiBndXR0ZXJNYXJrZXJNb3VzZU92ZXIodmlldywgZWx0LCBkaWFnbm9zdGljcyk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhY2tIb3Zlck9uKHZpZXcsIG1hcmtlcikge1xuICAgIGxldCBtb3VzZW1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHJlY3QgPSBtYXJrZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChldmVudC5jbGllbnRYID4gcmVjdC5sZWZ0IC0gMTAgLyogSG92ZXIuTWFyZ2luICovICYmIGV2ZW50LmNsaWVudFggPCByZWN0LnJpZ2h0ICsgMTAgLyogSG92ZXIuTWFyZ2luICovICYmXG4gICAgICAgICAgICBldmVudC5jbGllbnRZID4gcmVjdC50b3AgLSAxMCAvKiBIb3Zlci5NYXJnaW4gKi8gJiYgZXZlbnQuY2xpZW50WSA8IHJlY3QuYm90dG9tICsgMTAgLyogSG92ZXIuTWFyZ2luICovKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7IHRhcmdldDsgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMSAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY20tdG9vbHRpcC1saW50XCIpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyVG9vbHRpcCkpXG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0TGludEd1dHRlclRvb2x0aXAub2YobnVsbCkgfSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xufVxuZnVuY3Rpb24gZ3V0dGVyTWFya2VyTW91c2VPdmVyKHZpZXcsIG1hcmtlciwgZGlhZ25vc3RpY3MpIHtcbiAgICBmdW5jdGlvbiBob3ZlcmVkKCkge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcuZWxlbWVudEF0SGVpZ2h0KG1hcmtlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyA1IC0gdmlldy5kb2N1bWVudFRvcCk7XG4gICAgICAgIGNvbnN0IGxpbmVQb3MgPSB2aWV3LmNvb3Jkc0F0UG9zKGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChsaW5lUG9zKSB7XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0TGludEd1dHRlclRvb2x0aXAub2Yoe1xuICAgICAgICAgICAgICAgICAgICBwb3M6IGxpbmUuZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgYWJvdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbGlwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb206IGRpYWdub3N0aWNzVG9vbHRpcCh2aWV3LCBkaWFnbm9zdGljcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q29vcmRzOiAoKSA9PiBtYXJrZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSB9KTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrZXIub25tb3VzZW91dCA9IG1hcmtlci5vbm1vdXNlbW92ZSA9IG51bGw7XG4gICAgICAgIHRyYWNrSG92ZXJPbih2aWV3LCBtYXJrZXIpO1xuICAgIH1cbiAgICBsZXQgeyBob3ZlclRpbWUgfSA9IHZpZXcuc3RhdGUuZmFjZXQobGludEd1dHRlckNvbmZpZyk7XG4gICAgbGV0IGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoaG92ZXJlZCwgaG92ZXJUaW1lKTtcbiAgICBtYXJrZXIub25tb3VzZW91dCA9ICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIG1hcmtlci5vbm1vdXNlb3V0ID0gbWFya2VyLm9ubW91c2Vtb3ZlID0gbnVsbDtcbiAgICB9O1xuICAgIG1hcmtlci5vbm1vdXNlbW92ZSA9ICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoaG92ZXJlZCwgaG92ZXJUaW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbWFya2Vyc0ZvckRpYWdub3N0aWNzKGRvYywgZGlhZ25vc3RpY3MpIHtcbiAgICBsZXQgYnlMaW5lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBkaWFnbm9zdGljIG9mIGRpYWdub3N0aWNzKSB7XG4gICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChkaWFnbm9zdGljLmZyb20pO1xuICAgICAgICAoYnlMaW5lW2xpbmUuZnJvbV0gfHwgKGJ5TGluZVtsaW5lLmZyb21dID0gW10pKS5wdXNoKGRpYWdub3N0aWMpO1xuICAgIH1cbiAgICBsZXQgbWFya2VycyA9IFtdO1xuICAgIGZvciAobGV0IGxpbmUgaW4gYnlMaW5lKSB7XG4gICAgICAgIG1hcmtlcnMucHVzaChuZXcgTGludEd1dHRlck1hcmtlcihieUxpbmVbbGluZV0pLnJhbmdlKCtsaW5lKSk7XG4gICAgfVxuICAgIHJldHVybiBSYW5nZVNldC5vZihtYXJrZXJzLCB0cnVlKTtcbn1cbmNvbnN0IGxpbnRHdXR0ZXJFeHRlbnNpb24gPSAvKkBfX1BVUkVfXyovZ3V0dGVyKHtcbiAgICBjbGFzczogXCJjbS1ndXR0ZXItbGludFwiLFxuICAgIG1hcmtlcnM6IHZpZXcgPT4gdmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyTWFya2VycyksXG4gICAgd2lkZ2V0TWFya2VyOiAodmlldywgd2lkZ2V0LCBibG9jaykgPT4ge1xuICAgICAgICBsZXQgZGlhZ25vc3RpY3MgPSBbXTtcbiAgICAgICAgdmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyTWFya2VycykuYmV0d2VlbihibG9jay5mcm9tLCBibG9jay50bywgKGZyb20sIHRvLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGZyb20gPiBibG9jay5mcm9tICYmIGZyb20gPCBibG9jay50bylcbiAgICAgICAgICAgICAgICBkaWFnbm9zdGljcy5wdXNoKC4uLnZhbHVlLmRpYWdub3N0aWNzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWFnbm9zdGljcy5sZW5ndGggPyBuZXcgTGludEd1dHRlck1hcmtlcihkaWFnbm9zdGljcykgOiBudWxsO1xuICAgIH1cbn0pO1xuY29uc3QgbGludEd1dHRlck1hcmtlcnMgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIFJhbmdlU2V0LmVtcHR5O1xuICAgIH0sXG4gICAgdXBkYXRlKG1hcmtlcnMsIHRyKSB7XG4gICAgICAgIG1hcmtlcnMgPSBtYXJrZXJzLm1hcCh0ci5jaGFuZ2VzKTtcbiAgICAgICAgbGV0IGRpYWdub3N0aWNGaWx0ZXIgPSB0ci5zdGF0ZS5mYWNldChsaW50R3V0dGVyQ29uZmlnKS5tYXJrZXJGaWx0ZXI7XG4gICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldERpYWdub3N0aWNzRWZmZWN0KSkge1xuICAgICAgICAgICAgICAgIGxldCBkaWFnbm9zdGljcyA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZGlhZ25vc3RpY0ZpbHRlcilcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MgPSBkaWFnbm9zdGljRmlsdGVyKGRpYWdub3N0aWNzIHx8IFtdLCB0ci5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgbWFya2VycyA9IG1hcmtlcnNGb3JEaWFnbm9zdGljcyh0ci5zdGF0ZS5kb2MsIGRpYWdub3N0aWNzLnNsaWNlKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFya2VycztcbiAgICB9XG59KTtcbmNvbnN0IHNldExpbnRHdXR0ZXJUb29sdGlwID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgbGludEd1dHRlclRvb2x0aXAgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgdXBkYXRlKHRvb2x0aXAsIHRyKSB7XG4gICAgICAgIGlmICh0b29sdGlwICYmIHRyLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICB0b29sdGlwID0gaGlkZVRvb2x0aXAodHIsIHRvb2x0aXApID8gbnVsbCA6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdG9vbHRpcCksIHsgcG9zOiB0ci5jaGFuZ2VzLm1hcFBvcyh0b29sdGlwLnBvcykgfSk7XG4gICAgICAgIHJldHVybiB0ci5lZmZlY3RzLnJlZHVjZSgodCwgZSkgPT4gZS5pcyhzZXRMaW50R3V0dGVyVG9vbHRpcCkgPyBlLnZhbHVlIDogdCwgdG9vbHRpcCk7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmaWVsZCA9PiBzaG93VG9vbHRpcC5mcm9tKGZpZWxkKVxufSk7XG5jb25zdCBsaW50R3V0dGVyVGhlbWUgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLWd1dHRlci1saW50XCI6IHtcbiAgICAgICAgd2lkdGg6IFwiMS40ZW1cIixcbiAgICAgICAgXCImIC5jbS1ndXR0ZXJFbGVtZW50XCI6IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IFwiLjJlbVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLWxpbnQtbWFya2VyXCI6IHtcbiAgICAgICAgd2lkdGg6IFwiMWVtXCIsXG4gICAgICAgIGhlaWdodDogXCIxZW1cIlxuICAgIH0sXG4gICAgXCIuY20tbGludC1tYXJrZXItaW5mb1wiOiB7XG4gICAgICAgIGNvbnRlbnQ6IC8qQF9fUFVSRV9fKi9zdmcoYDxwYXRoIGZpbGw9XCIjYWFmXCIgc3Ryb2tlPVwiIzc3ZVwiIHN0cm9rZS13aWR0aD1cIjZcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNNSA1TDM1IDVMMzUgMzVMNSAzNVpcIi8+YClcbiAgICB9LFxuICAgIFwiLmNtLWxpbnQtbWFya2VyLXdhcm5pbmdcIjoge1xuICAgICAgICBjb250ZW50OiAvKkBfX1BVUkVfXyovc3ZnKGA8cGF0aCBmaWxsPVwiI2ZlOFwiIHN0cm9rZT1cIiNmZDdcIiBzdHJva2Utd2lkdGg9XCI2XCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTIwIDZMMzcgMzVMMyAzNVpcIi8+YCksXG4gICAgfSxcbiAgICBcIi5jbS1saW50LW1hcmtlci1lcnJvclwiOiB7XG4gICAgICAgIGNvbnRlbnQ6IC8qQF9fUFVSRV9fKi9zdmcoYDxjaXJjbGUgY3g9XCIyMFwiIGN5PVwiMjBcIiByPVwiMTVcIiBmaWxsPVwiI2Y4N1wiIHN0cm9rZT1cIiNmNDNcIiBzdHJva2Utd2lkdGg9XCI2XCIvPmApXG4gICAgfSxcbn0pO1xuY29uc3QgbGludEV4dGVuc2lvbnMgPSBbXG4gICAgbGludFN0YXRlLFxuICAgIC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmRlY29yYXRpb25zLmNvbXB1dGUoW2xpbnRTdGF0ZV0sIHN0YXRlID0+IHtcbiAgICAgICAgbGV0IHsgc2VsZWN0ZWQsIHBhbmVsIH0gPSBzdGF0ZS5maWVsZChsaW50U3RhdGUpO1xuICAgICAgICByZXR1cm4gIXNlbGVjdGVkIHx8ICFwYW5lbCB8fCBzZWxlY3RlZC5mcm9tID09IHNlbGVjdGVkLnRvID8gRGVjb3JhdGlvbi5ub25lIDogRGVjb3JhdGlvbi5zZXQoW1xuICAgICAgICAgICAgYWN0aXZlTWFyay5yYW5nZShzZWxlY3RlZC5mcm9tLCBzZWxlY3RlZC50bylcbiAgICAgICAgXSk7XG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL2hvdmVyVG9vbHRpcChsaW50VG9vbHRpcCwgeyBoaWRlT246IGhpZGVUb29sdGlwIH0pLFxuICAgIGJhc2VUaGVtZVxuXTtcbmNvbnN0IGxpbnRHdXR0ZXJDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgaG92ZXJUaW1lOiAzMDAgLyogSG92ZXIuVGltZSAqLyxcbiAgICAgICAgICAgIG1hcmtlckZpbHRlcjogbnVsbCxcbiAgICAgICAgICAgIHRvb2x0aXBGaWx0ZXI6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcblJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgaW5zdGFsbHMgYSBndXR0ZXIgc2hvd2luZyBtYXJrZXJzIGZvclxuZWFjaCBsaW5lIHRoYXQgaGFzIGRpYWdub3N0aWNzLCB3aGljaCBjYW4gYmUgaG92ZXJlZCBvdmVyIHRvIHNlZVxudGhlIGRpYWdub3N0aWNzLlxuKi9cbmZ1bmN0aW9uIGxpbnRHdXR0ZXIoY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW2xpbnRHdXR0ZXJDb25maWcub2YoY29uZmlnKSwgbGludEd1dHRlck1hcmtlcnMsIGxpbnRHdXR0ZXJFeHRlbnNpb24sIGxpbnRHdXR0ZXJUaGVtZSwgbGludEd1dHRlclRvb2x0aXBdO1xufVxuLyoqXG5JdGVyYXRlIG92ZXIgdGhlIG1hcmtlZCBkaWFnbm9zdGljcyBmb3IgdGhlIGdpdmVuIGVkaXRvciBzdGF0ZSxcbmNhbGxpbmcgYGZgIGZvciBlYWNoIG9mIHRoZW0uIE5vdGUgdGhhdCwgaWYgdGhlIGRvY3VtZW50IGNoYW5nZWRcbnNpbmNlIHRoZSBkaWFnbm9zdGljcyB3ZXJlIGNyZWF0ZWQsIHRoZSBgRGlhZ25vc3RpY2Agb2JqZWN0IHdpbGxcbmhvbGQgdGhlIG9yaWdpbmFsIG91dGRhdGVkIHBvc2l0aW9uLCB3aGVyZWFzIHRoZSBgdG9gIGFuZCBgZnJvbWBcbmFyZ3VtZW50cyBob2xkIHRoZSBkaWFnbm9zdGljJ3MgY3VycmVudCBwb3NpdGlvbi5cbiovXG5mdW5jdGlvbiBmb3JFYWNoRGlhZ25vc3RpYyhzdGF0ZSwgZikge1xuICAgIGxldCBsU3RhdGUgPSBzdGF0ZS5maWVsZChsaW50U3RhdGUsIGZhbHNlKTtcbiAgICBpZiAobFN0YXRlICYmIGxTdGF0ZS5kaWFnbm9zdGljcy5zaXplKSB7XG4gICAgICAgIGxldCBwZW5kaW5nID0gW10sIHBlbmRpbmdTdGFydCA9IFtdLCBsYXN0RW5kID0gLTE7XG4gICAgICAgIGZvciAobGV0IGl0ZXIgPSBSYW5nZVNldC5pdGVyKFtsU3RhdGUuZGlhZ25vc3RpY3NdKTs7IGl0ZXIubmV4dCgpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBlbmRpbmcubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKCFpdGVyLnZhbHVlIHx8IGl0ZXIudmFsdWUuc3BlYy5kaWFnbm9zdGljcy5pbmRleE9mKHBlbmRpbmdbaV0pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBmKHBlbmRpbmdbaV0sIHBlbmRpbmdTdGFydFtpXSwgbGFzdEVuZCk7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3RhcnQuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpdGVyLnZhbHVlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBpdGVyLnZhbHVlLnNwZWMuZGlhZ25vc3RpY3MpXG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmcuaW5kZXhPZihkKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKGQpO1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3RhcnQucHVzaChpdGVyLmZyb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RFbmQgPSBpdGVyLnRvO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBjbG9zZUxpbnRQYW5lbCwgZGlhZ25vc3RpY0NvdW50LCBmb3JFYWNoRGlhZ25vc3RpYywgZm9yY2VMaW50aW5nLCBsaW50R3V0dGVyLCBsaW50S2V5bWFwLCBsaW50ZXIsIG5leHREaWFnbm9zdGljLCBvcGVuTGludFBhbmVsLCBwcmV2aW91c0RpYWdub3N0aWMsIHNldERpYWdub3N0aWNzLCBzZXREaWFnbm9zdGljc0VmZmVjdCB9O1xuIiwKICAgICJpbXBvcnQgeyBsaW5lTnVtYmVycywgaGlnaGxpZ2h0QWN0aXZlTGluZUd1dHRlciwgaGlnaGxpZ2h0U3BlY2lhbENoYXJzLCBkcmF3U2VsZWN0aW9uLCBkcm9wQ3Vyc29yLCByZWN0YW5ndWxhclNlbGVjdGlvbiwgY3Jvc3NoYWlyQ3Vyc29yLCBoaWdobGlnaHRBY3RpdmVMaW5lLCBrZXltYXAgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmV4cG9ydCB7IEVkaXRvclZpZXcgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IEVkaXRvclN0YXRlIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgZm9sZEd1dHRlciwgaW5kZW50T25JbnB1dCwgc3ludGF4SGlnaGxpZ2h0aW5nLCBkZWZhdWx0SGlnaGxpZ2h0U3R5bGUsIGJyYWNrZXRNYXRjaGluZywgZm9sZEtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IGhpc3RvcnksIGRlZmF1bHRLZXltYXAsIGhpc3RvcnlLZXltYXAgfSBmcm9tICdAY29kZW1pcnJvci9jb21tYW5kcyc7XG5pbXBvcnQgeyBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzLCBzZWFyY2hLZXltYXAgfSBmcm9tICdAY29kZW1pcnJvci9zZWFyY2gnO1xuaW1wb3J0IHsgY2xvc2VCcmFja2V0cywgYXV0b2NvbXBsZXRpb24sIGNsb3NlQnJhY2tldHNLZXltYXAsIGNvbXBsZXRpb25LZXltYXAgfSBmcm9tICdAY29kZW1pcnJvci9hdXRvY29tcGxldGUnO1xuaW1wb3J0IHsgbGludEtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xpbnQnO1xuXG4vLyAoVGhlIHN1cGVyZmx1b3VzIGZ1bmN0aW9uIGNhbGxzIGFyb3VuZCB0aGUgbGlzdCBvZiBleHRlbnNpb25zIHdvcmtcbi8vIGFyb3VuZCBjdXJyZW50IGxpbWl0YXRpb25zIGluIHRyZWUtc2hha2luZyBzb2Z0d2FyZS4pXG4vKipcblRoaXMgaXMgYW4gZXh0ZW5zaW9uIHZhbHVlIHRoYXQganVzdCBwdWxscyB0b2dldGhlciBhIG51bWJlciBvZlxuZXh0ZW5zaW9ucyB0aGF0IHlvdSBtaWdodCB3YW50IGluIGEgYmFzaWMgZWRpdG9yLiBJdCBpcyBtZWFudCBhcyBhXG5jb252ZW5pZW50IGhlbHBlciB0byBxdWlja2x5IHNldCB1cCBDb2RlTWlycm9yIHdpdGhvdXQgaW5zdGFsbGluZ1xuYW5kIGltcG9ydGluZyBhIGxvdCBvZiBzZXBhcmF0ZSBwYWNrYWdlcy5cblxuU3BlY2lmaWNhbGx5LCBpdCBpbmNsdWRlcy4uLlxuXG4gLSBbdGhlIGRlZmF1bHQgY29tbWFuZCBiaW5kaW5nc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWZhdWx0S2V5bWFwKVxuIC0gW2xpbmUgbnVtYmVyc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmxpbmVOdW1iZXJzKVxuIC0gW3NwZWNpYWwgY2hhcmFjdGVyIGhpZ2hsaWdodGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmhpZ2hsaWdodFNwZWNpYWxDaGFycylcbiAtIFt0aGUgdW5kbyBoaXN0b3J5XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmhpc3RvcnkpXG4gLSBbYSBmb2xkIGd1dHRlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkR3V0dGVyKVxuIC0gW2N1c3RvbSBzZWxlY3Rpb24gZHJhd2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pXG4gLSBbZHJvcCBjdXJzb3JdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5kcm9wQ3Vyc29yKVxuIC0gW211bHRpcGxlIHNlbGVjdGlvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpXG4gLSBbcmVpbmRlbnRhdGlvbiBvbiBpbnB1dF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRPbklucHV0KVxuIC0gW3RoZSBkZWZhdWx0IGhpZ2hsaWdodCBzdHlsZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5kZWZhdWx0SGlnaGxpZ2h0U3R5bGUpIChhcyBmYWxsYmFjaylcbiAtIFticmFja2V0IG1hdGNoaW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmJyYWNrZXRNYXRjaGluZylcbiAtIFticmFja2V0IGNsb3NpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmNsb3NlQnJhY2tldHMpXG4gLSBbYXV0b2NvbXBsZXRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmF1dG9jb21wbGV0aW9uKVxuIC0gW3JlY3Rhbmd1bGFyIHNlbGVjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LnJlY3Rhbmd1bGFyU2VsZWN0aW9uKSBhbmQgW2Nyb3NzaGFpciBjdXJzb3JdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5jcm9zc2hhaXJDdXJzb3IpXG4gLSBbYWN0aXZlIGxpbmUgaGlnaGxpZ2h0aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuaGlnaGxpZ2h0QWN0aXZlTGluZSlcbiAtIFthY3RpdmUgbGluZSBndXR0ZXIgaGlnaGxpZ2h0aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuaGlnaGxpZ2h0QWN0aXZlTGluZUd1dHRlcilcbiAtIFtzZWxlY3Rpb24gbWF0Y2ggaGlnaGxpZ2h0aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5oaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzKVxuIC0gW3NlYXJjaF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guc2VhcmNoS2V5bWFwKVxuIC0gW2xpbnRpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGludC5saW50S2V5bWFwKVxuXG4oWW91J2xsIHByb2JhYmx5IHdhbnQgdG8gYWRkIHNvbWUgbGFuZ3VhZ2UgcGFja2FnZSB0byB5b3VyIHNldHVwXG50b28uKVxuXG5UaGlzIGV4dGVuc2lvbiBkb2VzIG5vdCBhbGxvdyBjdXN0b21pemF0aW9uLiBUaGUgaWRlYSBpcyB0aGF0LFxub25jZSB5b3UgZGVjaWRlIHlvdSB3YW50IHRvIGNvbmZpZ3VyZSB5b3VyIGVkaXRvciBtb3JlIHByZWNpc2VseSxcbnlvdSB0YWtlIHRoaXMgcGFja2FnZSdzIHNvdXJjZSAod2hpY2ggaXMganVzdCBhIGJ1bmNoIG9mIGltcG9ydHNcbmFuZCBhbiBhcnJheSBsaXRlcmFsKSwgY29weSBpdCBpbnRvIHlvdXIgb3duIGNvZGUsIGFuZCBhZGp1c3QgaXRcbmFzIGRlc2lyZWQuXG4qL1xuY29uc3QgYmFzaWNTZXR1cCA9IC8qQF9fUFVSRV9fKi8oKCkgPT4gW1xuICAgIGxpbmVOdW1iZXJzKCksXG4gICAgaGlnaGxpZ2h0QWN0aXZlTGluZUd1dHRlcigpLFxuICAgIGhpZ2hsaWdodFNwZWNpYWxDaGFycygpLFxuICAgIGhpc3RvcnkoKSxcbiAgICBmb2xkR3V0dGVyKCksXG4gICAgZHJhd1NlbGVjdGlvbigpLFxuICAgIGRyb3BDdXJzb3IoKSxcbiAgICBFZGl0b3JTdGF0ZS5hbGxvd011bHRpcGxlU2VsZWN0aW9ucy5vZih0cnVlKSxcbiAgICBpbmRlbnRPbklucHV0KCksXG4gICAgc3ludGF4SGlnaGxpZ2h0aW5nKGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgeyBmYWxsYmFjazogdHJ1ZSB9KSxcbiAgICBicmFja2V0TWF0Y2hpbmcoKSxcbiAgICBjbG9zZUJyYWNrZXRzKCksXG4gICAgYXV0b2NvbXBsZXRpb24oKSxcbiAgICByZWN0YW5ndWxhclNlbGVjdGlvbigpLFxuICAgIGNyb3NzaGFpckN1cnNvcigpLFxuICAgIGhpZ2hsaWdodEFjdGl2ZUxpbmUoKSxcbiAgICBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzKCksXG4gICAga2V5bWFwLm9mKFtcbiAgICAgICAgLi4uY2xvc2VCcmFja2V0c0tleW1hcCxcbiAgICAgICAgLi4uZGVmYXVsdEtleW1hcCxcbiAgICAgICAgLi4uc2VhcmNoS2V5bWFwLFxuICAgICAgICAuLi5oaXN0b3J5S2V5bWFwLFxuICAgICAgICAuLi5mb2xkS2V5bWFwLFxuICAgICAgICAuLi5jb21wbGV0aW9uS2V5bWFwLFxuICAgICAgICAuLi5saW50S2V5bWFwXG4gICAgXSlcbl0pKCk7XG4vKipcbkEgbWluaW1hbCBzZXQgb2YgZXh0ZW5zaW9ucyB0byBjcmVhdGUgYSBmdW5jdGlvbmFsIGVkaXRvci4gT25seVxuaW5jbHVkZXMgW3RoZSBkZWZhdWx0IGtleW1hcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWZhdWx0S2V5bWFwKSwgW3VuZG9cbmhpc3RvcnldKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaGlzdG9yeSksIFtzcGVjaWFsIGNoYXJhY3RlclxuaGlnaGxpZ2h0aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuaGlnaGxpZ2h0U3BlY2lhbENoYXJzKSwgW2N1c3RvbSBzZWxlY3Rpb25cbmRyYXdpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5kcmF3U2VsZWN0aW9uKSwgYW5kIFtkZWZhdWx0IGhpZ2hsaWdodFxuc3R5bGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZGVmYXVsdEhpZ2hsaWdodFN0eWxlKS5cbiovXG5jb25zdCBtaW5pbWFsU2V0dXAgPSAvKkBfX1BVUkVfXyovKCgpID0+IFtcbiAgICBoaWdobGlnaHRTcGVjaWFsQ2hhcnMoKSxcbiAgICBoaXN0b3J5KCksXG4gICAgZHJhd1NlbGVjdGlvbigpLFxuICAgIHN5bnRheEhpZ2hsaWdodGluZyhkZWZhdWx0SGlnaGxpZ2h0U3R5bGUsIHsgZmFsbGJhY2s6IHRydWUgfSksXG4gICAga2V5bWFwLm9mKFtcbiAgICAgICAgLi4uZGVmYXVsdEtleW1hcCxcbiAgICAgICAgLi4uaGlzdG9yeUtleW1hcCxcbiAgICBdKVxuXSkoKTtcblxuZXhwb3J0IHsgYmFzaWNTZXR1cCwgbWluaW1hbFNldHVwIH07XG4iLAogICAgImxldCB3YXNtO1xuXG5sZXQgV0FTTV9WRUNUT1JfTEVOID0gMDtcblxubGV0IGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0VWludDhBcnJheU1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwID09PSBudWxsIHx8IGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGVkVWludDhBcnJheU1lbW9yeTAgPSBuZXcgVWludDhBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVkVWludDhBcnJheU1lbW9yeTA7XG59XG5cbmNvbnN0IGNhY2hlZFRleHRFbmNvZGVyID0gKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04JykgOiB7IGVuY29kZTogKCkgPT4geyB0aHJvdyBFcnJvcignVGV4dEVuY29kZXIgbm90IGF2YWlsYWJsZScpIH0gfSApO1xuXG5jb25zdCBlbmNvZGVTdHJpbmcgPSAodHlwZW9mIGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZUludG8gPT09ICdmdW5jdGlvbidcbiAgICA/IGZ1bmN0aW9uIChhcmcsIHZpZXcpIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlSW50byhhcmcsIHZpZXcpO1xufVxuICAgIDogZnVuY3Rpb24gKGFyZywgdmlldykge1xuICAgIGNvbnN0IGJ1ZiA9IGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZShhcmcpO1xuICAgIHZpZXcuc2V0KGJ1Zik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVhZDogYXJnLmxlbmd0aCxcbiAgICAgICAgd3JpdHRlbjogYnVmLmxlbmd0aFxuICAgIH07XG59KTtcblxuZnVuY3Rpb24gcGFzc1N0cmluZ1RvV2FzbTAoYXJnLCBtYWxsb2MsIHJlYWxsb2MpIHtcblxuICAgIGlmIChyZWFsbG9jID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgYnVmID0gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlKGFyZyk7XG4gICAgICAgIGNvbnN0IHB0ciA9IG1hbGxvYyhidWYubGVuZ3RoLCAxKSA+Pj4gMDtcbiAgICAgICAgZ2V0VWludDhBcnJheU1lbW9yeTAoKS5zdWJhcnJheShwdHIsIHB0ciArIGJ1Zi5sZW5ndGgpLnNldChidWYpO1xuICAgICAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBidWYubGVuZ3RoO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBhcmcubGVuZ3RoO1xuICAgIGxldCBwdHIgPSBtYWxsb2MobGVuLCAxKSA+Pj4gMDtcblxuICAgIGNvbnN0IG1lbSA9IGdldFVpbnQ4QXJyYXlNZW1vcnkwKCk7XG5cbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIGZvciAoOyBvZmZzZXQgPCBsZW47IG9mZnNldCsrKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBhcmcuY2hhckNvZGVBdChvZmZzZXQpO1xuICAgICAgICBpZiAoY29kZSA+IDB4N0YpIGJyZWFrO1xuICAgICAgICBtZW1bcHRyICsgb2Zmc2V0XSA9IGNvZGU7XG4gICAgfVxuXG4gICAgaWYgKG9mZnNldCAhPT0gbGVuKSB7XG4gICAgICAgIGlmIChvZmZzZXQgIT09IDApIHtcbiAgICAgICAgICAgIGFyZyA9IGFyZy5zbGljZShvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHB0ciA9IHJlYWxsb2MocHRyLCBsZW4sIGxlbiA9IG9mZnNldCArIGFyZy5sZW5ndGggKiAzLCAxKSA+Pj4gMDtcbiAgICAgICAgY29uc3QgdmlldyA9IGdldFVpbnQ4QXJyYXlNZW1vcnkwKCkuc3ViYXJyYXkocHRyICsgb2Zmc2V0LCBwdHIgKyBsZW4pO1xuICAgICAgICBjb25zdCByZXQgPSBlbmNvZGVTdHJpbmcoYXJnLCB2aWV3KTtcblxuICAgICAgICBvZmZzZXQgKz0gcmV0LndyaXR0ZW47XG4gICAgICAgIHB0ciA9IHJlYWxsb2MocHRyLCBsZW4sIG9mZnNldCwgMSkgPj4+IDA7XG4gICAgfVxuXG4gICAgV0FTTV9WRUNUT1JfTEVOID0gb2Zmc2V0O1xuICAgIHJldHVybiBwdHI7XG59XG5cbmNvbnN0IGNhY2hlZFRleHREZWNvZGVyID0gKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JywgeyBpZ25vcmVCT006IHRydWUsIGZhdGFsOiB0cnVlIH0pIDogeyBkZWNvZGU6ICgpID0+IHsgdGhyb3cgRXJyb3IoJ1RleHREZWNvZGVyIG5vdCBhdmFpbGFibGUnKSB9IH0gKTtcblxuaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHsgY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKCk7IH07XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHB0ciA9IHB0ciA+Pj4gMDtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4QXJyYXlNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRyYWNlXG4gKiBAcGFyYW0ge251bWJlcn0gY3ljbGVzX2hpdFxuICogQHBhcmFtIHtudW1iZXJ9IGN5Y2xlc19taXNzXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcnVuX3NpbXVsYXRpb24odHJhY2UsIGN5Y2xlc19oaXQsIGN5Y2xlc19taXNzKSB7XG4gICAgbGV0IGRlZmVycmVkMl8wO1xuICAgIGxldCBkZWZlcnJlZDJfMTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwdHIwID0gcGFzc1N0cmluZ1RvV2FzbTAodHJhY2UsIHdhc20uX193YmluZGdlbl9tYWxsb2MsIHdhc20uX193YmluZGdlbl9yZWFsbG9jKTtcbiAgICAgICAgY29uc3QgbGVuMCA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS5ydW5fc2ltdWxhdGlvbihwdHIwLCBsZW4wLCBjeWNsZXNfaGl0LCBjeWNsZXNfbWlzcyk7XG4gICAgICAgIGRlZmVycmVkMl8wID0gcmV0WzBdO1xuICAgICAgICBkZWZlcnJlZDJfMSA9IHJldFsxXTtcbiAgICAgICAgcmV0dXJuIGdldFN0cmluZ0Zyb21XYXNtMChyZXRbMF0sIHJldFsxXSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUoZGVmZXJyZWQyXzAsIGRlZmVycmVkMl8xLCAxKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fd2JnX2xvYWQobW9kdWxlLCBpbXBvcnRzKSB7XG4gICAgaWYgKHR5cGVvZiBSZXNwb25zZSA9PT0gJ2Z1bmN0aW9uJyAmJiBtb2R1bGUgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgICAgICBpZiAodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhtb2R1bGUsIGltcG9ydHMpO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykgIT0gJ2FwcGxpY2F0aW9uL3dhc20nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZ2AgZmFpbGVkIGJlY2F1c2UgeW91ciBzZXJ2ZXIgZG9lcyBub3Qgc2VydmUgV2FzbSB3aXRoIGBhcHBsaWNhdGlvbi93YXNtYCBNSU1FIHR5cGUuIEZhbGxpbmcgYmFjayB0byBgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVgIHdoaWNoIGlzIHNsb3dlci4gT3JpZ2luYWwgZXJyb3I6XFxuXCIsIGUpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBieXRlcyA9IGF3YWl0IG1vZHVsZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnl0ZXMsIGltcG9ydHMpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShtb2R1bGUsIGltcG9ydHMpO1xuXG4gICAgICAgIGlmIChpbnN0YW5jZSBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5Lkluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpbnN0YW5jZSwgbW9kdWxlIH07XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gX193YmdfZ2V0X2ltcG9ydHMoKSB7XG4gICAgY29uc3QgaW1wb3J0cyA9IHt9O1xuICAgIGltcG9ydHMud2JnID0ge307XG4gICAgaW1wb3J0cy53YmcuX193YmluZGdlbl9pbml0X2V4dGVybnJlZl90YWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0YWJsZSA9IHdhc20uX193YmluZGdlbl9leHBvcnRfMDtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGFibGUuZ3Jvdyg0KTtcbiAgICAgICAgdGFibGUuc2V0KDAsIHVuZGVmaW5lZCk7XG4gICAgICAgIHRhYmxlLnNldChvZmZzZXQgKyAwLCB1bmRlZmluZWQpO1xuICAgICAgICB0YWJsZS5zZXQob2Zmc2V0ICsgMSwgbnVsbCk7XG4gICAgICAgIHRhYmxlLnNldChvZmZzZXQgKyAyLCB0cnVlKTtcbiAgICAgICAgdGFibGUuc2V0KG9mZnNldCArIDMsIGZhbHNlKTtcbiAgICAgICAgO1xuICAgIH07XG5cbiAgICByZXR1cm4gaW1wb3J0cztcbn1cblxuZnVuY3Rpb24gX193YmdfaW5pdF9tZW1vcnkoaW1wb3J0cywgbWVtb3J5KSB7XG5cbn1cblxuZnVuY3Rpb24gX193YmdfZmluYWxpemVfaW5pdChpbnN0YW5jZSwgbW9kdWxlKSB7XG4gICAgd2FzbSA9IGluc3RhbmNlLmV4cG9ydHM7XG4gICAgX193YmdfaW5pdC5fX3diaW5kZ2VuX3dhc21fbW9kdWxlID0gbW9kdWxlO1xuICAgIGNhY2hlZFVpbnQ4QXJyYXlNZW1vcnkwID0gbnVsbDtcblxuXG4gICAgd2FzbS5fX3diaW5kZ2VuX3N0YXJ0KCk7XG4gICAgcmV0dXJuIHdhc207XG59XG5cbmZ1bmN0aW9uIGluaXRTeW5jKG1vZHVsZSkge1xuICAgIGlmICh3YXNtICE9PSB1bmRlZmluZWQpIHJldHVybiB3YXNtO1xuXG5cbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihtb2R1bGUpID09PSBPYmplY3QucHJvdG90eXBlKSB7XG4gICAgICAgICAgICAoe21vZHVsZX0gPSBtb2R1bGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3VzaW5nIGRlcHJlY2F0ZWQgcGFyYW1ldGVycyBmb3IgYGluaXRTeW5jKClgOyBwYXNzIGEgc2luZ2xlIG9iamVjdCBpbnN0ZWFkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGltcG9ydHMgPSBfX3diZ19nZXRfaW1wb3J0cygpO1xuXG4gICAgX193YmdfaW5pdF9tZW1vcnkoaW1wb3J0cyk7XG5cbiAgICBpZiAoIShtb2R1bGUgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5Nb2R1bGUpKSB7XG4gICAgICAgIG1vZHVsZSA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUobW9kdWxlKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShtb2R1bGUsIGltcG9ydHMpO1xuXG4gICAgcmV0dXJuIF9fd2JnX2ZpbmFsaXplX2luaXQoaW5zdGFuY2UsIG1vZHVsZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fd2JnX2luaXQobW9kdWxlX29yX3BhdGgpIHtcbiAgICBpZiAod2FzbSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gd2FzbTtcblxuXG4gICAgaWYgKHR5cGVvZiBtb2R1bGVfb3JfcGF0aCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihtb2R1bGVfb3JfcGF0aCkgPT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICh7bW9kdWxlX29yX3BhdGh9ID0gbW9kdWxlX29yX3BhdGgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3VzaW5nIGRlcHJlY2F0ZWQgcGFyYW1ldGVycyBmb3IgdGhlIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uOyBwYXNzIGEgc2luZ2xlIG9iamVjdCBpbnN0ZWFkJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbW9kdWxlX29yX3BhdGggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZHVsZV9vcl9wYXRoID0gbmV3IFVSTCgnaWNhY2hlX3NpbV9iZy53YXNtJywgaW1wb3J0Lm1ldGEudXJsKTtcbiAgICB9XG4gICAgY29uc3QgaW1wb3J0cyA9IF9fd2JnX2dldF9pbXBvcnRzKCk7XG5cbiAgICBpZiAodHlwZW9mIG1vZHVsZV9vcl9wYXRoID09PSAnc3RyaW5nJyB8fCAodHlwZW9mIFJlcXVlc3QgPT09ICdmdW5jdGlvbicgJiYgbW9kdWxlX29yX3BhdGggaW5zdGFuY2VvZiBSZXF1ZXN0KSB8fCAodHlwZW9mIFVSTCA9PT0gJ2Z1bmN0aW9uJyAmJiBtb2R1bGVfb3JfcGF0aCBpbnN0YW5jZW9mIFVSTCkpIHtcbiAgICAgICAgbW9kdWxlX29yX3BhdGggPSBmZXRjaChtb2R1bGVfb3JfcGF0aCk7XG4gICAgfVxuXG4gICAgX193YmdfaW5pdF9tZW1vcnkoaW1wb3J0cyk7XG5cbiAgICBjb25zdCB7IGluc3RhbmNlLCBtb2R1bGUgfSA9IGF3YWl0IF9fd2JnX2xvYWQoYXdhaXQgbW9kdWxlX29yX3BhdGgsIGltcG9ydHMpO1xuXG4gICAgcmV0dXJuIF9fd2JnX2ZpbmFsaXplX2luaXQoaW5zdGFuY2UsIG1vZHVsZSk7XG59XG5cbmV4cG9ydCB7IGluaXRTeW5jIH07XG5leHBvcnQgZGVmYXVsdCBfX3diZ19pbml0O1xuIiwKICAgICJpbXBvcnQgeyBFZGl0b3JWaWV3LCBiYXNpY1NldHVwIH0gZnJvbSBcImNvZGVtaXJyb3JcIjtcclxuaW1wb3J0IGluaXQsIHsgcnVuX3NpbXVsYXRpb24gfSBmcm9tIFwiLi9pY2FjaGVfc2ltL2ljYWNoZV9zaW0uanNcIjtcclxuXHJcbi8vIGltcG9ydCBzbyBidW4gaW5jbHVkZXMgd2FzbSBibG9iIHdoZW4gYnVuZGxpbmdcclxuaW1wb3J0ICogYXMgd2FzbSBmcm9tIFwiLi9pY2FjaGVfc2ltL2ljYWNoZV9zaW1fYmcud2FzbVwiO1xyXG4vLyB1c2UgdGhlIGltcG9ydCBpbiBzb21lIHdheSBzbyBpdCBkb2Vzbid0IGdldCBvcHRpbWl6ZWQgYXdheVxyXG4oXyA9PiB7IH0pKHdhc20pO1xyXG5cclxuY29uc3QgZWRpdG9yID0gbmV3IEVkaXRvclZpZXcoe1xyXG4gICAgZG9jOiBcIlwiLFxyXG4gICAgcGFyZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRvclwiKSEsXHJcbiAgICBleHRlbnNpb25zOiBbYmFzaWNTZXR1cF0sXHJcbn0pO1xyXG5cclxuY29uc3Qgb3V0cHV0ID0gbmV3IEVkaXRvclZpZXcoe1xyXG4gICAgZG9jOiBcImNsaWNrICdSdW4nIHRvIHNpbXVsYXRlXCIsXHJcbiAgICBwYXJlbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3V0cHV0XCIpISxcclxuICAgIGV4dGVuc2lvbnM6IFtFZGl0b3JWaWV3LmVkaXRhYmxlLm9mKGZhbHNlKV0sXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2V0VGV4dChjbTogRWRpdG9yVmlldywgdGV4dDogc3RyaW5nKSB7XHJcbiAgICBjbS5kaXNwYXRjaCh7XHJcbiAgICAgICAgY2hhbmdlczogeyBmcm9tOiAwLCB0bzogY20uc3RhdGUuZG9jLmxlbmd0aCwgaW5zZXJ0OiB0ZXh0IH0sXHJcbiAgICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2V0VHJhY2UodHJhY2U6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAvaWNhY2hlX3NpbS90cmFjZXMvJHt0cmFjZX1gKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxyXG4gICAgICAgIC50aGVuKCh0cmFjZSkgPT4gc2V0VGV4dChlZGl0b3IsIHRyYWNlKSk7XHJcbn1cclxuXHJcbmluaXQoKS50aGVuKCgpID0+IHtcclxuICAgIGNvbnN0IGhpdEN5Y2xlc0lucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNoaXQtY3ljbGVzLWlucHV0XCIpITtcclxuICAgIGNvbnN0IG1pc3NDeWNsZXNJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWlzcy1jeWNsZXMtaW5wdXRcIikhO1xyXG4gICAgY29uc3Qgc2ltdWxhdGVCdG46IEhUTUxCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzaW11bGF0ZS1idG5cIikhO1xyXG4gICAgc2ltdWxhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBzZXRUZXh0KG91dHB1dCwgXCJydW5uaW5nIHNpbXVsYXRpb24gLi4uXCIpO1xyXG4gICAgICAgIC8vIGRlbGF5IHdhc20gc2ltdWxhdGlvbiB0byBnaXZlIGpzIHRpbWUgdG8gdXBkYXRlIHRoZSB0ZXh0IGJlZm9yZSBibG9ja2luZyB0aGUgVUlcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdHJhY2UgPSBlZGl0b3Iuc3RhdGUuZG9jLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJ1bl9zaW11bGF0aW9uKHRyYWNlLCBwYXJzZUludChoaXRDeWNsZXNJbnB1dC52YWx1ZSksIHBhcnNlSW50KG1pc3NDeWNsZXNJbnB1dC52YWx1ZSkpO1xyXG4gICAgICAgICAgICBzZXRUZXh0KG91dHB1dCwgcmVzdWx0KTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHRyYWNlc1NlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RyYWNlcy1zZWxlY3RcIikhO1xyXG4gICAgdHJhY2VzU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcclxuXHJcbiAgICAgICAgc2V0VHJhY2UoKGUudGFyZ2V0ISBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgICBzZXRUcmFjZSh0cmFjZXNTZWxlY3QudmFsdWUpO1xyXG59KTtcclxuIgogIF0sCiAgIm1hcHBpbmdzIjogImlJQUVBLElBQUksR0FBWSxDQUFDLEVBQUcsR0FBVSxDQUFDLEdBRTdCLElBQU0sQ0FPTixJQUFJLEVBQVUsaXpDQUFpekMsTUFBTSxHQUFHLEVBQUUsSUFBSSxLQUFLLEVBQUksU0FBUyxFQUFHLEVBQUUsRUFBSSxDQUFDLEVBQzEyQyxRQUFTLEVBQUksRUFBRyxFQUFJLEVBQUcsRUFBSSxFQUFRLE9BQVEsS0FDeEMsRUFBSSxFQUFJLEdBQVUsSUFBVyxLQUFLLEVBQUksRUFBSSxFQUFRLEVBQUUsSUFDdEQsRUFFSSxTQUFTLEVBQWUsQ0FBQyxFQUFNLENBQ3BDLEdBQUksRUFBTyxJQUFLLE1BQU8sR0FDdkIsUUFBUyxFQUFPLEVBQUcsRUFBSyxHQUFVLFNBQVUsQ0FDMUMsSUFBSSxFQUFPLEVBQU8sR0FBTyxFQUN6QixHQUFJLEVBQU8sR0FBVSxHQUFNLEVBQUssRUFDM0IsUUFBSSxHQUFRLEdBQVEsR0FBTSxFQUFPLEVBQU0sRUFDdkMsV0FBTyxHQUNaLEdBQUksR0FBUSxFQUFJLE1BQU8sSUFJM0IsU0FBUyxFQUFtQixDQUFDLEVBQU0sQ0FDakMsT0FBTyxHQUFRLFFBQVcsR0FBUSxPQVVwQyxJQUFNLEdBQU0sS0FFTCxTQUFTLEVBQWdCLENBQUMsRUFBSyxFQUFLLEVBQVUsR0FBTSxFQUFtQixHQUFNLENBQ2xGLE9BQVEsRUFBVSxHQUFtQixJQUFrQixFQUFLLEVBQUssQ0FBZ0IsRUFHbkYsU0FBUyxFQUFnQixDQUFDLEVBQUssRUFBSyxFQUFrQixDQUNwRCxHQUFJLEdBQU8sRUFBSSxPQUFRLE9BQU8sRUFFOUIsR0FBSSxHQUFPLEdBQWEsRUFB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VUFBYSxPQUFPLFVBQVksWUFBYyxhQUEwQixTQUFhLE9BQU8sTUFBUSxZQUFjLGFBQTBCLElBQ3RLLEVBQWlCLE1BQU0sQ0FBYyxFQUd6QyxHQUFrQixDQUFPLEVBRXpCLElBQVEsV0FBVSxVQUFXLE1BQU0sR0FBVyxNQUFNLEVBQWdCLENBQU8sRUFFM0UsT0FBTyxHQUFvQixFQUFVLENBQU0sRUFJL0MsSUFBZSw0RUM5TWQsS0FBSyxJQUFLLEVBQUksRUFFZixJQUFNLEdBQVMsSUFBSSxFQUFXLENBQzFCLElBQUssR0FDTCxPQUFRLFNBQVMsY0FBYyxTQUFTLEVBQ3hDLFdBQVksQ0FBQyxFQUFVLENBQzNCLENBQUMsRUFFSyxHQUFTLElBQUksRUFBVyxDQUMxQixJQUFLLDBCQUNMLE9BQVEsU0FBUyxjQUFjLFNBQVMsRUFDeEMsV0FBWSxDQUFDLEVBQVcsU0FBUyxHQUFHLEVBQUssQ0FBQyxDQUM5QyxDQUFDLEVBRUQsU0FBUyxFQUFPLENBQUMsRUFBZ0IsRUFBYyxDQUMzQyxFQUFHLFNBQVMsQ0FDUixRQUFTLENBQUUsS0FBTSxFQUFHLEdBQUksRUFBRyxNQUFNLElBQUksT0FBUSxPQUFRLENBQUssQ0FDOUQsQ0FBQyxFQUdMLGVBQWUsRUFBUSxDQUFDLEVBQWUsQ0FDbkMsT0FBTyxNQUFNLHNCQUFzQixHQUFPLEVBQ3JDLEtBQUssQ0FBQyxJQUFhLEVBQVMsS0FBSyxDQUFDLEVBQ2xDLEtBQUssQ0FBQyxJQUFVLEdBQVEsR0FBUSxDQUFLLENBQUMsRUFHL0MsR0FBSyxFQUFFLEtBQUssSUFBTSxDQUNkLElBQU0sRUFBbUMsU0FBUyxjQUFjLG1CQUFtQixFQUM3RSxFQUFvQyxTQUFTLGNBQWMsb0JBQW9CLEVBQzlDLFNBQVMsY0FBYyxlQUFlLEVBQ2pFLGlCQUFpQixRQUFTLElBQU0sQ0FDeEMsR0FBUSxHQUFRLHdCQUF3QixFQUV4QyxXQUFXLElBQU0sQ0FDYixJQUFNLEVBQVEsR0FBTyxNQUFNLElBQUksU0FBUyxFQUNsQyxFQUFTLEdBQWUsRUFBTyxTQUFTLEVBQWUsS0FBSyxFQUFHLFNBQVMsRUFBZ0IsS0FBSyxDQUFDLEVBQ3BHLEdBQVEsR0FBUSxDQUFNLEdBQ3ZCLENBQUMsRUFDUCxFQUVELElBQU0sRUFBa0MsU0FBUyxjQUFjLGdCQUFnQixFQUMvRSxFQUFhLGlCQUFpQixTQUFVLENBQUMsSUFBTSxDQUUzQyxHQUFVLEVBQUUsT0FBOEIsS0FBSyxFQUNsRCxFQUNELEdBQVMsRUFBYSxLQUFLLEVBQzlCIiwKICAiZGVidWdJZCI6ICI2RTIxRDZENUY5QjY2QUZENjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
